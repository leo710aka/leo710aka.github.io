<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>QuÃ© miras Bobo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="QuÃ© miras Bobo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="QuÃ© miras Bobo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="fengcai">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="QuÃ© miras Bobo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="https://github.com/leo710aka/bk/blob/main/DT1.jpg?raw=true">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">QuÃ© miras Bobo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-æ¯•ä¸šè®¾è®¡" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/01/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" class="article-date">
  <time class="dt-published" datetime="2024-05-01T03:11:00.000Z" itemprop="datePublished">2024-05-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/01/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/">æ¯• ä¸š è®¾ è®¡</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <!-- æ¯• ä¸š ğŸ“ è®¾ è®¡ -->

<h2 id="é€‰-é¢˜"><a href="#é€‰-é¢˜" class="headerlink" title="é€‰ é¢˜"></a><strong>é€‰ é¢˜</strong></h2><p><em>åŸºäºå†…åœ°ä¸é¦™æ¸¯é‡‘èå¹³å°çš„åœ¨çº¿é‡åŒ–æŠ•èµ„çš„æ•°æ®åŸå‹ç³»ç»Ÿçš„è®¾è®¡ä¸å¼€å‘_</em>_</p>
<h3 id="è®ºæ–‡ç»“æ„"><a href="#è®ºæ–‡ç»“æ„" class="headerlink" title="è®ºæ–‡ç»“æ„"></a>è®ºæ–‡ç»“æ„</h3><p>æ‘˜ è¦ II<br>Abstract III<br>ç›® å½• V<br>ç¬¬ä¸€ç«  ç»ªè®º<br>1.1 å¼•è¨€<br>1.2 ç ”ç©¶èƒŒæ™¯<br>1.3 ç ”ç©¶ç°çŠ¶<br>1.4 è¯¾é¢˜æ¥æºåŠæ„ä¹‰<br>1.5 è®ºæ–‡ç»“æ„<br>ç¬¬äºŒç«  æ•°æ®åŸå‹ç³»ç»Ÿå¼€å‘ç¯å¢ƒå’Œå·¥å…·<br>2.1 Pythonçˆ¬è™«<br>2.2 Djangoæ¡†æ¶<br>2.3 è®¾è®¡æ¨¡å¼<br>2.4 å‰ç«¯å¼€å‘æ¡†æ¶<br>2.5 å¼€æºå›¾å½¢åº“ ECharts<br>2.6 æœ¬ç« å°ç»“<br>ç¬¬ä¸‰ç«  æ•°æ®åŸå‹ç³»ç»Ÿæ¶æ„è®¾è®¡<br>3.1 ç»¼åˆæ€§é‡‘èç³»ç»Ÿæ¶æ„è®¾è®¡<br>3.2 æ•°æ®åŸå‹ç³»ç»Ÿæ¶æ„è®¾è®¡<br>3.3 åŠŸèƒ½æ¥å£è®¾è®¡<br>3.4 æ•°æ®åº“è®¾è®¡<br>ç¬¬å››ç«  æ•°æ®åŸå‹ç³»ç»Ÿçš„å®ç°<br>4.1ä»é‡‘èå¹³å°è·å–æ•°æ®å®ç°<br>4.2 æ•°æ®åº“æŸ¥è¯¢å®ç°<br>4.3 æ•°æ®å¯è§†åŒ–å®ç°<br>4.4 Echarts å›¾å½¢åº“æ¸²æŸ“ç”Ÿæˆç»Ÿè®¡å›¾è¡¨<br>4.5 æ•°æ®ä¸‹è½½æ¥å£å®ç°<br>4.6 æ•°æ®ç»´æŠ¤æ¥å£å®ç°<br>ç¬¬äº”ç«  æ•°æ®åŸå‹ç³»ç»Ÿçš„æµ‹è¯•åŠç»“æœ<br>5.1 æ•°æ®æ›´æ–°æ¨¡å—æµ‹è¯•<br>5.2 æ•°æ®ä¸‹è½½æ¨¡å—æµ‹è¯•<br>5.3 æ•°æ®åˆ†ææ¨¡å—æµ‹è¯•<br>5.4 æ•°æ®ç»´æŠ¤æ¨¡å—æµ‹è¯•<br>5.5 æœ¬ç« å°ç»“<br>ç¬¬å…­ç«  ç»“è®º<br>1.è®ºæ–‡å·¥ä½œæ€»ç»“<br>2.å·¥ä½œå±•æœ›<br>å‚è€ƒæ–‡çŒ®<br>è‡´è°¢</p>
<h3 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h3><ul>
<li>é¦™æ¸¯å¸‚åœºè‚¡ç¥¨æ•°æ®åº“çš„æ„å»º<ul>
<li>MySqlæ•°æ®åº“ï¼šè‚¡ç¥¨ã€åŸºé‡‘ã€æœŸè´§</li>
<li>æ•°æ®åº“è¡¨ç»“æ„ï¼šå‚è€ƒæ—§è®ºæ–‡&#x2F;ç›´æ¥ç”¨ä¸œæ–¹è´¢å¯Œç½‘è¡¨å¤´</li>
<li>ç”¨pythonçˆ¬è™«çˆ¬å–æ•°æ®, æ•°æ®æ¸…æ´—, çˆ¬å–å†å²æ•°æ®</li>
</ul>
</li>
<li>è·å–é¦™æ¸¯æœŸè´§ä»£ç  \spider\Get_Future_Info.py<ul>
<li>æ•°æ®åº“åˆ›å»º  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CreateDatabase</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, new_database</span>):</span><br><span class="line">        self.new_database = new_database</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_new_database</span>(<span class="params">self</span>):</span><br><span class="line">        connection = pymysql.connect(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, user=<span class="string">&#x27;root&#x27;</span>, password=<span class="string">&#x27;078114&#x27;</span>, cursorclass=pymysql.cursors.DictCursor)</span><br><span class="line">        new_database_name = self.new_database</span><br><span class="line">        cursor = connection.cursor()</span><br><span class="line">        cursor.execute(<span class="string">f&quot;CREATE DATABASE <span class="subst">&#123;new_database_name&#125;</span>&quot;</span>)</span><br><span class="line">        cursor.close()</span><br><span class="line">        connection.close()</span><br></pre></td></tr></table></figure></li>
<li>æ•°æ®åº“æ“ä½œ  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Database</span>:          </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">InsertFutureInfo</span>(<span class="params">self, item</span>):  <span class="comment"># æ’å…¥æ•°æ®</span></span><br><span class="line">        mydb = pymysql.connect(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">3306</span>, user=<span class="string">&#x27;root&#x27;</span>, password=<span class="string">&#x27;078114&#x27;</span>, database=<span class="string">&#x27;finance&#x27;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">        cursor = mydb.cursor()</span><br><span class="line">        sql = <span class="string">&quot;insert into futureinfo values(%s, %s)&quot;</span></span><br><span class="line">        cursor.executemany(sql, item) <span class="comment"># è¦ä¼ å…¥ä¸€ä¸ªäºŒç»´åˆ—è¡¨æˆ–å…ƒç»„çš„åˆ—è¡¨ä½œä¸ºå‚æ•° itemï¼Œæ¯ä¸ªå­åˆ—è¡¨æˆ–å…ƒç»„åº”åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼Œå¯¹åº”ç€ SQL è¯­å¥ä¸­çš„ä¸¤ä¸ª %sï¼Œç”¨äºæ’å…¥æ•°æ®åº“è¡¨ä¸­çš„ä¸¤ä¸ªå­—æ®µçš„å€¼</span></span><br><span class="line">        mydb.commit()</span><br><span class="line">        cursor.close()</span><br><span class="line">        mydb.close()</span><br></pre></td></tr></table></figure></li>
<li>çˆ¬è™«æ“ä½œ  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–æœŸè´§åˆ—è¡¨ï¼šä¸œæ–¹è´¢å¯Œç½‘ä»Šå¤©æœŸè´§å¸‚åœºä¸­æ¸¯äº¤æ‰€çš„æœŸè´§åˆ—è¡¨ä¿¡æ¯ï¼ˆ??ä¸ç¡®å®šæ˜¯ä¸æ˜¯å®Œæ•´æœŸè´§ä¿¡æ¯ï¼‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getInfo</span>(<span class="params">self</span>): </span><br><span class="line">    url_base = <span class="string">&#x27;https://futsseapi.eastmoney.com/list/HKSTOCKF?callback=aaa_callback&amp;xx&#x27;</span></span><br><span class="line">    all_data = <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">30</span>): <span class="comment"># é»˜è®¤30é¡µï¼Ÿ</span></span><br><span class="line">        url = url_base.<span class="built_in">format</span>(size=<span class="number">20</span>, page=i)</span><br><span class="line">        data_str = requests.get(url).text</span><br><span class="line">        json_str = data_str[data_str.index(<span class="string">&#x27;(&#x27;</span>) + <span class="number">1</span>:-<span class="number">1</span>] <span class="comment"># å»é™¤ JSON æ•°æ®ä¸­çš„å›è°ƒå‡½æ•°</span></span><br><span class="line">        data_list = json.loads(json_str)[<span class="string">&quot;list&quot;</span>]</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> data_list:</span><br><span class="line">            tmp = [item[<span class="string">&#x27;dm&#x27;</span>], item[<span class="string">&#x27;name&#x27;</span>]] <span class="comment"># æœŸè´§ä»£ç ï¼ŒæœŸè´§åç§°</span></span><br><span class="line">            all_data.append(tmp)</span><br><span class="line">    Database().InsertFutureInfo(all_data) </span><br></pre></td></tr></table></figure>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å†å²æœŸè´§æ•°æ®ï¼šé€šè¿‡ä¹‹å‰è·å–çš„æœŸè´§åˆ—è¡¨ä¿¡æ¯ï¼Œæ ¹æ®æœŸè´§ä»£ç è·å–å…¶å†å²ï¼ˆæ—¥çº¿ï¼‰æ•°æ®ï¼ˆ??ä¸ç¡®å®šå®Œæ•´ï¼‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHistory</span>(<span class="params">self</span>): </span><br><span class="line">    url_base = <span class="string">&#x27;https://push2his.eastmoney.com/api/qt/stock/kline/get?secid=130.&#123;secid&#125;&amp;xx&#x27;</span></span><br><span class="line">    all_data = <span class="built_in">list</span>()</span><br><span class="line">    code_list = Database().GetCodeList() <span class="comment"># è·å–æœŸè´§åˆ—è¡¨ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">for</span> dm <span class="keyword">in</span> tqdm(code_list):</span><br><span class="line">        url = url_base.<span class="built_in">format</span>(secid=dm) <span class="comment"># æ—¥çº¿æ•°æ®</span></span><br><span class="line">        response = requests.get(url=url, timeout=<span class="number">15</span>)</span><br><span class="line">        klines_data = json.loads(response.text)[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;klines&#x27;</span>]</span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> klines_data:</span><br><span class="line">            res_data = data.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">            res_data = [dm] + res_data <span class="comment"># å…ƒç»„é¦–ä½åŠ ä¸ŠæœŸè´§ä»£ç </span></span><br><span class="line">            all_data.append(res_data)</span><br><span class="line">    Database().InsertFutureHistory(all_data)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="ç³»ç»Ÿå¼€å‘"><a href="#ç³»ç»Ÿå¼€å‘" class="headerlink" title="ç³»ç»Ÿå¼€å‘"></a>ç³»ç»Ÿå¼€å‘</h2><ul>
<li>ç³»ç»Ÿæ¶æ„<ul>
<li>å‰ç«¯ï¼šDjango+Templateï¼ŒEcharts</li>
<li>åç«¯ï¼šDjangoï¼ŒMySQLï¼Œå®šæ—¶ä»»åŠ¡</li>
</ul>
</li>
<li>ä¸»è¦å·¥ä½œï¼ˆåŸï¼‰<ul>
<li>å››å¤§æ¨¡å—ï¼šæ•°æ®æ›´æ–°ã€æ•°æ®ä¸‹è½½ã€æ•°æ®åˆ†æã€æ•°æ®ç»´æŠ¤<ul>
<li>ä¸€ã€é¦™æ¸¯æ•°æ®<ol>
<li>æ•°æ®å®æ—¶æ›´æ–° ï¼ˆ1.1 æ•°æ®åˆ—è¡¨(é¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼Œé¦™æ¸¯äº¤æ˜“æ‰€),1.2 åŸºæœ¬ä¿¡æ¯æ•°æ®ï¼ˆè‚¡ç¥¨ã€åŸºé‡‘ã€æœŸè´§ï¼‰ï¼Œ1.3 åŸºæœ¬ä¿¡æ¯ï¼Œ 1.4 è´¢åŠ¡æŠ¥è¡¨ï¼Œ 1.5 é¦™æ¸¯å†å²äº¤æ˜“æ•°æ®ï¼ˆé¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼‰ï¼Œ 1.6 å½“æ—¥äº¤æ˜“æ•°æ®ï¼ˆé¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼‰ï¼‰ </li>
<li>æ•°æ®ä¸‹è½½ ï¼ˆ2.1 åˆ—è¡¨æ•°æ®ä¸‹è½½(é¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼Œé¦™æ¸¯äº¤æ˜“æ‰€)ï¼Œ2.2 åŸºæœ¬ä¿¡æ¯æ•°æ®ä¸‹è½½ï¼ˆè‚¡ç¥¨ã€åŸºé‡‘ã€æœŸè´§ï¼‰ï¼Œ2.3 åŸºæœ¬ä¿¡æ¯ä¸‹è½½ï¼Œ 2.4 è´¢åŠ¡æŠ¥è¡¨æ•°æ®ä¸‹è½½ï¼Œ 2.5 é¦™æ¸¯å†å²äº¤æ˜“æ•°æ®ä¸‹è½½ï¼ˆå¤§é™†è‚¡ç¥¨ï¼Œå¤§é™†åŸºé‡‘ï¼Œå¤§é™†æŒ‡æ•°ï¼Œå¤§é™†æœŸè´§ï¼‰ï¼Œ 2.6 å½“æ—¥äº¤æ˜“æ•°æ®ä¸‹è½½ï¼ˆé¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼‰ï¼‰</li>
<li>æ•°æ®åˆ†æ ï¼ˆ3.1 åˆ—è¡¨æ•°æ®åˆ†æ(é¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼Œé¦™æ¸¯äº¤æ˜“æ‰€)ï¼Œ3.2 åŸºæœ¬ä¿¡æ¯æ•°æ®åˆ†æï¼ˆè‚¡ç¥¨ã€åŸºé‡‘ã€æœŸè´§ï¼‰ï¼Œ3.3 åŸºæœ¬ä¿¡æ¯åˆ†æï¼Œ 3.4 è´¢åŠ¡æŠ¥è¡¨æ•°æ®åˆ†æï¼Œ 3.5 å¤§é™†å†å²äº¤æ˜“æ•°æ®åˆ†æï¼ˆå¤§é™†è‚¡ç¥¨ï¼Œå¤§é™†åŸºé‡‘ï¼Œå¤§é™†æŒ‡æ•°ï¼Œå¤§é™†æœŸè´§ï¼‰ï¼Œ 3.6 å½“æ—¥äº¤æ˜“æ•°æ®åˆ†æï¼ˆå¤§é™†è‚¡ç¥¨ï¼Œå¤§é™†åŸºé‡‘ï¼Œå¤§é™†æŒ‡æ•°ï¼Œå¤§é™†æœŸè´§ï¼‰ï¼‰</li>
<li>æ•°æ®ç»´æŠ¤ ï¼ˆ4.1 æ•°æ®å¯¼å‡º 4.1.1 æ•°æ®åˆ—è¡¨å¯¼å‡º(é¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼Œé¦™æ¸¯äº¤æ˜“æ‰€),4.1.2 åŸºæœ¬ä¿¡æ¯æ•°æ®å¯¼å‡ºï¼ˆè‚¡ç¥¨ã€åŸºé‡‘ã€æœŸè´§ï¼‰ï¼Œ4.1.3 åŸºæœ¬ä¿¡æ¯æ•°æ®å¯¼å‡ºï¼Œ 4.1.4 è´¢åŠ¡æŠ¥è¡¨å¯¼å‡ºï¼Œ 4.1.5 é¦™æ¸¯å†å²äº¤æ˜“æ•°æ®å¯¼å‡ºï¼ˆé¦™æ¸¯é™†è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼‰ï¼Œ 4.1.6 å½“æ—¥äº¤æ˜“æ•°æ®å¯¼å‡ºï¼ˆé¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼‰ï¼Œ 4.2 æ•°æ®å¯¼å…¥ 4.2.1 æ•°æ®åˆ—è¡¨å¯¼å…¥(é¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼Œé¦™æ¸¯äº¤æ˜“æ‰€),4.2.2 åŸºæœ¬ä¿¡æ¯æ•°æ®å¯¼å…¥ï¼ˆè‚¡ç¥¨ã€åŸºé‡‘ã€æœŸè´§ï¼‰ï¼Œ4.2.3 åŸºæœ¬ä¿¡æ¯æ•°æ®å¯¼å…¥ï¼Œ 4.2.4 è´¢åŠ¡æŠ¥è¡¨å¯¼å…¥ï¼Œ 4.2.5 é¦™æ¸¯å†å²äº¤æ˜“æ•°æ®å¯¼å…¥ï¼ˆé¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼‰ï¼Œ 4.2.6 å½“æ—¥äº¤æ˜“æ•°æ®å¯¼å…¥ï¼ˆé¦™æ¸¯è‚¡ç¥¨ï¼Œé¦™æ¸¯åŸºé‡‘ï¼Œé¦™æ¸¯æŒ‡æ•°ï¼Œé¦™æ¸¯æœŸè´§ï¼‰ï¼‰ã€‘</li>
</ol>
</li>
<li>äºŒã€é¦™æ¸¯ç›¸å…³æ•°æ®è¿˜è¦åŒ…æ‹¬ ã€1 æ·±æ¸¯é€šã€æ²ªæ¸¯é€šæ•°æ®ï¼›2. åœ¨æ¸¯ä¸Šå¸‚çš„å¤§é™†è‚¡ç¥¨ï¼›3. åœ¨æ¸¯å›½ä¼è‚¡ï¼›4. æ¸¯è‚¡çš„ç§‘åˆ›æ¿ã€‘</li>
</ul>
</li>
</ul>
</li>
<li><strong>ä¸»è¦å·¥ä½œï¼ˆçœŸï¼‰</strong><ul>
<li><strong>ä¸»è¦æ˜¯è¦å¤šå®Œæˆæ¸¯è‚¡ä¸­ç›¸å…³æ•°æ®å†…å®¹ï¼š</strong><a target="_blank" rel="noopener" href="https://quote.eastmoney.com/center/ggsc.html">æ¸¯è‚¡ä¸»æ¿ã€æ¸¯è‚¡åˆ›ä¸šæ¿ã€çŸ¥åæ¸¯è‚¡ã€è“ç­¹è‚¡ã€çº¢ç­¹è‚¡ã€çº¢ç­¹æˆåˆ†è‚¡ã€å›½ä¼è‚¡ã€å›½ä¼æˆåˆ†è‚¡ã€æ¸¯è‚¡é€šæˆä»½è‚¡ã€äººæ°‘å¸äº¤æ˜“æ¸¯è‚¡ã€AHè‚¡æ¯”ä»·ã€é¦™æ¸¯æŒ‡æ•°</a> </li>
<li><strong>çªå‡ºä¸¤åœ°è‚¡å¸‚çš„å·®åˆ«ï¼šå¯¹è¿™å‡ ä¸ªæ¸¯è‚¡æ•°æ®ï¼Œæä¾›æ•°æ®å±•ç¤ºï¼ˆè°ƒç”¨å…¶ä»–åŒå­¦çš„æ¥å£åŒæ—¶å±•ç°å¤§é™†æ•°æ®ï¼‰ï¼Œæ•°æ®æ›´æ–°ã€ç»´æŠ¤ã€ä¸‹è½½çš„åŠŸèƒ½ï¼›æœ€å¥½è®ºæ–‡è¿˜è¦æœ‰ä¸€äº›åˆ†æçš„ç»“æœï¼Œéœ€è¦è‡ªå·±åšä¸€äº›ç»“æœå’Œå›¾è¡¨å‡ºæ¥ï¼Œç³»ç»Ÿä¸Šæ—¶é—´ä¸å¤Ÿå¯ä»¥ä¸åŠ </strong></li>
</ul>
</li>
<li>å¼€å‘æµç¨‹<ul>
<li>æ¸¯è‚¡æ•°æ®çˆ¬å–ï¼ˆspiderï¼‰ï¼š<br>  åˆ›å»ºå„ç±»æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯è¡¨ï¼šè·å–â€œæ¸¯è‚¡å¸‚åœºxxè‚¡â€ï¼ˆåœ¨ä»Šæ—¥ï¼‰çš„ä¿¡æ¯åˆ—è¡¨ï¼Œå°†â€œè‚¡ç¥¨ä»£ç â€ã€â€œè‚¡ç¥¨åç§°â€ç­‰ä¿å­˜åœ¨æ•°æ®åº“å¯¹åº”çš„åŸºæœ¬ä¿¡æ¯è¡¨ä¸­ï¼ŒåŒæ—¶ä¿å­˜â€œæ›´æ–°æ—¶é—´â€ä¸ºä»Šæ—¥<br>  åˆ›å»ºå„ç±»æ¸¯è‚¡å†å²æ•°æ®è¡¨ï¼šæ ¹æ®â€œæ¸¯è‚¡å¸‚åœºxxè‚¡â€çš„åŸºæœ¬ä¿¡æ¯è¡¨ä¸­çš„è‚¡ç¥¨ä»£ç ï¼Œè·å–è¯¥è‚¡è‡³ä»Šçš„å†å²æ•°æ®ï¼Œå°†â€œè‚¡ç¥¨ä»£ç , åç§°, kçº¿æ•°æ®, æ—¶é—´â€å­˜å…¥å¯¹åº”çš„å†å²æ•°æ®è¡¨ä¸­</li>
<li>æ¸¯è‚¡æ•°æ®æ›´æ–°ï¼ˆspiderï¼‰ï¼š<br>  æ›´æ–°å„ç±»æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯è¡¨ï¼šè·å–â€œæ¸¯è‚¡å¸‚åœºxxè‚¡â€ï¼ˆåœ¨ä»Šæ—¥ï¼‰çš„ä¿¡æ¯åˆ—è¡¨ï¼Œå°†å¯¹åº”è¡¨ä¸­ä¸å­˜åœ¨çš„â€œè‚¡ç¥¨ä»£ç â€çš„æ•°æ®å­˜å…¥å¹¶ä¸”ä¿å­˜â€œæ›´æ–°æ—¶é—´â€ä¸ºä»Šæ—¥ï¼Œå°†åŸæœ¬å­˜åœ¨çš„è‚¡ç¥¨ä¿¡æ¯å’Œâ€œæ›´æ–°æ—¶é—´â€æ›´æ–°<br>  æ›´æ–°å„ç±»æ¸¯è‚¡å†å²æ•°æ®è¡¨ï¼šæ ¹æ®â€œæ¸¯è‚¡å¸‚åœºxxè‚¡â€çš„åŸºæœ¬ä¿¡æ¯è¡¨ä¸­çš„â€œè‚¡ç¥¨ä»£ç â€å’Œâ€œæ›´æ–°æ—¶é—´â€ï¼Œè·å–ä»â€œæ›´æ–°æ—¶é—´â€è‡³ä»Šçš„å†å²æ•°æ®ï¼Œå­˜å…¥å¯¹åº”çš„å†å²æ•°æ®è¡¨ä¸­ï¼ˆæ— åºï¼‰</li>
<li>æ¸¯è‚¡åŸºæœ¬æ•°æ®å±•ç¤ºï¼ˆDjangoï¼‰ï¼šå±•ç¤ºå„ç±»æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯è¡¨</li>
<li>æ¸¯è‚¡Kçº¿å›¾å±•ç¤ºï¼ˆDjangoï¼‰ï¼šæ ¹æ®è‚¡ç¥¨ä»£ç ï¼Œç»“åˆEchartså±•ç¤ºå„ç±»æ¸¯è‚¡å†å²æ•°æ®çš„Kçº¿å›¾</li>
<li>æä¾›æ•°æ®æ¥å£ä¾›å…¶ä»–çš„æ¨¡å—ä½¿ç”¨ï¼ˆDjangoï¼‰ï¼šä»¥JSONå½¢å¼è¿”å›å„ç±»æ¸¯è‚¡å†å²æ•°æ®åˆ°é¡µé¢ä¸Š</li>
<li>æ•°æ®ä¸‹è½½ï¼ˆDjangoï¼‰ï¼šä»¥JSONå½¢å¼è¿”å›å„ç±»æ¸¯è‚¡å†å²æ•°æ®åˆ°é¡µé¢ä¸Šï¼Œå³é”®â€œå¦å­˜ä¸ºâ€ä¸‹è½½</li>
<li>æ•°æ®ç»´æŠ¤ï¼šå¯¼å…¥ï¼Œå¯¼å‡º</li>
</ul>
</li>
</ul>
<h3 id="æ•°æ®åº“å»ºè®¾"><a href="#æ•°æ®åº“å»ºè®¾" class="headerlink" title="æ•°æ®åº“å»ºè®¾"></a>æ•°æ®åº“å»ºè®¾</h3><ol>
<li>åˆ›å»ºæ•°æ®åº“å’Œè¡¨ï¼ˆ\spider\DB_Fund.pyï¼‰<ul>
<li>xxè‚¡åŸºæœ¬ä¿¡æ¯è¡¨ xxinfo<table>
<thead>
<tr>
<th>è‚¡ç¥¨ä»£ç </th>
<th>è‚¡ç¥¨åç§°</th>
<th>æœ€æ–°ä»·</th>
<th>æ¶¨è·Œé¢</th>
<th>æ¶¨è·Œå¹…</th>
<th>ä»Šå¼€</th>
<th>æœ€é«˜</th>
<th>æœ€ä½</th>
<th>æ˜¨æ”¶</th>
<th>æˆäº¤é‡(è‚¡)</th>
<th>æˆäº¤é¢</th>
<th>æ›´æ–°æ—¥æœŸ</th>
</tr>
</thead>
<tbody><tr>
<td>code</td>
<td>name</td>
<td>now</td>
<td>change</td>
<td>changerate</td>
<td>open</td>
<td>high</td>
<td>low</td>
<td>yesterday_close</td>
<td>volume</td>
<td>amount</td>
<td>date_updated</td>
</tr>
</tbody></table>
</li>
<li>xxè‚¡å†å²æ•°æ®è¡¨ xxhistory<table>
<thead>
<tr>
<th>code</th>
<th>date</th>
<th>open</th>
<th>now</th>
<th>high</th>
<th>low</th>
<th>volume</th>
<th>amount</th>
<th>rate</th>
<th>changerate</th>
<th>per</th>
<th>zero</th>
</tr>
</thead>
</table>
</li>
<li>A-Hè‚¡åŸºæœ¬ä¿¡æ¯è¡¨ AHStockComparisoninfo<table>
<thead>
<tr>
<th>åç§°</th>
<th>Hè‚¡ä»£ç </th>
<th>æœ€æ–°ä»·(HKD)</th>
<th>æ¶¨è·Œå¹…</th>
<th>Aè‚¡ä»£ç </th>
<th>æœ€æ–°ä»·(RMB)</th>
<th>æ¶¨è·Œå¹…</th>
<th>æ¯”ä»·ï¼ˆA&#x2F;Hï¼‰</th>
<th>æº¢ä»·ï¼ˆA&#x2F;Hï¼‰%</th>
<th>æ›´æ–°æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>code_hkd</td>
<td>now_hkd</td>
<td>changerate_hkd</td>
<td>code_rmb</td>
<td>now_rmb</td>
<td>changerate_rmb</td>
<td>AHcomparison</td>
<td>AHcomparisonrate</td>
<td>date_updated</td>
</tr>
</tbody></table>
</li>
<li>æ¸¯è‚¡å¸‚åœºæœ¯è¯­è‹±æ–‡è¡¨ç¤ºï¼š<ol>
<li>æ¸¯è‚¡ä¸»æ¿ï¼šHKEXMainBoardinfo</li>
<li>æ¸¯è‚¡åˆ›ä¸šæ¿ï¼šGEMofHKEXinfo</li>
<li>çŸ¥åæ¸¯è‚¡</li>
<li>è“ç­¹è‚¡</li>
<li>çº¢ç­¹è‚¡</li>
<li>çº¢ç­¹æˆåˆ†è‚¡</li>
<li>å›½ä¼è‚¡ï¼šSOEStocksinfo</li>
<li>å›½ä¼æˆåˆ†è‚¡ï¼šSOEConstituentStocksinfo</li>
<li>æ¸¯è‚¡é€šæˆä»½è‚¡ï¼šHKStockConnectConstituentStocksinfo</li>
<li>äººæ°‘å¸äº¤æ˜“æ¸¯è‚¡</li>
<li>AHè‚¡æ¯”ä»·ï¼šAHStockComparisoninfo</li>
<li>ADR</li>
<li>é¦™æ¸¯æŒ‡æ•°ï¼šHKStockIndexinfo</li>
</ol>
</li>
</ul>
</li>
<li>çˆ¬å–æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯ï¼ˆ\spider\Get_HKStock\HKStockSpider().getxxInfo()ï¼‰<ul>
<li>ä½¿ç”¨F12æŠ“åŒ…ï¼Œç‚¹å‡»å¦‚â€œæ¸¯è‚¡ä¸»æ¿â€æŒ‰é’®æŸ¥è¯¢å‡ºå¯¹åº”çš„è‚¡ç¥¨æ•°æ®ï¼Œåˆ·æ–°é¡µé¢ï¼Œè¿‡æ»¤å‡ºjsæ–‡ä»¶ï¼Œæ‰¾åˆ°å¯¹åº”çš„è‚¡ç¥¨æ•°æ®çš„getè¯·æ±‚apiï¼ˆé»˜è®¤pn&#x3D;1ï¼Œpz&#x3D;20ï¼Œè¡¨ç¤ºè·å–ç¬¬ä¸€é¡µå¤§å°ä¸º20çš„è‚¡ç¥¨æ•°æ®åˆ—è¡¨ï¼‰ï¼›ä»ä¸­è·å–æ€»æ•°æ®è¡Œæ•°â€dataâ€&#x2F;â€œtotalâ€ï¼Œå†æ¬¡å‘é€getè¯·æ±‚ï¼ˆè®¾ç½®pn&#x3D;1ï¼Œpz&#x3D;totalï¼‰è·å–å®Œæ•´çš„è¯¥è‚¡ç¥¨æ•°æ®åˆ—è¡¨    </li>
<li>æ¸¯è‚¡ä¸»æ¿ï¼šâ€™<a target="_blank" rel="noopener" href="https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=m:116+t:3&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714550583816">https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=m:116+t:3&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714550583816</a>â€˜</li>
<li>æ¸¯è‚¡åˆ›ä¸šæ¿ï¼š<a target="_blank" rel="noopener" href="https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=m:116+t:4&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714550583886">https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=m:116+t:4&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714550583886</a></li>
<li>çŸ¥åæ¸¯è‚¡ï¼š<a target="_blank" rel="noopener" href="https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=b:MK0106&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714550583906">https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=b:MK0106&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714550583906</a></li>
<li>è“ç­¹è‚¡ï¼š<a target="_blank" rel="noopener" href="https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944282&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=b:MK0105&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714570944470">https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944282&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=b:MK0105&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714570944470</a></li>
<li>çº¢ç­¹è‚¡ï¼š<a target="_blank" rel="noopener" href="https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=b:MK0102&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714570944490">https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=b:MK0102&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714570944490</a></li>
<li>çº¢ç­¹æˆåˆ†ï¼š<a target="_blank" rel="noopener" href="https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=b:MK0111&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714570944499">https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=b:MK0111&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714570944499</a></li>
<li>å›½ä¼è‚¡ï¼š<a target="_blank" rel="noopener" href="https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=b:MK0103&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714550583915">https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=b:MK0103&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714550583915</a></li>
<li>å›½ä¼æˆåˆ†è‚¡ï¼š<a target="_blank" rel="noopener" href="https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=b:MK0112&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714550583919">https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=b:MK0112&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714550583919</a></li>
<li>è‚¡æ¸¯è‚¡é€šæˆä»½è‚¡ï¼š<a target="_blank" rel="noopener" href="https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=b:MK0146,b:MK0144&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714570944503">https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=b:MK0146,b:MK0144&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714570944503</a></li>
<li>äººæ°‘å¸äº¤æ˜“æ¸¯è‚¡ï¼š<a target="_blank" rel="noopener" href="https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=m:116+s:64&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714570944509">https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=m:116+s:64&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f19,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714570944509</a></li>
<li>AHè‚¡æ¯”ä»·ï¼š<a target="_blank" rel="noopener" href="https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=b:MK0101&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152,f191,f192,f193,f186,f185,f187,f189,f188&_=1714570944513">https://57.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112407221764962597832_1714570944286&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=b:MK0101&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152,f191,f192,f193,f186,f185,f187,f189,f188&amp;_=1714570944513</a></li>
<li>é¦™æ¸¯æŒ‡æ•°ï¼š<a target="_blank" rel="noopener" href="https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&pn=1&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&wbp2u=8413067108550254%7C0%7C1%7C0%7Cweb&fid=f3&fs=m:124,m:125,m:305&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&_=1714550583922">https://86.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112408726538243180275_1714550583811&amp;pn=1&amp;pz=20&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;wbp2u=8413067108550254|0|1|0|web&amp;fid=f3&amp;fs=m:124,m:125,m:305&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152&amp;_=1714550583922</a></li>
</ul>
</li>
<li>çˆ¬å–æ¸¯è‚¡å†å²æ•°æ®ï¼ˆ\spider\Get_HKStock\HKStockSpider().getxxHistory()ï¼‰<ul>
<li>ä»å„ç±»æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯è¡¨ä¸­è·å–è‚¡ç¥¨ä»£ç æ›¿æ¢secidï¼Œdateä¸ºä»Šæ—¥ï¼ŒæŸ¥è¯¢å…¶å†å²kçº¿æ•°æ®</li>
<li>ä¸€èˆ¬æƒ…å†µï¼ŒMySQLæ¯å¼ è¡¨æœ€å¥½ä¸è¦è¶…è¿‡2000ä¸‡æ¡æ•°æ®ï¼Œé˜¿é‡Œçš„Javaå¼€å‘æ‰‹å†Œä¸Šä¹Ÿæå‡ºï¼šå•è¡¨è¡Œæ•°è¶…è¿‡ 500 ä¸‡è¡Œæˆ–è€…å•è¡¨å®¹é‡è¶…è¿‡ 2GBï¼Œæ‰æ¨èè¿›è¡Œåˆ†åº“åˆ†è¡¨ã€‚æˆ–è€…è¯´ï¼Œè¦æ ¹æ®å®é™…åœºæ™¯åˆ†æã€‚</li>
<li>æ¸¯è‚¡æ—¥çº¿æ•°æ®(é™¤A-Hè‚¡ä»·æ¯”ï¼Œæ¸¯è‚¡æŒ‡æ•°å¤–)ï¼š<a target="_blank" rel="noopener" href="https://push2his.eastmoney.com/api/qt/stock/kline/get?cb=jQuery35106242902488344593_1714571208625&secid=116.%7Bsecid%7D&ut=fa5fd1943c7b386f172d6893dbfba10b&fields1=f1,f2,f3,f4,f5,f6&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&klt=101&fqt=1&beg=0&end=20500101&smplmt=755&lmt=1000000&_=1714571208630">https://push2his.eastmoney.com/api/qt/stock/kline/get?cb=jQuery35106242902488344593_1714571208625&amp;secid=116.{secid}&amp;ut=fa5fd1943c7b386f172d6893dbfba10b&amp;fields1=f1%2Cf2%2Cf3%2Cf4%2Cf5%2Cf6&amp;fields2=f51%2Cf52%2Cf53%2Cf54%2Cf55%2Cf56%2Cf57%2Cf58%2Cf59%2Cf60%2Cf61&amp;klt=101&amp;fqt=1&amp;beg=0&amp;end=20500101&amp;smplmt=755&amp;lmt=1000000&amp;_=1714571208630</a></li>
<li>A-Hè‚¡ä»·æ¯”ï¼Œæ¸¯è‚¡æŒ‡æ•°æ—¥çº¿æ•°æ®å…ˆä¸å¼„ã€‚ã€‚</li>
</ul>
</li>
<li>æ•°æ®æ›´æ–°ï¼ˆ\spider\Update_HKStock.pyï¼‰<ul>
<li>æ›´æ–°æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯</li>
<li>æ›´æ–°æ¸¯è‚¡å†å²æ•°æ®</li>
<li>å®šæ—¶ä»»åŠ¡</li>
</ul>
</li>
<li>æ•°æ®æ¥å£ï¼ˆDjangoå®ç°ï¼‰ï¼šä»¥JSONå½¢å¼è¿”å›å„ç±»æ¸¯è‚¡å†å²æ•°æ®åˆ°é¡µé¢ä¸Šï¼Œä¾›å…¶ä»–çš„æ¨¡å—ä½¿ç”¨</li>
<li>æ•°æ®ä¸‹è½½ï¼ˆDjangoå®ç°ï¼‰ï¼šä»¥JSONå½¢å¼è¿”å›å„ç±»æ¸¯è‚¡å†å²æ•°æ®åˆ°é¡µé¢ä¸Šï¼Œå³é”®â€œå¦å­˜ä¸ºâ€ä¿å­˜</li>
<li>æ•°æ®ç»´æŠ¤</li>
</ol>
<h3 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h3><ul>
<li>é¡¹ç›®ç»“æ„ <img src="https://leo710aka.github.io/bk/datasite.png" width="550" height="300" alt=""></li>
</ul>
<h3 id="ç¤ºä¾‹1ï¼šå±•ç¤ºé¦™æ¸¯æŒ‡æ•°åŸºæœ¬ä¿¡æ¯è¡¨-HKStockIndexinfo"><a href="#ç¤ºä¾‹1ï¼šå±•ç¤ºé¦™æ¸¯æŒ‡æ•°åŸºæœ¬ä¿¡æ¯è¡¨-HKStockIndexinfo" class="headerlink" title="ç¤ºä¾‹1ï¼šå±•ç¤ºé¦™æ¸¯æŒ‡æ•°åŸºæœ¬ä¿¡æ¯è¡¨ HKStockIndexinfo"></a><strong>ç¤ºä¾‹1ï¼šå±•ç¤ºé¦™æ¸¯æŒ‡æ•°åŸºæœ¬ä¿¡æ¯è¡¨ HKStockIndexinfo</strong><img src="https://github.com/leo710aka/bk/blob/main/bishe1.png?raw=true" width="700" height="300" alt=""></h3><ol>
<li>ç¼–å†™modelï¼ˆdatasite&#x2F;mainapp&#x2F;models.pyï¼‰<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HKStockIndexinfo</span>(models.Model):</span><br><span class="line">    code = models.CharField(max_length=<span class="number">12</span>, primary_key=<span class="literal">True</span>)  <span class="comment"># å‡è®¾codeæ˜¯ä¸»é”®</span></span><br><span class="line">    name = models.FloatField(max_length=<span class="number">20</span>, db_column=<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">    now = models.FloatField(db_column=<span class="string">&#x27;now&#x27;</span>)</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&#x27;HKStockIndexinfo&#x27;</span></span><br><span class="line">        managed = <span class="literal">False</span></span><br></pre></td></tr></table></figure></li>
<li>è¿ç§»ï¼Œå°† modelä¸ MySQLä¸­çš„è¡¨æ˜ å°„<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations  <span class="comment"># IDE console</span></span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™htmlï¼ˆdatasite&#x2F;mainapp&#x2F;templates&#x2F;hkstockindexinfo.htmlï¼‰<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>ä»£ç <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>åç§°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    &#123;% for info in infos %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color: #1e8ecc;&quot;</span>&gt;</span>&#123;&#123; info.code &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color: #1e8ecc;&quot;</span>&gt;</span>&#123;&#123; info.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™åº”ç”¨è¯·æ±‚ï¼ˆdatasite&#x2F;mainapp&#x2F;views.pyï¼‰<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">hkstockindexinfo</span>(<span class="params">request</span>):</span><br><span class="line">    infos = HKStockIndexinfo.objects.<span class="built_in">all</span>()                    <span class="comment"># ä»MySQLä¸­è·å–å¯¹åº”è¡¨çš„æ•°æ®</span></span><br><span class="line">    context = &#123;<span class="string">&#x27;infos&#x27;</span>: infos&#125;                                <span class="comment"># åˆ›å»ºä¸Šä¸‹æ–‡å­—å…¸</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;hkstockindexinfo.html&#x27;</span>, context)  <span class="comment"># æ¸²æŸ“æ¨¡æ¿</span></span><br></pre></td></tr></table></figure></li>
<li>é…ç½®è·¯ç”±ï¼ˆdatasite&#x2F;datasite&#x2F;urls.pyï¼‰<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;hkstockindexinfo&#x27;</span>, views.hkstockindexinfo),  <span class="comment"># ä¸éœ€è¦é…ç½®é¡¹ç›®-åº”ç”¨ä¸¤çº§url</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
<li>å¯åŠ¨Djangoé¡¹ç›®<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS E:\Code\datasite&gt; python manage.py runserver</span><br></pre></td></tr></table></figure></li>
<li>å‘é€è¯·æ±‚ <a target="_blank" rel="noopener" href="http://127.0.0.1:8000/hkstockindexinfo%EF%BC%8C">http://127.0.0.1:8000/hkstockindexinfoï¼Œ</a> å±•ç¤ºé¦™æ¸¯æŒ‡æ•°åŸºæœ¬ä¿¡æ¯è¡¨</li>
</ol>
<h3 id="ç¤ºä¾‹2ï¼šä½¿ç”¨Echartå±•ç¤ºæ¸¯è‚¡ä¸»æ¿å†å²æ•°æ®kçº¿å›¾"><a href="#ç¤ºä¾‹2ï¼šä½¿ç”¨Echartå±•ç¤ºæ¸¯è‚¡ä¸»æ¿å†å²æ•°æ®kçº¿å›¾" class="headerlink" title="ç¤ºä¾‹2ï¼šä½¿ç”¨Echartå±•ç¤ºæ¸¯è‚¡ä¸»æ¿å†å²æ•°æ®kçº¿å›¾"></a><strong>ç¤ºä¾‹2ï¼šä½¿ç”¨Echartå±•ç¤ºæ¸¯è‚¡ä¸»æ¿å†å²æ•°æ®kçº¿å›¾</strong><img src="https://github.com/leo710aka/bk/blob/main/bishe4.png?raw=true" width="700" height="300" alt=""></h3><ol>
<li>ç¼–å†™modelï¼ˆdatasite&#x2F;mainapp&#x2F;models.pyï¼‰<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HKEXMainBoardhistory</span>(models.Model):</span><br><span class="line">    code = models.CharField(max_length=<span class="number">12</span>, primary_key=<span class="literal">True</span>)  <span class="comment"># å‡è®¾codeæ˜¯ä¸»é”®</span></span><br><span class="line">    date = models.CharField(max_length=<span class="number">10</span>, db_column=<span class="string">&#x27;date&#x27;</span>)</span><br><span class="line">    <span class="built_in">open</span> = models.FloatField(db_column=<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&#x27;HKEXMainBoardhistory&#x27;</span></span><br><span class="line">        managed = <span class="literal">False</span></span><br></pre></td></tr></table></figure></li>
<li>è¿ç§»ï¼Œå°† modelä¸ MySQLä¸­çš„è¡¨æ˜ å°„<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations  <span class="comment"># IDE console</span></span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™htmlï¼ˆdatasite&#x2F;mainapp&#x2F;templates&#x2F;historyklines.htmlï¼‰<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;  <span class="comment">&lt;!-- åœ¨é¡¹ç›®setting.pyé…ç½®ï¼šSTATIC_URL = &#x27;/static/&#x27; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ¸¯è‚¡ä¸»æ¿å†å²æ•°æ®kçº¿å›¾<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥å·²ç»ä¸‹è½½åˆ°æœ¬åœ°/static/assets/jsä¸‹çš„Echartsæ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;assets/js/echarts.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 1600px;height:800px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ä»Echartså®˜ç½‘ä¸Šå¤åˆ¶Kçº¿å›¾ç¤ºä¾‹ä»£ç </span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> chartDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(chartDom);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> option;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ä½¿ç”¨æ¨¡æ¿è¯­è¨€è·å–ä¼ é€’çš„ JSON æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> jsonData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&#123;&#123; jsonData | escapejs &#125;&#125;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">splitData</span>(<span class="params">rawData</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">renderItem</span>(<span class="params">params, api</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ä½¿ç”¨åç«¯æŸ¥è¯¢çš„æ•°æ®ï¼Œä»£æ›¿æ¨¡ç‰ˆä»£ç ä¸­åŸæœ¬å¤–éƒ¨å¼•å…¥çš„jsonæ–‡ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> data = <span class="title function_">splitData</span>(jsonData);</span></span><br><span class="line"><span class="language-javascript">        myChart.<span class="title function_">setOption</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™åº”ç”¨è¯·æ±‚ï¼ˆdatasite&#x2F;mainapp&#x2F;views.pyï¼‰<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">historyklines</span>(<span class="params">request</span>):</span><br><span class="line">    code = request.GET.get(<span class="string">&#x27;code&#x27;</span>)  <span class="comment"># è·å–è¯·æ±‚ä¸­æºå¸¦çš„codeå‚æ•°å€¼</span></span><br><span class="line">    queryset = HKEXMainBoardhistory.objects.<span class="built_in">filter</span>(code=code)  <span class="comment"># æŸ¥è¯¢æ‰€æœ‰ä»£ç ä¸º code çš„æ•°æ®</span></span><br><span class="line">    jsonData = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> queryset:  <span class="comment"># æ„é€ äºŒç»´æ•°ç»„</span></span><br><span class="line">        data_row = [</span><br><span class="line">            item.date, item.<span class="built_in">open</span>, item.now, item.low, item.high, item.volume</span><br><span class="line">        ]</span><br><span class="line">        jsonData.append(data_row)</span><br><span class="line">    jsonData_str = json.dumps(jsonData)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;historyklines.html&#x27;</span>, &#123;<span class="string">&#x27;jsonData&#x27;</span>: jsonData_str&#125;)</span><br></pre></td></tr></table></figure></li>
<li>é…ç½®è·¯ç”±ï¼ˆdatasite&#x2F;datasite&#x2F;urls.pyï¼‰<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;historyklines&#x27;</span>, views.historyklines),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
<li>å¯åŠ¨Djangoé¡¹ç›®<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS E:\Code\datasite&gt; python manage.py runserver</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="ç¤ºä¾‹3ï¼šæä¾›æ•°æ®æ¥å£ä¾›å…¶ä»–æ¨¡å—è°ƒç”¨ï¼Œä¸‹è½½å†å²æ•°æ®"><a href="#ç¤ºä¾‹3ï¼šæä¾›æ•°æ®æ¥å£ä¾›å…¶ä»–æ¨¡å—è°ƒç”¨ï¼Œä¸‹è½½å†å²æ•°æ®" class="headerlink" title="ç¤ºä¾‹3ï¼šæä¾›æ•°æ®æ¥å£ä¾›å…¶ä»–æ¨¡å—è°ƒç”¨ï¼Œä¸‹è½½å†å²æ•°æ®"></a><strong>ç¤ºä¾‹3ï¼šæä¾›æ•°æ®æ¥å£ä¾›å…¶ä»–æ¨¡å—è°ƒç”¨ï¼Œä¸‹è½½å†å²æ•°æ®</strong><img src="https://github.com/leo710aka/bk/blob/main/bishe3.png?raw=true" width="700" height="300" alt=""></h3><ol>
<li>æŒ‡çš„æ˜¯xxè‚¡å†å²æ•°æ®</li>
<li>ç¼–å†™Modelã€Viewï¼Œé…ç½®urls<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">hkexmainboarddata</span>(<span class="params">request</span>):</span><br><span class="line">    code = request.GET.get(<span class="string">&#x27;code&#x27;</span>)</span><br><span class="line">    data = HKEXMainBoardhistory.objects.<span class="built_in">filter</span>(code=code)</span><br><span class="line">    data_dict_list = [&#123;<span class="string">&quot;code&quot;</span>: item.code, <span class="string">&quot;date&quot;</span>: item.date, <span class="string">&quot;open&quot;</span>: item.<span class="built_in">open</span>, <span class="string">&quot;now&quot;</span>: item.now,</span><br><span class="line">                       <span class="string">&quot;high&quot;</span>: item.high, <span class="string">&quot;low&quot;</span>: item.low, <span class="string">&quot;volume&quot;</span>: item.volume, <span class="string">&quot;amount&quot;</span>: item.amount,</span><br><span class="line">                       <span class="string">&quot;rate&quot;</span>: item.rate, <span class="string">&quot;changerate&quot;</span>: item.changerate, <span class="string">&quot;per&quot;</span>: item.per, <span class="string">&quot;zero&quot;</span>: item.zero&#125;</span><br><span class="line">                      <span class="keyword">for</span> item <span class="keyword">in</span> data]</span><br><span class="line">    <span class="comment"># è½¬æ¢ä¸º JSON æ ¼å¼</span></span><br><span class="line">    data_json = json.dumps(data_dict_list)</span><br><span class="line">    <span class="comment"># è¿”å› JSON å“åº”</span></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(data_json, safe=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure></li>
<li>æŸ¥è¯¢é¡µé¢ï¼šè¾“å…¥æ¸¯è‚¡ä»£ç ï¼Œç‚¹å‡»â€œç”ŸæˆKçº¿å›¾â€æŒ‰é’®å‘é€xxklinesè¯·æ±‚&#x2F;ç‚¹å‡»â€œä¸‹è½½å†å²æ•°æ®â€å±•ç¤ºå†å²æ•°æ®ï¼ˆå³é”®â€œå¦å­˜ä¸ºâ€ä¸‹è½½ï¼‰<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card &quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span>æ¸¯è‚¡å†å²æ•°æ®<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;myForm&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;codeInput&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 150px;&quot;</span>&gt;</span>è¯·è¾“å…¥æ¸¯è‚¡ä¸»æ¿ä»£ç ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;codeInput&quot;</span> <span class="attr">name</span>=<span class="string">&quot;codeInput&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submitButton&quot;</span>&gt;</span>ç”ŸæˆKçº¿å›¾<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submitButton0&quot;</span>&gt;</span>ä¸‹è½½å†å²æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myForm&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  event.<span class="title function_">preventDefault</span>(); <span class="comment">// é˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// è·å–è¾“å…¥æ¡†ä¸­çš„å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> code = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;codeInput&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (event.<span class="property">submitter</span>.<span class="property">id</span> === <span class="string">&#x27;submitButton&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ„é€ ç”ŸæˆKçº¿å›¾çš„è¯·æ±‚URL</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> url = <span class="string">`http://127.0.0.1:8000/hkexmainboardklines?code=<span class="subst">$&#123;code&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€é“¾æ¥</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">open</span>(url, <span class="string">&#x27;_blank&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="property">submitter</span>.<span class="property">id</span> === <span class="string">&#x27;submitButton0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ„é€ ä¸‹è½½å†å²æ•°æ®çš„è¯·æ±‚URL</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> url = <span class="string">`http://127.0.0.1:8000/hkexmainboarddata?code=<span class="subst">$&#123;code&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€é“¾æ¥</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">open</span>(url, <span class="string">&#x27;_blank&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>

<h1 id="æ¯•ä¸šç­”è¾©"><a href="#æ¯•ä¸šç­”è¾©" class="headerlink" title="æ¯•ä¸šç­”è¾©"></a>æ¯•ä¸šç­”è¾©</h1><p>æ¯•ä¸šç­”è¾©çš„æ„ä¹‰æ˜¯ï¼Œæ ¡æ–¹ä¸ºäº†è¿›ä¸€æ­¥çš„å®¡æŸ¥è®ºæ–‡ã€‚<br>è€ƒæŸ¥å†…å®¹å¯å½’çº³å¦‚ä¸‹ï¼šâ‘ è¿›ä¸€æ­¥è€ƒæŸ¥å’ŒéªŒè¯æ¯•ä¸šè®ºæ–‡ä½œè€…å¯¹æ‰€ç€è®ºæ–‡è®ºé¢˜çš„è®¤è¯†ç¨‹åº¦åŠå½“åœºè®ºè¯è®ºé¢˜çš„èƒ½åŠ› â‘¡è¿›ä¸€æ­¥è€ƒæŸ¥æ¯•ä¸šè®ºæ–‡ä½œè€…å¯¹ä¸“ä¸šçŸ¥è¯†æŒæ¡çš„æ·±åº¦ä¸å¹¿åº¦ â‘¢å®¡æŸ¥æ¯•ä¸šè®ºæ–‡æ˜¯å¦å­¦å‘˜è‡ªå·±ç‹¬ç«‹å®Œæˆ<br>ç­”è¾©æ—¶æé—®ä¾æ®ï¼šâ‘ æ±‡æŠ¥PPTçš„å†…å®¹ â‘¡æ¯•ä¸šè®ºæ–‡çš„å†…å®¹ â‘¢æ±‡æŠ¥è€…çš„è¨€è¯­</p>
<h3 id="ç­”è¾©å®‰æ’"><a href="#ç­”è¾©å®‰æ’" class="headerlink" title="ç­”è¾©å®‰æ’"></a>ç­”è¾©å®‰æ’</h3><p>ç­”è¾©æ—¥æœŸï¼š5æœˆ24æ—¥ï¼ˆ13å‘¨å‘¨äº”ï¼‰ï¼Œä¸Šåˆ1-4èŠ‚ï¼Œ8ï¼š50å¼€å§‹ï¼Œé¢„è®¡åˆ°ä¸­åˆå·¦å³ç»“æŸï¼›<br>ç­”è¾©åœ°ç‚¹ï¼šA4206<br>éœ€æºå¸¦èµ„æ–™:<br>1.ç­”è¾©ppt ç”µå­ç‰ˆï¼ˆuç›˜ï¼‰ï¼›2.ä¸€å¼3ä»½åŒé¢æ‰“å°çš„è®ºæ–‡ï¼ˆæœ€æ–°ç‰ˆï¼Œä¸éœ€è¦è£…å¸§å°é¢ï¼‰ã€‚<br>æ³¨æ„äº‹é¡¹ï¼š<br>1.è¯·å¤§å®¶æå‰åŠå°æ—¶ï¼ˆä¸Šåˆ8ï¼š20ï¼‰åˆ°ç°åœºï¼Œè°ƒè¯•å¥½è®¾å¤‡ï¼ˆç”µè„‘ã€æŠ•å½±ä»ªã€éº¦å…‹é£ï¼Œç­‰ï¼‰ï¼Œæ‰€æœ‰çš„pptéƒ½æ‹·è´åˆ°æŒ‡å®šç”µè„‘ä¸Šï¼ˆå¯ä»¥ç”¨è¯¾å®¤çš„ç”µè„‘ï¼Œä½†å»ºè®®è‡³å°‘å¸¦ä¸€å°ç¬”è®°æœ¬åšå¤‡ç”¨ï¼‰ã€‚<br>2.æå‰æ‰“å°å¥½3ä»½æ¯•è®¾è®ºæ–‡ï¼ˆç®€å•çš„åŒé¢æ‰“å°å³å¯ï¼Œä¸éœ€è¦ç‰¹åˆ«è£…å¸§å°é¢ï¼Œå› ä¸ºä¸æ˜¯æœ€ç»ˆç¨¿ï¼‰ï¼Œç­”è¾©å‰ç»Ÿä¸€äº¤ç»™è€å¸ˆç¿»é˜…ã€‚å¦‚æœåœ¨ç­”è¾©å‰å¯¹è®ºæ–‡æœ‰ä¿®æ”¹ï¼Œå’Œæäº¤ç³»ç»Ÿçš„ç‰ˆæœ¬ä¸ä¸€è‡´ä¹Ÿæ²¡å…³ç³»ï¼Œåªè¦æ‰“å°æœ€æ–°ç‰ˆå°±å¯ä»¥äº†ã€‚<br>3.æ¯äººç­”è¾©é™ˆè¿°æ—¶é—´5åˆ†é’Ÿå·¦å³ï¼ˆå¯ä»¥åˆ©ç”¨powerpointçš„æ’ç»ƒåŠŸèƒ½æå‰æ’ç»ƒå¥½ï¼‰ï¼Œç„¶åç•™3åˆ†é’Ÿå·¦å³å›ç­”è€å¸ˆçš„æé—®ã€‚<br>4.å›ç­”é—®é¢˜æ—¶è¦è®¤çœŸè®°å½•ä¸‹è€å¸ˆæå‡ºçš„ä¿®æ”¹æ„è§ï¼Œå¹¶åœ¨ç­”è¾©ç»“æŸåæŒ‰è¦æ±‚ä¿®æ”¹è®ºæ–‡ï¼Œç„¶åæäº¤è®ºæ–‡æœ€ç»ˆç‰ˆåˆ°ç»´æ™®ç³»ç»Ÿï¼›<br>5.ç­”è¾©ç»“æŸåï¼Œè€å¸ˆä»¬ä¼šåœ¨ç»´æ™®ç³»ç»Ÿä¸Šç»™è®ºæ–‡å’Œç­”è¾©è¿‡ç¨‹æ‰“åˆ†ï¼Œå¤§å®¶æŠŠè®ºæ–‡æœ€ç»ˆç‰ˆæäº¤ç»´æ™®ç³»ç»Ÿä¹‹åï¼Œå¯ä»¥ç›´æ¥ä»ç³»ç»Ÿä¸Šä¸‹è½½å¹¶æ‰“å°å¸¦æœ‰è€å¸ˆç”µå­ç­¾åçš„å„ç±»è¡¨æ ¼ï¼ˆä¸€èˆ¬ä¸éœ€è¦æ‰¾è€å¸ˆä»¬æ‰‹ç­¾ï¼‰ã€‚æœ€ç»ˆç‰ˆè®ºæ–‡ä¸€å®šè¦è£…å¸§å¥½å°é¢ï¼Œå’Œå…¨å¥—æ‰“å°çš„è¡¨æ ¼ä¸€èµ·ï¼ŒæŒ‰ç…§é¡ºåºæ”¾å…¥æ¡£æ¡ˆè¢‹å¹¶äº¤ç»™å¯¼å¸ˆã€‚</p>
<h2 id="ç­”è¾©å†…å®¹"><a href="#ç­”è¾©å†…å®¹" class="headerlink" title="ç­”è¾©å†…å®¹"></a>ç­”è¾©å†…å®¹</h2><p>å„ä½è¯„å§”è€å¸ˆï¼ŒåŒå­¦ä»¬ï¼š<br>å¤§å®¶ä¸Šåˆå¥½! æˆ‘æ˜¯<em>ç½‘ç»œå·¥ç¨‹</em>ä¸“ä¸šçš„<em>è”¡æ«</em>ï¼Œæˆ‘çš„è®ºæ–‡é¢˜ç›®æ˜¯<em><strong>åŸºäºå†…åœ°ä¸é¦™æ¸¯é‡‘èå¹³å°çš„åœ¨çº¿é‡åŒ–æŠ•èµ„çš„æ•°æ®åŸå‹ç³»ç»Ÿçš„è®¾è®¡ä¸å¼€å‘</strong></em>ã€‚<br>&lt;ç¿»é¡µ&gt;<br>ä»Šå¤©æˆ‘å°†ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢é˜è¿°æˆ‘çš„æ¯•ä¸šè®ºæ–‡å†…å®¹ã€‚<br>&lt;ç¿»é¡µ&gt;</p>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-é€‰é¢˜èƒŒæ™¯åŠæ„ä¹‰"><a href="#ç¬¬ä¸€éƒ¨åˆ†-é€‰é¢˜èƒŒæ™¯åŠæ„ä¹‰" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† é€‰é¢˜èƒŒæ™¯åŠæ„ä¹‰"></a>ç¬¬ä¸€éƒ¨åˆ† é€‰é¢˜èƒŒæ™¯åŠæ„ä¹‰</h3><p>éšç€åœ¨çº¿é‡åŒ–æŠ•èµ„çš„æ™®åŠï¼Œå¦‚ä½•æœ‰æ•ˆåœ°æ”¶é›†å’Œæ•´ç†æµ·é‡çš„äº’è”ç½‘é‡‘èæ•°æ®ï¼Œæˆä¸ºäº†ä¸€å¤§æŒ‘æˆ˜ã€‚<br>&lt;ç¿»é¡µ&gt;<br>ä¸€æ–¹é¢ï¼Œäº’è”ç½‘æ•°æ®å…·æœ‰å®æ—¶æ€§ï¼Œå¯¼è‡´ç”¨æˆ·å’Œé‡‘èå…¬å¸éƒ½éš¾ä»¥æ£€ç´¢è¿‡å»ç‰¹å®šæ—¶é—´çš„å®Œæ•´é‡‘èæ•°æ®ã€‚<br>å¦ä¸€æ–¹é¢ï¼Œäººä»¬éœ€èŠ±è´¹å¤§é‡æ—¶é—´åœ¨é—¨æˆ·ç½‘ç«™æµè§ˆå®æ—¶é‡‘èä¿¡æ¯ï¼Œä½†ç¼ºä¹æ˜ç¡®ç›´è§‚çš„æ•°æ®åˆ†æç»“æœã€‚<br>&lt;ç¿»é¡µ&gt;<br>ä¸ºæœ‰æ•ˆè§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæœ¬è®ºæ–‡è®¾è®¡å¹¶å¼€å‘äº†åŸºäºç½‘ç»œçˆ¬è™«çš„æ•°æ®åŸå‹ç³»ç»Ÿï¼Œå®æ—¶è·å–äº’è”ç½‘ä¸Šçš„é‡‘èæ•°æ®ï¼Œå¹¶æä¾›æ•°æ®ä¸‹è½½çš„åŠŸèƒ½ã€‚<br>å¦å¤–ï¼Œç³»ç»Ÿæä¾›äº†æ•°æ®å¯è§†åŒ–å’Œæ•°æ®åˆ†æçš„åŠŸèƒ½ï¼Œç”¨æˆ·èƒ½å¤Ÿä»ä¸­è·å–å…·æœ‰å‚è€ƒä»·å€¼çš„ä¿¡æ¯ã€‚<br>ä»¥åŠï¼Œä½œä¸ºç»¼åˆæ€§é‡‘èç³»ç»Ÿä¸­çš„åº•å±‚æ•°æ®å¹³å°ï¼Œèƒ½å¤Ÿä¸ºå…¶ä»–æ¨¡å—çš„å¼€å‘æä¾›æ•°æ®æºã€‚<br>&lt;ç¿»é¡µ&gt;</p>
<h3 id="ç¬¬äºŒéƒ¨åˆ†-å¼€å‘ç¯å¢ƒä¸æŠ€æœ¯"><a href="#ç¬¬äºŒéƒ¨åˆ†-å¼€å‘ç¯å¢ƒä¸æŠ€æœ¯" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† å¼€å‘ç¯å¢ƒä¸æŠ€æœ¯"></a>ç¬¬äºŒéƒ¨åˆ† å¼€å‘ç¯å¢ƒä¸æŠ€æœ¯</h3><p>&lt;ç¿»é¡µ&gt;<br>é¦–å…ˆä»‹ç»ä¸€ä¸‹ç½‘ç»œçˆ¬è™«ï¼Œå…¶é€šè¿‡æ¨¡æ‹Ÿäººç±»æµè§ˆç½‘é¡µçš„è¡Œä¸ºï¼Œè·å–å¹¶è§£æç½‘ç»œä¿¡æ¯ã€‚<br>&lt;ç¿»é¡µ&gt;<br>å¦‚æœç›®æ ‡ç½‘ç«™æä¾›äº† API æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·è¿›è¡ŒæŠ“åŒ…ï¼Œå¹¶åœ¨Pythoné¡¹ç›®ä¸­ç›´æ¥è°ƒç”¨ä»¥è·å–æ•°æ®ã€‚<br>&lt;ç¿»é¡µ&gt;<br>ç³»ç»Ÿçš„å¼€å‘è¯­è¨€ä¸º Pythonï¼Œé‡‡ç”¨ Django æ¡†æ¶ç»“åˆå‰ç«¯æŠ€æœ¯è¿›è¡Œ Web åº”ç”¨çš„æ„å»ºã€‚é€šè¿‡ç¼–å†™ MTV ä¸‰å±‚æ¶æ„ä»£ç ï¼Œå¼€å‘å­ç³»ç»Ÿçš„å„åŠŸèƒ½ã€‚<br>&lt;ç¿»é¡µ&gt;<br>æœ¬ç³»ç»Ÿä¸­é€‰æ‹© MySQL ä½œä¸ºæ•°æ®åº“ï¼Œå­˜å‚¨çˆ¬å–åˆ°çš„ç½‘ç»œé‡‘èæ•°æ®ï¼Œä»¥åŠè¿›è¡Œåç»­çš„åŠŸèƒ½å¼€å‘ã€‚<br>&lt;ç¿»é¡µ&gt;<br>æœ¬ç³»ç»Ÿçš„æ•°æ®åº“ä¸­ä¸»è¦æœ‰ä¸¤ç§è¡¨ï¼Œå³å„ç±»æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯è¡¨å’Œæ¸¯è‚¡å†å²æ•°æ®è¡¨ã€‚<br>&lt;ç¿»é¡µ&gt;<br>åœ¨æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯è¡¨ä¸­ï¼ŒåŒ…æ‹¬è‚¡ç¥¨ä»£ç ã€è‚¡ç¥¨åç§°ã€æœ€æ–°ä»·ã€æ¶¨è·Œé¢ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œå¦å¤–è¿˜æ·»åŠ äº† date_updated å­—æ®µï¼Œä»¥ä¾¿åœ¨æ›´æ–°å†å²æ•°æ®è¡¨æ—¶è®¡ç®—å‡ºæ‰€éœ€æ›´æ–°æ•°æ®çš„æ—¶é—´æ®µã€‚<br>&lt;ç¿»é¡µ&gt;<br>åœ¨æ¸¯è‚¡å†å²æ•°æ®è¡¨ä¸­ï¼Œä¿å­˜äº†è¡¨ç¤ºKçº¿æ•°æ®çš„ç›¸å…³å­—æ®µã€‚<br>&lt;ç¿»é¡µ&gt;</p>
<h3 id="ç¬¬ä¸‰éƒ¨åˆ†-ç³»ç»Ÿè®¾è®¡ä¸å®ç°"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-ç³»ç»Ÿè®¾è®¡ä¸å®ç°" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ† ç³»ç»Ÿè®¾è®¡ä¸å®ç°"></a>ç¬¬ä¸‰éƒ¨åˆ† ç³»ç»Ÿè®¾è®¡ä¸å®ç°</h3><p>&lt;ç¿»é¡µ&gt;<br>æœ¬æ–‡çš„æ•°æ®åŸå‹ç³»ç»Ÿæ˜¯ä½œä¸ºç»¼åˆæ€§é‡‘èç³»ç»Ÿåº•å±‚çš„æ•°æ®å¹³å°æ¨¡å—è¿›è¡Œå¼€å‘çš„ï¼Œå…¶ä»–çš„é‡åŒ–å› å­åˆ†ææ¨¡å—å’Œé‡åŒ–æŠ•èµ„ç­–ç•¥æ¨¡å—ç”±å°ç»„æˆå‘˜è´Ÿè´£å¼€å‘ã€‚<br>&lt;ç¿»é¡µ&gt;<br>åœ¨åº•å±‚çš„æ•°æ®å¹³å°ï¼Œå³æœ¬æ–‡çš„æ•°æ®åŸå‹ç³»ç»Ÿä¸­ï¼Œä¿å­˜äº†é¦™æ¸¯é‡‘èå¸‚åœºè‚¡ç¥¨çš„äº¤æ˜“æ•°æ®ï¼ŒåŒ…æ‹¬äº†æ•°æ®åº“å»ºè®¾æ¨¡å—ã€æ•°æ®å¯è§†åŒ–æ¨¡å—ã€æ•°æ®æ¥å£æ¨¡å—ã€æ•°æ®åˆ†ææ¨¡å—è¿™å››ä¸ªæ¨¡å—ã€‚<br>&lt;ç¿»é¡µ&gt;<br>åœ¨æ•°æ®åº“å»ºè®¾æ¨¡å—ä¸­ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªç¨‹åºï¼Œåˆ†åˆ«ç”¨äºåˆ›å»ºæ•°æ®åº“å’Œè¡¨ï¼Œåˆå§‹åŒ–è¡¨æ•°æ®ï¼Œä»¥åŠæ›´æ–°è¡¨æ•°æ®ã€‚<br>å…¶ä¸­æ›´æ–°ç¨‹åºæ˜¯åˆ©ç”¨ schedule åº“ï¼Œè®¾ç½®å®šæ—¶ä»»åŠ¡16ç‚¹å®æ—¶æ›´æ–°æ•°æ®åˆ°å„ç±»æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯è¡¨ä¸­ï¼Œæ ¹æ®åŸºæœ¬ä¿¡æ¯è¡¨ä¸­çš„çš„è‚¡ç¥¨ä»£ç å’Œæ›´æ–°æ—¶é—´ï¼Œè·å–å…¶è‡ªæ›´æ–°æ—¶é—´è‡³ä»Šçš„Kçº¿æ•°æ®æ·»åŠ åˆ°å¯¹åº”çš„è¡¨ä¸­åŒæ—¶ä¿®æ”¹â€œæ›´æ–°æ—¶é—´â€ä¸ºå½“æ—¥ï¼Œä»¥åŠå®šæœŸå¯¹è¡¨æ‰§è¡Œâ€œè½¬å‚¨SQLâ€æ“ä½œè¿›è¡Œæ•°æ®å¤‡ä»½ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶å¿«é€Ÿé‡æ„ã€‚<br>&lt;ç¿»é¡µ&gt;<br>åœ¨æ•°æ®å¯è§†åŒ–æ¨¡å—ä¸­ï¼Œæä¾›äº†åŸºæœ¬ä¿¡æ¯è¡¨æ ¼åŠŸèƒ½ã€‚ç‚¹å‡»å­ç³»ç»Ÿå¯¼èˆªæ ï¼Œé€‰æ‹©æ¸¯è‚¡ç±»å‹ï¼Œåœ¨å­ç³»ç»Ÿç•Œé¢ä¸Šå¯¹åº”çš„åŸºæœ¬ä¿¡æ¯æ•°æ®ã€‚<br>&lt;ç¿»é¡µ&gt;<br>å®ç°çš„åŸºæœ¬æ­¥éª¤ä¸ºï¼šç¼–å†™æ¨¡å‹ä¸æ•°æ®åº“è¡¨æ˜ å°„ï¼Œç¼–å†™è§†å›¾æ¥æ”¶è¯·æ±‚å’Œæ¨¡ç‰ˆé¡µé¢ï¼Œå¹¶é…ç½®å¥½è¯·æ±‚è®¿é—®è·¯å¾„ï¼Œå³å¯é€šè¿‡æµè§ˆå™¨è®¿é—®ç³»ç»ŸåŠŸèƒ½ã€‚<br>&lt;ç¿»é¡µ&gt;<br>å¦å¤–ï¼Œæä¾›äº†å†å²æ•°æ®Kçº¿å›¾å±•ç¤ºåŠŸèƒ½ï¼Œæ ¹æ®å‰ç«¯è¾“å…¥çš„å„ç±»æ¸¯è‚¡è‚¡ç¥¨ä»£ç ï¼Œä»æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œå¹¶åˆ©ç”¨ ECharts ç”Ÿæˆå†å²æ•°æ®Kçº¿å›¾ã€‚<br>&lt;ç¿»é¡µ&gt;<br>å…¶å®ç°æ­¥éª¤ç±»ä¼¼å‰é¢ä»‹ç»çš„åŸºæœ¬ä¿¡æ¯è¡¨æ ¼ã€‚<br>&lt;ç¿»é¡µ&gt;<br>åœ¨æ•°æ®æ¥å£æ¨¡å—ä¸­ï¼Œå¤ç”¨äº†å†å²æ•°æ®Kçº¿å›¾åŠŸèƒ½çš„åŠŸèƒ½ç•Œé¢å’Œä¸šåŠ¡ä»£ç ï¼Œæ ¹æ®è¾“å…¥çš„å„ç±»æ¸¯è‚¡è‚¡ç¥¨ä»£ç ï¼Œä»æ•°æ®åº“ä¸­å¯¹åº”çš„å†å²æ•°æ®è¡¨ä¸­è·å–æ•°æ®ï¼Œä»¥JSONå½¢å¼è¿”å›åˆ°æ–°æ ‡ç­¾é¡µé¢ä¸Šã€‚<br>&lt;ç¿»é¡µ&gt;<br>æ•°æ®å¯ä»¥ä¾›ç»¼åˆæ€§é‡‘èç³»ç»Ÿä¸­çš„å…¶ä»–æ¨¡å—ä½¿ç”¨ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨é¡µé¢ä¸Šå³é”®â€œå¦å­˜ä¸ºâ€ä¸‹è½½æ•°æ®æ–‡ä»¶ã€‚<br>&lt;ç¿»é¡µ&gt;<br>æœ€åæ˜¯æ•°æ®åˆ†ææ¨¡å—ï¼šå¯¹äºé‡‡é›†çš„é‡‘èæ•°æ®ä½œè¿›ä¸€æ­¥çš„åˆ†æï¼Œå‘ˆç°æ›´ç›´è§‚å’Œæ›´æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å¦å¤–çˆ¬å–äº†å†…åœ°å¸‚åœºæ²ªæ·±äº¬Aè‚¡çš„æ•°æ®ï¼Œå¯¹æ¯”åˆ†æå‡¸æ˜¾æ¸¯é™†å¸‚åœºçš„æ•°æ®å·®åˆ«ã€‚<br>&lt;ç¿»é¡µ&gt;<br>é¦–å…ˆï¼Œå¯¹äºæ¸¯è‚¡ä¸æ²ªæ·±äº¬Aè‚¡ï¼Œè®¡ç®—åŸºæœ¬ç»Ÿè®¡æè¿°ã€‚<br>&lt;ç¿»é¡µ&gt;<br>å¯ä»¥ç®€å•åˆ†æçœ‹å‡ºï¼Œé¦™æ¸¯å¸‚åœºåœ¨è‚¡ä»·æ³¢åŠ¨æ€§å’Œäº¤æ˜“é‡æ–¹é¢æ™®éè¾ƒå¤§ï¼Œå‘ˆç°å‡ºæ›´é«˜çš„å¸‚åœºæ´»åŠ›å’Œæ³¢åŠ¨æ€§ï¼›<br>å†…åœ°å¸‚åœºçš„å¹³å‡è‚¡ä»·è™½ç„¶è¾ƒä½ï¼Œä½†äº¤æ˜“é‡å’Œäº¤æ˜“é‡‘é¢å´ç›¸å¯¹è¾ƒé«˜ï¼Œæ˜¾ç¤ºå‡ºæ›´ä¸ºç¨³å®šçš„äº¤æ˜“æƒ…å†µã€‚<br>&lt;ç¿»é¡µ&gt;<br>ç„¶åè¿›ä¸€æ­¥è¿›è¡Œå„ç±»æ•°æ®çš„å¯è§†åŒ–åˆ†æã€‚æˆ‘ä»¬è¿›è¡Œäº†æ”¶ç›˜ä»·åˆ†å¸ƒç»Ÿè®¡ï¼Œè¿™æ˜¯æ”¾å¤§åã€‚ã€‚<br>&lt;ç¿»é¡µ&gt;<br>ç„¶åæ˜¯æ¶¨è·Œå¹…åˆ†å¸ƒæ¯”è¾ƒã€‚ã€‚<br>&lt;ç¿»é¡µ&gt;</p>
<h3 id="ç¬¬å››éƒ¨åˆ†-æ€»ç»“ä¸å±•æœ›"><a href="#ç¬¬å››éƒ¨åˆ†-æ€»ç»“ä¸å±•æœ›" class="headerlink" title="ç¬¬å››éƒ¨åˆ† æ€»ç»“ä¸å±•æœ›"></a>ç¬¬å››éƒ¨åˆ† æ€»ç»“ä¸å±•æœ›</h3><p>&lt;ç¿»é¡µ&gt;<br>æœ¬æ¬¡æ¯•ä¸šè®¾è®¡çš„å·¥ä½œæ¶µç›–äº†æ­å»ºæ•°æ®åŸå‹ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬é‡‘èæ•°æ®åº“çš„è®¾è®¡ã€ç³»ç»Ÿå‰ç«¯å’Œåç«¯çš„å¼€å‘ç­‰ã€‚<br>ï¼ˆæ•°æ®é‡‡é›†ï¼šç›´æ¥ä»ä¸œæ–¹è´¢å¯Œç½‘æ¥å£è·å–é‡‘èæ•°æ®ï¼Œå¹¶é€šè¿‡æ•°æ®æ¸…æ´—å’Œæ•´ç†å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚åœ¨å¼€å‘æ—¶ä½¿ç”¨äº†å¤§æ¨¡å‹è¿›è¡Œæ•°æ®å«ä¹‰çš„åˆ†æå’Œç¼–å†™æ•°æ®æ¸…æ´—ä»£ç ï¼Œæå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡ã€‚å¯¹äºå‰ç«¯çš„ç¼–å†™ï¼ŒåŒç»„çš„åŒå­¦æä¾›äº†æ¨¡æ¿ï¼Œä¸ºå¼€å‘å¸¦æ¥äº†å¾ˆå¤§çš„ä¾¿åˆ©ã€‚åªéœ€å¼€å‘å­ç³»ç»ŸåŠŸèƒ½ç•Œé¢ï¼Œå°†æ¨¡æ¿é¡µé¢ä¸­ç©ºç¼ºå†…å®¹åŒºå—è¦†ç›–ã€‚åœ¨ç³»ç»Ÿåç«¯çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¿«é€Ÿå­¦ä¹ äº†Djangoçš„å¼€å‘æµç¨‹ï¼Œè¿›è¡Œéœ€æ±‚åˆ†æå’ŒåŠŸèƒ½è®¾è®¡åï¼Œè§£å†³å®é™…å¼€å‘é—®é¢˜ï¼ŒåŒæ—¶æ€»ç»“ç»éªŒå®Œå–„ç³»ç»Ÿã€‚ï¼‰<br>åŒæ—¶ï¼Œå¯¹äºè¿™å‡ ä¸ªæ–¹é¢ï¼Œæœªæ¥è¿˜æœ‰éœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚<br>&lt;ç¿»é¡µ&gt;<br>å¯¹äºè¿™å‡ ä¸ªæ–¹é¢ï¼Œæœªæ¥ä¹Ÿæœ‰éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œå¦‚åŠ å¼ºæ•°æ®é‡‡é›†æ—¶å¯¹å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œä¼˜åŒ–ç³»ç»Ÿå‰åç«¯æ€§èƒ½ç­‰ã€‚ã€‚<br>ï¼ˆåœ¨æ•°æ®é‡‡é›†æ–¹é¢ï¼Œå¼•å…¥å¤šçº¿ç¨‹å®ç°å¯¹æ•°æ®çš„å¹¶è¡Œå¤„ç†ï¼Œå¦å¤–è¿˜éœ€åŠ å¼ºå¯¹å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å¥è¿è¡Œã€‚åœ¨ç³»ç»Ÿå‰ç«¯æ–¹é¢ï¼Œè¿›ä¸€æ­¥å®Œå–„ç”¨æˆ·ç•Œé¢çš„è®¾è®¡å’Œç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å¼•å…¥å‰ç«¯æ¡†æ¶å¦‚Reactã€Vue.jsç­‰ï¼Œä»¥æå‡å‰ç«¯å¼€å‘çš„æ•ˆç‡å’Œçµæ´»æ€§ï¼Œæä¾›æ›´åŠ ç›´è§‚å’Œå‹å¥½çš„æ•°æ®å±•ç¤ºæ–¹å¼ã€‚åœ¨ç³»ç»Ÿåç«¯æ–¹é¢ï¼Œä¸æ–­ä¼˜åŒ–ç³»ç»Ÿæ¶æ„å’Œæ€§èƒ½ï¼ŒåŠ å¼ºå¯¹ç³»ç»Ÿçš„ç›‘æ§å’Œç®¡ç†ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³æ½œåœ¨çš„é—®é¢˜ï¼Œç¡®ä¿ç³»ç»Ÿé•¿æœŸç¨³å®šè¿è¡Œã€‚ï¼‰<br>&lt;ç¿»é¡µ&gt;<br>æœ€åæ„Ÿè°¢å„ä½è€å¸ˆçš„è†å¬åŠæŒ‡å¯¼ï¼Œæˆ‘çš„æ±‡æŠ¥åˆ°æ­¤ç»“æŸã€‚</p>
<h3 id="é—®ç­”ç¯èŠ‚"><a href="#é—®ç­”ç¯èŠ‚" class="headerlink" title="é—®ç­”ç¯èŠ‚"></a>é—®ç­”ç¯èŠ‚</h3><ol>
<li>ä¸ºä»€ä¹ˆä¼šé€‰æ‹©è¿™ä¸ªè¯¾é¢˜?<br>(è‡ªèº«åŸå› +å¤–éƒ¨å› ç´ &#x3D;é€‰æ‹©çš„åŸå› ï¼ŒæŠŠé€‰æ‹©çš„åŸå› æ”¾å¤§ï¼Œä»å¤šè§’åº¦å›ç­”)<br>æˆ‘è®¤ä¸ºè®¡ç®—æœºé‡‘èæœ‰æ½œåŠ›ï¼Œä»¥åŠé‡åŒ–æŠ•èµ„çš„ç ”ç©¶åœ¨å½“ä¸‹æ˜¯éå¸¸æœ‰ä»·å€¼çš„ï¼Œæœ‰å¾ˆå¼ºçš„ç°å®æ„ä¹‰ï¼Œå…¶ä¸­æ•°æ®å¹³å°çš„æ„å»ºæ˜¯åŸºçŸ³ã€‚<br>æœ¬æ¬¡æ¯•ä¸šè®¾è®¡çš„å·¥ä½œæ¶µç›–äº†æ­å»ºæ•°æ®åŸå‹ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬é‡‘èæ•°æ®åº“çš„è®¾è®¡ã€ç³»ç»Ÿå‰ç«¯å’Œåç«¯çš„æ­å»ºç­‰ï¼Œæä¾›ä¸€ç§å¿«é€Ÿæ„å»ºçš„æ€è·¯ã€‚</li>
<li>è®ºæ–‡çš„åˆ›æ–°ç‚¹ä½“ç°åœ¨å“ªé‡Œ?<br>(é€šè¿‡å’Œå·²æœ‰æˆæœæˆ–å†…å®¹ç›¸æ¯”è¾ƒ,ä»å†…å®¹å’Œç ”ç©¶æ–¹æ³•ä¸Šæ¥è®²åˆ›æ–°ã€‚)<br>å›ç­”å‚è€ƒ:æœ¬ç¯‡æ¯•ä¸šè®ºæ–‡çš„åˆ›æ–°ä¹‹å¤„åœ¨äºè®¨è®º xxx çš„é—®é¢˜æ—¶ä¸ä»…åœ¨ xxx æ–¹é¢åˆ—å‡ºxxxï¼Œä¹Ÿä»å®é™…çš„è§’åº¦è¿›è¡Œäº†ä¸¾ä¾‹è®ºè¯ã€‚ä¸€æ˜¯åœ¨æ–¹æ³•ä¸Šï¼Œæœ¬æ–‡å°†Xxæ–¹æ³•ä¸XXæ–¹æ³•ç›¸ç»“åˆ,èƒ½å¤Ÿæœ‰æ•ˆæ¶ˆé™¤å•ä¸€æ–¹æ³•å¸¦æ¥çš„è¯¯å·®,æœ‰æ•ˆæé«˜äº†æ•°æ®çš„ç²¾åº¦(ç»“æœçš„æœ‰æ•ˆæ€§)ã€‚äºŒæ˜¯åœ¨ç†è®ºä¸Šï¼Œç»¼åˆè¿‘åå¹´çš„æ–‡çŒ®å‘ç°ï¼Œç›®å‰è¿˜æ²¡æœ‰ç ”ç©¶å­¦è€…æå‡º xXXæ–¹é¢çš„å†…å®¹ï¼Œæœ¬æ–‡åœ¨ç†è®ºçš„æå‡ºä¸Šæ˜¯ä¸€ç§å…¨æ–°çš„å°è¯•</li>
<li>æœ¬è®ºæ–‡ä¸­ä½ ä¸»è¦åšäº†ä»€ä¹ˆ?<br>æŸ¥æ‰¾äº†å¤§é‡çš„æ–‡çŒ®ã€ä¹¦ç±æŠ¥åˆŠï¼Œå¯¹è¿™äº›èµ„æ–™è¿›è¡Œäº†ç²¾è°€ï¼Œç»“åˆå›½å†…å¤–çš„ç ”ç©¶ç°çŠ¶ï¼Œå¯¹ xxxé—®é¢˜è¿›è¡Œäº†å½’çº³æ€»ç»“;åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæç‚¼å‡ºæœ¬è¯¾é¢˜çš„æ ¸å¿ƒï¼Œå¯¹xxxå±•å¼€ç ”ç©¶ï¼Œå¹¶è¿ç”¨ xxx æ–¹æ³•è¿›è¡Œç ”ç©¶;å¯¹xxx ç ”ç©¶ç»“æœè¿›è¡Œåˆ†æï¼Œæå‡º solvexxx é—®é¢˜çš„å»ºè®®åŠæªæ–½ã€‚</li>
<li>æœ¬è®ºæ–‡çš„æ„ä¹‰å’Œç›®çš„æ˜¯ä»€ä¹ˆ?<br>(ç†è®ºæ„ä¹‰+å®è·µæ„ä¹‰)åœ¨ç†è®ºæ–¹é¢ï¼Œæœ¬æ–‡åº”ç”¨äº† Xxxçš„ä¸“ä¸šæ–¹æ³•ï¼Œå¯¹äºä¸°å¯Œæœï¼Œå¹¶ä»¥å…·ä½“çš„ xxx ä¾‹å­å±•å¼€åº”ç”¨å¾—åˆ°è¾ƒå¥½çš„åº”ç”¨ç»“æœã€‚</li>
<li>å†™è®ºæ–‡çš„è¿‡ç¨‹ä¸­æœ‰å“ªäº›å›°éš¾ï¼Œæ€ä¹ˆå…‹æœçš„?<br>(å¦‚å®å™å³å¯ï¼Œä½†ä¸€å®šè¦è¯´é—®é¢˜æ˜¯ solve çš„!)<br>åœ¨æ’°å†™è®ºæ–‡çš„è¿‡ç¨‹ä¸­åœ¨xxæ–¹é¢(èµ„æ–™æ”¶é›†é—®å·å‘æ”¾å®éªŒå¼€å±•)é‡åˆ°æœ‰å…³ xxx(æ‰¾ä¸åˆ°ç›¸åº”ä¸»é¢˜çš„å­¦æœ¯æ–‡çŒ®)å›°éš¾ï¼Œåœ¨ä¸æŒ‡å¯¼è€å¸ˆæ²Ÿé€šåï¼ŒæŸ¥é˜…äº†è€å¸ˆæ¨ã€‚èçš„ç›¸å…³ä¹¦ç±ã€èµ„æ–™ä»¥åŠæ–‡çŒ®ä¿¡æ¯ï¼Œä¹Ÿè¯·æ•™äº†ç›´ç³»çš„å­¦é•¿å­¦å§ä»¬ï¼Œæœ€å solve äº†ç›¸å…³é—®é¢˜ï¼Œåœ¨æ­¤ä¹Ÿéå¸¸æ„Ÿè°¢ç»™æˆ‘æä¾›å¸®åŠ©çš„ä»–ä»¬ã€‚</li>
<li>è®ºæ–‡å“ªäº›åœ°æ–¹å¯ä»¥ç»§ç»­æ”¹è¿›?<br>ç›®å‰å¯¹äºè¿™ä¸ªè¯¾é¢˜çš„è®¤è¯†ç¡®å®è¿˜ä¸å¤Ÿå…·ä½“ï¼Œæ‰€ä»¥åœ¨xxx æ–¹è„çš„ç ”ç©¶ç‰‡æ³•æœ‰ä¸€å®šé™åº¦ï¼Œç ”ç©¶æˆæœä¸å‰è¾ˆä»¬çš„ç ”ç©¶æˆæœä¹Ÿç¡®å®ç›¸ä¼¼ï¼Œæ²¡æœ‰åšåˆ°èƒ½å¤Ÿæ›´åŠ æ·±å…¥çš„ç ”ç©¶ã€‚åŒæ—¶ä¹Ÿå—é™äºæ¡ä»¶æ²¡èƒ½æ›´å¤šçš„è¯•éªŒæ–¹æ³•</li>
<li>è®ºæ–‡ä¸­çš„æ•°æ®å’Œèµ„æ–™ä»å“ªé‡Œæ¥?<br>æˆ‘çš„èµ„æ–™ä¸»è¦æ¥è‡ªäºçŸ¥ç½‘ç­‰å­¦æœ¯ç½‘ç«™å’Œå¯¼å¸ˆæä¾›çš„èµ„æ–™æ–‡çŒ®ï¼Œæ•°æ®æ˜¯é€šè¿‡è°ƒæŸ¥æ³•ä»¥åŠäº›åŒç±»è¯¾é¢˜çš„æ•°æ®å‚è€ƒ,å†ç»Ÿä¸€åˆ†æè®¡ç®—å¾—å‡º</li>
<li>è®ºæ–‡ä¸­ç›¸å…³å®šä¹‰çš„è§£é‡Šï¼Œç†è®ºè§£é‡Š?<br>è¦æ±‚ä½ æŒæ¡æœ¬æ–‡ç ”ç©¶ä¸­é‡ç‚¹çš„ä¸€äº›æ¦‚å¿µåŠå®šä¹‰ã€‚æœ‰ä¸€äº›æ¦‚ç‡å¯ä»¥åšä¸€äº›ç”Ÿæ´»ä¸­çš„ä¸¾ä¾‹æ¥åŠ æ·±è®°å¿†ã€‚å›ç­”çš„æ—¶å€™ä¹Ÿå¯ä»¥æ ¹æ®å®šä¹‰æ¥åŠ ä»¥æ‹“å±•ï¼Œæ¯”å¦‚:è€å¸ˆï¼Œè¿™ä¸ªé—®é¢˜æˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼Œä»¥ç”Ÿæ´»ä¸­çš„æ¡ˆä¾‹æ¥ä¸¾ä¾‹ xxx æ¦‚å¿µå°±å¥½ã€‚æ¯” XXXä¸­çš„XXXXï¼Œå¯¹xxxæ˜¯éå¸¸é‡è¦çš„ã€‚</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/05/01/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" data-id="cmjzvj9mi000zhgv5dwzl4a3k" data-title="æ¯• ä¸š è®¾ è®¡" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-RabbitMQ" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/01/11/RabbitMQ/" class="article-date">
  <time class="dt-published" datetime="2024-01-11T02:58:11.000Z" itemprop="datePublished">2024-01-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/01/11/RabbitMQ/">RabbitMQ</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ä¸€ã€åˆè¯†MQ"><a href="#ä¸€ã€åˆè¯†MQ" class="headerlink" title="ä¸€ã€åˆè¯†MQ"></a>ä¸€ã€åˆè¯†MQ</h1><h4 id="1-åŒæ­¥å’Œå¼‚æ­¥é€šè®¯"><a href="#1-åŒæ­¥å’Œå¼‚æ­¥é€šè®¯" class="headerlink" title="1. åŒæ­¥å’Œå¼‚æ­¥é€šè®¯"></a>1. åŒæ­¥å’Œå¼‚æ­¥é€šè®¯</h4><p>å¾®æœåŠ¡é—´é€šè®¯æœ‰åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æ–¹å¼ï¼š<br>1ã€åŒæ­¥é€šè®¯ï¼šå°±åƒæ‰“ç”µè¯ï¼Œéœ€è¦å®æ—¶å“åº”ï¼›<br>2ã€å¼‚æ­¥é€šè®¯ï¼šå°±åƒå‘é‚®ä»¶ï¼Œä¸éœ€è¦é©¬ä¸Šå›å¤ã€‚<br>ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ï¼Œæ‰“ç”µè¯å¯ä»¥ç«‹å³å¾—åˆ°å“åº”ï¼Œä½†æ˜¯ä½ å´ä¸èƒ½è·Ÿå¤šä¸ªäººåŒæ—¶é€šè¯ã€‚å‘é€é‚®ä»¶å¯ä»¥åŒæ—¶ä¸å¤šä¸ªäººæ”¶å‘é‚®ä»¶ï¼Œä½†æ˜¯å¾€å¾€å“åº”ä¼šæœ‰å»¶è¿Ÿã€‚<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717161939695.png?raw=true" width="700" height="200"> </p>
<ol>
<li><p><strong>åŒæ­¥é€šè®¯</strong><br> æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„Feignè°ƒç”¨å°±å±äºåŒæ­¥æ–¹å¼ï¼Œè™½ç„¶è°ƒç”¨å¯ä»¥å®æ—¶å¾—åˆ°ç»“æœï¼Œä½†å­˜åœ¨ä¸‹é¢çš„é—®é¢˜ï¼š<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717162004285.png?raw=true" width="700" height="200"><br> åŒæ­¥è°ƒç”¨çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ—¶æ•ˆæ€§è¾ƒå¼º</li>
<li>å¯ä»¥ç«‹å³å¾—åˆ°ç»“æœ</li>
</ul>
<p> åŒæ­¥è°ƒç”¨çš„é—®é¢˜ï¼š</p>
<ul>
<li>è€¦åˆåº¦é«˜</li>
<li>æ€§èƒ½å’Œååèƒ½åŠ›ä¸‹é™</li>
<li>æœ‰é¢å¤–çš„èµ„æºæ¶ˆè€—</li>
<li>æœ‰çº§è”å¤±è´¥é—®é¢˜</li>
</ul>
</li>
<li><p><strong>å¼‚æ­¥é€šè®¯</strong>ï¼šå¸¸è§å®ç°æ˜¯äº‹ä»¶é©±åŠ¨æ¨¡å¼<br> å¼‚æ­¥è°ƒç”¨åˆ™å¯ä»¥é¿å…ä¸Šè¿°é—®é¢˜ï¼šæˆ‘ä»¬ä»¥è´­ä¹°å•†å“ä¸ºä¾‹ï¼Œç”¨æˆ·æ”¯ä»˜åéœ€è¦è°ƒç”¨è®¢å•æœåŠ¡å®Œæˆè®¢å•çŠ¶æ€ä¿®æ”¹ï¼Œè°ƒç”¨ç‰©æµæœåŠ¡ï¼Œä»ä»“åº“åˆ†é…å“åº”çš„åº“å­˜å¹¶å‡†å¤‡å‘è´§ã€‚<br> åœ¨äº‹ä»¶æ¨¡å¼ä¸­ï¼Œæ”¯ä»˜æœåŠ¡æ˜¯äº‹ä»¶å‘å¸ƒè€…ï¼ˆpublisherï¼‰ï¼Œåœ¨æ”¯ä»˜å®Œæˆååªéœ€è¦å‘å¸ƒä¸€ä¸ªæ”¯ä»˜æˆåŠŸçš„äº‹ä»¶ï¼ˆeventï¼‰ï¼Œäº‹ä»¶ä¸­å¸¦ä¸Šè®¢å•idã€‚è®¢å•æœåŠ¡å’Œç‰©æµæœåŠ¡æ˜¯äº‹ä»¶è®¢é˜…è€…ï¼ˆConsumerï¼‰ï¼Œè®¢é˜…æ”¯ä»˜æˆåŠŸçš„äº‹ä»¶ï¼Œç›‘å¬åˆ°äº‹ä»¶åå®Œæˆè‡ªå·±ä¸šåŠ¡å³å¯ã€‚ä¸ºäº†è§£é™¤äº‹ä»¶å‘å¸ƒè€…ä¸è®¢é˜…è€…ä¹‹é—´çš„è€¦åˆï¼Œä¸¤è€…å¹¶ä¸æ˜¯ç›´æ¥é€šä¿¡ï¼Œè€Œæ˜¯æœ‰ä¸€ä¸ªä¸­é—´äººï¼ˆBrokerï¼‰ã€‚å‘å¸ƒè€…å‘å¸ƒäº‹ä»¶åˆ°Brokerï¼Œä¸å…³å¿ƒè°æ¥è®¢é˜…äº‹ä»¶ã€‚è®¢é˜…è€…ä»Brokerè®¢é˜…äº‹ä»¶ï¼Œä¸å…³å¿ƒè°å‘æ¥çš„æ¶ˆæ¯ã€‚<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210422095356088.png?raw=true"><br> Broker æ˜¯ä¸€ä¸ªåƒæ•°æ®æ€»çº¿ä¸€æ ·çš„ä¸œè¥¿ï¼Œæ‰€æœ‰çš„æœåŠ¡è¦æ¥æ”¶æ•°æ®å’Œå‘é€æ•°æ®éƒ½å‘åˆ°è¿™ä¸ªæ€»çº¿ä¸Šï¼Œè¿™ä¸ªæ€»çº¿å°±åƒåè®®ä¸€æ ·ï¼Œè®©æœåŠ¡é—´çš„é€šè®¯å˜å¾—æ ‡å‡†å’Œå¯æ§ã€‚</p>
<p> <strong>å¥½å¤„ï¼š</strong></p>
<ul>
<li>ååé‡æå‡ï¼šæ— éœ€ç­‰å¾…è®¢é˜…è€…å¤„ç†å®Œæˆï¼Œå“åº”æ›´å¿«é€Ÿ</li>
<li>æ•…éšœéš”ç¦»ï¼šæœåŠ¡æ²¡æœ‰ç›´æ¥è°ƒç”¨ï¼Œä¸å­˜åœ¨çº§è”å¤±è´¥é—®é¢˜</li>
<li>è°ƒç”¨é—´æ²¡æœ‰é˜»å¡ï¼Œä¸ä¼šé€ æˆæ— æ•ˆçš„èµ„æºå ç”¨</li>
<li>è€¦åˆåº¦æä½ï¼Œæ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥çµæ´»æ’æ‹”ï¼Œå¯æ›¿æ¢</li>
<li>æµé‡å‰Šå³°ï¼šä¸ç®¡å‘å¸ƒäº‹ä»¶çš„æµé‡æ³¢åŠ¨å¤šå¤§ï¼Œéƒ½ç”±Brokeræ¥æ”¶ï¼Œè®¢é˜…è€…å¯ä»¥æŒ‰ç…§è‡ªå·±çš„é€Ÿåº¦å»å¤„ç†äº‹ä»¶</li>
</ul>
<p> <strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æ¶æ„å¤æ‚äº†ï¼Œä¸šåŠ¡æ²¡æœ‰æ˜æ˜¾çš„æµç¨‹çº¿ï¼Œä¸å¥½ç®¡ç†ï¼›</li>
<li>éœ€è¦ä¾èµ–äºBrokerçš„å¯é ã€å®‰å…¨ã€æ€§èƒ½<br> å¥½åœ¨ç°åœ¨å¼€æºè½¯ä»¶æˆ–äº‘å¹³å°ä¸Š Broker çš„è½¯ä»¶æ˜¯éå¸¸æˆç†Ÿçš„ï¼Œæ¯”è¾ƒå¸¸è§çš„ä¸€ç§å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„MQæŠ€æœ¯ã€‚</li>
</ul>
</li>
</ol>
<h4 id="2-æŠ€æœ¯å¯¹æ¯”"><a href="#2-æŠ€æœ¯å¯¹æ¯”" class="headerlink" title="2. æŠ€æœ¯å¯¹æ¯”"></a>2. æŠ€æœ¯å¯¹æ¯”</h4><p>MQï¼Œä¸­æ–‡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰ï¼Œå­—é¢æ¥çœ‹å°±æ˜¯å­˜æ”¾æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚ä¹Ÿå°±æ˜¯äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­çš„Brokerã€‚<br>æ¯”è¾ƒå¸¸è§çš„MQå®ç°ï¼šActiveMQï¼ŒRabbitMQï¼ŒRocketMQï¼ŒKafkaã€‚å‡ ç§å¸¸è§MQçš„å¯¹æ¯”ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th><strong>RabbitMQ</strong></th>
<th><strong>ActiveMQ</strong></th>
<th><strong>RocketMQ</strong></th>
<th><strong>Kafka</strong></th>
</tr>
</thead>
<tbody><tr>
<td>å…¬å¸&#x2F;ç¤¾åŒº</td>
<td>Rabbit</td>
<td>Apache</td>
<td>é˜¿é‡Œ</td>
<td>Apache</td>
</tr>
<tr>
<td>å¼€å‘è¯­è¨€</td>
<td>Erlang</td>
<td>Java</td>
<td>Java</td>
<td>Scala&amp;Java</td>
</tr>
<tr>
<td>åè®®æ”¯æŒ</td>
<td>AMQPï¼ŒXMPPï¼ŒSMTPï¼ŒSTOMP</td>
<td>OpenWire,STOMPï¼ŒREST,XMPP,AMQP</td>
<td>è‡ªå®šä¹‰åè®®</td>
<td>è‡ªå®šä¹‰åè®®</td>
</tr>
<tr>
<td>å¯ç”¨æ€§</td>
<td>é«˜</td>
<td>ä¸€èˆ¬</td>
<td>é«˜</td>
<td>é«˜</td>
</tr>
<tr>
<td>å•æœºååé‡</td>
<td>ä¸€èˆ¬</td>
<td>å·®</td>
<td>é«˜</td>
<td>éå¸¸é«˜</td>
</tr>
<tr>
<td>æ¶ˆæ¯å»¶è¿Ÿ</td>
<td>å¾®ç§’çº§</td>
<td>æ¯«ç§’çº§</td>
<td>æ¯«ç§’çº§</td>
<td>æ¯«ç§’ä»¥å†…</td>
</tr>
<tr>
<td>æ¶ˆæ¯å¯é æ€§</td>
<td>é«˜</td>
<td>ä¸€èˆ¬</td>
<td>é«˜</td>
<td>ä¸€èˆ¬</td>
</tr>
</tbody></table>
<p>è¿½æ±‚å¯ç”¨æ€§ï¼šKafkaã€ RocketMQ ã€RabbitMQ</p>
<p>è¿½æ±‚å¯é æ€§ï¼šRabbitMQã€RocketMQ</p>
<p>è¿½æ±‚ååèƒ½åŠ›ï¼šRocketMQã€Kafka</p>
<p>è¿½æ±‚æ¶ˆæ¯ä½å»¶è¿Ÿï¼šRabbitMQã€Kafka</p>
<h1 id="äºŒã€å¿«é€Ÿå…¥é—¨"><a href="#äºŒã€å¿«é€Ÿå…¥é—¨" class="headerlink" title="äºŒã€å¿«é€Ÿå…¥é—¨"></a>äºŒã€å¿«é€Ÿå…¥é—¨</h1><h4 id="1-å®‰è£…RabbitMQ"><a href="#1-å®‰è£…RabbitMQ" class="headerlink" title="1. å®‰è£…RabbitMQ"></a>1. å®‰è£…RabbitMQ</h4><!-- å®‰è£…RabbitMQï¼Œå‚è€ƒè¯¾å‰èµ„æ–™ï¼š![](https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717162628635.png?raw=true) -->
<p>MQçš„åŸºæœ¬ç»“æ„ï¼š<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717162752376.png?raw=true"><br>RabbitMQä¸­çš„ä¸€äº›è§’è‰²ï¼š</p>
<ul>
<li>publisherï¼šç”Ÿäº§è€…</li>
<li>consumerï¼šæ¶ˆè´¹è€…</li>
<li>exchangeï¼šäº¤æ¢æœºï¼Œè´Ÿè´£æ¶ˆæ¯è·¯ç”±</li>
<li>queueï¼šé˜Ÿåˆ—ï¼Œå­˜å‚¨æ¶ˆæ¯</li>
<li>virtualHostï¼šè™šæ‹Ÿä¸»æœºï¼Œéš”ç¦»ä¸åŒç§Ÿæˆ·çš„exchangeã€queueã€æ¶ˆæ¯çš„éš”ç¦»</li>
</ul>
<h4 id="2-RabbitMQæ¶ˆæ¯æ¨¡å‹"><a href="#2-RabbitMQæ¶ˆæ¯æ¨¡å‹" class="headerlink" title="2. RabbitMQæ¶ˆæ¯æ¨¡å‹"></a>2. RabbitMQæ¶ˆæ¯æ¨¡å‹</h4><!-- RabbitMQå®˜æ–¹æä¾›äº†5ä¸ªä¸åŒçš„Demoç¤ºä¾‹ï¼Œå¯¹åº”äº†ä¸åŒçš„æ¶ˆæ¯æ¨¡å‹ï¼š -->
<p><img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717163332646.png?raw=true"></p>
<h4 id="3-å¯¼å…¥Demoå·¥ç¨‹"><a href="#3-å¯¼å…¥Demoå·¥ç¨‹" class="headerlink" title="3. å¯¼å…¥Demoå·¥ç¨‹"></a>3. å¯¼å…¥Demoå·¥ç¨‹</h4><!-- è¯¾å‰èµ„æ–™æä¾›äº†ä¸€ä¸ªDemoå·¥ç¨‹ï¼Œmq-demo:![](https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717163253264.png?raw=true)
å¯¼å…¥åå¯ä»¥çœ‹åˆ°ç»“æ„å¦‚ä¸‹ï¼š -->
<p><img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717163604330.png?raw=true"><br>åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>mq-demoï¼šçˆ¶å·¥ç¨‹ï¼Œç®¡ç†é¡¹ç›®ä¾èµ–</li>
<li>publisherï¼šæ¶ˆæ¯çš„å‘é€è€…</li>
<li>consumerï¼šæ¶ˆæ¯çš„æ¶ˆè´¹è€…</li>
</ul>
<h4 id="4-å…¥é—¨æ¡ˆä¾‹"><a href="#4-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="4. å…¥é—¨æ¡ˆä¾‹"></a>4. å…¥é—¨æ¡ˆä¾‹</h4><p>ç®€å•é˜Ÿåˆ—æ¨¡å¼çš„æ¨¡å‹å›¾ï¼š<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717163434647.png?raw=true" width="700" height="200"><br>å®˜æ–¹çš„HelloWorldæ˜¯åŸºäºæœ€åŸºç¡€çš„æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹æ¥å®ç°çš„ï¼ŒåªåŒ…æ‹¬ä¸‰ä¸ªè§’è‰²ï¼š</p>
<ul>
<li>publisherï¼šæ¶ˆæ¯å‘å¸ƒè€…ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°é˜Ÿåˆ—queue</li>
<li>queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè´Ÿè´£æ¥å—å¹¶ç¼“å­˜æ¶ˆæ¯</li>
<li>consumerï¼šè®¢é˜…é˜Ÿåˆ—ï¼Œå¤„ç†é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯</li>
</ul>
<ol>
<li>publisherå®ç°<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PublisherTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendMessage</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">// 1.å»ºç«‹è¿æ¥</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">// 1.1.è®¾ç½®è¿æ¥å‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸»æœºåï¼ˆæ”¹æˆè‡ªå·±çš„ipï¼‰ã€ç«¯å£å·ã€vhostã€ç”¨æˆ·åã€å¯†ç </span></span><br><span class="line">        factory.setHost(<span class="string">&quot;192.168.150.101&quot;</span>); </span><br><span class="line">        factory.setPort(<span class="number">5672</span>);</span><br><span class="line">        factory.setVirtualHost(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        factory.setUsername(<span class="string">&quot;itcast&quot;</span>);</span><br><span class="line">        factory.setPassword(<span class="string">&quot;123321&quot;</span>);</span><br><span class="line">        <span class="comment">// 1.2.å»ºç«‹è¿æ¥</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.åˆ›å»ºé€šé“Channel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;simple.queue&quot;</span>;</span><br><span class="line">        channel.queueDeclare(queueName, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.å‘é€æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello, rabbitmq!&quot;</span>;</span><br><span class="line">        channel.basicPublish(<span class="string">&quot;&quot;</span>, queueName, <span class="literal">null</span>, message.getBytes());</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘é€æ¶ˆæ¯æˆåŠŸï¼šã€&quot;</span> + message + <span class="string">&quot;ã€‘&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.å…³é—­é€šé“å’Œè¿æ¥</span></span><br><span class="line">        channel.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>consumerå®ç°<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsumerTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">// 1.å»ºç«‹è¿æ¥</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">// 1.1.è®¾ç½®è¿æ¥å‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸»æœºåã€ç«¯å£å·ã€vhostã€ç”¨æˆ·åã€å¯†ç </span></span><br><span class="line">        factory.setHost(<span class="string">&quot;192.168.150.101&quot;</span>);</span><br><span class="line">        factory.setPort(<span class="number">5672</span>);</span><br><span class="line">        factory.setVirtualHost(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        factory.setUsername(<span class="string">&quot;itcast&quot;</span>);</span><br><span class="line">        factory.setPassword(<span class="string">&quot;123321&quot;</span>);</span><br><span class="line">        <span class="comment">// 1.2.å»ºç«‹è¿æ¥</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.åˆ›å»ºé€šé“Channel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;simple.queue&quot;</span>;</span><br><span class="line">        channel.queueDeclare(queueName, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.è®¢é˜…æ¶ˆæ¯</span></span><br><span class="line">        channel.basicConsume(queueName, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope,</span></span><br><span class="line"><span class="params">                                       AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                <span class="comment">// 5.å¤„ç†æ¶ˆæ¯</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(body);</span><br><span class="line">                System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€&quot;</span> + message + <span class="string">&quot;ã€‘&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥æ”¶æ¶ˆæ¯ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
æ¶ˆæ¯è¢«æ¶ˆè´¹åï¼Œå°±æ¶ˆå¤±ï¼ˆé˜…åå³ç„šï¼‰</li>
</ol>
<hr>

<h1 id="ä¸‰ã€SpringAMQP"><a href="#ä¸‰ã€SpringAMQP" class="headerlink" title="ä¸‰ã€SpringAMQP"></a>ä¸‰ã€SpringAMQP</h1><p>SpringAMQP æ˜¯åŸºäº RabbitMQ å°è£…çš„ä¸€å¥—æ¨¡æ¿ï¼Œå¹¶ä¸”è¿˜åˆ©ç”¨ SpringBoot å¯¹å…¶å®ç°äº†è‡ªåŠ¨è£…é…ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚<br>SpringAMQPæä¾›äº†ä¸‰ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li>è‡ªåŠ¨å£°æ˜é˜Ÿåˆ—ã€äº¤æ¢æœºåŠå…¶ç»‘å®šå…³ç³»</li>
<li>åŸºäºæ³¨è§£çš„ç›‘å¬å™¨æ¨¡å¼ï¼Œå¼‚æ­¥æ¥æ”¶æ¶ˆæ¯</li>
<li>å°è£…äº†RabbitTemplateå·¥å…·ï¼Œç”¨äºå‘é€æ¶ˆæ¯ <img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717164024967.png?raw=true" width="400" height="200">
<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717164038678.png?raw=true" width="400" height="200"></li>
</ul>
<h4 id="1-Basic-Queue-ç®€å•é˜Ÿåˆ—æ¨¡å‹"><a href="#1-Basic-Queue-ç®€å•é˜Ÿåˆ—æ¨¡å‹" class="headerlink" title="1. Basic Queue ç®€å•é˜Ÿåˆ—æ¨¡å‹"></a>1. Basic Queue ç®€å•é˜Ÿåˆ—æ¨¡å‹</h4><p>åœ¨çˆ¶å·¥ç¨‹mq-demoä¸­å¼•å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--AMQPä¾èµ–ï¼ŒåŒ…å«RabbitMQ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol>
<li>æ¶ˆæ¯å‘é€<br>é¦–å…ˆé…ç½®MQåœ°å€ï¼Œåœ¨publisheræœåŠ¡çš„application.ymlä¸­æ·»åŠ é…ç½®ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># ä¸»æœºå</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># ç«¯å£</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/</span> <span class="comment"># è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">itcast</span> <span class="comment"># ç”¨æˆ·å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123321</span> <span class="comment"># å¯†ç </span></span><br></pre></td></tr></table></figure>
ç„¶ååœ¨publisheræœåŠ¡ä¸­ç¼–å†™æµ‹è¯•ç±»SpringAmqpTestï¼Œå¹¶åˆ©ç”¨RabbitTemplateå®ç°æ¶ˆæ¯å‘é€ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringAmqpTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSimpleQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// é˜Ÿåˆ—åç§°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;simple.queue&quot;</span>;</span><br><span class="line">        <span class="comment">// æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello, spring amqp!&quot;</span>;</span><br><span class="line">        <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">        rabbitTemplate.convertAndSend(queueName, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ¶ˆæ¯æ¥æ”¶<br>é¦–å…ˆé…ç½®MQåœ°å€ï¼Œåœ¨consumeræœåŠ¡çš„application.ymlä¸­æ·»åŠ é…ç½®ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># ä¸»æœºå</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># ç«¯å£</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/</span> <span class="comment"># è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">itcast</span> <span class="comment"># ç”¨æˆ·å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123321</span> <span class="comment"># å¯†ç </span></span><br></pre></td></tr></table></figure>
ç„¶ååœ¨consumeræœåŠ¡çš„<code>cn.itcast.mq.listener</code>åŒ…ä¸­æ–°å»ºä¸€ä¸ªç±»SpringRabbitListenerï¼Œä»£ç å¦‚ä¸‹ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringRabbitListener</span> &#123;</span><br><span class="line">    <span class="meta">@RabbitListener(queues = &quot;simple.queue&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenSimpleQueueMessage</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;spring æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€&quot;</span> + msg + <span class="string">&quot;ã€‘&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-WorkQueue"><a href="#2-WorkQueue" class="headerlink" title="2. WorkQueue"></a>2. WorkQueue</h4><p>Work queuesï¼Œä¹Ÿè¢«ç§°ä¸ºï¼ˆTask queuesï¼‰ï¼Œä»»åŠ¡æ¨¡å‹ã€‚ç®€å•æ¥è¯´å°±æ˜¯<strong>è®©å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…±åŒæ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯</strong>ã€‚<br>å½“æ¶ˆæ¯å¤„ç†æ¯”è¾ƒè€—æ—¶çš„æ—¶å€™ï¼Œå¯èƒ½ç”Ÿäº§æ¶ˆæ¯çš„é€Ÿåº¦ä¼šè¿œè¿œå¤§äºæ¶ˆæ¯çš„æ¶ˆè´¹é€Ÿåº¦ã€‚é•¿æ­¤ä»¥å¾€ï¼Œæ¶ˆæ¯å°±ä¼šå †ç§¯è¶Šæ¥è¶Šå¤šï¼Œæ— æ³•åŠæ—¶å¤„ç†ã€‚æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ work æ¨¡å‹ï¼Œå¤šä¸ªæ¶ˆè´¹è€…å…±åŒå¤„ç†æ¶ˆæ¯å¤„ç†ï¼Œé€Ÿåº¦å°±èƒ½å¤§å¤§æé«˜äº†ã€‚<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717164238910.png?raw=true" width="400" height="200"></p>
<ol>
<li>æ¶ˆæ¯å‘é€ï¼šåœ¨publisheræœåŠ¡ä¸­çš„SpringAmqpTestç±»ä¸­æ·»åŠ ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * workQueue</span></span><br><span class="line"><span class="comment">     * å‘é˜Ÿåˆ—ä¸­ä¸åœå‘é€æ¶ˆæ¯ï¼Œæ¨¡æ‹Ÿæ¶ˆæ¯å †ç§¯ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testWorkQueue</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;simple.queue&quot;</span>;</span><br><span class="line">    <span class="comment">// æ¶ˆæ¯</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello, message_&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">        rabbitTemplate.convertAndSend(queueName, message + i);</span><br><span class="line">        Thread.sleep(<span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ¶ˆæ¯æ¥æ”¶ï¼šè¦æ¨¡æ‹Ÿå¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œæˆ‘ä»¬åœ¨consumeræœåŠ¡çš„SpringRabbitListenerä¸­æ·»åŠ 2ä¸ªæ–°çš„æ–¹æ³•ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(queues = &quot;simple.queue&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenWorkQueue1</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…1æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€&quot;</span> + msg + <span class="string">&quot;ã€‘&quot;</span> + LocalTime.now());</span><br><span class="line">    Thread.sleep(<span class="number">20</span>);``</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RabbitListener(queues = &quot;simple.queue&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenWorkQueue2</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    System.err.println(<span class="string">&quot;æ¶ˆè´¹è€…2........æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€&quot;</span> + msg + <span class="string">&quot;ã€‘&quot;</span> + LocalTime.now());</span><br><span class="line">    Thread.sleep(<span class="number">200</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æµ‹è¯•ï¼šå¯åŠ¨ConsumerApplicationåï¼Œåœ¨æ‰§è¡ŒpublisheræœåŠ¡ä¸­åˆšåˆšç¼–å†™çš„å‘é€æµ‹è¯•æ–¹æ³•testWorkQueueã€‚<br>å¯ä»¥çœ‹åˆ°æ¶ˆè´¹è€…1å¾ˆå¿«å®Œæˆäº†è‡ªå·±çš„25æ¡æ¶ˆæ¯ã€‚æ¶ˆè´¹è€…2å´åœ¨ç¼“æ…¢çš„å¤„ç†è‡ªå·±çš„25æ¡æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯è¯´æ¶ˆæ¯æ˜¯å¹³å‡åˆ†é…ç»™æ¯ä¸ªæ¶ˆè´¹è€…ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘åˆ°æ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›ã€‚è¿™æ ·æ˜¾ç„¶æ˜¯æœ‰é—®é¢˜çš„ã€‚<br>åœ¨springä¸­æœ‰ä¸€ä¸ªç®€å•çš„é…ç½®ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ä¿®æ”¹consumeræœåŠ¡çš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ é…ç½®ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">listener:</span></span><br><span class="line">      <span class="attr">simple:</span></span><br><span class="line">        <span class="attr">prefetch:</span> <span class="number">1</span> <span class="comment"># æ¯æ¬¡åªèƒ½è·å–ä¸€æ¡æ¶ˆæ¯ï¼Œå¤„ç†å®Œæˆæ‰èƒ½è·å–ä¸‹ä¸€ä¸ªæ¶ˆæ¯</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="3-å‘å¸ƒ-è®¢é˜…"><a href="#3-å‘å¸ƒ-è®¢é˜…" class="headerlink" title="3. å‘å¸ƒ&#x2F;è®¢é˜…"></a>3. å‘å¸ƒ&#x2F;è®¢é˜…</h4><p>å‘å¸ƒè®¢é˜…çš„æ¨¡å‹å¦‚å›¾ï¼š<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717165309625.png?raw=true" width="500" height="200"><br>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è®¢é˜…æ¨¡å‹ä¸­ï¼Œå¤šäº†ä¸€ä¸ªexchangeè§’è‰²ï¼Œè€Œä¸”è¿‡ç¨‹ç•¥æœ‰å˜åŒ–ï¼š</p>
<ul>
<li>Publisherï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€æ¶ˆæ¯çš„ç¨‹åºï¼Œä½†æ˜¯ä¸å†å‘é€åˆ°é˜Ÿåˆ—ä¸­ï¼Œè€Œæ˜¯å‘ç»™Xï¼ˆäº¤æ¢æœºï¼‰</li>
<li>Exchangeï¼šäº¤æ¢æœºï¼Œå›¾ä¸­çš„Xã€‚ä¸€æ–¹é¢ï¼Œæ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ã€‚å¦ä¸€æ–¹é¢ï¼ŒçŸ¥é“å¦‚ä½•å¤„ç†æ¶ˆæ¯ï¼Œä¾‹å¦‚é€’äº¤ç»™æŸä¸ªç‰¹åˆ«é˜Ÿåˆ—ã€é€’äº¤ç»™æ‰€æœ‰é˜Ÿåˆ—ã€æˆ–æ˜¯å°†æ¶ˆæ¯ä¸¢å¼ƒã€‚åˆ°åº•å¦‚ä½•æ“ä½œï¼Œå–å†³äºExchangeçš„ç±»å‹ã€‚Exchangeæœ‰ä»¥ä¸‹3ç§ç±»å‹ï¼š<ul>
<li>Fanoutï¼šå¹¿æ’­ï¼Œå°†æ¶ˆæ¯äº¤ç»™æ‰€æœ‰ç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ—</li>
<li>Directï¼šå®šå‘ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆæŒ‡å®šrouting key çš„é˜Ÿåˆ—</li>
<li>Topicï¼šé€šé…ç¬¦ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆrouting patternï¼ˆè·¯ç”±æ¨¡å¼ï¼‰ çš„é˜Ÿåˆ—</li>
</ul>
</li>
<li>Consumerï¼šæ¶ˆè´¹è€…ï¼Œä¸ä»¥å‰ä¸€æ ·ï¼Œè®¢é˜…é˜Ÿåˆ—ï¼Œæ²¡æœ‰å˜åŒ–</li>
<li>Queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿä¸ä»¥å‰ä¸€æ ·ï¼Œæ¥æ”¶æ¶ˆæ¯ã€ç¼“å­˜æ¶ˆæ¯ã€‚</li>
</ul>
<p><strong>Exchangeï¼ˆäº¤æ¢æœºï¼‰åªè´Ÿè´£è½¬å‘æ¶ˆæ¯ï¼Œä¸å…·å¤‡å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ›</strong>ï¼Œå› æ­¤å¦‚æœæ²¡æœ‰ä»»ä½•é˜Ÿåˆ—ä¸Exchangeç»‘å®šï¼Œæˆ–è€…æ²¡æœ‰ç¬¦åˆè·¯ç”±è§„åˆ™çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šä¸¢å¤±ï¼<br>è¿™æ ·ï¼Œå®ç°äº†ä¸€ä¸ªæ¶ˆæ¯å‘é€ç»™å¤šä¸ªæ¶ˆè´¹è€…ã€‚</p>
<h4 id="4-Fanout"><a href="#4-Fanout" class="headerlink" title="4. Fanout"></a>4. Fanout</h4><p>åœ¨å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œæ¶ˆæ¯å‘é€æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>1ï¼‰  å¯ä»¥æœ‰å¤šä¸ªé˜Ÿåˆ—</li>
<li>2ï¼‰  æ¯ä¸ªé˜Ÿåˆ—éƒ½è¦ç»‘å®šåˆ°Exchangeï¼ˆäº¤æ¢æœºï¼‰</li>
<li>3ï¼‰  ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ï¼Œåªèƒ½å‘é€åˆ°äº¤æ¢æœºï¼Œäº¤æ¢æœºæ¥å†³å®šè¦å‘ç»™å“ªä¸ªé˜Ÿåˆ—ï¼Œç”Ÿäº§è€…æ— æ³•å†³å®š</li>
<li>4ï¼‰  äº¤æ¢æœºæŠŠæ¶ˆæ¯å‘é€ç»™ç»‘å®šè¿‡çš„æ‰€æœ‰é˜Ÿåˆ—</li>
<li>5ï¼‰  è®¢é˜…é˜Ÿåˆ—çš„æ¶ˆè´¹è€…éƒ½èƒ½æ‹¿åˆ°æ¶ˆæ¯</li>
</ul>
<p>æˆ‘ä»¬çš„è®¡åˆ’æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªäº¤æ¢æœº itcast.fanoutï¼Œç±»å‹æ˜¯Fanout</li>
<li>åˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ—fanout.queue1å’Œfanout.queue2ï¼Œç»‘å®šåˆ°äº¤æ¢æœºitcast.fanout<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717165509466.png?raw=true" width="500" height="200"></li>
</ul>
<ol>
<li>å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº<br>Springæä¾›äº†ä¸€ä¸ªæ¥å£Exchangeï¼Œæ¥è¡¨ç¤ºæ‰€æœ‰ä¸åŒç±»å‹çš„äº¤æ¢æœºï¼š<img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717165552676.png?raw=true"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨consumerä¸­åˆ›å»ºä¸€ä¸ªç±»ï¼Œå£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å£°æ˜äº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Fanoutç±»å‹äº¤æ¢æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> FanoutExchange <span class="title function_">fanoutExchange</span><span class="params">()</span>&#123;    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FanoutExchange</span>(<span class="string">&quot;itcast.fanout&quot;</span>);    &#125;</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—1ï¼Œç»‘å®šäº¤æ¢æœº</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">fanoutQueue1</span><span class="params">()</span>&#123;    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">&quot;fanout.queue1&quot;</span>);    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingQueue1</span><span class="params">(Queue fanoutQueue1, FanoutExchange fanoutExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutQueue1).to(fanoutExchange);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—2ï¼Œç»‘å®šäº¤æ¢æœº</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">fanoutQueue2</span><span class="params">()</span>&#123;    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">&quot;fanout.queue2&quot;</span>);    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingQueue2</span><span class="params">(Queue fanoutQueue2, FanoutExchange fanoutExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutQueue2).to(fanoutExchange);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ¶ˆæ¯å‘é€<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨publisheræœåŠ¡çš„SpringAmqpTestç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFanoutExchange</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">exchangeName</span> <span class="operator">=</span> <span class="string">&quot;itcast.fanout&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello, everyone!&quot;</span>;</span><br><span class="line">    <span class="comment">// å‘é€åˆ°äº¤æ¢æœº</span></span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">&quot;&quot;</span>, message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ¶ˆæ¯æ¥æ”¶<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨consumeræœåŠ¡çš„SpringRabbitListenerä¸­æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œä½œä¸ºæ¶ˆè´¹è€…</span></span><br><span class="line"><span class="meta">@RabbitListener(queues = &quot;fanout.queue1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenFanoutQueue1</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…1æ¥æ”¶åˆ°Fanoutæ¶ˆæ¯ï¼šã€&quot;</span> + msg + <span class="string">&quot;ã€‘&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RabbitListener(queues = &quot;fanout.queue2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenFanoutQueue2</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…2æ¥æ”¶åˆ°Fanoutæ¶ˆæ¯ï¼šã€&quot;</span> + msg + <span class="string">&quot;ã€‘&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="5-Direct"><a href="#5-Direct" class="headerlink" title="5. Direct"></a>5. Direct</h4><p>åœ¨Fanoutæ¨¡å¼ä¸­ï¼Œä¸€æ¡æ¶ˆæ¯ï¼Œä¼šè¢«æ‰€æœ‰è®¢é˜…çš„é˜Ÿåˆ—éƒ½æ¶ˆè´¹ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸åŒçš„æ¶ˆæ¯è¢«ä¸åŒçš„é˜Ÿåˆ—æ¶ˆè´¹ã€‚è¿™æ—¶å°±è¦ç”¨åˆ°Directç±»å‹çš„Exchangeã€‚<br>åœ¨Directæ¨¡å‹ä¸‹ï¼š</p>
<ul>
<li>é˜Ÿåˆ—ä¸äº¤æ¢æœºçš„ç»‘å®šï¼Œä¸èƒ½æ˜¯ä»»æ„ç»‘å®šäº†ï¼Œè€Œæ˜¯è¦æŒ‡å®šä¸€ä¸ª<code>BindingKey</code>ï¼ˆè·¯ç”±keyï¼‰</li>
<li>æ¶ˆæ¯çš„å‘é€æ–¹åœ¨ å‘ Exchangeå‘é€æ¶ˆæ¯æ—¶ï¼Œå¿…é¡»æŒ‡å®šæ¶ˆæ¯çš„ <code>RoutingKey</code>ã€‚</li>
<li>Exchangeä¸å†æŠŠæ¶ˆæ¯äº¤ç»™æ¯ä¸€ä¸ªç»‘å®šçš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯æ ¹æ®æ¶ˆæ¯çš„<code>RoutingKey</code>è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰é˜Ÿåˆ—çš„<code>Bindingkey</code>ä¸æ¶ˆæ¯çš„ <code>Routingkey</code>å®Œå…¨ä¸€è‡´ï¼Œæ‰ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯</li>
<li>ä¸€ä¸ªé˜Ÿåˆ—å¯ä»¥æœ‰å¤šä¸ªBindingKeyã€‚å¦‚æœå¤šä¸ªé˜Ÿåˆ—å…·æœ‰ç›¸åŒçš„RoutingKeyï¼Œåˆ™ä¸FanoutåŠŸèƒ½ç±»ä¼¼(å¯ä»¥æ¨¡æ‹Ÿå¹¿æ’­)<br><img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717170223317.png?raw=true"></li>
</ul>
<ol>
<li>åŸºäºæ³¨è§£å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº<br>åŸºäº@Beançš„æ–¹å¼å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºæ¯”è¾ƒéº»çƒ¦ï¼ŒSpringè¿˜æä¾›äº†åŸºäºæ³¨è§£æ–¹å¼æ¥å£°æ˜ã€‚<br>åœ¨consumerçš„SpringRabbitListenerä¸­æ·»åŠ ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼ŒåŒæ—¶åŸºäºæ³¨è§£ <code>@RabbitListener</code> æ¥å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¶ˆè´¹è€…1+é˜Ÿåˆ—+äº¤æ¢æœº+BindingKey</span></span><br><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = &quot;direct.queue1&quot;),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = &quot;itcast.direct&quot;, type = ExchangeTypes.DIRECT),</span></span><br><span class="line"><span class="meta">    key = &#123;&quot;red&quot;, &quot;blue&quot;&#125;</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenDirectQueue1</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°direct.queue1çš„æ¶ˆæ¯ï¼šã€&quot;</span> + msg + <span class="string">&quot;ã€‘&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¶ˆè´¹è€…2+é˜Ÿåˆ—+äº¤æ¢æœº+BindingKey</span></span><br><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = &quot;direct.queue2&quot;),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = &quot;itcast.direct&quot;, type = ExchangeTypes.DIRECT),</span></span><br><span class="line"><span class="meta">    key = &#123;&quot;red&quot;, &quot;yellow&quot;&#125;</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenDirectQueue2</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°direct.queue2çš„æ¶ˆæ¯ï¼šã€&quot;</span> + msg + <span class="string">&quot;ã€‘&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ¶ˆæ¯å‘é€<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendDirectExchange</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">exchangeName</span> <span class="operator">=</span> <span class="string">&quot;itcast.direct&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;çº¢è‰²è­¦æŠ¥ï¼æ—¥æœ¬ä¹±æ’æ ¸åºŸæ°´ï¼Œå¯¼è‡´æµ·æ´‹ç”Ÿç‰©å˜å¼‚ï¼ŒæƒŠç°å“¥æ–¯æ‹‰ï¼&quot;</span>;</span><br><span class="line">    <span class="comment">// å‘é€æ¶ˆæ¯ï¼Œæºå¸¦ RoutingKey</span></span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">&quot;red&quot;</span>, message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="6-Topic"><a href="#6-Topic" class="headerlink" title="6.Topic"></a>6.Topic</h4><p><code>Topic</code>ç±»å‹çš„<code>Exchange</code>ä¸<code>Direct</code>ç›¸æ¯”ï¼Œéƒ½æ˜¯å¯ä»¥æ ¹æ®<code>RoutingKey</code>æŠŠæ¶ˆæ¯è·¯ç”±åˆ°ä¸åŒçš„é˜Ÿåˆ—ã€‚åªä¸è¿‡<code>Topic</code>ç±»å‹<code>Exchange</code>å¯ä»¥è®©é˜Ÿåˆ—åœ¨ç»‘å®š<code>Routing key</code> çš„æ—¶å€™ä½¿ç”¨é€šé…ç¬¦ï¼<br><code>Routingkey</code> ä¸€èˆ¬éƒ½æ˜¯æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ç»„æˆï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥â€.â€åˆ†å‰²ï¼Œä¾‹å¦‚ï¼š <code>item.insert</code><br>é€šé…ç¬¦è§„åˆ™ï¼š<code>#</code>ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯ï¼›<code>*</code>ï¼šåŒ¹é…ä¸å¤šä¸å°‘æ°å¥½1ä¸ªè¯<br>ä¸¾ä¾‹ï¼š<code>item.#</code>ï¼šèƒ½å¤ŸåŒ¹é…<code>item.spu.insert</code> æˆ–è€… <code>item.spu</code>ï¼›<code>item.*</code>ï¼šåªèƒ½åŒ¹é…<code>item.spu</code>  â€‹<br><img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20210717170705380.png?raw=true"><br>è§£é‡Šï¼š</p>
<ul>
<li>Queue1ï¼šç»‘å®šçš„æ˜¯<code>china.#</code> ï¼Œå› æ­¤å‡¡æ˜¯ä»¥ <code>china.</code>å¼€å¤´çš„<code>routing key</code> éƒ½ä¼šè¢«åŒ¹é…åˆ°ã€‚åŒ…æ‹¬china.newså’Œchina.weather</li>
<li>Queue2ï¼šç»‘å®šçš„æ˜¯<code>#.news</code> ï¼Œå› æ­¤å‡¡æ˜¯ä»¥ <code>.news</code>ç»“å°¾çš„ <code>routing key</code> éƒ½ä¼šè¢«åŒ¹é…ã€‚åŒ…æ‹¬china.newså’Œjapan.news</li>
</ul>
<ol>
<li>æ¶ˆæ¯å‘é€<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitTemplate.convertAndSend(exchangeName, <span class="string">&quot;china.news&quot;</span>, message);</span><br></pre></td></tr></table></figure></li>
<li>æ¶ˆæ¯æ¥æ”¶<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = &quot;topic.queue1&quot;),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = &quot;itcast.topic&quot;, type = ExchangeTypes.TOPIC),</span></span><br><span class="line"><span class="meta">    key = &quot;china.#&quot;</span></span><br><span class="line"><span class="meta">))</span></span><br></pre></td></tr></table></figure></li>
<li>æ€»ç»“<br> æè¿°ä¸‹Directäº¤æ¢æœºä¸Topicäº¤æ¢æœºçš„å·®å¼‚ï¼Ÿ<ul>
<li>Topicäº¤æ¢æœºæ¥æ”¶çš„æ¶ˆæ¯RoutingKeyå¿…é¡»æ˜¯å¤šä¸ªå•è¯ï¼Œä»¥ <code>.</code> åˆ†å‰²</li>
<li>Topicäº¤æ¢æœºä¸é˜Ÿåˆ—ç»‘å®šæ—¶çš„bindingKeyå¯ä»¥æŒ‡å®šé€šé…ç¬¦</li>
<li><code>#</code>ï¼šä»£è¡¨0ä¸ªæˆ–å¤šä¸ªè¯</li>
<li><code>*</code>ï¼šä»£è¡¨1ä¸ªè¯</li>
</ul>
</li>
</ol>
<h4 id="7-æ¶ˆæ¯è½¬æ¢å™¨"><a href="#7-æ¶ˆæ¯è½¬æ¢å™¨" class="headerlink" title="7.æ¶ˆæ¯è½¬æ¢å™¨"></a>7.æ¶ˆæ¯è½¬æ¢å™¨</h4><p>ä¹‹å‰è¯´è¿‡ï¼ŒSpringä¼šæŠŠä½ å‘é€çš„æ¶ˆæ¯åºåˆ—åŒ–ä¸ºå­—èŠ‚å‘é€ç»™MQï¼Œæ¥æ”¶æ¶ˆæ¯çš„æ—¶å€™ï¼Œè¿˜ä¼šæŠŠå­—èŠ‚ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚</p>
<p><img src="https://github.com/leo710aka/bk/blob/main/rabbitmq/assets/image-20200525170410401.png?raw=true" alt="image-20200525170410401"></p>
<p>åªä¸è¿‡ï¼Œé»˜è®¤æƒ…å†µä¸‹Springé‡‡ç”¨çš„åºåˆ—åŒ–æ–¹å¼æ˜¯JDKåºåˆ—åŒ–ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒJDKåºåˆ—åŒ–å­˜åœ¨ä¸‹åˆ—é—®é¢˜ï¼š</p>
<ul>
<li>æ•°æ®ä½“ç§¯è¿‡å¤§</li>
<li>æœ‰å®‰å…¨æ¼æ´</li>
<li>å¯è¯»æ€§å·®</li>
</ul>
<p>æ˜¾ç„¶ï¼ŒJDKåºåˆ—åŒ–æ–¹å¼å¹¶ä¸åˆé€‚ã€‚æˆ‘ä»¬å¸Œæœ›æ¶ˆæ¯ä½“çš„ä½“ç§¯æ›´å°ã€å¯è¯»æ€§æ›´é«˜ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨JSONæ–¹å¼æ¥åšåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>
<p>åœ¨publisherå’Œconsumerä¸¤ä¸ªæœåŠ¡ä¸­éƒ½å¼•å…¥ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®æ¶ˆæ¯è½¬æ¢å™¨ã€‚åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ ä¸€ä¸ªBeanå³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MessageConverter <span class="title function_">jsonMessageConverter</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonMessageConverter</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/01/11/RabbitMQ/" data-id="cmjzvj9mb000hhgv50y7j8agb" data-title="RabbitMQ" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-SpringCloud" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/01/07/SpringCloud/" class="article-date">
  <time class="dt-published" datetime="2024-01-07T02:58:11.000Z" itemprop="datePublished">2024-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/01/07/SpringCloud/">SpringCloud</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>å•ä½“æ¶æ„</strong>ï¼šå°†ä¸šåŠ¡çš„æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¼€å‘ï¼Œæ‰“æˆä¸€ä¸ªåŒ…éƒ¨ç½²ã€‚ä¼˜ç‚¹ï¼šæ¶æ„ç®€å•ã€éƒ¨ç½²æˆæœ¬ä½ã€‚ç¼ºç‚¹ï¼šè€¦åˆåº¦é«˜ï¼Œæ‰©å±•æ€§å·®ï¼Œé€‚åˆå°å‹é¡¹ç›®ã€‚ä¾‹å¦‚:å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ<br><strong>åˆ†å¸ƒå¼æ¶æ„</strong>ï¼šæ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸ªä¸šåŠ¡æ¨¡å—ä½œä¸ºç‹¬ç«‹é¡¹ç›®å¼€å‘ï¼Œç§°ä¸ºä¸€ä¸ªæœåŠ¡ã€‚æ¾è€¦åˆï¼Œæ‰©å±•æ€§å¥½ï¼Œä½†æ¶æ„å¤æ‚ï¼Œéš¾åº¦å¤§ã€‚é€‚åˆå¤§å‹äº’è”ç½‘é¡¹ç›®ï¼Œä¾‹å¦‚:äº¬ä¸œã€æ·˜å®<br>åˆ†å¸ƒå¼æ¶æ„çš„è¦è€ƒè™‘çš„é—®é¢˜æœ‰ï¼šæœåŠ¡æ‹†åˆ†ç²’åº¦å¦‚ä½•ï¼ŸæœåŠ¡é›†ç¾¤åœ°å€å¦‚ä½•ç»´æŠ¤ï¼ŸæœåŠ¡ä¹‹é—´å¦‚ä½•å®ç°è¿œç¨‹è°ƒç”¨ï¼ŸæœåŠ¡å¥åº·çŠ¶æ€å¦‚ä½•æ„ŸçŸ¥ï¼Ÿ<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/3.png?raw=true?raw=true" width="500" height="200"> </p>
<h2 id="å¾®æœåŠ¡ï¼šä¸€ç§è‰¯å¥½çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆã€‚"><a href="#å¾®æœåŠ¡ï¼šä¸€ç§è‰¯å¥½çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆã€‚" class="headerlink" title="å¾®æœåŠ¡ï¼šä¸€ç§è‰¯å¥½çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆã€‚"></a>å¾®æœåŠ¡ï¼šä¸€ç§è‰¯å¥½çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆã€‚</h2><ul>
<li>ä¼˜ç‚¹ï¼šæ‹†åˆ†ç²’åº¦æ›´å°ã€æœåŠ¡æ›´ç‹¬ç«‹ã€è€¦åˆåº¦æ›´ä½ã€‚ç¼ºç‚¹ï¼šæ¶æ„éå¸¸å¤æ‚ï¼Œè¿ç»´ã€ç›‘æ§ã€éƒ¨ç½²éš¾åº¦æé«˜</li>
<li>å¾®æœåŠ¡ç‰¹ç‚¹ï¼š<ul>
<li>å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡æ‹†åˆ†ç²’åº¦æ›´å°ï¼Œæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£ï¼Œé¿å…é‡å¤ä¸šåŠ¡å¼€å‘ï¼›æ¯ä¸ªæœåŠ¡å•å…ƒéƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†ã€‚è¿™äº›æœåŠ¡å•å…ƒç›¸äº’åä½œï¼Œé€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œé€šå¸¸ä½¿ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶ï¼ˆå¦‚HTTPæˆ–æ¶ˆæ¯é˜Ÿåˆ—ï¼‰è¿›è¡Œäº¤äº’ã€‚ä½¿å¾—åº”ç”¨ç¨‹åºæ›´å…·å¼¹æ€§ã€å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼ŒåŒæ—¶ä¹Ÿæœ‰åˆ©äºå›¢é˜Ÿä¹‹é—´çš„ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²ã€‚</li>
<li>é¢å‘æœåŠ¡ï¼šå¾®æœåŠ¡å¯¹å¤–æš´éœ²ä¸šåŠ¡æ¥å£ï¼Œä¾›å…¶ä»–å¾®æœåŠ¡ä½¿ç”¨ã€‚</li>
<li>è‡ªæ²»ï¼šå›¢é˜Ÿç‹¬ç«‹ã€æŠ€æœ¯ç‹¬ç«‹ã€æ•°æ®ç‹¬ç«‹ã€éƒ¨ç½²ç‹¬ç«‹ï¼Œä¸åŒå¾®æœåŠ¡éƒ½åº”è¯¥æœ‰è‡ªå·±çš„æ•°æ®åº“ã€‚</li>
<li>éš”ç¦»æ€§å¼ºï¼šæœåŠ¡è°ƒç”¨åšå¥½éš”ç¦»ã€å®¹é”™ã€é™çº§ï¼Œé¿å…å‡ºç°çº§è”é—®é¢˜ã€‚<img src="https://github.com/leo710aka/bk/blob/main/springcloud/1.png?raw=true?raw=true" width="700" height="200"> 
å†åŠ ä¸ŠæœåŠ¡å¼‚å¸¸å®šä½ã€èŠ‚ç‚¹çŠ¶æ€ç›‘æ§ã€è‡ªåŠ¨åŒ–éƒ¨ç½²
<img src="https://github.com/leo710aka/bk/blob/main/springcloud/2.png?raw=true?raw=true" width="700" height="200"></li>
</ul>
</li>
</ul>
<p>å¾®æœåŠ¡è¿™ç§æ–¹æ¡ˆéœ€è¦æŠ€æœ¯æ¡†æ¶æ¥è½åœ°ï¼Œå…¨çƒçš„äº’è”ç½‘å…¬å¸éƒ½åœ¨ç§¯æå°è¯•è‡ªå·±çš„å¾®æœåŠ¡è½åœ°æŠ€æœ¯ã€‚åœ¨å›½å†…æœ€çŸ¥åçš„å°±æ˜¯SpringCloudå’Œé˜¿é‡Œå·´å·´çš„Dubboï¼ˆå‡çº§SpringCloudAlibabaï¼ˆå®ç°äº†SpringCloudæ¥å£ï¼Œæ˜¯SpringCloudçš„ä¸€éƒ¨åˆ†ï¼‰ï¼‰å¾®æœåŠ¡æŠ€æœ¯å¯¹æ¯”ï¼š<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/4.png?raw=true?raw=true" width="700" height="200"><br>ä¼ä¸šä¸­å¸¸è§çš„å››ç§éœ€æ±‚ï¼š<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/5.png?raw=true?raw=true" width="700" height="200"> </p>
<hr>

<h2 id="Spring-Cloud"><a href="#Spring-Cloud" class="headerlink" title="Spring Cloud"></a>Spring Cloud</h2><p>SpringCloud æ˜¯ä¸€ä¸ªåŸºäº Spring Boot çš„å¼€æºæ¡†æ¶ï¼Œæ—¨åœ¨ç®€åŒ–æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¾®æœåŠ¡æ¶æ„ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—å·¥å…·å’Œåº“ï¼Œç”¨äºå®ç°å¾®æœåŠ¡æ¶æ„ä¸­å¸¸è§çš„æ¨¡å¼å’ŒåŠŸèƒ½ï¼Œå¦‚æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€é…ç½®ç®¡ç†ã€æ–­è·¯å™¨æ¨¡å¼ã€æ¶ˆæ¯æ€»çº¿ç­‰ã€‚<br>SpringCloud é›†æˆäº†å„ç§å¾®æœåŠ¡åŠŸèƒ½ç»„ä»¶ï¼Œå¹¶åŸºäºSpringBootå®ç°äº†è¿™äº›ç»„ä»¶çš„è‡ªåŠ¨è£…é…ï¼Œä»è€Œæä¾›äº†è‰¯å¥½çš„å¼€ç®±å³ç”¨ä½“éªŒ:<img src="https://github.com/leo710aka/bk/blob/main/springcloud/6.png?raw=true" width="600" height="200"><br>å¯¹äº SpringBoot çš„ç‰ˆæœ¬è¦æ±‚ <img src="https://github.com/leo710aka/bk/blob/main/springcloud/8.png?raw=true" width="600" height="200">  </p>
<ul>
<li>æœåŠ¡æ‹†åˆ†<ul>
<li>å¾®æœåŠ¡éœ€è¦æ ¹æ®ä¸šåŠ¡æ¨¡å—æ‹†åˆ†ï¼Œåšåˆ°å•ä¸€èŒè´£ï¼Œé¿å…é‡å¤ä¸šåŠ¡å¼€å‘ï¼›</li>
<li>å¾®æœåŠ¡å¯ä»¥å°†ä¸šåŠ¡æš´éœ²ä¸ºæ¥å£ï¼Œä¾›å…¶ä»–å¾®æœåŠ¡ä½¿ç”¨ã€‚</li>
<li>ä¸åŒå¾®æœåŠ¡éƒ½åº”è¯¥æœ‰è‡ªå·±çš„æ•°æ®åº“ã€‚</li>
</ul>
</li>
<li>é¡¹ç›®ç»“æ„<ul>
<li>ä¸¤ç§å·¥ç¨‹ç»“æ„<ul>
<li>ç‹¬ç«‹ Projectï¼šï¼Ÿï¼Ÿ</li>
<li>Maven èšåˆï¼šæ¯ä¸ªå¾®æœåŠ¡ä½œä¸º ä¸»Project ä¸­çš„ä¸€ä¸ªæ¨¡å— Moduleï¼Œåˆ†åˆ«ç‹¬ç«‹æ‰“åŒ…éƒ¨ç½²è¿è¡Œï¼Œåªä¸è¿‡ä»£ç æ”¾åœ¨ä¸€ä¸ª Project</li>
</ul>
</li>
<li>cloud-demoï¼šçˆ¶å·¥ç¨‹ï¼Œç®¡ç†ä¾èµ–<ul>
<li>order-serviceï¼šè®¢å•å¾®æœåŠ¡ï¼Œè´Ÿè´£è®¢å•ç›¸å…³ä¸šåŠ¡</li>
<li>user-serviceï¼šç”¨æˆ·å¾®æœåŠ¡ï¼Œè´Ÿè´£ç”¨æˆ·ç›¸å…³ä¸šåŠ¡</li>
<li>åœ¨æ¯ä¸ªæ¨¡å—çš„ application.yaml é…ç½®è¯¥å¾®æœåŠ¡åå­—ã€ç«¯å£å·ã€æ•°æ®åº“ã€æ—¥å¿—ä½ç½®ã€ã€</li>
<li>è¦æ±‚ï¼šè®¢å•å¾®æœåŠ¡å’Œç”¨æˆ·å¾®æœåŠ¡éƒ½å¿…é¡»æœ‰å„è‡ªçš„æ•°æ®åº“ï¼Œç›¸äº’ç‹¬ç«‹ï¼›è®¢å•æœåŠ¡å’Œç”¨æˆ·æœåŠ¡éƒ½å¯¹å¤–æš´éœ²Restfulçš„æ¥å£ï¼›è®¢å•æœåŠ¡å¦‚æœéœ€è¦æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œåªèƒ½è°ƒç”¨ç”¨æˆ·æœåŠ¡çš„Restfulæ¥å£ï¼Œä¸èƒ½æŸ¥è¯¢ç”¨æˆ·æ•°æ®åº“  <img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210713211009593.png?raw=true" width="200" height="200"></li>
</ul>
</li>
</ul>
</li>
<li>è¿œç¨‹è°ƒç”¨<ul>
<li>ç‰©ç†ä¸Šä¸¤ä¸ªå¾®æœåŠ¡éš”ç¦»ï¼Œæ— æ³•æŸ¥è¯¢å„è‡ªæ•°æ®åº“ï¼Œä½†ç½‘ç»œä¸Šå¾®æœåŠ¡ç›¸é€š</li>
<li>åœ¨ä¸€ä¸ªå¾®æœåŠ¡ä¸­ï¼Œé€šè¿‡javaä»£ç å‘é€ http è¯·æ±‚ï¼Œä½¿ç”¨å¦ä¸€ä¸ªå¾®æœåŠ¡çš„æ¥å£ä»¥è·å–å…¶æ•°æ®åº“ä¸­çš„æ•°æ®</li>
<li>åœ¨ä¸€ä¸ªå¾®æœåŠ¡çš„å¯åŠ¨ç±»ï¼ˆæœ¬èº«ä¹Ÿæ˜¯é…ç½®ç±»ï¼‰ä¸­æ³¨å†Œ RestTemplateï¼Œé…ç½®æˆ Beanï¼›</li>
<li>åœ¨ service ä¸­æ³¨å…¥ restTemplateï¼ˆå»ºè®®ä½¿ç”¨æ„é€ å‡½æ•°ï¼‰ï¼Œé€šè¿‡ getForObject(â€œurlâ€) å‘é€httpè¯·æ±‚ï¼Œå°†è¿”å›çš„ json æ•°æ®è½¬æ¢ä¸ºåˆ¶å®šå¯¹è±¡ç±»å‹</li>
</ul>
</li>
</ul>
<h3 id="Eureka-æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆç™½é›ªï¼‰"><a href="#Eureka-æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆç™½é›ªï¼‰" class="headerlink" title="Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆç™½é›ªï¼‰"></a>Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆç™½é›ªï¼‰</h3><ul>
<li>åœ¨ Eureka æ¶æ„ä¸­ï¼Œå¾®æœåŠ¡è§’è‰²æœ‰ä¸¤ç±»:<ul>
<li>EurekaServer:æœåŠ¡ç«¯ï¼Œæ³¨å†Œä¸­å¿ƒã€‚è®°å½•æœåŠ¡ä¿¡æ¯ã€å¿ƒè·³ç›‘æ§</li>
<li>EurekaClient:å®¢æˆ·ç«¯<ul>
<li>Provider:æœåŠ¡æä¾›è€…ï¼Œä¾‹å¦‚æ¡ˆä¾‹ä¸­çš„ user-serviceï¼Œæ³¨å†Œè‡ªå·±çš„ä¿¡æ¯åˆ° EurekaServerï¼Œæ¯éš”30ç§’å‘EurekaServerå‘é€å¿ƒè·³</li>
<li>consumer:æœåŠ¡æ¶ˆè´¹è€…ï¼Œä¾‹å¦‚æ¡ˆä¾‹ä¸­çš„ order-serviceï¼Œæ ¹æ®æœåŠ¡åç§°ä» EurekaServer æ‹‰å–æœåŠ¡åˆ—è¡¨ï¼ŒåŸºäºæœåŠ¡åˆ—è¡¨åšè´Ÿè½½å‡è¡¡ï¼Œé€‰ä¸­ä¸€ä¸ªå¾®æœåŠ¡åå‘èµ·è¿œç¨‹è°ƒç”¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="https://github.com/leo710aka/bk/blob/main/springcloud/7.png?raw=true?raw=true" width="500" height="200">  

<ul>
<li>Eurekaçš„ä½œç”¨<ul>
<li>æ¶ˆè´¹è€…è¯¥å¦‚ä½•è·å–æœåŠ¡æä¾›è€…å…·ä½“ä¿¡æ¯? æœåŠ¡æä¾›è€…å¯åŠ¨æ—¶å‘ eureka æ³¨å†Œè‡ªå·±çš„ä¿¡æ¯ï¼Œeureka ä¿å­˜è¿™äº›ä¿¡æ¯ï¼Œæ¶ˆè´¹è€…æ ¹æ®æœåŠ¡åç§°å‘ eureka æ‹‰å–æä¾›è€…ä¿¡æ¯</li>
<li>å¦‚æœæœ‰å¤šä¸ªæœåŠ¡æä¾›è€…ï¼Œæ¶ˆè´¹è€…è¯¥å¦‚ä½•é€‰æ‹©? æœåŠ¡æ¶ˆè´¹è€…åˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä»æœåŠ¡åˆ—è¡¨ä¸­æŒ‘é€‰ä¸€ä¸ª</li>
<li>æ¶ˆè´¹è€…å¦‚ä½•æ„ŸçŸ¥æœåŠ¡æä¾›è€…å¥åº·çŠ¶æ€? æœåŠ¡æä¾›è€…ä¼šæ¯éš”30ç§’å‘ EurekaServer å‘é€å¿ƒè·³è¯·æ±‚ï¼ŒæŠ¥å‘Šå¥åº·çŠ¶æ€ eureka ä¼šæ›´æ–°è®°å½•æœåŠ¡åˆ—è¡¨ä¿¡æ¯ï¼Œå¿ƒè·³ä¸æ­£å¸¸ä¼šè¢«å‰”é™¤ï¼Œæ¶ˆè´¹è€…å°±å¯ä»¥æ‹‰å–åˆ°æœ€æ–°çš„ä¿¡æ¯</li>
</ul>
</li>
<li>Eureka æœåŠ¡æ­å»ºï¼šEruka è‡ªå·±å°±æ˜¯ä¸€ä¸ªå¾®æœåŠ¡ã€‚æ–°å»ºé¡¹ç›®ï¼Œå¼•å…¥ eureka-server ä¾èµ–ï¼›ç¼–å†™å¯åŠ¨ç±»ï¼Œæ·»åŠ  @EnableEurekaServer æ³¨è§£ï¼›æ·»åŠ  application.ymlï¼Œæ·»åŠ é…ç½®</li>
<li>Eureka æœåŠ¡æ³¨å†Œï¼šæŠŠä¸€ä¸ªå¾®æœåŠ¡æ³¨å†Œåˆ° EurekaServerã€‚<ol>
<li>å¾®æœåŠ¡é¡¹ç›®å¼•å…¥ eureka-client ä¾èµ–ï¼Œ</li>
<li>åœ¨ application.yml ç¼–å†™ä¾èµ–ï¼šnameã€urlâ€¦</li>
</ol>
</li>
<li>Eureka æœåŠ¡å‘ç°ï¼š<br>  æœåŠ¡æ‹‰å–æ˜¯ï¼ˆæœåŠ¡Aï¼‰åŸºäºï¼ˆæœåŠ¡Bï¼‰æœåŠ¡åç§°è·å–ï¼ˆæœåŠ¡Bå¤šä¸ªå®ä¾‹ï¼‰æœåŠ¡åˆ—è¡¨ï¼Œç„¶ååœ¨å¯¹æœåŠ¡åˆ—è¡¨åšè´Ÿè½½å‡è¡¡<ol>
<li>ä¿®æ”¹ orderServiceï¼ˆæœåŠ¡Bï¼‰çš„ä»£ç ï¼Œä¿®æ”¹è®¿é—®çš„ userService çš„urlè·¯å¾„ï¼Œç”¨æœåŠ¡åä»£æ›¿ipã€ç«¯å£ï¼Œæ¶ˆé™¤ç¡¬ç¼–ç :  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span><span class="string">&quot;http://userservice/user/&quot;</span> + order.getUserId();</span><br></pre></td></tr></table></figure></li>
<li>åœ¨ order-service é¡¹ç›®ï¼ˆæœåŠ¡Bï¼‰çš„å¯åŠ¨ç±» OrderApplicationä¸­ çš„ RestTemplate æ·»åŠ è´Ÿè½½å‡è¡¡æ³¨è§£  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@LoadBalanced</span></span><br><span class="line"><span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h2 id="Ribbon-è´Ÿè½½å‡è¡¡ï¼ˆç™½é›ªï¼‰"><a href="#Ribbon-è´Ÿè½½å‡è¡¡ï¼ˆç™½é›ªï¼‰" class="headerlink" title="Ribbon è´Ÿè½½å‡è¡¡ï¼ˆç™½é›ªï¼‰"></a>Ribbon è´Ÿè½½å‡è¡¡ï¼ˆç™½é›ªï¼‰</h2><ul>
<li>è´Ÿè½½å‡è¡¡åŸç†<ul>
<li>åŠ äº† @LoadBalanced æ³¨è§£çš„RestTemplateï¼Œå‘é€çš„è¯·æ±‚å°†ä¼šè¢« Ribbon æ‹¦æˆªï¼ˆSpringCloudRibbonçš„åº•å±‚é‡‡ç”¨äº†ä¸€ä¸ªæ‹¦æˆªå™¨ï¼‰ï¼Œå¯¹åœ°å€åšäº†ä¿®æ”¹ï¼Œå¤„ç†åå‘é€ HTTP è¯·æ±‚<br>  åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š<ul>
<li>æ‹¦æˆªæˆ‘ä»¬çš„RestTemplateè¯·æ±‚<a target="_blank" rel="noopener" href="http://userservice/user/1">http://userservice/user/1</a></li>
<li>RibbonLoadBalancerClientä¼šä»è¯·æ±‚urlä¸­è·å–æœåŠ¡åç§°ï¼Œä¹Ÿå°±æ˜¯user-service</li>
<li>DynamicServerListLoadBalanceræ ¹æ®user-serviceåˆ°eurekaæ‹‰å–æœåŠ¡åˆ—è¡¨</li>
<li>eurekaè¿”å›åˆ—è¡¨ï¼Œlocalhost:8081ã€localhost:8082</li>
<li>IRuleåˆ©ç”¨å†…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªï¼Œä¾‹å¦‚localhost:8081</li>
<li>RibbonLoadBalancerClientä¿®æ”¹è¯·æ±‚åœ°å€ï¼Œç”¨localhost:8081æ›¿ä»£userserviceï¼Œå¾—åˆ°<a target="_blank" rel="noopener" href="http://localhost:8081/user/1%EF%BC%8C">http://localhost:8081/user/1ï¼Œ</a> å‘èµ·çœŸå®è¯·æ±‚  <img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210713224724673.png?raw=true" width="500" height="200"></li>
</ul>
</li>
</ul>
</li>
<li>è´Ÿè½½å‡è¡¡ç­–ç•¥IRule<ul>
<li>IRule æ¥å£ï¼šå†³å®šäº†è´Ÿè½½å‡è¡¡çš„ç­–ç•¥ï¼Œæ¯ä¸€ä¸ªå­æ¥å£éƒ½æ˜¯ä¸€ç§è§„åˆ™ï¼Œè½®è¯¢ã€éšæœºã€ã€ã€ é€šè¿‡å®šä¹‰ IRule å®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡ç­–ç•¥</li>
<li>è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼šè´Ÿè½½å‡è¡¡çš„è§„åˆ™éƒ½å®šä¹‰åœ¨IRuleæ¥å£ä¸­ï¼Œè€ŒIRuleæœ‰å¾ˆå¤šä¸åŒçš„å®ç°ç±»ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210713225653000.png?raw=true" width="500" height="200"><table>
<thead>
<tr>
<th><strong>å†…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ç±»</strong></th>
<th><strong>è§„åˆ™æè¿°</strong></th>
</tr>
</thead>
<tbody><tr>
<td>RoundRobinRule</td>
<td>ç®€å•è½®è¯¢æœåŠ¡åˆ—è¡¨æ¥é€‰æ‹©æœåŠ¡å™¨ã€‚å®ƒæ˜¯Ribboné»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™ã€‚</td>
</tr>
<tr>
<td>AvailabilityFilteringRule</td>
<td>å¯¹ä»¥ä¸‹ä¸¤ç§æœåŠ¡å™¨è¿›è¡Œå¿½ç•¥ï¼š   ï¼ˆ1ï¼‰åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°æœåŠ¡å™¨å¦‚æœ3æ¬¡è¿æ¥å¤±è´¥ï¼Œè¿™å°æœåŠ¡å™¨å°±ä¼šè¢«è®¾ç½®ä¸ºâ€œçŸ­è·¯â€çŠ¶æ€ã€‚çŸ­è·¯çŠ¶æ€å°†æŒç»­30ç§’ï¼Œå¦‚æœå†æ¬¡è¿æ¥å¤±è´¥ï¼ŒçŸ­è·¯çš„æŒç»­æ—¶é—´å°±ä¼šå‡ ä½•çº§åœ°å¢åŠ ã€‚  ï¼ˆ2ï¼‰å¹¶å‘æ•°è¿‡é«˜çš„æœåŠ¡å™¨ã€‚å¦‚æœä¸€ä¸ªæœåŠ¡å™¨çš„å¹¶å‘è¿æ¥æ•°è¿‡é«˜ï¼Œé…ç½®äº†AvailabilityFilteringRuleè§„åˆ™çš„å®¢æˆ·ç«¯ä¹Ÿä¼šå°†å…¶å¿½ç•¥ã€‚å¹¶å‘è¿æ¥æ•°çš„ä¸Šé™ï¼Œå¯ä»¥ç”±å®¢æˆ·ç«¯çš„<clientName>.<clientConfigNameSpace>.ActiveConnectionsLimitå±æ€§è¿›è¡Œé…ç½®ã€‚</td>
</tr>
<tr>
<td>WeightedResponseTimeRule</td>
<td>ä¸ºæ¯ä¸€ä¸ªæœåŠ¡å™¨èµ‹äºˆä¸€ä¸ªæƒé‡å€¼ã€‚æœåŠ¡å™¨å“åº”æ—¶é—´è¶Šé•¿ï¼Œè¿™ä¸ªæœåŠ¡å™¨çš„æƒé‡å°±è¶Šå°ã€‚è¿™ä¸ªè§„åˆ™ä¼šéšæœºé€‰æ‹©æœåŠ¡å™¨ï¼Œè¿™ä¸ªæƒé‡å€¼ä¼šå½±å“æœåŠ¡å™¨çš„é€‰æ‹©ã€‚</td>
</tr>
<tr>
<td><strong>ZoneAvoidanceRule</strong>ã€é»˜è®¤ã€‘</td>
<td>ä»¥åŒºåŸŸå¯ç”¨çš„æœåŠ¡å™¨ä¸ºåŸºç¡€è¿›è¡ŒæœåŠ¡å™¨çš„é€‰æ‹©ã€‚ä½¿ç”¨Zoneå¯¹æœåŠ¡å™¨è¿›è¡Œåˆ†ç±»ï¼Œè¿™ä¸ªZoneå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœºæˆ¿ã€ä¸€ä¸ªæœºæ¶ç­‰ã€‚è€Œåå†å¯¹Zoneå†…çš„å¤šä¸ªæœåŠ¡åš<strong>è½®è¯¢</strong>ã€‚</td>
</tr>
<tr>
<td>BestAvailableRule</td>
<td>å¿½ç•¥é‚£äº›çŸ­è·¯çš„æœåŠ¡å™¨ï¼Œå¹¶é€‰æ‹©å¹¶å‘æ•°è¾ƒä½çš„æœåŠ¡å™¨ã€‚</td>
</tr>
<tr>
<td>RandomRule</td>
<td>éšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„æœåŠ¡å™¨ã€‚</td>
</tr>
<tr>
<td>RetryRule</td>
<td>é‡è¯•æœºåˆ¶çš„é€‰æ‹©é€»è¾‘</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li>è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥<ol>
<li>ä»£ç æ–¹å¼ï¼šåœ¨order-serviceä¸­çš„OrderApplicationç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„IRuleï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> IRule <span class="title function_">randomRule</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RandomRule</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>é…ç½®æ–‡ä»¶æ–¹å¼ï¼šåœ¨order-serviceçš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ æ–°çš„é…ç½®ä¹Ÿå¯ä»¥ä¿®æ”¹è§„åˆ™ï¼š  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userservice:</span> <span class="comment"># ç»™æŸä¸ªå¾®æœåŠ¡é…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œè¿™é‡Œæ˜¯userserviceæœåŠ¡</span></span><br><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span> <span class="comment"># è´Ÿè½½å‡è¡¡è§„åˆ™ </span></span><br></pre></td></tr></table></figure></li>
<li><strong>æ³¨æ„</strong>ï¼Œä¸€èˆ¬ç”¨é»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œä¸åšä¿®æ”¹ã€‚</li>
</ol>
</li>
<li>é¥¥é¥¿åŠ è½½<ul>
<li>Ribboné»˜è®¤æ˜¯é‡‡ç”¨æ‡’åŠ è½½ï¼Œå³ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šå»åˆ›å»ºLoadBalanceClientï¼Œè¯·æ±‚æ—¶é—´ä¼šå¾ˆé•¿ã€‚è€Œé¥¥é¥¿åŠ è½½åˆ™ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶åˆ›å»ºï¼Œé™ä½ç¬¬ä¸€æ¬¡è®¿é—®çš„è€—æ—¶ï¼Œé€šè¿‡ä¸‹é¢é…ç½®å¼€å¯é¥¥é¥¿åŠ è½½ï¼š  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span></span><br><span class="line"><span class="attr">eager-load:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">clients:</span> <span class="string">userservice</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>

<h2 id="Nacosæ³¨å†Œä¸­å¿ƒã€8848ã€‘"><a href="#Nacosæ³¨å†Œä¸­å¿ƒã€8848ã€‘" class="headerlink" title="Nacosæ³¨å†Œä¸­å¿ƒã€8848ã€‘"></a>Nacosæ³¨å†Œä¸­å¿ƒã€8848ã€‘</h2><ul>
<li><strong>Nacos</strong> æ˜¯é˜¿é‡Œå·´å·´çš„äº§å“ï¼Œç°åœ¨æ˜¯ SpringCloud ä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚ç›¸æ¯” Eureka åŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼Œåœ¨å›½å†…å—æ¬¢è¿ç¨‹åº¦è¾ƒé«˜ã€‚</li>
<li><strong>NacosæœåŠ¡æ­å»ºï¼š</strong>ä¸‹è½½å®‰è£…åŒ…ï¼Œè§£å‹ï¼Œåœ¨ D:\nacos-server-1.4.1\bin ç›®å½•ä¸‹cmdè¿è¡ŒæŒ‡ä»¤: <code>startup.cmd -m standalone</code><br>æµè§ˆå™¨æ‰“å¼€ <a target="_blank" rel="noopener" href="http://xxxx:8848/nacos/index.html#/login%EF%BC%8C%E8%BE%93%E5%85%A5%E8%B4%A6%E5%8F%B7/%E5%AF%86%E7%A0%81%EF%BC%9Anacos">http://xxxx:8848/nacos/index.html#/loginï¼Œè¾“å…¥è´¦å·/å¯†ç ï¼šnacos</a></li>
</ul>
<h4 id="1-NacosæœåŠ¡æ³¨å†Œæˆ–å‘ç°"><a href="#1-NacosæœåŠ¡æ³¨å†Œæˆ–å‘ç°" class="headerlink" title="1. NacosæœåŠ¡æ³¨å†Œæˆ–å‘ç°"></a>1. NacosæœåŠ¡æ³¨å†Œæˆ–å‘ç°</h4><p>çˆ¶å·¥ç¨‹æ·»åŠ  spring-cloud-alibaba ä¾èµ–ï¼›å¾®æœåŠ¡é¡¹ç›®å¼•å…¥ nacos.discovery ä¾èµ–ï¼Œyml é…ç½® nacos åœ°å€ spring.cloudnacos.server-addr<br>Nacos æ˜¯ SpringCloudAlibaba çš„ç»„ä»¶ï¼Œè€Œ SpringCloudAlibaba ä¹Ÿéµå¾ª SpringCloud ä¸­å®šä¹‰çš„æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°è§„èŒƒã€‚å› æ­¤ä½¿ç”¨ Nacos å’Œä½¿ç”¨ Eureka å¯¹äºå¾®æœåŠ¡æ¥è¯´ï¼Œå¹¶æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p>
<ol>
<li>å¼•å…¥ä¾èµ–ï¼š<br>åœ¨cloud-demoçˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­çš„<code>&lt;dependencyManagement&gt;</code>ä¸­å¼•å…¥SpringCloudAlibabaçš„ä¾èµ–ï¼›<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
ç„¶ååœ¨å­å¾®æœåŠ¡ user-service å’Œ order-service ä¸­çš„pomæ–‡ä»¶ä¸­å¼•å…¥nacos-discoveryä¾èµ–<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>é…ç½®nacosåœ°å€ï¼šåœ¨å­å¾®æœåŠ¡ user-service å’Œ order-service çš„ application.yml ä¸­æ·»åŠ  nacos åœ°å€ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br></pre></td></tr></table></figure></li>
<li>é‡å¯å¾®æœåŠ¡åï¼Œç™»å½•nacosç®¡ç†é¡µé¢<a target="_blank" rel="noopener" href="http://10.195.138.48:8848/nacos/index.html#/">http://10.195.138.48:8848/nacos/index.html#/</a> ,å¯ä»¥çœ‹åˆ°å¾®æœåŠ¡ä¿¡æ¯ <img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210713231439607.png?raw=true" width="600" height="200">  </li>
<li>æœåŠ¡å‘ç°ï¼šæ¶ˆè´¹è€…éœ€è¦è¿æ¥nacosä»¥æ‹‰å–å’Œè®¢é˜…æœåŠ¡ï¼Œå› æ­¤æœåŠ¡å‘ç°çš„å‰ä¸¤æ­¥ä¸æœåŠ¡æ³¨å†Œæ˜¯ä¸€æ ·ï¼ˆå¼•å…¥nacos-discoveryä¾èµ–å’Œé…ç½®nacosåœ°å€ï¼‰ï¼Œåé¢å†åŠ ä¸ŠæœåŠ¡è°ƒç”¨å³å¯<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> DiscoveryClient discoveryclient;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">handlecartItems</span><span class="params">(List&lt;CartVO&gt; vos)</span> &#123;</span><br><span class="line">  <span class="comment">// 1.æ ¹æ®æœåŠ¡åç§°ï¼Œæ‹‰å–æœåŠ¡çš„å®ä¾‹åˆ—è¡¨</span></span><br><span class="line">  List&lt;ServiceInstance&gt; instances = discoveryclient.getInstances(<span class="string">&quot;item-service&quot;</span>);</span><br><span class="line">  <span class="comment">// 2.è´Ÿè—å‡è¡¡ï¼ŒéšæœºæŒ‘é€‰ä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">  <span class="type">ServiceInstance</span> <span class="variable">instance</span> <span class="operator">=</span> instances.get(RandomUtil.randomInt(instances.size()));</span><br><span class="line">  <span class="comment">// 3.è·å–å®ä¾‹çš„TPå’Œç«¯å£</span></span><br><span class="line">  URI uri= instance.getUri();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-NacosæœåŠ¡åˆ†çº§å­˜å‚¨"><a href="#2-NacosæœåŠ¡åˆ†çº§å­˜å‚¨" class="headerlink" title="2. NacosæœåŠ¡åˆ†çº§å­˜å‚¨"></a>2. <strong>NacosæœåŠ¡åˆ†çº§å­˜å‚¨</strong></h4><p>ä¸€ä¸ª<strong>æœåŠ¡</strong>å¯ä»¥æœ‰å¤šä¸ª<strong>å®ä¾‹</strong>ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„user-serviceï¼Œå¯ä»¥æœ‰ï¼š127.0.0.1:8081ï¼Œ127.0.0.1:8082ï¼Œ127.0.0.1:8083<br>å‡å¦‚è¿™äº›å®ä¾‹åˆ†å¸ƒäºå…¨å›½å„åœ°çš„ä¸åŒæœºæˆ¿ï¼Œä¾‹å¦‚ï¼š127.0.0.1:8081åœ¨ä¸Šæµ·æœºæˆ¿ï¼Œ127.0.0.1:8082åœ¨ä¸Šæµ·æœºæˆ¿ï¼Œ127.0.0.1:8083åœ¨æ­å·æœºæˆ¿ã€‚    Nacoså°±å°†åŒä¸€æœºæˆ¿å†…çš„å®ä¾‹ åˆ’åˆ†ä¸ºä¸€ä¸ª<strong>é›†ç¾¤</strong>ã€‚</p>
<ul>
<li>ä¹Ÿå°±æ˜¯è¯´ï¼Œuser-serviceæ˜¯æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥åŒ…å«å¤šä¸ªé›†ç¾¤ï¼Œå¦‚æ­å·ã€ä¸Šæµ·ï¼Œæ¯ä¸ªé›†ç¾¤ä¸‹å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œå½¢æˆåˆ†çº§æ¨¡å‹ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210713232522531.png?raw=true" width="600" height="200"><br>å¾®æœåŠ¡äº’ç›¸è®¿é—®æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½è®¿é—®åŒé›†ç¾¤å®ä¾‹ï¼Œå› ä¸ºæœ¬åœ°è®¿é—®é€Ÿåº¦æ›´å¿«ã€‚å½“æœ¬é›†ç¾¤å†…ä¸å¯ç”¨æ—¶ï¼Œæ‰è®¿é—®å…¶å®ƒé›†ç¾¤ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210713232658928.png?raw=true" width="600" height="200">  </li>
<li>é…ç½®é›†ç¾¤ï¼šä¿®æ”¹user-serviceçš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤é…ç½®ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">HZ</span> <span class="comment"># é›†ç¾¤åç§°</span></span><br></pre></td></tr></table></figure></li>
<li>åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡ï¼šé»˜è®¤çš„<code>ZoneAvoidanceRule</code>å¹¶ä¸èƒ½å®ç°æ ¹æ®åŒé›†ç¾¤ä¼˜å…ˆæ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚å› æ­¤Nacosä¸­æä¾›äº†ä¸€ä¸ª<code>NacosRule</code>çš„å®ç°ï¼Œå¯ä»¥ä¼˜å…ˆä»åŒé›†ç¾¤ä¸­æŒ‘é€‰å®ä¾‹ã€‚<br>ä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼Œä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userservice:</span></span><br><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.alibaba.cloud.nacos.ribbon.NacosRule</span> <span class="comment"># è´Ÿè½½å‡è¡¡è§„åˆ™ </span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-æƒé‡é…ç½®ï¼š"><a href="#3-æƒé‡é…ç½®ï¼š" class="headerlink" title="3. æƒé‡é…ç½®ï¼š"></a>3. <strong>æƒé‡é…ç½®ï¼š</strong></h4><p>é»˜è®¤æƒ…å†µä¸‹NacosRuleæ˜¯åŒé›†ç¾¤å†…éšæœºæŒ‘é€‰ï¼Œä¸ä¼šè€ƒè™‘æœºå™¨çš„æ€§èƒ½é—®é¢˜ã€‚å› æ­¤ï¼ŒNacosæä¾›äº†æƒé‡é…ç½®æ¥æ§åˆ¶è®¿é—®é¢‘ç‡ï¼Œæƒé‡è¶Šå¤§åˆ™è®¿é—®é¢‘ç‡è¶Šé«˜ã€‚<br>åœ¨nacosæ§åˆ¶å°ï¼Œæ‰¾åˆ°user-serviceçš„å®ä¾‹åˆ—è¡¨ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¿®æ”¹æƒé‡ï¼šï¼ˆ<strong>æ³¨æ„</strong>ï¼šæƒé‡ä¸º0ï¼Œåˆ™è¯¥å®ä¾‹æ°¸è¿œä¸ä¼šè¢«è®¿é—®ï¼‰<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210713235133225.png?raw=true"><br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210713235235219.png?raw=true" width="300" height="200"> </p>
<h4 id="4-ç¯å¢ƒéš”ç¦»ï¼š"><a href="#4-ç¯å¢ƒéš”ç¦»ï¼š" class="headerlink" title="4. ç¯å¢ƒéš”ç¦»ï¼š"></a>4. <strong>ç¯å¢ƒéš”ç¦»</strong>ï¼š</h4><p>Nacosæä¾›äº†namespaceæ¥å®ç°ç¯å¢ƒéš”ç¦»åŠŸèƒ½ï¼ˆæ¯”å¦‚æŠŠä¸€äº›åŠŸèƒ½ç´§å¯†çš„æœåŠ¡éš”ç¦»åœ¨ä¸€èµ·ï¼Œä¸èƒ½è¢«å¦ä¸€äº›æœåŠ¡è®¿é—®ï¼‰</p>
<ul>
<li>nacosä¸­å¯ä»¥æœ‰å¤šä¸ªnamespace</li>
<li>namespaceä¸‹å¯ä»¥æœ‰groupã€serviceç­‰</li>
<li>ä¸åŒnamespaceä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œä¾‹å¦‚ä¸åŒnamespaceçš„æœåŠ¡äº’ç›¸ä¸å¯è§<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210714000101516.png?raw=true" width="400" height="200"></li>
</ul>
<ol>
<li>åˆ›å»ºnamespaceï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰serviceã€dataã€groupéƒ½åœ¨åŒä¸€ä¸ªnamespaceï¼Œåä¸ºpublicï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210714000414781.png?raw=true" width="300" height="200"> 
æˆ‘ä»¬å¯ä»¥ç‚¹å‡»é¡µé¢æ–°å¢æŒ‰é’®ï¼Œæ·»åŠ ä¸€ä¸ªnamespaceï¼›ç„¶åï¼Œå¡«å†™è¡¨å•ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„namespaceï¼š
<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210714000505928.png?raw=true" width="300" height="200"> </li>
<li>ç»™å¾®æœåŠ¡é…ç½®namespaceï¼šåªèƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ¥å®ç°ã€‚ä¾‹å¦‚ï¼Œä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">HZ</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">492a7d5d-237b-46a1-a99a-fa8e98e4b0f9</span> <span class="comment"># å‘½åç©ºé—´ï¼Œå¡«ID</span></span><br></pre></td></tr></table></figure>
é‡å¯order-serviceåï¼Œè®¿é—®æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210714000830703.png?raw=true" width="600" height="200"> 
æ­¤æ—¶è®¿é—®order-serviceï¼Œå› ä¸ºnamespaceä¸åŒï¼Œä¼šå¯¼è‡´æ‰¾ä¸åˆ°userserviceï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ï¼š
<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210714000941256.png?raw=true" width="600" height="200"></li>
</ol>
<h4 id="5-Nacosä¸Eurekaçš„åŒºåˆ«"><a href="#5-Nacosä¸Eurekaçš„åŒºåˆ«" class="headerlink" title="5. Nacosä¸Eurekaçš„åŒºåˆ«"></a>5. Nacosä¸Eurekaçš„åŒºåˆ«</h4><p>Nacoså’ŒEurekaæ•´ä½“ç»“æ„ç±»ä¼¼ï¼ŒæœåŠ¡æ³¨å†Œã€æœåŠ¡æ‹‰å–ã€å¿ƒè·³ç­‰å¾…ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›å·®å¼‚ï¼š<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets/image-20210714001728017.png?raw=true" width="500" height="200"> </p>
<ul>
<li>Nacosä¸eurekaçš„å…±åŒç‚¹<ul>
<li>éƒ½æ”¯æŒæœåŠ¡æ³¨å†Œå’ŒæœåŠ¡æ‹‰å–</li>
<li>éƒ½æ”¯æŒæœåŠ¡æä¾›è€…å¿ƒè·³æ–¹å¼åšå¥åº·æ£€æµ‹</li>
</ul>
</li>
<li>Nacosä¸Eurekaçš„åŒºåˆ«<ul>
<li>Nacosçš„æœåŠ¡å®ä¾‹åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š<ul>
<li>ä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºè¶…è¿‡ä¸€å®šæ—¶é—´ï¼Œä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œé»˜è®¤çš„ç±»å‹ã€‚</li>
<li>éä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºï¼Œä¸ä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œä¹Ÿå¯ä»¥å«æ°¸ä¹…å®ä¾‹ã€‚<br>  é…ç½®ä¸€ä¸ªæœåŠ¡å®ä¾‹ä¸ºæ°¸ä¹…å®ä¾‹ï¼š  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">ephemeral:</span> <span class="literal">false</span> <span class="comment"># è®¾ç½®ä¸ºéä¸´æ—¶å®ä¾‹</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>Nacosæ”¯æŒæœåŠ¡ç«¯ä¸»åŠ¨æ£€æµ‹æä¾›è€…çŠ¶æ€ï¼šä¸´æ—¶å®ä¾‹é‡‡ç”¨å¿ƒè·³æ¨¡å¼ï¼Œéä¸´æ—¶å®ä¾‹é‡‡ç”¨ä¸»åŠ¨æ£€æµ‹æ¨¡å¼</li>
<li>ä¸´æ—¶å®ä¾‹å¿ƒè·³ä¸æ­£å¸¸ä¼šè¢«å‰”é™¤ï¼Œéä¸´æ—¶å®ä¾‹åˆ™ä¸ä¼šè¢«å‰”é™¤</li>
<li>Nacosæ”¯æŒæœåŠ¡åˆ—è¡¨å˜æ›´çš„æ¶ˆæ¯æ¨é€æ¨¡å¼ï¼ŒæœåŠ¡åˆ—è¡¨æ›´æ–°æ›´åŠæ—¶</li>
<li>Nacosé›†ç¾¤é»˜è®¤é‡‡ç”¨APæ–¹å¼ï¼Œå½“é›†ç¾¤ä¸­å­˜åœ¨éä¸´æ—¶å®ä¾‹æ—¶ï¼Œé‡‡ç”¨CPæ¨¡å¼ï¼›Eurekaé‡‡ç”¨APæ–¹å¼</li>
</ul>
</li>
</ul>
<h4 id="6-Nacosé…ç½®ç®¡ç†ï¼š"><a href="#6-Nacosé…ç½®ç®¡ç†ï¼š" class="headerlink" title="6. Nacosé…ç½®ç®¡ç†ï¼š"></a>6. <strong>Nacosé…ç½®ç®¡ç†</strong>ï¼š</h4><p>Nacosé™¤äº†å¯ä»¥åšæ³¨å†Œä¸­å¿ƒï¼ŒåŒæ ·å¯ä»¥åšé…ç½®ç®¡ç†æ¥ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>ç»Ÿä¸€é…ç½®ç®¡ç†</strong><br>å½“å¾®æœåŠ¡éƒ¨ç½²çš„å®ä¾‹è¶Šæ¥è¶Šå¤šï¼Œè¾¾åˆ°æ•°åã€æ•°ç™¾æ—¶ï¼Œé€ä¸ªä¿®æ”¹å¾®æœåŠ¡é…ç½®å°±ä¼šè®©äººæŠ“ç‹‚ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§ç»Ÿä¸€é…ç½®ç®¡ç†æ–¹æ¡ˆï¼Œå¯ä»¥é›†ä¸­ç®¡ç†æ‰€æœ‰å®ä¾‹çš„é…ç½®ã€‚<br>Nacosä¸€æ–¹é¢å¯ä»¥å°†é…ç½®é›†ä¸­ç®¡ç†ï¼Œå¦ä¸€æ–¹å¯ä»¥åœ¨é…ç½®å˜æ›´æ—¶ï¼ŒåŠæ—¶é€šçŸ¥å¾®æœåŠ¡ï¼Œå®ç°é…ç½®çš„çƒ­æ›´æ–°ã€‚(ä¸ç”¨é‡å¯æœåŠ¡å°±èƒ½æ›´æ–°)  <img src="https://github.com/leo710aka/bk/blob/main/springcloud/9.png?raw=true" width="500" height="200"> <ol>
<li>åœ¨nacosä¸­æ·»åŠ é…ç½®æ–‡ä»¶<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714164742924.png?raw=true" width="500" height="200">   <img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714164856664.png?raw=true" width="500" height="200"> <blockquote>
<p>æ³¨æ„ï¼šé¡¹ç›®çš„æ ¸å¿ƒé…ç½®ï¼Œéœ€è¦çƒ­æ›´æ–°çš„é…ç½®æ‰æœ‰æ”¾åˆ°nacosç®¡ç†çš„å¿…è¦ã€‚åŸºæœ¬ä¸ä¼šå˜æ›´çš„ä¸€äº›é…ç½®è¿˜æ˜¯ä¿å­˜åœ¨å¾®æœåŠ¡æœ¬åœ°æ¯”è¾ƒå¥½ã€‚</p>
</blockquote>
</li>
<li>ä»å¾®æœåŠ¡æ‹‰å–é…ç½®ï¼šå¾®æœåŠ¡è¦æ‹‰å–nacosä¸­ç®¡ç†çš„é…ç½®ï¼Œå¹¶ä¸”ä¸æœ¬åœ°çš„application.ymlé…ç½®åˆå¹¶ï¼Œæ‰èƒ½å®Œæˆé¡¹ç›®å¯åŠ¨ã€‚ ä½†å¦‚æœå°šæœªè¯»å–application.ymlï¼Œåˆå¦‚ä½•å¾—çŸ¥nacosåœ°å€å‘¢ï¼Ÿ<br>å› æ­¤springå¼•å…¥äº†ä¸€ç§æ–°çš„é…ç½®æ–‡ä»¶ï¼šbootstrap.yamlæ–‡ä»¶ï¼Œä¼šåœ¨application.ymlä¹‹å‰è¢«è¯»å–ï¼Œæµç¨‹å¦‚ä¸‹ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/L0iFYNF.png?raw=true"><br>é¦–å…ˆï¼Œåœ¨user-serviceæœåŠ¡ä¸­ï¼Œå¼•å…¥nacos-configçš„å®¢æˆ·ç«¯ä¾èµ–<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--nacosé…ç½®ç®¡ç†ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
ç„¶åï¼Œåœ¨user-serviceä¸­æ·»åŠ ä¸€ä¸ªbootstrap.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">userservice</span> <span class="comment"># æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment">#å¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œæ˜¯dev </span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment"># Nacosåœ°å€</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment"># æ–‡ä»¶åç¼€å</span></span><br></pre></td></tr></table></figure>
è¿™é‡Œä¼šæ ¹æ®spring.cloud.nacos.server-addrè·å–nacosåœ°å€ï¼Œå†æ ¹æ®<br><code>$&#123;spring.application.name&#125;-$&#123;spring.profiles.active&#125;.$&#123;spring.cloud.nacos.config.file-extension&#125;</code>ä½œä¸ºæ–‡ä»¶idï¼Œæ¥è¯»å–é…ç½®ã€‚æœ¬ä¾‹ä¸­ï¼Œå°±æ˜¯å»è¯»å–<code>userservice-dev.yaml</code>ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714170845901.png?raw=true" width="500" height="200"><br>è¯»å–nacosé…ç½®ï¼šåœ¨user-serviceä¸­çš„UserControllerä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘ï¼Œè¯»å–pattern.dateformaté…ç½®<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714170337448.png?raw=true" width="500" height="200"></li>
</ol>
</li>
<li><strong>é…ç½®çƒ­æ›´æ–°</strong><br>æˆ‘ä»¬æœ€ç»ˆçš„ç›®çš„ï¼Œæ˜¯ä¿®æ”¹nacosä¸­çš„é…ç½®åï¼Œå¾®æœåŠ¡ä¸­æ— éœ€é‡å¯å³å¯è®©é…ç½®ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯<strong>é…ç½®çƒ­æ›´æ–°</strong>ã€‚å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼š<ol>
<li>æ–¹å¼ä¸€ï¼šåœ¨ @Value æ³¨å…¥çš„å˜é‡æ‰€åœ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ @RefreshScopeï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714171036335.png?raw=true" width="500" height="200"> </li>
<li>æ–¹å¼äºŒï¼šä½¿ç”¨ @ConfigurationProperties æ³¨è§£ä»£æ›¿ @Value æ³¨è§£ã€‚<br>åœ¨ user-service æœåŠ¡ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªç±»ï¼Œè¯»å– patterrn.dateformat å±æ€§ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.user.config;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;pattern&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PatternProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String dateformat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
åœ¨ UserController ä¸­ä½¿ç”¨è¿™ä¸ªç±»ä»£æ›¿ @Valueï¼š<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714171316124.png?raw=true"></li>
</ol>
</li>
<li><strong>é…ç½®å…±äº«</strong><br>å…¶å®å¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œä¼šå»nacosè¯»å–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š<ul>
<li><code>[spring.application.name]-[spring.profiles.active].yaml</code>ï¼Œä¾‹å¦‚ï¼šuserservice-dev.yaml</li>
<li><code>[spring.application.name].yaml</code>ï¼Œä¾‹å¦‚ï¼šuserservice.yaml<br>è€Œ<code>[spring.application.name].yaml</code>ä¸åŒ…å«ç¯å¢ƒï¼Œå› æ­¤å¯ä»¥è¢«å¤šä¸ªç¯å¢ƒå…±äº«ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥æµ‹è¯•é…ç½®å…±äº«ï¼š</li>
</ul>
<ol>
<li>æ·»åŠ ä¸€ä¸ªç¯å¢ƒå…±äº«é…ç½®ï¼šæˆ‘ä»¬åœ¨nacosä¸­æ·»åŠ ä¸€ä¸ªuserservice.yamlæ–‡ä»¶ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714173233650.png?raw=true" width="400" height="200"> </li>
<li>åœ¨user-serviceä¸­è¯»å–å…±äº«é…ç½®<!-- 
åœ¨user-serviceæœåŠ¡ä¸­ï¼Œä¿®æ”¹PatternPropertiesç±»ï¼Œè¯»å–æ–°æ·»åŠ çš„å±æ€§ï¼š
![image-20210714173324231](https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714173324231.png?raw=true)
åœ¨user-serviceæœåŠ¡ä¸­ï¼Œä¿®æ”¹UserControllerï¼Œæ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼š
![image-20210714173721309](https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714173721309.png?raw=true)
 --></li>
<li>è¿è¡Œä¸¤ä¸ªUserApplicationï¼Œä½¿ç”¨ä¸åŒçš„profile<br>ï¼Ÿï¼Ÿ<!-- 
ä¿®æ”¹UserApplication2è¿™ä¸ªå¯åŠ¨é¡¹ï¼Œæ”¹å˜å…¶profileå€¼ï¼š
![image-20210714173538538](https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714173538538.png?raw=true)
![image-20210714173519963](https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714173519963.png?raw=true)
è¿™æ ·ï¼ŒUserApplication(8081)ä½¿ç”¨çš„profileæ˜¯devï¼ŒUserApplication2(8082)ä½¿ç”¨çš„profileæ˜¯testã€‚
å¯åŠ¨UserApplicationå’ŒUserApplication2
è®¿é—®http://localhost:8081/user/propï¼Œç»“æœï¼š
![image-20210714174313344](https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714174313344.png?raw=true)
è®¿é—®http://localhost:8082/user/propï¼Œç»“æœï¼š
![image-20210714174424818](https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714174424818.png?raw=true)
å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸ç®¡æ˜¯devï¼Œè¿˜æ˜¯testç¯å¢ƒï¼Œéƒ½è¯»å–åˆ°äº†envSharedValueè¿™ä¸ªå±æ€§çš„å€¼ã€‚ --></li>
<li>é…ç½®å…±äº«çš„ä¼˜å…ˆçº§<br>å½“nacosã€æœåŠ¡æœ¬åœ°åŒæ—¶å‡ºç°ç›¸åŒå±æ€§æ—¶ï¼Œä¼˜å…ˆçº§æœ‰é«˜ä½ä¹‹åˆ†ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714174623557.png?raw=true" width="500" height="200"></li>
</ol>
</li>
<li><strong>æ­å»ºNacosé›†ç¾¤</strong><br>ä¼ä¸šç”Ÿäº§ä¸­å¼ºè°ƒâ€œé«˜å¯ç”¨â€ï¼ŒNacos ç”Ÿäº§ç¯å¢ƒä¸‹ä¸€å®šè¦éƒ¨ç½²ä¸ºé›†ç¾¤çŠ¶æ€ï¼Œéƒ¨ç½²æ–¹å¼å‚è€ƒè¯¾å‰èµ„æ–™ä¸­çš„æ–‡æ¡£ï¼šnacosé›†ç¾¤æ­å»º.md</li>
</ul>
<hr>

<h2 id="Feign-è¿œç¨‹è°ƒç”¨"><a href="#Feign-è¿œç¨‹è°ƒç”¨" class="headerlink" title="Feign è¿œç¨‹è°ƒç”¨"></a>Feign è¿œç¨‹è°ƒç”¨</h2><p>Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„httpå®¢æˆ·ç«¯ï¼Œå…¶ä½œç”¨å°±æ˜¯å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„å®ç°httpè¯·æ±‚çš„å‘é€ï¼›<br>è§£å†³ä»å‰åˆ©ç”¨ RestTemplate å‘èµ·è¿œç¨‹è°ƒç”¨ä»£ç ä¸­çš„é—®é¢˜ï¼š1ã€ä»£ç å¯è¯»æ€§å·®ï¼Œç¼–ç¨‹ä½“éªŒä¸ç»Ÿä¸€ï¼›2ã€å‚æ•°å¤æ‚URLéš¾ä»¥ç»´æŠ¤<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714174814204.png?raw=true" width="600" height="200"><br><strong>OpenFeign</strong>æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„httpå®¢æˆ·ç«¯ï¼Œæ˜¯SpringCloudåœ¨Eurekaå…¬å¸å¼€æºçš„FeignåŸºç¡€ä¸Šæ”¹é€ è€Œæ¥ã€‚å…¶ä½œç”¨å°±æ˜¯åŸºäºSpringMVCçš„å¸¸è§æ³¨è§£ï¼Œå¸®æˆ‘ä»¬ä¼˜é›…çš„å®ç°httpè¯·æ±‚çš„å‘é€.</p>
<h4 id="1-Feignæ›¿ä»£RestTemplate"><a href="#1-Feignæ›¿ä»£RestTemplate" class="headerlink" title="1. Feignæ›¿ä»£RestTemplate"></a>1. Feignæ›¿ä»£RestTemplate</h4><ol>
<li>å¼•å…¥ä¾èµ–ï¼šåœ¨order-serviceæœåŠ¡çš„pomæ–‡ä»¶ä¸­å¼•å…¥feignçš„ä¾èµ–ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è´Ÿè½½å‡è¡¡ï¼Ÿï¼Ÿ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalance<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>æ·»åŠ æ³¨è§£ï¼šåœ¨order-serviceçš„å¯åŠ¨ç±»æ·»åŠ  <code>@EnableFeignClients</code>æ³¨è§£ å¼€å¯Feignçš„åŠŸèƒ½ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714175102524.png?raw=true" width="500" height="200"> </li>
<li>ç¼–å†™Feignçš„å®¢æˆ·ç«¯ï¼šåœ¨order-serviceä¸­æ–°å»ºä¸€ä¸ªæ¥å£ï¼Œæ·»åŠ  <code>@FeignClient</code>æ³¨è§£ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(&quot;userservice&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserClient</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
è¿™ä¸ªå®¢æˆ·ç«¯ä¸»è¦æ˜¯åŸºäºSpringMVCçš„æ³¨è§£æ¥å£°æ˜è¿œç¨‹è°ƒç”¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šæœåŠ¡åç§°ï¼šuserserviceï¼Œè¯·æ±‚æ–¹å¼ï¼šGETï¼Œè¯·æ±‚è·¯å¾„ï¼š&#x2F;user&#x2F;{id}ï¼Œè¯·æ±‚å‚æ•°ï¼šLong idï¼Œè¿”å›å€¼ç±»å‹ï¼šUserã€‚è¿™æ ·ï¼Œå½“æœåŠ¡è°ƒç”¨è€…éœ€è¦è°ƒç”¨æœåŠ¡æä¾›è€…æ—¶ï¼Œåªéœ€è¦é€šè¿‡Feignå®¢æˆ·ç«¯è°ƒç”¨æ¥å£æ–¹æ³•å³å¯ï¼ŒFeignä¼šæ ¹æ®æ³¨è§£ä¿¡æ¯è‡ªåŠ¨å‘èµ·HTTPè¯·æ±‚å¹¶å¤„ç†å“åº”ï¼Œè€Œæ— éœ€ä½¿ç”¨ RestTemplateã€‚<br><strong>Feignçš„clientæ˜¯å†™åœ¨æœåŠ¡è°ƒç”¨è€…æ¨¡å—ä¸­ï¼Œç”¨äºå®šä¹‰å¦‚ä½•è°ƒç”¨æœåŠ¡æä¾›è€…çš„æ¥å£ï¼Œè€ŒæœåŠ¡æä¾›è€…æ¨¡å—åˆ™è´Ÿè´£æä¾›å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å’Œå¤„ç†è¯·æ±‚ã€‚</strong> </li>
<li>æµ‹è¯•ï¼šä¿®æ”¹order-serviceä¸­çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ï¼Œä½¿ç”¨Feignå®¢æˆ·ç«¯ä»£æ›¿RestTemplateï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714175415087.png?raw=true" width="500" height="200"></li>
</ol>
<h4 id="2-æ—¥å¿—ï¼Ÿï¼Ÿ"><a href="#2-æ—¥å¿—ï¼Ÿï¼Ÿ" class="headerlink" title="2. æ—¥å¿—ï¼Ÿï¼Ÿ"></a>2. æ—¥å¿—ï¼Ÿï¼Ÿ</h4><p>Feignå¯ä»¥æ”¯æŒå¾ˆå¤šçš„è‡ªå®šä¹‰é…ç½®ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>ä½œç”¨</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>feign.Logger.Level</strong></td>
<td>ä¿®æ”¹æ—¥å¿—çº§åˆ«</td>
<td>åŒ…å«å››ç§ä¸åŒçš„çº§åˆ«ï¼šNONEã€BASICã€HEADERSã€FULL</td>
</tr>
<tr>
<td>feign.codec.Decoder</td>
<td>å“åº”ç»“æœçš„è§£æå™¨</td>
<td>httpè¿œç¨‹è°ƒç”¨çš„ç»“æœåšè§£æï¼Œä¾‹å¦‚è§£æjsonå­—ç¬¦ä¸²ä¸ºjavaå¯¹è±¡</td>
</tr>
<tr>
<td>feign.codec.Encoder</td>
<td>è¯·æ±‚å‚æ•°ç¼–ç </td>
<td>å°†è¯·æ±‚å‚æ•°ç¼–ç ï¼Œä¾¿äºé€šè¿‡httpè¯·æ±‚å‘é€</td>
</tr>
<tr>
<td>feign. Contract</td>
<td>æ”¯æŒçš„æ³¨è§£æ ¼å¼</td>
<td>é»˜è®¤æ˜¯SpringMVCçš„æ³¨ï¼Ÿ</td>
</tr>
<tr>
<td>feign. Retryer</td>
<td>å¤±è´¥é‡è¯•æœºåˆ¶</td>
<td>è¯·æ±‚å¤±è´¥çš„é‡è¯•æœºåˆ¶ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰ï¼Œä¸è¿‡ä¼šä½¿ç”¨Ribbonçš„é‡è¯•</td>
</tr>
</tbody></table>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼å°±èƒ½æ»¡è¶³æˆ‘ä»¬ä½¿ç”¨ï¼Œå¦‚æœè¦è‡ªå®šä¹‰æ—¶ï¼Œåªéœ€è¦åˆ›å»ºè‡ªå®šä¹‰çš„@Beanè¦†ç›–é»˜è®¤Beanå³å¯ã€‚<br>è‡ªå®šä¹‰é…ç½®çš„ä¸¤ç§æ–¹æ³•ï¼š</p>
<ol>
<li>é…ç½®æ–‡ä»¶æ–¹å¼ï¼šåŸºäºé…ç½®æ–‡ä»¶ä¿®æ”¹feignçš„æ—¥å¿—çº§åˆ«å¯ä»¥é’ˆå¯¹å•ä¸ªæœåŠ¡ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹æ‰€æœ‰æœåŠ¡ï¼š</li>
<li>Javaä»£ç æ–¹å¼ï¼šä¹Ÿå¯ä»¥åŸºäºJavaä»£ç æ¥ä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼Œå…ˆå£°æ˜ä¸€ä¸ªç±»ï¼Œç„¶åå£°æ˜ä¸€ä¸ªLogger.Levelçš„å¯¹è±¡<br>å¦‚æœè¦<strong>å…¨å±€ç”Ÿæ•ˆ</strong>ï¼Œå°†å…¶æ”¾åˆ°å¯åŠ¨ç±»çš„@EnableFeignClientsè¿™ä¸ªæ³¨è§£ä¸­ï¼›å¦‚æœæ˜¯<strong>å±€éƒ¨ç”Ÿæ•ˆ</strong>ï¼Œåˆ™æŠŠå®ƒæ”¾åˆ°å¯¹åº”çš„@FeignClientè¿™ä¸ªæ³¨è§£ä¸­</li>
</ol>
<h4 id="3-Feignä½¿ç”¨ä¼˜åŒ–"><a href="#3-Feignä½¿ç”¨ä¼˜åŒ–" class="headerlink" title="3. Feignä½¿ç”¨ä¼˜åŒ–"></a>3. Feignä½¿ç”¨ä¼˜åŒ–</h4><p>Feign æ˜¯ä¸€ä¸ªå£°æ˜å¼å®¢æˆ·ç«¯ï¼Œåªæ˜¯æŠŠå£°æ˜å˜æˆ http è¯·æ±‚ï¼Œåº•å±‚è¿˜æ˜¯å‘httpè¯·æ±‚ï¼Œä¾èµ–äºå…¶å®ƒçš„æ¡†æ¶ã€‚<br>å…¶åº•å±‚å®¢æˆ·ç«¯å®ç°åŒ…æ‹¬ URLConnectionï¼šé»˜è®¤å®ç°ï¼Œä¸æ”¯æŒè¿æ¥æ± ï¼›Apache HttpClientï¼šæ”¯æŒè¿æ¥æ± ï¼›OKHttpï¼šæ”¯æŒè¿æ¥æ± ã€‚å› æ­¤æé«˜Feignçš„æ€§èƒ½ä¸»è¦æ‰‹æ®µå°±æ˜¯ä½¿ç”¨<strong>è¿æ¥æ± </strong>ä»£æ›¿é»˜è®¤çš„URLConnectionã€‚ç”¨Apacheçš„HttpClientæ¥æ¼”ç¤ºï¼š</p>
<ul>
<li>å¼•å…¥ä¾èµ–ï¼šåœ¨order-serviceçš„pomæ–‡ä»¶ä¸­å¼•å…¥Apacheçš„HttpClientä¾èµ–ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--httpClientçš„ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>é…ç½®è¿æ¥æ± ï¼šåœ¨order-serviceçš„application.ymlä¸­æ·»åŠ é…ç½®ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="comment"># defaultå…¨å±€çš„é…ç½®</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">BASIC</span> <span class="comment"># æ—¥å¿—çº§åˆ«ï¼ŒBASICå°±æ˜¯åŸºæœ¬çš„è¯·æ±‚å’Œå“åº”ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">httpclient:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯feignå¯¹HttpClientçš„æ”¯æŒ</span></span><br><span class="line">    <span class="attr">max-connections:</span> <span class="number">200</span> <span class="comment"># æœ€å¤§çš„è¿æ¥æ•°</span></span><br><span class="line">    <span class="attr">max-connections-per-route:</span> <span class="number">50</span> <span class="comment"># æ¯ä¸ªè·¯å¾„çš„æœ€å¤§è¿æ¥æ•°</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="4-æœ€ä½³å®è·µ"><a href="#4-æœ€ä½³å®è·µ" class="headerlink" title="4. æœ€ä½³å®è·µ"></a>4. æœ€ä½³å®è·µ</h4><p>æ‰€è°“æœ€è¿‘å®è·µï¼Œå°±æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­æ€»ç»“çš„ç»éªŒï¼Œæœ€å¥½çš„ä¸€ç§ä½¿ç”¨æ–¹å¼ã€‚<br>å¦‚æœä¸€ä¸ªå¾®æœåŠ¡éœ€è¦é‡å¤è¢«å…¶ä»–å¾®æœåŠ¡è°ƒç”¨(æ¶ˆè´¹)ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¶ˆè´¹è€…éƒ½è¦é‡å¤ç¼–å†™ä¸€ä¸ª clientã€‚æœ‰æ²¡æœ‰åŠæ³•ç®€åŒ–è¿™ç§é‡å¤çš„ä»£ç ç¼–å†™å‘¢ï¼Ÿ</p>
<!-- 1. **ç»§æ‰¿æ–¹å¼ï¼š**ä¸€æ ·çš„ä»£ç å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å…±äº«ï¼š
  * å®šä¹‰ä¸€ä¸ªAPIæ¥å£ï¼Œåˆ©ç”¨å®šä¹‰æ–¹æ³•ï¼Œå¹¶åŸºäºSpringMVCæ³¨è§£åšå£°æ˜ã€‚
  * Feignå®¢æˆ·ç«¯å’ŒControlleréƒ½é›†æˆæ”¹æ¥å£
  ![](https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714190640857.png?raw=true)
  ä¼˜ç‚¹ï¼šç®€å•ï¼Œå®ç°äº†ä»£ç å…±äº«
  ç¼ºç‚¹ï¼šæœåŠ¡æä¾›æ–¹ã€æœåŠ¡æ¶ˆè´¹æ–¹ç´§è€¦åˆï¼Œå‚æ•°åˆ—è¡¨ä¸­çš„æ³¨è§£æ˜ å°„å¹¶ä¸ä¼šç»§æ‰¿ï¼Œå› æ­¤Controllerä¸­å¿…é¡»å†æ¬¡å£°æ˜æ–¹æ³•ã€å‚æ•°åˆ—è¡¨ã€æ³¨è§£ -->
<ol>
<li>ä»ä¸€ä¸ªå¾®æœåŠ¡ä¸­æ‹†å‡ºä¸€ä¸ªæ¨¡å—ï¼Œå°†Feignçš„Clientã€æ¥å£æœ‰å…³çš„POJOã€é»˜è®¤çš„Feigné…ç½®éƒ½æ”¾åˆ°è¿™ä¸ªæ¨¡å—ä¸­ï¼Œä¾›ç»™æ‰€æœ‰æ¶ˆè´¹è€…ä½¿ç”¨<br>ä¾‹å¦‚ï¼Œå°†UserClientã€Userã€Feignçš„é»˜è®¤é…ç½®éƒ½æŠ½å–åˆ°ä¸€ä¸ªfeign-apiåŒ…ä¸­ï¼Œæ‰€æœ‰å…¶ä»–å¾®æœåŠ¡éœ€è¦æ¶ˆè´¹è¯¥å¾®æœåŠ¡æ—¶ï¼Œå¼•ç”¨è¯¥åŒ…çš„ä¾èµ–ï¼Œå³å¯ç›´æ¥ä½¿ç”¨ã€‚<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714214041796.png?raw=true"></li>
<li>å°†æ‰€æœ‰çš„å¾®æœåŠ¡ä¸­çš„ dtoã€clientã€config ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œä¾›ç»™æ‰€æœ‰æ¶ˆè´¹è€…ä½¿ç”¨ã€‚<br>junbo-apiä¹Ÿæ˜¯å¦‚æ­¤ï¼Ÿï¼Ÿï¼ï¼</li>
</ol>
<hr>


<h2 id="Gateway-æœåŠ¡ç½‘å…³"><a href="#Gateway-æœåŠ¡ç½‘å…³" class="headerlink" title="Gateway æœåŠ¡ç½‘å…³"></a>Gateway æœåŠ¡ç½‘å…³</h2><p>Spring Cloud Gateway æ˜¯ Spring Cloud çš„ä¸€ä¸ªå…¨æ–°é¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ˜¯åŸºäº Spring 5.0ï¼ŒSpring Boot 2.0 å’Œ Project Reactor ç­‰å“åº”å¼ç¼–ç¨‹å’Œäº‹ä»¶æµæŠ€æœ¯å¼€å‘çš„ç½‘å…³ï¼Œå®ƒæ—¨åœ¨ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç§ç®€å•æœ‰æ•ˆçš„ç»Ÿä¸€çš„ API è·¯ç”±ç®¡ç†æ–¹å¼ã€‚</p>
<h4 id="1-ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³" class="headerlink" title="1. ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³"></a>1. ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³</h4><p>Gatewayç½‘å…³æ˜¯æˆ‘ä»¬æœåŠ¡çš„å®ˆé—¨ç¥ï¼Œæ‰€æœ‰å¾®æœåŠ¡çš„ç»Ÿä¸€å…¥å£ã€‚å‰ç«¯åªéœ€è¦çŸ¥é“ç½‘å…³çš„ç«¯å£ï¼Œå‘é€è¯·æ±‚å°±è¡Œäº†ã€‚<br>æ¶æ„å›¾ï¼š<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714210131152.png?raw=true" width="600" height="200"> </p>
<p>ç½‘å…³çš„<strong>æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šç½‘å…³ä½œä¸ºå¾®æœåŠ¡å…¥å£ï¼Œéœ€è¦æ ¡éªŒç”¨æˆ·æ˜¯æ˜¯å¦æœ‰è¯·æ±‚èµ„æ ¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œæ‹¦æˆªã€‚</li>
<li><strong>è·¯ç”±å’Œè´Ÿè½½å‡è¡¡</strong>ï¼šä¸€åˆ‡è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡gatewayï¼Œä½†ç½‘å…³ä¸å¤„ç†ä¸šåŠ¡ï¼Œè€Œæ˜¯æ ¹æ®æŸç§è§„åˆ™ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°æŸä¸ªå¾®æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè·¯ç”±ã€‚å½“ç„¶è·¯ç”±çš„ç›®æ ‡æœåŠ¡æœ‰å¤šä¸ªæ—¶ï¼Œè¿˜éœ€è¦åšè´Ÿè½½å‡è¡¡ã€‚</li>
<li><strong>é™æµ</strong>ï¼šå½“è¯·æ±‚æµé‡è¿‡é«˜æ—¶ï¼Œåœ¨ç½‘å…³ä¸­æŒ‰ç…§ä¸‹æµçš„å¾®æœåŠ¡èƒ½å¤Ÿæ¥å—çš„é€Ÿåº¦æ¥æ”¾è¡Œè¯·æ±‚ï¼Œé¿å…æœåŠ¡å‹åŠ›è¿‡å¤§ã€‚</li>
</ul>
<p>åœ¨SpringCloudä¸­ç½‘å…³çš„å®ç°åŒ…æ‹¬ä¸¤ç§ï¼šgatewayã€zuul</p>
<ul>
<li>Zuulæ˜¯åŸºäºServletçš„å®ç°ï¼Œå±äºé˜»å¡å¼ç¼–ç¨‹ã€‚</li>
<li>SpringCloudGatewayåˆ™æ˜¯åŸºäºSpring5ä¸­æä¾›çš„WebFluxï¼Œå±äºå“åº”å¼ç¼–ç¨‹çš„å®ç°ï¼Œå…·å¤‡æ›´å¥½çš„æ€§èƒ½ã€‚</li>
</ul>
<h4 id="2-gatewayå¿«é€Ÿå…¥é—¨"><a href="#2-gatewayå¿«é€Ÿå…¥é—¨" class="headerlink" title="2. gatewayå¿«é€Ÿå…¥é—¨"></a>2. gatewayå¿«é€Ÿå…¥é—¨</h4><ol>
<li>åˆ›å»º SpringBoot å·¥ç¨‹ gateway æœåŠ¡ï¼Œå¼•å…¥ç½‘å…³ä¾èµ–<!-- åˆ›å»ºæœåŠ¡ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714210919458.png?raw=true" width="700" height="200"> 
å¼•å…¥ä¾èµ–ï¼š -->
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç½‘å…³--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--nacosæœåŠ¡å‘ç°ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™å¯åŠ¨ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GatewayApplication</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		SpringApplication.run(GatewayApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™ï¼š<br>åˆ›å»ºapplication.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10010</span> <span class="comment"># ç½‘å…³ç«¯å£</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span> <span class="comment"># æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment"># nacosåœ°å€</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span> <span class="comment"># ç½‘å…³è·¯ç”±é…ç½®</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span>      <span class="comment"># 1. è·¯ç”±idï¼Œè‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯</span></span><br><span class="line">          <span class="comment"># uri: http://127.0.. # 2. è·¯ç”±çš„ç›®æ ‡åœ°å€ http å°±æ˜¯å›ºå®šåœ°å€</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://userservice</span> <span class="comment">#    lb(loadbalance) å°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢è·ŸæœåŠ¡åç§°</span></span><br><span class="line">          <span class="attr">predicates:</span>           <span class="comment"># 3. è·¯ç”±æ–­è¨€(å¯å¤šæ¡)ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span>     <span class="comment">#    æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚</span></span><br><span class="line">          <span class="attr">filters:</span>              <span class="comment"># 4. è·¯ç”±è¿‡æ»¤å™¨ï¼Œï¼Œ</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">order-service</span>     <span class="comment"># ...</span></span><br></pre></td></tr></table></figure>
æˆ‘ä»¬å°†ç¬¦åˆ<code>Path</code>è§„åˆ™çš„ä¸€åˆ‡è¯·æ±‚ï¼Œéƒ½ä»£ç†åˆ°<code>uri</code>å‚æ•°æŒ‡å®šçš„åœ°å€ã€‚æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† <code>/user/**</code>å¼€å¤´çš„è¯·æ±‚ï¼Œä»£ç†åˆ°<code>lb://userservice</code>ï¼Œlbæ˜¯è´Ÿè½½å‡è¡¡ï¼Œæ ¹æ®æœåŠ¡åæ‹‰å–æœåŠ¡åˆ—è¡¨ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚<!-- 4. å¯åŠ¨ç½‘å…³æœåŠ¡è¿›è¡Œæµ‹è¯•
é‡å¯ç½‘å…³ï¼Œè®¿é—®http://localhost:10010/user/1æ—¶ï¼Œ ç¬¦åˆ`/user/**`è§„åˆ™ï¼Œè¯·æ±‚è½¬å‘åˆ°uriï¼šhttp://userservice/user/1ï¼Œ å¾—åˆ°äº†ç»“æœï¼š
![](https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714211908341.png?raw=true) --></li>
<li>ç½‘å…³è·¯ç”±çš„æµç¨‹å›¾<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714211742956.png?raw=true"></li>
</ol>
<h4 id="3-æ–­è¨€å·¥å‚"><a href="#3-æ–­è¨€å·¥å‚" class="headerlink" title="3. æ–­è¨€å·¥å‚"></a>3. æ–­è¨€å·¥å‚</h4><p>æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å†™çš„æ–­è¨€è§„åˆ™åªæ˜¯å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²ä¼šè¢«Predicate Factoryè¯»å–å¹¶å¤„ç†ï¼Œè½¬å˜ä¸ºè·¯ç”±åˆ¤æ–­çš„æ¡ä»¶<br>ä¾‹å¦‚Path&#x3D;&#x2F;user&#x2F;**æ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯ç”± <code>org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory</code>ç±»æ¥å¤„ç†çš„ï¼Œåƒè¿™æ ·çš„æ–­è¨€å·¥å‚åœ¨SpringCloudGatewayè¿˜æœ‰åå‡ ä¸ª:</p>
<table>
<thead>
<tr>
<th><strong>åç§°</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>ç¤ºä¾‹</strong></th>
</tr>
</thead>
<tbody><tr>
<td>After</td>
<td>æ˜¯æŸä¸ªæ—¶é—´ç‚¹åçš„è¯·æ±‚</td>
<td>-  After&#x3D;2037-01-20T17:42:47.789-07:00[America&#x2F;Denver]</td>
</tr>
<tr>
<td>Before</td>
<td>æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚</td>
<td>-  Before&#x3D;2031-04-13T15:14:47.433+08:00[Asia&#x2F;Shanghai]</td>
</tr>
<tr>
<td>Between</td>
<td>æ˜¯æŸä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚</td>
<td>-  Between&#x3D;2037-01-20T17:42:47.789-07:00[America&#x2F;Denver],  2037-01-21T17:42:47.789-07:00[America&#x2F;Denver]</td>
</tr>
<tr>
<td>Cookie</td>
<td>è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›cookie</td>
<td>- Cookie&#x3D;chocolate, ch.p</td>
</tr>
<tr>
<td>Header</td>
<td>è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›header</td>
<td>- Header&#x3D;X-Request-Id, \d+</td>
</tr>
<tr>
<td>Host</td>
<td>è¯·æ±‚å¿…é¡»æ˜¯è®¿é—®æŸä¸ªhostï¼ˆåŸŸåï¼‰</td>
<td>-  Host&#x3D;<strong>.somehost.org,</strong>.anotherhost.org</td>
</tr>
<tr>
<td>Method</td>
<td>è¯·æ±‚æ–¹å¼å¿…é¡»æ˜¯æŒ‡å®šæ–¹å¼</td>
<td>- Method&#x3D;GET,POST</td>
</tr>
<tr>
<td>Path</td>
<td>è¯·æ±‚è·¯å¾„å¿…é¡»ç¬¦åˆæŒ‡å®šè§„åˆ™</td>
<td>- Path&#x3D;&#x2F;red&#x2F;{segment},&#x2F;blue&#x2F;**</td>
</tr>
<tr>
<td>Query</td>
<td>è¯·æ±‚å‚æ•°å¿…é¡»åŒ…å«æŒ‡å®šå‚æ•°</td>
<td>- Query&#x3D;name, Jackæˆ–è€…-  Query&#x3D;name</td>
</tr>
<tr>
<td>RemoteAddr</td>
<td>è¯·æ±‚è€…çš„ipå¿…é¡»æ˜¯æŒ‡å®šèŒƒå›´</td>
<td>- RemoteAddr&#x3D;192.168.1.1&#x2F;24</td>
</tr>
<tr>
<td>Weight</td>
<td>æƒé‡å¤„ç†</td>
<td></td>
</tr>
</tbody></table>
<h4 id="4-è¿‡æ»¤å™¨å·¥å‚"><a href="#4-è¿‡æ»¤å™¨å·¥å‚" class="headerlink" title="4. è¿‡æ»¤å™¨å·¥å‚"></a>4. è¿‡æ»¤å™¨å·¥å‚</h4><p>GatewayFilteræ˜¯ç½‘å…³ä¸­æä¾›çš„ä¸€ç§è¿‡æ»¤å™¨ï¼Œå¯ä»¥å¯¹è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡è¿”å›çš„å“åº”åšå¤„ç†ï¼š<br><img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714212312871.png?raw=true" width="700" height="200"> </p>
<ul>
<li><strong>è·¯ç”±è¿‡æ»¤å™¨çš„ç§ç±»</strong>ï¼šSpringæä¾›äº†31ç§ä¸åŒçš„è·¯ç”±è¿‡æ»¤å™¨å·¥å‚ã€‚ä¾‹å¦‚ï¼š<table>
<thead>
<tr>
<th><strong>åç§°</strong></th>
<th><strong>è¯´æ˜</strong></th>
</tr>
</thead>
<tbody><tr>
<td>AddRequestHeader</td>
<td>ç»™å½“å‰è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´</td>
</tr>
<tr>
<td>RemoveRequestHeader</td>
<td>ç§»é™¤è¯·æ±‚ä¸­çš„ä¸€ä¸ªè¯·æ±‚å¤´</td>
</tr>
<tr>
<td>AddResponseHeader</td>
<td>ç»™å“åº”ç»“æœä¸­æ·»åŠ ä¸€ä¸ªå“åº”å¤´</td>
</tr>
<tr>
<td>RemoveResponseHeader</td>
<td>ä»å“åº”ç»“æœä¸­ç§»é™¤æœ‰ä¸€ä¸ªå“åº”å¤´</td>
</tr>
<tr>
<td>RequestRateLimiter</td>
<td>é™åˆ¶è¯·æ±‚çš„æµé‡</td>
</tr>
</tbody></table>
</li>
<li><strong>è¯·æ±‚å¤´è¿‡æ»¤å™¨</strong>ï¼šä»¥AddRequestHeader ä¸ºä¾‹æ¥è®²è§£ã€‚<blockquote>
<p><strong>éœ€æ±‚</strong>ï¼šç»™æ‰€æœ‰è¿›å…¥userserviceçš„è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´ï¼šTruth&#x3D;itcast is freaking awesome!  </p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åªéœ€è¦ä¿®æ”¹gatewayæœåŠ¡çš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ è·¯ç”±è¿‡æ»¤å³å¯</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> <span class="comment"># å½“å‰è¿‡æ»¤å™¨å†™åœ¨userserviceè·¯ç”±ä¸‹ï¼Œå› æ­¤ä»…ä»…å¯¹è®¿é—®userserviceçš„è¯·æ±‚æœ‰æ•ˆ</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> </span><br><span class="line">        <span class="attr">predicates:</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="string">Path=/user/**</span> </span><br><span class="line">        <span class="attr">filters:</span> <span class="comment"># è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,</span> <span class="string">Itcast</span> <span class="string">is</span> <span class="string">freaking</span> <span class="string">awesome!</span> <span class="comment"># æ·»åŠ è¯·æ±‚å¤´</span></span><br></pre></td></tr></table></figure></li>
<li><strong>é»˜è®¤è¿‡æ»¤å™¨</strong>ï¼šå¦‚æœè¦å¯¹æ‰€æœ‰çš„è·¯ç”±éƒ½ç”Ÿæ•ˆï¼Œåˆ™å¯ä»¥å°†è¿‡æ»¤å™¨å·¥å‚å†™åˆ°defaultä¸‹ã€‚æ ¼å¼å¦‚ä¸‹ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> </span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> </span><br><span class="line">        <span class="attr">predicates:</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="string">Path=/user/**</span></span><br><span class="line">      <span class="attr">default-filters:</span> <span class="comment"># é»˜è®¤è¿‡æ»¤é¡¹</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,</span> <span class="string">Itcast</span> <span class="string">is</span> <span class="string">freaking</span> <span class="string">awesome!</span> </span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-å…¨å±€è¿‡æ»¤å™¨"><a href="#5-å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="5. å…¨å±€è¿‡æ»¤å™¨"></a>5. å…¨å±€è¿‡æ»¤å™¨</h4><ol>
<li>å…¨å±€è¿‡æ»¤å™¨ä½œç”¨<br>  ä¸Šä¸€èŠ‚å­¦ä¹ çš„è¿‡æ»¤å™¨ï¼Œç½‘å…³æä¾›äº†31ç§ï¼Œä½†æ¯ä¸€ç§è¿‡æ»¤å™¨çš„ä½œç”¨éƒ½æ˜¯å›ºå®šçš„ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›æ‹¦æˆªè¯·æ±‚ï¼Œåšè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘åˆ™æ²¡åŠæ³•å®ç°ã€‚å…¨å±€è¿‡æ»¤å™¨çš„ä½œç”¨ä¹Ÿæ˜¯å¤„ç†ä¸€åˆ‡è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡å“åº”ï¼Œä¸GatewayFilterçš„ä½œç”¨ä¸€æ ·ã€‚åŒºåˆ«åœ¨äºGatewayFilteré€šè¿‡é…ç½®å®šä¹‰ï¼Œå¤„ç†é€»è¾‘æ˜¯å›ºå®šçš„ï¼›è€ŒGlobalFilterçš„é€»è¾‘éœ€è¦è‡ªå·±å†™ä»£ç å®ç°ã€‚<br>  å®šä¹‰æ–¹å¼æ˜¯å®ç°GlobalFilteræ¥å£ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">GlobalFilter</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  å¤„ç†å½“å‰è¯·æ±‚ï¼Œæœ‰å¿…è¦çš„è¯é€šè¿‡&#123;<span class="doctag">@link</span> GatewayFilterChain&#125;å°†è¯·æ±‚äº¤ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨å¤„ç†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exchange è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œé‡Œé¢å¯ä»¥è·å–Requestã€Responseç­‰ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> chain ç”¨æ¥æŠŠè¯·æ±‚å§”æ‰˜ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> Mono&lt;Void&gt;&#125; è¿”å›æ ‡ç¤ºå½“å‰è¿‡æ»¤å™¨ä¸šåŠ¡ç»“æŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  åœ¨filterä¸­ç¼–å†™è‡ªå®šä¹‰é€»è¾‘ï¼Œå¯ä»¥å®ç°ä¸‹åˆ—åŠŸèƒ½ï¼š<strong>ç™»å½•çŠ¶æ€åˆ¤æ–­ã€æƒé™æ ¡éªŒã€è¯·æ±‚é™æµ</strong>ç­‰</li>
<li>è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨<br>  <strong>éœ€æ±‚ï¼š</strong>å®šä¹‰å…¨å±€è¿‡æ»¤å™¨ï¼Œæ‹¦æˆªè¯·æ±‚ï¼Œåˆ¤æ–­è¯·æ±‚çš„å‚æ•°æ˜¯å¦æ»¡è¶³ä¸‹é¢æ¡ä»¶ï¼šï¼ˆå¦‚æœåŒæ—¶æ»¡è¶³åˆ™æ”¾è¡Œï¼Œå¦åˆ™æ‹¦æˆªï¼‰<br>  1ã€å‚æ•°ä¸­æ˜¯å¦æœ‰authorizationï¼Œ<br>  2ã€authorizationå‚æ•°å€¼æ˜¯å¦ä¸ºadmin<br>  <strong>å®ç°ï¼š</strong>åœ¨gatewayä¸­å®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Order(-1)</span> <span class="comment">// è¿‡æ»¤å™¨ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthorizeFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line">        MultiValueMap&lt;String, String&gt; params = exchange.getRequest().getQueryParams();</span><br><span class="line">        <span class="comment">// 2.è·å–authorizationå‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">auth</span> <span class="operator">=</span> params.getFirst(<span class="string">&quot;authorization&quot;</span>);</span><br><span class="line">        <span class="comment">// 3.æ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(auth)) &#123;</span><br><span class="line">            <span class="comment">// æ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.æ‹¦æˆª</span></span><br><span class="line">        <span class="comment">// 4.1.ç¦æ­¢è®¿é—®ï¼Œè®¾ç½®çŠ¶æ€ç </span></span><br><span class="line">        exchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN);</span><br><span class="line">        <span class="comment">// 4.2.ç»“æŸå¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº<br>  è¯·æ±‚è¿›å…¥ç½‘å…³ä¼šç¢°åˆ°ä¸‰ç±»è¿‡æ»¤å™¨ï¼šå½“å‰è·¯ç”±çš„è¿‡æ»¤å™¨ã€DefaultFilterã€GlobalFilter<br>  è¯·æ±‚è·¯ç”±åï¼Œä¼šå°†å½“å‰è·¯ç”±è¿‡æ»¤å™¨å’ŒDefaultFilterã€GlobalFilterï¼Œåˆå¹¶åˆ°ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼ˆé›†åˆï¼‰ä¸­ï¼Œæ’åºåä¾æ¬¡æ‰§è¡Œæ¯ä¸ªè¿‡æ»¤å™¨ï¼š <img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714214228409.png?raw=true"></li>
</ol>
<ul>
<li>æ’åºçš„è§„åˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<ul>
<li>æ¯ä¸€ä¸ªè¿‡æ»¤å™¨éƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªintç±»å‹çš„orderå€¼ï¼Œ<strong>orderå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰§è¡Œé¡ºåºè¶Šé å‰</strong>ã€‚</li>
<li>GlobalFilteré€šè¿‡å®ç°Orderedæ¥å£ï¼Œæˆ–è€…æ·»åŠ @Orderæ³¨è§£æ¥æŒ‡å®šorderå€¼ï¼Œç”±æˆ‘ä»¬è‡ªå·±æŒ‡å®š</li>
<li>è·¯ç”±è¿‡æ»¤å™¨å’ŒdefaultFilterçš„orderç”±SpringæŒ‡å®šï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å£°æ˜é¡ºåºä»1é€’å¢ã€‚</li>
<li>å½“è¿‡æ»¤å™¨çš„orderå€¼ä¸€æ ·æ—¶ï¼Œä¼šæŒ‰ç…§ defaultFilter &gt; è·¯ç”±è¿‡æ»¤å™¨ &gt; GlobalFilterçš„é¡ºåºæ‰§è¡Œã€‚<!-- è¯¦ç»†å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹æºç ï¼š
`org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator#getFilters()`æ–¹æ³•æ˜¯å…ˆåŠ è½½defaultFiltersï¼Œç„¶åå†åŠ è½½æŸä¸ªrouteçš„filtersï¼Œç„¶ååˆå¹¶ã€‚
`org.springframework.cloud.gateway.handler.FilteringWebHandler#handle()`æ–¹æ³•ä¼šåŠ è½½å…¨å±€è¿‡æ»¤å™¨ï¼Œä¸å‰é¢çš„è¿‡æ»¤å™¨åˆå¹¶åæ ¹æ®orderæ’åºï¼Œç»„ç»‡è¿‡æ»¤å™¨é“¾ --></li>
</ul>
</li>
</ul>
<h4 id="6-è·¨åŸŸé—®é¢˜"><a href="#6-è·¨åŸŸé—®é¢˜" class="headerlink" title="6. è·¨åŸŸé—®é¢˜"></a>6. è·¨åŸŸé—®é¢˜</h4><ol>
<li><strong>ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜</strong>ï¼š<br>åŸŸåä¸ä¸€è‡´å°±æ˜¯è·¨åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼šåŸŸåä¸åŒï¼š <a target="_blank" rel="noopener" href="http://www.taobao.com/">www.taobao.com</a> å’Œ <a target="_blank" rel="noopener" href="http://www.taobao.org/">www.taobao.org</a> å’Œ <a target="_blank" rel="noopener" href="http://www.jd.com;/">www.jd.comï¼›</a> åŸŸåç›¸åŒï¼Œç«¯å£ä¸åŒï¼šlocalhost:8080 å’Œ localhost:8081<br>è·¨åŸŸé—®é¢˜ï¼šæµè§ˆå™¨ç¦æ­¢è¯·æ±‚çš„å‘èµ·è€…ä¸æœåŠ¡ç«¯å‘ç”Ÿè·¨åŸŸajaxè¯·æ±‚ï¼Œè¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªçš„é—®é¢˜<br>è§£å†³æ–¹æ¡ˆï¼šCORS <a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2016/04/cors.html">https://www.ruanyifeng.com/blog/2016/04/cors.html</a></li>
<li><strong>æ¨¡æ‹Ÿè·¨åŸŸé—®é¢˜</strong><br>æ‰¾åˆ°è¯¾å‰èµ„æ–™çš„é¡µé¢æ–‡ä»¶ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714215713563.png?raw=true"><br>æ”¾å…¥tomcatæˆ–è€…nginxè¿™æ ·çš„webæœåŠ¡å™¨ä¸­ï¼Œå¯åŠ¨å¹¶è®¿é—®ã€‚<br>å¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°çœ‹åˆ°ä¸‹é¢çš„é”™è¯¯ï¼š<img src="https://github.com/leo710aka/bk/blob/main/springcloud/assets2/image-20210714215832675.png?raw=true"><br>ä»localhost:8090è®¿é—®localhost:10010ï¼Œç«¯å£ä¸åŒï¼Œæ˜¾ç„¶æ˜¯è·¨åŸŸçš„è¯·æ±‚ã€‚</li>
<li><strong>è§£å†³è·¨åŸŸé—®é¢˜</strong>ï¼šåœ¨gatewayæœåŠ¡çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="comment"># ï¼Ÿï¼Ÿ</span></span><br><span class="line">      <span class="attr">globalcors:</span> <span class="comment"># å…¨å±€çš„è·¨åŸŸå¤„ç†</span></span><br><span class="line">        <span class="attr">add-to-simple-url-handler-mapping:</span> <span class="literal">true</span> <span class="comment"># è§£å†³optionsè¯·æ±‚è¢«æ‹¦æˆªé—®é¢˜</span></span><br><span class="line">        <span class="attr">corsConfigurations:</span></span><br><span class="line">          <span class="string">&#x27;[/**]&#x27;</span><span class="string">:</span></span><br><span class="line">            <span class="attr">allowedOrigins:</span> <span class="comment"># å…è®¸å“ªäº›ç½‘ç«™çš„è·¨åŸŸè¯·æ±‚ </span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;http://localhost:8090&quot;</span></span><br><span class="line">            <span class="attr">allowedMethods:</span> <span class="comment"># å…è®¸çš„è·¨åŸŸajaxçš„è¯·æ±‚æ–¹å¼</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;GET&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;POST&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;DELETE&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;PUT&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;OPTIONS&quot;</span></span><br><span class="line">            <span class="attr">allowedHeaders:</span> <span class="string">&quot;*&quot;</span> <span class="comment"># å…è®¸åœ¨è¯·æ±‚ä¸­æºå¸¦çš„å¤´ä¿¡æ¯</span></span><br><span class="line">            <span class="attr">allowCredentials:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦å…è®¸æºå¸¦cookie</span></span><br><span class="line">            <span class="attr">maxAge:</span> <span class="number">360000</span> <span class="comment"># è¿™æ¬¡è·¨åŸŸæ£€æµ‹çš„æœ‰æ•ˆæœŸ</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>

<h2 id="Sentinel-æœåŠ¡ä¿æŠ¤"><a href="#Sentinel-æœåŠ¡ä¿æŠ¤" class="headerlink" title="Sentinel æœåŠ¡ä¿æŠ¤"></a>Sentinel æœåŠ¡ä¿æŠ¤</h2><ul>
<li>é›ªå´©ï¼šå¾®æœåŠ¡è°ƒç”¨é“¾è·¯ä¸­çš„æŸä¸ªæœåŠ¡æ•…éšœï¼Œå¼•èµ·æ•´ä¸ªé“¾è·¯ä¸­çš„æ‰€æœ‰å¾®æœåŠ¡éƒ½ä¸å¯ç”¨ï¼Œè¿™å°±æ˜¯é›ªå´©ã€‚<ul>
<li>é›ªå´©é—®é¢˜äº§ç”Ÿçš„åŸå› æ˜¯ä»€ä¹ˆ?<br>å¾®æœåŠ¡ç›¸äº’è°ƒç”¨ï¼ŒæœåŠ¡æä¾›è€…å‡ºç°æ•…éšœæˆ–é˜»å¡ã€‚<br>æœåŠ¡è°ƒç”¨è€…æ²¡æœ‰åšå¥½å¼‚å¸¸å¤„ç†ï¼Œå¯¼è‡´è‡ªèº«æ•…éšœ<br>è°ƒç”¨é“¾ä¸­çš„æ‰€æœ‰æœåŠ¡çº§è”å¤±è´¥ï¼Œå¯¼è‡´æ•´ä¸ªé›†ç¾¤æ•…éšœ<img src="https://github.com/leo710aka/bk/blob/main/springcloud/10.png?raw=true?raw=true" width="300" height="200"></li>
<li>è§£å†³é—®é¢˜çš„æ€è·¯æœ‰å“ªäº›?<br>å°½é‡é¿å…æœåŠ¡å‡ºç°æ•…éšœæˆ–é˜»å¡ï¼šä¿è¯ä»£ç çš„å¥å£®æ€§; ä¿è¯ç½‘ç»œç•…é€š; èƒ½åº”å¯¹è¾ƒé«˜çš„å¹¶å‘è¯·æ±‚;<br>æœåŠ¡è°ƒç”¨è€…åšå¥½è¿œç¨‹è°ƒç”¨å¼‚å¸¸çš„åå¤‡æ–¹æ¡ˆï¼Œé¿å…æ•…éšœæ‰©æ•£</li>
<li>è§£å†³é›ªå´©é—®é¢˜çš„å¸¸è§æ–¹æ¡ˆæœ‰å“ªäº›?<br>è¯·å°”é™æµï¼šé™åˆ¶æµé‡åœ¨æœåŠ¡å¯ä»¥å¤„ç†çš„èŒƒå›´ï¼Œé¿å…å› çªå‘æµé‡ä¸½æ•…éšœ<br>çº¿ç¨‹éš”ç¦»ï¼šæ§åˆ¶ä¸šåŠ¡å¯ç”¨çš„çº¿ç¨‹æ•°é‡ï¼Œå°†æ•…éšœéš”ç¦»åœ¨ä¸€å®šèŒƒå›´<br>å¤±è´¥å¤„ç†ï¼šï¼ˆç†”æ–­çš„ä¸€éƒ¨åˆ†ï¼‰å®šä¹‰fallbacké€»è¾‘ï¼Œè®©ä¸šåŠ¡å¤±è´¥æ—¶ä¸å†æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯èµ°fallbacké€»è¾‘<br>æœåŠ¡ç†”æ–­ï¼šå°†å¼‚å¸¸æ¯”ä¾‹è¿‡é«˜çš„æ¥å£æ–­å¼€ï¼Œæ‹’ç»æ‰€æœ‰è¯·æ±‚ï¼Œç›´æ¥èµ°fallback</li>
<li>æŠ€æœ¯å®ç°<br>ç°å¸¸ç”¨ Sentinelï¼ŒåŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼›Hystrix æ”¯æŒ SpringCloud 2020å‰çš„ç‰ˆæœ¬<img src="https://github.com/leo710aka/bk/blob/main/springcloud/11.png?raw=true?raw=true" width="700" height="200"></li>
</ul>
</li>
</ul>
<hr> 

<h2 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡"></a>åˆ†å¸ƒå¼äº‹åŠ¡</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/list/watchlater?oid=961238101&bvid=BV1kH4y1S7wz&spm_id_from=333.999.top_right_bar_window_view_later.content.click&p=46">https://www.bilibili.com/list/watchlater?oid=961238101&amp;bvid=BV1kH4y1S7wz&amp;spm_id_from=333.999.top_right_bar_window_view_later.content.click&amp;p=46</a></p>
<hr>

<h2 id="RabbitMQ-æ¶ˆæ¯é˜Ÿåˆ—ã€5672ã€‘"><a href="#RabbitMQ-æ¶ˆæ¯é˜Ÿåˆ—ã€5672ã€‘" class="headerlink" title="RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—ã€5672ã€‘"></a>RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—ã€5672ã€‘</h2><p><a target="_blank" rel="noopener" href="https://leo710aka.github.io/2024/01/11/RabbitMQ/">https://leo710aka.github.io/2024/01/11/RabbitMQ/</a></p>
<hr>

<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p><a target="_blank" rel="noopener" href="http://localhost:4000/2023/04/14/Docker/">http://localhost:4000/2023/04/14/Docker/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/01/07/SpringCloud/" data-id="cmjzvj9me000phgv5eu8c3wck" data-title="SpringCloud" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-éªä¼¯Junbo" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/01/04/%E9%AA%8F%E4%BC%AFJunbo/" class="article-date">
  <time class="dt-published" datetime="2024-01-04T02:58:11.000Z" itemprop="datePublished">2024-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/01/04/%E9%AA%8F%E4%BC%AFJunbo/">éª ä¼¯ Junbo</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>

<h2 id="è”¡æ«-çš„2023å¹´ç»ˆæ€»ç»“"><a href="#è”¡æ«-çš„2023å¹´ç»ˆæ€»ç»“" class="headerlink" title="è”¡æ« çš„2023å¹´ç»ˆæ€»ç»“"></a>è”¡æ« çš„2023å¹´ç»ˆæ€»ç»“</h2><ul>
<li><p>å›é¡¾2023ï¼Œä½ å°è±¡æœ€æ·±åˆ»çš„2-3ä¸ª é«˜å…‰æ—¶åˆ» æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li><p>æ„¿æ„å»äº†è§£ï¼Œç†è§£æ–°äº‹ç‰©çš„æ—¶å€™ï¼Œä»ç”µå½±å’ŒéŸ³ä¹ç­‰æ„Ÿå—ä¹è¶£ï¼Œå…±æƒ…ä¸å“²æ€</p>
</li>
<li><p>å‡†å¤‡ä¸€å¹´æ‹¿åˆ°å¥–å­¦é‡‘ï¼Œé‡ä¿®ä¸¤é—¨è¯¾ç¨‹é«˜åˆ†é€šè¿‡</p>
</li>
<li><p>é€šè¿‡é¢è¯•ï¼Œè¿›å…¥éªä¼¯ï¼Œä¸€å®šå¤šå‘åŒäº‹ä»¬å­¦ä¹ </p>
</li>
</ol>
</li>
<li><p>å›é¡¾2023ï¼Œä½ å°è±¡æœ€æ·±åˆ»çš„2-3ä¸ª è‰°éš¾æ—¶åˆ» æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li><p>æ”¾å¼ƒè€ƒç ”å’Œå‡ºå›½ï¼Œæ„Ÿè§‰æ˜¯å½“ä¸‹æ¯”è¾ƒå¥½çš„å†³å®š</p>
</li>
<li><p>æƒ³åˆ°å®¶é‡Œæƒ…å†µæ˜¯å¤šä¹ˆçª˜è¿«çš„æ—¶åˆ»</p>
</li>
<li><p>å‘ç°è„±å‘ç—‡çŠ¶çš„æ—¶å€™</p>
</li>
</ol>
</li>
<li><p>ç›®æ ‡Aï¼šå‡†å¤‡å°±ä¸š</p>
<p>  å¤§æ¦‚æ˜¯å…«æœˆä»½ï¼Œæ‰“æ¶ˆäº†è€ƒç ”ä»¥åŠç•™å­¦çš„å¿µå¤´åï¼Œç”±äºæœ‰Javaå¼€å‘çš„ç»éªŒï¼Œè‡ªç„¶å¾€è¿™ä¸ªæ–¹å‘å‡†å¤‡å°±ä¸šã€‚<br>  è¦å­¦ä¹ çš„å†…å®¹ç‰¹åˆ«å¤šï¼ŒåŸä»¥ä¸ºæœ‰åŸºç¡€ä¾¿èƒ½ç”¨ä¸‰ä¸ªæœˆå·¦å³å‡†å¤‡å¥½ï¼Œäº‹å®ä¸Šå³ä½¿æ¯å¤©éƒ½åœ¨å°½åŠ›å¡«å……è‡ªå·±ï¼Œå¦‚æ­¤åŠå¹´åè¿˜å‰©ä¸‹è®¸å¤šæ²¡å‡†å¤‡å¥½çš„ï¼Œæ›´åˆ«è¯´è¦èƒ½å¤Ÿåœ¨é¢è¯•æ—¶ä»å®¹å¯¹ç­”ã€‚ä½†æ˜¯å¹¶ä¸ç„¦è™‘ï¼Œåªè¦åšå¥½è§„åˆ’ï¼Œç»§ç»­å­¦ä¸‹å»ï¼Œæœ‰é™çš„å†…å®¹æ€»æ˜¯èƒ½å¤Ÿå‡†å¤‡å®Œæˆçš„ï¼Œå‰©ä¸‹å°±æ˜¯å‡†å¤‡å’Œé¢å¯¹ä¸å–œæ¬¢çš„é¢è¯•ç¯èŠ‚ã€‚<br>  2024å¹´1æœˆ4æ—¥ï¼Œæˆ‘é€šè¿‡äº†éªä¼¯çš„é¢è¯•ï¼Œå²—ä½æ˜¯Javaå¼€å‘å®ä¹ ç”Ÿã€‚é¢è¯•ä¸­ï¼Œæˆ‘æåˆ°å¸Œæœ›æ¥è§¦ä¸€äº›é«˜å¹¶å‘ã€åˆ†å¸ƒå¼è¿™æ ·çš„å¤æ‚åœºæ™¯ä¸­çš„â€œé«˜å¤§ä¸Šâ€çš„é—®é¢˜ã€‚è¿›å…¥å…¬å¸ä¸¤å‘¨ï¼Œæˆ‘äº†è§£åˆ°åœ¨å®é™…å·¥ä½œä¸­æ›´å¤šçš„æ˜¯åœ¨ä¸æ–­åœ°è§£å†³éœ€æ±‚ï¼Œè·Ÿå›¢é˜Ÿæˆå‘˜åä½œå¯¹æ¥ï¼ŒçœŸæ­£é‡è¦çš„æ˜¯è¦æœ‰è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚<br>  æ¯æ¬¡å‘å¯¼å¸ˆæé—®çš„æ—¶å€™ï¼Œä»–çš„åˆ†äº«æ¯«æ— ä¿ç•™ï¼Œå„ä½åŒäº‹éƒ½æ˜¯æˆ‘å­¦ä¹ çš„å¯¹è±¡ã€‚æœªæ¥çš„æ—¥å­ï¼Œæˆ‘å°†å°½å…¨åŠ›å®Œæˆæ¯ä¸ªå®‰æ’åˆ°çš„ä»»åŠ¡ï¼Œæå‡ç¼–ç èƒ½åŠ›ï¼Œä¸ºå…¬å¸åˆ›é€ ä»·å€¼ã€‚</p>
</li>
</ul>
<hr>

<h2 id="01-10"><a href="#01-10" class="headerlink" title="01.10"></a>01.10</h2><ul>
<li><p><strong>æ¨¡å— æœåŠ¡</strong>ï¼Ÿä¸€ä¸ªæœåŠ¡å ç”¨ä¸€ä¸ªç«¯å£ï¼Œ åœ¨ .gradle é…ç½®<br>{<br>  demo-api: æœåŠ¡åŒ–æ¥å£å®šä¹‰é¡¹ç›®<br>  demo-service: æœåŠ¡åŒ–å®ç°é¡¹ç›®<br>}<br>api æ¥å£ä¸å®ç° åˆ†ç¦»ï¼Œ<br>UserApiæ¥å£ä¸ŠåŠ  @FeignClientï¼Œ è¯·æ±‚å‡åˆ†å‘é€åˆ°å¤šå°æœåŠ¡å™¨ä¸Š<br>springæ³¨å…¥ ä¸ å•ä¾‹æ¨¡å¼ã€‚ã€‚</p>
</li>
<li><p>æ•æ·å¼€å‘ï¼šä¸€ç§åº”å¯¹å¿«é€Ÿå˜åŒ–éœ€æ±‚çš„ä¸€ç§è½¯ä»¶å¼€å‘èƒ½åŠ›ã€‚ç›¸å¯¹äºâ€éæ•æ·â€ï¼Œæ›´å¼ºè°ƒç¨‹åºå‘˜å›¢é˜Ÿä¸ä¸šåŠ¡ä¸“å®¶ä¹‹é—´çš„ç´§å¯†åä½œã€é¢å¯¹é¢çš„æ²Ÿé€š(è®¤ä¸ºæ¯”ä¹¦é¢çš„æ–‡æ¡£æ›´æœ‰æ•ˆ)ã€é¢‘ç¹äº¤ä»˜æ–°çš„è½¯ä»¶ç‰ˆæœ¬ã€ç´§å‡‘è€Œè‡ªæˆ‘ç»„ç»‡å‹çš„å›¢é˜Ÿã€èƒ½å¤Ÿå¾ˆå¥½åœ°é€‚åº”éœ€æ±‚å˜åŒ–çš„ä»£ç ç¼–å†™å’Œå›¢é˜Ÿç»„ç»‡æ–¹æ³•ï¼Œä¹Ÿæ›´æ³¨é‡åšä¸ºè½¯ä»¶å¼€å‘ä¸­äººçš„ä½œç”¨ã€‚</p>
</li>
</ul>
<h2 id="01-18"><a href="#01-18" class="headerlink" title="01.18"></a>01.18</h2><ul>
<li><p>ä½¿ç”¨ä¸åŒçš„çª—å£æ‰“å¼€ä¸€ä¸ªé¡¹ç›®ä¸‹çš„ä¸åŒæœåŠ¡ã€ã€</p>
</li>
<li><p>ä½¿ç”¨ IDEA -&gt; Run&#x2F;Debug Configuration -&gt; Shorten command line é€‰é¡¹ç”¨äºæŒ‡å®šæ˜¯å¦<strong>ç¼©çŸ­å‘½ä»¤è¡Œ</strong>ï¼Œä»¥æé«˜å¯è¯»æ€§æˆ–ç®¡ç†æ€§ï¼Œå…¶ä¸­ None è¡¨ç¤ºä¸ç¼©çŸ­ï¼ŒClasspath File è¡¨ç¤ºé€šè¿‡ç±»è·¯å¾„æ–‡ä»¶ç¼©çŸ­ã€‚<br>Java æºä»£ç è¢«ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ï¼ˆ.class æ–‡ä»¶ï¼‰ã€‚å­—èŠ‚ç æ–‡ä»¶åœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šè¿è¡Œã€‚è¿è¡Œæ—¶é…ç½®å‚æ•°é€šè¿‡å‘½ä»¤è¡Œæˆ–é…ç½®æ–‡ä»¶ä¼ é€’ç»™ JVM å’Œåº”ç”¨ç¨‹åºã€‚è¿è¡Œæ—¶å‚æ•°åŒ…æ‹¬ç±»è·¯å¾„ã€ç³»ç»Ÿå±æ€§ã€ç¯å¢ƒå˜é‡ã€åº”ç”¨ç¨‹åºå‚æ•°ç­‰ï¼Œç”¨äºå½±å“åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚</p>
</li>
<li><p>DevOps æ‡‚æŠ€æœ¯çš„è¿ç»´ï¼Ÿ <a target="_blank" rel="noopener" href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B9%8B%E7%BE%8E/36%20DevOps%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%88%B0%E5%BA%95%E8%A6%81%E5%81%9A%E4%BB%80%E4%B9%88%E4%BA%8B%E6%83%85%EF%BC%9F.md">https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B9%8B%E7%BE%8E/36%20DevOps%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%88%B0%E5%BA%95%E8%A6%81%E5%81%9A%E4%BB%80%E4%B9%88%E4%BA%8B%E6%83%85%EF%BC%9F.md</a><br>DevOps å¯ä»¥ç†è§£ä¸ºä¸€ç§å¼€å‘å’Œè¿ç»´ä¸€èµ·ç´§å¯†åä½œçš„å·¥ä½œæ–¹å¼ï¼Œä»è€Œå¯ä»¥æ›´å¿«æ›´å¯é åœ°æ„å»ºã€æµ‹è¯•å’Œå‘å¸ƒè½¯ä»¶ã€‚DevOps çš„ä¸»è¦åŸåˆ™å°±æ˜¯è‡ªåŠ¨åŒ–ã€ä¿¡æ¯é€æ˜å¯æµ‹é‡ã€æ„å»ºåä½œæ–‡åŒ–ã€‚<br>DevOps å·¥ç¨‹å¸ˆï¼Œè¦åšçš„äº‹æƒ…å°±æ˜¯å¸®åŠ©å›¢é˜Ÿæ¥å®è·µ DevOps çš„å·¥ä½œæ–¹å¼ã€‚å…·ä½“å¯ä»¥å¸®åŠ©å›¢é˜Ÿï¼šå»ºç«‹åŸºäºæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜å·¥ä½œæµç¨‹ï¼›å»ºç«‹åŸºäºæ—¥å¿—çš„ç›‘æ§æŠ¥è­¦çš„ç³»ç»Ÿï¼Œä»¥åŠæ•…éšœå“åº”çš„æµç¨‹ï¼›æ„å»ºåŸºäºäº‘è®¡ç®—å’Œè™šæ‹ŸåŒ–æŠ€æœ¯çš„åŸºç¡€è®¾æ–½ï¼›å½¢æˆ DevOps çš„æ–‡åŒ–ã€‚DevOps å·¥ç¨‹å¸ˆåšçš„äº‹æƒ…ï¼Œå°±æ˜¯å¸®åŠ©å›¢é˜ŸåŸºäº DevOps åŸåˆ™æ¥åšäº‹ï¼Œè®©å›¢é˜Ÿå½¢æˆç´§å¯†åä½œçš„å·¥ä½œæ–¹å¼ï¼Œæ›´å¿«æ›´å¯é çš„æ„å»ºã€æµ‹è¯•å’Œå‘å¸ƒè½¯ä»¶ã€‚</p>
</li>
</ul>
<h2 id="01-23"><a href="#01-23" class="headerlink" title="01.23"></a>01.23</h2><ul>
<li><p>Jedis å’Œ RedisTemplateæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>Jedis æ˜¯ Redis çš„å®˜æ–¹ Java å®¢æˆ·ç«¯ï¼Œç›´æ¥ä½¿ç”¨ Redis çš„å‘½ä»¤è¿›è¡Œæ“ä½œã€‚å®ƒæä¾›äº†æ¯”è¾ƒåº•å±‚çš„ APIï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†è¿æ¥ã€åºåˆ—åŒ–ç­‰ã€‚RedisTemplate æ˜¯ Spring Data Redis æä¾›çš„ Redis å®¢æˆ·ç«¯ï¼Œå®ƒåœ¨ Jedis çš„åŸºç¡€ä¸Šè¿›è¡Œäº†å°è£…ï¼Œæä¾›äº†æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡å’Œæ›´å¤šçš„åŠŸèƒ½ã€‚<br>å¦‚æœä½ åœ¨ä½¿ç”¨ Spring é¡¹ç›®ï¼Œå¹¶ä¸”å¸Œæœ›æ›´æ–¹ä¾¿åœ°é›†æˆ Redisï¼Œå¹¶æä¾›æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡å’ŒåŠŸèƒ½ï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨ RedisTemplateã€‚å¦‚æœä½ å¯¹ Redis çš„å‘½ä»¤è¾ƒä¸ºäº†è§£ï¼Œæˆ–è€…éœ€è¦æ›´åº•å±‚çš„æ“ä½œï¼Œé‚£ä¹ˆ Jedis å¯èƒ½æ›´é€‚åˆä½ ã€‚</p>
</li>
<li><p>SpringBootå®ä½“ç±» DO å’Œ BO</p>
<ol>
<li><strong>DOï¼ˆData Objectï¼‰ï¼š</strong>é€šå¸¸è¡¨ç¤ºæ•°æ®åº“ä¸­çš„æ•°æ®å®ä½“ï¼Œå¯¹åº”æ•°æ®åº“è¡¨çš„ç»“æ„ã€‚å®ƒä¸»è¦ç”¨äºæ•°æ®å­˜å‚¨å’Œæ•°æ®åº“æ“ä½œï¼ŒåŒ…å«ä¸æ•°æ®åº“è¡¨å­—æ®µä¸€ä¸€å¯¹åº”çš„å±æ€§ã€‚DO ç±»çš„å‘½åä¸€èˆ¬ä»¥ â€œDOâ€ ä¸ºåç¼€ï¼Œä¾‹å¦‚ <code>UserDO</code>ï¼Œ<code>OrderDO</code>ã€‚ç±»ä¸­é€šå¸¸åŒ…å«ä¸æ•°æ®åº“è¡¨å­—æ®µå¯¹åº”çš„æˆå‘˜å˜é‡ã€getter å’Œ setter æ–¹æ³•ã€‚å®ƒä¸åº”åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œä¸»è¦è´Ÿè´£æ•°æ®çš„æŒä¹…åŒ–å’Œæ˜ å°„ã€‚</li>
<li><strong>BOï¼ˆBusiness Objectï¼‰ï¼š</strong>é€šå¸¸è¡¨ç¤ºä¸šåŠ¡å±‚çš„ä¸šåŠ¡å®ä½“ï¼Œä¸»è¦ç”¨äºå°è£…ä¸šåŠ¡é€»è¾‘ã€‚BO ç±»ä¸€èˆ¬åŒ…å«ä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸å…·ä½“çš„æ•°æ®å­˜å‚¨å½¢å¼æ— å…³ã€‚åŒ…å«äº†ä¸€äº›ä¸šåŠ¡é€»è¾‘çš„æ“ä½œï¼Œæ¯”å¦‚è®¡ç®—ã€éªŒè¯ç­‰ã€‚å®ƒä¸åº”ç›´æ¥ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨ Service å±‚æˆ– DAO å±‚çš„æ–¹æ³•å®ç°æ•°æ®çš„è·å–å’Œå­˜å‚¨ã€‚</li>
<li>åœ¨ Spring Boot ä¸­ï¼ŒDOå’Œ BOæ˜¯ä¸€äº›å¸¸è§çš„å‘½åè§„èŒƒï¼Œç”¨äºè¡¨ç¤ºåœ¨ä¸åŒå±‚æ¬¡ä¸­ä½¿ç”¨çš„å®ä½“ç±»ã€‚è¿™äº›å‘½åè§„èŒƒæœ‰åŠ©äºä»£ç çš„æ¸…æ™°æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åœ¨ä¸šåŠ¡é€»è¾‘å±‚ä¸­ï¼Œå¯ä»¥é€šè¿‡è½¬æ¢å·¥å…·æˆ–æ¡†æ¶è¿›è¡Œ DO å’Œ BO ä¹‹é—´çš„è½¬æ¢ï¼Œä»¥å®Œæˆæ•°æ®çš„ä¼ é€’å’Œå¤„ç†ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ©ç”¨å®ä¾‹BOå¯¹è±¡ç”ŸæˆDOå¯¹è±¡</span></span><br><span class="line"><span class="type">OrderDO</span> <span class="variable">orderDO</span> <span class="operator">=</span> BeanMapperUtil.map(orderBO, OrderDO.class);</span><br></pre></td></tr></table></figure>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">map</span><span class="params">(Object sourceObject, Class&lt;T&gt; destObjectclazz)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (sourceObject == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">T</span> <span class="variable">destObject</span> <span class="operator">=</span> BeanUtils.instantiateClass(destObjectclazz);</span><br><span class="line">    <span class="comment">// å¯¹è±¡æ˜ å°„ï¼š é€šè¿‡ copyProperties æ–¹æ³•ï¼Œå°†æºå¯¹è±¡çš„å±æ€§å€¼å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­</span></span><br><span class="line">    copyProperties(sourceObject, destObject, <span class="literal">null</span>, (String[]) <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">return</span> destObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h2 id="01-30"><a href="#01-30" class="headerlink" title="01.30"></a>01.30</h2><p>Appæ‹‰æ–°ä¸šåŠ¡ï¼Œå¢åŠ ç™½åå•åŠŸèƒ½</p>
<!-- - ä¸šåŠ¡ï¼šå½“æ–°æ¥å…¥ä¸€ä¸ªå®¢æˆ·æˆ–è€…åª’ä½“æ—¶ï¼Œéœ€è¦å¯¹æ•´æ¡é“¾è·¯è¿›è¡ŒéªŒè¯ï¼Œç¡®ä¿æ•°æ®æ˜¯èƒ½å¤Ÿæ­£å¸¸ä¼ é€’çš„ã€‚åª’ä½“å¹¿å‘ŠæŠ•æ”¾åå°æœ‰ä¸€ä¸ªè”è°ƒåŠŸèƒ½ï¼Œé€šè¿‡è”è°ƒåŠŸèƒ½ï¼Œèƒ½å¤ŸæŒ‡å®šåª’ä½“ç»™ç‰¹å®šä¸€å°æ‰‹æœºå‘é€æµ‹è¯•å¹¿å‘Šï¼Œç”¨æˆ·å†ç‚¹å‡»å¹¿å‘Šå¯ä»¥è§¦å‘ä¸€æ¡å¹¿å‘Šç‚¹å‡»æ•°æ®ï¼Œå¹¶å‘é€åˆ°æˆ‘æ–¹æ‹‰æ–°ä¸šåŠ¡ç³»ç»Ÿï¼Œæˆ‘æ–¹å¯ä»¥é€šè¿‡é¡µé¢åŠŸèƒ½æŸ¥åˆ°è¯¥å¹¿å‘Šç‚¹å‡»æ•°æ®çš„çŠ¶æ€ã€‚å¦‚æœè¯¥ç‚¹å‡»æ•°æ®æˆåŠŸå‘ç»™å®¢æˆ·ï¼Œè¯´æ˜é“¾è·¯ä¸€ï¼ˆåª’ä½“åˆ°å®¢æˆ·ï¼‰æ˜¯é€šçš„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æˆ‘æ–¹ä¸šåŠ¡ç³»ç»Ÿé¡µé¢åŠŸèƒ½æ‰‹åŠ¨è§¦å‘ä¸€æ¡è½¬åŒ–æ•°æ®ï¼Œå‘ç»™åª’ä½“ï¼Œå¦‚æœèƒ½å‘é€æˆåŠŸï¼Œåˆ™è¯´æ˜æ•´æ¡é“¾è·¯æ˜¯é€šçš„ï¼Œåˆ™éªŒè¯é€šè¿‡ã€‚
- é—®é¢˜ï¼šä½¿ç”¨è”è°ƒåŠŸèƒ½ï¼Œåª’ä½“ç»™æˆ‘æ–¹å‘é€çš„å¹¿å‘Šç‚¹å‡»æ•°æ®ï¼Œæˆ‘ä»¬ä¼šåšä¸€äº›æ‹¦æˆªå¤„ç†ï¼Œæœ‰æ—¶å€™ä¸ä¼šå°†å®ƒä»¬å‘ç»™å®¢æˆ·ï¼Œè¿™å°±ä½¿å¾—æ²¡æ³•è¿›è¡Œä¸‹ä¸€æ­¥è½¬åŒ–å›ä¼ çš„åŠ¨ä½œï¼Œä»è€Œæ— æ³•å®Œæˆåª’ä½“çš„è”è°ƒã€‚ä¸€ä¸ªå…¸å‹çš„æ‹¦æˆªå¤„ç†çš„æ¡ˆä¾‹æ˜¯ï¼Œå¯¹äºæŸäº›å®¢æˆ·ï¼Œæˆ‘æ–¹åœ¨å‘é€ç‚¹å‡»æ•°æ®ç»™å¯¹æ–¹æ—¶ï¼Œéœ€è¦è°ƒç”¨å®¢æˆ·çš„æ¥å£è¿›è¡Œç¡®è®¤ï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯å®¢æˆ·çš„ç›®æ ‡ç”¨æˆ·ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¸å‘é€ç‚¹å‡»æ•°æ®ç»™å®¢æˆ·ï¼Œè¿™æ ·çš„æ‹¦æˆªç§°ä¹‹ä¸ºRTAæ‹¦æˆªã€‚æ‹¦æˆªç‡ç”±å®¢æˆ·å†³å®šçš„ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¾ˆé«˜ï¼Œä¸šåŠ¡æ–¹ç”¨æ¥è”è°ƒçš„æ‰‹æœºåŸºæœ¬éƒ½è¢«æ‹¦æˆªäº†ï¼Œä»è€Œæ— æ³•å®Œæˆè”è°ƒã€‚
handle æ‹¦æˆªï¼Œå…¶å®å°±æ˜¯ä¿®æ”¹æŸäº›å­—æ®µçš„çŠ¶æ€ï¼Œä»¥åœ¨ä¹‹ååˆ¤å®šä¸ºæŸç§æƒ…å†µè€Œè¿›è¡ŒæŸç§è¡Œä¸º
- è§£å†³ï¼šæ·»åŠ ç™½åå•ï¼Œå¦‚æœä¸šåŠ¡æ–¹ç”¨æ¥æµ‹è¯•çš„æ‰‹æœºè®¾å¤‡å·åœ¨ç™½åå•å†…ï¼Œåˆ™ä¸è¿›è¡Œæ‹¦æˆªã€‚
- ä»£ç ä»‹ç»
ä»“åº“åœ°å€ï¼šhttp://git.gzjunbo.net/junbo/junbo-newenergy.gitï¼Œ åŸºäºmasteråˆ†æ”¯åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„å¼€å‘åˆ†æ”¯develop-caif
ä¸¤ä¸ªæœåŠ¡ï¼šnewenergy-web-adminã€newenergybg-serviceï¼Œå‰è€…æä¾›äº†ä¸€ä¸ªæ¥æ”¶ç‚¹å‡»æ•°æ®çš„æ¥å£ï¼Œåœ¨æ”¶åˆ°ç‚¹å‡»æ•°æ®ä»¥åï¼Œä¼šå°†å…¶é€šè¿‡feignè½¬å‘ç»™newenergybg-serviceæœåŠ¡è¿›è¡Œå¤„ç†ï¼ˆæ³¨å†Œä¸­å¿ƒä¸ºeurekaï¼‰ã€‚
æ¥å£å¯¹åº”çš„æ–¹æ³•æ˜¯ï¼šConvTraceWebApi.sendï¼ˆnewenergy-web-adminï¼‰ï¼Œå®ƒä¼šè°ƒç”¨newenergybg-serviceæœåŠ¡çš„ConvTraceApiImpl.uploadæ–¹æ³•ï¼Œå†é€šè¿‡MediaDataForwardProducer.produceæ–¹æ³•ï¼Œå°†å…¶å‘é€åˆ°Kafkaæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå†ç”±MediaDataForwardServiceImpl.consumeKafkaæ–¹æ³•è¿›è¡Œæ¶ˆè´¹ï¼Œæœ€ç»ˆè¿›å…¥æ ¸å¿ƒçš„ä¸šåŠ¡å¤„ç†é€»è¾‘æ–¹æ³•ï¼Œå³MediaDataForwardServiceImpl.uploadæ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„RTAæ‹¦æˆªéƒ¨åˆ†çš„ä»£ç å°±åœ¨è¿™é‡Œé¢ã€‚
- uploadæ–¹æ³•çš„å†…éƒ¨å¤„ç†é€»è¾‘å¦‚ä¸‹ï¼š
å‚æ•°å‰ç½®å¤„ç†ï¼ˆinitPreValidateï¼‰ï¼ˆä¸€äº›é€šç”¨é€»è¾‘ï¼Œæ¯”å¦‚ç‚¹å‡»æ•°æ®IDã€æ—¶é—´å­—æ®µçš„åˆå§‹åŒ–ï¼‰ã€‚
å‚æ•°æ ¡éªŒï¼ˆisValidï¼‰ï¼ˆæ ¡éªŒç‚¹å‡»æ•°æ®æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæ— æ•ˆåˆ™ä¸å‘ç»™å®¢æˆ·ï¼Œæ¯”å¦‚åª’ä½“å¯èƒ½ä¼šå°†ç”¨æˆ·æ›å…‰æ•°æ®å‘è¿‡æ¥ï¼Œæ­¤æ—¶ä¸éœ€è¦å‘ç»™å®¢æˆ·ï¼‰ã€‚
å‚æ•°åç½®å¤„ç†ï¼ˆinitPostValidateï¼‰ï¼ˆä¸€äº›å¸¦æœ‰å¤æ‚ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œæ¯”å¦‚RTAæ‹¦æˆªï¼‰ã€‚
å°†æ ¡éªŒé€šè¿‡çš„ç‚¹å‡»æ•°æ®å‘ç»™å®¢æˆ·ï¼ˆtransferToCustomerï¼‰ã€‚
ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“/ç¼“å­˜ï¼ˆsaveï¼‰ã€‚
æˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„RTAæ‹¦æˆªéƒ¨åˆ†çš„ä»£ç åœ¨å‚æ•°åç½®å¤„ç†éƒ¨åˆ†ï¼Œå…·ä½“æ–¹æ³•æ˜¯YoudaoMediaActionDataHandler.handleã€‚
- YoudaoMediaActionDataHandler.handleç±»å†…éƒ¨å¤„ç†é€»è¾‘
åª’ä½“å‘ç»™æˆ‘æ–¹çš„æ•°æ®å¯èƒ½ä¸æ­¢ç”¨æˆ·ç‚¹å‡»æ•°æ®ï¼Œè¿˜åŒ…æ‹¬äº†å¹¿å‘Šæ›å…‰æ•°æ®ï¼ˆå³ç”¨æˆ·åªè¦çœ‹äº†å¹¿å‘Šï¼Œåª’ä½“å°±ä¼šé€šçŸ¥æˆ‘ä»¬ï¼‰ï¼Œè¿™ç±»æ•°æ®æˆ‘ä»¬æ˜¯ä¸éœ€è¦å‘ç»™å®¢æˆ·çš„ï¼Œå› æ­¤éœ€è¦è®¾ç½®çŠ¶æ€ä¸ºNON_CLICK_NOT_TRANSFER_TO_CUSTOMERï¼Œåç»­ä»£ç æµç¨‹è¯†åˆ«å‡ºæ­¤çŠ¶æ€åï¼Œä¸ä¼šå°†è¯¥æ•°æ®å‘ç»™å®¢æˆ·ã€‚
èµ°RTAæ‹¦æˆªï¼Œæœ‰ä¸€äº›å‰ç½®æ¡ä»¶ï¼ŒåŒ…æ‹¬â‘ ä¸šåŠ¡æ–¹æŒ‡å®šäº†å®¢æˆ·ç‚¹å‡»ç›‘æµ‹é“¾æ¥IDä¸ºRTAé“¾æ¥ï¼ˆå®¢æˆ·çš„ç‚¹å‡»ç›‘æµ‹é“¾æ¥æ˜¯å®¢æˆ·æä¾›è¿‡æ¥ç”¨äºæ¥æ”¶æˆ‘æ–¹ç‚¹å‡»æ•°æ®çš„æ¥å£ï¼‰ï¼ˆRTAé“¾æ¥æ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œæ ‡è¯†å½“å‰ç‚¹å‡»æ•°æ®å‘ç»™å®¢æˆ·å‰ï¼Œè¦å…ˆè°ƒç”¨å®¢æˆ·çš„RTAæ¥å£è¿‡æ»¤ä¸€é“ï¼Œæœ€ç»ˆåªå‘é€å®¢æˆ·éœ€è¦çš„ç”¨æˆ·ï¼‰â‘¡å¦‚æœå½“å‰æ•°æ®ç±»å‹ä¸ºæ›å…‰ï¼Œä¸”æ›å…‰æ€»æ•°ä¸ç‚¹å‡»æ€»æ•°çš„æ¯”ä¾‹å°äºrequestRateï¼ˆé»˜è®¤ä¸º4:1ï¼‰
å¯¹äºæ»¡è¶³å‰ç½®æ¡ä»¶çš„æ•°æ®ï¼Œåˆ™å‘èµ·RTAè¯·æ±‚ï¼Œå°†ç»“æœè®°å½•ä¸‹æ¥ï¼ˆç»“æœæŒ‡çš„æ˜¯å®¢æˆ·æ˜¯å¦æ¥å—å½“å‰ç”¨æˆ·ï¼Œå³æ˜¯å¦å‚ç«-isParticipatedï¼‰ï¼Œç”¨äºä¸šåŠ¡æ–¹åç»­ä½¿ç”¨
å¦‚æœå®¢æˆ·ä¸æ¥å—å½“å‰ç”¨æˆ·ï¼Œåˆ™è®¾ç½®çŠ¶æ€RTA_EXCLUDEDï¼Œåç»­ä»£ç æµç¨‹è¯†åˆ«å‡ºæ­¤çŠ¶æ€åï¼Œä¸ä¼šå°†è¯¥æ•°æ®å‘ç»™å®¢æˆ·ã€‚ï¼ˆæ·»åŠ ç™½åå•åï¼Œå¦‚æœå®¢æˆ·ä¸æ¥å—å½“å‰ç”¨æˆ·ï¼Œä¸è®¾ç½®çŠ¶æ€RTA_EXCLUDEDï¼Œæ­¤æ—¶åç»­æµç¨‹ä¼šæ­£å¸¸å°†è¯¥æ•°æ®å‘ç»™å®¢æˆ·ï¼‰ -->


<h2 id="02-20"><a href="#02-20" class="headerlink" title="02.20"></a>02.20</h2><p>éœ€æ±‚ï¼šå¼€å‘åª’ä½“ä¸ŠæŠ¥è§„åˆ™æŠ¥è¡¨çš„åˆ†é¡µæŸ¥è¯¢æ¥å£</p>
<!-- * éœ€æ±‚åŸå‹ï¼šhttps://axhub.im/pro/62d03dd7790d2dd4/#g=1&p=%E5%AA%92%E4%BD%93%E4%B8%8A%E6%8A%A5%E8%A7%84%E5%88%99%E6%8A%A5%E8%A1%A8
* æ‹‰ä¸€ä¸ªdevelop-caifåˆ†æ”¯ï¼Œåç»­ä»£ç å¼€å‘åœ¨æ­¤åˆ†æ”¯ä¸Šè¿›è¡Œï¼Œåˆ†æ”¯å¯¹åº”æ•´ä¸ªé¡¹ç›®ï¼Œå…¶ä¸­åŒ…æ‹¬äº†åé¢æ¶‰åŠåˆ°çš„æ‰€æœ‰å¾®æœåŠ¡
* æ•°æ®åº“å»ºè¡¨
* ä½¿ç”¨junboGeneratoræ’ä»¶ç”Ÿæˆè¡¨ç»“æ„å¯¹åº”çš„MyBatisä»£ç ï¼ˆDO, BO, Mapperæ–‡ä»¶ï¼‰ï¼Œç”¨äºæ“ä½œæ•°æ®åº“ã€‚ä¿®æ”¹ /resources/generator/generatorConfig.xml æ–‡ä»¶ï¼Œè¿è¡Œæ’ä»¶ï¼š Gradle -> newenerge-soa -> Tasks -> junbo -> junboGeneraterï¼Œé…ç½®æ–°è¡¨ï¼ˆæ³¨æ„ï¼Œæ­¤æ—¶éœ€è¦å°†å…¶ä»–è¡¨çš„é…ç½®é¡¹æ³¨é‡Šæ‰ï¼‰ï¼Œåç»­æ’ä»¶æ‰§è¡Œæ—¶ä¼šæ ¹æ®æ•°æ®åº“è¡¨ç»“æ„ç”Ÿæˆç›¸åº”çš„Javaä»£ç ï¼ˆDOã€Mapperç­‰ç­‰ï¼‰ï¼Œå°†ä»£ç æ–‡ä»¶æ”¾åˆ°ç‰¹å®šçš„æ–‡ä»¶ç›®å½•ä¸‹ã€‚
config.xml ä¸­æœ‰ä¸¤ç±»åˆ—å±æ€§éœ€è¦ç‰¹æ®Šæ ‡è®°ï¼Œä¸€ç±»æ˜¯idï¼Œä¸€ç±»æ˜¯æšä¸¾å­—æ®µï¼ˆåœ¨æ•°æ®åº“é‡Œå¯èƒ½æ˜¯intï¼Œè€Œåœ¨javaä¸­æ˜¯enumï¼Œæ­¤æ—¶æ’ä»¶é»˜è®¤æ— æ³•å°†è¿™ä¸¤ä¸ªç±»å‹å¯¹åº”ï¼Œéœ€è¦è¦†ç›–æ‰æ’ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œæ‰‹åŠ¨è¿›è¡Œè½¬æ¢ï¼‰
* å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œå¤§è‡´æ­¥éª¤åŒ…æ‹¬ï¼š
â‘ ã€newenergy-apiã€‘å®šä¹‰XXXApiæ¥å£åŠpageæ–¹æ³•
â‘¡ã€newenergybg-serviceã€‘å®šä¹‰XXXServiceæ¥å£åŠpageæ–¹æ³•
â‘¢ã€newenergybg-serviceã€‘å®šä¹‰XXXApiImplç±»ï¼ˆControllerï¼‰ï¼Œå®ç°XXXApiæ¥å£åŠpageæ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨XXXServiceå®Œæˆåˆ†é¡µæŸ¥è¯¢æ•°æ®çš„æ“ä½œ
â‘£ã€newenergybg-serviceã€‘å®šä¹‰XXXServiceImplç±»ï¼Œå®ç°XXXServiceæ¥å£åŠpageæ–¹æ³•ï¼Œé€šè¿‡MyBatisåˆ†é¡µæ’ä»¶åŠXXXMapperçš„æŸ¥è¯¢æ–¹æ³•ï¼Œå®Œæˆæ•°æ®çš„åˆ†é¡µæŸ¥è¯¢ã€‚
â‘¤ã€newenergy-apiã€‘å‘å¸ƒXXXApiï¼šä¿®æ”¹ç‰ˆæœ¬å·ï¼ˆxx.snapshotï¼‰ï¼Œå‘å¸ƒæ–°çš„jaråŒ…ï¼ˆåŒ…å«æ–°çš„XXXApiæ¥å£ï¼‰åˆ° Maven ä»“åº“ï¼›Gradle -> newenergy-api -> Tasks -> publishing -> publish 
â‘¥ã€newenergy-web-adminã€‘å¼•å…¥æœ€æ–°çš„XXXApiï¼šæ›´æ–°mavenï¼Œä¾èµ–æ–°ç‰ˆæœ¬jaråŒ…ï¼Œä»¥ä½¿ç”¨æ–°çš„XXXApiæ¥å£
â‘¦ã€newenergy-web-adminã€‘å®šä¹‰XXXWebApiç±»åŠpageæ–¹æ³•ï¼ˆControllerï¼‰ï¼Œé€šè¿‡XXXApiçš„pageæ–¹æ³•ï¼Œå®Œæˆæ•°æ®çš„åˆ†é¡µæŸ¥è¯¢ã€‚
* æœåŠ¡å…³ç³»ï¼š
ã€newenergy-apiã€‘ï¼šå®šä¹‰æ¥å£ä¿¡æ¯ï¼ŒåŒæ—¶è¢«ã€newenergybg-serviceã€‘å’Œã€newenergy-web-adminã€‘ä¾èµ–
ã€newenergybg-serviceã€‘æ˜¯ã€newenergy-apiã€‘çš„å®ç°ï¼Œå®é™…çš„æœåŠ¡ç«¯ï¼›
ã€newenergy-web-adminã€‘æ¥æ”¶å‰ç«¯è¯·æ±‚ï¼ˆé˜²æ­¢æš´éœ²å®é™…æœåŠ¡ç«¯ï¼‰ï¼Œä» maven è·å– jar åŒ…åå°„è·å–æ¥å£å’Œå®ä½“ç±»ä¿¡æ¯ã€‚
* å‚æ•°ä¿¡æ¯ï¼š
Apiæ–¹æ³•ä¸­ï¼šXXXRequestã€XXXResponse
ä¸šåŠ¡å±‚ï¼šXXXBO
æŒä¹…å±‚ï¼šç›´æ¥ä¸æ•°æ®åº“äº¤äº’ XXXDO
å®é™…ä¸Šï¼Œç”±äºéœ€è¦è¿”å›çš„æ•°æ®æ˜¯ç”±å¤šè¡¨æŸ¥è¯¢è€Œæ¥ï¼Œä»»ä¸€ BO æˆ– DO éƒ½æ²¡æ³•æ¶µç›–æ‰€æœ‰å±æ€§å­—æ®µã€‚æ‰€ä»¥æ–°å¢ä¸€ä¸ª åˆ†é¡µæŸ¥è¯¢entityç±» ConvCallbackRuleDailyReportPageItemï¼Œè¦åœ¨ mapper.xml é‡Œä¿®æ”¹ resultMap ä¸­æŸ¥è¯¢æ•°æ®ä¸è¿”å›å€¼çš„å¯¹åº”å…³ç³»ï¼Œåœ¨åç»­æ•°æ®è½¬æ¢çš„è¿‡ç¨‹ä¸­ä¸»è¦å‰åç±»çš„å­—æ®µçš„å¯¹åº”ã€‚
* ã€é›†æˆæµ‹è¯•ã€‘æœ¬åœ°å¯åŠ¨newenergybg-serviceæœåŠ¡å’Œnewenergy-web-adminæœåŠ¡ï¼Œé€šè¿‡postmanè°ƒç”¨æ¥å£è¿›è¡Œæµ‹è¯•ï¼ŒæœŸæœ›ç»“æœæ˜¯ï¼ŒæŸ¥å‡ºæ¥çš„ç»“æœä¸æ•°æ®åº“ä¸­çš„æ•°æ®ä¸€è‡´ã€‚
å®é™…è¯·æ±‚å‘é€æµç¨‹ä¸ºï¼šå‰ç«¯å®¢æˆ·ç«¯ç¨‹åºå‘èµ·è¯·æ±‚ ->ã€newenergy-web-adminã€‘XXXWebApi.page -> ã€newenergybg-serviceã€‘XXXApiImpl.page -> ã€newenergybg-serviceã€‘XXXServiceImpl.page -> ã€newenergybg-serviceã€‘ XXXMapper.selectByExample
æµ‹è¯•æ–¹æ³•ï¼šæ‰“æ–­ç‚¹ï¼Œè§‚å¯Ÿè·å–å’Œå¤„ç†çš„æ•°æ®ä» mapper->serviceImpl->apiImpl ä¸­çš„å˜åŒ–ï¼Œæ³¨æ„æ•°æ®è½¬æ¢è¿‡ç¨‹
ä½¿ç”¨ postman ç»™æœ¬åœ°æœåŠ¡å‘é€è¯·æ±‚ï¼Œå¦‚ localhost:1087/service/conv-callback-rule-daily-report/pageï¼Œåœ¨ Body æºå¸¦ raw çš„ json æ•°æ®
* æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“develop-caifåˆ†æ”¯
* åœ¨ Yapi ç¼–å†™æ¥å£æ–‡æ¡£ -->

<h2 id="02-22"><a href="#02-22" class="headerlink" title="02.22"></a>02.22</h2><ul>
<li>YY yy &#x3D; BeanMapperUtil.map(xx, YY.class); ä»xxå¤åˆ¶å±æ€§å€¼è€Œæ¥ç”ŸæˆYYç±»å‹çš„å®ä¾‹yy</li>
<li>List<ConvCallbackRuleDailyReportResponse> list &#x3D; page.getList().stream().map(this::toResponse).collect(Collectors.toList());<br>  Javaä¸­çš„Stream API æ˜¯ä¸€ç§ç”¨äºå¤„ç†é›†åˆæ•°æ®çš„å¼ºå¤§å·¥å…·ï¼Œåœ¨ Java 8 ä¸­å¼•å…¥ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä»¥å£°æ˜æ€§æ–¹å¼å¤„ç†æ•°æ®é›†åˆï¼ˆå³ä½ å¯ä»¥æè¿°ä½ æƒ³è¦åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯æè¿°å¦‚ä½•å»åšï¼‰,å®ƒä½¿å¾—é›†åˆæ“ä½œæ›´åŠ ç®€æ´ã€æ˜“è¯»å’Œé«˜æ•ˆã€‚<ul>
<li>åˆ›å»º Streamï¼šä½ å¯ä»¥ä»é›†åˆï¼ˆå¦‚ Listã€Set ç­‰ï¼‰åˆ›å»º Streamï¼Œæˆ–è€…ä»æ•°ç»„åˆ›å»ºã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>);  </span><br><span class="line">Stream&lt;String&gt; stream = list.stream();  </span><br><span class="line"><span class="comment">// æˆ–è€…ç›´æ¥ä»æ•°ç»„åˆ›å»º  </span></span><br><span class="line">Stream&lt;String&gt; arrayStream = Arrays.stream(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>&#125;);</span><br></pre></td></tr></table></figure></li>
<li>ä¸­é—´æ“ä½œï¼šæ˜¯è¿”å›æ–° Stream çš„æ“ä½œï¼Œå®ƒä»¬å¯ä»¥é“¾æ¥èµ·æ¥å½¢æˆä¸€ä¸ªå¤„ç†é“¾ã€‚å¸¸è§çš„ä¸­é—´æ“ä½œæœ‰ filterã€mapã€sorted ç­‰ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>);  </span><br><span class="line">    List&lt;String&gt; result = list.stream()  </span><br><span class="line">                        .filter(s -&gt; s.matches(<span class="string">&quot;[a-c]+&quot;</span>))  <span class="comment">// è¿‡æ»¤å‡ºä»¥ a-c å¼€å¤´çš„å­—ç¬¦ä¸²  </span></span><br><span class="line">                        .map(String::toUpperCase)         <span class="comment">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™  </span></span><br><span class="line">                        .sorted()                          <span class="comment">// å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åº  </span></span><br><span class="line">                        .collect(Collectors.toList());     <span class="comment">// æ”¶é›†åˆ°æ–°çš„ List ä¸­  </span></span><br></pre></td></tr></table></figure></li>
<li>ç»ˆç«¯æ“ä½œï¼šç»“æŸ Stream å¤„ç†å¹¶è¿”å›ç»“æœã€‚å¸¸è§çš„ç»ˆç«¯æ“ä½œæœ‰ forEachã€reduceã€collect ç­‰ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>);  </span><br><span class="line"><span class="comment">// ä½¿ç”¨ forEach éå† Stream  </span></span><br><span class="line">list.stream().forEach(System.out::println);  </span><br><span class="line"><span class="comment">// ä½¿ç”¨ reduce å¯¹ Stream ä¸­çš„å…ƒç´ è¿›è¡Œå½’çº¦æ“ä½œï¼Œä¾‹å¦‚æ±‚å’Œ  </span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> list.stream().mapToInt(Integer::parseInt).sum();  </span><br><span class="line">System.out.println(sum);  <span class="comment">// è¾“å‡ºï¼š6ï¼ˆ&#x27;a&#x27;ã€&#x27;b&#x27;ã€&#x27;c&#x27;ã€&#x27;d&#x27; çš„ ASCII ç ä¹‹å’Œï¼‰  </span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ collect å°† Stream ä¸­çš„å…ƒç´ æ”¶é›†åˆ°æ–°çš„é›†åˆä¸­  </span></span><br><span class="line">List&lt;String&gt; collectedList = list.stream().collect(Collectors.toList());  </span><br><span class="line">System.out.println(collectedList);  <span class="comment">// è¾“å‡ºï¼š[a, b, c, d]</span></span><br></pre></td></tr></table></figure></li>
<li>å¹¶è¡Œ Streamï¼šJava Stream API è¿˜æ”¯æŒå¹¶è¡Œå¤„ç†ï¼Œè¿™å¯ä»¥å……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ï¼Œæé«˜å¤„ç†é€Ÿåº¦ã€‚è¦åˆ›å»ºä¸€ä¸ªå¹¶è¡Œ Streamï¼Œä½ å¯ä»¥ä½¿ç”¨ parallelStream() æ–¹æ³•ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>);  </span><br><span class="line"><span class="comment">// ä½¿ç”¨ parallelStream åˆ›å»ºå¹¶è¡Œ Stream  </span></span><br><span class="line">List&lt;String&gt; collectedList = list.parallelStream().collect(Collectors.toList());  </span><br><span class="line">System.out.println(collectedList);  <span class="comment">// è¾“å‡ºï¼š[a, b, c, d]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>åœ¨Javaä¸­ï¼ŒStreamæµå’Œåºåˆ—åŒ–æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œä½†å®ƒä»¬åœ¨æŸäº›åœºæ™¯ä¸‹å¯ä»¥ç›¸äº’å…³è”ã€‚<ul>
<li>Streamæµæ˜¯Java 8å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä»¥å£°æ˜æ€§æ–¹å¼å¤„ç†æ•°æ®é›†åˆã€‚Stream APIæä¾›äº†ä¸€ç§é«˜æ•ˆä¸”ç®€æ´çš„æ–¹å¼æ¥å¤„ç†æ•°æ®ï¼Œä¾‹å¦‚è¿‡æ»¤ã€æ˜ å°„ã€æ’åºå’Œèšåˆç­‰æ“ä½œã€‚Streamæµä¸»è¦å…³æ³¨çš„æ˜¯æ•°æ®çš„å¤„ç†å’Œè½¬æ¢ï¼Œè€Œä¸æ˜¯æ•°æ®çš„å­˜å‚¨æˆ–ä¼ è¾“ã€‚</li>
<li>åºåˆ—åŒ–ï¼ˆSerializationï¼‰åˆ™æ˜¯å°†å¯¹è±¡çš„çŠ¶æ€è½¬æ¢ä¸ºå­—èŠ‚æµçš„è¿‡ç¨‹ï¼Œä»¥ä¾¿å¯ä»¥å°†è¿™äº›å­—èŠ‚æµæŒä¹…åŒ–ä¿å­˜æˆ–é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å…¶ä»–ä½ç½®ã€‚åºåˆ—åŒ–å…è®¸æˆ‘ä»¬å°†å¯¹è±¡çš„çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œç„¶ååœ¨éœ€è¦æ—¶æ¢å¤å¯¹è±¡çš„çŠ¶æ€ã€‚Javaæä¾›äº†ObjectOutputStreamå’ŒObjectInputStreamç±»æ¥è¿›è¡Œå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</li>
<li>è™½ç„¶Streamæµå’Œåºåˆ—åŒ–æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œä½†å®ƒä»¬åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥ç›¸äº’ç»“åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ä¸ªä½ç½®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°†å¯¹è±¡åºåˆ—åŒ–ä¸ºå­—èŠ‚æµï¼Œç„¶åä½¿ç”¨Streamæµæ¥å¤„ç†å’Œè½¬æ¢è¿™äº›å­—èŠ‚æµã€‚åœ¨æ¥æ”¶ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Streamæµæ¥è¯»å–å­—èŠ‚æµï¼Œå¹¶ä½¿ç”¨ååºåˆ—åŒ–æ¥æ¢å¤å¯¹è±¡çš„çŠ¶æ€ã€‚</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/01/04/%E9%AA%8F%E4%BC%AFJunbo/" data-id="cmjzvj9mh000xhgv57hf75q0c" data-title="éª ä¼¯ Junbo" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-æ˜¥æ‹›2024" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/20/%E6%98%A5%E6%8B%9B2024/" class="article-date">
  <time class="dt-published" datetime="2023-10-20T03:11:00.000Z" itemprop="datePublished">2023-10-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/20/%E6%98%A5%E6%8B%9B2024/">æ˜¥ æ‹› 2024</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <img src="https://www.helloimg.com/i/2025/05/05/68182a0bb5ca3.png" width="550" height="300" alt="">

<h2 id="æ•™è‚²ç»å†"><a href="#æ•™è‚²ç»å†" class="headerlink" title="æ•™è‚²ç»å†"></a>æ•™è‚²ç»å†</h2><p><strong>GPA: 3.31</strong>(<em>3.34</em>)<sup>2020.09 - 2024.07</sup><br><strong>ä¸»ä¿®è¯¾ç¨‹ï¼š</strong>æ•°æ®ç»“æ„(90), è®¡ç®—æœºç½‘ç»œ(84), æ•°æ®åº“(87), æ“ä½œç³»ç»Ÿ, C++(94), Java<br><strong>åœ¨æ ¡ç»å†ï¼š</strong>æ›¾è·å­¦æ ¡ä¸ä¼ä¸šå¥–å­¦é‡‘, â€œä¸‰å¥½å­¦ç”Ÿâ€ç­‰è£èª‰ï¼Œå‘è¡¨ EI ä¼šè®®è®ºæ–‡ä¸€ç¯‡ã€‚æ›¾åŠ å…¥å­¦é™¢é’é©¬å·¥ç¨‹ç­å­¦ä¹ ï¼Œæ‹…ä»»åå·¥é’å¹´å¿—æ„¿è€…æŒ‡å¯¼ä¸­å¿ƒå®£ä¼ éƒ¨å‰¯éƒ¨é•¿ï¼Œæœ‰ä¸°å¯Œçš„å¿—æ„¿æ´»åŠ¨å’Œå­¦ç”Ÿç»„ç»‡ç»å†ã€‚<br><strong>è¯­è¨€æŠ€èƒ½ï¼š</strong>CET-6 <em><strong>486</strong></em><sup>2022.06</sup> CET4ï¼š530<sup>2021.06</sup><br><strong>è£èª‰å¥–é¡¹ï¼š</strong>äº”ç²®æ¶²ä¼˜ç§€å­¦ç”Ÿå¥–å­¦é‡‘ (2023.10)ï¼Œåå—ç†å·¥å¤§å­¦ä¸‰ç­‰å¥–å­¦é‡‘ (2022.09)ï¼Œå¹¿ä¸œçœç¬¬åä¸€å±Šå¤§è¿ä¼šâ€œä¼˜ç§€å¿—æ„¿è€…â€ (2022.06)<br>2022â€”2023å­¦å¹´åº¦ â€œä¸‰å¥½å­¦ç”Ÿâ€Ã—ï¼Œæ ¡çº§â€œä¼˜ç§€å…¬ç›Šç»„ç»‡éª¨å¹²â€ï¼Œâ€é’é©¬å·¥ç¨‹â€ç­ä¼˜ç§€å­¦å‘˜<br>2021â€”2022å­¦å¹´åº¦ â€œä¸‰å¥½å­¦ç”Ÿâ€ï¼Œâ€œä¸¤ä¼˜ä¸¤çº¢ä¼˜ç§€å…±é’å›¢å‘˜â€<br><strong>Publicationsï¼š</strong><br>[1] Feng Cai, Jingxu Peng, Peng Zhou, â€œCurrent Study on Image Restoration Leveraging CNNs and GANsâ€, <strong>2024.02.14</strong>, 2023 International Conference on Data Science, Advanced Algorithm and Intelligent Computing (DAI 2023)<br>è¿‘å¹´æ¥ï¼Œå›¾åƒæ¢å¤æŠ€æœ¯ä¸­CNNå’ŒGANåº”ç”¨å¹¿æ³›ã€‚DnCNNæ¨¡å‹é€šè¿‡æ®‹å·®å’Œæ‰¹é‡å½’ä¸€åŒ–æœ‰æ•ˆå»å™ªåœ°éœ‡å›¾åƒã€‚SRGANä½¿ç”¨GANå’Œæ„ŸçŸ¥æŸå¤±å‡½æ•°æé«˜å›¾åƒè´¨é‡ã€‚Constrained-DnCNNæ¨¡å‹è¿›ä¸€æ­¥ä¼˜åŒ–åœ°éœ‡æ•°æ®è§£è¯»ã€‚CR-SRGANä¸“æ³¨äºæ–‡ç‰©è¶…åˆ†è¾¨ç‡å’Œé¢œè‰²æ¢å¤ï¼Œé‡‡ç”¨ç‰¹æ®Šçš„è®­ç»ƒæ•°æ®é›†ã€‚DCGANç»“åˆCNNå’ŒGANç‰¹ç‚¹ï¼Œå±•ç°å‡ºåœ¨ç‰¹å¾æå–å’Œé€‚åº”æ•°æ®åˆ†å¸ƒæ–¹é¢çš„ä¼˜åŠ¿ï¼Œæ˜¯å›¾åƒæ¢å¤é¢†åŸŸçš„æœ‰å‰æ™¯ç ”ç©¶æ–¹å‘ã€‚ <a target="_blank" rel="noopener" href="https://www.atlantis-press.com/proceedings/dai-23/125998064">https://www.atlantis-press.com/proceedings/dai-23/125998064</a> </p>
<h2 id="ä¸“ä¸šæŠ€èƒ½"><a href="#ä¸“ä¸šæŠ€èƒ½" class="headerlink" title="ä¸“ä¸šæŠ€èƒ½"></a>ä¸“ä¸šæŠ€èƒ½</h2><h4 id="Java-åç«¯æ–¹å‘ï¼š"><a href="#Java-åç«¯æ–¹å‘ï¼š" class="headerlink" title="Java åç«¯æ–¹å‘ï¼š"></a>Java åç«¯æ–¹å‘ï¼š</h4><ul>
<li>ç†Ÿç»ƒæŒæ¡ Java åŸºç¡€ï¼Œé›†åˆç­‰ç›¸å…³çŸ¥è¯†ï¼Œäº†è§£å¸¸è§çš„è®¾è®¡æ¨¡å¼ã€‚</li>
<li>ç†Ÿæ‚‰ JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€ç±»åŠ è½½æœºåˆ¶åŠ Java çš„å†…å­˜åŒºåŸŸã€‚</li>
<li>ç†Ÿæ‚‰ Java å¹¶å‘ç¼–ç¨‹ï¼ŒæŒæ¡JUCä¸­å¸¸ç”¨çš„å·¥å…·ç±»ï¼Œå¦‚ ConcurrentHashMap ç­‰ï¼Œç†Ÿæ‚‰å¤šçº¿ç¨‹ï¼Œçº¿ç¨‹æ± ï¼ŒJava å†…å­˜æ¨¡å‹ã€‚</li>
<li>ç†Ÿæ‚‰ OSI ä¸ƒå±‚æ¨¡å‹å’Œ TCP&#x2F; IP å››å±‚ä½“ç³»åˆ†å±‚ç»“æ„ï¼ŒæŒæ¡å¸¸è§ç½‘ç»œåè®®ï¼Œå¦‚ HTTP&#x2F; HTTPSã€TCPã€UDPã€DNSç­‰ã€‚</li>
<li>ç†Ÿç»ƒä½¿ç”¨ MySQL æ•°æ®åº“ï¼Œç†Ÿæ‚‰ MySQL ç´¢å¼•ã€äº‹åŠ¡ã€å­˜å‚¨å¼•æ“ã€é”æœºåˆ¶ã€‚</li>
<li>ç†Ÿæ‚‰æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹é€šä¿¡ã€æ­»é”ã€å†…å­˜ç®¡ç†ç­‰çŸ¥è¯†ã€‚äº†è§£Linux å¸¸ç”¨å‘½ä»¤ã€‚</li>
<li>ç†Ÿæ‚‰ Redis æ•°æ®ç±»å‹ä½¿ç”¨åœºæ™¯å’Œå†…éƒ¨å®ç°ï¼Œç†Ÿæ‚‰æŒä¹…åŒ–å’Œè¿‡æœŸæ·˜æ±°ç­–ç•¥ï¼Œç†Ÿæ‚‰ç¼“å­˜é«˜å¹¶å‘åœºæ™¯ã€‚</li>
<li>ç†Ÿæ‚‰ RabbitMq çš„ä½¿ç”¨ï¼Œäº†è§£æ¶ˆæ¯å¯é æ€§çš„ä¿è¯ã€æ­»ä¿¡é˜Ÿåˆ—ã€å»¶æ—¶é˜Ÿåˆ—ç­‰ï¼Œäº†è§£ Kafka çš„åŸºæœ¬ä½¿ç”¨</li>
<li>ç†Ÿç»ƒä½¿ç”¨ Spring Bootã€Springã€MybatisPlus ç­‰å¸¸ç”¨æ¡†æ¶ï¼Œç†Ÿæ‚‰ Spring IOC ã€AOP åŸç†ï¼Œäº†è§£ Nacos ã€Zookeeper ç­‰å¸¸è§ç»„ä»¶ã€‚</li>
<li>äº†è§£ SpringCloud å¸¸ç”¨çš„å¾®æœåŠ¡ç»„ä»¶åŠå…¶ä½¿ç”¨;å¦‚NacosRibbonFeignã€HystrixGatewayç­‰</li>
<li>æ•°æ®ç»“æ„ï¼šäº†è§£å¸¸è§æ•°æ®ç»“æ„å¦‚æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€äºŒå‰æ ‘ç­‰;ç†Ÿæ‚‰å¸¸ç”¨ç®—æ³•å¦‚åŒæŒ‡é’ˆã€é€’å½’ã€æ’åºç®—æ³•ç­‰</li>
</ul>
<h2 id="å®ä¹ ç»å†"><a href="#å®ä¹ ç»å†" class="headerlink" title="å®ä¹ ç»å†"></a>å®ä¹ ç»å†</h2><ul>
<li><p><strong>å¹¿å·éªä¼¯ç½‘ç»œç§‘æŠ€æœ‰é™å…¬å¸</strong>_Javaå¼€å‘å®ä¹ ç”Ÿ_2024å¹´01æœˆ~è‡³ä»Š_å¹¿å·</p>
<ul>
<li>ä¸»è¦å·¥ä½œï¼š<ul>
<li>å‚ä¸ç”¨æˆ·æ‹‰æ–°ç³»ç»Ÿçš„å¼€å‘ã€‚å½“ç”¨æˆ·ç‚¹å‡»æˆ‘æ–¹æŠ•æ”¾çš„å¹¿å‘Šåï¼Œå°†æ¶ˆæ¯æ¨é€åˆ°æ‹‰æ–°ç³»ç»Ÿçš„ mq é˜Ÿåˆ—ä¸­ï¼Œæˆ‘æ–¹ä½œä¸ºæ¶ˆæ¯çš„æ¶ˆè´¹è€…è¿›è¡Œæ¶ˆæ¯æ‹¦æˆªå’Œè½¬å‘ã€‚é€šè¿‡ Kafka è¿›è¡Œå‰Šå³°å¤„ç†ï¼Œé¿å… QPS è¿‡é«˜å¯¼è‡´çš„ç³»ç»Ÿè´Ÿæ‹…ã€‚</li>
<li>å¼€å‘ç™½åå•åŠŸèƒ½ã€‚åœ¨æ¶ˆæ¯è½¬å‘çš„è¿‡ç¨‹ä¸­ï¼Œå…ˆä»æœ¬åœ°ç¼“å­˜åŠ Redis ä¸­æŸ¥çœ‹ç™½åå•æ•°æ®ï¼Œæœªå‘½ä¸­åˆ™è°ƒç”¨ç›¸å…³æ¥å£æ‹¦æˆªéç›®æ ‡ç”¨æˆ·ã€‚åœ¨ç™½åå•ä¸­æ·»åŠ æˆ‘å‘çš„æµ‹è¯•æ‰‹æœºè®¾å¤‡å·ï¼Œä»è€Œåœ¨æŠ•æ”¾æ–°çš„å¹¿å‘Šåè¿›è¡Œè”è°ƒæµ‹è¯•ã€‚</li>
<li>å‚ä¸å†…éƒ¨æŠ¥è¡¨å¹³å°çš„å¼€å‘ã€‚æ ¹æ®äº§å“åŸå‹å›¾è®¾è®¡æ•°æ®åº“è¡¨ï¼Œå¼€å‘æŠ¥è¡¨æ•°æ®çš„åˆ†é¡µæŸ¥è¯¢æ¥å£ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>å¹¿ä¸œåˆ›ä¸–ç§‘æŠ€æœ‰é™å…¬å¸</strong>__Javaå¼€å‘å®ä¹ ç”Ÿ__2023.03-2023.05__å¹¿å·<br>ç‰™åŒ»æ˜Ÿçƒå°ç¨‹åºï¼šè´Ÿè´£â€ä¸ªäººä¸­å¿ƒâ€éƒ¨åˆ†æ¥å£ä»¥åŠç›¸å…³æ•°æ®åº“å­—æ®µçš„è®¾è®¡ï¼Œå®ç°äº†åœ¨çº¿è§†é¢‘çš„å¼¹å¹•åŠŸèƒ½ã€‚<br>å¹¿ä¸œçœé’å°‘å¹´ç§‘æŠ€åˆ›å®¢å¤§èµ›ç³»ç»Ÿï¼šå‚ä¸äº†è¯¥åœ¨çº¿ç¼–ç¨‹ç«èµ›å¹³å°çš„å­¦ç”Ÿç«¯åŠŸèƒ½å¼€å‘ã€‚åœ¨å·²æœ‰é¡¹ç›®çš„åŸºç¡€ä¸Šï¼Œç¼–å†™å®Œå–„äº†å­¦ç”Ÿç™»å½•ã€ç¼–ç¨‹é¢˜åˆ¤é¢˜ç­‰æ–¹é¢çš„ä»£ç ã€‚ç†Ÿæ‚‰äº†å›¢é˜Ÿå¼€å‘æµç¨‹ä»¥åŠ git çš„æ—¥å¸¸å¼€å‘ä½¿ç”¨ã€‚</p>
</li>
<li><p><strong>ä¸­å›½ç”µä¿¡è‚¡ä»½æœ‰é™å…¬å¸ä¸œèåˆ†å…¬å¸</strong>__ITå¼€å‘å·¥ç¨‹å¸ˆ__2023.07-2023.08__ä¸œè<br>å‚ä¸ç”µä¿¡AIçŸ¥è¯†åº“çš„å»ºè®¾ï¼Œæ‰“é€ ç”µä¿¡ä¸šåŠ¡ä¸“å®¶æ°´å¹³çš„å¯¹è¯æœºå™¨äººã€‚è´Ÿè´£æµ‹è¯•æœ¬åœ°çŸ¥è¯†åº“ï¼Œå®Œå–„çŸ¥è¯†äº‘æ–‡æ¡£ï¼Œä»¥åŠæ”¶é›†èµ„æ–™ä¾›å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚æ­¤å¤–ï¼Œæ¥è§¦äº†å¼€æºé¡¹ç›®ï¼Œå­¦ä¹ äº†æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚</p>
</li>
</ul>
<h2 id="é¡¹ç›®ç»å†"><a href="#é¡¹ç›®ç»å†" class="headerlink" title="é¡¹ç›®ç»å†"></a>é¡¹ç›®ç»å†</h2><h4 id="â€œæ ¡è·‘è·‘â€æ ¡å›­ä»£æ‹¿å¹³å°"><a href="#â€œæ ¡è·‘è·‘â€æ ¡å›­ä»£æ‹¿å¹³å°" class="headerlink" title="â€œæ ¡è·‘è·‘â€æ ¡å›­ä»£æ‹¿å¹³å°"></a>â€œæ ¡è·‘è·‘â€æ ¡å›­ä»£æ‹¿å¹³å°</h4><ul>
<li>é¡¹ç›®æè¿°ï¼šâ€æ ¡è·‘è·‘â€å¹³å°æ˜¯ä¸€æ¬¾è‡´åŠ›äºè§£å†³å¤§å­¦æ ¡å›­å†…ä»£æ‹¿æœåŠ¡éœ€æ±‚çš„åˆ›æ–°å‹åº”ç”¨ï¼Œæä¾›æ–¹ä¾¿å¿«æ·çš„å¤–å–ã€å¿«é€’ã€æ–‡ä»¶ç­‰ä»£æ‹¿ä¸šåŠ¡ï¼ŒåŒæ—¶ç¡®ä¿æ”¯ä»˜åŒæ–¹çš„ä¿¡ç”¨å’Œæµç¨‹çš„å¯è·Ÿè¸ªã€‚</li>
<li>ä¸»è¦å·¥ä½œï¼š<ul>
<li>åœ¨ä»»åŠ¡å‘å¸ƒæ¨¡å—ï¼Œé€šè¿‡äº§å“åŸå‹æ€»ç»“å‡ºä»£æ‹¿æœåŠ¡ä»»åŠ¡æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨åŒå€¼æšä¸¾çš„æ–¹å¼å¯¹ç±»å‹ã€æ•°é‡ã€çŠ¶æ€ç­‰è¿›è¡Œå­˜å‚¨ã€‚</li>
<li>åœ¨ä»»åŠ¡åˆ—è¡¨æ¨¡å—ï¼Œå®ç°äº†å¤šç­›é€‰å’Œå¤šæ’åºæ¡ä»¶ä¸‹çš„åŠ¨æ€åˆ†é¡µåˆ—è¡¨æŸ¥è¯¢ã€‚</li>
<li>ä½¿ç”¨æ•°æ®åº“æ‚²è§‚é”ï¼Œè§£å†³åŒä¸€è·‘è…¿ä»»åŠ¡çš„è¶…å–è®¢å•é—®é¢˜ï¼Œå®ç°æŠ¢å•å”¯ä¸€ã€‚Â </li>
<li>ä¸ºä»£æ‹¿åŒæ–¹çš„é™Œç”ŸäººæœåŠ¡å®‰å…¨æ€§ï¼Œå¯¹æ¯ä¸ªçŠ¶æ€è¿›è¡Œæµæ°´è®°å½•ã€‚æµç¨‹çŠ¶æ€åˆ‡æ¢ä¸­å®ç°äº†ç…§ç‰‡ä¸Šä¼ çš„å¯é æ€§ï¼Œä¸ºäº†èŠ‚çœæœåŠ¡å™¨å¸¦å®½ï¼Œä½¿ç”¨è…¾è®¯äº‘ COS ç›´ä¼ æ–¹æ¡ˆï¼Œæä¾›é¢„ç­¾åç»™å‰ç«¯ï¼Œä¿éšœäº† COS çš„å®‰å…¨æ€§ã€‚</li>
<li>åœ¨æ¥å•å‰ï¼Œéœ€è¦æ¥å•äººæ”¯ä»˜æŠ¼é‡‘ï¼Œå®ç°è·‘è…¿äººæŠ¼é‡‘çš„æ”¯ä»˜ã€æŠ¼é‡‘é€€è¿˜çš„äº‹åŠ¡å¤„ç†ã€‚</li>
</ul>
</li>
</ul>
<h4 id="é«˜æ ¡é—²ç½®èµ„æºäº¤æ˜“ç³»ç»Ÿ"><a href="#é«˜æ ¡é—²ç½®èµ„æºäº¤æ˜“ç³»ç»Ÿ" class="headerlink" title="é«˜æ ¡é—²ç½®èµ„æºäº¤æ˜“ç³»ç»Ÿ"></a>é«˜æ ¡é—²ç½®èµ„æºäº¤æ˜“ç³»ç»Ÿ</h4><ul>
<li>ç³»ç»Ÿæ¶æ„ï¼šSpringCloud + SpringBoot + Nacos + Redis + MySQL</li>
<li>é¡¹ç›®æè¿°ï¼šç³»ç»Ÿé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæ—¨åœ¨ä¸ºæ¶ˆè´¹è€…æä¾›ä¸€ç«™å¼å•†å“äº¤æ˜“å¹³å°ã€‚é€šè¿‡ç»†è‡´çš„ä¸šåŠ¡åˆ’åˆ†ï¼Œç³»ç»Ÿåˆ†ä¸ºç”¨æˆ·æ¨¡å—ã€å•†å“æ¨¡å—ã€è´­ç‰©è½¦æ¨¡å—ä¸æ”¯ä»˜æ¨¡å—ï¼Œç¡®ä¿æ¯ä¸ªæ¨¡å—æœåŠ¡çš„é«˜æ•ˆã€å¯ç»´æŠ¤ã€å¯æ‰©å±•ã€‚</li>
<li>ä¸»è¦å·¥ä½œï¼š<ul>
<li>ä½¿ç”¨ Nacos å®ç°æœåŠ¡æ³¨å†Œï¼Œæ¶ˆè´¹è€…æœåŠ¡é€šè¿‡ Nacos æ‹‰å–å’Œè®¢é˜…æœåŠ¡ã€‚</li>
<li>å¼•å…¥ Redis æ•°æ®åº“ï¼Œä¼˜åŒ–é¡¹ç›®ä¸­ç™»å½•éªŒè¯ç çš„ä½¿ç”¨ï¼Œå¯¹éœ€è¦é¢‘ç¹è®¿é—®çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚</li>
<li>ä½¿ç”¨ Gateway åŠæ‹¦æˆªå™¨å®ç°äº†ç™»å½•ä¿¡æ¯æ ¡éªŒï¼Œé¿å…å„å¾®æœåŠ¡ä¸­çš„ä»£ç é‡å¤ã€‚</li>
<li>é€šè¿‡ Sentinel å®Œæˆç³»ç»Ÿé™æµç†”æ–­åŠŸèƒ½ï¼Œé˜²æ­¢æœåŠ¡æ•…éšœåå½±å“æ•´ä¸ªç³»ç»Ÿè¿è¡Œã€‚</li>
</ul>
</li>
</ul>
<!-- #### å°šåŒ»ç–—ã€ã€ã€

* é¡¹ç›®æ¶æ„ï¼šSpringBootã€SpringCloudã€Nacosã€Gatewayã€Feignã€MyBatis-Plusã€Redisã€RabbitMQã€Nginxã€å¾®ä¿¡ä¸‰æ–¹ç™»å½•ã€EasyExcelã€é˜¿é‡Œäº‘SMS
* é¡¹ç›®ç®€ä»‹ï¼šå°šåŒ»ç–—å¹³å°æ˜¯ä¸€æ¬¾äº’è”ç½‘åœ¨çº¿é¢„çº¦æŒ‚å·å¹³å°ï¼Œä»¥äº’è”ç½‘æ‰‹æ®µè¿æ¥åŒ»é™¢ã€åŒ»ç”Ÿå’Œæ‚£è€…,ä¸ºç”¨æˆ·å®ç°ç½‘ä¸Šå°±èƒ½è½»æ¾çš„é¢„çº¦æŒ‚å·ï¼Œç¼“è§£çœ‹ç—…éš¾ã€æŒ‚å·éš¾çš„å°±åŒ»éš¾é¢˜ã€‚
* é¡¹ç›®ä¸»è¦ç”±åå°ç®¡ç†ç³»ç»Ÿå’Œå‰å°ç”¨æˆ·ç³»ç»Ÿ2å¤§éƒ¨åˆ†ç»„æˆã€‚
1.åå°ç®¡ç†éƒ¨åˆ†æ ¸å¿ƒæ¨¡å—: åŒ»é™¢è®¾ç½®ç®¡ç†ã€æ•°æ®å­—å…¸ã€ç”¨æˆ·ç®¡ç†ã€è®¢å•ç®¡ç†ã€ç»Ÿè®¡ç®¡ç†ä»¥åŠæƒé™æ§åˆ¶ç­‰åŠŸèƒ½ã€‚
2.ç”¨æˆ·å‰å°ä½¿ç”¨éƒ¨åˆ†çš„æ ¸å¿ƒæ¨¡å—ï¼š åŒ»é™¢åˆ—è¡¨å±•ç¤ºã€åŒ»é™¢ç§‘å®¤è¯¦æƒ…å±•ç¤ºã€ç”¨æˆ·æ‰‹æœºå·æˆ–å¾®ä¿¡ç™»å½•ã€ç”¨æˆ·å®åè®¤è¯ã€å°±è¯Šäººç®¡ç†ã€é¢„çº¦æŒ‚å·ä»¥åŠå°±åŒ»æé†’ç­‰åŠŸèƒ½ã€‚


#### æ‰‹å†™Springã€ã€ã€
é¡¹ç›®åç§°ï¼šæ‰‹å†™ Spring
é¡¹ç›®æ¶æ„ï¼šSpring Framework
é¡¹ç›®æè¿°ï¼šSpring æ˜¯ Java åº”ç”¨ç¼–ç¨‹å¼€å‘ä¸­ï¼Œéå¸¸å¸¸ç”¨çš„æŠ€æœ¯æ¡†æ¶ã€‚åœ¨ Spring æ¡†æ¶ä¸‹ï¼Œå…¶ä»–çš„ç»„ä»¶éƒ½éœ€è¦è¿›è¡Œæ‰©å±•ä¾èµ–æ³¨å…¥åˆ° Spring å®¹å™¨è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚åŒæ—¶æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œ80%çš„é—®é¢˜åœºæ™¯ï¼Œéƒ½éœ€è¦è°ƒè¯•åˆ° Spring çš„æºç æ‰èƒ½æ›´å¥½çš„è§£å†³ï¼Œä¸ºæ­¤æ·±åº¦å­¦ä¹  Spring æºç éå¸¸æœ‰å¿…è¦ã€‚
ä¸ªäººæ”¶è·ï¼š
é¦–å…ˆå¯¹ Spring æºç çš„å­¦ä¹ ï¼Œæ˜¯ Spring å¯¹æ•´ä¸ª Bean å¯¹è±¡å£°æ˜å‘¨æœŸæ‰€éœ€èŠ‚ç‚¹çš„æ‹†è§£ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡ç»†åŒ–åˆ°è¿™æ ·çš„ä¸€ä¸ªç¨‹åº¦ï¼Œæ‰èƒ½è®©æˆ‘ä»¬åœ¨ä½¿ç”¨ Spring çš„æ—¶å€™ï¼ŒåŸºäºå¯¹å¤–æš´éœ²çš„æ¥å£å’Œç±»ï¼Œæ›´å¥½çš„æ‰©å±•å„ä¸ªåŠŸèƒ½èŠ‚ç‚¹ã€‚
æŒæ¡äº†æœ€é‡è¦çš„æ¨¡æ¿æ¨¡å¼ï¼ŒSpring Bean å‘¨æœŸå®¹å™¨çš„ä½¿ç”¨ï¼Œå°±æ˜¯æµç¨‹å¤æ‚çš„å¤§æ¨¡æ¿ï¼Œé€šè¿‡æ¨¡æ¿å®šä¹‰äº†å…¨ç³»çš„è°ƒç”¨ç»“æ„ã€‚è¿™æ ·çš„è®¾è®¡ä¹Ÿä¸ºæˆ‘ä»¥ååœ¨å¼€å‘ä¸šåŠ¡ä»£ç æ—¶å€™æä¾›äº†å‚è€ƒå»ºè®®ï¼Œä¸ºæˆ‘ä»¬è‡ªèº«å¤æ‚çš„ä¸šåŠ¡å®šä¹‰å‡ºæ¨¡æ¿ç»“æ„ã€‚
åˆ†æ²»ã€æŠ½è±¡ã€çŸ¥è¯†ï¼ŒSpring æºç ä¸­ï¼Œæœ‰éå¸¸å¤šçš„æ¥å£çš„å®ç°ã€æŠ½è±¡ç±»çš„å®šä¹‰ã€åŠŸèƒ½ç±»çš„ç»§æ‰¿ï¼Œè¿™æ˜¯éå¸¸é‡è¦çš„è®¾è®¡æ‰‹æ®µï¼Œå› ä¸ºå®ƒå¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç å…·æœ‰ç«‹ä½“åŒ–ï¼Œåˆ†å±‚åŒ–ï¼ŒæŠŠå„ä¸ªèŒè´£æ”¾åˆ°ä¸åŒçš„ç±»ç»´æŠ¤å¯ä»¥è®©ä»¥åçš„è¿­ä»£æˆæœ¬æ›´ä½ã€‚
ç»†èŠ‚çš„å­¦ä¹ ï¼ŒSpring æºç ä¸­æœ‰éå¸¸å¤šçš„æŠ€æœ¯ç»†èŠ‚ï¼Œå°¤å…¶æ˜¯åƒEventäº‹ä»¶è®¾è®¡ã€Awareä¾èµ–å€’ç½®ã€AOPåˆ‡é¢å®ç°ã€Beanå¾ªç¯ä¾èµ–ç­‰ï¼Œéƒ½æ˜¯åœ¨ç‰¹å®šå¤æ‚åœºæ™¯ä¸­ä¼˜ç§€çš„è®¾è®¡æ–¹æ¡ˆã€‚è¿™äº›è®¾è®¡æ¨¡å¼ã€è®¾è®¡åŸåˆ™ï¼Œéƒ½å¯ä»¥æŒ‡å¯¼ä¸šåŠ¡ä»£ç å¼€å‘ã€‚ -->


<h4 id="ç‰›å®¢è®ºå›ï¼ˆ-é«˜æ ¡å°±ä¸šä¿¡æ¯åˆ†äº«å¹³å°ï¼‰"><a href="#ç‰›å®¢è®ºå›ï¼ˆ-é«˜æ ¡å°±ä¸šä¿¡æ¯åˆ†äº«å¹³å°ï¼‰" class="headerlink" title="ç‰›å®¢è®ºå›ï¼ˆ-&gt; é«˜æ ¡å°±ä¸šä¿¡æ¯åˆ†äº«å¹³å°ï¼‰"></a>ç‰›å®¢è®ºå›ï¼ˆ-&gt; é«˜æ ¡å°±ä¸šä¿¡æ¯åˆ†äº«å¹³å°ï¼‰</h4><ul>
<li>é¡¹ç›®æè¿°ï¼šä¸€ä¸ªåŸºæœ¬åŠŸèƒ½å®Œæ•´çš„è®ºå›é¡¹ç›®ã€‚ä¸»è¦åŠŸèƒ½æœ‰: åŸºäºé‚®ä»¶æ¿€æ´»çš„æ³¨å†Œæ–¹å¼ï¼ŒåŒºåˆ«ç™»é™†çŠ¶æ€ä¸ºæ¸¸å®¢æˆ–å·²ç™»å½•ç”¨æˆ·å±•ç¤ºä¸åŒç•Œé¢ä¸åŠŸèƒ½ã€‚æ”¯æŒç”¨æˆ·ä¸Šä¼ å¤´åƒï¼Œå®ç°äº†å‘å¸ƒå¸–å­ã€è¯„è®ºå¸–å­ã€å‘é€ç§ä¿¡ä¸è¿‡æ»¤æ•æ„Ÿè¯ç­‰åŠŸèƒ½ï¼Œä»¥åŠç‚¹èµï¼Œå…³æ³¨ä¸ç³»ç»Ÿé€šçŸ¥åŠŸèƒ½ã€‚<br>é¡¹â½¬æ„å»ºåœ¨ Spring Boot + SSM æ¡†æ¶ä¹‹ä¸Šï¼Œå¹¶ç»Ÿâ¼€çš„è¿›â¾äº†çŠ¶æ€ç®¡ç†ã€äº‹åŠ¡ç®¡ç†ã€å¼‚å¸¸å¤„ç†ã€‚<br>ï¼ˆé¡¹ç›®æ˜¯ä¸€ä¸ªä»¥å°±ä¸šä¿¡æ¯åˆ†äº«ä¸ºåŸºç‚¹çš„ä¿¡æ¯åˆ†äº«å¹³å°ï¼Œåœ¨å¹³å°ä¸Šå­¦ç”Ÿå¯è¿›è¡Œå°±ä¸šä¿¡æ¯æˆ–è€…å­¦ä¹ èµ„æºçš„åˆ†äº«ï¼Œå¢åŠ å­¦ä¹ å°±ä¸šä¿¡æ¯çš„è·å–æ¸ é“ï¼Œä¾‹å¦‚ï¼Œå‘å¸ƒå¸–å­ï¼Œå‘å¸ƒæ‹›è˜ä¿¡æ¯ï¼Œå­¦ç”Ÿé—´å¯ä»¥äº’ç›¸å…³æ³¨ï¼Œç§ä¿¡æ¥äº’ç›¸åˆ†äº«èµ„æºã€‚ï¼‰</li>
<li>æ ¸å¿ƒåŠŸèƒ½:<br>1ã€ç”¨æˆ·æ¨¡å—ï¼šä½¿ç”¨ Spring Email è¾…åŠ©å‘é€æ³¨å†Œæ¿€æ´»é‚®ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨ Interceptor æ‹¦æˆªå™¨èµ‹äºˆä¸åŒç±»å‹çš„ç”¨æˆ·æƒé™ï¼Œè§£å†³httpæ— çŠ¶æ€å¸¦æ¥çš„ç¼ºé™·é—®é¢˜ï¼Œä¿æŠ¤éœ€ç™»å½•æ‰èƒ½æŸ¥çœ‹çš„èµ„æºã€‚<br>2ã€å†…å®¹æ¨¡å—ï¼šä½¿ç”¨ Spring AOP é¢å‘åˆ‡é¢ç¼–ç¨‹æ€æƒ³ç»Ÿä¸€è®°å½•æ—¥å¿—ï¼›æ•°æ®åº“è¿æ¥ä½¿ç”¨ Mybatis æ¡†æ¶æ¥å®Œæˆï¼Œå®ç°SQLè¯­å¥å’Œä»£ç çš„åˆ†ç¦»ï¼Œè§£é™¤äº†SQLè¯­å¥ä¸ä»£ç çš„è€¦åˆã€‚<br>3ã€é€šçŸ¥æ¨¡å—ï¼šä½¿ç”¨ Kafka æ¶ˆæ¯é˜Ÿåˆ—æ„å»ºå¼‚æ­¥æ¶ˆæ¯ç³»ç»Ÿï¼Œå®ç°ç‚¹èµå…³æ³¨ä¸é€šçŸ¥ï¼ˆç³»ç»Ÿï¼‰é—´å‰Šå³°ã€‚</li>
<li>é¡¹ç›®ä¼˜åŒ–:<br>1ã€å¼•å…¥ Redis æ•°æ®åº“ï¼Œä¼˜åŒ–é¡¹ç›®ä¸­ Session çš„ä½¿ç”¨å¹¶åˆ©ç”¨ Redis å®ç°ç‚¹èµå’Œå…³æ³¨åŠŸèƒ½ã€‚<br>2ã€ä½¿ç”¨ Caffeine + Redis å®ç°ä¸¤çº§ç¼“å­˜ï¼Œä¼˜åŒ–äº†çƒ­é—¨å¸–å­çš„è®¿é—®ã€‚ï¼ˆå€Ÿç”¨ Jmeter å·¥å…·æµ‹è¯•åæå‡20å€ï¼‰<br>(ä½¿ç”¨ Spring Security æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œé˜²CSRFæ”»å‡»ï¼›ä½¿ç”¨æ‹¦æˆªå™¨è§£å†³ç™»å½•çŠ¶æ€å‰§æ–°åŠé¢‘ç¹åˆ·æ–°é—®é¢˜)</li>
<li>ç»„ä»·æè¿°ï¼š<ul>
<li>é¡¹â½¬æ„å»ºåœ¨ Spring Boot + SSM æ¡†æ¶ä¹‹ä¸Šï¼Œå¹¶ç»Ÿâ¼€çš„è¿›â¾äº†çŠ¶æ€ç®¡ç†ã€äº‹åŠ¡ç®¡ç†ã€å¼‚å¸¸å¤„ç†ï¼›</li>
<li>åˆ©â½¤ Redis å®ç°äº†ç‚¹èµå’Œå…³æ³¨åŠŸèƒ½ï¼Œå•æœºå¯è¾¾5000TPSï¼›ï¼ˆå¯¹é¢‘ç¹éœ€è¦è®¿é—®çš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ä½¿ç”¨Redisä½œä¸ºæœ¬åœ°ç¼“å­˜ï¼Œæé«˜æœåŠ¡å™¨æ€§èƒ½ã€‚é‡‡ç”¨äº‹åŠ¡ç®¡ç†ä¿è¯æ•°æ®çš„æ­£ç¡®ï¼Œé‡‡ç”¨â€œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜â€ç­–ç•¥ä¿è¯æ•°æ®åº“ä¸ç¼“å­˜æ•°æ®çš„ä¸€è‡´æ€§ï¼›ï¼‰</li>
<li>åˆ©â½¤ Kafka å®ç°äº†å¼‚æ­¥çš„ç«™å†…é€šçŸ¥ï¼Œå•æœºå¯è¾¾7000TPSï¼›ï¼ˆåœ¨ç”¨æˆ·è¢«ç‚¹èµã€è¯„è®ºã€å…³æ³¨åï¼Œæ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ï¼Œä»¥ç³»ç»Ÿé€šçŸ¥çš„æ–¹å¼æ¨é€ç»™ç”¨æˆ·ï¼‰</li>
<li>åˆ©â½¤ ElasticSearch å®ç°äº†å…¨â½‚æœç´¢åŠŸèƒ½ï¼Œå¯å‡†ç¡®åŒ¹é…æœç´¢ç»“æœï¼Œå¹¶â¾¼äº®æ˜¾ç¤ºå…³é”®è¯ï¼›</li>
<li>åˆ©â½¤ Caffeine + Redis å®ç°äº†ä¸¤çº§ç¼“å­˜ï¼Œå¹¶ä¼˜åŒ–äº†çƒ­â»”å¸–â¼¦çš„è®¿é—®ï¼Œå•æœºå¯è¾¾8000QPSã€‚</li>
<li>åˆ©â½¤ Spring Security å®ç°äº†æƒé™æ§åˆ¶ï¼Œå®ç°äº†å¤šé‡â»†â¾Šã€URLçº§åˆ«çš„æƒé™ç®¡ç†ï¼›</li>
<li>åˆ©â½¤ HyperLogLogã€Bitmap åˆ†åˆ«å®ç°äº† UVã€ DAU çš„ç»Ÿè®¡åŠŸèƒ½ï¼Œ100ä¸‡â½¤æˆ·æ•°æ®åªéœ€*Må†…å­˜ç©ºé—´ï¼›</li>
<li>åˆ©â½¤ Quartz å®ç°äº†ä»»åŠ¡è°ƒåº¦åŠŸèƒ½ï¼Œå¹¶å®ç°äº†å®šæ—¶è®¡ç®—å¸–â¼¦åˆ†æ•°ã€å®šæ—¶æ¸…ç†åƒåœ¾â½‚ä»¶ç­‰åŠŸnèƒ½ï¼›</li>
<li>åˆ©â½¤ Actuator å¯¹åº”â½¤çš„ Bean ã€ç¼“å­˜ã€â½‡å¿—ã€è·¯å¾„ç­‰å¤šä¸ªç»´åº¦è¿›â¾äº†ç›‘æ§ï¼Œå¹¶é€šè¿‡â¾ƒå®šä¹‰çš„ç«¯ç‚¹å¯¹æ•°æ®åº“è¿æ¥è¿›â¾äº†ç›‘æ§ã€‚</li>
</ul>
</li>
</ul>
<h2 id="ç¤¾å›¢-ç»„ç»‡ç»å†"><a href="#ç¤¾å›¢-ç»„ç»‡ç»å†" class="headerlink" title="ç¤¾å›¢&#x2F;ç»„ç»‡ç»å†"></a>ç¤¾å›¢&#x2F;ç»„ç»‡ç»å†</h2><ul>
<li><strong>åå—ç†å·¥å¤§å­¦é’å¹´å¿—æ„¿è€…æŒ‡å¯¼ä¸­å¿ƒ</strong>  <em>å®£ä¼ éƒ¨ å‰¯éƒ¨é•¿</em> 2022.04-2023.04<br>1.æ‰¿æ¥ä¸­å¿ƒçš„æ‘„å½±ä»»åŠ¡ï¼Œç»„ç»‡å¿—æ„¿æ´»åŠ¨çš„ç°åœºæ‹æ‘„ï¼Œè´Ÿè´£åŸ¹å…»éƒ¨é—¨æˆå‘˜çš„åŸºæœ¬æ‘„å½±èƒ½åŠ›ï¼›<br>2.ååŠ©å®Œæˆä¸­å¿ƒå…¬ä¼—å·æ¨æ–‡åˆ¶ä½œï¼Œå®£ä¼ å¤§è¿ä¼šã€å¹¿å·é©¬æ‹‰æ¾ã€å¿—æ„¿ä¸€æ¡è¡—ç­‰æ´»åŠ¨ä¸­çš„å¿—æ„¿æœåŠ¡å·¥ä½œï¼›<br>3.è´Ÿè´£éƒ¨é—¨çš„å†…å»ºå·¥ä½œï¼Œè¥é€ è‰¯å¥½æ°›å›´ã€‚</li>
</ul>
<h2 id="ä¸ªäººé™ˆè¿°-ä¸ªäººä¼˜åŠ¿"><a href="#ä¸ªäººé™ˆè¿°-ä¸ªäººä¼˜åŠ¿" class="headerlink" title="ä¸ªäººé™ˆè¿°&#x2F;ä¸ªäººä¼˜åŠ¿"></a>ä¸ªäººé™ˆè¿°&#x2F;ä¸ªäººä¼˜åŠ¿</h2><ol>
<li>æœ¬ç§‘å°±è¯»äºåå—ç†å·¥å¤§å­¦ç½‘ç»œå·¥ç¨‹ä¸“ä¸šï¼Œæ›¾è·å­¦æ ¡ä¸ä¼ä¸šå¥–å­¦é‡‘ï¼Œä¸‰å¥½å­¦ç”Ÿç­‰è£èª‰ï¼Œä»¥å…±åŒç¬¬ä¸€ä½œè€…å‘è¡¨ EI ä¼šè®®è®ºæ–‡ä¸€ç¯‡ï¼›ï¼ˆæ›¾åŠ å…¥å­¦é™¢é’é©¬å·¥ç¨‹ç­å­¦ä¹ ï¼Œæ‹…ä»»åå·¥é’å¹´å¿—æ„¿è€…æŒ‡å¯¼ä¸­å¿ƒå®£ä¼ éƒ¨å‰¯éƒ¨é•¿ï¼Œæœ‰ä¸°å¯Œçš„å¿—æ„¿æ´»åŠ¨å’Œå­¦ç”Ÿç»„ç»‡ç»å†ï¼›ï¼‰</li>
<li>ç†Ÿæ‚‰ Java å¼€å‘ï¼Œèƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨ Spring Bootã€Springã€Mybatis ç­‰å¸¸ç”¨æ¡†æ¶ï¼Œæœ‰ç€åšå®çš„ä¸“ä¸šçŸ¥è¯†å’Œå®è·µç»éªŒï¼›å¤§å­¦æœŸé—´ï¼Œæˆ‘å‚ä¸äº†å¤šä¸ªé¡¹ç›®æˆ–å®ä¹ ï¼Œä¸ä»…æ·±å…¥äº†è§£äº†è½¯ä»¶å¼€å‘æµç¨‹ï¼Œè¿˜åŸ¹å…»äº†é—®é¢˜è§£å†³çš„èƒ½åŠ›å’Œå›¢é˜Ÿåä½œæŠ€å·§ï¼› </li>
<li>æˆ‘å¯¹ä¿¡æ¯ç§‘æŠ€é¢†åŸŸå……æ»¡çƒ­æƒ…ï¼Œå¯¹æ–°æŠ€æœ¯å’Œè¶‹åŠ¿ä¿æŒå…³æ³¨ï¼Œæœ‰è¾ƒå¼ºçš„è‡ªæˆ‘å­¦ä¹ èƒ½åŠ›ã€‚å¸Œæœ›èƒ½åœ¨ä¼ä¸šæ•°å­—åŒ–è½¬å‹ä¸­ï¼Œåº”ç”¨æŠ€æœ¯æ¥æ¨åŠ¨åˆ›æ–°å’Œæé«˜æ•ˆç‡ã€‚</li>
</ol>
<h2 id="åº”è˜ç†ç”±"><a href="#åº”è˜ç†ç”±" class="headerlink" title="åº”è˜ç†ç”±"></a>åº”è˜ç†ç”±</h2><p>æˆ‘å¯¹Javaåç«¯å’Œè½¯ä»¶å¼€å‘æœ‰ç€åšå®çš„ä¸“ä¸šçŸ¥è¯†å’Œå®è·µç»éªŒã€‚åœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘å‚ä¸äº†å¤šä¸ªé¡¹ç›®æˆ–å®ä¹ ï¼Œä¸ä»…æ·±å…¥äº†è§£äº†è½¯ä»¶å¼€å‘æµç¨‹ï¼Œè¿˜åŸ¹å…»äº†é—®é¢˜è§£å†³çš„èƒ½åŠ›å’Œå›¢é˜Ÿåä½œæŠ€å·§ã€‚<br>ä¸œèé“¶è¡Œä¸€ç›´ä»¥æ¥éƒ½åœ¨é‡‘èç§‘æŠ€æ–¹é¢å–å¾—äº†å“è¶Šçš„æˆå°±ï¼Œæˆ‘æ¸´æœ›åŠ å…¥è¿™ä¸ªå……æ»¡æ´»åŠ›å’Œåˆ›æ–°çš„å›¢é˜Ÿï¼Œå…±åŒæ¨åŠ¨é“¶è¡Œä¸šåŠ¡çš„æ•°å­—åŒ–è½¬å‹ã€‚æˆ‘ç›¸ä¿¡è‡ªå·±çš„æŠ€æœ¯èƒŒæ™¯å’Œå¯¹é‡‘èé¢†åŸŸçš„çƒ­æƒ…å°†ä½¿æˆ‘æˆä¸ºä¸œèé“¶è¡Œä¿¡æ¯ç§‘æŠ€å›¢é˜Ÿçš„æœ‰åŠ›èµ„äº§ã€‚</p>
<ol>
<li>ä¸ªäººä¼˜åŠ¿ï¼š<br>ä½œä¸ºä¸€ä¸ªç»éªŒä¸°å¯Œçš„Javaè½¯ä»¶å¼€å‘è€…ï¼Œæˆ‘åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ã€åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä»¥åŠå¤§è§„æ¨¡æ•°æ®å¤„ç†æ–¹é¢å…·å¤‡æ·±åšçš„æŠ€æœ¯åŠŸåº•ã€‚æˆ‘åœ¨ä¹‹å‰çš„é¡¹ç›®ä¸­ï¼ŒæˆåŠŸåœ°è®¾è®¡å’Œå®æ–½äº†é«˜æ€§èƒ½çš„ã€å¯æ‰©å±•çš„Javaåº”ç”¨ç¨‹åºï¼Œè¿™ä½¿æˆ‘å¯¹äº‘æ ¸å¿ƒç½‘çº¿Javaè½¯ä»¶å¼€å‘çš„æŒ‘æˆ˜å……æ»¡ä¿¡å¿ƒã€‚æˆ‘çš„è§£å†³é—®é¢˜çš„èƒ½åŠ›ä»¥åŠå¯¹æ–°æŠ€æœ¯çš„å¿«é€Ÿå­¦ä¹ é€‚åº”èƒ½åŠ›ï¼Œå°†ä½¿æˆ‘èƒ½å¤Ÿåœ¨è´µå…¬å¸çš„é¡¹ç›®ä¸­è¿…é€Ÿèå…¥å¹¶å–å¾—æˆç»©ã€‚</li>
<li>é€‰æ‹©è¡Œä¸šï¼š<br>æˆ‘ä¸€ç›´å¯¹äº‘è®¡ç®—å’Œæ ¸å¿ƒç½‘ç»œé¢†åŸŸä¿æŒæµ“åšçš„å…´è¶£ï¼Œæ·±çŸ¥è¿™æ˜¯å½“ä»Šæ•°å­—åŒ–æ—¶ä»£çš„åŸºç¡€ã€‚è´µå…¬å¸åœ¨äº‘æ ¸å¿ƒç½‘çº¿æ–¹é¢çš„é¢†å…ˆåœ°ä½ä»¥åŠå¯¹æ–°æŠ€æœ¯çš„æŒç»­æŠ•èµ„ï¼Œä½¿æˆ‘å¯¹èƒ½å¤Ÿå‚ä¸å¹¶æ¨åŠ¨è¿™ä¸ªé¢†åŸŸçš„å‘å±•å……æ»¡æ†§æ†¬ã€‚æˆ‘æ¸´æœ›åŠ å…¥è´µå…¬å¸ï¼Œé€šè¿‡äº²èº«å‚ä¸å’Œè´¡çŒ®ï¼Œä¸æ–­æå‡è‡ªèº«æŠ€æœ¯æ°´å¹³ï¼ŒåŒæ—¶ä¸ºå…¬å¸åœ¨è¡Œä¸šå†…çš„åˆ›æ–°å‘å±•è´¡çŒ®åŠ›é‡ã€‚</li>
<li>å•†ä¸šä»·å€¼ï¼š<br>æˆ‘æ·±åˆ»ç†è§£è½¯ä»¶å¼€å‘ä¸ä»…ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯åœ¨å•†ä¸šç¯å¢ƒä¸­ä¸ºå®¢æˆ·æä¾›åˆ‡å®è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹ã€‚æˆ‘æ³¨é‡å°†æŠ€æœ¯ä¸å•†ä¸šéœ€æ±‚ç›¸ç»“åˆï¼Œé€šè¿‡æ·±å…¥äº†è§£å®¢æˆ·éœ€æ±‚ï¼Œè¿…é€Ÿå“åº”å¸‚åœºå˜åŒ–ï¼Œä¸ºå…¬å¸åˆ›é€ æœ‰ä»·å€¼çš„äº§å“ã€‚æˆ‘ç›¸ä¿¡æˆ‘çš„ç»éªŒå’ŒæŠ€èƒ½å°†æœ‰åŠ©äºæé«˜è´µå…¬å¸çš„ç«äº‰åŠ›ï¼Œå®ç°å•†ä¸šå’ŒæŠ€æœ¯çš„åŒèµ¢ã€‚</li>
</ol>
<h2 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h2><p>å…¥å­¦ä»¥æ¥ï¼Œæˆ‘å§‹ç»ˆä¿æŒç€ç§¯æå‘ä¸Šçš„æ€åº¦ï¼Œå¸Œæœ›åœ¨å„æ–¹é¢éƒ½èƒ½å¤Ÿå–å¾—è¿›æ­¥ã€‚åœ¨è¿™æ®µå……å®çš„æ—¶å…‰é‡Œï¼Œæˆ‘æ¢ç´¢äº†çŸ¥è¯†çš„å¹¿åº¦å’Œæ·±åº¦ï¼Œç»“è¯†äº†ä¼—å¤šå¿—åŒé“åˆçš„æœ‹å‹ï¼ŒåŸ¹å…»äº†åšéŸ§çš„æ„å¿—åŠ›ï¼Œä»¥åŠæ ‘ç«‹äº†å¯¹æœªæ¥å……æ»¡ä¿¡å¿ƒçš„å†³å¿ƒã€‚<br>æœªæ¥çš„æ—¥å­é‡Œï¼Œæˆ‘å°†ç»§ç»­å‘æ‰¬ä¸ªäººä¼˜ç‚¹ï¼Œè„šè¸å®åœ°ï¼ŒçœŸè¯šåšäººï¼Œæ½œå¿ƒåšäº‹ï¼Œä¸æ–­åœ°æé«˜è‡ªå·±ï¼Œä¸ºç¤¾ä¼šä½œå‡ºæ›´å¤§çš„è´¡çŒ®ï¼</p>
<ol>
<li>æ€æƒ³ä¸Šï¼šæˆ‘çƒ­çˆ±ç¥–å›½ï¼Œç§¯æå­¦ä¹ å…šçš„ç†è®ºï¼ŒåŠ å…¥äº†å­¦é™¢é’é©¬å·¥ç¨‹ç­å­¦ä¹ ï¼ŒåŠªåŠ›æˆä¸ºä¸€ååˆæ ¼çš„å…¥å…šç§¯æåˆ†å­ã€‚æˆ‘çƒ­å¿ƒå…¬ç›ŠæœåŠ¡ï¼Œåœ¨æ ¡é’å¿—å®£ä¼ éƒ¨æ‹…ä»»å‰¯éƒ¨é•¿ï¼Œä¸ºå¿—æ„¿ç²¾ç¥åœ¨æ ¡å›­ä¸­çš„ä¼ é€’è€ŒåŠªåŠ›ã€‚ä¹Ÿåœ¨å„é¡¹æ´»åŠ¨ä¸­ç§¯æå‚ä¸å¿—æ„¿è€…å·¥ä½œï¼Œå¸®åŠ©æœ‰éœ€è¦çš„äººã€‚</li>
<li>å­¦ä¹ ä¸Šï¼šæˆ‘èƒ½å¤Ÿæ¯”è¾ƒè‡ªè§‰å’Œå¹¿æ³›åœ°å­¦ä¹ ä¸“ä¸šçŸ¥è¯†ï¼Œå‹¤å¥‹åˆ»è‹¦ï¼Œåœ¨å„ç§‘ç›®ä¸­éƒ½å–å¾—äº†ä¸é”™çš„æˆç»©ï¼Œè·å¾—æ ¡çº§å¥–å­¦é‡‘ä¸¤æ¬¡ã€‚æˆ‘å‚ä¸åˆ°å‰æ²¿çš„ç§‘ç ”é¡¹ç›®ä¸­ï¼Œä»¥å…±åŒç¬¬ä¸€ä½œè€…å‘è¡¨ä¸€ç¯‡å›½é™…ä¼šè®®è®ºæ–‡ã€‚</li>
<li>è¯¾ä½™ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä¹Ÿç§¯æå‚ä¸äº†å„ç§æ–‡ä½“æ´»åŠ¨ã€‚æˆ‘ä¹äºä¸äººæ²Ÿé€šï¼ŒæŠŠæ¡å›¢é˜Ÿåˆä½œçš„æœºä¼šï¼Œåœ¨å­¦ä¹ ä¸äººåä½œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘çš„æ²Ÿé€šå’Œåè°ƒèƒ½åŠ›å¾—åˆ°äº†ä¸æ–­åŠ å¼ºã€‚æˆ‘ä¹Ÿç§¯æå‚ä¸åˆ°è¯¾å¤–å®è·µä¸­ï¼Œå®Œæˆäº†ä¸‰æ®µä¼ä¸šå®ä¹ ã€‚è¿™ä¸ä»…é”»ç‚¼äº†æˆ‘çš„ä¸“ä¸šæŠ€èƒ½ï¼Œæ›´åœ¨å›¢é˜Ÿåä½œçš„è¿‡ç¨‹ä¸­ï¼ŒåŸ¹å…»äº†å®é™…è§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚åŒæ—¶ï¼Œæˆ‘ä¹Ÿåœ¨ä¸æ–­æ€è€ƒæœªæ¥çš„èŒä¸šå‘å±•å’Œç›®æ ‡ï¼ŒåŠªåŠ›æ‰“ä¸‹ä¸€ä¸ªå¥½çš„åŸºç¡€ã€‚</li>
</ol>
<hr>

<h2 id="2024æ˜¥æ‹›"><a href="#2024æ˜¥æ‹›" class="headerlink" title="2024æ˜¥æ‹›"></a>2024æ˜¥æ‹›</h2><ul>
<li>ä¹åˆ»è¿åŠ¨<ul>
<li>ä¸€é¢ 3.17<br>  javaé”ï¼Œï¼Œrentanlock<br>  HashMapå¦‚ä½•å¤„ç†10wæ¡æ’å…¥ï¼Ÿä¸ºä»€ä¹ˆå¤§å°æ˜¯2çš„æŒ‡æ•°ï¼Ÿä¸€å¼€å§‹å°±è¦åˆ›å»ºå¤§å®¹é‡ï¼›æ–¹ä¾¿åœ¨è®¡ç®—æ’å…¥ä¸‹æ ‡æ—¶ä¸æ•°ç»„å¤§å°æˆ–è¿ç®—<br>  jvmç»„æˆï¼Ÿï¼Ÿè€å¹´ä»£ï¼ŒGCï¼Œå›æ”¶æœŸï¼Ÿï¼Ÿ<br>  newä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹ã€ã€<br>  mqæ¶ˆæ¯ç¡®è®¤ï¼Ÿäº‹åŠ¡æœ¬åœ°å›æ»šï¼Ÿï¼Ÿchannel<br>  rediså¤šè·¯æŸ¥è¯¢ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿï¼Ÿè¿‡æœŸäº†æ€ä¹ˆåŠï¼Ÿæ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªè¿­ä»£ä¸­ä¸è¿‡æœŸï¼Ÿï¼Ÿ<br>  mysqlæŸ¥è¯¢ä¼˜åŒ–<br>  é¢è¯•å®˜ï¼šæŠŠåŸºç¡€æå¥½ï¼Œåœ¨å®è·µä¸­è¿ç”¨</li>
</ul>
</li>
<li>å“æœ›æ•°ç <ul>
<li>ä¸€é¢ 3.18<br>  å¤šæ€ã€ã€çº¿ç¨‹åˆ›å»ºæ–¹æ³•ï¼ŒåŒºåˆ«ï¼Œï¼Œå·¥å‚æ¨¡å¼&#x2F;æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Ÿï¼Ÿ<br>  ACIDã€ã€<strong>Dæ˜¯æ°¸ä¹…æ€§ï¼ï¼</strong>ç´¢å¼•ï¼Œæœ€å·¦åŒ¹é…ï¼Ÿ<br>  IOï¼Œå¦‚ä½•è¯»å–ä¸€ä¸ªä¸çŸ¥é“ç±»å‹çš„æ–‡ä»¶Aæ•°æ®åˆ°æ–‡ä»¶Bä¸­ï¼Ÿbufferï¼Œinputstreamï¼Ÿï¼Ÿ<br>  sentinelæµæ§ï¼Œï¼Œ<br>  è¿œç¨‹debugï¼Ÿï¼ŸIntelliJ IDEA ä¸­â€Runâ€ èœå•â€Edit Configurationsâ€é…ç½®è¿œç¨‹è°ƒè¯•ï¼Œå¡«å†™è°ƒè¯•æœåŠ¡å™¨çš„ä¸»æœºå&#x2F;IP å’Œç«¯å£å·ï¼Œç„¶åå¯åŠ¨è¿œç¨‹è°ƒè¯•ä¼šè¯ï¼Œè®¾ç½®æ–­ç‚¹å’Œè°ƒè¯•ï¼›<br>  é¢è¯•å®˜ï¼šåŠ¨æ‰‹èƒ½åŠ›ä¸å¤ªè¡Œï¼ŒåŸºç¡€çŸ¥è¯†ä¸æ·±å…¥</li>
</ul>
</li>
<li>å°é¹æ±½è½¦<ul>
<li>ä¸€é¢ 3.20<br>  æœ€æœ‰æ”¶è·çš„é¡¹ç›®ã€ã€é¡¹ç›®å‡ ä¸ªæ¨¡å—ã€ã€<br>  æŠ¢å•æ‚²è§‚é”å®ç°ã€ã€<br>  æ”¯ä»˜æ€ä¹ˆåšçš„ã€ã€å¾®ä¿¡æ”¯ä»˜ï¼Ÿï¼Ÿ<br>  å®ä¹ åšäº†ä»€ä¹ˆï¼Ÿæ‹‰æ–°å…·ä½“åšäº†å•¥ï¼Ÿ<br>  kafkaæ¶ˆæ¯é¡ºåºï¼Ÿ<br>  mysqléš”ç¦»ç­‰çº§ï¼Œï¼Œ<br>  jvmå†…å­˜åŒºåŸŸå‡ ä¸ªéƒ¨åˆ†ï¼Ÿ<br>  springbootç‰¹ç‚¹ï¼Ÿ<br>  spring beanä¾èµ–é¡¹ç›®è¿˜èƒ½å¯åŠ¨å—ï¼Ÿ<br>  OSIä¸ƒå±‚ã€ã€<strong>5.ä¼šè¯å±‚ã€ã€6. è¡¨ç¤ºå±‚</strong></li>
</ul>
</li>
<li>æ–°å‡¯æ¥<ul>
<li>æŠ€æœ¯é¢ 3.21ï¼ˆé€šè¿‡ï¼‰<br>  å®ä¹ å·¥ä½œã€ã€æ²¡è®²æ¸…æ¥š<br>  æ”¶è·äº†ä»€ä¹ˆã€ã€mqçš„ä½¿ç”¨ï¼ŒkafkaæŠ€æœ¯é€‰å‹<br>  é¡¹ç›®å¤æ‚åº¦ã€ã€åˆ›ä¸šé¡¹ç›®ï¼Œé‡çº§å°<br>  lc1023</li>
<li>æ€§æ ¼æµ‹è¯„é‡æµ‹ï¼š<strong>ä¸å¤Ÿç§¯æ</strong></li>
</ul>
</li>
<li>4399æ¸¸æˆ<ul>
<li>ä¸€é¢ 3.21<br>  å…·ä½“æ€ä¹ˆç†Ÿæ‚‰äº†å›¢é˜Ÿå¼€å‘æµç¨‹ã€ã€<br>  å®ä¹ å·¥ä½œã€ã€æ¶ˆæ¯æ‹¦æˆªé€»è¾‘ï¼Œæ¶ˆæ¯å‚æ•°ä¸æšä¸¾å€¼æ¯”å¯¹ï¼Œequalsï¼Ÿï¼Ÿ<br>  éæ³•å­—æ£€æŸ¥ï¼Ÿå¾®ä¿¡å°ç¨‹åºæ¥å£ã€å‰ç¼€æ ‘ï¼Ÿï¼Ÿ    BSTã€ã€<br>  ç½‘ç»œçŸ¥è¯†å­¦ä¹ ï¼šå®ç°å¼¹å¹•åŠŸèƒ½ç”¨äº†websocketï¼Œè¿˜å¯ä»¥ç”¨ä»€ä¹ˆåˆ«çš„æ–¹æ³•ï¼ŸTCPï¼ŒRedisï¼Ÿï¼Ÿ<br>  TCPç¼–ç¨‹ï¼ŸsocketèŠå¤©å®¤ï¼Ÿï¼Ÿ<br>  å¯¹è¿™ä»½å·¥ä½œæœ‰ä»€ä¹ˆæœŸå¾…ã€ã€</li>
</ul>
</li>
<li>TPlinkè”æ´²<ul>
<li>æœºè€ƒç®—æ³•ï¼š1ã€æœ€é•¿å›æ–‡å­ä¸² java11?? 2ã€lc1114æŒ‰åºæ‰“å°</li>
<li>ä¸€é¢ 3.21<br>  TCP&#x2F;UDPï¼ŒMySQLç´¢å¼•ï¼Œsynorizedä¸lockï¼Œå®ç°hashmapã€ã€å°¾æ’æ³•çš„å¥½å¤„ï¼Œspringè®¾è®¡æ¨¡å¼ï¼Œ<strong>åŠ¨æ€ä»£ç†</strong>ã€ã€jdkï¼Œcglib<br>  å®ä¹ ï¼šå¦‚ä½•æ‹¦æˆª<br>  é¡¹ç›®ï¼šæœ¬åœ°ç¼“å­˜ä¸Redisä¸åŒæ­¥<br>  æœ‰æ²¡æœ‰offerï¼ï¼Ÿ</li>
<li>äºŒé¢ 3.26<br>  å®ä¹ ã€ã€æ‹¦æˆªï¼Œå¯ä»¥ç”¨springçš„è®¾è®¡æ¨¡å¼æˆ–è€…æŠ€æœ¯å—ï¼Ÿï¼Ÿç­–ç•¥æ¨¡å¼ï¼Œaopéä¸šåŠ¡ï¼Œï¼Œ<br>  ç™½åå•è¿‡æœŸæ—¶é—´ï¼Œé‡å¾ˆå¤§ç”¨å¸ƒéš†è¿‡æ»¤å™¨çš„ç¼ºç‚¹ã€ã€<br>  kafakæ¶æ„ï¼Œå¦‚ä½•å®ç°é«˜ååé‡ï¼Œå‰åååé‡2000qps-&gt;200kbs<br>  é¡¹ç›®ã€ã€ä¸æ„Ÿå…´è¶£ï¼Œè¦è¯´è®¾è®¡è¿˜æ˜¯äº®ç‚¹ï¼Ÿ<br>  retranlockï¼Œå¯é‡å…¥é”ï¼Œï¼Œ<br>  mysqlã€ã€éš”ç¦»ç­‰çº§ï¼Œç´¢å¼•ä¼˜åŒ–ï¼ŒæŸ¥çœ‹ç´¢å¼•çš„ä½¿ç”¨ explainï¼Ÿï¼Ÿ mvccï¼Ÿï¼Ÿ </li>
<li>ç»ˆé¢ 3.27<br>  è®ºæ–‡ã€è€ƒç ”ã€çˆ¶æ¯å·¥ä½œã€æ•°å­¦æŒ‚ç§‘ã€å®ä¹ ã€ã€<br>  é¡¹ç›®ï¼šè…¾è®¯äº‘ COS éƒ¨ç½²ï¼Œæ ¡å†…åˆ›ä¸šå›¢é˜Ÿäººæ•°ï¼ˆäº§å“ç»ç† 2ã€å‰ç«¯1~2ã€åç«¯æ ¸å¿ƒ2è¿­ä»£æœ‰ç©ºæ¥ã€ã€ï¼‰ï¼Œä½¿ç”¨springcloudæ¡†æ¶ä¸ºä»€ä¹ˆè¿˜ç”¨nacosï¼Œsentinelï¼Ÿï¼Ÿ</li>
<li>ç»ˆé¢-å·²è¿›å…¥äººæ‰åº“ 4.25</li>
</ul>
</li>
<li>å¹¿å·å†œå•†é“¶è¡Œï¼ˆè‹±æ‰è®¡åˆ’ï¼‰<ul>
<li>é¢è¯• 3.27 æ”¾å¼ƒ</li>
</ul>
</li>
<li>ç»çº¬æ’æ¶¦<ul>
<li>é¢è¯• 3.29<br>  å®ä¹ ã€ã€kafkaé€‰å‹ã€å…¶ä»–mqäº†è§£å—ã€ç™½åå•ç¼“å­˜ä¸€è‡´æ€§<br>  åå°„ã€æ³›å‹ã€mysqlç´¢å¼•å¤±æ•ˆï¼Œinï¼Ÿï¼Ÿè®¾è®¡æ¨¡å¼<br>  äº‹åŠ¡çš„ä½¿ç”¨ã€äº‹åŠ¡ä¼ æ’­ã€ã€springæ‹¦æˆªå™¨ï¼Œè¿‡æ»¤å™¨ã€ã€gatewayè·¯ç”±ï¼Œæ–­è¨€<br>  æ™ºåŠ›ï¼šå…«ä¸ªçƒï¼Œå…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒé‡ï¼Œå…¶ä½™è´¨é‡ç›¸åŒï¼Œå¦‚ä½•ç”¨å¤©å¹³ç§¤ä¸¤æ¬¡æ‰¾å‡ºè¾ƒé‡çš„çƒï¼Ÿ</li>
</ul>
</li>
<li>å¤šç›Šç½‘ç»œï¼ˆ-&gt; CPPæ¸¸æˆå¼•æ“ç ”å‘ï¼‰<ul>
<li>é¢è¯• 4.3<br>  æœ€æœ‰æŒ‘æˆ˜çš„é¡¹ç›®ï¼Ÿï¼Ÿéš¾ç‚¹ï¼Ÿï¼Ÿ<br>  å›¢é˜Ÿæœ‰å‡ ä¸ªäººï¼Œå·¥ä½œæµç¨‹ï¼Œå¦‚ä½•åè°ƒï¼ˆæ¥å£æ–‡æ¡£ï¼Ÿï¼‰å’Œå‰ç«¯æ²Ÿé€šï¼Ÿï¼Ÿ<br>  javaçš„ä¼˜ç¼ºç‚¹ï¼Œåƒåœ¾å›æ”¶ç®—æ³•ï¼Œé“¾è¡¨ä¸æ•°ç»„ï¼Œæµ…æ‹·è´ä¸æ·±æ‹·è´<br>  çº¿ç¨‹å®‰å…¨ï¼Œå¦‚ä½•ä¿è¯ï¼ˆä¹è§‚é”ï¼Œæ‚²è§‚é”ï¼‰ï¼Œçº¿ç¨‹ä¸è¿›ç¨‹<br>  é™æ€ç»‘å®šï¼ŒåŠ¨æ€ç»‘å®šï¼Œç¼–è¯‘æ—¶å¤šæ€ï¼Œè¿è¡Œæ—¶å¤šæ€<br>  é¢å‘å¯¹è±¡çš„ä¸‰ä¸ªç‰¹ç‚¹ã€ã€<strong>ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿å’Œå¤šæ€ï¼Ÿï¼Ÿ</strong><br>  Redisä½œç¼“å­˜çš„ç¼ºç‚¹ä¸è§£å†³æ–¹æ³•<br>  ä»‹ç»æ¡†æ¶ï¼šspringã€springbootã€mybatis<br>  å¦‚ä½•å­¦ä¹ çš„ï¼Ÿçœ‹è§†é¢‘+chatgptå‘æ–‡ã€ã€æœ‰æ²¡æœ‰ä½¿ç”¨æœç´¢å¼•æ“ï¼Ÿgoogleã€stackflowï¼Ÿï¼Ÿ<br>  ç©ä»€ä¹ˆæ¸¸æˆï¼Ÿæˆ‘çš„ä¸–ç•Œï¼Œæ ¹æ®ä¸‰ç»´åæ ‡ä¿å­˜æ¯ä¸€ä¸ªæ ¼å­çš„ç±»å‹ï¼Œé‚£ä¹ˆè¦ç”¨ä¸‰ç»´æ•°ç»„è¡¨ç¤ºæ•´ä¸ªç©ºé—´ï¼Œå¦‚ä½•ä¼˜åŒ–å­˜å‚¨æ–¹å¼ï¼Ÿï¼Ÿç™¾åº¦å®æ™¯åœ°å›¾çš„åŸç†ï¼Ÿï¼Ÿ</li>
<li>hré¢ 4.10<br>  è–ªèµ„ï¼Ÿ20kï¼Œ18kï¼Œå¦‚ä½•å¾—å‡ºè¿™ä¸ªè–ªèµ„çš„ï¼Ÿ<br>  ä»€ä¹ˆæ—¶å€™æ¥å®ä¹ ï¼Ÿå®ä¹ -&gt;è¯•ç”¨-&gt;æ­£å¼<br>  ç§‹æ‹›ï¼Œæ˜¥æ‹›offeræƒ…å†µï¼Œè€ƒç ”ï¼Œæ¯æ®µå®ä¹ æ—¶é—´éƒ½ä¸é•¿<br>  äº†è§£å²—ä½è¦æ±‚ï¼Œè½¬cppå—ï¼Ÿå…¥é—¨è¯­è¨€<br>  äº†è§£å…¬å¸ä¸šåŠ¡å—ï¼Ÿç©ç½‘é¡µæ¸¸æˆå°‘<br>  å·¥ä½œæ—¶é•¿996+å‘¨æœ«åŠå¤©ï¼Œå­¦ä¹ æ—¶é—´<br>  ç±è´¯ï¼Œå®¶åº­ï¼Œæ¥å—å¹¿ä¸œå¤–å·¥ä½œåœ°ç‚¹ï¼Œå¯¹è±¡<br>  çˆ¶æ¯æ€ä¹ˆçœ‹å¾…ä½ æ‰¾å·¥ä½œï¼Ÿå¦‚ä½•è¯„ä»·çˆ¶äº²ï¼Ÿ</li>
<li>æœªå½•ç”¨</li>
</ul>
</li>
<li>æ‹›å•†é“¶è¡ŒÂ·æ‹›é“¶ç½‘ç»œç§‘æŠ€<ul>
<li>æµ‹è¯„ åŒ—æ£®æµ‹è¯„<ol>
<li>è¯­è¨€ç†è§£ï¼šç›´æ¥çœ‹é¢˜ï¼Œæç‚¼å‡ æ¡å…³é”®é€»è¾‘ï¼Œå†çœ‹é¢˜ç›®</li>
<li>å›¾è¡¨åˆ†æï¼šå…ˆçœ‹é¢˜ç›®ï¼Œå†çœ‹å›¾</li>
<li>å›¾å½¢æ¨ç†ï¼šæ‰¾è§„å¾‹ã€ã€å åŠ ï¼Œåˆå¹¶æ¶ˆé™¤ï¼Œå„ç±»å›¾å½¢æ€»æ•°ã€ã€</li>
<li>æ€§æ ¼æµ‹è¯„ï¼šæœ€ç¬¦åˆ&#x2F;æœ€ä¸ç¬¦åˆ</li>
</ol>
</li>
<li>æœºè€ƒ 4.1</li>
<li>ä¸€é¢ 4.7<br>  Stringæ¯”è¾ƒå¯ä»¥ç”¨ &#x3D;&#x3D; å—ï¼ŸArraylist.remove() æŠ¥ä»€ä¹ˆé”™ï¼ŸHashMapé”®å¯ä»¥nullï¼Ÿ<br>  jvmå†…å­˜åŒºåŸŸã€å¦‚ä½•å†™ä¸€ä¸ªç¨‹åºè®©æ–¹æ³•åŒºoom<br>  çº¿ç¨‹å®‰å…¨é—®é¢˜ã€<strong>synorizedå’Œreentrantlockçš„æœ¬è´¨åŒºåˆ«ï¼Œåº•å±‚å®ç°ï¼Ÿï¼Ÿ</strong>caså­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Ÿï¼Ÿ<br>  æ•°æ®åº“acidï¼Œç´¢å¼•æ˜¯ä»€ä¹ˆ<br>  tcpä¸‰æ¬¡æ¡æ‰‹çš„æœ¬è´¨ã€httpçš„ç»„æˆï¼Œhttpå¤´æœ‰ä»€ä¹ˆéƒ¨åˆ†<br>  åä¸‡ä¸ªæ•°å–æœ€å¤§10ä¸ªã€äºŒåˆ†æ’åº</li>
<li>ç»¼é¢ 4.16<br>  æŠ€æœ¯ï¼šé¡¹ç›®ï¼Œå•†åŸredisçš„ä½¿ç”¨ï¼Œrediså®¢æˆ·ç«¯ï¼Ÿï¼Ÿ<br>  hrï¼šæŒ‚ç§‘åŸå› ï¼Œï¼Œæœ€å¤§çš„ç¼ºç‚¹ï¼Ÿï¼Ÿå®ä¹ é•¿çŸ­ã€é¡¹ç›®æ—¶é—´é‡åˆï¼Œå®ä¹ ç›®çš„ï¼ˆé¡¹ç›®ç¼ºäºº&#x2F;åº”å±Šç”Ÿæ‹›è˜ï¼‰ï¼Œå¦‚ä½•è¯„å®¡ï¼Œä¸Šçº¿æ—¶é—´ç´§å¼ æ€ä¹ˆåŠï¼Ÿ<br>  <strong>è€ƒç ”ï¼ï¼</strong>æ²¡è€ƒï¼Œæ‰¾å·¥ä½œç¡®å®æ¯”è¾ƒæ™šï¼ŒæŠ€æœ¯æ ˆï¼šä¸ƒæœˆä»½å¼€å§‹å­¦ï¼Œç§‹æ‹›æŠ€æœ¯ä¸è¶³ï¼Œæ˜¥æ‹›ç§¯ç´¯é¢è¯•ç»éªŒåé€šè¿‡<br>  åé—®ï¼šæ‹›è˜æµç¨‹ï¼Œå·¥ä½œæ—¶é•¿</li>
<li>æœªé€šè¿‡</li>
</ul>
</li>
<li>ä¸­å›½å¹³å®‰Â·å¹³å®‰å¯¿é™©<ul>
<li>é¢è¯• 4.8<br>  é¡¹ç›®ä»‹ç»å¾ˆçƒ‚ã€‚ã€‚åŒä¸€æ—¶é—´ä»£æ‹¿ä»»åŠ¡å‘å¸ƒé‡çº§å¾ˆå¤§çš„æƒ…å†µä¸‹æ€ä¹ˆåŠ¨æ€åˆ†é¡µæŸ¥è¯¢ï¼Ÿï¼Ÿ<br>  å®ä¹ ï¼šæ‹¦æˆªå…·ä½“å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿåª’ä½“-&gt;æ‹‰æ–°ï¼Œè°ƒæ¥å£ï¼Ÿï¼Ÿæ‹‰æ–°-&gt;APPåå°ï¼Œå‘httpè¯·æ±‚ï¼Œrpcï¼Ÿï¼Ÿæ•´ä¸ªæ‹¦æˆªæµç¨‹ï¼Œæµstreamï¼Ÿï¼Ÿkafkaé‡å¤æ¶ˆè´¹ï¼Œredisæ ‡è¯†ç¬¦ï¼Œæ¶ˆæ¯é‡å¾ˆå¤§ï¼Ÿï¼ŸæŠ¥è¡¨å…·ä½“æœ‰ä»€ä¹ˆå­—æ®µï¼Œå¦‚ä½•è®¾ç½®çš„ï¼Ÿï¼Ÿ</li>
</ul>
</li>
<li>æ·±åœ³å†œå•†é“¶è¡Œï¼ˆä¿¡æ¯æŠ€æœ¯å²—ï¼‰<ul>
<li>é¢è¯• 4.8<br>  å®ä¹ ï¼škafkaå¦‚ä½•çŸ¥é“é€šé“ã€ã€gitæ€ä¹ˆç”¨åˆ†æ”¯çš„<br>  é¡¹ç›®ï¼šå¦‚ä½•è¿‡æ»¤éæ³•å­—ï¼Ÿä¹è§‚ã€æ‚²è§‚é”ï¼Œé”å‡çº§ï¼ŒMySQLäº‹åŠ¡ï¼Œ@transactionå¤±æ•ˆï¼Ÿä¸ºä»€ä¹ˆç”¨nacosï¼Ÿé™æµå’Œç†”æ–­ï¼Ÿï¼Ÿé¡¹ç›®éƒ¨ç½²ï¼Œlinuxæ–‡ä»¶ä¸­æŸ¥æ‰¾ï¼Ÿï¼Ÿ<br>  hrï¼šä¸ºä»€ä¹ˆæ”¾å¼ƒè€ƒç ”ï¼Ÿå®¶åº­æƒ…å†µï¼Ÿä¸ºä»€ä¹ˆåŒ¹é…é“¶è¡Œå²—ä½ï¼Ÿå¥³æœ‹å‹ï¼Ÿ</li>
<li><strong>offer 4.23</strong></li>
</ul>
</li>
<li>ä¸‡å¾—wind<ul>
<li>é¢è¯• 4.9<br>  kafkaæ€ä¹ˆå®ç°é™æµçš„<br>  ä»»åŠ¡å‘å¸ƒåˆ°å‘å¸ƒå®¢æˆ·ç«¯ï¼Œé‡å¤åˆ·æ–°æŸ¥mysqlï¼Ÿï¼Ÿä¸€ç™¾ä¸ªäººæŠ¢å•ï¼Œè¯·æ±‚ç›´æ¥åˆ°æ•°æ®åº“å—ï¼Ÿï¼Ÿnacoså¦‚ä½•å®ç°æœåŠ¡æ³¨å†Œï¼Œ<br>  å¤šæ€ï¼Œ<strong>æ¥å£ä¸æŠ½è±¡ç±»</strong>ï¼Œæœ‰ç”¨è¿‡å—ï¼Ÿï¼Ÿè®¾è®¡æ¨¡å¼ï¼Œå“ªé‡Œä½“ç°äº†å¤šæ€ï¼Œå•ä¾‹æ¨¡å¼ï¼Œï¼Œ</li>
</ul>
</li>
<li>TPlinkæ™®è”<ul>
<li>é¢è¯• 4.10<br>  æ ¡è·‘è·‘ï¼šä¸å®ä¹ æ—¶é—´é‡å ï¼ˆéå…¨èŒï¼Œæœ‰éœ€æ±‚å°±å»ï¼‰ï¼Œrediséé‡å¤æ”¯ä»˜ï¼ŒæŠ¢å•ä¸ºä»€ä¹ˆä¸ç”¨ç¼“å­˜å±‚ï¼Ÿå•†åŸredisä½¿ç”¨<br>  å®ä¹ ï¼škafkaæ€ä¹ˆé™æµï¼Œï¼Œè€ƒè™‘ä¸ä½¿ç”¨kafkaä¼˜åŒ–ï¼Ÿï¼Ÿå»¶æ—¶åŒåˆ ï¼Ÿï¼Ÿ<br>  synchronizedçš„åº•å±‚å®ç°ï¼Œ<strong>jvmå †ç»“æ„ã€gcã€ç±»åŠ è½½æœºåˆ¶</strong>ï¼Œmysqlçš„b+æ ‘ç´¢å¼•ç»“æ„+æŸ¥è¯¢ä¼˜åŒ–ï¼Œmysqlä¼˜åŒ–ï¼ˆæ•°æ®åº“ç»“æ„+å…·ä½“ä½¿ç”¨ä¸­çš„sqlä¼˜åŒ–ï¼‰</li>
<li>äºŒé¢ 4.18<br>  ç§‹æ‹›æƒ…å†µï¼Œofferæƒ…å†µï¼Œå®ä¹ ï¼Œé¡¹ç›®</li>
<li>åº§è°ˆ 5.14</li>
<li>offer 5.15 17k</li>
</ul>
</li>
<li>58åŒåŸ<ul>
<li>é¢è¯• 4.11<br>  åŠ¨æ€ä»£ç†ï¼Œçº¿ç¨‹çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸï¼Œ<strong>çº¿ç¨‹æ± </strong>ï¼ŒReentrantlockåº•å±‚ï¼Œä¿¡å·?<br>  redisæ•°æ®ç±»å‹ï¼Œzsetæœ‰ä»€ä¹ˆåº”ç”¨<br>  GCç®—æ³•ï¼Œ<strong>G1å’ŒCMS</strong>çš„åŒºåˆ«ï¼Œå†…å­˜æ³„éœ²å’Œå†…å­˜æº¢å‡º<br>  springbootç‰¹ç‚¹ï¼Œè‡ªå·±å†™ä¸€ä¸ªstarterï¼Œ MyBatisä¸­#å’Œ$çš„åŒºåˆ«<br>  ConcurrentHashMap1.7ï¼ŒArrayListæ‰©å®¹<br>  MySQLæ—¥å¿—ï¼ŒäºŒé˜¶æ®µæäº¤<br>  é¢è¯•å®˜ä¸€ç›´è¯•å›¾æ‰¾åˆ°äº®ç‚¹ã€ã€</li>
</ul>
</li>
<li>Shopeeè™¾çš®<ul>
<li>é¢è¯• 4.13<br>  æ‹‰æ–°ç³»ç»Ÿæ¡†æ¶ï¼Œéš¾ç‚¹ï¼Œå¹¿å‘Šé‡å¤ç‚¹å‡»<br>  kafkaæ¶æ„ï¼Œæ¶ˆæ¯é‡å¤æ¶ˆè´¹ï¼Œredisåˆ é™¤ç­–ç•¥<br>  lc239</li>
</ul>
</li>
<li>åŒ—æ£®äº‘è®¡ç®—ï¼ˆ-&gt; C# åŒ—äº¬&#x2F;æˆéƒ½ï¼‰<ul>
<li>é¢è¯• 4.17<br>  ç™½åå•ä½œç”¨ï¼Œkey-valueæ€ä¹ˆè®¾ç½®ï¼Ÿï¼Ÿ<br>  kafkaæ¶ˆè´¹æ¨¡å¼ï¼Ÿï¼Ÿä½¿ç”¨åœºæ™¯<br>  redisåŸºæœ¬ç±»å‹ï¼Œä½¿ç”¨åœºæ™¯<br>  CPU é£™é«˜ç³»ç»Ÿååº”æ…¢æ€ä¹ˆæ’æŸ¥ï¼Ÿ<br>  äº’æ–¥é”ï¼Œçº¿ç¨‹æ± ã€åˆ é™¤ç­–ç•¥ï¼Ÿ<br>  æ¥å£ä¸æŠ½è±¡ç±»ï¼Œå€¼å’Œå¼•ç”¨ï¼ŒArrayå’ŒArrayList<br>  <strong>Iocå®¹å™¨</strong>åŠä½¿ç”¨ï¼Œè®¾è®¡æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼çš„ä½¿ç”¨<br>  å­¦ä¹ è·¯çº¿ï¼ŒèŒä¸šè§„åˆ’</li>
</ul>
</li>
<li>Bossç›´è˜<ul>
<li>é¢è¯• 4.18<br>  æ‹‰æ–°ç³»ç»Ÿè§£å†³ç—›ç‚¹ï¼Œ<strong>æ‹¦æˆªé€»è¾‘</strong>ï¼Ÿï¼Ÿkafkaé‡å¤æ¶ˆè´¹ï¼ŒåŒæ—¶é‡å¤æ¶ˆè´¹ï¼Ÿï¼Ÿæœ¬åœ°ç¼“å­˜caffeine<br>  è·‘è…¿æŠ¢å•æ‚²è§‚é”ï¼Œä¸ºä»€ä¹ˆä¸ç”¨ä¹è§‚é”ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼ŒåŠ ç¼“å­˜å±‚ï¼Ÿï¼Ÿ<br>  äº’æ–¥é”é€‰å‹ã€reentranlockåº•å±‚åŸç†ï¼Ÿæ€ä¹ˆå®ç°å…¬å¹³é”ï¼Ÿï¼Ÿ<br>  å¹³æ—¶å¦‚ä½•å­¦ä¹ ï¼Ÿåšå®¢ï¼ŒæŠ€æœ¯è®ºå›ï¼Ÿ<br>  å¾®æœåŠ¡è°ƒç”¨ï¼Œè½®è¯¢ï¼Ÿï¼Ÿ</li>
</ul>
</li>
<li>é˜¿é‡Œ-é“¶æ³°<ul>
<li>é¢è¯• 4.19<br>  kafkaç»„æˆï¼Œé€‰å‹ï¼Œæ¶ˆæ¯ä¸¢å¤±ï¼Ÿredisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ<br>  <strong>sentinel</strong>æœåŠ¡æ²»ç†ï¼Œä½¿ç”¨åœºæ™¯ï¼Œè‡ªå·±è®¾è®¡ä¸€ä¸ªç»„ä»¶ç»Ÿè®¡å„ä¸ªå¾®æœåŠ¡çš„qps<br>  mysqlç´¢å¼•å»ºç«‹ä¸ä½¿ç”¨ï¼Œå…³ç³»å‹ä¸éå…³ç³»å‹ï¼Œç´¢å¼•ä¸­çš„èŠ‚ç‚¹ä¸Šæ˜¯ä»€ä¹ˆï¼Ÿï¼Ÿ</li>
</ul>
</li>
<li>ç¾å›¢Â·ä¼˜é€‰<ul>
<li>é¢è¯• 4.22<br>  kafkaæ¶ˆæ¯å †ç§¯ï¼Ÿï¼Ÿç™½åå•äºŒçº§ç¼“å­˜è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿæœ¬åœ°ã€redisã€æ•°æ®åº“åŒæ­¥ï¼Ÿï¼Ÿ<br>  æŠ¥è¡¨æ˜¯åœ¨æŸ¥å‡ºaè¡¨ååˆ†é¡µå†è”åˆæŸ¥bè¡¨ï¼Œè¿˜æ˜¯a,bè¡¨è”åˆæŸ¥è¯¢åå†åˆ†é¡µï¼Ÿ<br>  æŠ¢å•ä¹è§‚é”å®ç°ï¼Œreentrantlockåº•å±‚ï¼Œ<strong>å¯é‡å…¥ï¼Ÿï¼Ÿ</strong>é›†ç¾¤éƒ¨ç½²ä¸‹åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿï¼Ÿé€€æ¬¾äº‹åŠ¡ï¼Œå…ˆé€€æ¬¾å…ˆæµæ°´ï¼Ÿï¼Ÿ<br>  hashsetçš„valueå­˜äº†ä»€ä¹ˆï¼Ÿçº¿ç¨‹æ± åŠ å…¥çº¿ç¨‹ä½¿ç”¨ç©ºé—²çº¿ç¨‹ï¼Ÿè”åˆç´¢å¼•æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæµè§ˆå™¨è¾“å…¥urlçš„æµç¨‹ç”¨åˆ°ä»€ä¹ˆåè®®ï¼Ÿæ“ä½œç³»ç»Ÿä¸javaçº¿ç¨‹çš„è”ç³»ï¼Ÿ</li>
</ul>
</li>
<li>æ¯”äºšè¿ª<ul>
<li>é¢è¯• 4.24 æ”¾å¼ƒ</li>
</ul>
</li>
<li>é€”ç‰›æ—…æ¸¸ç½‘<ul>
<li>é¢è¯• 4.24<br>  jvmç±»åŠ è½½è¿‡ç¨‹ï¼ŒåŒäº²åŠ è½½æœºåˆ¶<br>  hashmapåŸç†ï¼Œå¤§å°ä¸º2^nï¼šhashå€¼ä¸æ•°ç»„å¤§å°ä¸è¿ç®—<br>  redis<strong>ç¼“å­˜å‡»ç©¿ï¼Œç¼“å­˜ç©¿é€</strong>ï¼Œåˆ†å¸ƒå¼é”<br>  SpringAOPã€springå¾ªç¯ä¾èµ–ã€äº‹åŠ¡ä¼ æ’­ï¼Œsqlä¼˜åŒ–</li>
</ul>
</li>
<li>å®‡é‡æ™Ÿ<ul>
<li>èƒŒæ™¯ï¼šåä¸ºï¼‹å›½èµ„ï¼Ÿï¼ŸåŠå¯¼ä½“</li>
<li>é¢è¯• 4.26<br>  å²—ä½ï¼šåœ¨çº¿ç³»ç»Ÿç”¨c&#x2F;cppï¼Œç¦»çº¿ç³»ç»Ÿç”¨pythonï¼Œéœ€è¦è½¬è¯­è¨€<br>  cæŒ‡é’ˆï¼Œæ™ºèƒ½æŒ‡é’ˆï¼Œå†…å­˜ç®¡ç†ï¼Œå¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹ï¼ŒäºŒå‰æ ‘&#x2F;çº¢é»‘æ ‘<br>  ç®—æ³•ï¼šåˆ¤æ–­ç‚¹åœ¨ä¸‰è§’å½¢å†…ï¼Œå¥å­ç¿»è½¬å•è¯ä¸ç¿»è½¬</li>
<li>æµ‹è¯„ 4.29<br>  <em>è¦å‰åä¸€è‡´ï¼Œç„¶åè¦è¡¨ç°çš„ä¹è§‚ç§¯æï¼Œå›¢é˜Ÿåˆä½œï¼Œä¸èƒ½é€‰å¸¦é¢†å¯¼æ„æ„¿çš„é€‰é¡¹ï¼Ÿä¸ä¸€å®šè¦è®¨å¥½å‹ï¼Œä¹Ÿå¯ä»¥ç¡¬æ°”ä¸€ç‚¹ï¼Ÿï¼Ÿ</em></li>
<li>ç»¼é¢ 5.18 æ”¾å¼ƒ</li>
</ul>
</li>
<li>çµåŠ¨ç§‘æŠ€<ul>
<li>AIèµ›é“åˆ›ä¸šå…¬å¸ï¼Ÿ<ul>
<li>åˆåˆ›å…¬å¸ï¼šä¸å¤§å‚ç²¾ç»†åŒ–çš„åˆ†å·¥ç›¸æ¯”ï¼Œåˆåˆ›å…¬å¸å¼€å‘å²—ä½éœ€è¦æ‰¿æ‹…çš„å·¥ä½œå¯èƒ½æ›´åŠ å¤æ‚ï¼Œç¼ºå°‘å®Œå–„çš„åŸ¹å…»æœºåˆ¶å’ŒæŠ€æœ¯ç§¯ç´¯ï¼›éœ€è¦æ›´å¤šçš„è‡ªæˆ‘å­¦ä¹ å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œé”»ç‚¼çš„æœºä¼šå¤šï¼Œå‘å±•æ›´çµæ´»ï¼Œæœ‰åˆ›æ–°çš„æœºä¼šï¼Œä¸å…¬å¸å…±åŒæˆé•¿ã€‚ã€‚</li>
<li>AIæ€è€ƒï¼šå¤–éƒ¨ï¼ˆæœªæ¥è¶‹åŠ¿ï¼ŒAIä¸€æ–¹é¢åœ¨å„è¡Œä¸šæ™®åŠï¼Œä¸€æ–¹é¢ä½¿ç”¨é—¨æ§›é™ä½ã€‚ã€‚è™½ç„¶ç®—æ³•ç ”ç©¶å²—ä½å°‘ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨å¾ˆå¤šAIåº”ç”¨å²—ä½ï¼‰ï¼Œå†…éƒ¨ï¼ˆå¤§å­¦æœŸé—´å¯¹AIçƒ­æƒ…å¾ˆé«˜ï¼Œåˆ°è€å¸ˆå®éªŒå®¤å­¦ä¹ ï¼ˆè‡ªå­¦ç»å…¸AIè¯¾ç¨‹ï¼‰ï¼Œåœ¨ä¸œèç”µä¿¡å®ä¹ ä¹Ÿå‚ä¸äº†å¯¹è¯æœºå™¨äººé¡¹ç›®ï¼ˆäº†è§£å¼€æºå¯¹è¯å¤§æ¨¡å‹ï¼‰ï¼Œå‚åŠ å¤ä»¤è¥ç ”ç©¶é¡¹ç›®ã€‚ã€‚ï¼‰</li>
<li>å²—ä½è®¤è¯†ï¼šè¿™æ˜¯ä¸€å®¶AISaaSå…¬å¸ï¼Œä¸“æ³¨äºæ‰“é€ å…¨çƒå•†ä¸šå¸‚åœºçš„é€šç”¨äººå·¥æ™ºèƒ½åº”ç”¨è½¯ä»¶å¹³å°ï¼Œæˆ‘ä»¬æ­£åœ¨æ·±åœ³å¯»æ±‚ä¸€ä½çƒ­æƒ…ç›®å…·æœ‰æŠ€æœ¯æ½œåŠ›çš„åº”å±Šæ¯•ä¸šç”Ÿåç«¯å·¥ç¨‹å¸ˆï¼Œä½œä¸ºåç«¯å·¥ç¨‹å¸ˆï¼Œæ‚¨å°†ä½¿ç”¨å¤§æ¨¡å‹å’Œå…ˆè¿›æŠ€æœ¯ï¼Œå¼€å‘å’Œå®æ–½å¯æ‰©å±•å’Œç¨³å¥çš„è½¯ä»¶è§£å†³æ–¹æ¡ˆã€‚ä¸€æ–¹é¢ï¼Œæˆ‘å¯¹AIç®—æ³•å’Œå¤§æ¨¡å‹æœ‰åŸºæœ¬äº†è§£ï¼Œä¸€æ–¹é¢æˆ‘æŒæ¡Javaå¼€å‘ã€ã€</li>
<li>äº§å“äº†è§£ï¼šGPT-4é©±åŠ¨çš„ç¿»è¯‘è½¯ä»¶ï¼Ÿï¼Ÿå‡ºæµ·ä¸šåŠ¡ï¼Ÿåˆ©ç”¨äººå·¥æ™ºèƒ½è¿›è¡Œç¿»è¯‘ã€æœ¬åœ°åŒ–å’Œå…¨çƒæ‰©å¼ </li>
<li>åé—®ï¼šä½œä¸ºåˆ›ä¸šå…¬å¸ï¼Œä¸ºä»€ä¹ˆä¸è¯·ç»éªŒä¸°å¯Œçš„å·¥ç¨‹å¸ˆï¼Œè€Œæ˜¯åº”å±Šç”Ÿï¼Ÿæˆ‘çš„æƒ…å†µï¼šå…­æœˆæ‰èƒ½å®ä¹ ï¼Œå·²ç­¾ä¸‰æ–¹</li>
</ul>
</li>
<li>åˆé¢ 4.30<br>  ç¾å›¢æ¯›åˆ©æ¶¦è®¡ç®—ï¼šæ”¯å‡ºï¼Œæ”¶å…¥ï¼Ÿï¼Ÿ<br>  æ˜ç¡®ï¼šå¯¹æ‚¨å…¬å¸çš„å²—ä½æœ‰å¼ºçƒˆçš„å€¾å‘ï¼Œæ”¶åˆ°offerå¯ä»¥ç«‹åˆ»å…¥èŒï¼ˆéå®ä¹ ï¼‰ï¼Œå¯¹è–ªèµ„è¦æ±‚ä¸é«˜ï¼ˆ15kï¼‰</li>
</ul>
</li>
<li>ä¸­å›½å¹³å®‰Â·å¹³å®‰é‡‘æœ<ul>
<li>åˆé¢ 4.30<br>  æœ€å·¦ç´¢å¼•åº•å±‚åŸç†ï¼ˆèšé›†ç´¢å¼•ï¼Ÿï¼Ÿï¼‰ï¼Œb+ç´¢å¼•ä¸å“ˆå¸Œç´¢å¼•ï¼ŒåŸå­ç±»ï¼Ÿï¼Ÿï¼Œhttpsï¼Œå¯¹ç§°åŠ å¯†<br>  æ„Ÿè§‰ä½ é¢è¯•ç»éªŒæŒºå¤šçš„ï¼Ÿï¼Ÿ</li>
</ul>
</li>
<li>realmeçœŸæˆ‘<ul>
<li>é¢è¯• 5.7<br>  é‡è½½ä¸é‡å†™ï¼Œhttpå¤´å†…å®¹ï¼Œæ­»é”ï¼Œç¼“å­˜ç±»å‹å’Œç†è§£<br>  redisæ•°æ®ç±»å‹ï¼Œé›†ç¾¤éƒ¨ç½²ï¼Œæ•°æ®ä¸€è‡´æ€§ï¼Œåœºæ™¯ï¼šæŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹æ•°æ®ä¸ºä»€ä¹ˆèŠ±äº†5sï¼Ÿ<br>  æ•°æ®åº“ç´¢å¼•å¤±æ•ˆæƒ…å†µ<br>  æ¯•è®¾åšçš„ä»€ä¹ˆã€‚ã€‚</li>
</ul>
</li>
<li>äº¤é€šé“¶è¡Œ<ul>
<li>é¢è¯• 5.9<br>  é¡¹ç›®ï¼Œspringï¼Œä¾èµ–æ³¨å…¥ï¼Œå•ä¾‹ï¼Œæ‰‹æ’•ï¼šé“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ï¼Ÿ</li>
</ul>
</li>
<li>ç¾çš„Â·è½¯ä»¶å·¥ç¨‹é™¢<ul>
<li>ä¸€é¢ 5.10<br>  lognæ›²çº¿ï¼Œå¿«é€Ÿæ’åºä¸ºä»€ä¹ˆä¸ç¨³å®š<br>  å¯é‡å¤è¯»åº•å±‚åŸç†ï¼Œmvccï¼ŒRedisåˆ†å¸ƒå¼é”</li>
<li>äºŒé¢ 5.10<br>  ä¸‰ä¸ªä¼˜ç‚¹ï¼Œä¸¾ä¾‹å‹¤å¥‹</li>
<li>hré¢ 5.11<br>  éƒ¨é—¨ï¼ˆè½¯ä»¶å·¥ç¨‹é™¢åŠå…¬ç³»ç»Ÿï¼‰ä¸šåŠ¡ï¼ˆåŠå…¬ç³»ç»Ÿï¼‰åŒä¼‘ï¼ˆä¿è¯ï¼Ÿï¼Ÿï¼‰<br>  åŸºæœ¬å·¥èµ„ï¼ˆ12^12+12^3^ç»©æ•ˆï¼‰äº”é™©ä¸€é‡‘ï¼ˆæ¯”ä¾‹ï¼Ÿï¼Ÿï¼‰é¤è¡¥ï¼ˆæ¯æ—¥20ï¼‰æˆ¿è¡¥ï¼ˆç§Ÿæˆ¿900&#x2F;æœˆï¼‰</li>
<li><strong>offer 5.14</strong></li>
<li>å…¥èŒ 7.8</li>
</ul>
</li>
<li>ä¸œæ–¹è´¢å¯Œ<ul>
<li>ä¸€é¢ 5.13<br>  ç¼“å­˜ä¸æ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œå¾®æœåŠ¡æ¶æ„ï¼ŒæœåŠ¡æ²»ç†</li>
</ul>
</li>
</ul>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li>æŠ•é€’ï¼šå®˜ç½‘ï¼ˆä½¿ç”¨å†…æ¨ç ï¼‰ï¼ŒBossç›´è˜ï¼ˆå¿«é€Ÿç­›é€‰ç®€å†ï¼‰ï¼Œå®£è®²ï¼ˆç”šè‡³ç›´é€šé¢è¯•ï¼‰</li>
<li>å‰æœŸï¼šä¸­å‚åˆ·ç»éªŒï¼Œäº†è§£é¢è¯•æµç¨‹ä»¥åŠå„éƒ¨åˆ†å¸¸è€ƒé¢˜ï¼ŒæŒæ¡å…«è‚¡ï¼Œç†Ÿæ‚‰ä¸ªäººå®ä¹ å’Œé¡¹ç›®æè¿°</li>
<li>åæœŸï¼šå¤§å‚è¿‡ä¸å»ï¼Œå°å‚æ¡æ¼ï¼Œè™½ç„¶å…«è‚¡åŸºæœ¬è¦†ç›–è¿˜éœ€æ·±æŒ–é¡¹ç›®å’Œå®ä¹ ä¸­çš„æ¯ä¸€ä¸ªæ­¥éª¤ï¼Œäº†è§£åœºæ™¯è§£å†³æ–¹æ³•å’Œé¡¹ç›®ä¼˜åŒ–æ–¹æ¡ˆ</li>
<li>æ”¹è¿›ï¼šå‰æœŸæµªè´¹äº†å¾ˆå¤šä¸­å°å‚æœºä¼šï¼Œç™½ç»™å‚æ²¡æŠŠæ¡ä½ï¼ˆæŒ‚ç§‘+ç»ˆé¢å‡ºé”™ï¼‰ï¼Œå¤§å‚èƒ½åŠ›ä¸è¶³ï¼Œæœ€å¥½ä¸€å®šè¦å‚åŠ ç§‹æ‹›ã€‚ã€‚ã€‚</li>
</ul>
<hr>

<h1 id="ç­¾çº¦"><a href="#ç­¾çº¦" class="headerlink" title="ç­¾çº¦"></a>ç­¾çº¦</h1><ul>
<li>æµç¨‹ï¼šç­¾ä¸‰æ–¹ï¼ˆ- æ¯çº¦ï¼‰- å…¥èŒæŠ¥é“ - ç­¾åŠ³åŠ¨åè®®ï¼ˆä¸‰æ–¹å¤±æ•ˆï¼‰- è¯•ç”¨æœŸ - è½¬æ­£</li>
<li>æ–‡ä»¶<ul>
<li>æ¯•ä¸šç”Ÿæ¨èè¡¨ï¼šä¸€ä»½åŸä»¶ï¼Œæ¯çº¦åè¦å–å›</li>
<li>æ¯•ä¸šç”Ÿå°±ä¸šåè®®ï¼šå³ä¸‰æ–¹ï¼Œä¸€æ¬¡æ¯çº¦æœºä¼š</li>
<li>ä¸¤æ–¹åè®®ï¼šçº¦æŸå°</li>
</ul>
</li>
<li>è¿çº¦ï¼ˆä¸€æ¬¡æœºä¼šï¼‰<ul>
<li>æäº¤è¿çº¦ç”³è¯·ä¹¦ï¼šæœ¬äººç­¾å­—ï¼Œæ— éœ€æä¾›åŸå•ä½è§£çº¦å‡½ï¼Œæ¯æœˆçš„10å·ã€20å·ã€30å·ä¹‹å‰äº¤ç»™è¾…å¯¼å‘˜</li>
<li>è¿çº¦ç”³è¯·é€šè¿‡ï¼šåå•è§â€œå°±ä¸šåœ¨çº¿â€<a target="_blank" rel="noopener" href="https://jyzx.scut.edu.cn/">https://jyzx.scut.edu.cn/</a></li>
<li>åŸå•ä½è§£çº¦æµç¨‹ï¼š1ã€æ‰‹å†™å¹¶ç­¾åä¹¦é¢è¿çº¦ç”³è¯·ã€‚2ã€è¿çº¦é‡‘ã€‚è·å¾—åŸå•ä½è§£çº¦å‡½ã€‚</li>
<li>æäº¤â€œæ–°å•ä½ç›–ç« çš„è¿çº¦ç”³è¯·è¡¨â€å’Œâ€œåŸå•ä½è§£çº¦å‡½â€ç»™å­¦æ ¡ï¼Œå®¡æ ¸é€šè¿‡åç”Ÿæˆæ–°å°±ä¸šåè®®ä¹¦ï¼Œä¸æ–°å•ä½ç­¾è®¢ä¸‰æ–¹ã€‚</li>
</ul>
</li>
<li>åº”å±Šæ¯•ä¸šç”Ÿ<ul>
<li>æ‹©ä¸šæœŸï¼šåº”å±Šç”Ÿèº«ä»½é€šå¸¸å¯ä»¥ä¿ç•™ä¸¤å¹´ã€‚</li>
<li>å¤±æ•ˆï¼šä¸€æ—¦å°±ä¸šæˆ–ç¼´çº³ç¤¾ä¿ï¼Œåº”å±Šæ¯•ä¸šç”Ÿèº«ä»½å³å¤±æ•ˆã€‚</li>
<li>å¥½å¤„ï¼šé“¶è¡Œã€å›½ä¼æ ¡å›­æ‹›è˜ä¼˜å…ˆï¼Œè½æˆ·æ”¿ç­–å¥½.</li>
</ul>
</li>
<li>æˆ·å£<ul>
<li>æˆ·å£æœªè¿æ¥å­¦æ ¡çš„æ¯•ä¸šç”Ÿï¼Œå¦‚æˆ·å£éœ€è¿å¾€å·¥ä½œå•ä½çš„æŒ‰æˆ·ç±æ‰€åœ¨åœ°å…¬å®‰æœºå…³çš„ç®¡ç†è§„å®šåŠç†ã€‚</li>
<li>ä¸åŒçš„åŸå¸‚å’Œåœ°åŒºæœ‰ä¸åŒçš„è½æˆ·æ”¿ç­–ï¼Œå¯¹äºé«˜æ ¡ç ”ç©¶ç”Ÿæ¯•ä¸šåçš„è½æˆ·æ¡ä»¶ã€æµç¨‹å’Œæ‰€éœ€ææ–™éƒ½å¯èƒ½æœ‰ä¸åŒçš„è§„å®šã€‚ä¸€äº›åŸå¸‚å¯èƒ½ä¼šå¯¹åº”å±Šæ¯•ä¸šç”Ÿæä¾›æ›´ä¸ºå®½æ¾çš„è½æˆ·æ”¿ç­–ã€‚</li>
<li>æˆ·å£ä¿ç•™ï¼šå¦‚æœæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„å·¥ä½œæˆ–è€…å¸Œæœ›ç»§ç»­æ·±é€ ï¼Œå¯ä»¥é€‰æ‹©å°†æˆ·å£ä¿ç•™åœ¨åŸå­¦æ ¡æˆ–åŸç±ã€‚åœ¨ä¿ç•™æœŸé—´ï¼Œéœ€è¦æ³¨æ„ä¿ç®¡å¥½è‡ªå·±çš„æˆ·å£é¡µå’Œç›¸å…³è¯æ˜ææ–™ï¼Œä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li>æ¯•ä¸šå»å‘ç™»è®°ä¸æ¡£æ¡ˆä¿¡æ¯å¡«æŠ¥<ul>
<li>æ¡£æ¡ˆæ•´ç†ï¼šå®¶åº­æƒ…å†µã€å­¦ä¹ æˆç»©ã€æ”¿æ²»æ€æƒ³è¡¨ç°ã€èº«ä½“çŠ¶å†µç­‰</li>
<li>æ¡£æ¡ˆè½¬é€’ï¼šæŒ‰â€œå¹¿ä¸œå¤§å­¦ç”Ÿå°±ä¸šåˆ›ä¸šâ€å°ç¨‹åºå¡«å†™åœ°å€è½¬é€’ï¼Œä¸€èˆ¬äº2024å¹´7æœˆä¸­ä¸‹æ—¬å¼€å§‹å¯„é€</li>
<li>é€šè¿‡â€œå¹¿ä¸œå¤§å­¦ç”Ÿå°±ä¸šåˆ›ä¸šâ€å°ç¨‹åºç­¾è®¢å°±ä¸šåè®®ä¹¦ä¸”å›ä¼ å®¡æ ¸å®Œæˆçš„ï¼Œå°±ä¸šä¿¡æ¯åŒæ­¥è‡³â€œæ¯•ä¸šå»å‘ç™»è®°â€å’Œâ€œåˆå§‹æ¡£æ¡ˆä¿¡æ¯â€æ¨¡å—</li>
</ul>
</li>
<li>ç¤¾ä¿å…¬ç§¯é‡‘<ul>
<li>äº”é™©ï¼šå³ç¤¾ä¿ï¼Œå…»è€ã€åŒ»ç–—ã€ç”Ÿè‚²ã€å·¥ä¼¤ã€å¤±ä¸šä¿é™©ï¼Œæ¯æœˆç¼´ï¼Œå…¬å¸ç¼´å¤§å¤´ä¸ªäººç¼´å°å¤´ï¼Œé€šå¸¸æŒ‰å›½å®¶åŠå½“åœ°æ ‡å‡†ç¼´çº³</li>
<li>ä¸€é‡‘ï¼šå³ä½æˆ¿å…¬ç§¯é‡‘ï¼ŒæŒ‰ â€œä¸ªäººæœˆè–ª&#x2F;å½“åœ°å¹³å‡å±…æ°‘æ”¶å…¥â€ ä¸ºç¼´çº³åŸºæ•°</li>
<li>åˆ°æ‰‹å·¥èµ„ &#x3D; ç¨å‰å¹´åŒ… - ç¨æ¬¾ - äº”é™©ä¸€é‡‘ï¼ˆä¸ªäººç¼´çº³éƒ¨åˆ†ï¼‰<table>
<thead>
<tr>
<th>å†…å®¹</th>
<th>ä¸ªäººç¼´çº³æ¯”ä¾‹</th>
<th>å•ä½ç¼´çº³æ¯”ä¾‹</th>
<th>ä½œç”¨</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>å…»è€ä¿é™©</td>
<td>8%</td>
<td>20%</td>
<td>ç´¯è®¡äº¤æ»¡15å¹´ï¼Œé€€ä¼‘åç»ˆèº«äº«å—å…»è€é‡‘</td>
<td>èƒ½ä¸­æ–­æ²¡æœ‰å½±å“</td>
</tr>
<tr>
<td>åŒ»ç–—ä¿é™©</td>
<td>2%</td>
<td>10%</td>
<td>åŒ»ç–—æŠ¥é”€50%ä»¥ä¸Šé€€ä¼‘åäº«å—åŒ»ä¿å¾…é‡ç‰¹ç‚¹</td>
<td>ä¸­æ–­3ä¸ªæœˆä»¥ä¸Šå¤±æ•ˆ</td>
</tr>
<tr>
<td>ç”Ÿè‚²ä¿é™©</td>
<td>0%</td>
<td>0.8%</td>
<td>ç”Ÿè‚²åèµ„æ–™ç»™å•ä½ï¼ŒæŠ¥é”€ç›¸å…³è´¹ç”¨</td>
<td>ç”Ÿè‚²æ´¥è´´ä¸ªäººä¸èƒ½å¾®çº³</td>
</tr>
<tr>
<td>å·¥ä¼¤ä¿é™©</td>
<td>0%</td>
<td>0.2~1.4%</td>
<td>å·¥ä¼¤æ—¶è·å¾—åŒ»ç–—è´¹ç”¨ï¼Œä¿å·¥ä½œæœŸé—´å’Œä¸‹ç­é€”ä¸­</td>
<td>å·¥ä¼¤ä¿é™©ä¸ªäººä¸èƒ½ç¼´çº³</td>
</tr>
<tr>
<td>å¤±ä¸šä¿é™©</td>
<td>1%</td>
<td>2%</td>
<td>ç¼´è´¹æ»¡1å¹´ï¼Œå¤±ä¸šåæŒ‰ç…§ç¼´è´¹å¹´é™é¢†å–å¤±ä¸šä¿é™©é‡‘ï¼Œä¸»åŠ¨è¾èŒçš„ä¸å¯ä»¥é¢†å–</td>
<td>å¤±ä¸šä¿é™©ä¸ªäººä¸èƒ½ç¼´çº³</td>
</tr>
<tr>
<td>ä½æˆ¿å…¬ç§¯é‡‘</td>
<td>5~12%</td>
<td>5~12%</td>
<td>ç§Ÿæˆ¿ã€ä¹°æˆ¿ã€è£…ä¿®æˆ¿éƒ½å¯ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯è´·æ¬¾ä¹°æˆ¿åˆ©ç‡ä½</td>
<td>å¯æ–­ç¼´(å½±å“è´·æ¬¾)ï¼Œå¯æå–&#x2F;å¼‚åœ°è½¬ç§»</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/10/20/%E6%98%A5%E6%8B%9B2024/" data-id="cmjzvj9mf000rhgv57qglblhx" data-title="æ˜¥ æ‹› 2024" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-é¢è¯•_ä¸ªäºº" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/13/%E9%9D%A2%E8%AF%95_%E4%B8%AA%E4%BA%BA/" class="article-date">
  <time class="dt-published" datetime="2023-10-13T03:11:00.000Z" itemprop="datePublished">2023-10-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/13/%E9%9D%A2%E8%AF%95_%E4%B8%AA%E4%BA%BA/">é¢ é€ | ä¸ªäºº</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ä¸ªäºº"><a href="#ä¸ªäºº" class="headerlink" title="ä¸ªäºº"></a>ä¸ªäºº</h2><ul>
<li><p><strong>è‡ªæˆ‘ä»‹ç»</strong><br>1ã€é¢è¯•å®˜æ‚¨å¥½ï¼Œæˆ‘æ˜¯è”¡æ«ï¼Œæœ¬ç§‘å°±è¯»äºåå—ç†å·¥å¤§å­¦è®¡ç®—æœºå­¦é™¢<br>2ã€åœ¨æ ¡æœŸé—´ï¼Œæˆ‘å­¦ä¹  Java å¼€å‘æŠ€æœ¯ä¸ç›¸å…³ç»„ä»¶ï¼Œä¹Ÿè·Ÿç€å­¦æ ¡çš„åˆ›ä¸šå›¢é˜Ÿçš„å¼€å‘äº†ä¸€äº›é¡¹ç›®<br>3ã€æœ‰å‡ æ®µå®ä¹ ç»å†ï¼Œè®©æˆ‘å¯¹å›¢é˜Ÿä¸­çš„å¼€å‘æµç¨‹æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œå¹¶ä¸”ä¹Ÿå‚ä¸åˆ°äº†å®é™…ä¸šåŠ¡ä»£ç çš„ç¼–å†™<br>4ã€æˆ‘ä¸æ‚¨å…¬å¸å²—ä½æ¯”è¾ƒåŒ¹é…ï¼šä¸­å°æ•°æ®è½¬å‘ã€ã€é“¶è¡Œæ•°å­—åŒ–è½¬å‹ã€ã€<br>5ã€æˆ‘çš„æ±‚èŒåŠ¨æœºï¼šæŒ‘æˆ˜æ€§ï¼Œæˆé•¿ï¼Œæœºä¼šï¼Œï¼Œè‡ªå·±æ¸…æ™°çš„èŒä¸šè§„åˆ’ï¼Œè¡¨ç¤ºæ„¿æ„é•¿æœŸä»äº‹è¿™ä¸ªå²—ä½ï¼Œï¼Œ</p>
</li>
<li><p>è‡ªæˆ‘æ¨èã€‚<br>æˆ‘è§‰å¾—æˆ‘å¯¹æ‰€ä»äº‹çš„æ¯ä¸€ä¸ªé¡¹ç›®éƒ½å¾ˆåŠªåŠ›ã€è´Ÿè´£ã€å‹¤å‹‰ã€‚æˆ‘åœ¨åŠªåŠ›æˆä¸ºä¸€ä¸ªèƒ½å¤Ÿä¸æƒ§è§£å†³å›°éš¾å’Œèƒ½å¤ŸæŒç»­å­¦ä¹ çš„äººã€‚</p>
</li>
<li><p>æ ¡å›­ç»å†ï¼Ÿ</p>
<ul>
<li>å¤§å­¦é‡Œæœ€å¤§çš„æ”¶è·ï¼šåœ¨æ¯æ ¡çš„å…³æ€€ä¸­èŒå£®æˆé•¿ï¼Œæ•¢äºå°è¯•ï¼Œä»è¯¾å†…å­¦ä¹ ã€ç§‘ç ”ã€é¡¹ç›®ç»éªŒéƒ½ç§¯ç´¯äº†ï¼Œï¼Œï¼ˆå› ä¸ºå­¦æ ¡é¼“åŠ±æˆ‘ä»¬æ•¢äºå°è¯•ï¼Œåˆä¼šåŒ…å®¹æˆ‘ä»¬çŠ¯é”™ï¼Œæ¿€åŠ±æˆ‘ä»¬æˆé•¿ï¼‰</li>
<li>é‡æ¥ä¸€æ¬¡å“ªæ–¹é¢å¯ä»¥åšçš„æ›´å¥½ï¼šå¤šèå…¥ç¤¾ä¼šï¼Œå¤šå°è¯•æ–°ä¸œè¥¿ï¼ŒæŠŠæŠ€èƒ½å­¦çš„æ›´åŠ æ·±å…¥ã€ã€</li>
<li>æŒ‚ç§‘ï¼šç¡®å®æŒ‚äº†æ•°å­¦ï¼Œä¸»è¦åŸå› æ˜¯åˆšå…¥å­¦æ²¡æœ‰é€‚åº”å¤§å­¦çš„è¿™ç§å­¦ä¹ æ¨¡å¼ï¼ˆä¸Šè¯¾æ²¡å­¦è¿›å»ï¼Œè¯¾åä¹Ÿæ²¡è¡¥ä¸Šæ¥ï¼Œæˆ–è€…è¯´ä¸çŸ¥é“å¦‚ä½•è‡ªå­¦ï¼‰åé¢çš„è¯¾ç¨‹æˆ‘è™½ç„¶æœ‰çš„åœ¨è¯¾ä¸Šæ²¡å­¦åˆ°ä»€ä¹ˆï¼Œä½†æ˜¯è¯¾åä¼šä¸»åŠ¨åœ°é€šè¿‡ç½‘ç»œè¯¾ç¨‹ã€æŠ€æœ¯ç½‘ç«™ç­‰æ–¹å¼å¢è¿›äº†è§£ï¼Œä¹Ÿæ˜¯å¢å¼ºäº†ä¿¡æ¯æŸ¥æ‰¾å’Œè‡ªæˆ‘å­¦ä¹ çš„èƒ½åŠ›ã€ã€</li>
<li>å‚åŠ äº†ä»€ä¹ˆæ¯”èµ›ï¼Œå®éªŒå®¤é¡¹ç›®ï¼Ÿ<br>  å‚åŠ è¿‡å­¦é™¢çš„acmç«èµ›ï¼Œï¼Œåˆ°è€å¸ˆçš„å®éªŒå®¤å­¦ä¹ è¿‡ï¼Œå‚ä¸è¿‡ä¸€äº›ç§‘ç ”å­¦ä¹ çš„é¡¹ç›®ï¼Œå‘å¸ƒè¿‡ä¸€ç¯‡è®ºæ–‡ã€‚æˆ‘ç§¯æå‚ä¸å®è·µï¼Œæœ‰ä¸€äº›é¡¹ç›®å¼€å‘ç»éªŒï¼Œæœ‰ä¸‰æ®µå®ä¹ ç»å†ã€‚ã€‚ã€‚</li>
<li>ä½ çš„è®ºæ–‡ï¼Ÿ<br>  æˆ‘å‚åŠ äº†ä¸€ä¸ªâ€œæ·±åº¦å­¦ä¹ -å›¾åƒå¤„ç†â€é¡¹ç›®ã€‚äº”å‘¨çš„æ—¶é—´é‡Œï¼Œé€šè¿‡å¯¼å¸ˆçš„æˆè¯¾è®²è§£ä¸æŒ‡å¯¼ï¼Œæˆ‘æ‹“å±•äº†è¯¥é¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†ï¼Œæ¥ç€ç€æ‰‹é˜…è¯»æ–‡çŒ®å’ŒåŠ¨æ‰‹åšå®éªŒã€‚ä¹‹åï¼Œæˆ‘ä¾¿ä¸å°ç»„æˆå‘˜ç´§å¯†åˆä½œï¼Œä»ä¸»é¢˜ç¡®å®šï¼Œåˆ°æ–‡çŒ®çš„æ·±å…¥ç ”è¯»ï¼Œå®Œæˆè®ºæ–‡å†™ä½œï¼Œæœ€ç»ˆä¹Ÿå‘è¡¨äº†ä¸€ç¯‡è®ºæ–‡ã€‚ä¸»è¦æ˜¯å¸Œæœ›æ¥è§¦å­¦ä¹ äººå·¥æ™ºèƒ½è¿™ä¸€å—çš„çŸ¥è¯†ï¼ˆåœ¨å­¦æ ¡æ²¡æœ‰æœºä¼šå’Œèµ„æºï¼Œï¼Œï¼Œï¼‰</li>
<li>è¯´ä¸€ä¸‹ä½ çš„ç¤¾å›¢æ´»åŠ¨ï¼Ÿ<br>  æˆ‘åœ¨åå·¥é’å¹´å¿—æ„¿è€…æŒ‡å¯¼ä¸­å¿ƒå®£ä¼ éƒ¨æ‹…ä»»äº†ä¸ºæœŸä¸€å¹´çš„ï¼ˆå‰¯ï¼‰éƒ¨é•¿ï¼Œè¿™å°†æˆ‘çš„æ‘„å½±èƒ½åŠ›å’Œå¯¹å¿—æ„¿æœåŠ¡çš„çƒ­æƒ…ç»“åˆèµ·æ¥ã€‚æˆ‘å¤šæ¬¡æ‰¿æ‹…å¿—æ„¿æ´»åŠ¨ç°åœºçš„æ‹æ‘„ä»»åŠ¡ï¼Œç”¨ç›¸æœºå±•ç°å¿—æ„¿è€…ä»¬çš„å¥‰çŒ®ç²¾ç¥ï¼Œé€šè¿‡é’å¿—å…¬ä¼—å·æ¨æ–‡ç­‰å½¢å¼åœ¨æ ¡å›­ä¸­ä¼ æ’­å¿—æ„¿ç²¾ç¥ã€‚</li>
</ul>
</li>
<li><p><strong>ä½ å¯¹æœ¬å…¬å¸çš„æƒ…å†µäº†è§£å—ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬å…¬å¸ï¼Ÿ</strong><br>1ã€å¯¹å…¬å¸çš„äº†è§£ï¼šã€ã€ï¼ˆè¡Œä¸šçš„å‰æ™¯+å…¬å¸çš„è§„æ¨¡+å…¬å¸åœ¨è¡Œä¸šä¸­çš„åœ°ä½+ç‰¹è‰²äº§å“ï¼‰<br>2ã€è‡ªå·±è·Ÿå²—ä½çš„åŒ¹é…ï¼šã€ã€ï¼ˆç»“åˆå²—ä½è¦æ±‚+è‡ªæˆ‘ç»å†ï¼‰<br>3ã€ç¬¦åˆè‡ªå·±çš„èŒä¸šè§„åˆ’ï¼šã€ã€</p>
</li>
<li><p>äº†è§£ Java åç«¯å¼€å‘è¿™ä¸ªè¡Œä¸šå²—ä½å—ï¼Ÿæ˜¯å¦ç¬¦åˆæœŸè®¸ï¼Ÿ<br>æˆ‘è®¤ä¸º Java åç«¯å¼€å‘æ˜¯ä¸€ä¸ªéå¸¸æœ‰æŒ‘æˆ˜æ€§çš„é¢†åŸŸï¼Œå¼€å‘èƒ½å¤Ÿä¸ºäººä»¬çš„ç”Ÿæ´»å¸¦æ¥ä¾¿åˆ©çš„è½¯ä»¶ï¼Œå¯¹æˆ‘æ¥è¯´æ˜¯æœ‰è¶£çš„ã€‚åœ¨äº’è”ç½‘ä¼ä¸šåº”ç”¨å¹¿æ³›ï¼Œæœ‰æ´»åŠ›ï¼Œå‘å±•å‰æ™¯å¥½ï¼Ÿï¼Ÿ<br>Java ä½œä¸ºä¸€é—¨å¼ºå¤§è€Œçµæ´»çš„ç¼–ç¨‹è¯­è¨€ï¼Œå…·æœ‰å¹¿æ³›çš„åº”ç”¨é¢†åŸŸï¼Œå°¤å…¶åœ¨ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸­è¡¨ç°å‡ºè‰²ã€‚<br>æˆ‘åœ¨å¤§å­¦æœŸé—´å­¦ä¹ å’Œåšé¡¹ç›®çš„è¿‡ç¨‹ä¸­æ¥è§¦åˆ°äº†Javaç¼–ç¨‹ï¼Œå¹¶ä¸”åœ¨åæ¥çš„æ—¶é—´åŠ å¼ºäº†å¯¹ç›¸å…³æŠ€æœ¯çš„å­¦ä¹ ã€‚æˆ‘æœŸæœ›èƒ½å¤Ÿåœ¨ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§ã€åˆ›æ–°æ€§å’Œå­¦ä¹ æœºä¼šçš„å›¢é˜Ÿä¸­å·¥ä½œï¼Œæˆ‘ä¹Ÿå¸Œæœ›è‡ªå·±èƒ½æˆä¸ºä¸€ä¸ªèƒ½å¤Ÿè§£å†³å›°éš¾å’Œä¸æ–­å­¦ä¹ çš„äººã€‚Javaå¼€å‘æ˜¯ä¸€ä¸ªä¸é”™çš„é¢†åŸŸã€‚</p>
</li>
<li><p>â€œæƒ³åˆ°ä¸€ä¸ªä»€ä¹ˆæ ·çš„å¹³å°å‘å±•ï¼Ÿâ€<br>æˆ‘å¸Œæœ›èƒ½å¤Ÿåœ¨ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„ç¯å¢ƒä¸­å·¥ä½œï¼Œå¯ä»¥è®©æˆ‘ä¸æ–­å­¦ä¹ å’Œæå‡è‡ªå·±ã€‚<br>æˆ‘æ³¨æ„åˆ°è´µå…¬å¸åœ¨ï¼ˆè¡Œä¸š&#x2F;é¢†åŸŸï¼‰å–å¾—äº†æ˜¾è‘—çš„æˆå°±ï¼Œæˆ‘ç›¸ä¿¡æˆ‘çš„Javaå¼€å‘æŠ€èƒ½å¯ä»¥åœ¨è¿™é‡Œå‘æŒ¥å‡ºè‰²çš„ä½œç”¨ï¼Œæˆ‘è®¤ä¸ºé€šè¿‡åœ¨è¿™æ ·ä¸€ä¸ªé¢†å…ˆçš„å¹³å°ä¸Šå·¥ä½œï¼Œæˆ‘å°†æœ‰æœºä¼šä¸ºå…¬å¸çš„å‘å±•å’Œåˆ›æ–°åšå‡ºè´¡çŒ®ï¼Œä¸å…¬å¸ä¸€èµ·æˆé•¿ã€‚</p>
</li>
<li><p>â€œå¯¹äºç¬¬ä¸€ä»½å·¥ä½œï¼Œä½ æ›´çœ‹é‡ä»€ä¹ˆï¼Ÿâ€</p>
<ol>
<li><strong>æŠ€æœ¯æŒ‘æˆ˜å’Œå­¦ä¹ æœºä¼šï¼š</strong> å¯¹æŠ€æœ¯æŒ‘æˆ˜æœ‰çƒ­æƒ…ï¼Œæ¸´æœ›å­¦ä¹ æ–°æŠ€æœ¯ã€‚å¸Œæœ›è¿™ä»½å·¥ä½œèƒ½å¤Ÿæä¾›ä¸°å¯Œçš„é¡¹ç›®ç»éªŒï¼Œå¿«é€Ÿæˆé•¿ã€ã€</li>
<li><strong>å¯¼å¸ˆä¸å›¢é˜Ÿï¼š</strong> å½“ç„¶æˆ‘å¸Œæœ›ç§¯ç´¯å›¢é˜Ÿåä½œã€é¡¹ç›®å¼€å‘çš„ç»å†ï¼Œä¸ä¸åŒçš„äººåˆä½œï¼Œåˆ†äº«çŸ¥è¯†å¹¶å…±åŒè§£å†³é—®é¢˜ã€‚å¯¹æˆ‘çš„èŒä¸šç”Ÿæ¶¯è¿›è¡Œè§„åˆ’ã€ã€</li>
<li><strong>å…¬å¸æ–‡åŒ–å’Œä»·å€¼è§‚ï¼š</strong> å¼ºè°ƒä½ å¯¹å…¬å¸æ–‡åŒ–å’Œä»·å€¼è§‚çš„è®¤åŒã€‚ä½ å¯ä»¥è¯´ä½ æ›´çœ‹é‡ä¸€ä»½å·¥ä½œèƒ½å¤Ÿä¸ä½ çš„ä»·å€¼è§‚ç›¸ç¬¦ï¼Œè®©ä½ åœ¨ä¸€ä¸ªç§¯æã€æ”¯æŒæ€§çš„å·¥ä½œç¯å¢ƒä¸­å·¥ä½œã€‚</li>
</ol>
</li>
<li><p>è®¤ä¸ºæ€æ ·æ˜¯å¥½çš„å¼€å‘å·¥ç¨‹å¸ˆï¼Ÿ<br>1.æŠ€æœ¯æ·±åº¦å’Œå¹¿åº¦ï¼šäº†è§£Javaè¯­è¨€çš„æ–¹æ–¹é¢é¢ï¼ŒåŒ…æ‹¬åŸºç¡€è¯­æ³•ã€å¤šçº¿ç¨‹ã€IOç­‰ï¼Œç†Ÿæ‚‰å¸¸ç”¨çš„æ¡†æ¶å’Œå·¥å…·ã€‚ä»¥åŠå…¶ä»–ç›¸å…³æŠ€æœ¯<br>2.é—®é¢˜è§£å†³èƒ½åŠ›ï¼šå…·æœ‰è‰¯å¥½çš„é—®é¢˜è§£å†³èƒ½åŠ›ã€‚èƒ½å¤Ÿç‹¬ç«‹åˆ†æé—®é¢˜ã€ç†è§£éœ€æ±‚ã€æå‡ºè§£å†³æ–¹æ¡ˆï¼Œå¹¶å¿«é€Ÿæœ‰æ•ˆåœ°å®ç°ã€‚<br>3.ä»£ç è´¨é‡ï¼šå†™å‡ºé«˜è´¨é‡çš„ã€å¯ç»´æŠ¤çš„ä»£ç ã€‚æ³¨é‡ä»£ç è§„èŒƒã€æ¨¡å—åŒ–å’Œå¯æµ‹è¯•æ€§ã€‚<br>4.å›¢é˜Ÿåä½œï¼šè‰¯å¥½çš„å›¢é˜Ÿåä½œèƒ½åŠ›æ˜¯è½¯ä»¶å¼€å‘ä¸­è‡³å…³é‡è¦çš„ä¸€ç¯ã€‚æœ‰æ•ˆæ²Ÿé€šã€åˆ†äº«çŸ¥è¯†ï¼Œå¹¶èƒ½å¤Ÿä¸å›¢é˜Ÿæˆå‘˜åä½œè§£å†³é—®é¢˜ã€‚<br>5.æŒç»­å­¦ä¹ ï¼šæŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œä¸€ä¸ªå¥½çš„å¼€å‘è€…åº”è¯¥ä¿æŒæŒç»­å­¦ä¹ çš„ä¹ æƒ¯ï¼Œå…³æ³¨æ–°æŠ€æœ¯çš„å‘å±•ï¼Œéšæ—¶å‡†å¤‡é€‚åº”è¡Œä¸šçš„å˜åŒ–ã€‚<br>6.åˆ›æ–°æ€ç»´ï¼šå–„äºæå‡ºæ–°çš„ã€åˆ›é€ æ€§çš„è§£å†³æ–¹æ¡ˆï¼Œå¯¹äºæå‡äº§å“å’Œå›¢é˜Ÿçš„æ•ˆç‡å…·æœ‰ç§¯æçš„ä½œç”¨ã€‚<br>7.ç”¨æˆ·å¯¼å‘ï¼šç†è§£äº§å“å’Œé¡¹ç›®çš„ä¸šåŠ¡éœ€æ±‚ï¼Œç«™åœ¨ç”¨æˆ·çš„è§’åº¦æ€è€ƒé—®é¢˜ï¼Œä»¥ç”¨æˆ·ä½“éªŒä¸ºä¸­å¿ƒã€‚</p>
</li>
</ul>
<hr>

<h2 id="å®ä¹ ï¼ˆéªä¼¯ï¼‰"><a href="#å®ä¹ ï¼ˆéªä¼¯ï¼‰" class="headerlink" title="å®ä¹ ï¼ˆéªä¼¯ï¼‰"></a>å®ä¹ ï¼ˆéªä¼¯ï¼‰</h2><ul>
<li><p>å¹¿å·éªä¼¯ç½‘ç»œï¼Ÿ<br>ä½¿å‘½ï¼šè®©ç§»åŠ¨äº’è”ç½‘è¥é”€ç®€å•é«˜æ•ˆ; ä»·å€¼è§‚ï¼šåˆ›é€ ä»·å€¼ï¼Œåˆ†äº«ä»·å€¼; æ„¿æ™¯ï¼šåšæœ€å—ä¿¡èµ–çš„ç§»åŠ¨äº’è”ç½‘è¥é”€æœåŠ¡å•†;<br>äº§å“ç ”å‘ä¸­å¿ƒ - åº”ç”¨å¼€å‘éƒ¨-åŸºç¡€å»ºè®¾ç»„ - Javaå¼€å‘å®ä¹ ç”Ÿ - 2024.1.8 ~ 4.12</p>
</li>
<li><p><strong>ä»‹ç»ä¸€ä¸‹å®ä¹ ç»å†ã€ã€</strong></p>
<ul>
<li>å²—ä½èŒè´£ï¼šäº’è”ç½‘è¥é”€è¡Œä¸šå…¬å¸ï¼Œä¸»è¦æ¥è§¦äº†å…¬å¸æ ¸å¿ƒçš„æ‹‰æ–°ç³»ç»Ÿçš„è¿­ä»£å¼€å‘ï¼Œå¦å¤–ç‹¬ç«‹å¼€å‘äº†å…¬å¸å†…éƒ¨çš„æŠ¥è¡¨å¹³å°çš„æ¥å£</li>
<li>ä¸€ä¸ªé¡¹ç›®ï¼šå…¶ä¸­æ‹‰æ–°ç³»ç»Ÿè®©æˆ‘å°è±¡æ·±åˆ»ã€ã€<ul>
<li>é¡¹ç›®æ˜¯ä»€ä¹ˆï¼šæ‹‰æ–°æŒ‡çš„æ˜¯ç»™ä¾‹å¦‚ APP æ‹‰å–æ–°çš„ç”¨æˆ·ï¼Œå®ç°æ–¹æ³•æ˜¯ æˆ‘å‘æ ¹æ® APP çš„è¦æ±‚æŠ•æ”¾å¹¿å‘Šåˆ°å¦‚ æŠ–éŸ³ ç­‰åª’ä½“å¹³å°ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå¹¿å‘Šçš„æ›å…‰ã€ç”¨æˆ·ç‚¹å‡»ç­‰æ•°æ®æ¶ˆæ¯ï¼Œéœ€è¦è½¬å‘ç»™ APP ç«¯ã€‚æˆ‘æ–¹çš„æ‹‰æ–°ç³»ç»Ÿå°±åœ¨æ¶ˆæ¯è½¬å‘è¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œä¸€ä¸ªæ¶ˆæ¯æ‹¦æˆªçš„å·¥ä½œã€‚å…·ä½“æ¥è¯´ï¼Œæ¶ˆæ¯ä¼šå…ˆå‘é€åˆ°æˆ‘æ–¹æ‹‰æ–°ç³»ç»Ÿçš„mqï¼Œä¸€æ–¹é¢è¿›è¡Œäº†kbsçš„å‰Šå³°ï¼Œç„¶åæ ¹æ®éœ€æ±‚å’Œç­–ç•¥è¿›è¡Œæ‹¦æˆªå¤„ç†ï¼Œæœ€åæ‰è½¬å‘ç»™ APPï¼Œï¼Œ</li>
<li>ç®€åŒ–ç‰ˆï¼ˆéæŠ€æœ¯ä»‹ç»ï¼‰ï¼šæˆ‘æ–¹æŠ•æ”¾å¹¿å‘Šï¼Œæ¥æ”¶â€œä¸Šæ¸¸â€çš„æ•°æ®ï¼Œæ„Ÿè§‰ä¸šåŠ¡é€»è¾‘æ‹¦æˆªä»¥åŠä¸€ç³»åˆ—å¤„ç†åï¼Œè½¬å‘åˆ°â€œä¸‹æ¸¸â€ï¼›ä¸€æ–¹é¢è¿›è¡Œäº†å‰åè¡Œä¸ºè§£è€¦ï¼Œä¸€æ–¹é¢å‰Šå³°å¤„ç†ï¼Œä¸ºå®¢æˆ·æä¾›åˆé€‚çš„æ•°æ®ï¼›</li>
<li>ä¸ºä½•è¿™æ ·åšï¼šè¿™æ ·ï¼Œå°±ç»™ä¼ä¸šæä¾›äº†ç¬¦åˆè¦æ±‚çš„æ¶ˆæ¯æ•°æ®ï¼Œæˆ‘æ–¹è·å¾—æ”¶ç›Š</li>
<li>è´Ÿè´£çš„å·¥ä½œï¼šå°±æ˜¯å‚ä¸æ‹‰æ–°ç³»ç»Ÿçš„è¿­ä»£å¼€å‘ï¼Œæˆ‘è´Ÿè´£æ•°æ®æ‹¦æˆªè¿™ä¸€éƒ¨åˆ†ï¼Œå…·ä½“æ¥è¯´å®ç°äº†ç™½åå•åŠŸèƒ½ï¼Œï¼Œ</li>
<li>æœ‰ä»€ä¹ˆæˆæœï¼šï¼Œï¼Œå®ç°è”è°ƒï¼Œï¼ŒèŠ‚çº¦æˆæœ¬</li>
<li>æœ€å¤§çš„æ”¶è·ï¼š</li>
<li>æœ€å¤§çš„æˆæœï¼š</li>
<li>é‡æ¥ä¼šæ”¹å˜ï¼š</li>
</ul>
</li>
</ul>
</li>
<li><p>æ‹¦æˆªåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿï¼Ÿ</p>
<ul>
<li>é€šè¿‡ stream() è°ƒç”¨ä¸€ç³»åˆ—æ–¹æ³•ï¼š<ul>
<li>å‚æ•°å‰ç½®å¤„ç†ï¼ˆinitPreValidateï¼‰ï¼ˆä¸€äº›é€šç”¨é€»è¾‘ï¼Œæ¯”å¦‚ç‚¹å‡»æ•°æ®IDã€æ—¶é—´å­—æ®µçš„åˆå§‹åŒ–ï¼‰ã€‚</li>
<li>å‚æ•°æ ¡éªŒï¼ˆisValidï¼‰ï¼ˆæ ¡éªŒç‚¹å‡»æ•°æ®æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæ— æ•ˆåˆ™ä¸å‘ç»™å®¢æˆ·ï¼Œæ¯”å¦‚åª’ä½“å¯èƒ½ä¼šå°†ç”¨æˆ·æ›å…‰æ•°æ®å‘è¿‡æ¥ï¼Œæ­¤æ—¶ä¸éœ€è¦å‘ç»™å®¢æˆ·ï¼‰ã€‚</li>
<li>å‚æ•°åç½®å¤„ç†ï¼ˆinitPostValidateï¼‰ï¼ˆä¸€äº›å¸¦æœ‰å¤æ‚ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œæ¯”å¦‚RTAæ‹¦æˆªï¼‰ã€‚</li>
<li>å°†æ ¡éªŒé€šè¿‡çš„ç‚¹å‡»æ•°æ®å‘ç»™å®¢æˆ·ï¼ˆtransferToCustomerï¼‰ï¼Œhttpè¯·æ±‚ã€‚</li>
<li>ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“&#x2F;ç¼“å­˜ï¼ˆsaveï¼‰ã€‚  <img src="https://github.com/leo710aka/bk/blob/main/job18.png?raw=true" width="550" height="300" alt=""></li>
</ul>
</li>
<li>å†…éƒ¨å¤„ç†é€»è¾‘ï¼ˆåœ¨initPostValidateéƒ¨åˆ†ï¼Œè¿›è¡ŒRTAæ‹¦æˆªï¼‰<ul>
<li>æ‹¦æˆªæŒ‡ä»€ä¹ˆï¼šè®¾ç½®çŠ¶æ€ä¸º NON_CLICK_NOT_TRANSFER_TO_CUSTOMERï¼Œåç»­ä»£ç æµç¨‹è¯†åˆ«å‡ºæ­¤çŠ¶æ€åï¼Œä¸ä¼šå°†è¯¥æ•°æ®å‘ç»™å®¢æˆ·ã€‚</li>
<li>æ‹¦æˆªé€»è¾‘ï¼š<ul>
<li>æ ¡éªŒç‚¹å‡»æ•°æ®æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæ— æ•ˆåˆ™ä¸å‘ç»™å®¢æˆ·ï¼Œæ¯”å¦‚åª’ä½“å¯èƒ½ä¼šå°†ç”¨æˆ·æ›å…‰æ•°æ®å‘è¿‡æ¥ï¼Œæ­¤æ—¶ä¸éœ€è¦å‘ç»™å®¢æˆ·</li>
<li>RTAæ‹¦æˆªï¼šå¯¹äºæŸäº›å®¢æˆ·ï¼Œæˆ‘æ–¹åœ¨å‘é€ç‚¹å‡»æ•°æ®ç»™å¯¹æ–¹æ—¶ï¼Œéœ€è¦è°ƒç”¨å®¢æˆ·çš„æ¥å£è¿›è¡Œç¡®è®¤ï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯å®¢æˆ·çš„ç›®æ ‡ç”¨æˆ·ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¸å‘é€ç‚¹å‡»æ•°æ®ç»™å®¢æˆ·ã€‚åˆ™è®¾ç½®çŠ¶æ€RTA_EXCLUDEDï¼Œåç»­ä»£ç æµç¨‹è¯†åˆ«å‡ºæ­¤çŠ¶æ€åï¼Œä¸ä¼šå°†è¯¥æ•°æ®å‘ç»™å®¢æˆ·ã€‚</li>
<li>èµ°RTAæ‹¦æˆªï¼Œæœ‰ä¸€äº›å‰ç½®æ¡ä»¶ï¼ŒåŒ…æ‹¬ï¼š<br>  1ã€ä¸šåŠ¡æ–¹æŒ‡å®šäº†å®¢æˆ·ç‚¹å‡»ç›‘æµ‹é“¾æ¥IDä¸ºRTAé“¾æ¥ï¼ˆå®¢æˆ·çš„ç‚¹å‡»ç›‘æµ‹é“¾æ¥æ˜¯å®¢æˆ·æä¾›è¿‡æ¥ç”¨äºæ¥æ”¶æˆ‘æ–¹ç‚¹å‡»æ•°æ®çš„æ¥å£ï¼‰ï¼ˆRTAé“¾æ¥æ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œæ ‡è¯†å½“å‰ç‚¹å‡»æ•°æ®å‘ç»™å®¢æˆ·å‰ï¼Œè¦å…ˆè°ƒç”¨å®¢æˆ·çš„RTAæ¥å£è¿‡æ»¤ä¸€é“ï¼Œæœ€ç»ˆåªå‘é€å®¢æˆ·éœ€è¦çš„ç”¨æˆ·ï¼‰<br>  2ã€å¦‚æœå½“å‰æ•°æ®ç±»å‹ä¸ºæ›å…‰ï¼Œä¸”æ›å…‰æ€»æ•°ä¸ç‚¹å‡»æ€»æ•°çš„æ¯”ä¾‹å°äºrequestRateï¼ˆé»˜è®¤ä¸º4:1ï¼‰<br>  å¯¹äºæ»¡è¶³å‰ç½®æ¡ä»¶çš„æ•°æ®ï¼Œåˆ™å‘èµ·RTAè¯·æ±‚ï¼Œå°†ç»“æœè®°å½•ä¸‹æ¥ï¼ˆç»“æœæŒ‡çš„æ˜¯å®¢æˆ·æ˜¯å¦æ¥å—å½“å‰ç”¨æˆ·ï¼Œå³æ˜¯å¦å‚ç«-isParticipatedï¼‰ï¼Œç”¨äºä¸šåŠ¡æ–¹åç»­ä½¿ç”¨</li>
<li>ç™½åå•ï¼šä¸ºå®ç°æ•´ä¸ªè½¬å‘è¿‡ç¨‹çš„è”è°ƒï¼Œä¸æ‹¦æˆªå†…éƒ¨æµ‹è¯•è®¾å¤‡å·ï¼ˆå¯èƒ½é­åˆ°rtaæ‹¦æˆªï¼‰ï¼Œå³ä½¿å®¢æˆ·ä¸æ¥å—å½“å‰ç”¨æˆ·ï¼ˆå†…éƒ¨æµ‹è¯•æ‰‹æœºï¼‰ï¼Œä¸è®¾ç½®çŠ¶æ€RTA_EXCLUDEDï¼Œæ­¤æ—¶åç»­æµç¨‹ä¼šæ­£å¸¸å°†è¯¥æ•°æ®å‘ç»™å®¢æˆ·</li>
</ul>
</li>
</ul>
</li>
<li>å¯ä»¥ç”¨springçš„è®¾è®¡æ¨¡å¼æˆ–è€…æŠ€æœ¯å—ï¼Ÿï¼Ÿï¼Ÿ<ul>
<li>ç­–ç•¥æ¨¡å¼ï¼Œ</li>
<li>aopéä¸šåŠ¡ï¼Œï¼Œæš´éœ²æ¥å£ç»™ç›‘æ§ç³»ç»Ÿ</li>
</ul>
</li>
</ul>
</li>
<li><p>kafka æ¶æ„ï¼Ÿkafka å¦‚ä½•å®ç°é«˜æ€§èƒ½ï¼Œé«˜ååé‡ï¼Ÿkafka æ¶ˆè´¹æ¨¡å¼ï¼Ÿå¦‚ä½•ä¸æ¶ˆè´¹é‡å¤æ•°æ®ï¼Œé¡ºåºæ¶ˆè´¹æ•°æ®ï¼Ÿå¦‚ä½•ä¸ä¸¢å¤±æ•°æ®ï¼Ÿkafkaå†…éƒ¨æ˜¯æ€ä¹ˆå®ç°é™æµçš„ï¼Ÿã€ã€ã€</p>
</li>
<li><p>ä½ ä»¬é¡¹ç›®ä¸­ä¸ºä»€ä¹ˆè¦ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ MQ çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>ã€å¼‚æ­¥ã€‘æ‹‰æ–°ç³»ç»Ÿæ¥æ”¶åª’ä½“æ•°æ®å­˜æ”¾äº kafkaï¼Œå†æ¶ˆè´¹å³æ‹¦æˆªå¤„ç†åæ‰è½¬å‘ï¼Œæ¶‰åŠioã€é˜»æ–­ã€è°ƒç”¨å®¢æˆ·æ¥å£ã€æ•°æ®åº“ã€ã€</li>
<li>ã€å‰Šå³°ã€‘æ¥å£æ¥æ”¶2000qpsçš„è¯·æ±‚ï¼Œä»¥ 200kbs æ¶ˆè´¹ mqä¸­çš„æ•°æ®ï¼Œè§£å†³ç³»ç»Ÿå‰åå¤„ç†èƒ½åŠ›ä¸ä¸€è‡´çš„é—®é¢˜</li>
</ul>
</li>
<li><p>ä¸ä½¿ç”¨kafkaï¼Œå¦‚ä½•ä¼˜åŒ–æ¶ˆæ¯å‰åå¤„ç†é€Ÿåº¦ä¸ä¸€è‡´çš„é—®é¢˜ï¼Ÿ</p>
<ol>
<li>å¼‚æ­¥å¤„ç†ï¼šå°†æ¶ˆæ¯çš„åç»­å¤„ç†é€»è¾‘è®¾è®¡æˆå¼‚æ­¥æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ Java ä¸­çš„çº¿ç¨‹æ± æˆ–è€…å¼‚æ­¥ä»»åŠ¡ï¼ˆCompletableFutureï¼‰æ¥å®ç°ã€‚<ul>
<li>ä½¿ç”¨çº¿ç¨‹æ± ï¼šç”¨<code>ThreadPoolExecutor</code>æˆ–è€…<code>ExecutorService</code>æ¥åˆ›å»ºçº¿ç¨‹æ± ï¼Œç„¶åå°†éœ€è¦å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ä¸­ã€‚çº¿ç¨‹æ± ä¼šè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„åˆ›å»ºã€æ‰§è¡Œå’Œé”€æ¯ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯å¼€é”€ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>); <span class="comment">// åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± </span></span><br><span class="line">executor.submit(() -&gt; &#123;</span><br><span class="line">    <span class="comment">// å¼‚æ­¥æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚IOæ“ä½œã€æ•°æ®åº“æ“ä½œç­‰</span></span><br><span class="line">&#125;);</span><br><span class="line">executor.shutdown(); <span class="comment">// å…³é—­çº¿ç¨‹æ± </span></span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨å¼‚æ­¥æ¡†æ¶ï¼šæœ‰äº›æ¡†æ¶æä¾›äº†å¼‚æ­¥æ‰§è¡Œçš„æ”¯æŒï¼Œä¾‹å¦‚Springæ¡†æ¶çš„<code>@Async</code>æ³¨è§£ã€‚é€šè¿‡åœ¨æ–¹æ³•ä¸Šæ·»åŠ <code>@Async</code>æ³¨è§£ï¼Œå¯ä»¥å°†æ–¹æ³•å˜æˆå¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">asyncMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¼‚æ­¥æ‰§è¡Œçš„æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>æ‰¹é‡å¤„ç†ï¼šå°†ä¸€æ‰¹æ¶ˆæ¯èšåˆåœ¨ä¸€èµ·æ‰¹é‡å¤„ç†ï¼Œè€Œä¸æ˜¯å•ä¸ªæ¶ˆæ¯é€ä¸€å¤„ç†ã€‚è¿™æ ·å¯ä»¥å‡å°‘å¤„ç†çš„æ¬¡æ•°å’Œå¼€é”€ã€‚</li>
<li>å¹¶å‘å¤„ç†ï¼šè€ƒè™‘ä½¿ç”¨å¤šçº¿ç¨‹æˆ–è€…å¹¶å‘æ¡†æ¶æ¥æé«˜å¤„ç†æ•ˆç‡ã€‚æ³¨æ„å¤„ç†ä»»åŠ¡çš„å¹¶å‘æ€§è¦åˆç†æ§åˆ¶ï¼Œé¿å…å› å¹¶å‘å¯¼è‡´çš„èµ„æºç«äº‰å’Œæ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</li>
</ol>
</li>
<li><p>ç™½åå•åŠŸèƒ½å¦‚ä½•å®ç°ï¼Ÿ</p>
<ul>
<li>ç™½åå•ä½¿ç”¨é€»è¾‘ï¼š1ã€å…ˆæŸ¥çœ‹æ˜¯å¦åœ¨ç™½åå•ä¸­ï¼ˆè®¤ä¸ºæ˜¯ç›®æ ‡ç”¨æˆ·ï¼‰2ã€è‹¥ä¸åœ¨ç™½åå•ä¸­ï¼Œå†è°ƒç”¨æˆ·æä¾›çš„æ¥å£è¿›è¡ŒRTAæ‹¦æˆªï¼ˆç›®æ ‡ç”¨æˆ·åˆ¤æ–­ï¼‰</li>
<li>å¦‚ä½•ä½¿ç”¨ï¼šç›´æ¥æŸ¥æœ¬åœ°ç¼“å­˜caffeineçš„ç™½åå•ï¼Œ<strong>å› æ­¤ï¼Œå¿…é¡»ä¿è¯æœ¬åœ°ç¼“å­˜ä¸Redisæ•°æ®çš„ä¸€è‡´æ€§ï¼ï¼ï¼ˆäº‹å®ä¸Šæœ‰20minå»¶è¯¯ï¼‰</strong></li>
<li>ç™½åå•åœ¨Redisä¸­çš„ä¿å­˜å½¢å¼ï¼šä¸€ä¸ª Set<String></li>
<li>ç™½åå•å¦‚ä½•ç»´æŠ¤ï¼šéœ€è¦æ–°å¢æ—¶(ä¸Šçº¿å‰)æ‰‹åŠ¨Postmanè°ƒæ¥å£ï¼Œä½¿ç”¨ SADD å‘½ä»¤å‘ Set ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼ˆäº‹å®ä¸Šåœ¨æ•°æ®åº“ä¸­ä¿å­˜äº†å®Œæ•´çš„ç²¾å‡†çš„æ•°æ®ï¼Œéœ€è¦æ—¶ä»æ•°æ®åº“ä¸­åŒæ­¥ï¼‰  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SADD whitelist member1 member2 member3  <span class="comment"># ç™½åå•çš„ key-value</span></span><br></pre></td></tr></table></figure></li>
<li>Redis æ•°æ®ä½•æ—¶è¿‡æœŸï¼Ÿå¯ä»¥è°ƒç”¨ Redis çš„ EXPIRE å‘½ä»¤ä¸ºå•ä¸ªé”®ï¼ˆKeyï¼‰æˆ–æ•´ä¸ª Set è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ SETEX å‘½ä»¤ä¸€æ¬¡æ€§è®¾ç½®é”®çš„å€¼å’Œè¿‡æœŸæ—¶é—´ä»¥ç¡®ä¿è®¾ç½®å€¼å’Œè¿‡æœŸæ—¶é—´çš„åŸå­æ€§ã€‚  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPIRE myset 60         <span class="comment"># è®¾ç½® myset æ•´ä¸ª Set ç»“æ„çš„è¿‡æœŸæ—¶é—´ä¸º 60 ç§’</span></span><br><span class="line">EXPIRE myset:value1 60  <span class="comment"># è®¾ç½® myset ä¸­çš„ value1 å…ƒç´ çš„è¿‡æœŸæ—¶é—´ä¸º 60 ç§’</span></span><br></pre></td></tr></table></figure></li>
<li><strong>Redis-MySQL-caffeineæ•°æ®ä¸€è‡´</strong>ï¼šRedis æä¾›äº†é”®è¿‡æœŸæ—¶çš„é€šçŸ¥åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡é…ç½® Redis çš„ notify-keyspace-events å‚æ•°æ¥å¼€å¯è¿‡æœŸäº‹ä»¶é€šçŸ¥ã€‚åœ¨ Redis é…ç½®æ–‡ä»¶ä¸­è®¾ç½® notify-keyspace-events Exï¼Œè¡¨ç¤ºå¼€å¯é”®è¿‡æœŸäº‹ä»¶é€šçŸ¥ã€‚<br>  <em><strong>è®¾ç½®redisæ•°æ®è¿‡æœŸæ—¶é•¿ä¸º20åˆ†é’Ÿï¼Œåˆ°æœŸåï¼Œä¼šè§¦å‘æ•°æ®åº“æŸ¥è¯¢ï¼ŒåŒæ—¶ä¼šå°†æ•°æ®åŠ è½½åˆ°æœ¬åœ°ç¼“å­˜ä¸­ï¼Œç”¨äºæ¥ä¸‹æ¥ä¸€ä¸ª20åˆ†é’Ÿï¼›</strong></em></li>
</ul>
</li>
<li><p>ä¸ºä»€ä¹ˆéœ€è¦Redis+caffeineäºŒçº§ç¼“å­˜ï¼Ÿ</p>
<ol>
<li>å…³ç³»æ•°æ®åº“(Mysql)æ•°æ®æœ€ç»ˆå­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œæ¯æ¬¡è¯»å–ä¼šå› ä¸ºç£ç›˜æœ¬èº«çš„IOå½±å“è¯»å–é€Ÿåº¦ï¼Œæ‰€ä»¥è€ƒè™‘Redisè¿™ç§å†…å­˜ç¼“å­˜ã€‚</li>
<li>å†…å­˜ç¼“å­˜(Redis)ç¡®å®èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦çš„æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ä¹Ÿè®¸é¿å…åŒä¸€æŸ¥è¯¢å¤§é‡çš„å¹¶å‘æŸ¥è¯¢ï¼Œä¹Ÿä¼šæœ‰æ˜æ˜¾çš„ç½‘ç»œIOä¸Šçš„æ¶ˆè€—ã€‚</li>
<li>é‚£æˆ‘ä»¬é’ˆå¯¹è¿™ç§æŸ¥è¯¢éå¸¸é¢‘ç¹çš„æ•°æ®(çƒ­ç‚¹key)ï¼Œå¯ä»¥è€ƒè™‘å­˜åˆ°åº”ç”¨å†…ç¼“å­˜å¦‚caffeineï¼Œå½“åº”ç”¨å†…ç¼“å­˜æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨è€Œä¸ç”¨é€šè¿‡ç½‘ç»œåˆ°redisä¸­å»è·å–ï¼›å¦å¤–æˆ‘ä¸ªäººè®¤ä¸ºï¼Œå¯èƒ½å¯¹äºä¸€äº›â€œå¸¸è§„ä¸šåŠ¡æ— å…³â€çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨æœ¬åœ°ç¼“å­˜ï¼Œé¿å…å¯¹RedisæŸ¥è¯¢ã€ã€</li>
</ol>
</li>
<li><p>æœ¬åœ°ç¼“å­˜ä¸Redisä¸åŒæ­¥ã€ã€</p>
<ol>
<li>å»¶æ—¶åŒåˆ ï¼šå‚è€ƒredisä¸mysqlç¼“å­˜ä¸€ç›´æ–¹æ³•ï¼Œå…ˆåˆ é™¤ Rediså­˜æ•°ï¼Œå†æ›´æ–° MySqlï¼Œå»¶è¿Ÿå‡ ç™¾æ¯«ç§’é™¤ Rediså­˜æ•°æ®ï¼Œè¿™æ ·å°±ç®—åœ¨æ›´æ–° MySqlæ—¶ï¼Œæœ‰å…¶ä»–çº¿ç¨‹è¯»äº†Mysqlï¼ŒæŠŠè€æ•°æ®è¯»åˆ°äº† Redisä¸­ï¼Œé‚£ä¹ˆä¹Ÿä¼šè¢«åˆ¶é™¤æ‰ï¼Œä»è€ŒæŠŠæ•°æ®ä¿æŒä¸€è‡´ </li>
<li><strong>å®šæ—¶åˆ·æ–°</strong>ï¼šè®¾ç½®redisæ•°æ®è¿‡æœŸæ—¶é•¿ä¸º20åˆ†é’Ÿï¼Œåˆ°æœŸåï¼Œä¼šè§¦å‘æ•°æ®åº“æŸ¥è¯¢ï¼ŒåŒæ—¶ä¼šå°†æ•°æ®åŠ è½½åˆ°æœ¬åœ°ç¼“å­˜ä¸­ï¼Œç”¨äºæ¥ä¸‹æ¥ä¸€ä¸ª20åˆ†é’Ÿ</li>
<li><strong>å¼‚æ­¥æ›´æ–°</strong>ï¼šåœ¨åº”ç”¨ä¸­å®ç°å¼‚æ­¥æ›´æ–°æœºåˆ¶ï¼Œå½“ Redis ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¼‚æ­¥åœ°æ›´æ–° Caffeine æœ¬åœ°ç¼“å­˜ä¸­çš„æ•°æ®ã€‚å¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æˆ–è€…å¼‚æ­¥ä»»åŠ¡æ¥å¤„ç†æ›´æ–°æ“ä½œï¼Œç¡®ä¿æ›´æ–°æ“ä½œä¸å½±å“åº”ç”¨çš„æ­£å¸¸è¿è¡Œã€‚</li>
<li>æ‰‹åŠ¨æ›´æ–°ï¼šæ›´æ–° Redis ç¼“å­˜åï¼Œç”±ä¸šåŠ¡ä»£ç æ‰‹åŠ¨è§¦å‘æœ¬åœ°ç¼“å­˜çš„æ›´æ–°æ“ä½œã€‚</li>
</ol>
</li>
<li><p>å¦‚ä½•ä¿æŒRedisä¸æ•°æ®åº“ä¸€è‡´ï¼Ÿ</p>
<ul>
<li>å»¶æ—¶åŒåˆ ï¼šå¯¹äºè¯»æ•°æ®ï¼Œæˆ‘ä¼šé€‰æ‹©æ—è·¯ç¼“å­˜ç­–ç•¥ï¼Œå¦‚æœ cache ä¸å‘½ä¸­ï¼Œä¼šä» db åŠ è½½æ•°æ®åˆ° cacheã€‚å¯¹äºå†™æ•°æ®ï¼Œæˆ‘ä¼šé€‰æ‹©æ›´æ–° db åï¼Œå†åˆ é™¤ç¼“å­˜ã€‚</li>
<li>é’ˆå¯¹åˆ é™¤ç¼“å­˜å¼‚å¸¸çš„æƒ…å†µï¼Œæˆ‘è¿˜ä¼šå¯¹ key è®¾ç½®è¿‡æœŸæ—¶é—´å…œåº•ï¼Œåªè¦è¿‡æœŸæ—¶é—´ä¸€åˆ°ï¼Œè¿‡æœŸçš„ key å°±ä¼šè¢«åˆ é™¤äº†ã€‚</li>
<li>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸¤ç§æ–¹å¼åº”å¯¹åˆ é™¤ç¼“å­˜å¤±è´¥çš„æƒ…å†µï¼Œéƒ½æ˜¯å¼‚æ­¥æ“ä½œï¼š<ul>
<li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šé‡è¯•ç¼“å­˜çš„åˆ é™¤<br>  æˆ‘ä»¬å¯ä»¥å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°†ç¬¬äºŒä¸ªæ“ä½œï¼ˆåˆ é™¤ç¼“å­˜ï¼‰è¦æ“ä½œçš„æ•°æ®åŠ å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±æ¶ˆè´¹è€…æ¥æ“ä½œæ•°æ®ã€‚<br>  å¦‚æœåº”ç”¨åˆ é™¤ç¼“å­˜å¤±è´¥ï¼Œå¯ä»¥ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­é‡æ–°è¯»å–æ•°æ®ï¼Œç„¶åå†æ¬¡åˆ é™¤ç¼“å­˜ï¼Œè¿™ä¸ªå°±æ˜¯é‡è¯•æœºåˆ¶ã€‚å½“ç„¶ï¼Œå¦‚æœé‡è¯•è¶…è¿‡çš„ä¸€å®šæ¬¡æ•°ï¼Œè¿˜æ˜¯æ²¡æœ‰æˆåŠŸï¼Œæˆ‘ä»¬å°±éœ€è¦å‘ä¸šåŠ¡å±‚å‘é€æŠ¥é”™ä¿¡æ¯äº†ã€‚å¦‚æœåˆ é™¤ç¼“å­˜æˆåŠŸï¼Œå°±è¦æŠŠæ•°æ®ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œé¿å…é‡å¤æ“ä½œï¼Œå¦åˆ™å°±ç»§ç»­é‡è¯•ã€‚</li>
<li>Canal+MQï¼šè®¢é˜… MySQL binlogå†æ“ä½œç¼“å­˜<br>  è®¢é˜… MySQL binlogï¼Œå†æ“ä½œç¼“å­˜ã€Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜ã€çš„ç­–ç•¥çš„ç¬¬ä¸€æ­¥æ˜¯æ›´æ–°æ•°æ®åº“ï¼Œé‚£ä¹ˆæ›´æ–°æ•°æ®åº“æˆåŠŸï¼Œå°±ä¼šäº§ç”Ÿä¸€æ¡å˜æ›´æ—¥å¿—ï¼Œè®°å½•åœ¨ binlog é‡Œã€‚<br>  äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è®¢é˜… binlog æ—¥å¿—ï¼Œæ‹¿åˆ°å…·ä½“è¦æ“ä½œçš„æ•°æ®ï¼Œç„¶åå†æ‰§è¡Œç¼“å­˜åˆ é™¤ï¼Œé˜¿é‡Œå·´å·´å¼€æºçš„ Canal ä¸­é—´ä»¶å°±æ˜¯åŸºäºè¿™ä¸ªå®ç°çš„ã€‚<br>  Canal æ¨¡æ‹Ÿ MySQL ä¸»ä»å¤åˆ¶çš„äº¤äº’åè®®ï¼ŒæŠŠè‡ªå·±ä¼ªè£…æˆä¸€ä¸ª MySQL çš„ä»èŠ‚ç‚¹ï¼Œå‘ MySQL ä¸»èŠ‚ç‚¹å‘é€ dump è¯·æ±‚ï¼ŒMySQL æ”¶åˆ°è¯·æ±‚åï¼Œå°±ä¼šå¼€å§‹æ¨é€ Binlog ç»™ Canalï¼ŒCanal è§£æ Binlog å­—èŠ‚æµä¹‹åï¼Œè½¬æ¢ä¸ºä¾¿äºè¯»å–çš„ç»“æ„åŒ–æ•°æ®ï¼Œä¾›ä¸‹æ¸¸ç¨‹åºè®¢é˜…ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>æŠ¥è¡¨å¹³å°çš„å¼€å‘æµç¨‹ï¼Ÿ</p>
<ul>
<li>æ ¹æ®äº§å“åŸå‹å›¾è®¾è®¡æ•°æ®åº“è¡¨ï¼Œä¸»é”®è‡ªå¢ï¼Œï¼Œ</li>
<li>ä½¿ç”¨junboGeneratoræ’ä»¶ç”Ÿæˆè¡¨ç»“æ„å¯¹åº”çš„MyBatisä»£ç ï¼ˆDO, BO, Mapperæ–‡ä»¶ï¼‰ï¼Œç”¨äºæ“ä½œæ•°æ®åº“ã€‚</li>
<li>å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œå¤§è‡´æ­¥éª¤åŒ…æ‹¬ï¼š<br>  â‘ ã€newenergy-apiã€‘å®šä¹‰XXXApiæ¥å£åŠpageæ–¹æ³•<br>  â‘¡ã€newenergybg-serviceã€‘å®šä¹‰XXXServiceæ¥å£åŠpageæ–¹æ³•<br>  â‘¢ã€newenergybg-serviceã€‘å®šä¹‰XXXApiImplç±»ï¼ˆControllerï¼‰ï¼Œå®ç°XXXApiæ¥å£åŠpageæ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨XXXServiceå®Œæˆåˆ†é¡µæŸ¥è¯¢æ•°æ®çš„æ“ä½œ<br>  â‘£ã€newenergybg-serviceã€‘å®šä¹‰XXXServiceImplç±»ï¼Œå®ç°XXXServiceæ¥å£åŠpageæ–¹æ³•ï¼Œé€šè¿‡MyBatisåˆ†é¡µæ’ä»¶åŠXXXMapperçš„æŸ¥è¯¢æ–¹æ³•ï¼Œå®Œæˆåˆ†é¡µæŸ¥è¯¢ã€‚<br>  â‘¤ã€newenergy-apiã€‘å‘å¸ƒXXXApiï¼šä¿®æ”¹ç‰ˆæœ¬å·ï¼ˆxx.snapshotï¼‰ï¼Œå‘å¸ƒæ–°çš„jaråŒ…ï¼ˆåŒ…å«æ–°çš„XXXApiæ¥å£ï¼‰åˆ° Maven ä»“åº“ï¼›<br>  â‘¥ã€newenergy-web-adminã€‘å¼•å…¥æœ€æ–°çš„XXXApiï¼šæ›´æ–°mavenï¼Œä¾èµ–æ–°ç‰ˆæœ¬jaråŒ…ï¼Œä»¥ä½¿ç”¨æ–°çš„XXXApiæ¥å£<br>  â‘¦ã€newenergy-web-adminã€‘å®šä¹‰XXXWebApiç±»åŠpageæ–¹æ³•ï¼ˆControllerï¼‰ï¼Œé€šè¿‡XXXApiçš„pageæ–¹æ³•ï¼Œå®Œæˆåˆ†é¡µæŸ¥è¯¢ã€‚</li>
<li>SOAæ¶æ„ï¼ŒæœåŠ¡å…³ç³»ï¼š<br>  ã€newenergy-apiã€‘ï¼šå®šä¹‰æ¥å£ä¿¡æ¯ï¼ŒåŒæ—¶è¢«ã€newenergybg-serviceã€‘å’Œã€newenergy-web-adminã€‘ä¾èµ–<br>  ã€newenergybg-serviceã€‘æ˜¯ã€newenergy-apiã€‘çš„å®ç°ï¼Œå®é™…çš„æœåŠ¡ç«¯ï¼›<br>  ã€newenergy-web-adminã€‘æ¥æ”¶å‰ç«¯è¯·æ±‚ï¼ˆé˜²æ­¢æš´éœ²å®é™…æœåŠ¡ç«¯ï¼‰ï¼Œä» maven è·å– jar åŒ…åå°„è·å–æ¥å£å’Œå®ä½“ç±»ä¿¡æ¯ã€‚<br>  å®é™…è¯·æ±‚å‘é€æµç¨‹ä¸ºï¼šå‰ç«¯å®¢æˆ·ç«¯ç¨‹åºå‘èµ·è¯·æ±‚ -&gt;ã€newenergy-web-adminã€‘XXXWebApi.page -&gt; ã€newenergybg-serviceã€‘XXXApiImpl.page -&gt; ã€newenergybg-serviceã€‘XXXServiceImpl.page -&gt; ã€newenergybg-serviceã€‘ XXXMapper.selectByExample</li>
<li>å‚æ•°ä¿¡æ¯ï¼š<br>  Apiæ–¹æ³•ä¸­ï¼šXXXRequestã€XXXResponseï¼Œåœ¨ã€newenergy-web-adminã€‘XXXWebApi.pageæ–¹æ³•ä¸ŠåŠ äº† @JunboResponseï¼Œï¼Œï¼Œ<br>  åˆ†é¡µæŸ¥è¯¢entityç±»ï¼šç”±äºéœ€è¦è¿”å›çš„æ•°æ®æ˜¯ç”±å¤šè¡¨æŸ¥è¯¢è€Œæ¥ï¼Œä»»ä¸€ BO æˆ– DO éƒ½æ²¡æ³•æ¶µç›–æ‰€æœ‰å±æ€§å­—æ®µã€‚æ‰€ä»¥æ–°å¢ä¸€ä¸ª ç±» ConvCallbackRuleDailyReportPageItemï¼Œè¦åœ¨ mapper.xml é‡Œä¿®æ”¹ resultMap ä¸­æŸ¥è¯¢æ•°æ®ä¸è¿”å›å€¼çš„å¯¹åº”å…³ç³»ï¼Œåœ¨åç»­æ•°æ®è½¬æ¢çš„è¿‡ç¨‹ä¸­ä¸»è¦å‰åç±»çš„å­—æ®µçš„å¯¹åº”ã€‚</li>
<li>é›†æˆæµ‹è¯•ï¼šæœ¬åœ°å¯åŠ¨newenergybg-serviceæœåŠ¡å’Œnewenergy-web-adminæœåŠ¡ï¼Œé€šè¿‡postmanè°ƒç”¨æ¥å£è¿›è¡Œæµ‹è¯•ï¼ŒæœŸæœ›ç»“æœæ˜¯ï¼ŒæŸ¥å‡ºæ¥çš„ç»“æœä¸æ•°æ®åº“ä¸­çš„æ•°æ®ä¸€è‡´ã€‚</li>
<li>ååŒå¼€å‘ï¼šgit</li>
</ul>
</li>
<li><p>åˆ†é¡µæŸ¥è¯¢ç»†èŠ‚ã€ã€</p>
<ul>
<li>å…ˆåˆ° â€œaè¡¨â€ è·å–ç¬¬iåˆ°ç¬¬i+sizeè¡Œçš„â€œå¹¿å‘ŠæŠ¥è¡¨æ•°æ®â€ï¼ˆå¹¿å‘Šidï¼ŒæŠ¥è¡¨æ•°æ®ç±»å‹ï¼Œæ—¶é—´ï¼Œï¼Œï¼‰ï¼Œå†æ ¹æ®â€œå¹¿å‘Šidâ€åˆ° â€œbè¡¨â€ å…³è”æŸ¥è¯¢è¯¥å¹¿å‘Šçš„è¯¦ç»†ä¿¡æ¯ï¼ˆå®¢æˆ·æ–¹ï¼Œåˆ›å»ºæ—¶é—´ï¼Œï¼Œï¼‰</li>
<li>SQLï¼š<code>select * from a left join b on a.id = b.id limit 9, 10 where a.id &lt; 10</code><ol>
<li>æ‰§è¡Œ FROM å’Œ LEFT JOIN æ“ä½œï¼Œå°†è¡¨ a å’Œè¡¨ b è¿›è¡Œå…³è”æŸ¥è¯¢ã€‚</li>
<li>ç„¶åæ ¹æ® WHERE æ¡ä»¶è¿›è¡Œè¿‡æ»¤ï¼Œç­›é€‰å‡º a è¡¨ä¸­ id å°äº 10 çš„æ•°æ®ã€‚</li>
<li>æœ€ååº”ç”¨ LIMIT 9, 10ï¼Œè¡¨ç¤ºä»ç¬¬ 9 è¡Œå¼€å§‹ï¼Œè·å– 10 è¡Œæ•°æ®ï¼Œå³è·å– id å°äº 10 çš„æ•°æ®ä¸­çš„ç¬¬ 10 ~ 19 è¡Œæ•°æ®ã€‚</li>
</ol>
</li>
<li>ä¼˜åŒ–ï¼šåœ¨æŸ¥å‡ºè¡¨ a çš„æ•°æ®åå…ˆè¿›è¡Œåˆ†é¡µï¼ˆä½¿ç”¨å­æŸ¥è¯¢æˆ–è€…ä¸´æ—¶è¡¨æ¥å®ç°ï¼‰å†å¯¹è¡¨ b è¿›è¡Œå…³è”æŸ¥è¯¢ã€‚å¥½å¤„åœ¨äºï¼šå‡å°‘ä¸å¿…è¦çš„æ•°æ®ä¼ è¾“å’Œå¤„ç†ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡å’Œæ€§èƒ½ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.<span class="operator">*</span>, b.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> a <span class="keyword">WHERE</span> id <span class="operator">&lt;</span> <span class="number">10</span> LIMIT <span class="number">9</span>, <span class="number">10</span>) <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> b <span class="keyword">ON</span> a.id <span class="operator">=</span> b.id;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆä¸è€ƒè™‘è½¬æ­£ï¼Ÿ</strong><br>åº”å±Šç”Ÿè‡ªç„¶æƒ³å»å¤§å¹³å°ï¼Œæ¸´æœ›æŒ‘æˆ˜æ€§å’Œåˆ›æ–°æ€§çš„é¡¹ç›®ï¼Œï¼Œéªä¼¯æ˜¯ä¸€ä¸ªæ¯”è¾ƒå°çš„å…¬å¸ï¼Œä¸šåŠ¡æ˜¯äº’è”ç½‘è¥é”€è¡Œä¸šçš„ï¼Œå¯èƒ½å°±ä¼šç¼ºå°‘ä¸€äº›æŠ€æœ¯ç§¯ç´¯ï¼Œï¼Œï¼Œ</p>
</li>
<li><p>é‡åˆ°äº†ä»€ä¹ˆå›°éš¾ï¼Ÿ<br>ç¯å¢ƒæ¶æ„éƒ½å·²ç»é…å¥½å¹¶ä¸”éƒ¨ç½²åœ¨åœ¨çº¿ç¯å¢ƒä¸­ï¼Œå¯¹ç»„ä»¶çš„ä½¿ç”¨ä¹Ÿå°è£…å¥½äº†ï¼Œéš¾çš„éš¾åœ¨å¯¹å®é™…ä¸šåŠ¡çš„ç†è§£<br>æˆ‘ä¸ªäººå¼€å‘ä¸­é‡åˆ°çš„crudä¸éš¾ã€‚æ¯”è¾ƒéº»çƒ¦çš„æ˜¯ç†è§£å…¬å¸çš„å¼€å‘æ¨¡å¼ï¼Ÿï¼Ÿä½¿ç”¨æ’ä»¶ç”ŸæˆBO, DO, Mapper,, </p>
</li>
<li><p>å·¥ä½œä¸­å­¦ä¹ åˆ°äº†äº›ä»€ä¹ˆï¼Ÿå’ŒåŒäº‹æ²Ÿé€šäº†ä»€ä¹ˆï¼Ÿ<br>å·¥ä½œæ–¹é¢ï¼šç†Ÿæ‚‰å›¢é˜Ÿå¼€å‘æµç¨‹ï¼ˆæ•æ·å¼€å‘ï¼Œéœ€æ±‚æ¾„æ¸…å’Œæ•…äº‹ç‚¹è¯„ä¼°ï¼‰, k8sï¼ŒæŒæ¡gitçš„å¼€å‘ä½¿ç”¨ï¼Œå•å…ƒæµ‹è¯•ï¼Ÿï¼Ÿ<br>æŠ€æœ¯æ–¹é¢ï¼šmqçš„é€‰å‹ä¸ä½¿ç”¨ã€æšä¸¾ç±»å‹ç›´æ¥å¯¹åº”æ•°æ®åº“çš„INTEGER??é…ç½®ã€SOAæ¶æ„ã€ã€ï¼ˆé«˜ç‰ˆæœ¬Javaçš„ç‰¹æ€§ï¼ˆè™šæ‹Ÿçº¿ç¨‹ã€æ¨¡å¼åŒ¹é…ã€lambdaã€ZGCã€GraalVM-aotï¼‰ï¼Œé«˜å¹¶å‘-&gt;NIOã€åç¨‹ã€è™šæ‹Ÿçº¿ç¨‹ï¼Œå•å…ƒæµ‹è¯•ï¼‰</p>
</li>
<li><p>å¦‚ä½•ä¿è¯ä»£ç è´¨é‡ï¼Ÿ<br>å•å…ƒæµ‹è¯•ï¼Ÿï¼Ÿ+æµ‹è¯•</p>
</li>
<li><p>åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œä»€ä¹ˆæ—¶å€™è®©ä½ æ„Ÿåˆ°è·å¾—äº†æˆå°±æ„Ÿï¼Ÿ<br>1.<strong>é¡¹ç›®å®Œæˆé˜¶æ®µï¼š</strong> æˆåŠŸåœ°å®Œæˆä¸€ä¸ªé¡¹ç›®çš„ä¸åŒé˜¶æ®µæˆ–æ•´ä¸ªé¡¹ç›®æ—¶ï¼Œä¼šå¸¦æ¥æˆå°±æ„Ÿã€‚2.<strong>è§£å†³éš¾é¢˜ï¼š</strong> é‡åˆ°å¤æ‚çš„æŠ€æœ¯éš¾é¢˜ï¼Œç»è¿‡åŠªåŠ›å’Œé’»ç ”åæˆåŠŸè§£å†³ï¼Œè¿™ç§æ—¶åˆ»ä¼šè®©ä½ æ„Ÿåˆ°éå¸¸æœ‰æˆå°±æ„Ÿï¼Œç‰¹åˆ«æ˜¯é‚£äº›æ›¾ç»è®©ä½ æ„Ÿåˆ°å›°æ‰°çš„é—®é¢˜ã€‚3.<strong>ç”¨æˆ·æ»¡æ„ã€‚</strong> 4.<strong>å›¢é˜Ÿåä½œï¼š</strong> é¡¹ç›®ä¸­çš„å›¢é˜Ÿåˆä½œæ˜¯ä¸€ä¸ªé‡è¦çš„æ–¹é¢ã€‚å½“ä½ ä¸å›¢é˜Ÿæˆå‘˜ååŒå·¥ä½œï¼ŒæˆåŠŸåœ°æ¨åŠ¨é¡¹ç›®çš„è¿›å±•ï¼Œå…±åŒå…‹æœäº†å›°éš¾ï¼Œæ•´ä¸ªå›¢é˜Ÿçš„æˆåŠŸä¼šå¸¦æ¥å¼ºçƒˆçš„æˆå°±æ„Ÿã€‚5.<strong>å­¦åˆ°æ–°çŸ¥è¯†ï¼š</strong> åœ¨é¡¹ç›®ä¸­å­¦åˆ°æ–°æŠ€æœ¯ã€å·¥å…·æˆ–æ–¹æ³•ï¼Œåº”ç”¨è¿™äº›çŸ¥è¯†è§£å†³å®é™…é—®é¢˜ï¼Œè¿™ç§å­¦ä¹ å’Œåº”ç”¨çš„è¿‡ç¨‹æœ¬èº«å°±æ˜¯ä¸€ç§æˆå°±æ„Ÿã€‚6.<strong>é¡¹ç›®çš„æˆåŠŸå®æ–½ï¼š</strong> å½“é¡¹ç›®æˆåŠŸå®æ–½ï¼Œäº¤ä»˜ç»™ç”¨æˆ·å¹¶äº§ç”Ÿäº†ç§¯æçš„å½±å“æ—¶ï¼Œä½ ä¼šæ„Ÿåˆ°è‡ªå·±çš„åŠªåŠ›å’Œè´¡çŒ®æ˜¯æœ‰æ„ä¹‰çš„ã€‚7.<strong>æŒç»­æ”¹è¿›ï¼š</strong> æˆåŠŸåœ°æ¨åŠ¨äº†é¡¹ç›®çš„æŒç»­æ”¹è¿›ï¼Œé€šè¿‡å¼•å…¥æ–°çš„å·¥ç¨‹å®è·µã€å·¥å…·æˆ–æµç¨‹ï¼Œä½¿é¡¹ç›®æ›´åŠ é«˜æ•ˆå’Œå¯ç»´æŠ¤ã€‚</p>
</li>
</ul>
<h2 id="å®ä¹ ï¼ˆåˆ›ä¸–ï¼‰"><a href="#å®ä¹ ï¼ˆåˆ›ä¸–ï¼‰" class="headerlink" title="å®ä¹ ï¼ˆåˆ›ä¸–ï¼‰"></a>å®ä¹ ï¼ˆåˆ›ä¸–ï¼‰</h2><ul>
<li><p>â€œç‰™åŒ»æ˜Ÿçƒâ€å°ç¨‹åºï¼Œåšäº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>æ¥å£è®¾è®¡ï¼Ÿ<br>  æ ¹æ®ç”¨æˆ·æä¾›çš„åŠŸèƒ½æ¸…å•å’Œäº§å“åŸå‹å›¾ï¼Œç»“åˆå·²æœ‰çš„æ•°æ®åº“è¡¨å­—æ®µï¼Œå°è¯•è®¾è®¡äº†å°ç¨‹åºâ€œä¸ªäººä¸­å¿ƒâ€éƒ¨åˆ†çš„æ¥å£ä»¥åŠç›¸å…³çš„æ•°æ®åº“å­—æ®µè®¾è®¡ã€‚<br>  ä¾‹å¦‚ï¼Œæ ¹æ®ç”¨æˆ·idæŸ¥è¯¢å’Œä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼Œåˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åœ¨è¿™ä¸ªå°ç¨‹åºä¸ŠæŠ¥åçš„è¯¾ç¨‹åˆ—è¡¨ï¼ŒæŸ¥è¯¢ç”¨æˆ·å­¦ä¹ åœ¨çº¿è¯¾ç¨‹çš„è®°å½•ã€‚<br>  åŒæ—¶ï¼Œä¹Ÿè®¾è®¡äº†åœ¨çº¿è¯¾ç¨‹å­¦ä¹ è®°å½•è¡¨ï¼ŒæŒ‰ç…§ç”¨æˆ·idåˆ†åŒºåˆ›å»ºä¸åŒçš„çº¿ä¸Šè¯¾å­¦ä¹ è®°å½•è¡¨ï¼Œé¿å…æŠŠæ‰€æœ‰ç”¨æˆ·çš„å­¦ä¹ è®°å½•æ”¾åˆ°ä¸€å¼ è¡¨ä¸­ã€‚å…¶ä¸­â€œè¿ç»­å­¦ä¹ å¤©æ•°â€è¿™ä¸ªå­—æ®µï¼Œæ”¾åˆ°äº†user_infoè¡¨ä¸­ä½œä¸ºç”¨æˆ·å±æ€§å­—æ®µï¼›åŒæ—¶åœ¨user_infoè¡¨ä¸­å¢åŠ äº†ä¸€ä¸ªâ€œæœ€è¿‘å­¦ä¹ æ—¥æœŸâ€ï¼Œåœ¨æ›´æ–°â€œè¿ç»­å­¦ä¹ å¤©æ•°â€æ—¶å¯æ ¹æ®â€œæœ€è¿‘å­¦ä¹ æ—¥æœŸâ€åˆ¤æ–­æ˜¯å¦è¿ç»­ï¼ŒåŒæ—¶å°†â€œæœ€è¿‘å­¦ä¹ æ—¥æœŸâ€æ›´æ–°ã€‚</li>
<li>è§†é¢‘å¼¹å¹•åŠŸèƒ½ï¼Ÿ<br>  ä½¿ç”¨ WebSocket åè®®ï¼Œåœ¨ä¸€ä¸ªæŒä¹…è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡ï¼Œå®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„å®æ—¶é€šä¿¡ã€‚ä¸ä¼ ç»Ÿçš„HTTPé€šä¿¡ç›¸æ¯”ï¼Œå‡å°‘äº†ç½‘ç»œå¼€é”€å’Œå»¶è¿Ÿã€‚<br>  ä½¿ç”¨ ws å®ç°å®æ—¶å¼¹å¹•çš„åŠŸèƒ½ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å»ºç«‹ ws è¿æ¥åï¼Œä½¿ç”¨ WebSocketåŒ…ä¸­çš„Sessionç±»ä¿å­˜ä¸è¿™ä¸ªå®¢æˆ·ç«¯çš„è¿æ¥ä¼šè¯ï¼Œæ ¹æ®ws è¿æ¥ä¸­æºå¸¦çš„ç”¨æˆ·çš„connectionIdï¼Œå°†è¿™ä¸ªsessionä¿å­˜åœ¨é™æ€çš„çº¿ç¨‹å®‰å…¨çš„ConcurrentHashMapä¸­ï¼ŒåŒæ—¶åœ¨redisä¸­åˆ›å»º&#x2F;åˆ·æ–°è¯¥ç”¨æˆ·ä¿¡æ¯ï¼›å½“æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯é€šè¿‡wsè¿æ¥å‘é€çš„æ¶ˆæ¯æ—¶ï¼Œä»reidsä¸­æ‰¾åˆ°æ‰€æœ‰ æœ€è¿‘70så†…åˆ›å»º&#x2F;åˆ·æ–°çš„ ç”¨æˆ·è¿æ¥çš„connectionIdï¼Œåœ¨Mapä¸­æ‰¾åˆ°å¯¹åº”çš„sessionï¼Œç»™ç”¨æˆ·ç«¯å‘é€è¿™æ¡æ–°å¼¹å¹•ï¼ŒåŒæ—¶åˆ·æ–°redisä¸­çš„ç”¨æˆ·ä¿¡æ¯ã€‚<br>  ç¬¬ä¸€æ¬¡æ¥è§¦httpä»¥å¤–çš„åè®®ï¼Œwebsocketåè®®æ˜¯httpçš„å‡çº§ï¼ŒæœåŠ¡ç«¯æ¥å£ä½¿ç”¨çš„æ˜¯@ServerEndpoint(â€œ&#x2F;â€œ)è·å–è¿æ¥ä¿¡æ¯ã€‚å¯¹äºè·å–connectionIdè¿™ä¸ªè¯·æ±‚ï¼Œåº”è¯¥åœ¨wsè¿æ¥ä¹‹å‰å‘ç”Ÿï¼Œæ‰€ä»¥ä½¿ç”¨ä¸€ä¸ªcontrollerå®ç°è·å–connectionIdè¯·æ±‚ï¼Œéšåå®¢æˆ·ç«¯ä½¿ç”¨jsä»£ç è°ƒç”¨wsæ¥å£ï¼Œå»ºç«‹wsè¿æ¥ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰å…³å¼¹å¹•çš„serviceç±»æ— æ³•åœ¨wsæ¥å£ä¸­æ­£ç¡®æ³¨å…¥ï¼Œæ‰€ä»¥å»ºè®®æŠŠï¼ˆé€šè¿‡mybatisï¼‰ä¿å­˜å¼¹å¹•ä¿¡æ¯åˆ°æ•°æ®åº“è¿™ä¸ªè¡Œä¸ºä¹Ÿåˆ†å¼€åœ¨controllerä¸­å®ç°ï¼Œç‚¹å‡»â€œå‘é€å¼¹å¹•â€åï¼Œå…ˆè°ƒç”¨controllerä¿å­˜å¼¹å¹•ä¿¡æ¯ï¼Œç„¶åè°ƒç”¨wsæ¥å£å®ç°å®æ—¶å¼¹å¹•ã€‚</li>
</ol>
</li>
<li><p>ç¼–ç¨‹å¹³å°é¡¹ç›®ï¼Œåšäº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>é¡¹ç›®æ•´ä½“æƒ…å†µï¼šä¸€ä¸ªåœ¨çº¿å°‘å„¿ç¼–ç¨‹ç«èµ›å¹³å°ï¼Œå­¦ç”Ÿç™»å½•å¹³å°ï¼Œåœ¨ç«èµ›æ—¶é—´å†…è·å–è¯•é¢˜ï¼Œç­”é¢˜å’Œæäº¤ã€‚æ„å»ºåœ¨SSM + SpringBootä¸Šï¼Œæœ‰ç»Ÿä¸€çš„è¿”å›ç»“æœæ ¼å¼ JsonResultï¼Œç»Ÿä¸€çš„æˆåŠŸ&#x2F;å¤±è´¥è¿”å›ç ã€‚</li>
<li>å­¦ç”Ÿç™»å½•ï¼š<ul>
<li>ç”Ÿæˆå›¾åƒéªŒè¯ç uuidï¼šUUIDç”ŸæˆéªŒè¯ç å”¯ä¸€æ ‡è¯† uuidï¼ŒHutool åº“ç”Ÿæˆä¸€ä¸ªåœ†å½¢éªŒè¯ç ã€‚å°† uuid å’Œ éªŒè¯ç çš„base64ç¼–ç  è¿”è¿˜å‰ç«¯ã€‚å°†éªŒè¯ç æ ‡è¯†å’ŒéªŒè¯ç å†…å®¹ä»¥é”®å€¼å¯¹çš„å½¢å¼ï¼ˆuuidï¼Œcodeï¼‰å­˜å‚¨åˆ° Redisä¸­ï¼Œæœ‰æ•ˆæœŸä¸º60ç§’ã€‚</li>
<li>å‘ç”ŸçŸ­ä¿¡éªŒè¯ç sendsmsï¼šåŒæ—¶ä»¥ JsonResultç»™å‰ç«¯è¿”å›è¯¥æ‰‹æœºå·ä¸‹çš„æ‰€æœ‰å­¦ç”Ÿè´¦å·ï¼ˆä»¥labelã€valueå½¢å¼ï¼Œè¿”å›æ•°ç»„ List&lt;Map&lt;String, Object&gt;&gt; stuï¼‰å› ä¸ºä¸€ä¸ªå®¶é•¿çš„æ‰‹æœºå·å¯å¯¹åº”å¤šä¸ªå­©å­çš„å­¦ç”Ÿè´¦å·</li>
<li>ç™»å½•ï¼šä½¿ç”¨æ‰‹æœºå·+å­¦ç”Ÿå§“å+å¯†ç ç™»å½•ã€‚éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®ï¼ˆbase64ç¼–ç +md5åŠ å¯†ã€ä¸å¯é€†ã€‘åï¼Œä¸æ•°æ®åº“ä¸­å­˜çš„å¯†ç å»é™¤å¤´å››ä¸ªå°¾ä¸¤ä¸ªå­—ç¬¦åæ¯”è¾ƒï¼‰ï¼ŒéªŒè¯ç uuidæ˜¯å¦å­˜åœ¨ï¼ˆè¿”è¿˜ç»™å‰ç«¯çš„æ ‡è¯†ï¼‰ä¸”æ­£ç¡®ï¼ˆç”¨æˆ·è¾“å…¥çš„éªŒè¯ç ï¼‰ï¼Œ</li>
<li>ä¿®æ”¹å¯†ç ï¼šä¸€ç³»åˆ—çš„åˆ¤æ–­ï¼Œæäº¤æ˜¯å¦ä¸ºnullæˆ–ç©ºã€è´¦å·æ˜¯å¦å­˜åœ¨ã€æ–°å¯†ç æ˜¯å¦æ»¡è¶³ç»™å®šçš„æ­£åˆ™æ ¼å¼ï¼Œæ¥ç€è¦ä¸æ•°æ®åº“ä¸­çš„åŸå¯†ç ï¼ˆå¯ï¼‰å’ŒåŒä¸€ç™»å½•è´¦å·ä¸‹å…¶ä»–å­¦ç”Ÿå¯†ç ï¼ˆä¸å¯ï¼‰åˆ¤æ–­æ˜¯å¦é‡å¤ã€‚ç”¨æˆ·è¾“å…¥çš„å¯†ç å­˜å…¥æ•°æ®åº“ï¼Œè¦ç»è¿‡ï¼šbase64åŠ å¯†ï¼Œå’Œé¡¹ç›®å¯†é’¥è¿æ¥åè¿›è¡Œ MD5å“ˆå¸ŒåŠ å¯†ï¼Œå†é€šè¿‡randomTest.getRandomStr()éšæœºå¢åŠ åˆ°å‰4ä¸ªå­—ç¬¦å’Œå2ä¸ªå­—ç¬¦ã€‚</li>
</ul>
</li>
<li>ç¼–ç¨‹é¢˜åˆ¤é¢˜ï¼š<ul>
<li>@Transactional(rollbackFor &#x3D; Exception.class) å£°æ˜äº‹åŠ¡ï¼Œå°†æäº¤ç¼–è¯‘é¢˜æ–¹æ³• <code>getCompileAnswer</code>åŒ…è£¹åœ¨ä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­ï¼ŒæŠ›å¼‚å¸¸åå›æ»šã€‚</li>
<li>åˆ¤æ–­å­¦ç”Ÿidå­˜åœ¨ï¼Œæ˜¯å¦åœ¨æ¯”èµ›æ—¶é—´ï¼Œæ˜¯å¦å·²æå‰äº¤å·ï¼ˆæœ‰scoreRecordè®°å½•ï¼‰</li>
<li>ä½¿ç”¨ restTemplateç»™å¸ƒç½®åœ¨æœåŠ¡å™¨ä¸Šçš„â€åˆ¤é¢˜æœºâ€å‘ç”Ÿç¼–ç¨‹é¢˜åˆ¤é¢˜è¯·æ±‚ï¼Œè¿”å›åˆ¤é¢˜ç»“æœ</li>
<li>å¦‚æœæ²¡æœ‰æäº¤è®°å½•ï¼Œæ–°å¢compileAnswerï¼Œåˆ¤æ–­å‰©ä½™æäº¤æ¬¡æ•°ï¼›å¦‚æœæ­¤æ¬¡æäº¤ç¼–ç¨‹é¢˜æˆç»©å¤§äºåŸçºªå½•ä¸­çš„ï¼Œæ›´æ–°è®°å½•</li>
<li>è¿”å›å‰ç«¯ï¼šï¼ˆsuccess: ; resultCode: ; resultMsg: ; data:é€šè¿‡æ ·ä¾‹æ•°ï¼Œå¹³å‡æ—¶é—´ï¼Œå¹³å‡å†…å­˜ï¼‰</li>
</ul>
</li>
</ol>
</li>
</ul>
<ul>
<li><p>ä¸äº§å“ç»ç†ï¼Œå‰ç«¯æ²Ÿé€šï¼Ÿ<br>åŸæ¥ä½¿ç”¨codingä»£ç ååŒå’Œé¡¹ç›®ç®¡ç†ï¼Œåœ¨è“æ¹–æ”¾äº†åŸå‹è®¾è®¡ï¼Œé€šè¿‡å¾®ä¿¡æ²Ÿé€šã€‚åé¢ç»Ÿä¸€æ”¹ç”¨é£ä¹¦ã€‚<br>å…ˆå¼€ä¸€ä¸ªé¡¹ç›®å¯åŠ¨ä¼šï¼Œç¡®å®šå¦‚é™æ€é¡µé¢ï¼Œæ¥å£å¼€æ”¾ï¼Œå‰åç«¯è¿æ¥è°ƒè¯•çš„è¿›åº¦ï¼Œæ—¶é—´ç®¡ç†ã€‚ã€‚ï¼Ÿï¼Ÿ<br>å¼€å‘è¿‡ç¨‹é‡Œï¼Œæˆ‘é€šè¿‡çœ‹äº§å“åŸå‹è¿›è¡Œç†è§£ï¼Œç»“åˆé¡¹ç›®ä»£ç å’Œæ–‡æ¡£ç†è§£ï¼Œå¼€å‘æ¥å£æ—¶ä¸å‰ç«¯å¯¹æ¥ã€‚ã€‚ã€‚</p>
</li>
<li><p>ä½ é‡åˆ°çš„æœ€å¤§çš„æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ<br>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘è™½ç„¶æœ‰ssmï¼ŒmybatisåŸºç¡€ï¼Œä½†æ˜¯ç­‰äºä¸€äº›æ³¨è§£ï¼Œæ–¹æ³•è¿˜æ˜¯ä¸€çŸ¥åŠè§£ï¼Œè€Œä¸”æ²¡æœ‰çœ‹è¿‡é¡¹ç›®ä»£ç ï¼Œä¸ä¼šçœ‹æ¥å£æ–‡æ¡£ï¼Œæ²¡ç”¨è¿‡gitç­‰ï¼Œï¼Œä¸€æ•´ä¸ªå°±æ˜¯éå¸¸æ— ä»ä¸‹æ‰‹ã€‚åæ¥å°±æ˜¯ç¡¬ç€æŠŠéœ€æ±‚ç›¸å…³çš„ä»£ç çœ‹å®Œï¼Œæ¯ä¸ªå°ç»†èŠ‚éƒ½è‡ªå·±æŸ¥æ–¹æ³•æˆ–è€…é—®åŒäº‹ï¼Œä»æœ€ç®€å•çš„ä¸€ä¸ªéœ€æ±‚å¼€å§‹ä¸€ä¸ªä¸ªè§£å†³ï¼Œæµ‹è¯•ï¼Œæäº¤ï¼Œé€æ¸ä¸Šæ‰‹ã€‚å½“ç„¶åé¢ä¹ŸæŠŠç¼ºçš„æŠ€æœ¯è¡¥ä¸Šäº†ã€‚<br>ï¼ˆæŠ€æœ¯ä¸Šé‡åˆ°çš„å›°éš¾ï¼Œåº”è¯¥å°±æ˜¯å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å§ï¼Œå¦‚ç¼–ç¨‹é¢˜åˆ¤é¢˜ï¼‰</p>
</li>
</ul>
<hr>

<h2 id="é¡¹ç›®1ï¼ˆè·‘ä¸ªè…¿ï¼‰"><a href="#é¡¹ç›®1ï¼ˆè·‘ä¸ªè…¿ï¼‰" class="headerlink" title="é¡¹ç›®1ï¼ˆè·‘ä¸ªè…¿ï¼‰"></a>é¡¹ç›®1ï¼ˆè·‘ä¸ªè…¿ï¼‰</h2><ul>
<li><p>â€œæ ¡è·‘è·‘â€æ ¡å›­ä»£æ‹¿å¹³å° <a target="_blank" rel="noopener" href="https://www.naoffer.com/course/class/302">https://www.naoffer.com/course/class/302</a></p>
<ul>
<li>é¡¹ç›®æè¿°ï¼šâ€æ ¡è·‘è·‘â€å¹³å°æ˜¯ä¸€æ¬¾è‡´åŠ›äºè§£å†³å¤§å­¦æ ¡å›­å†…ä»£æ‹¿æœåŠ¡éœ€æ±‚çš„åˆ›æ–°å‹åº”ç”¨ï¼Œæä¾›æ–¹ä¾¿å¿«æ·çš„å¤–å–ã€å¿«é€’ã€æ–‡ä»¶ç­‰ä»£æ‹¿ä¸šåŠ¡ï¼ŒåŒæ—¶ç¡®ä¿æ”¯ä»˜åŒæ–¹çš„ä¿¡ç”¨å’Œæµç¨‹çš„å¯è·Ÿè¸ª</li>
<li>ä¸»è¦å·¥ä½œï¼š<ul>
<li>åœ¨ä»»åŠ¡å‘å¸ƒæ¨¡å—ï¼Œé€šè¿‡äº§å“åŸå‹æ€»ç»“å‡ºä»£æ‹¿æœåŠ¡ä»»åŠ¡æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨åŒå€¼æšä¸¾çš„æ–¹å¼å¯¹ç±»å‹ã€æ•°é‡ã€çŠ¶æ€ç­‰è¿›è¡Œå­˜å‚¨ã€‚</li>
<li>åœ¨ä»»åŠ¡åˆ—è¡¨æ¨¡å—ï¼Œå®ç°äº†å¤šç­›é€‰å’Œå¤šæ’åºæ¡ä»¶ä¸‹çš„åŠ¨æ€åˆ†é¡µåˆ—è¡¨æŸ¥è¯¢ã€‚</li>
<li>ä½¿ç”¨æ•°æ®åº“æ‚²è§‚é”ï¼Œè§£å†³åŒä¸€è·‘è…¿ä»»åŠ¡çš„è¶…å–è®¢å•é—®é¢˜ï¼Œå®ç°æŠ¢å•å”¯ä¸€ã€‚</li>
<li>ä¸ºä»£æ‹¿åŒæ–¹çš„é™Œç”ŸäººæœåŠ¡å®‰å…¨æ€§ï¼Œå¯¹æ¯ä¸ªçŠ¶æ€è¿›è¡Œæµæ°´è®°å½•ã€‚æµç¨‹çŠ¶æ€åˆ‡æ¢ä¸­å®ç°äº†ç…§ç‰‡ä¸Šä¼ çš„å¯é æ€§ï¼Œä¸ºäº†èŠ‚çœæœåŠ¡å™¨å¸¦å®½ï¼Œä½¿ç”¨è…¾è®¯äº‘ COS ç›´ä¼ æ–¹æ¡ˆï¼Œæä¾›é¢„ç­¾åç»™å‰ç«¯ï¼Œä¿éšœäº† COS çš„å®‰å…¨æ€§ã€‚</li>
<li>åœ¨æ¥å•å‰ï¼Œéœ€è¦æ¥å•äººæ”¯ä»˜æŠ¼é‡‘ï¼Œå®ç°æŠ¼é‡‘æ”¯ä»˜ã€æŠ¼é‡‘é€€è¿˜çš„äº‹åŠ¡å¤„ç†ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ä»‹ç»ä¸€ä¸‹è·‘è…¿é¡¹ç›®ï¼ï¼</strong></p>
<ul>
<li>â€œæ ¡è·‘è·‘â€æ˜¯æˆ‘ä»¬å­¦æ ¡åˆ›ä¸šå›¢é˜Ÿåšçš„ä¸€ä¸ªé¡¹ç›®ï¼Œåç»­ä¼šä¸Šçº¿è¿è¥ã€‚å®ƒæ˜¯æ ¹æ®æ ¡å›­ä¸­çš„çœŸå®çš„å¤–å–ã€æ–‡ä»¶ç­‰ç‰©å“ä»£æ‹¿éœ€æ±‚è€Œè®¾è®¡çš„ï¼Œå¦å¤–åŒå­¦çœ‹åˆ°é€è´§è·¯çº¿ä¸è‡ªå·±é¡ºè·¯å¯ä»¥é¡ºæ‰‹æ¥å•è·‘è…¿ã€‚åŒå­¦ä»¬åœ¨å¹³å°ä¸Šå‘å¸ƒè®¢å•ï¼Œæ¥å•ï¼Œæ”¯ä»˜ï¼ŒåŒæ—¶èƒ½å¤Ÿç¡®ä¿æ”¯ä»˜åŒæ–¹çš„ä¿¡ç”¨å’Œæµç¨‹çš„å¯è·Ÿè¸ªã€ã€</li>
<li>æˆ‘å‚ä¸äº†é¡¹ç›®ä¸­å‡ ä¸ªæ¨¡å—çš„åç«¯å¼€å‘ã€‚ï¼ˆè€ƒè™‘åˆ°æ ¡å›­å†…ç”¨æˆ·é‡å’Œæµé‡é‡çº§ä¸å¤§ï¼Œä½¿ç”¨çš„æ˜¯å•ä½“æ¶æ„ï¼Œå¯¹äºå­˜åœ¨çš„è®¢å•è¶…å–ç­‰ä¸€äº›åœºæ™¯é—®é¢˜ï¼Œå‚è€ƒäº†ä¸€äº›åˆ«çš„é¡¹ç›®ä¸­çš„åšæ³•ï¼‰ï¼›æˆ‘åšçš„æ¨¡å—é‡Œé¢éš¾ç‚¹æ¯”è¾ƒå¤šçš„ï¼š<ul>
<li>ä¸€ä¸ªæ˜¯è·‘è…¿ä»»åŠ¡çš„å‘å¸ƒæ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—ä¸€æ˜¯è¦å¯¹ä¿¡æ¯è¿›è¡Œéæ³•è¿‡æ»¤ï¼Œå¦ä¸€ä¸ªä¹Ÿè¦åŸºäºrediså®ç°éé‡å¤æ”¯ä»˜çš„æ–¹æ¡ˆ</li>
<li>ç„¶ååœ¨è¯¦æƒ…æ¨¡å—ï¼Œé’ˆå¯¹å­¦ç”Ÿä»£æ‹¿éœ€æ±‚æ¯”è¾ƒèšé›†å¦‚åˆé¥­çš„æƒ…å†µï¼Œä¼šå¯¼è‡´å¤šä¸ªäººåŒæ—¶æŠ¢åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªï¼Œå¯¼è‡´å‡ºç°å¹¶å‘é—®é¢˜ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨äº†æ‚²è§‚é”æ¥è§£å†³</li>
<li>å¦å¤–ï¼Œè¦åœ¨é…é€è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•å»ä¿è¯åŒæ–¹é™Œç”Ÿäººçš„ä¿¡ç”¨å®‰å…¨ï¼Ÿæ¯”å¦‚è¯´åœ¨å–è´§çš„æ—¶å€™ï¼Œæ€ä¹ˆèƒ½å¤ŸçŸ¥é“æ˜¯è·‘è…¿äººå»æ‹¿çš„è´§ï¼Ÿè€Œä¸æ˜¯åˆ«äººæ‹¿ç€è¿™ä¸ªéªŒè¯ç å»æ‹¿åˆ°è´§ï¼Œæˆ–è€…æ˜¯è¯´ç‰©å“é€åˆ°äº†ï¼Œä½†æ˜¯è¯´æ²¡é€åˆ°ï¼Œæˆ–è€…ã€ã€<br>  æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯åŸºäºæ‹ç…§ç¡®å®šåœ°ç‚¹çš„æ–¹å¼ï¼Œæ¯”å¦‚ä»–åˆ°ç°åœºï¼Œæ‹ç…§ä¸Šä¼ ï¼Œæˆ‘ä»¬æ‰ç»™ä»–å…¬å¼€å–è´§ç ï¼Œä»–å¿…é¡»åœ¨äº”åˆ†é’Ÿä¹‹å†…å–è´§ï¼Œå†æ‹ç…§ç‰‡ï¼Œè¿›è¡ŒéªŒè¯ã€ã€é‚£è¿™ä¸ªåœ°æ–¹å°±ä¼šäº§ç”Ÿå¾ˆå¤šçš„å›¾ç‰‡ï¼Œä¼ ç»Ÿçš„ç›´ä¼ æ–¹æ¡ˆï¼Œä¼šå¯¹æœåŠ¡å™¨å¸¦å®½é€ æˆå¾ˆå¤§çš„å½±å“ï¼Œæ‰€ä»¥é¡¹ç›®é‡‡ç”¨äº†é˜¿é‡Œäº‘æˆ–è€…è…¾è®¯äº‘çš„ç›´ä¼ æ–¹æ¡ˆï¼Œè§£å†³äº†æœ‰æ•ˆæ€§å’Œè·¨åŸŸçš„ç­¾å</li>
<li>ç¬¬å››ä¸ªæŠ¼é‡‘æ¨¡å—å°±å¯ä»¥ä¸è¯´äº†ã€‚äº‹åŠ¡ã€‚ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>ä½ åšè¿‡æœ€æœ‰æŒ‘æˆ˜çš„é¡¹ç›®ï¼Ÿéš¾ç‚¹æ˜¯ã€ã€</p>
<ul>
<li>Sï¼šèƒŒæ™¯    - Tï¼šä»»åŠ¡    - Aï¼šä¸¾æª    - Rï¼šç»“æœ</li>
</ul>
</li>
<li><p>é¡¹ç›®èƒŒæ™¯</p>
<ul>
<li>æˆ‘å‚ä¸å­¦æ ¡åˆ›ä¸šå›¢é˜Ÿï¼ˆéå…¨èŒï¼Œæœ‰éœ€æ±‚å°±å»ï¼‰çš„å•†ä¸šé¡¹ç›®ï¼Œç›®å‰è¿˜æœªï¼ˆå‡†å¤‡åœ¨å—èˆªï¼‰ä¸Šçº¿è¿è¥ï¼Œäº§å“éœ€æ±‚çœŸå®ï¼Œäº§å“ä¸šåŠ¡åšçš„éƒ½æ˜¯æ ¸å¿ƒçš„ï¼ˆè€Œä¸€èˆ¬çš„å®ä¹ éƒ½æ˜¯æ‰“æ‚ï¼‰</li>
<li>éœ€æ±‚åˆ†æï¼šå‘å•äººæ‡’çš„åŠ¨å¼¹ï¼Œéœ€è¦æ ¡å†…ä»£æ‹¿æœåŠ¡ï¼›æ¥å•äººæŸ¥çœ‹é€è¾¾åœ°ç‚¹ä¸å®¿èˆå¾ˆè¿‘ï¼Œå›å®¿èˆè·¯ä¸Šé¡ºä¾¿æ¥ä¸ªå•</li>
<li>ç«å“å·®åˆ«ï¼šç¾å›¢è·‘è…¿æ˜¯æ ¹æ®ç‚¹åˆ°ç‚¹è·ç¦»è®¡ç®—è´¹ç”¨ï¼Œæˆ‘ä»¬æ˜¯æ ¹æ®æ ¡å†…è·ç¦»ä¸é‡è¦ï¼Œæ˜¯ç‚¹åˆ°é¢æˆ–è€…æ˜¯ç‚¹åˆ°çº¿ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå­¦ç”Ÿçš„ç»ˆç‚¹é™„è¿‘çš„ä¹Ÿå¯ä»¥é¡ºæ‰‹å»é€ï¼Œæ‰€ä»¥å¯ä»¥å®ç°å•ä»·æ¯”è¾ƒä¾¿å®œï¼Œä¸€å•æ­£å¸¸æ˜¯ä¸¤å—é’±</li>
<li>é¡¹ç›®æ¶æ„ï¼šå•ä½“é¡¹ç›® SpringBoot + Maven</li>
<li>å››å¤§æ¨¡å—ï¼šè·‘è…¿éœ€æ±‚å‘å¸ƒã€è·‘è…¿æŠ¢å•å’Œåˆ—è¡¨ã€åŒæ–¹çŠ¶æ€å’Œå®‰å…¨ã€æŠ¼é‡‘å’Œå¾®ä¿¡æ”¯ä»˜</li>
<li>äº§å“è§„åˆ’ï¼š1ã€ç›®å‰æ˜¯ç¬¬ä¸€ç‰ˆï¼Œæå°ç‰ˆæœ¬ä¸Šçº¿ï¼Œæ ¸å¿ƒå‘å¸ƒåŠŸèƒ½ã€æ¥å•åŠŸèƒ½ã€æŠ¼é‡‘åŠŸèƒ½ï¼›2ã€åŒæ–¹ä¿¡ç”¨å’Œè¯„ä»·ä½“ç³»ä¸Šçº¿ï¼›3ã€é›†ä¸­å¼•ç”¨ç¬¬ä¸‰æ–¹æ–¹æ¡ˆ(å³è´§ç‰©é€è¾¾æ–¹+å·²ç»æ™ºèƒ½è´§æŸœ)ã€ç›—çªƒç›‘æ§</li>
<li>å›¢é˜Ÿæˆå‘˜ï¼šäº§å“ç»ç†*2ï¼Œåç«¯^3ï¼Œå‰ç«¯^2</li>
</ul>
</li>
<li><p>ä¸€ã€è·‘è…¿éœ€æ±‚å‘å¸ƒæ¨¡å—</p>
<ul>
<li>äº§å“åŸå‹ï¼ˆå›¾ï¼‰</li>
<li>æ•°æ®åº“è®¾è®¡<br>  è®¢å•idã€å‘å¸ƒäººidã€å–è´§åœ°ç‚¹ã€æ”¶è´§åœ°ç‚¹ã€è´§ç‰©ç§ç±»ã€è´§ç‰©é‡é‡ã€æœŸæœ›é€è¾¾æ—¶é—´ï¼ˆdatetimeï¼‰ã€è´¹ç”¨ã€è®¢å•çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´  <img src="https://leo710aka.github.io/bk/job17.png" width="550" height="300" alt=""></li>
<li>äº®ç‚¹éš¾ç‚¹<ol>
<li>(å°äº®ç‚¹): ç‰©å“ä¿¡æ¯éæ³•å…³é”®å­—è¿‡æ»¤<br>  æäº¤æ—¶ï¼Œä½¿ç”¨å°ç¨‹åºçš„è¿‡æ»¤æ¥å£ï¼Œå¯¹å‘èµ·äººçš„ç‰©å“ä¿¡æ¯è¦ç´ è¿›è¡Œéæ³•å…³é”®å­—è¿‡æ»¤ï¼Œå¹¶å¯¹æ‰‹æœºå·å’Œâ€œå¾®ä¿¡â€â€œvxâ€ç­‰å­—çœ¼è¿›è¡Œæ­£åˆ™æŸ¥éªŒï¼Œé˜²æ­¢ååºè·‘è…¿åŒæ–¹ç§ä¸‹æ²Ÿé€šï¼Œ</li>
<li>(å°äº®ç‚¹): åˆ†ç±»ç­‰ä¿¡æ¯ä½¿ç”¨åŒé‡æšä¸¾<br>  å¯¹é€è´§çš„ç±»å‹ã€é‡é‡ç­‰å›ºå®šæœ‰é™é¡¹è¦ç´ ï¼Œè¦ç”¨å¤šå€¼ä¸¾çš„æ–¹å¼å®ç°ï¼Œæ–¹ä¾¿åœ¨å‰ç«¯æ¥å£å’Œæ•°æ®åº“é‡Œä»¥å­—å…¸idç±»å‹è¿›è¡Œæ’å…¥ï¼Œå‰ç«¯ä¼ è¿‡æ¥çš„urlä¸­æºå¸¦çš„æ˜¯idå€¼ï¼ˆå¦‚1ï¼šé£Ÿå“ã€2ï¼šæ–‡ä»¶ã€ã€ï¼‰è€Œä¸æ˜¯æ˜“é”™çš„å­—ç¬¦ä¸²ç±»å‹</li>
<li>(å¤§äº®ç‚¹): åç«¯é˜²æ­¢é‡å¤æäº¤(ä¸€ä¸ªç”¨æˆ·ä¸‹äº†å¤šæ¬¡å•)<br>  (1) ç›®å‰æ˜¯å•æœºé¡¹ç›®ï¼šåœ¨æäº¤æ¥å£ï¼Œä½¿ç”¨å¹¶å‘æ–¹æ³•(sychronizedæ–¹æ³•)ï¼Œä½¿ç”¨rediséšæœºKeyæ¥è¿›è¡ŒéªŒè¯(å‰ç«¯ç”Ÿæˆéšæœºkey)<br>  åœ¨ä¸‹å•é¡µé¢åŠ è½½æ—¶ï¼Œåœ¨åç«¯ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ UUIDï¼‰ä½œä¸ºè®¢å•æäº¤çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå°†è¿™ä¸ªä¸€æ¬¡æ€§çš„æ ‡è¯†ç¬¦å­˜åˆ° Redisã€‚å½“ç”¨æˆ·ç‚¹å‡»æäº¤è®¢å•æ—¶ï¼Œåœ¨åç«¯æ ¹æ®ç”¨æˆ·æäº¤çš„æ ‡è¯†ç¬¦ä» Redis ä¸­è·å–å¯¹åº”çš„æ ‡è¯†ç¬¦ã€‚å¦‚æœè·å–åˆ°äº†ï¼Œåˆ™æ˜¯é¦–æ¬¡æäº¤ï¼Œå¤„ç†åè¿”å›æäº¤æˆåŠŸï¼Œå¹¶ä¸”åˆ é™¤redisä¸­çš„æ ‡è¯†ç¬¦ï¼›å¦‚æœæœªè·å–åˆ°ï¼Œåˆ™è¡¨ç¤ºæ˜¯é‡å¤æäº¤ã€‚<br>  (2) ååºæ¨å¹¿åˆ°æ›´å¤šé«˜æ ¡ï¼Œå˜æˆåˆ†å¸ƒå¼ç¯å¢ƒæ—¶ï¼Œè€ƒè™‘å‡çº§åˆ°redisåˆ†å¸ƒå¼é”</li>
</ol>
</li>
</ul>
</li>
<li><p>é˜²æ­¢é‡å¤æäº¤çš„é€»è¾‘ï¼š<br>åœ¨ä¸‹å•é¡µé¢åŠ è½½æ—¶ï¼Œåç«¯ç”Ÿæˆä¸€ä¸ªUUIDä½œä¸ºè®¢å•æäº¤çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå°†è¿™ä¸ªä¸€æ¬¡æ€§çš„æ ‡è¯†ç¬¦å­˜åˆ° Redisã€‚å½“ç”¨æˆ·ç‚¹å‡»æäº¤è®¢å•æ—¶ï¼Œæ ¹æ®ç”¨æˆ·æäº¤çš„æ ‡è¯†ç¬¦ä» Redis ä¸­è·å–å¯¹åº”çš„æ ‡è¯†ç¬¦ã€‚å¦‚æœè·å–åˆ°äº†ï¼Œåˆ™æ˜¯é¦–æ¬¡æäº¤ï¼Œå¤„ç†åè¿”å›æäº¤æˆåŠŸï¼Œå¹¶ä¸”ä»Redisä¸­åˆ é™¤ï¼›å¦‚æœæœªè·å–åˆ°ï¼Œåˆ™è¡¨ç¤ºæ˜¯é‡å¤æäº¤ã€‚</p>
</li>
<li><p>äºŒã€è·‘è…¿æŠ¢å•å’ŒåŠ¨æ€åˆ—è¡¨æ¨¡å—</p>
<ul>
<li>äº§å“åŸå‹<br>  æŸ¥çœ‹è·‘è…¿è®¢å•è¯¦ç»†ä¿¡æ¯åç‚¹å‡»â€œç«‹å³æ¥å•â€ï¼ŒæŠ¢å•åæ‰å¯æŸ¥çœ‹å‘å¸ƒäººä¿¡æ¯ï¼ˆç”µè¯ï¼Œå–è´§ç ï¼ˆåœ¨å®‰å…¨æ¨¡å—å¤„ç†ï¼‰ï¼Œå¤‡æ³¨ï¼‰<br>  è·‘è…¿åŠ¨æ€åˆ—è¡¨é€šè¿‡æ’åºã€ç­›é€‰ï¼Œå±•ç°è·‘è…¿è®¢å•ï¼ˆæ¥å•äººå¯ä»¥å°†è‡ªå·±å®¿èˆä½œä¸ºæ”¶è´§åœ°å€è¿›è¡Œç­›é€‰ï¼‰</li>
<li>ä¸šåŠ¡é€»è¾‘<ol>
<li>è·‘è…¿ä»»åŠ¡è¯¦æƒ…æ¨¡å—ç›®å‰åªåšå±•ç¤ºå’Œä¸‹å•ï¼Œæ¥å•è¿‡ç¨‹ä¸åœ¨æœ¬æ¨¡å—ã€‚éœ€è¦æä¾›ä»»åŠ¡è¯¦æƒ…å±•ç¤ºæ¥å£å’ŒæŠ¢å•æ¥å£</li>
<li>åˆ—è¡¨æ¨¡å—éœ€è¦è€ƒè™‘å¤šæ¡ä»¶åŠ¨æ€æ’åºã€ç­›é€‰ï¼Œå®ç°åˆ†é¡µæ¥å£</li>
<li>æŠ¢å•è·‘è…¿è¯¦æƒ…å’Œè®¢å•æ”¯ä»˜çš„é€»è¾‘<br>  è·‘è…¿è¯¦æƒ…çŠ¶æ€æœ‰ï¼š1 ç­‰å¾…æŠ¢å•ï¼› 2 å·²è¢«æŠ¢ï¼› 3 å·²ç¡®è®¤(æŠ¢å•åéœ€è¦æ‰‹åŠ¨ç¡®å®šæˆ–å–æ¶ˆï¼Œå¦‚æœ1åˆ†é’Ÿå†…ä¸å–æ¶ˆï¼Œè‡ªåŠ¨å˜æˆç¡®è®¤)ï¼›4 è¶…æ—¶è´¹å•<br>  (1) æŸä¸€ç”¨æˆ·ç‚¹å‡»æŠ¢å•æ—¶ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯1å’Œ2çš„çŠ¶æ€ï¼Œè¿™ä¸¤ä¸ªçŠ¶æ€éƒ½å¯ä»¥è§¦å‘æ’é˜Ÿ60sæµç¨‹<br>  (2) å¦‚æœæ˜¯1ï¼Œåˆ™ç”¨æˆ·æŠ¢å•æˆåŠŸï¼Œè¿™ä¸ªæ—¶é—´è¯¦æƒ…çŠ¶æ€å˜ä¸º2ï¼Œå…¶å®ƒç”¨æˆ·åªèƒ½ç­‰å¾…60s(60Sé€€å‡ºçš„æ—¶å€™ï¼Œå†åšä¸€æ¬¡(1)rçš„é€»è¾‘)<br>  (3) å¦‚æœ(2)ç”¨æˆ·å–æ¶ˆè®¢å•ï¼Œåˆ™çŠ¶æ€å˜æˆ1<br>  (4) å¦‚æœæ”¯ä»˜æˆåŠŸï¼Œåˆ™å…¶å®ƒç”¨æˆ·ä¸èƒ½è¿›å…¥æµç¨‹ï¼Œå·²åœ¨æµç¨‹ä¸­çš„ä¾ç„¶ç­‰å¾…<br>  (5) 20åˆ†é’Ÿæœªæ”¯ä»˜çš„é€»è¾‘éœ€è¦å®šæ—¶ä»»åŠ¡è§¦å‘ï¼Œè¯¦æƒ…å˜æˆ1</li>
</ol>
</li>
<li>äº®ç‚¹éš¾ç‚¹<ol>
<li>åœ¨æŠ¢å•æ¨¡å—ï¼Œå› ä¸ºå­¦ç”Ÿä»£æ‹¿æ—¶é—´é›†ä¸­ï¼Œä¼šé€ æˆåŒä¸€ä»»åŠ¡çš„è¶…å–è®¢å•ï¼Œé¡¹ç›®ä½¿ç”¨æ‚²è§‚é”è§£å†³ï¼ˆå°è§„æ¨¡å¹¶å‘ï¼‰é—®é¢˜<br>  å¹¶ä½¿ç”¨60så€’è®¡æ—¶çš„æ–¹æ¡ˆï¼Œå®ç°å¹¶å‘æŠ¢ã€å·²æŠ¢ä½†æ”¾å¼ƒçš„åœºæ™¯</li>
<li>æœ¬æ¨¡å—å¤šå¤„ä½¿ç”¨å®šæ—¶ä»»åŠ¡(quartz schedule)æ›´æ”¹è®¢å•çŠ¶æ€ï¼Œæ¯”å¦‚1åˆ†é’Ÿå†…è‡ªåŠ¨ç¡®è®¤å’Œè¶…æ—¶åºŸå•ç­‰</li>
<li>åœ¨åˆ—è¡¨æ¨¡å—ï¼Œå› ä¸ºæ ¡å†…å¤šåœ°ç‚¹çš„é€‰æ‹©åœºæ™¯ï¼Œå®ç°å¤šç­›é€‰ã€å¤šæ’åºä¸‹çš„åŠ¨æ€åˆ†é¡µæ¥å£<br>  3.1æ’åºé¡¹:æœ€æ–°(é»˜è®¤)ã€æŒ‰é‡‘é¢ä»å¤§åˆ°å°<br>  3.2ç­›é€‰é¡¹:å¤šåœ°ç‚¹ã€é‡é‡ã€é€è¾¾æ—¶é—´ã€ç±»å‹ã€æ•°é‡</li>
</ol>
</li>
</ul>
</li>
<li><p>ä¹è§‚é”ä¸æ‚²è§‚é”çš„åŒºåˆ«ï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ</p>
<ul>
<li>æ‚²è§‚é”ï¼šè®¤ä¸ºèµ„æºä¸€å®šå­˜åœ¨ç«äº‰ï¼ŒåŠ æ‚²è§‚é”ï¼Œå…·å¤‡é˜»å¡ç‰¹æ€§ï¼Œä»¥ä¿è¯å¤šäº‹åŠ¡å¯¹ç»Ÿä¸€æ•°æ®çš„è®¿é—®çš„å®‰å…¨æ€§ï¼›<ul>
<li>åœ¨å¹¶å‘é‡ä¸å¤§ä¸”å†²çªé¢‘ç‡è¾ƒä½çš„æƒ…å†µä¸‹æ˜¯æœ‰æ•ˆçš„ï¼Œæ‚²è§‚é”å¯ä»¥æä¾›æ›´åŠ ç¨³å®šå’Œå¯é çš„æ•°æ®æ“ä½œä¿æŠ¤ï¼Œæä¾›è¾ƒä¸ºç®€å•å’Œç›´æ¥çš„æ§åˆ¶æ–¹å¼ï¼›å°½ç®¡ä¹è§‚é”åœ¨å¹¶å‘é‡è¾ƒå°ä¸”å†²çªé¢‘ç‡ä¸é«˜çš„æƒ…å†µä¸‹å…·æœ‰ä¼˜åŠ¿ï¼Œä½†åœ¨æ•°æ®ä¿®æ”¹é¢‘ç‡è¾ƒé«˜ã€ç«äº‰æ¿€çƒˆçš„æƒ…å†µä¸‹ï¼Œæ‚²è§‚é”é€šå¸¸æ›´åŠ é«˜æ•ˆï¼›</li>
<li>ä½†æ˜¯å¦‚æœå¹¶å‘é‡å¾ˆé«˜æˆ–è€…å†²çªé¢‘ç‡å¾ˆé«˜ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜å’Œç³»ç»Ÿçš„é˜»å¡ã€‚</li>
<li>ä½¿ç”¨æ–¹æ³•ï¼š<ol>
<li>æŸ¥è¯¢è®¢å•ä¿¡æ¯å¹¶åŠ é”ï¼šåœ¨æŠ¢å•é€»è¾‘ä¸­ï¼Œé¦–å…ˆè¦æŸ¥è¯¢è®¢å•ä¿¡æ¯å¹¶åŠ é”ï¼Œé˜²æ­¢å…¶ä»–ç”¨æˆ·åŒæ—¶æŠ¢å•ã€‚è¯»å’Œå†™æ˜¯åœ¨åŒä¸€æ­¥ï¼ŒæŸ¥è¯¢å¹¶åŠ æ’ä»–é”ï¼Œç¡®ä¿å…¶ä»–äº‹åŠ¡æ— æ³•ä¿®æ”¹è¿™äº›æ•°æ®ï¼Œç›´åˆ°å½“å‰äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> id <span class="operator">=</span> ? <span class="keyword">AND</span> status <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>) <span class="keyword">FOR</span> <span class="keyword">UPDATE</span>;</span><br></pre></td></tr></table></figure></li>
<li>æ›´æ–°è®¢å•çŠ¶æ€ï¼šå¦‚æœæŸ¥è¯¢åˆ°ç¬¦åˆæ¡ä»¶çš„è®¢å•ï¼Œå°±å¯ä»¥æ›´æ–°è®¢å•çŠ¶æ€å¹¶å®ŒæˆæŠ¢å•æ“ä½œï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> orders <span class="keyword">SET</span> status <span class="operator">=</span> <span class="number">2</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> ?;</span><br></pre></td></tr></table></figure></li>
<li>æäº¤äº‹åŠ¡ï¼šå®Œæˆæ“ä½œåï¼Œéœ€è¦<code>COMMIT;</code>æäº¤äº‹åŠ¡æ¥é‡Šæ”¾é”å¹¶ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</li>
<li>ï¼Ÿï¼Ÿå¤„ç†è¶…æ—¶æƒ…å†µï¼šé’ˆå¯¹20åˆ†é’Ÿæœªæ”¯ä»˜çš„é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨å®šæ—¶ä»»åŠ¡æ¥è§¦å‘æŸ¥è¯¢å¹¶åŠ é”ï¼Œç„¶åæ›´æ–°è®¢å•çŠ¶æ€ä¸º1ï¼ˆç­‰å¾…æŠ¢å•çŠ¶æ€ï¼‰ã€‚</li>
</ol>
</li>
</ul>
</li>
<li>ä¹è§‚é”ï¼šè®¤ä¸ºå¤§éƒ¨åˆ†æƒ…å†µä¸å­˜åœ¨ç«äº‰ï¼Œä¸åŠ é”ï¼ˆä¸é˜»å¡ï¼‰ï¼Œä½¿ç”¨ç‰ˆæœ¬å·versionåˆ¤æ–­æ˜¯å¦ä¿®æ”¹ï¼ˆä¿®æ”¹æ•°æ®åŒæ—¶ä¿®æ”¹versionï¼‰<ul>
<li>åœ¨å¹¶å‘é‡å¤§çš„æ—¶å€™ï¼Œæ‚²è§‚é”ç”¨ä¸äº†ï¼Œå¯ä»¥è€ƒè™‘ç”¨ä¹è§‚é”ï¼›CASï¼ŒMVCCæ˜¯ä¹è§‚é”çš„å®ç°</li>
<li>å®ç°æ–¹æ³•ï¼š<ol>
<li>ç‰ˆæœ¬å·å­—æ®µå®ç°ä¹è§‚é”ï¼šåœ¨æ•°æ®åº“è¡¨ä¸­å¢åŠ ä¸€ä¸ªç‰ˆæœ¬å·ï¼ˆversionï¼‰å­—æ®µï¼Œæ•°æ®ç±»å‹é€šå¸¸é€‰æ‹©æ•´æ•°ã€‚æ¯æ¬¡æ›´æ–°æ•°æ®æ—¶ï¼Œå°†ç‰ˆæœ¬å·åŠ ä¸€ã€‚åœ¨æ›´æ–°æ•°æ®æ—¶ï¼Œé€šè¿‡æ¯”è¾ƒå½“å‰æŸ¥è¯¢åˆ°çš„ç‰ˆæœ¬å·ä¸æ›´æ–°æ—¶çš„ç‰ˆæœ¬å·æ¥åˆ¤æ–­æ˜¯å¦æ›´æ–°æˆåŠŸã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> orders (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    order_id <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">    version <span class="type">INT</span>,</span><br><span class="line">    <span class="comment">-- Other columns</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ›´æ–°è®¢å•æ–¹æ³•ï¼Œä½¿ç”¨ä¹è§‚é”</span></span><br><span class="line"><span class="keyword">UPDATE</span> orders </span><br><span class="line"><span class="keyword">SET</span> version <span class="operator">=</span> version <span class="operator">+</span> <span class="number">1</span> </span><br><span class="line"><span class="keyword">WHERE</span> order_id <span class="operator">=</span> <span class="string">&#x27;xxx&#x27;</span> <span class="keyword">AND</span> version <span class="operator">=</span> current_version;</span><br></pre></td></tr></table></figure></li>
<li>æ—¶é—´æˆ³å­—æ®µå®ç°ä¹è§‚é”ï¼šä¸ä¹‹ç±»ä¼¼</li>
<li>æ³¨æ„äº‹é¡¹ï¼š<ul>
<li>åœ¨ä½¿ç”¨ä¹è§‚é”æ—¶ï¼Œéœ€è¦ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡æ¥ç¡®ä¿ã€‚</li>
<li>åœ¨æ¯”è¾ƒç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³æ—¶ï¼Œå¯ä»¥é€šè¿‡æ•°æ®åº“çš„åŸå­æ€§æ“ä½œæ¥å®ç°ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>WHERE</code> å­å¥ä¸­çš„æ¡ä»¶æ¥æ¯”è¾ƒç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³ã€‚</li>
<li>å½“æ›´æ–°æ“ä½œå¤±è´¥æ—¶ï¼Œå¯ä»¥æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚é€‰æ‹©é‡è¯•æ›´æ–°æ“ä½œæˆ–è€…æŠ›å‡ºä¹è§‚é”å¼‚å¸¸ä¾›ä¸Šå±‚å¤„ç†ã€‚</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>è·‘è…¿æŠ¢å•çš„è¯·æ±‚æ˜¯ç›´è¾¾æ•°æ®åº“å—ï¼Ÿå¯ä»¥ä¼˜åŒ–å—ï¼Ÿ</p>
<ul>
<li>æ˜¯çš„ã€‚æˆ‘ä»¬é¡¹ç›®æ˜¯ç¬¬ä¸€ç‰ˆï¼Œç›®æ ‡ä¹Ÿåªæ˜¯åœ¨å—èˆªä¸€æ‰€å­¦æ ¡å…ˆè¯•ç‚¹è¿è¥ï¼Œç”¨æˆ·é‡å¾ˆå°ï¼Œæ¯ä¸€ä¸ªè®¢å•çš„æŠ¢å•å¹¶å‘ è¯„ä¼°è¿‡ 1sä¸è¿‡è¶…è¿‡5äººã€‚æ‰€ä»¥ç›´æ¥ä½¿ç”¨æ•°æ®åº“é”æ–¹æ¡ˆã€‚æ‰€ä»¥æˆ‘ä»¬æµ‹è¯•äººå‘˜åªç»™ä¸šåŠ¡case,å®Œå…¨ä¸åšå‹åŠ›æµ‹è¯•ã€‚</li>
<li>åœ¨é‡çº§å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ•°æ®åº“çš„æ‚²è§‚é”æ¥å®ç°æŠ¢å•å”¯ä¸€å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜å’Œç³»ç»Ÿç“¶é¢ˆã€‚ä¼˜åŒ–æ–¹æ¡ˆï¼š<ol>
<li>é”ä¼˜åŒ–ï¼šå°½é‡ç¼©çŸ­æ‚²è§‚é”çš„æŒæœ‰æ—¶é—´ï¼Œåªåœ¨å¿…è¦çš„æ“ä½œæ—¶ä½¿ç”¨é”ï¼Œç„¶åå°½å¿«é‡Šæ”¾é”ï¼Œå¯ä»¥ä½¿ç”¨äº‹åŠ¡ç®¡ç†æ¥ç¡®ä¿åœ¨åˆé€‚çš„æ—¶å€™é‡Šæ”¾é”ã€‚å°½é‡å‡å°‘é”çš„ç²’åº¦ï¼Œæ¯”å¦‚åªé’ˆå¯¹éœ€è¦ä¿æŠ¤çš„æ•°æ®è¿›è¡Œé”å®šï¼Œè€Œä¸æ˜¯æ•´ä¸ªè¡¨æˆ–æ•´ä¸ªæ•°æ®åº“ã€‚ä½¿ç”¨ä¹è§‚é”ã€‚</li>
<li>ä½¿ç”¨ç¼“å­˜ï¼šå¯¹äºé¢‘ç¹è¯»å–çš„æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¼“å­˜æ¥å‡è½»æ•°æ®åº“å‹åŠ›ï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚</li>
<li>å¼‚æ­¥å¤„ç†ï¼šå¯¹äºä¸€äº›éå®æ—¶æ€§è¦æ±‚è¾ƒä½çš„æ“ä½œï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¼‚æ­¥å¤„ç†æ–¹å¼ï¼Œå°†ä»»åŠ¡æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—æˆ–å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ä¸­å¤„ç†ï¼Œå‡å°‘å¯¹æ•°æ®åº“çš„ç›´æ¥è®¿é—®ã€‚</li>
<li>åˆ†å¸ƒå¼æ¶æ„ï¼šå¦‚æœç³»ç»Ÿè§„æ¨¡éå¸¸å¤§å¹¶ä¸”éœ€è¦å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼›1ã€å¾®æœåŠ¡æ¶æ„ï¼šå°†ç³»ç»Ÿæ‹†åˆ†å‡ºæŠ¢å•å¾®æœåŠ¡ï¼› 2ã€è´Ÿè½½å‡è¡¡ï¼šå°†è¯·æ±‚åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šå¤„ç†ï¼Œä»è€Œå‡è½»å•ä¸ªèŠ‚ç‚¹çš„å‹åŠ›ï¼›3ã€åˆ†å¸ƒå¼æ•°æ®åº“ï¼šåˆ†æ‹…æ•°æ®åº“çš„è¯»å†™å‹åŠ›ï¼Œæé«˜æ•°æ®åº“çš„å¤„ç†èƒ½åŠ›å’Œå®¹é‡ï¼›4ã€åˆ†å¸ƒå¼é”ï¼šç¡®ä¿åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼ŒåŒæ—¶åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæˆ–è€…è¯´ä¸€ä¸ªè¿›ç¨‹ï¼‰èƒ½å¤Ÿè·å–åˆ°é”ï¼Œä»è€Œä¿è¯å¯¹å…±äº«èµ„æºçš„æ“ä½œæ˜¯äº’æ–¥çš„ï¼Œé¿å…å‡ºç°æ•°æ®ä¸ä¸€è‡´æˆ–è€…å¹¶å‘å†²çªçš„æƒ…å†µã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>ä¸‰ã€è·‘è…¿åŒæ–¹çŠ¶æ€ä¸å®‰å…¨ä¿éšœ</p>
<ul>
<li>æ¨¡å—è¯´æ˜ï¼šæœ¬æ¨¡å—æ˜¯æŒ‡åœ¨è·‘è…¿äººæ¥å•åæ•´ä½“é€è´§æµç¨‹çš„çŠ¶æ€å˜åŒ–ï¼Œå³é’ˆå¯¹ä»»åŠ¡è¯¦æƒ…çŠ¶æ€çš„â€è¿›è¡Œä¸­â€ï¼Œè¿›ä¸€æ­¥æ‰©å±•ç»†åŒ–ã€‚åŒ…æ‹¬å‘å¸ƒäººå’Œæ¥å•äººåŒæ–¹ã€‚</li>
<li>å‘å¸ƒäººå’Œè·‘è…¿äººçš„çŠ¶æ€ï¼šå…¶ä¸­234å±äºä¸€ä¸ªé˜¶æ®µï¼Œ567å±äºä¸€ä¸ªé˜¶æ®µ<ol>
<li>ä»»åŠ¡å·²è¢«æ¥å•</li>
<li>ç‰©å“å·²è¢«å–åˆ°</li>
<li>ç‰©å“æœªæ­£å¸¸å–åˆ°(ç‰©å“æŸåã€æ²¡æœ‰è¯¥å•†å“ã€å–è´§äººæ•…æ„æ²¡å–)</li>
<li>ç‰©å“å·²æŸå(å–è´§å’Œè¿‡ç¨‹ä¸­ï¼Œç»“æŸ)</li>
<li>ç‰©å“å·²é€šçŸ¥é€è¾¾(è·‘è…¿äººçŠ¶æ€)</li>
<li>ç‰©å“ç¡®è®¤æ”¶åˆ°</li>
<li>ç‰©å“æœªç¡®è®¤æ”¶åˆ°</li>
<li>ç‰©å“ç¡®è®¤æœ‰é—®é¢˜(ç ´æŸç­‰)</li>
<li>ä»»åŠ¡æ­£å¸¸ç»“æŸ<br>  å¦å¤–ï¼Œæœ¬æ¨¡å—è¿›è¡Œæœ€åŸºæœ¬çš„æµç¨‹å®‰å…¨ä¿éšœï¼Œå³åœ¨é€è´§äººåœ¨å–è´§å’Œæ”¶è´§ç¯èŠ‚æ‹ç…§ç¡®è®¤;å‘å¸ƒäººåœ¨æ”¶è´§ç¯èŠ‚å½“é¢ç¡®è®¤(ååºåŠ å…¥å¯é€‰æ”¶è´§ç )ã€‚</li>
</ol>
</li>
<li>ç¡®ä¿è·‘è…¿äººåˆ°è¾¾å–è´§ä½ç½®ï¼Œæ‰èƒ½æ˜¾ç¤ºå–è´§ç ï¼Œé˜²æ­¢æ¯ä¸‰æ–¹æ¶æ„ç›—çªƒï¼Œé€šè¿‡â€æ‹ç…§ä¸Šä¼ â€ + â€œ5åˆ†é’Ÿä¹‹å†…ä¸Šä¼ å–è´§æ‹ç…§â€çš„åŒé‡éªŒè¯ (å®é™…ä¸Šï¼Œäº§å“è§’åº¦è¿˜æœ‰ä¸¤ä¸ªåæœŸæ›´å¯é çš„æ–¹æ¡ˆï¼Œ1æ˜¯æ‰€æœ‰åœ°ç‚¹æ¥å…¥åœ°å›¾ï¼Œä»¥ä½ç½®è·ç¦»ç¡®è®¤ 2æ˜¯å•†å®¶å¯å˜äºŒç»´ç )</li>
<li>äº®ç‚¹éš¾ç‚¹<ol>
<li>åœ¨ç”¨æˆ·è·‘å•æ—¶ï¼Œé€šè¿‡æ‹ç…§ä¸Šä¼ ï¼ˆè·å–å–è´§ç ï¼‰ + 5åˆ†é’Ÿä¹‹å†…ä¸Šä¼ å–è´§æ‹ç…§ çš„åŒé‡éªŒè¯ï¼Œä¿è¯å–è´§ç ä¸è¢«ç¬¬ä¸‰æ–¹è·å–ã€‚<br>  åŒæ—¶è¯¥æ–¹æ¡ˆé€ æˆå¤§é‡å›¾ç‰‡çš„ä¸Šä¼ ï¼Œä¸ºç¼“è§£æœåŠ¡å™¨å¸¦å®½å‹åŠ›ï¼Œä½¿ç”¨è…¾è®¯äº‘C0Sç›´ä¼ æ¥ä»£æ›¿ä¼ ç»Ÿçš„åç«¯ä¸Šä¼ çš„æµç¨‹</li>
<li>ç”¨æˆ·è·‘å•ä¼šåœ¨åŒæ–¹äº§ç”Ÿå°†è¿‘10ç§çŠ¶æ€ï¼Œä»¥é€å•äººçš„è§’åº¦è®¾è®¡çŠ¶æ€çš„åˆ†ç±»</li>
</ol>
</li>
</ul>
</li>
<li><p>è…¾è®¯äº‘COSçš„å‚æ•°æ˜¯æ€ä¹ˆé…ç½®çš„ï¼Ÿ<br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/practice/436/9067">https://cloud.tencent.com/document/practice/436/9067</a></p>
</li>
<li><p>å›¾ç‰‡ç›´ä¼ é‚£ä¸€å—å…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ<br>å°±æ˜¯åç«¯ï¼Œä½¿ç”¨çš„å®˜æ–¹SDKï¼Œé’ˆå¯¹å‰ç«¯æŒ‡å®šçš„cosæ–‡ä»¶å¤¹ å’ŒæŒ‡å®šçš„æ–‡ä»¶åï¼Œè¿›è¡Œä¸´æ—¶æƒé™ç­¾åçš„ç”Ÿæˆï¼Œ åŒæ—¶ä¹Ÿä¿è¯å…¶å®ƒäººå’Œæ–‡ä»¶æ²¡æœ‰æƒé™ç›´ä¼  ä¿è¯coså®‰å…¨æ€§ã€‚</p>
</li>
<li><p>å››ã€æŠ¼é‡‘å’Œé’±åŒ…äº‹åŠ¡æ¨¡å—</p>
<ul>
<li>æ¨¡å—è¯´æ˜ï¼šå› ä¸ºä¸šåŠ¡ä¸Šä¸é’±çš„æµæ°´å…³ç³»å¾ˆå¤§ï¼Œéœ€è¦å•ç‹¬åˆ†ç¦»æ˜¯é’±åŒ…æ¨¡å—ï¼Œå¯ä»¥æ˜¯è®°å½•æµæ°´ã€ä»¥åŠæŠ¼é‡‘å’Œæ”¶å…¥çš„æç°ã€å‘èµ·äººçš„é€€æ¬¾è®°å½•ç­‰</li>
<li>äº®ç‚¹éš¾ç‚¹<br>  1 æŠ¼é‡‘çš„é€€è¿˜å±äºåŸè·¯é€€å›ï¼Œä¸»è¦æ¥å…¥å¯¹åº”æ”¯ä»˜æ¸ é“çš„é€€æ¬¾æ¥å£ï¼Œä½†æ˜¯æ ¸å¿ƒæ˜¯é€€æ¬¾æµç¨‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€æ˜¯é€€æ¬¾æˆåŠŸï¼ŒäºŒæ˜¯æŠ¼é‡‘æµæ°´å˜æ›´ï¼Œä¸¤ä¸ªé˜¶æ®µå­˜åœ¨åŸå­æ€§ï¼Œå› ä¸ºè¿™éƒ¨åˆ†ä¸šåŠ¡ï¼Œå±äºè¾ƒä½é¢‘å‹ä¸šåŠ¡ï¼Œæ‰€ä»¥ä½¿ç”¨äº‹åŠ¡æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯è¡¥å¿æ–¹æ¡ˆã€‚<br>  2 æç°éœ€è¦ä½¿ç”¨å¦å¤–çš„æ”¯ä»˜å®å…¬å¯¹ç§æ‰“æ¬¾æ¥å£ï¼Œåœ¨æ”¶å–10%çš„å¹³å°è´¹ç”¨å(ä¸åšä¸ªç¨æ‰£é™¤)ï¼Œè¿›è¡Œæ‰¹é‡æ‰“æ¬¾ã€‚æ‰“æ¬¾ä¸åšå¼ºå¯é æ€§ï¼Œç”¨æˆ·å¯¹æç°å’Œé€€æ¬¾ ä¸åƒæ”¯ä»˜è¦æ±‚é‚£ä¹ˆé«˜</li>
</ul>
</li>
<li><p>ï¼Ÿï¼Ÿï¼ŸæŠ¼é‡‘é€€æ¬¾çš„äº‹åŠ¡ï¼Ÿ </p>
<ul>
<li>æŠ¼é‡‘çš„åŸè·¯é€€å›å¯èƒ½ä¼šç ´åé€€æ¬¾æµæ°´å’ŒæŠ¼é‡‘æµæ°´çš„åŸå­æ€§ï¼Œä¸¤ä¸ªæ­¥éª¤å¿…é¡»ä¸€èµ·è¿›è¡Œï¼Œå±äºæœ€å¸¸è§çš„äº‹åŠ¡åœºæ™¯ 1 é€€æ¬¾æµæ°´çŠ¶æ€å˜æˆâ€œå·²é€€æ¬¾â€ 2 æŠ¼é‡‘é€€æ¬¾æ¥å£è¿”å›æˆåŠŸ<br>  æ¥å£è‚¯å®šå¾—æœ‰è¿”å›å€¼  æ­£å¸¸é€»è¾‘ä¸è¦æ€»æƒ³ç€åŠ å¼‚å¸¸ å°±ç®—æœ‰å¯èƒ½å‡ºç°å¼‚å¸¸ åœ¨serviceæ–¹æ³•çº§åˆ« ä¸€èˆ¬éƒ½æ˜¯å†…éƒ¨å¤„ç† ä¸æŠ›å‡ºï¼Ÿï¼Ÿ<br>  èƒ½ä¸èƒ½ç†è§£ä¸ºé€€æ¬¾æ˜¯è°ƒæ¥å£å®ç°ï¼ŒæŠ¼é‡‘æµæ°´æ˜¯æ•°æ®åº“æ“ä½œï¼Ÿï¼Ÿï¼Ÿäº‹åŠ¡é€»è¾‘å¦‚ä¸‹ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RefundService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CrudService crudService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = &#123;RefundException.class, CrudException.class&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refundAndChangeFlow</span><span class="params">()</span> <span class="keyword">throws</span> RefundException, CrudException &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            crudService.changeFlow(); <span class="comment">// ï¼ï¼å…ˆè°ƒç”¨æµæ°´å˜æ›´çš„ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">            é€€æ¬¾(); <span class="comment">// è¿™é‡Œæ˜¯é€€æ¬¾çš„ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µå®ç°</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (RefundException e) &#123;</span><br><span class="line">            é€€æ¬¾æ’¤é”€();</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (CrudException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å‡çº§æˆåˆ†å¸ƒå¼ã€ã€</p>
<ul>
<li>å®ç°ï¼šæŠŠå•ä½“æ¶æ„ä¸­çš„serviceè°ƒç”¨å˜æˆäº†å¾®æœåŠ¡çš„rpcè°ƒç”¨ï¼Œä»£ç å±‚é¢åŒºåˆ«ä¸å¤§</li>
<li>éš¾ç‚¹ï¼šå°±æ˜¯è¦è§£å†³ç½‘ç»œçš„ä¸å¯é æ€§ã€‚åˆ†å¸ƒå¼æ¶æ„æ— éå°±æ˜¯æŠŠè¿›ç¨‹å†…è°ƒç”¨å˜æˆè¿›ç¨‹é—´è°ƒç”¨ï¼Œè·¨ç½‘ç»œã€è·¨èŠ‚ç‚¹çš„ç½‘ç»œè°ƒç”¨åœ¨æ—¶é—´è¶³å¤Ÿé•¿ã€æµé‡è¶³å¤Ÿå¤§çš„æƒ…å†µä¸‹ï¼Œå°±è¦è€ƒè™‘ç½‘ç»œè¶…æ—¶çš„é—®é¢˜ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œé¿å…æ•´ä¸ªç³»ç»Ÿè¢«æ‹–æŒ‚ã€‚<ul>
<li>è¯»è¯·æ±‚ï¼Œè¶…æ—¶é‡è¯•</li>
<li>å†™è¯·æ±‚ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡</li>
</ul>
</li>
<li>å…¶ä»–æŒ‘æˆ˜ï¼šæœåŠ¡æ²»ç†ï¼ˆæœåŠ¡å‘ç°ï¼ŒæœåŠ¡é›†ç¾¤ï¼Œè´Ÿè½½å‡è¡¡ï¼Œä¼˜é›…å¯åœï¼Œç†”æ–­é™çº§ï¼‰ï¼Œ<strong>æ•°æ®ä¸€è‡´æ€§é—®é¢˜</strong>ï¼ˆå¯¹äºå¼€å‘æ›´é‡è¦ï¼‰</li>
</ul>
</li>
<li><p>æ•°æ®ä¸€è‡´æ€§</p>
<ul>
<li>ç¼“å­˜ä¸æ•°æ®åº“ï¼šå¼‚æ­¥åŒ–</li>
<li>åˆ†å¸ƒå¼äº‹åŠ¡</li>
</ul>
</li>
</ul>
<h2 id="é¡¹ç›®2ï¼ˆé»‘é©¬å•†åŸ-ç‰›å®¢è®ºå›ï¼‰"><a href="#é¡¹ç›®2ï¼ˆé»‘é©¬å•†åŸ-ç‰›å®¢è®ºå›ï¼‰" class="headerlink" title="é¡¹ç›®2ï¼ˆé»‘é©¬å•†åŸ+ç‰›å®¢è®ºå›ï¼‰"></a>é¡¹ç›®2ï¼ˆé»‘é©¬å•†åŸ+ç‰›å®¢è®ºå›ï¼‰</h2><ul>
<li><p><strong>é«˜æ ¡é—²ç½®èµ„æºäº¤æ˜“ç³»ç»Ÿ</strong></p>
<ul>
<li>ç³»ç»Ÿæ¶æ„ï¼šSpringCloud + SpringBoot + Nacos + Redis + MySQL</li>
<li>é¡¹ç›®æè¿°ï¼šç³»ç»Ÿé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæ—¨åœ¨ä¸ºæ¶ˆè´¹è€…æä¾›ä¸€ç«™å¼å•†å“äº¤æ˜“å¹³å°ã€‚é€šè¿‡ç»†è‡´çš„ä¸šåŠ¡åˆ’åˆ†ï¼Œç³»ç»Ÿåˆ†ä¸ºç”¨æˆ·æ¨¡å—ã€å•†å“æ¨¡å—ã€è´­ç‰©è½¦æ¨¡å—ä¸æ”¯ä»˜æ¨¡å—ï¼Œç¡®ä¿æ¯ä¸ªæ¨¡å—æœåŠ¡çš„é«˜æ•ˆã€å¯ç»´æŠ¤ã€å¯æ‰©å±•ã€‚</li>
<li>ä¸»è¦å·¥ä½œï¼š<ul>
<li>ä½¿ç”¨ Nacos å®ç°æœåŠ¡æ³¨å†Œï¼Œæ¶ˆè´¹è€…æœåŠ¡é€šè¿‡ Nacos æ‹‰å–å’Œè®¢é˜…æœåŠ¡ã€‚</li>
<li>å¼•å…¥ Redis æ•°æ®åº“ï¼Œä¼˜åŒ–é¡¹ç›®ä¸­ç™»å½•éªŒè¯ç çš„ä½¿ç”¨ï¼Œå¯¹éœ€è¦é¢‘ç¹è®¿é—®çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚</li>
<li>ä½¿ç”¨ Gateway åŠæ‹¦æˆªå™¨å®ç°äº†ç™»å½•ä¿¡æ¯æ ¡éªŒï¼Œé¿å…å„å¾®æœåŠ¡ä¸­çš„ä»£ç é‡å¤ã€‚</li>
<li>é€šè¿‡ Sentinel å®Œæˆç³»ç»Ÿé™æµç†”æ–­åŠŸèƒ½ï¼Œé˜²æ­¢æœåŠ¡æ•…éšœåå½±å“æ•´ä¸ªç³»ç»Ÿè¿è¡Œã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>å•ä½“æ¶æ„æ”¹ä¸ºå¾®æœåŠ¡æ¶æ„ï¼ˆåˆ†å¸ƒå¼æ¶æ„çš„ä¸€ç§å®ç°ï¼‰<br>å¾®æœåŠ¡æ¶æ„ï¼Œæ˜¯æœåŠ¡åŒ–æ€æƒ³æŒ‡å¯¼ä¸‹çš„ä¸€å¥—æœ€ä½³å®è·µæ¶æ„æ–¹æ¡ˆã€‚æœåŠ¡åŒ–ï¼Œå°±æ˜¯æŠŠå•ä½“æ¶æ„ä¸­çš„åŠŸèƒ½æ¨¡å—æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹é¡¹ç›®ã€‚<br>ä¼˜ç‚¹ï¼šç²’åº¦ä½ã€å›¢é˜Ÿè‡ªæ²»ã€æœåŠ¡è‡ªæ²»</p>
</li>
<li><p>ç™»å½•çš„æµç¨‹ï¼Œç™»å½•çŠ¶æ€çš„æ£€éªŒï¼Ÿï¼Ÿ<br>æäº¤ç™»å½•è¡¨å•ï¼Œç™»å½•è¯·æ±‚ controller â€”&gt; sevice â€”&gt; Daoï¼ŒæŸ¥è¯¢ã€æ ¡éªŒç”¨æˆ·ä¿¡æ¯ï¼Œç”Ÿæˆjwtï¼ˆç”¨jwtToolç”Ÿæˆtokenï¼‰ï¼Œè¿”å›ç™»å½•ä¿¡æ¯å’Œjwtï¼ˆæˆ–ç™»å½•å¤±è´¥ä¿¡æ¯ï¼‰ï¼Œæç¤ºç™»å½•æˆåŠŸï¼ˆå¤±è´¥ï¼‰ã€‚ç™»å½•æˆåŠŸåï¼Œç”¨æˆ·åœ¨å‘é€è¯·æ±‚æ—¶ï¼ˆå¦‚è´­ç‰©è½¦ï¼‰ï¼Œåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ Authorizationï¼ˆå³jwtï¼‰</p>
</li>
<li><p>ç”¨æˆ·ç™»å½•ã€‚ã€‚redisæ€ä¹ˆç”¨çš„ï¼Ÿ</p>
<ol>
<li>ï¼Ÿï¼Ÿï¼ŸRedis ç»“åˆ Gateway å®Œæˆç™»å½•æ ¡éªŒï¼ˆç›´æ¥æ‹¦æˆªåè°ƒç”¨ jwtTool éªŒè¯ä¸å°±è¡Œäº†ï¼‰</li>
<li>ä½¿ç”¨Redisç¼“å­˜ç”¨æˆ·ä¿¡æ¯ï¼šå°†userç¼“å­˜åˆ°Redisä¸­ï¼Œè·å–useræ—¶ï¼Œå…ˆä»Redisè·å–ã€‚å–ä¸åˆ°æ—¶ï¼Œåˆ™ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œå†ç¼“å­˜åˆ°Redisä¸­ã€‚å› ä¸ºå¾ˆå¤šç•Œé¢éƒ½è¦ç”¨åˆ°userä¿¡æ¯ï¼Œå¹¶å‘æ—¶ï¼Œé¢‘ç¹çš„è®¿é—®æ•°æ®åº“ï¼Œä¼šå¯¼è‡´æ•°æ®åº“å´©æºƒã€‚å˜æ›´æ•°æ®åº“æ—¶ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ¸…ç©ºç¼“å­˜ï¼›</li>
<li>ï¼Ÿï¼Ÿï¼Ÿä½¿ç”¨Redisç¼“å­˜éªŒè¯ç ï¼šåŸæœ¬æ·»åŠ åˆ°sessionä¸­ï¼Œå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚å°†éªŒè¯ç å­˜åˆ°Redisä¸­ï¼Œæ–¹ä¾¿æŸ¥è¯¢æ£€éªŒï¼›<br>  å½“â½¤æˆ·ç‚¹å‡»åˆ·æ–°éªŒè¯ç æ—¶ï¼ŒæœåŠ¡ç«¯â¾¸å…ˆç»™å½“å‰éœ€è¦ç™»é™†çš„æ¸¸å®¢ï¼Œè®¾ç½®â¼€ä¸ªéšæœºå­—ç¬¦ä¸²(kaptchaOwner)ï¼Œâ½¤äºæ ‡è¯†å½“å‰è¿™ä¸ªæ¸¸å®¢ï¼Œç„¶åå°†éšæœºå­—ç¬¦ä¸²å­˜â¼Šåˆ°cookieä¸­ï¼Œè¿”å›ç»™æµè§ˆå™¨ï¼Œç„¶åæœåŠ¡ç«¯çš„redisä¿å­˜ â€œkey:éšæœºå­—ç¬¦ä¸²,value:éªŒè¯ç â€ã€‚æ¥ç€â½¤æˆ·è¾“â¼Šâ½¤æˆ·åï¼Œå¯†ç ï¼ŒéªŒè¯ç ï¼Œå†æ¬¡ç‚¹å‡»ç™»é™†æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šä»cookieä¸­æ‹¿åˆ°kaptchaOwner,é€šè¿‡å®ƒï¼Œå¯ä»¥ä»Redisä¸­å¾—åˆ°æ­£ç¡®çš„éªŒè¯ç ï¼Œç„¶åä¸â½¤æˆ·è¾“â¼Šçš„éªŒè¯ç åšâ½è¾ƒï¼Œçœ‹æ˜¯å¦â¼€è‡´ã€‚<br>  éªŒè¯ç éœ€è¦é¢‘ç¹çš„è®¿é—®ä¸åˆ·æ–°ï¼Œå¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼›éªŒè¯ç ä¸éœ€è¦æ°¸ä¹…å­˜å‚¨ï¼Œé€šå¸¸åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å°±ä¼šå¤±æ•ˆï¼›åˆ†å¸ƒå¼éƒ¨ç½²æ—¶ï¼Œå­˜åœ¨sessionå…±äº«é—®é¢˜ï¼›</li>
</ol>
</li>
<li><p>Nacos æœåŠ¡å‘ç°</p>
<ul>
<li>æ¶ˆè´¹è€…éœ€è¦è¿æ¥nacosä»¥æ‹‰å–å’Œè®¢é˜…æœåŠ¡ï¼Œå› æ­¤æœåŠ¡å‘ç°çš„å‰ä¸¤æ­¥ä¸æœåŠ¡æ³¨å†Œæ˜¯ä¸€æ ·ï¼ˆå¼•å…¥nacos-discoveryä¾èµ–å’Œé…ç½®nacosåœ°å€ï¼‰ï¼Œåé¢å†åŠ ä¸ŠæœåŠ¡è°ƒç”¨å³å¯  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> DiscoveryClient discoveryclient;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">handlecartItems</span><span class="params">(List&lt;CartVO&gt; vos)</span> &#123;</span><br><span class="line"><span class="comment">// æ ¹æ®æœåŠ¡åç§°æ‹‰å–å®ä¾‹åˆ—è¡¨ï¼Œè´Ÿè—å‡è¡¡æŒ‘é€‰ä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">List&lt;ServiceInstance&gt; instances = discoveryclient.getInstances(<span class="string">&quot;item-service&quot;</span>);</span><br><span class="line"><span class="type">ServiceInstance</span> <span class="variable">instance</span> <span class="operator">=</span> instances.get(RandomUtil.randomInt(instances.size()));</span><br><span class="line"><span class="comment">// è·å–å®ä¾‹çš„TPå’Œç«¯å£</span></span><br><span class="line">URI uri= instance.getUri();</span><br><span class="line"><span class="comment">// ...å‘é€è¯·æ±‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Nacos é…ç½®ç®¡ç†ã€‚<br>å½“å¾®æœåŠ¡éƒ¨ç½²çš„å®ä¾‹è¶Šæ¥è¶Šå¤šï¼Œä¸šåŠ¡é…ç½®å¦‚ JDBCã€æ—¥å¿—ã€openfeign æ—¶å¸¸å˜åŠ¨ï¼Œé€ä¸ªä¿®æ”¹å¾®æœåŠ¡é…ç½®å°±ä¼šè®©äººæŠ“ç‹‚ã€‚<br>Nacoså®ç°é…ç½®å…±äº«ï¼Œé…ç½®çƒ­æ›´æ–°ï¼ŒåŠ¨æ€è·¯ç”±<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/list/watchlater?oid=961238101&bvid=BV1kH4y1S7wz&spm_id_from=333.1007.top_right_bar_window_view_later.content.click&p=34">https://www.bilibili.com/list/watchlater?oid=961238101&amp;bvid=BV1kH4y1S7wz&amp;spm_id_from=333.1007.top_right_bar_window_view_later.content.click&amp;p=34</a></p>
</li>
<li><p>OpenFeign </p>
<ul>
<li>ï¼Ÿï¼Ÿ</li>
<li>æœ€ä½³å®è·µ</li>
</ul>
</li>
<li><p>ç½‘å…³ Gateway</p>
<ul>
<li>application.yml é…ç½®ï¼›  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">routes:</span> <span class="comment"># ç½‘å…³è·¯ç”±é…ç½®</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span>    <span class="comment"># 1. è·¯ç”±idï¼Œè‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯</span></span><br><span class="line">        <span class="comment"># uri: http://127.0.. # 2. è·¯ç”±çš„ç›®æ ‡åœ°å€ http å°±æ˜¯å›ºå®šåœ°å€</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> <span class="comment">#    lb(loadbalance) å°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢è·ŸæœåŠ¡åç§°</span></span><br><span class="line">        <span class="attr">predicates:</span>           <span class="comment"># 3. è·¯ç”±æ–­è¨€(å¯å¤šæ¡)ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span>   <span class="comment">#    æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚</span></span><br><span class="line">        <span class="attr">filters:</span>              <span class="comment"># 4. è·¯ç”±è¿‡æ»¤å™¨ï¼Œï¼Œ</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">order-service</span>   <span class="comment"># ...</span></span><br><span class="line">        <span class="comment"># ...                        </span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>ç½‘å…³ç™»å½•æ ¡éªŒã€‚</p>
<ul>
<li>åŸºäºjwtå®ç°ç™»å½•æ ¡éªŒ<ul>
<li>hmall.jksï¼šå¯†é’¥æ–‡ä»¶ï¼ŒåŠ å¯†å­˜å‚¨</li>
<li>application.ymlï¼šé…ç½®æ–‡ä»¶ï¼Œé…ç½®å¯†é’¥æ–‡ä»¶ç›®å½•ã€åˆ«åã€è§£æå¯†é’¥æ–‡ä»¶çš„å¯†ç ã€ã€excludePathï¼ˆä¸ç”¨ç™»å½•æ ¡éªŒçš„è·¯å¾„ï¼‰</li>
<li>JwtPropertitiesï¼šåŠ è½½ jw tå±æ€§é…ç½®çš„ç±»</li>
<li>AuthPropertitiesï¼šåŠ è½½ excludePath å±æ€§é…ç½®çš„ç±»</li>
<li>SecurityConfigï¼šåŠ è½½jwté…ç½®åï¼ŒçœŸæ­£è¯»å–æ–‡ä»¶ç”Ÿæˆå¯†é’¥çš„ç±»ï¼Œç±»æœ¬èº«å£°æ˜ä¸ºä¸€ä¸ª @Beanï¼›è¿‡ç¨‹ä¸ºæ³¨å…¥é…ç½®ï¼Œè·å–å¯†é’¥å·¥å‚ï¼Œè¯»å–å¯†é’¥å¯¹</li>
<li>JwtToolï¼šjwtå·¥å…·ç±»ï¼Œæ¥æ”¶ç”¨æˆ·idä¸æ—¶é—´ç”Ÿæˆjwtå¯†é’¥ã€è§£ætoken</li>
</ul>
</li>
<li>å„æ¨¡å—æ ¡éªŒï¼šç™»å½•åœ¨useræ¨¡å—ï¼ŒéªŒè¯æˆåŠŸåå¾—åˆ°tokenï¼Œåç»­ä½¿ç”¨æ¯ä¸ªå¾®æœåŠ¡ï¼ˆè´­ç‰©è½¦ã€ä¸‹å•ï¼Œï¼Œï¼‰æ—¶ï¼Œå¦‚æœéƒ½è¦éƒ½è¦è¿›è¡Œæ£€éªŒï¼Œä¼šé€ æˆé‡å¤ä»£ç ä»¥åŠé‡å¤å‘é€jwtç§˜é’¥é€ æˆæ³„éœ²é£é™©ï¼Œï¼Œæ‰€ä»¥ï¼Œåœ¨ç½‘å…³ä¸­ï¼Œè½¬å‘è¯·æ±‚ç»™å¾®æœåŠ¡ä¹‹å‰ï¼Œè¿›è¡Œjwtç™»å½•æ ¡éªŒ  <img src="https://leo710aka.github.io/bk/job10.png" width="550" height="300" alt=""></li>
</ul>
</li>
</ul>
<ol>
<li><p>å¦‚ä½•ç™»å½•æ ¡éªŒï¼Ÿ<br> å…·ä½“æ¥è¯´ï¼Œè¦å®šä¹‰ä¸€ä¸ªï¼ˆè‡ªå®šä¹‰ï¼‰è¿‡æ»¤å™¨ï¼Œæ”¾åœ¨preé˜¶æ®µï¼›åœ¨è¿‡æ»¤å™¨ä¸­å®ç°æ ¡éªŒä¸šåŠ¡é€»è¾‘ï¼Œæ ¡éªŒé€šè¿‡åæ‰ä¼šå‘ä¸‹æ‰§è¡Œï¼ˆä¸‹é¢çš„è¿‡æ»¤å™¨ï¼‰ï¼Œæœ€åç”± Netty è·¯ç”±è¿‡æ»¤å™¨è½¬å‘ç»™å¾®æœåŠ¡</p>
 <img src="https://leo710aka.github.io/bk/job11.png" width="650" height="300" alt="">
 å…¨å±€è¿‡æ»¤å™¨çš„ä½œç”¨ä¹Ÿæ˜¯å¤„ç†ä¸€åˆ‡è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡å“åº”ï¼Œä¸è·¯ç”±è¿‡æ»¤å™¨GatewayFilterçš„ä½œç”¨ä¸€æ ·ã€‚
 åŒºåˆ«åœ¨äºGatewayFilteré€šè¿‡é…ç½®å®šä¹‰ï¼Œå¯ä»¥è‡ªç”±çš„æŒ‡å®šä½œç”¨çš„èŒƒå›´ï¼Œé…ç½®è‡ªå®šä¹‰å‚æ•°ï¼Œä½¿ç”¨çµæ´»ï¼Œä½†å¤„ç†é€»è¾‘æ˜¯å›ºå®šçš„ï¼Œéš¾ä»¥è‡ªå®šä¹‰GatewayFilterï¼›
 è€ŒGlobalFilterå¯ä»¥è‡ªå·±å†™ä»£ç å®ç°ï¼Œå®ç°éœ€è¦çš„ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦è‡ªå®šä¹‰è¿‡æ»¤å™¨æ—¶å¤§å¤šä¼šé€‰æ‹© GlobalFilterã€‚<img src="https://leo710aka.github.io/bk/job12.png" width="550" height="300" alt="">
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthGlobalFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span>, Ordered &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ  @RequiredArgsConstructor åè‡ªåŠ¨ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ä¸‹é¢æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AuthProperties authProperties;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> JwtTool jwtTool;</span><br><span class="line"></span><br><span class="line">    @0verride</span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.è·å–è¯·æ±‚</span></span><br><span class="line">        <span class="type">ServerHttpRequest</span> <span class="variable">request</span> <span class="operator">=</span> exchange.getRequest();</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦éœ€è¦åšç™»å½•æ‹¦æˆªï¼ˆä½¿ç”¨ AntPathMatcher åŒ¹é… authProperties ä¸­çš„è·¯å¾„ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span>(isExclude(request.getPath().tostring()))&#123;</span><br><span class="line">            <span class="comment">// æ”¾è¡Œï¼ˆå¦‚ /user/loginï¼‰</span></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.è·å–token</span></span><br><span class="line">        <span class="type">string</span> <span class="variable">token</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        List&lt;string&gt; headers = request.getHeaders().get(<span class="string">&quot;authorization&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(headers != <span class="literal">null</span> &amp;&amp; !headers.isEmpty())&#123;</span><br><span class="line">            token= headers.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.æ ¡éªŒå¹¶è§£æ–°token</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            userId = jwtTool.parseToken(token);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(UnauthorizedException e) &#123;</span><br><span class="line">            <span class="comment">// æ‹¦è£ï¼Œè®¾ç½®å“åº”çŠ¶æ€ç ä¸º401ï¼ˆåªæ˜¯æŠ›å¼‚å¸¸çš„è¯å“åº”500ï¼Œçœ‹ä¸å‡ºå…·ä½“é”™è¯¯ï¼‰</span></span><br><span class="line">            <span class="type">ServerHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> exchange.getResponse();</span><br><span class="line">            response.setstatusCode(Httpstatus.UNAUTHORIZED);</span><br><span class="line">            <span class="keyword">return</span> response.setcomplete(); <span class="comment">// ç»“æŸ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// TODO 5.ä¼ é€’ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 6.æ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isExclude</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @0verride</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è¿‡æ»¤å™¨æ‰§è¡Œé¢†åºï¼Œä¿¡è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 </li>
<li><p>å¦‚ä½•å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡ï¼Ÿ<br> å¯¹äºå•ä½“æ¶æ„ç³»ç»Ÿï¼Œæ‰€æœ‰åŠŸèƒ½åœ¨éƒ¨ç½²åœ¨ä¸€ä¸ªtomcatä¸Šï¼Œä¸€ä¸ªtomcatå†…éƒ¨ä¸åŒçº¿ç¨‹ä¹‹é—´å…±äº«ThreadLocalï¼›å¯¹äºå¾®æœåŠ¡æ¶æ„ï¼Œç½‘å…³æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œå’Œå…¶ä»–å¾®æœåŠ¡è¦é€šè¿‡ HTTPè¯·æ±‚ä¼ é€’ä¿¡æ¯ï¼ŒæŠŠç”¨æˆ·ä¿¡æ¯æ”¾åœ¨è¯·æ±‚å¤´ä¸­ä¸ä¼šå¯¹ä¸šåŠ¡é€ æˆå½±å“ï¼Œåç»­ä»è¯·æ±‚å¤´ä¸­å–å‡ºç”¨æˆ·ä¿¡æ¯ã€ã€<br> ä¿®æ”¹gatewayæ¨¡å—ä¸­çš„ç™»å½•æ ¡éªŒæ‹¦æˆªå™¨ï¼Œåœ¨æ ¡éªŒæˆåŠŸåä¿å­˜ç”¨æˆ·åˆ°ä¸‹æ¸¸è¯·æ±‚çš„è¯·æ±‚å¤´ä¸­ï¼Œä½¿ç”¨ServerWebExchangeç±»æä¾›çš„APIï¼š</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 5.ä¼ é€’ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="type">String</span> <span class="variable">userInfo</span> <span class="operator">=</span> userId.tostring();</span><br><span class="line"><span class="type">ServerWebExchange</span> <span class="variable">swe</span> <span class="operator">=</span> exchange.mutate().</span><br><span class="line">    request(builder -&gt; builder.header(<span class="string">&quot;user-info&quot;</span>, userInfo))</span><br><span class="line">    .build();</span><br><span class="line"><span class="comment">// 6.æ”¾è¡Œä¿®æ”¹åçš„è¯·æ±‚å¤´(åˆ°ä¸‹é¢è¿‡æ»¤å™¨é“¾)</span></span><br><span class="line"><span class="keyword">return</span> chain.filter(swe);</span><br></pre></td></tr></table></figure>
<p> åœ¨åç»­çš„å¾®æœåŠ¡ä¸­ï¼Œé€šè¿‡æ‹¦æˆªå™¨ï¼Œä»è¯·æ±‚å¤´ä¸­è·å–ç™»å½•å‡­è¯ï¼Œè¿›è¡Œç™»å½•æ ¡éªŒï¼Œå¹¶ä¿å­˜åœ¨ ThreadLocalï¼›<br> ç”±äºæ¯ä¸ªå¾®æœåŠ¡éƒ½å¯èƒ½æœ‰è·å–ç™»å½•ç”¨æˆ·çš„éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥åœ¨hm-commonæ¨¡å—å®šä¹‰æ‹¦æˆªå™¨ï¼Œè¿™æ ·å¾®æœåŠ¡åªéœ€è¦å¼•å…¥ä¾èµ–å³å¯ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¤ç¼–å†™ã€‚</p>
 <img src="https://leo710aka.github.io/bk/job13.png" width="550" height="300" alt="">
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ springmvc æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfoInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpservletRequest request, HttpservletResponse response, obiect handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1.è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userInfo</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;user-info&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦è·å–äº†ç”¨æˆ·ï¼Œå¦‚æœæœ‰ï¼Œå­˜å…¥ThreadLocal</span></span><br><span class="line">        <span class="keyword">if</span>(Strutil.isNotBlank(userInfo)) &#123;</span><br><span class="line">            UserContext.setUser(Long.ValueOf(userInfo));   </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.æ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpservletRequest request, HttpservletResponse response, 0bject handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// æ¸…ç†ç”¨æˆ·</span></span><br><span class="line">        UserContext.removeUser();</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¼–å†™ springmvc é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// é˜²æ­¢ç½‘å…³å¾®æœåŠ¡åŠ è½½æ­¤é…ç½®</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(DispatcherServlet.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    @0verride</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123; </span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">UserInfoInterceptor</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 æœ€åï¼Œä¿®æ”¹æ¯ä¸ªå¾®æœåŠ¡çš„é…ç½®æ‰«ææ–‡ä»¶ï¼Œä½¿å…¶èƒ½å¤Ÿæ‰«æåˆ° hm-commonæ¨¡å—ä¸­å®šä¹‰çš„ UserInfoInterceptor æ‹¦æˆªå™¨ï¼›
 æ³¨æ„ï¼šç½‘å…³å¾®æœåŠ¡ä¸èƒ½å¼•ç”¨ hm-commonæ¨¡å—ä¸­çš„ æ‹¦æˆªå™¨ï¼Œå› ä¸ºç½‘å…³çš„åº•å±‚ä¸æ˜¯ SpringMVC å®ç°çš„ï¼Œæ— æ³•åŠ è½½SpringMVCæ‹¦æˆªå™¨çš„åŠŸèƒ½ï¼Œä¼šæŠ¥é”™ï¼›    
 </li>
<li><p>å¦‚ä½•åœ¨å¾®æœåŠ¡é—´ä¼ é€’ä¿¡æ¯ï¼Ÿ<br> å¾®æœåŠ¡é¡¹ç›®ä¸­çš„å¾ˆå¤šä¸šåŠ¡è¦å¤šä¸ªå¾®æœåŠ¡å…±åŒåˆä½œå®Œæˆï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿéœ€è¦ä¼ é€’ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼›<br> æ–¹æ³•åŒæ ·æ˜¯æŠŠç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°è¯·æ±‚å¤´ï¼Œå‘é€ Httpè¯·æ±‚ã€‚ä¸åŒçš„æ˜¯å¾®æœåŠ¡ä¹‹é—´å‘é€è¯·æ±‚é€šè¿‡ Openfeignï¼Œè€Œç½‘å…³å‘é€è¯·æ±‚æ˜¯é€šè¿‡å…¶å†…éƒ¨çš„ http è¯·æ±‚æ–¹å¼ï¼ˆnettyè¿‡æ»¤å™¨è·¯ç”±åˆ†å‘ï¼‰ï¼Œï¼Œ</p>
 <img src="https://leo710aka.github.io/bk/job14.png" width="650" height="300" alt=""></li>
</ol>
<ul>
<li><p>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼Œï¼Œ<br>ï¼Ÿï¼Ÿ<br>ç›®çš„ï¼šè®©æœªç™»å½•ç”¨æˆ·ä¸èƒ½è®¿é—®æŸäº›é¡µé¢<br>åŸç†ï¼šåœ¨æ–¹æ³•å‰æ ‡æ³¨è‡ªå®šä¹‰æ³¨è§£ï¼Œæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œåªå¤„ç†å¸¦æœ‰è¯¥æ³¨è§£çš„æ–¹æ³•ã€‚<br>æ‹¦æˆªå™¨ï¼š1.è‡ªå®šä¹‰æ‹¦æˆªå™¨ 2.é…ç½®æ‹¦æˆªå™¨<br>é¦–å…ˆéªŒè¯ç”¨æˆ·ï¼ˆpreHandleæ–¹æ³•ï¼‰ï¼Œå¦‚æœç”¨æˆ·å­˜åœ¨ï¼Œåˆ™åœ¨æœ¬æ¬¡è¯·æ±‚ä¸­æŒæœ‰ç”¨æˆ·ï¼Œæ”¾è¿›hostHolderé‡Œ<br>ç»è¿‡controlleråï¼Œè¿”å›åˆ°æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªå™¨å†å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥modelã€‚<br>è‡ªå®šä¹‰æ‹¦æˆªå™¨éœ€è¦å®ç°HandlerInterceptorï¼Œç„¶åé‡å†™preHandleï¼ˆcontrollerå‰æ‰§è¡Œï¼‰,postHandleï¼ˆcontrolleråæ‰§è¡Œï¼‰,ä»¥åŠafterCompletionï¼ˆæ¨¡æ¿è§£æåæ‰§è¡Œï¼‰<br>é…ç½®æ‹¦æˆªå™¨ï¼šéœ€è¦å®ç°WebMvcConfigureræ¥å£ï¼Œç„¶åé‡å†™addInterceptorsæ–¹æ³•ï¼Œæ’é™¤æ‹¦æˆªé™æ€é¡µé¢ã€‚</p>
</li>
<li><p>ThreadLocalï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰<br>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒThreadLocal  setèµ‹å€¼çš„æ—¶å€™é¦–å…ˆä¼šè·å–å½“å‰çº¿ç¨‹thread,å¹¶è·å–threadçº¿ç¨‹ä¸­çš„ThreadLocalMapå±æ€§ã€‚å¦‚æœmapå±æ€§ä¸ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ›´æ–°valueå€¼ï¼Œå¦‚æœmapä¸ºç©ºï¼Œåˆ™å®ä¾‹åŒ–threadLocalMap,å¹¶å°†valueå€¼åˆå§‹åŒ–<br>ThreadLocalMapæ˜¯ThreadLocalçš„å†…éƒ¨é™æ€ç±»ï¼Œè€Œå®ƒçš„æ„æˆä¸»è¦æ˜¯ç”¨Entryæ¥ä¿å­˜æ•°æ® ï¼Œè€Œä¸”è¿˜æ˜¯ç»§æ‰¿çš„å¼±å¼•ç”¨ã€‚åœ¨Entryå†…éƒ¨ä½¿ç”¨ThreadLocalä½œä¸ºkeyï¼Œä½¿ç”¨æˆ‘ä»¬è®¾ç½®çš„valueä½œä¸ºvalueã€‚<br>é€šè¿‡å½“å‰çº¿ç¨‹å¯¹è±¡çš„getMap()æ–¹æ³•è·å–ThreadMapå¯¹è±¡ ç„¶åå°†å½“å‰ThreadLocalå¯¹è±¡ä½œä¸ºkeyå€¼å­˜å…¥map è¿™èƒ½ä¿è¯çº¿ç¨‹å†…çš„èµ„æºå…±äº«è€Œä¸åŒçº¿ç¨‹ä¹‹é—´ç‹¬ç«‹</p>
</li>
</ul>
<ul>
<li>Sentinel</li>
</ul>
<p>ï¼Œï¼Œ</p>
<h2 id="é¡¹ç›®ç³»ç»Ÿï¼ˆç‰›å®¢è®ºå›ï¼‰"><a href="#é¡¹ç›®ç³»ç»Ÿï¼ˆç‰›å®¢è®ºå›ï¼‰" class="headerlink" title="é¡¹ç›®ç³»ç»Ÿï¼ˆç‰›å®¢è®ºå›ï¼‰"></a>é¡¹ç›®ç³»ç»Ÿï¼ˆç‰›å®¢è®ºå›ï¼‰</h2><ul>
<li><strong>è®ºå›ç³»ç»Ÿé¡¹ç›®</strong>ï¼ˆé«˜æ ¡ä¿¡æ¯å¹³å°ã€‚ã€‚ã€‚ï¼‰<ul>
<li>é¡¹ç›®æè¿°ï¼šä¸€ä¸ªåŸºæœ¬åŠŸèƒ½å®Œæ•´çš„è®ºå›é¡¹ç›®ã€‚ä¸»è¦åŠŸèƒ½æœ‰ï¼šåŸºäºé‚®ä»¶æ¿€æ´»çš„æ³¨å†Œæ–¹å¼ï¼ŒåŒºåˆ«ç™»é™†çŠ¶æ€ä¸ºæ¸¸å®¢æˆ–å·²ç™»å½•ç”¨æˆ·å±•ç¤ºä¸åŒç•Œé¢ä¸åŠŸèƒ½ã€‚æ”¯æŒç”¨æˆ·ä¸Šä¼ å¤´åƒï¼Œå®ç°äº†å‘å¸ƒã€è¯„è®ºå¸–å­ï¼Œå‘é€ç§ä¿¡ç­‰åŠŸèƒ½ï¼Œä»¥åŠç‚¹èµï¼Œå…³æ³¨ä¸ç³»ç»Ÿé€šçŸ¥åŠŸèƒ½ã€‚<br>  é¡¹â½¬æ„å»ºåœ¨ Spring Boot + SSM æ¡†æ¶ä¹‹ä¸Šï¼Œå¹¶ç»Ÿâ¼€çš„è¿›â¾äº†çŠ¶æ€ç®¡ç†ã€äº‹åŠ¡ç®¡ç†ã€å¼‚å¸¸å¤„ç†ã€‚</li>
<li>æ ¸å¿ƒåŠŸèƒ½ä¸é¡¹ç›®ä¼˜åŒ–ï¼š<ul>
<li>ä½¿ç”¨ Spring Email è¾…åŠ©å‘é€æ³¨å†Œæ¿€æ´»é‚®ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨ Interceptor æ‹¦æˆªå™¨èµ‹äºˆä¸åŒç±»å‹çš„ç”¨æˆ·æƒé™ï¼Œè§£å†³ http æ— çŠ¶æ€å¸¦æ¥çš„ç¼ºé™·é—®é¢˜ï¼Œä¿æŠ¤éœ€ç™»å½•æ‰èƒ½æŸ¥çœ‹çš„èµ„æºã€‚</li>
<li>ä½¿ç”¨ Spring AOP é¢å‘åˆ‡é¢ç¼–ç¨‹æ€æƒ³ç»Ÿä¸€è®°å½•æ—¥å¿—ï¼›</li>
<li>å¼•å…¥ Redis æ•°æ®åº“ï¼Œä¼˜åŒ–é¡¹ç›®ä¸­ Session çš„ä½¿ç”¨å¹¶åˆ©ç”¨ Redis å®ç°ç‚¹èµå’Œå…³æ³¨åŠŸèƒ½ã€‚</li>
<li>ä½¿ç”¨ Kafka æ¶ˆæ¯é˜Ÿåˆ—æ„å»ºå¼‚æ­¥æ¶ˆæ¯ç³»ç»Ÿï¼Œå®ç°ç‚¹èµå…³æ³¨ä¸é€šçŸ¥é—´å‰Šå³°ã€‚</li>
<li>ä½¿ç”¨ Caffeine + Redis å®ç°ä¸¤çº§ç¼“å­˜ï¼Œä¼˜åŒ–äº†çƒ­é—¨å¸–å­çš„è®¿é—®ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="https://leo710aka.github.io/bk/job1.png" width="750" height="300" alt="">

<ul>
<li>ä»‹ç»é¡¹ç›®<ol>
<li>æ¢³ç†ç³»ç»Ÿçš„é¡¹ç›®èƒŒæ™¯ä»¥åŠæ•´ä¸ªç³»ç»Ÿæ¶æ„è®¾è®¡ä¸è¿è½¬æµç¨‹</li>
<li>æŠ€æœ¯ä¸Šçš„äº®ç‚¹:â€æˆ‘åœ¨å¤„ç†æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œå®ç°äº†æ•°æ®çš„ä¸€è‡´æ€§å’Œå¯é æ€§ï¼Œåšåˆ°äº†æ•°æ®é›¶ä¸¢å¤±â€ã€â€œé¡¹ç›®å¼•å…¥äº†è§„åˆ™å¼•æ“ï¼Œå…¶ä¸­è§£å†³äº†xxxçš„ä¸šåŠ¡é—®é¢˜ï¼Œä½¿å¾—å·¥ä½œæ•ˆç‡æå¤§æå‡â€â€¦ ç­‰ç­‰</li>
<li>ä¸šåŠ¡ä¸Šçš„äº®ç‚¹:â€å®ç°äº†ä¸šåŠ¡éš”ç¦»ï¼Œä¸åŒç±»å‹ä¹‹é—´çš„ä¸šåŠ¡äº’ä¸å¹²æ‰°ï¼Œä»åŸæ¥çš„xxxæå‡åˆ°äº†ã€â€å‚è€ƒè‡ªæŸå¹³å°çš„xxåŠŸXXxâ€èƒ½ï¼Œä»é›¶å¼€å§‹å®ç°äº†ä¸šåŠ¡ï¼Œä½¿å¾—å¹³å°æ”¶ç›Šå¢åŠ äº†xxxâ€.. ç­‰ç­‰</li>
<li>æ¢³ç†é¡¹ç›®è¿˜å¯æå‡çš„åœ°æ–¹ï¼šæ— è®ºæ˜¯æé«˜æ€§èƒ½ï¼Œè¿˜æ˜¯æé«˜å·¥ä½œæ•ˆç‡ï¼Œæ€»ä¼šæœ‰çš„ã€‚è¿™æ—¶å€™å¦‚æœèƒ½å¹ä¸‹è‡ªå·±å¯¹æ¯”è¿‡æŸæŸå…¬å¸çš„åŒç±»å‹ç³»ç»Ÿï¼Œå€Ÿé‰´äº†æŸæŸæŸä¼˜ç‚¹ï¼ŒåŸºäºç›®å‰è‡ªèº«çš„ä¸šåŠ¡è§‰å¾—è¿˜æœ‰å“ªé‡Œå¯ä»¥ç»§ç»­ä¼˜åŒ–</li>
</ol>
</li>
</ul>
<hr>


<h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><ul>
<li><p>æ’åˆ—ç»„åˆï¼ˆCä¸Šnä¸‹mï¼ŒAä¸Šnä¸‹mï¼‰</p>
<ul>
<li><code>Aä¸Šnä¸‹m</code>æ˜¯æ’åˆ—ï¼Œæœ‰é¡ºåºï¼Œè¡¨ç¤ºmæ˜¯èµ·ç‚¹ï¼ˆé€ä¸ªå‡1ï¼Œnæ˜¯ä¸ªæ•°ï¼‰ï¼Œä»mä¸­æŒ‰é¡ºåºå–nä¸ªæ•°<br>  Amn &#x3D; m x(m-1)x(m-2)x(m-3)x â€¦ x(m-n+1)ï¼›ä¾‹å¦‚ï¼šA74&#x3D; 8x7x6x5</li>
<li><code>Cä¸Šnä¸‹m</code>æ˜¯ç»„åˆï¼Œæ— é¡ºåºï¼Œè¡¨ç¤ºä»mä¸­é€‰å‡ºnä¸ª<br>  Cmn &#x3D; Amn &#x2F; Annï¼› ä¾‹å¦‚ï¼š C84 &#x3D; A84 &#x2F; A44 &#x3D; ï¼ˆ8x7x6x5ï¼‰&#x2F;(4x3x2x1)</li>
</ul>
</li>
<li><p>5ä¸‡äººè¿›è¡Œå¹´é¾„æ’åº<br>â€œä½¿ç”¨å¿«é€Ÿæ’åºç®—æ³•æ¥è¿›è¡Œå¹´é¾„æ’åºï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦é€šå¸¸ä¸ºO(n log n)ã€‚<br>æˆ‘ä¼šé¦–å…ˆå°†äººå£æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åæ ¹æ®æ¯ä¸ªäººçš„å¹´é¾„è¿›è¡Œæ’åºã€‚åœ¨æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¼šä½¿ç”¨é€’å½’æ¥ä¸æ–­åœ°åˆ’åˆ†æ•°ç»„ï¼Œå¹¶äº¤æ¢å…ƒç´ çš„ä½ç½®ï¼Œç›´åˆ°æ•´ä¸ªæ•°ç»„æŒ‰ç…§å¹´é¾„æœ‰åºã€‚å¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œæˆ‘ä¹Ÿå¯ä»¥è€ƒè™‘ä¸€äº›ä¼˜åŒ–ç­–ç•¥ï¼Œæ¯”å¦‚éšæœºåŒ–å¿«é€Ÿæ’åºæ¥é¿å…æœ€åæƒ…å†µçš„å‘ç”Ÿï¼Œæˆ–è€…åˆ©ç”¨å¤šçº¿ç¨‹æ¥åŠ é€Ÿæ’åºè¿‡ç¨‹ã€‚æœ€åï¼Œæˆ‘ä¼šå¯¹æ’åºåçš„ç»“æœè¿›è¡ŒéªŒè¯ï¼Œç¡®ä¿æ’åºæ˜¯å‡†ç¡®çš„ã€‚â€</p>
</li>
<li><p>æ™ºåŠ›é¢˜ï¼š25åŒ¹é©¬é€‰å‰3åï¼Œæœ‰5æ¡èµ›é“<br>å°†25åŒ¹é©¬åˆ†æˆ Aã€Bã€Cã€Dã€E 5ç»„ï¼Œæ¯ç»„è¿›è¡Œç»„å†…æ¯”èµ›ï¼Œå‡è®¾æ¯ç»„çš„æ’åå°±æ˜¯A1&gt;A2&gt;A3&gt;A4&gt;A5ï¼ˆä»¥Aç»„ä¸ºä¾‹ï¼‰ï¼Œè¿™é‡Œæ¯”èµ›5æ¬¡<br>ç¬¬6æ¬¡ï¼Œæ¯ç»„çš„ç¬¬ä¸€åè¿›è¡Œæ¯”èµ›ï¼Œå¯ä»¥æ‰¾å‡ºæœ€å¿«çš„é©¬ï¼Œè¿™é‡Œå‡è®¾A1&gt;B1&gt;C1&gt;D1&gt;E1ï¼ŒD1ï¼ŒE1è‚¯å®šè¿›ä¸äº†å‰3ï¼Œç›´æ¥æ’é™¤æ‰ Dã€E ä¸¤ç»„<br>ç¬¬7æ¬¡ï¼ŒA2 A3 B1 B2 C1 æ¯”èµ›ï¼Œå¯ä»¥æ‰¾å‡ºç¬¬äºŒã€ç¬¬ä¸‰åã€‚æ‰€ä»¥æœ€å°‘æ¯”èµ›éœ€è¦7æ¬¡</p>
</li>
<li><p>ï¼Ÿï¼Ÿï¼Ÿæ™ºåŠ›é¢˜ï¼š1000ç“¶é…’ï¼Œå…¶ä¸­åªæœ‰1ç“¶æ¯’é…’ï¼Œ10åªå°ç™½é¼ ï¼Œå¦‚ä½•1è½®æµ‹è¯•å‡ºæ¥æ¯’é…’æ˜¯å“ªä¸€ç“¶ï¼Ÿ<br>ç”¨å°ç™½é¼ å–è¿™ç“¶é…’orä¸å–è¿™è¯„é…’åˆ†åˆ«ç”¨1ã€0è¡¨ç¤ºã€‚å¯ä»¥å‡‘å‡º1024ç§ç»„åˆï¼Œå¤§äº1000ç§ï¼Œæ‰€ä»¥å¯ä»¥ç»™1000ç“¶é…’æŒ‰ç…§è¿™ç§æ–¹å¼ç¼–å·ã€‚<br>éœ€è¦ååªè€é¼ ï¼Œå¦‚æœæŒ‰é¡ºåºç¼–å·ï¼ŒABCDEFGHIJåˆ†åˆ«ä»£è¡¨ä»ä½ä½åˆ°é«˜ä½æ¯ä¸€ä¸ªä½ã€‚ æ¯åªè€é¼ å¯¹åº”ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¦‚æœè¯¥ä½ä¸Šçš„æ•°å­—ä¸º1ï¼Œåˆ™ç»™è€é¼ å–ç“¶é‡Œçš„è¯ã€‚<br>ç„¶åç”¨å¯¹åº”çš„2è¿›åˆ¶ç çš„æ–¹å¼ç»™10åªå°ç™½é¼ å–é…’ï¼Œè¿‡ä¸€æ®µæ—¶é—´ä¹‹åã€‚é€šè¿‡è§‚å¯Ÿå°ç™½é¼ æ˜¯å“ªäº›ç¼–å·æ­»äº¡ï¼Œå“ªäº›ç¼–å·å­˜æ´»ï¼Œå¯ä»¥åˆ†åˆ«ç”¨1å’Œ0è¡¨ç¤ºï¼Œç„¶åå‡‘å‡ºæ¥çš„2è¿›åˆ¶è½¬10è¿›åˆ¶å°±æ˜¯ç­”æ¡ˆã€‚</p>
</li>
<li><p>æ™ºåŠ›é¢˜ï¼šç»³å­ä¸¤å¤´çƒ§<br>ç°æœ‰è‹¥å¹²ä¸å‡åŒ€çš„ç»³å­ï¼Œçƒ§å®Œè¿™æ ¹ç»³å­éœ€è¦ä¸€ä¸ªå°æ—¶ï¼Œé—®å¦‚ä½•å‡†ç¡®è®¡æ—¶15åˆ†é’Ÿï¼Œ30åˆ†é’Ÿï¼Œ45åˆ†é’Ÿï¼Œ75åˆ†é’Ÿã€‚ã€‚ã€‚<br>15ï¼šå¯¹æŠ˜ä¹‹åä¸¤å¤´çƒ§(è¦æ±‚å¯¹æŠ˜ä¹‹åç»‘çš„å¤Ÿç´§ï¼Œå¦åˆ™çœ‹45åˆ†é’Ÿè§£æ³•)<br>30ï¼šä¸¤å¤´çƒ§<br>45ï¼šä¸¤æ ¹ï¼Œä¸€æ ¹ä¸¤å¤´çƒ§ä¸€æ ¹ä¸€å¤´çƒ§ï¼Œä¸¤å¤´çƒ§å®Œè¿‡äº†30åˆ†é’Ÿï¼Œç«‹å³å°†ç¬¬äºŒæ ¹å¦ä¸€å¤´ç‚¹ç‡ƒï¼Œåˆ°çƒ§å®Œåˆè¿‡15åˆ†é’Ÿï¼ŒåŠ èµ·æ¥45åˆ†é’Ÿ<br>75ï¼š&#x3D;30+45</p>
</li>
</ul>
<hr>

<h2 id="åé—®"><a href="#åé—®" class="headerlink" title="åé—®"></a>åé—®</h2><ul>
<li><p>ä¸€é¢æœ€åçš„æ—¶å€™ï¼Œé¢è¯•å®˜ä¸€èˆ¬ä¼šé—®ï¼šä½ æœ‰ä»€ä¹ˆè¦é—®æˆ‘çš„å—ï¼Ÿè¿™ä¸ªæ—¶å€™ä¸è¦ä¹±é—®ï¼Œä½ å¯ä»¥é—®ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>ä½ ä»¬éƒ¨é—¨åœ¨åšäº›ä»€ä¹ˆï¼Ÿä¸»è¦ä¸šåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœè‡ªå·±å¾ˆè£å¹¸çš„èƒ½å¤Ÿè¿›å…¥è´µéƒ¨é—¨ä¼šè´Ÿè´£äº›ä»€ä¹ˆï¼Ÿ<br>  å› ä¸ºé¢è¯•è€…å°±æ˜¯è¿™ä¸ªéƒ¨é—¨çš„ï¼Œé€šè¿‡ä»–çš„å›ç­”ï¼Œä½ ä¹Ÿèƒ½å¤Ÿäº†è§£åˆ°è¿™ä¸ªéƒ¨é—¨æ­£åœ¨åšçš„äº§å“å’Œä½¿ç”¨çš„æŠ€æœ¯ã€‚</li>
<li>å²—ä½çš„å‘å±•æƒ…å†µã€ã€å¦‚æœæˆ‘æœ‰å¹¸åº”è˜æˆåŠŸï¼Œå…¬å¸å¯¹æˆ‘ä¼šæœ‰å“ªäº›æœŸæœ›å‘¢ï¼Œ</li>
<li>æ‚¨è®¤ä¸ºæˆ‘åœ¨å“ªäº›æ–¹é¢è¿˜å­˜åœ¨ç€ä¸è¶³ï¼Ÿ<br>  è¿™æ˜¯ä¸€ä¸ªå¾ˆå·§å¦™çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒå¯ä»¥ä»ä¾§é¢åæ˜ å‡ºä½ è¿™æ¬¡é¢è¯•çš„ç»“æœã€‚å¦‚æœé¢è¯•å®˜å¸¦æœ‰æŒ‡å¯¼æ€§çš„å›ç­”å‡ºäº†ä½ çš„ä¸è¶³ï¼Œä½ éœ€è¦è¡¥å……çš„çŸ¥è¯†ç‚¹ï¼Œè¿™æ ·å°±ä»£è¡¨ä½ è¿™æ¬¡é¢è¯•å·®ä¸å¤šäº†ï¼Œåº”è¯¥æ˜¯èƒ½å¥½å¥½å‡†å¤‡äºŒé¢äº†ï¼›å¦‚æœé¢è¯•å®˜ç›´è¨€ä¸è®³çš„è¯´ä½ å¾ˆå·®æˆ–è€…åŸºç¡€å¤ªå¼±è¿™æ ·çš„è¯ï¼Œä½ ä¹Ÿå°±çŸ¥é“å‡‰å‡‰äº†ã€‚</li>
<li>è¯·é—®é¢è¯•å®˜å¯¹è‡ªå·±èŒä¸šè§„åˆ’çš„å»ºè®®ï¼Ÿ<br>  é¢è¯•å®˜å¤§æ¦‚ç‡æ˜¯æŠ€æœ¯å¤§ä½¬æˆ–è€…å·¥ä½œè¿‡å‡ å¹´çš„å‰è¾ˆäº†ï¼Œåœ¨ç¤¾ä¼šä¸Šæ‘¸çˆ¬æ»šæ‰“äº†å‡ å¹´ï¼ŒçŸ¥é“çš„è‚¯å®šæ¯”åœ¨æ ¡ç”Ÿå¤šã€‚è¿™ä¸ªé—®é¢˜æ—¢è¡¨è¾¾äº†å¯¹é¢è¯•å®˜èº«ä»½çš„è®¤å¯ï¼Œä¹Ÿè¡¨ç°å‡ºæ±‚èŒè€…å¯¹å½“å‰è¿™ä»½å·¥ä½œå¾—åœ¨æ„ç¨‹åº¦ï¼Œå¹¶ä¸”è¿˜èƒ½å¾—åˆ°æŠ€æœ¯å¤§ä½¬çš„åˆ†äº«ï¼Œæ€ä¹ˆçœ‹éƒ½ä¸æ˜¯äºæœ¬çš„ä¹°å–ã€‚</li>
<li>è¿™ä¸ªå²—ä½æ‰€åœ¨çš„çš„å›¢é˜Ÿæ˜¯ä»€ä¹ˆæ°›å›´ï¼Ÿæˆ‘è¿™ä¸ªæ¯”è¾ƒå¤–å‘ï¼ˆåƒä¸‡è¦è¯´è‡ªå·±å¤–å‘ï¼Œä¸è¦è¯´è‡ªå·±å†…å‘ï¼ŒåŸå› ä¸å¿…å¤šè¯´äº†å§ï¼‰</li>
</ol>
</li>
<li><p>å…³äºå…¬å¸ï¼Œå²—ä½æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ<br>1.<strong>å…³äºå…¬å¸ï¼š</strong>â€œå…¬å¸çš„æ ¸å¿ƒä»·å€¼è§‚æ˜¯ä»€ä¹ˆï¼Ÿâ€ â€œèƒ½å¦åˆ†äº«ä¸€ä¸‹å…¬å¸çš„å‘å±•æˆ˜ç•¥å’Œæœªæ¥è§„åˆ’ï¼Ÿâ€ â€œå…¬å¸çš„æ–‡åŒ–æ˜¯æ€æ ·çš„ï¼Ÿâ€<br>2.<strong>å…³äºå›¢é˜Ÿå’Œé¢†å¯¼ï¼š</strong> â€œæˆ‘å°†ä¼šä¸å“ªäº›å›¢é˜Ÿæˆå‘˜åˆä½œï¼Ÿâ€ â€œå¯¹äºè¿™ä¸ªå²—ä½ï¼Œæˆ‘å°†ç›´æ¥æŠ¥å‘Šç»™è°ï¼Ÿâ€â€å›¢é˜Ÿçš„å·¥ä½œæ°›å›´æ˜¯æ€æ ·çš„ï¼Ÿâ€<br>3.<strong>å…³äºå²—ä½ï¼š</strong> â€œè¿™ä¸ªå²—ä½çš„ä¸»è¦èŒè´£æ˜¯ä»€ä¹ˆï¼Ÿç»©æ•ˆè¯„ä¼°æ ‡å‡†ï¼Ÿâ€  â€œåœ¨è¿™ä¸ªå²—ä½ä¸Šï¼Œæœ‰æ²¡æœ‰æœºä¼šè¿›è¡ŒåŸ¹è®­å’Œä¸“ä¸šå‘å±•ï¼Ÿâ€<br>4.<strong>å…³äºå·¥ä½œç¯å¢ƒï¼š</strong>â€œå…¬å¸å¯¹äºå‘˜å·¥çš„å·¥ä½œç”Ÿæ´»å¹³è¡¡çœ‹æ³•ï¼Ÿå…¬å¸çš„çµæ´»å·¥ä½œæ”¿ç­–ï¼Ÿâ€ â€œå…³äºå·¥ä½œåœºæ‰€å’Œè®¾æ–½æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å®‰æ’ï¼Ÿâ€<br>5.<strong>å…³äºå‘å±•æœºä¼šï¼š</strong> â€œå…¬å¸æ˜¯å¦é¼“åŠ±å†…éƒ¨æ™‹å‡å’ŒèŒä¸šå‘å±•ï¼Ÿâ€  â€œå¯ä»¥è°ˆè°ˆå‘˜å·¥åœ¨å…¬å¸æˆé•¿çš„ä¾‹å­å—ï¼Ÿâ€<br>6.<strong>å…³äºæœŸæœ›ï¼š</strong>â€œå¯¹äºè¿™ä¸ªèŒä½ï¼Œä½ ä»¬æœŸæœ›æ–°å‘˜å·¥åœ¨çŸ­æœŸå’Œé•¿æœŸå†…èƒ½å¤Ÿåšåˆ°ä»€ä¹ˆï¼Ÿâ€ â€œå…¬å¸å¯¹äºåˆ›æ–°å’Œæ”¹è¿›æœ‰æ€æ ·çš„æœŸæœ›ï¼Ÿâ€<br>7.<strong>å…³äºå›¢é˜Ÿåä½œï¼š</strong>â€œåœ¨å›¢é˜Ÿä¸­å¦‚ä½•ä¿ƒè¿›åä½œå’Œå›¢é˜Ÿç²¾ç¥ï¼Ÿâ€  â€œæœ‰æ²¡æœ‰å®šæœŸçš„å›¢é˜Ÿæ´»åŠ¨æˆ–åŸ¹è®­ï¼Ÿâ€<br>8.<strong>å…³äºæ‹›è˜æµç¨‹ï¼š</strong>â€œå¯¹äºè¿™ä¸ªå²—ä½çš„æ‹›è˜æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿâ€  â€œé¢„è®¡å¤šä¹…ä¼šæœ‰å…³äºæˆ‘çš„æ‹›è˜å†³å®šï¼Ÿâ€</p>
</li>
<li><p>ï¼Ÿï¼Ÿä½ å¦‚ä½•è¯„ä»·æˆ‘ä»¬çš„é¢è¯•è¿‡ç¨‹ï¼Ÿ<br>1ã€<strong>ç§¯æã€å»ºè®¾æ€§çš„è§’åº¦</strong>ï¼šå¼ºè°ƒä½ å¯¹é¢è¯•è¿‡ç¨‹çš„ç§¯æå°è±¡ï¼Œæ¯”å¦‚é¢è¯•å®˜çš„ä¸“ä¸šæ€§ã€é—®é¢˜çš„å¤šæ ·æ€§å’ŒæŒ‘æˆ˜æ€§ç­‰ã€‚è¡¨è¾¾æ„Ÿæ¿€ä¹‹æƒ…ï¼Œæ„Ÿè°¢ä»–ä»¬ç»™äºˆçš„æœºä¼šå¹¶å±•ç°å‡ºä½ å¯¹å…¬å¸æˆ–å›¢é˜Ÿçš„å…´è¶£ã€‚<br>2ã€<strong>æ³¨æ„äº‹é¡¹å’Œæ”¹è¿›å»ºè®®</strong>ï¼šæåŠä½ è®¤ä¸ºé¢è¯•è¿‡ç¨‹ä¸­å¯èƒ½çš„æ”¹è¿›ç‚¹ï¼Œä½†è¦ä»¥å»ºè®¾æ€§çš„æ–¹å¼æå‡ºï¼Œä¸è¦è¿‡äºæ‰¹è¯„æˆ–è´Ÿé¢ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æè®®å¢åŠ æŸäº›æŠ€æœ¯é¢†åŸŸçš„æ·±å…¥é—®é¢˜ï¼Œæˆ–è€…æ›´å¤šå…³äºå…¬å¸æ–‡åŒ–å’Œå›¢é˜Ÿåˆä½œçš„é—®é¢˜ï¼Œä»¥æ›´å¥½åœ°äº†è§£å…¬å¸çš„å·¥ä½œç¯å¢ƒã€‚</p>
</li>
<li><p>ï¼Ÿï¼Ÿæœ‰ä»€ä¹ˆè¦åˆ†äº«ç»™é¢è¯•å®˜çš„ï¼Ÿ<br>1.ã€<strong>å±•ç¤ºä½ çš„å‡†å¤‡å’Œå…´è¶£</strong>ï¼šæåˆ°ä½ åœ¨å…¬å¸äº§å“ã€æœåŠ¡ã€é¡¹ç›®æ–¹é¢çš„ç ”ç©¶å’Œäº†è§£ï¼Œè¡¨ç°å‡ºä½ å¯¹å…¬å¸çš„çƒ­æƒ…å’Œç§¯ææ€§ã€‚è¯´æ˜ä½ å¯¹è¯¥å…¬å¸çš„ä»·å€¼è§‚ã€æ„¿æ™¯æˆ–åœ¨è¯¥é¢†åŸŸçš„å…´è¶£ï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆä½ è®¤ä¸ºä½ çš„æŠ€èƒ½å’Œç»éªŒä¸å…¬å¸çš„éœ€æ±‚ç›¸åŒ¹é…ã€‚<br>2ã€<strong>è‡ªæˆ‘è¯„ä»·å’Œäº®ç‚¹</strong>ï¼šå¼ºè°ƒä½ è®¤ä¸ºè‡ªå·±æœ€çªå‡ºçš„æŠ€èƒ½ã€ç»éªŒæˆ–ä¸ªäººç‰¹è´¨ï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆè¿™äº›å¯¹å…¬å¸æˆ–å›¢é˜Ÿä¼šæœ‰ä»·å€¼ã€‚æä¾›å…·ä½“çš„æ¡ˆä¾‹æˆ–ç»éªŒï¼Œå±•ç¤ºä½ çš„é¢†å¯¼èƒ½åŠ›ã€å›¢é˜Ÿåˆä½œç²¾ç¥ã€è§£å†³é—®é¢˜çš„èƒ½åŠ›ç­‰æ–¹é¢çš„ä¼˜åŠ¿ã€‚<br>3ã€<strong>èŒä¸šå‘å±•å±•æœ›</strong>ï¼šè°ˆè®ºä½ å¯¹æœªæ¥èŒä¸šå‘å±•çš„æœŸæœ›ï¼Œå¹¶è¯´æ˜ä½ å¸Œæœ›åœ¨è¯¥å…¬å¸æˆ–ç±»ä¼¼é¢†åŸŸå‘å±•è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯ã€‚è¡¨ç°å‡ºä½ å¯¹ä¸ªäººæˆé•¿å’Œå¯¹å…¬å¸åšå‡ºè´¡çŒ®çš„æ„¿æœ›ã€‚</p>
</li>
</ul>
<hr>


<h2 id="HR-é¢"><a href="#HR-é¢" class="headerlink" title="HR é¢"></a>HR é¢</h2><ul>
<li><p><strong>å¯¹å…¬å¸æ–‡åŒ–çš„ç†è§£å’Œä»·å€¼è§‚çš„è®¤åŒ</strong></p>
<ul>
<li>å…ˆå»äº†è§£ä¸€ä¸‹å…¬å¸çš„æ–‡åŒ–å’Œå…¬å¸çš„ä¼˜åŠ¿ä¹‹å¤„ï¼Œè¿™æ ·åœ¨è¢«é—®åˆ°ä¸ºä»€ä¹ˆé€‰æ‹©æœ¬å…¬å¸çš„æ—¶å€™èƒ½å¤ŸæŠŠè‡ªå·±å¯¹å…¬å¸çš„äº†è§£å’Œä¼˜åŠ¿è¯´å‡ºæ¥ï¼Œä½“ç°è‡ªå·±çš„è¯šæ„</li>
<li>åä¸ºï¼šâ€æˆ‘å¯¹åä¸ºçš„æ–‡åŒ–å°è±¡æ·±åˆ»ï¼Œç‰¹åˆ«æ˜¯å…³äºåšæŒè‡ªä¸»åˆ›æ–°ã€è¿½æ±‚å“è¶Šå’Œä¸æ–­å­¦ä¹ çš„ä»·å€¼è§‚ã€‚æˆ‘æ¥å—çš„æ•™è‚²ï¼Œä½¿æˆ‘æ·±åˆ»ç†è§£å’Œè®¤åŒåä¸ºä¸€è´¯çš„è¿½æ±‚å“è¶Šçš„ç²¾ç¥ã€‚æˆ‘è®¤ä¸ºï¼Œåä¸ºå¼ºè°ƒçš„å›¢é˜Ÿåä½œå’Œå¼€æ”¾å¼æ²Ÿé€šä¹Ÿéå¸¸ç¬¦åˆæˆ‘çš„å·¥ä½œé£æ ¼ã€‚æˆ‘æœŸå¾…èƒ½å¤Ÿåœ¨è¿™æ ·ä¸€ä¸ªæ³¨é‡æŠ€æœ¯åˆ›æ–°å’Œå…¨çƒåˆä½œçš„å…¬å¸ä¸­å‘å±•è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯ã€‚â€</li>
<li>è…¾è®¯ï¼šâ€æˆ‘å¯¹è…¾è®¯çš„æ–‡åŒ–æ·±æ„Ÿå…´å¥‹ï¼Œå°¤å…¶æ˜¯å…³äºç”¨æˆ·è‡³ä¸Šã€åˆ›æ–°é©±åŠ¨å’Œå›¢é˜Ÿåˆä½œçš„ä»·å€¼è§‚ã€‚åœ¨æˆ‘ä¹‹å‰çš„é¡¹ç›®ä¸­ï¼Œæˆ‘æ³¨é‡å€¾å¬ç”¨æˆ·åé¦ˆï¼Œå¹¶é€šè¿‡åˆ›æ–°çš„æ–¹å¼è§£å†³é—®é¢˜ï¼Œè¿™ä¸è…¾è®¯å¼ºè°ƒç”¨æˆ·ä½“éªŒå’Œåˆ›æ–°çš„æ–‡åŒ–éå¸¸å¥‘åˆã€‚æˆ‘ä¹Ÿéå¸¸æ¬£èµè…¾è®¯åœ¨å›¢é˜Ÿåä½œæ–¹é¢çš„åŠªåŠ›ï¼Œæˆ‘è®¤ä¸ºä¸€ä¸ªå›¢ç»“åä½œçš„å›¢é˜Ÿæ˜¯å®ç°ä¼Ÿå¤§ç›®æ ‡çš„å…³é”®ã€‚å› æ­¤ï¼Œæˆ‘ç›¸ä¿¡æˆ‘çš„å·¥ä½œé£æ ¼å’Œä»·å€¼è§‚ä¸è…¾è®¯çš„æ–‡åŒ–éå¸¸åŒ¹é…ï¼Œæˆ‘æ¸´æœ›èƒ½å¤Ÿä¸ºè…¾è®¯çš„å‘å±•è´¡çŒ®åŠ›é‡ã€‚â€</li>
<li>æ„Ÿè§‰æ‚¨è¿™è¾¹å¹³å°å¤§ï¼ŒæŠ€æœ¯ç§¯ç´¯å¤šï¼Œé¡¹ç›®æŒ‘æˆ˜å¤šï¼Œèƒ½åŠ›æå‡å¤š</li>
</ul>
</li>
<li><p>ä½ å¯¹åŠ ç­çš„çœ‹æ³•ï¼Ÿ<br>å¦‚æœæ˜¯å·¥ä½œéœ€è¦æˆ‘ä¼šä¹‰ä¸å®¹è¾åŠ ç­ã€‚æˆ‘ç°åœ¨å•èº«ï¼Œæ²¡æœ‰ä»»ä½•å®¶åº­è´Ÿæ‹…ï¼Œå¯ä»¥å…¨èº«å¿ƒçš„æŠ•å…¥å·¥ä½œã€‚ä½†åŒæ—¶ï¼Œæˆ‘ä¹Ÿä¼šæé«˜å·¥ä½œæ•ˆç‡ï¼Œå‡å°‘ä¸å¿…è¦çš„åŠ ç­</p>
</li>
<li><p>ä½ å¯¹è–ªèµ„çš„è¦æ±‚ï¼Ÿ<br>â‘ ï¼šâ€œæˆ‘å¯¹å·¥èµ„æ²¡æœ‰ç¡¬æ€§è¦æ±‚ã€‚æˆ‘ç›¸ä¿¡è´µå…¬å¸åœ¨å¤„ç†æˆ‘çš„é—®é¢˜ä¸Šä¼šå‹å–„åˆç†ã€‚æˆ‘æ³¨é‡çš„æ˜¯æ‰¾å¯¹å·¥ä½œæœºä¼šï¼Œæ‰€ä»¥åªè¦æ¡ä»¶å…¬å¹³ï¼Œæˆ‘åˆ™ä¸ä¼šè®¡è¾ƒå¤ªå¤š<br>â‘¡ï¼šæˆ‘ä½œä¸ºä¸€ä¸ªç§‘ç­å‡ºèº«ï¼Œå…·å¤‡æ¯”è¾ƒå®Œå¤‡çš„å·¥ä½œæŠ€èƒ½çš„äººï¼Œæˆ‘ç›¸ä¿¡è‡ªå·±èƒ½ä¸ºå…¬å¸å¸¦æ¥ä»·å€¼ã€‚ã€‚å› æ­¤ï¼Œæˆ‘å¸Œæœ›å…¬å¸èƒ½æ ¹æ®æˆ‘çš„æƒ…å†µå’Œå¸‚åœºæ ‡å‡†çš„æ°´å¹³ï¼Œç»™æˆ‘åˆç†çš„è–ªæ°´ã€‚<br>â‘¢ï¼šå¦‚æœä½ å¿…é¡»è‡ªå·±è¯´å‡ºå…·ä½“æ•°ç›®ï¼Œè¯·ä¸è¦è¯´ä¸€ä¸ªå®½æ³›çš„èŒƒå›´ï¼Œé‚£æ ·ä½ å°†åªèƒ½å¾—åˆ°æœ€ä½é™åº¦çš„æ•°å­—ã€‚æœ€å¥½ç»™å‡ºä¸€ä¸ªå…·ä½“çš„æ•°å­—ï¼Œè¿™æ ·è¡¨æ˜ä½ å·²ç»å¯¹å½“ä»Šçš„äººæ‰å¸‚åœºä½œäº†è°ƒæŸ¥ï¼ŒçŸ¥é“åƒè‡ªå·±è¿™æ ·å­¦å†çš„é›‡å‘˜æœ‰ä»€ä¹ˆæ ·çš„ä»·å€¼ã€‚</p>
</li>
<li><p><strong>çœ¼ä¸‹ä½ ç”Ÿæ´»ä¸­æœ€é‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿæœªæ¥å‡ å¹´çš„è§„åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br>å¯¹æˆ‘æ¥è¯´ï¼Œèƒ½åœ¨è¿™ä¸ªé¢†åŸŸæ‰¾åˆ°å·¥ä½œæ˜¯æœ€é‡è¦çš„ã€‚<br>è§„åˆ’å¥½èŒä¸šç”Ÿæ¶¯ï¼Œä¸åŒäº‹ä»¬å¾ˆå¥½åœ°åˆä½œã€‚æˆ‘å¸Œæœ›èƒ½å……åˆ†å±•ç¤ºæˆ‘åœ¨è¿™ä¸ªè¡Œä¸šçš„èƒ½åŠ›å’Œæ™ºæ…§ã€‚</p>
</li>
<li><p>è¯´è¯´ä½ å¯¹è¡Œä¸šã€æŠ€æœ¯å‘å±•è¶‹åŠ¿çš„çœ‹æ³•ï¼Ÿ<br>ï¼Ÿï¼Ÿï¼Ÿ<br>å›ç­”æç¤ºï¼šä¼ä¸šå¯¹è¿™ä¸ªé—®é¢˜å¾ˆæ„Ÿå…´è¶£ï¼Œåªæœ‰æœ‰å¤‡è€Œæ¥çš„æ±‚èŒè€…èƒ½å¤Ÿè¿‡å…³ã€‚æ±‚èŒè€…å¯ä»¥ç›´æ¥åœ¨ç½‘ä¸ŠæŸ¥æ‰¾å¯¹ä½ æ‰€ç”³è¯·çš„è¡Œä¸šéƒ¨é—¨çš„ä¿¡æ¯ï¼Œåªæœ‰æ·±å…¥äº†è§£æ‰èƒ½äº§ç”Ÿç‹¬ç‰¹çš„è§è§£ã€‚ä¼ä¸šè®¤ä¸ºæœ€èªæ˜çš„æ±‚èŒè€…æ˜¯å¯¹æ‰€é¢è¯•çš„å…¬å¸é¢„å…ˆäº†è§£å¾ˆå¤šï¼ŒåŒ…æ‹¬å…¬å¸å„ä¸ªéƒ¨é—¨ï¼Œå‘å±•æƒ…å†µï¼Œåœ¨é¢è¯•å›ç­”é—®é¢˜çš„æ—¶å€™å¯ä»¥æåˆ°æ‰€äº†è§£çš„æƒ…å†µï¼Œä¼ä¸šæ¬¢è¿è¿›å…¥ä¼ä¸šçš„äººæ˜¯â€œçŸ¥å·±â€ï¼Œè€Œä¸æ˜¯â€œç›²äººâ€ã€‚</p>
</li>
<li><p><strong>èŒä¸šå‘å±•è§„åˆ’ï¼Ÿ</strong><br>Tå‹äººæ‰ï¼Œä¸€æ–¹é¢åœ¨æŠ€æœ¯é¢†åŸŸæ·±æŒ–ï¼Œä¸€æ–¹é¢å¯¹æ•´ä¸ªäº§å“çš„ç«¯åˆ°ç«¯æœ‰ä¸€ä¸ªäº†è§£ã€ã€</p>
</li>
<li><p>è¯·ç”¨ä¸‰ä¸ªè¯æè¿°æ‚¨çš„æ€§æ ¼ç‰¹ç‚¹<br><strong>è¯šå®ï¼Œå‹¤å¥‹ï¼Œè°¦è™šã€‚</strong>åœ¨å­¦ä¹ çŸ¥è¯†å’Œä¸äººäº¤å¾€çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å§‹ç»ˆä¿æŒå¦è¯šå’ŒçœŸå®ï¼Œå¯¹è‡ªå·±å’Œä»–äººè´Ÿè´£ã€‚é¢å¯¹ç”Ÿæ´»ä¸­çš„æŒ‘æˆ˜ï¼Œæˆ‘ç§¯æçœ‹å¾…å¹¶å‹¤å¥‹åŠªåŠ›ï¼Œç›¸ä¿¡åŠªåŠ›ç»ˆä¼šæœ‰æ‰€å›æŠ¥ã€‚è°¦è™šè®©æˆ‘ä¿æŒè°¦é€Šå’Œè™šå¿ƒï¼Œæ„¿æ„å€¾å¬ä»–äººæ„è§å¹¶ä¸æ–­å­¦ä¹ æˆé•¿ã€‚</p>
</li>
<li><p>ä¸¾ä¾‹è¯´æ˜ä½ çš„å‹¤å¥‹ã€‚ã€‚<br>æˆ‘è¯¦ç»†å®‰æ’æ¯•ä¸šè®¾è®¡å¼€å‘è¿›åº¦ï¼Œä¸€å‘¨å†…æ¯å¤©ç†¬å¤œåˆ°3ç‚¹ã€‚ã€‚<br>æˆ‘æƒ³è¯´çš„æ˜¯å¾ˆå¤šæ—¶å€™å³ä½¿æ—©å·²åšå¥½å®‰æ’ï¼Œåˆ°å¤´æ¥è¿˜æ˜¯å› ä¸ºå„ç§æƒ…å†µä¸å¾—ä¸èµ¶è¿›åº¦ï¼Œé‡è¦çš„æ˜¯èƒ½å¤Ÿåœ¨éœ€è¦æ—¶èµ¶å¥½è¿›åº¦çš„èƒ½åŠ›ã€‚ã€‚</p>
</li>
<li><p>ä½ èº«è¾¹çš„äººå¦‚ä½•è¯„ä»·ä½ ï¼Ÿ<br>ä»–ä»¬è¯´æˆ‘æ˜¯ä¸€ä¸ªè¯šå®ã€å­¦ä¹ å’Œå·¥ä½œåŠªåŠ›ã€è´Ÿè´£ä»»çš„äººã€‚æˆ‘ä¸€æ—¦ç­”åº”åˆ«äººçš„äº‹æƒ…ï¼Œå°±ä¸€å®šä¼šè´Ÿè´£åˆ°åº•ï¼Œå¦åˆ™æˆ‘ä¸ä¼šè½»æ˜“è®¸è¯ºã€‚<br>ä»¥åŠæˆ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒéšå’Œçš„äººï¼Œä¸ä¸åŒçš„äººéƒ½å¯ä»¥å‹å¥½ç›¸å¤„ï¼Œåœ¨ä¸äººç›¸å¤„æ—¶ï¼Œæˆ‘æ€»æ˜¯èƒ½ç«™åœ¨åˆ«äººçš„è§’åº¦è€ƒè™‘é—®é¢˜ã€‚</p>
</li>
<li><p><strong>ä½ çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚</strong></p>
<ul>
<li>æˆ‘æ˜¯ä¸€ä¸ªè¯šå®ï¼Œæ¯”è¾ƒå‹¤å¥‹å’Œä¹è§‚çš„äººã€‚æˆ‘çš„é€‚åº”èƒ½åŠ›æ¯”è¾ƒå¼ºï¼Œå–œæ¬¢å‘ä»–äººå­¦ä¹ ï¼Œä¹Ÿæ„¿æ„å¸®åŠ©ä»–äººã€‚åœ¨ä»¥å¾€çš„å®ä¹ ã€é¡¹ç›®ä¸­ï¼Œèƒ½å¤Ÿå¾ˆå¿«é€‚åº”å›¢é˜Ÿå¼€å‘æµç¨‹ã€‚æˆ‘ç›¸ä¿¡åœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŸ¹è®­åŠé¡¹ç›®å®æˆ˜åï¼Œèƒ½å¤Ÿåœ¨è¿™ä»½å·¥ä½œä¸­å–å¾—æˆåŠŸã€‚</li>
<li>æˆ‘ç¼ºä¹å·¥ä½œç»éªŒã€‚ã€‚<ul>
<li>åœ¨ä¹‹å‰çš„å®ä¹ è¿‡ç¨‹ä¸­åªæ˜¯å‚ä¸äº†å¼€å‘è¿™ä¸€ç¯èŠ‚ï¼Œæ²¡æœ‰è·¨éƒ¨é—¨åˆä½œã€ä¸ä¸åŒå²—ä½çš„åŒäº‹æ·±åº¦äº¤æµçš„ç»éªŒã€‚</li>
<li>æœ‰ç‚¹å¼ºè¿«ç—‡ï¼Œä¼šå¯¹ä»»åŠ¡çš„ç»†èŠ‚æ ¸å¯¹å¤šéï¼Œæ¯”å¦‚å‘é‚®ä»¶ï¼Œå¡«èµ„æ–™çš„æ—¶å€™å¿…é¡»è¦é‡å¤æ£€æŸ¥ï¼ŒæŠŠä¿¡æ¯æ­£ç€åç€è¿‡ä¸€éï¼Œè¿™æ ·è™½ç„¶æœ‰ç‚¹æµªè´¹æ—¶é—´ï¼Œä½†å°±åŸºæœ¬ä¸ä¼šå‡ºä»€ä¹ˆå·®é”™äº†ï¼›</li>
<li>å¦å¤–å°±æ˜¯æœ‰ç‚¹é’»ç‰›è§’å°–ï¼Œåœ¨å­¦ä¹ æ–°çš„çŸ¥è¯†æ—¶æœ‰ä¸ªç‚¹èŠ±äº†å¾ˆé•¿æ—¶é—´éƒ½æ²¡å¼„æ‡‚ï¼Œä¼šæ¯”è¾ƒæ³„æ°”ã€‚åæ¥å‘ç°å¯ä»¥æŠŠä¸æ‡‚çš„å…ˆæ”¾ç€ï¼Œç­‰å­¦äº†åˆ«çš„çŸ¥è¯†ï¼Œå†è¿”å›æ¥çœ‹è¿™ä¸ªçŸ¥è¯†ç‚¹å°±è§¦ç±»æ—é€šäº†ï¼›æˆ‘ç›®å‰ä¹Ÿå¾ˆä¹ æƒ¯ä½¿ç”¨chatgptè¿›è¡Œå­¦ä¹ ï¼Œé€šè¿‡æé—®å¿«é€Ÿå‘æ•£çŸ¥è¯†ç‚¹ï¼Œå»ºç«‹è”ç³»ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>é«˜ä¸­åˆ°å¤§å­¦ä»¥æ¥ï¼Œæœ€å¤§çš„æŒ«æŠ˜ã€‚<br>é«˜ä¸­ä»¥æ¥ä¸€ç›´é­åˆ°å¤±è´¥ï¼Œå­¦ä¸šã€ç¤¾å›¢ã€äººé™…äº¤å¾€ï¼Œï¼Œä¸€åº¦è®©æˆ‘ååˆ†æ²®ä¸§ï¼Œä½†ä¹Ÿæ˜¯æˆ‘æ€è€ƒäº†å¾ˆå¤šçš„ä¸€æ®µæ—¶é—´ï¼Œï¼Œæˆ‘æ¸æ¸äº†è§£ï¼šå¤±è´¥æ˜¯äººç”Ÿçš„å¸¸æ€ã€‚<br>æˆ‘å¾ˆåº†å¹¸ä¸€æ¬¡æ¬¡ç»å†å¤±è´¥çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘éƒ½è¿˜æ˜¯é€‰æ‹©äº†å†åŠªåŠ›ä¸€ä¸‹ï¼Œä¹Ÿè®¸å°±æœ‰æ”¹å˜å‘¢ï¼Œå¾€å¾€æœ€åé—®é¢˜éƒ½èƒ½å¤Ÿè§£å†³äº†ï¼Œï¼Œ<br>æœ€é‡è¦çš„ï¼Œæˆ‘å­¦ä¼šåœ¨ä»»ä½•æƒ…å†µä¸‹ä¿æŒå†·é™ï¼Œï¼Œåœ¨æœªæ¥ï¼Œåœ¨å¤§å­¦é¢å¯¹å„ç§å‹åŠ›æ—¶ï¼Œéƒ½å¯ä»¥æ¯”è¾ƒä½“é¢åœ°åº”å¯¹äº†ï¼Œå¹¶ä¸”æ€è€ƒå¦‚ä½•åšå¾—æ›´å¥½ã€ã€</p>
</li>
<li><p>å­¦ä¹ æ–¹æ³•ã€‚<br>æŸä¸€ä¸ªç‚¹ï¼šæ ¹æ®éœ€æ±‚é’ˆå¯¹æ€§çš„å®˜æ–¹æ–‡æ¡£ï¼Œï¼ŒæŸ¥æŠ€æœ¯è®ºå›ã€ã€<br>æŸä¸€é¢†åŸŸï¼š(çœ‹Bç«™è§†é¢‘ Ã—) åœ¨æœ‰äº†å¤§è‡´äº†è§£åï¼Œä½¿ç”¨chatgptï¼Œä¸æ–­æé—®ã€å‘æ•£ï¼ŒæŠŠçŸ¥è¯†ç‚¹éƒ½è¿æ¥èµ·æ¥</p>
</li>
<li><p>æœ€è¿‘çœ‹äº†ä»€ä¹ˆä¹¦ï¼Ÿè¯»äº†ä»€ä¹ˆå¼€æºåº“ï¼Ÿ<br>ï¼Ÿï¼Ÿï¼Ÿæ²¡çœ‹ã€‚</p>
</li>
<li><p><strong>è€ƒç ”å¼ƒè€ƒï¼Ÿç§‹æ‹›0 offerï¼Ÿç©ºç™½æœŸï¼Ÿ</strong><br>æ²¡è€ƒç ”ï¼ï¼æ‰¾å·¥ä½œæ¯”è¾ƒæ™šï¼ˆå› ä¸ºæœ‰javaåŸºç¡€å’Œé¡¹ç›®ç»éªŒã€ã€ï¼‰å¹¶ä¸”å¤ä»¤è¥ï¼Œæ¯•ä¸šå®ä¹ å ç”¨äº†å¾ˆå¤šæ—¶é—´ï¼Œï¼Œ<br>ç§‹æ‹›æœŸé—´ï¼Œæˆ‘ä¸€ç›´å­¦ä¹ javaæŠ€æœ¯æ ˆï¼Œï¼ˆæ²¡æŠŠæ¡æ‰€ä»¥ï¼‰æ²¡æ€ä¹ˆæŠ•ç®€å†ï¼Œï¼Œåé¢æˆ‘ä¸ºäº†ä¸°å¯Œè‡ªå·±å¯¹å¼€å‘çš„äº†è§£ï¼Œä¹Ÿåœ¨12æœˆåº•æ‰¾äº†ä¸€ä»½å®ä¹ åšåˆ°ç°åœ¨äº†ã€‚ã€‚ç›®å‰ä¸è€ƒè™‘è€ƒç ”<br>æ˜¥æ‹›æœŸé—´ï¼Œï¼Œï¼Œ</p>
</li>
<li><p>è¡¨ç°<strong>æŠ—å‹èƒ½åŠ›ä»¥åŠå¤„ç†æ„å¤–æƒ…å†µçš„èƒ½åŠ›</strong>ã€‚</p>
<ol>
<li>åˆ†äº«ä¸€ä»¶ä½ è§‰å¾—å‹åŠ›æ¯”è¾ƒå¤§çš„äº‹ï¼Ÿä½ çš„å‹åŠ›ä»ä½•æ¥ï¼Ÿä½ æ˜¯å¦‚ä½•å…‹æœä»–çš„ï¼Ÿ<br>  ï¼Ÿï¼Ÿ1.é€‚åº”å‹åŠ›ï¼Œæœ‰å‹åŠ›åŠ¨åŠ›æ›´è¶³ã€‚2.ä¼šåˆç†å®‰æ’æ—¶é—´ï¼Œå–å¾—å·¥ä½œæ•ˆç‡å¾ˆå¥½çš„å¹³è¡¡</li>
<li>ä½ é•¿è¿™ä¹ˆå¤§ä»¥æ¥é­å—è¿‡çš„æœ€å¤§æŒ«æŠ˜æ˜¯ä»€ä¹ˆï¼Ÿä½ æ˜¯å¦‚ä½•å…‹æœå®ƒçš„ï¼Ÿ<br>  ï¼Ÿï¼Ÿ</li>
<li>äºŒåå¤šå¹´æ¥ï¼Œä½ å–å¾—çš„æœ€å¤§æˆå°±æ˜¯ä»€ä¹ˆï¼Ÿ<br>  ï¼Ÿï¼Ÿ</li>
<li>ä½ é€šè¿‡å¤šå¹´åŠªåŠ›è·å¾—çš„ä¸€é¡¹æŠ€èƒ½æ˜¯ä»€ä¹ˆï¼Ÿä½ æ˜¯å¦‚ä½•å­¦ä¹ ä»è€Œè·å¾—è¿™é¡¹æŠ€èƒ½çš„ï¼Œåšäº†å“ªäº›å·¥ä½œå»æ”¹å–„ã€ç²¾è¿›è¿™é¡¹æŠ€èƒ½ï¼Ÿ<br>  ï¼Ÿï¼Ÿ<br>  å­¦ä¼šé¢å¯¹ä»»ä½•å›°éš¾ä¿æŒå†·é™ã€‚ä»ä¸Šå­¦æ—¶çªç„¶è¢«ç‚¹åå‘è¨€ã€çªç„¶è¢«å§”ä»»å‚åŠ ä¸€ä¸ªæ¯”èµ›ï¼Œåˆ°ç°åœ¨åšé¡¹ç›®æ—¶é¢å¯¹éœ€æ±‚ä»å¤´å¼€å§‹å­¦ä¹ æ–°çš„æŠ€æœ¯ï¼Œæˆ‘å‘ç°åœ¨é¢å¯¹å›°éš¾æ—¶ï¼Œæœ‰æ•ˆçš„æ–¹æ³•å°±æ˜¯å†·é™åˆ†æå±€åŠ¿ï¼Œä»¥åŠæœ€é‡è¦çš„æ˜¯å°½æ—©çš„ç€æ‰‹åšã€‚è¿™æ ·å³ä½¿æœ€åæ— æ³•å®Œæˆï¼Œä¹Ÿæœ‰æ‰€æ”¶è·ã€‚</li>
</ol>
</li>
<li><p>ä½ èƒ½ä½¿ç»„é‡Œæ°”æ°›æ´»è·ƒï¼Œå¹¶ä¸”æ˜“äº<strong>æ²Ÿé€š</strong>å—ï¼Ÿ<br>æˆ‘ä¼šå°½åŠ›ï¼Œå’Œå›¢é˜Ÿä¸­çš„æˆå‘˜æ²Ÿé€šï¼Œå‘ä»–ä»¬å‘é—®ã€å­¦ä¹ ã€‚å› ä¸ºåœ¨å›¢é˜Ÿé‡Œå·¥ä½œæœ€é‡è¦çš„ä¸€ä»¶äº‹å°±æ˜¯é›†æ€å¹¿ç›Šï¼Œè€Œä¸è¦åªæ˜¯ä¸€ä¸ªäººé—·å¤´å•å¹²ã€‚æ²Ÿé€šæ˜¯å¾ˆé‡è¦çš„ï¼Œä¸ä»…å¯ä»¥æé«˜å·¥ä½œè´¨é‡å’Œæ•ˆç‡ï¼Œä¹Ÿå¯ä»¥äº§ç”Ÿæ´»åŠ›ã€‚</p>
</li>
<li><p>å¦‚ä½•å¤„ç†ä¸åŒäº‹åœ¨å·¥ä½œä¸­æ„è§çš„ä¸å’Œï¼Ÿä¸ä¸Šçº§æ„è§å†²çªï¼Ÿ<br>æˆ‘è¦ä»¥æ›´æ¸…æ¥šå’Œæ–‡æ˜çš„æ–¹å¼æå‡ºæˆ‘çš„çœ‹æ³•ï¼Œä½¿å¯¹æ–¹äº†è§£æˆ‘çš„è§‚ç‚¹ã€‚<br>æˆ‘ä¼šå°Šé‡ä¸Šçº§ï¼Œä¸Šçº§ä¸€èˆ¬æ›´æœ‰ç»éªŒï¼Œæ€è€ƒæ›´å…¨é¢ï¼Œè¦é€šè¿‡ç§¯ææ²Ÿé€šæ‰¾åˆ°ä¸€ä¸ªæ›´åˆé€‚çš„è§£å†³æ–¹æ³•ã€‚</p>
</li>
<li><p>åœ¨å®ŒæˆæŸé¡¹å·¥ä½œæ—¶ï¼Œä½ è®¤ä¸ºé¢†å¯¼è¦æ±‚çš„æ–¹å¼ä¸æ˜¯æœ€å¥½çš„ï¼Œè‡ªå·±è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ<br>åŸåˆ™ä¸Šæˆ‘ä¼šå°Šé‡å’Œæœä»é¢†å¯¼çš„å·¥ä½œå®‰æ’ï¼›åŒæ—¶ç§åº•ä¸‹æ‰¾æœºä¼šä»¥è¯·æ•™çš„å£å»ï¼Œå©‰è½¬åœ°è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Œçœ‹çœ‹é¢†å¯¼æ˜¯å¦èƒ½æ”¹å˜æƒ³æ³•ï¼›<br>å¦‚æœé¢†å¯¼æ²¡æœ‰é‡‡çº³æˆ‘çš„å»ºè®®ï¼Œæˆ‘ä¹ŸåŒæ ·ä¼šæŒ‰é¢†å¯¼çš„è¦æ±‚è®¤çœŸåœ°å»å®Œæˆè¿™é¡¹å·¥ä½œï¼›<br>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå‡å¦‚é¢†å¯¼è¦æ±‚çš„æ–¹å¼è¿èƒŒåŸåˆ™ï¼Œæˆ‘ä¼šåšå†³æå‡ºåå¯¹æ„è§ï¼›å¦‚é¢†å¯¼ä»å›ºæ‰§å·±è§ï¼Œæˆ‘ä¼šæ¯«ä¸çŠ¹è±«åœ°å†å‘ä¸Šçº§é¢†å¯¼åæ˜ ã€‚</p>
</li>
<li><p>å·¥ä½œä¸­ä½ éš¾ä»¥å’ŒåŒäº‹ã€ä¸Šå¸ç›¸å¤„ï¼Œä½ è¯¥æ€ä¹ˆåŠï¼Ÿ<br>æˆ‘ä¼šæœä»é¢†å¯¼çš„æŒ‡æŒ¥ï¼Œé…åˆåŒäº‹çš„å·¥ä½œã€‚<br>æˆ‘ä¼šä»è‡ªèº«æ‰¾åŸå› ï¼Œä»”ç»†åˆ†ææ˜¯ä¸æ˜¯è‡ªå·±å·¥ä½œåšå¾—ä¸å¥½è®©é¢†å¯¼ä¸æ»¡æ„ï¼ŒåŒäº‹çœ‹ä¸æƒ¯ã€‚è¿˜è¦çœ‹çœ‹æ˜¯ä¸æ˜¯ä¸ºäººå¤„ä¸–æ–¹é¢åšå¾—ä¸å¥½ã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ æˆ‘ä¼šåŠªåŠ›æ”¹æ­£ã€‚<br>å¦‚æœæˆ‘æ‰¾ä¸åˆ°åŸå› ï¼Œæˆ‘ä¼šæ‰¾æœºä¼šè·Ÿä»–ä»¬æ²Ÿé€šï¼Œè¯·ä»–ä»¬æŒ‡å‡ºæˆ‘çš„ä¸è¶³ã€‚æœ‰é—®é¢˜å°±åŠæ—¶æ”¹æ­£ã€‚<br>ä½œä¸ºä¼˜ç§€çš„å‘˜å·¥ï¼Œåº”è¯¥æ—¶åˆ»ä»¥å¤§å±€ä¸ºé‡ï¼Œå³ä½¿åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œé¢†å¯¼å’ŒåŒäº‹å¯¹æˆ‘ä¸ç†è§£ï¼Œæˆ‘ä¹Ÿä¼šåšå¥½æœ¬èŒå·¥ä½œï¼Œè™šå¿ƒå‘ä»–ä»¬å­¦ä¹ ï¼Œæˆ‘ç›¸ä¿¡ï¼Œä»–ä»¬ä¼šçœ‹è§æˆ‘åœ¨åŠªåŠ›ï¼Œæ€»æœ‰ä¸€å¤©ä¼šå¯¹æˆ‘å¾®ç¬‘çš„ï¼</p>
</li>
<li><p>å¶åƒï¼Ÿä¼ä¸šå®¶ï¼Ÿ<br>æ¢…è¥¿ï¼Ÿé™¤äº†è¶³çƒæ–¹é¢çš„ï¼Œä»–æœ‰ç€ä¸–ç•Œä¸Šæœ€å®è´µçš„å¤©èµ‹ï¼Œè°¦é€Šã€‚ä»–æ²‰é»˜åœ°æ‹…ä¸‹æ‰€æœ‰è´£ä»»ï¼Œç”¨å®é™…è¡ŒåŠ¨å›å¤è´¨ç–‘å’Œè¯‹æ¯ï¼Œä»¥åŠä»–ä¸ªäººå’ŒèŒä¸šç”Ÿæ¶¯ä¸­çš„ç§ç§æŒ«æŠ˜ï¼Œå…±åŒè®©ä»–æˆé•¿ä¸ºäº†è¿™ä¸ªä¸–ç•Œä¸Šæœ€åšå¼ºçš„äººã€‚<br>ä»»æ­£éï¼Ÿï¼Ÿä¸€ä½æ°‘æ—ä¼ä¸šå®¶ï¼Œç»å†äº†è‹¦éš¾çš„äººï¼Œå®å¹²å®¶ï¼Œå°Šé‡æ•™å¸ˆå’Œç§‘å­¦å®¶ã€‚ã€‚ä»–çš„ä¼ä¸šå³ä½¿åœ¨æœ€è‰°éš¾çš„æ—¶åˆ»ï¼Œä¹ŸåšæŒç ”å‘æŠ•å…¥ï¼Œæœ‰ç€å‘ä¸Šçš„é£æ°”ã€‚</p>
</li>
<li><p>å¦‚æœé€šè¿‡è¿™æ¬¡é¢è¯•æˆ‘ä»¬å•ä½å½•ç”¨äº†ä½ ï¼Œä½†å·¥ä½œä¸€æ®µæ—¶é—´å´å‘ç°ä½ æ ¹æœ¬ä¸é€‚åˆè¿™ä¸ªèŒä½ï¼Œä½ æ€ä¹ˆåŠï¼Ÿ<br>ï¼Ÿï¼Ÿ<br>å¦‚æœä½ ç¡®å®çƒ­çˆ±è¿™ä¸ªèŒä¸šï¼Œé‚£ä½ å°±è¦ä¸æ–­å­¦ä¹ ï¼Œè™šå¿ƒå‘é¢†å¯¼å’ŒåŒäº‹å­¦ä¹ ä¸šåŠ¡çŸ¥è¯†å’Œå¤„äº‹ç»éªŒï¼Œäº†è§£è¿™ä¸ªèŒä¸šçš„ç²¾ç¥å†…æ¶µå’ŒèŒä¸šè¦æ±‚ï¼ŒåŠ›äº‰å‡å°‘å·®è·ï¼›<br>ä½ è§‰å¾—è¿™ä¸ªèŒä¸šå¯æœ‰å¯æ— ï¼Œé‚£è¿˜æ˜¯è¶æ—©æ¢ä¸ªèŒä¸šï¼Œå»å‘ç°é€‚åˆä½ çš„ï¼Œä½ çƒ­çˆ±çš„èŒä¸šï¼Œé‚£æ ·ä½ çš„å‘å±•å‰é€”ä¹Ÿä¼šå¤§ç‚¹ï¼Œå¯¹å•ä½å’Œä¸ªäººéƒ½æœ‰å¥½å¤„ã€‚</p>
</li>
<li><p>å¦‚æœä½ çš„å·¥ä½œå‡ºç°å¤±è¯¯ï¼Œç»™æœ¬å…¬å¸é€ æˆç»æµæŸå¤±ï¼Œä½ è®¤ä¸ºè¯¥æ€ä¹ˆåŠï¼Ÿ<br>æˆ‘æœ¬æ„æ˜¯ä¸ºå…¬å¸åŠªåŠ›å·¥ä½œï¼Œå¦‚æœé€ æˆç»æµæŸå¤±ï¼Œæˆ‘è®¤ä¸ºé¦–è¦çš„é—®é¢˜æ˜¯æƒ³æ–¹è®¾æ³•å»å¼¥è¡¥æˆ–æŒ½å›ç»æµæŸå¤±ã€‚<br>å¦‚æœæˆ‘æ— èƒ½åŠ›è´Ÿè´£ï¼Œå¸Œæœ›å•ä½å¸®åŠ©è§£å†³ï¼›<br>åˆ†æ¸…è´£ä»»ï¼Œå„è´Ÿå…¶è´£ï¼Œå¦‚æœæ˜¯æˆ‘çš„è´£ä»»ï¼Œæˆ‘ç”˜æ„¿å—ç½šï¼›å¦‚æœæ˜¯ä¸€ä¸ªæˆ‘è´Ÿè´£çš„å›¢é˜Ÿä¸­åˆ«äººçš„å¤±è¯¯ï¼Œä½œä¸ºä¸€ä¸ªå›¢é˜Ÿï¼Œéœ€è¦äº’ç›¸ææºå…±åŒå®Œæˆå·¥ä½œï¼Œå®‰æ…°åŒäº‹å¹¶å¸®åŠ©åŒäº‹æŸ¥æ‰¾åŸå› æ€»ç»“ç»éªŒã€‚<br>æ€»ç»“ç»éªŒæ•™è®­ï¼Œä¸€ä¸ªäººçš„ä¸€ç”Ÿä¸å¯èƒ½ä¸çŠ¯é”™è¯¯ï¼Œé‡è¦çš„æ˜¯èƒ½ä»è‡ªå·±çš„æˆ–è€…æ˜¯åˆ«äººçš„é”™è¯¯ä¸­å¸å–ç»éªŒæ•™è®­ï¼Œå¹¶åœ¨ä»Šåçš„å·¥ä½œä¸­é¿å…å‘ç”ŸåŒç±»çš„é”™è¯¯ã€‚æ£€è®¨è‡ªå·±çš„å·¥ä½œæ–¹æ³•ã€åˆ†æé—®é¢˜çš„æ·±åº¦å’ŒåŠ›åº¦æ˜¯å¦ä¸å¤Ÿï¼Œä»¥è‡´å‡ºç°äº†æœ¬å¯ä»¥é¿å…çš„é”™è¯¯ã€‚</p>
</li>
<li><p>å¦‚æœä½ åœ¨è¿™æ¬¡è€ƒè¯•ä¸­æ²¡æœ‰è¢«å½•ç”¨ï¼Œä½ æ€ä¹ˆæ‰“ç®—ï¼Ÿ<br>ç¬¬ä¸€ï¼šè¦æ•¢äºé¢å¯¹,é¢å¯¹è¿™æ¬¡å¤±è´¥ä¸æ°”é¦,æ¥å—å·²ç»å¤±å»äº†è¿™æ¬¡æœºä¼šå°±ä¸ä¼šå›å¤´è¿™ä¸ªç°å®,ä»å¿ƒç†æ„å¿—å’Œç²¾ç¥ä¸Šä½“ç°å‡ºå¯¹è¿™æ¬¡å¤±è´¥çš„æŠµæŠ—åŠ›ã€‚è¦æœ‰è‡ªä¿¡,ç›¸ä¿¡è‡ªå·±ç»å†äº†è¿™æ¬¡ä¹‹åç»è¿‡åŠªåŠ›ä¸€å®šèƒ½è¡Œ.èƒ½å¤Ÿè¶…è¶Šè‡ªæˆ‘ï¼›<br>ç¬¬äºŒï¼šå–„äºåæ€,å¯¹äºè¿™æ¬¡é¢è¯•ç»éªŒè¦è®¤çœŸæ€»ç»“,æ€è€ƒå‰–æ,èƒ½å¤Ÿä»è‡ªèº«çš„è§’åº¦æ‰¾å·®è·ã€‚æ­£ç¡®å¯¹å¾…è‡ªå·±,å®äº‹æ±‚æ˜¯åœ°è¯„ä»·è‡ªå·±,è¾©è¯çš„çœ‹å¾…è‡ªå·±çš„é•¿çŸ­å¾—å¤±,åšä¸€ä¸ªæ˜ç™½äººï¼›<br>ç¬¬ä¸‰ï¼šèµ°å‡ºé˜´å½±,è¦å…‹æœè¿™ä¸€æ¬¡å¤±è´¥å¸¦ç»™è‡ªå·±çš„å¿ƒç†å‹åŠ›,æ—¶åˆ»ç‰¢è®°è‡ªå·±å¼±ç‚¹,é˜²æ‚£äºæœªç„¶,åŠ å¼ºå­¦ä¹ ,æé«˜è‡ªèº«ç´ è´¨ï¼›<br>ç¬¬å››ï¼šè®¤çœŸå·¥ä½œ,å›åˆ°åŸå•ä½å²—ä½ä¸Šå,è¦å®å®åœ¨åœ¨ã€è¸è¸å®å®åœ°å·¥ä½œ,ä¸‰åå…­è¡Œ,è¡Œè¡Œå‡ºçŠ¶å…ƒ,äº‰å–åœ¨æœ¬å²—ä½ä¸Šåšå‡ºä¸€å®šçš„æˆç»©ï¼›<br>ç¬¬äº”ï¼šå†æ¥å†å‰,æˆä¸ºä¸€åæ¶æ„å¸ˆä¸€ç›´æ˜¯æˆ‘çš„æ¢¦æƒ³,ä»¥åå¦‚æœæœ‰æœºä¼šæˆ‘ä»ç„¶åå†æ¬¡å‚åŠ ç«äº‰ã€‚</p>
</li>
<li><p>è°ˆè°ˆä½ å¯¹è·³æ§½çš„çœ‹æ³•ï¼Ÿ<br>æ­£å¸¸çš„â€è·³æ§½â€èƒ½ä¿ƒè¿›äººæ‰åˆç†æµåŠ¨ï¼Œåº”è¯¥æ”¯æŒï¼›<br>é¢‘ç¹çš„è·³æ§½å¯¹å•ä½å’Œä¸ªäººåŒæ–¹éƒ½ä¸åˆ©ï¼Œåº”è¯¥åå¯¹ã€‚</p>
</li>
<li><p>ä½ èƒ½ä¸ºæˆ‘ä»¬å…¬å¸å¸¦æ¥ä»€ä¹ˆå‘¢ï¼Ÿ<br>å‡å¦‚ä½ å¯ä»¥çš„è¯ï¼Œè¯•ç€å‘Šè¯‰ä»–ä»¬ä½ å¯ä»¥å‡ä½ä»–ä»¬çš„è´¹ç”¨â€”â€”â€œæˆ‘å·²ç»æ¥å—è¿‡æƒ æ™®å…¬å¸ä¸€æ®µæ—¶é—´çš„åŸ¹è®­ï¼Œç«‹åˆ»å°±å¯ä»¥ä¸Šå²—å·¥ä½œâ€ã€‚<br>ä¼ä¸šå¾ˆæƒ³çŸ¥é“æœªæ¥çš„å‘˜å·¥èƒ½ä¸ºä¼ä¸šåšä»€ä¹ˆï¼Œæ±‚èŒè€…åº”å†æ¬¡é‡å¤è‡ªå·±çš„ä¼˜åŠ¿ï¼Œç„¶åè¯´ï¼šâ€œå°±æˆ‘çš„èƒ½åŠ›ï¼Œæˆ‘å¯ä»¥åšä¸€ä¸ªä¼˜ç§€çš„å‘˜å·¥åœ¨ç»„ç»‡ä¸­å‘æŒ¥èƒ½åŠ›ï¼Œç»™ç»„ç»‡å¸¦æ¥é«˜æ•ˆç‡å’Œæ›´å¤šçš„æ”¶ç›Šâ€ã€‚ä¼ä¸šå–œæ¬¢æ±‚èŒè€…å°±ç”³è¯·çš„èŒä½è¡¨æ˜è‡ªå·±çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ç”³è¯·è¥é”€ä¹‹ç±»çš„èŒä½ï¼Œå¯ä»¥è¯´ï¼šâ€œæˆ‘å¯ä»¥å¼€å‘å¤§é‡çš„æ–°å®¢æˆ·ï¼ŒåŒæ—¶ï¼Œå¯¹è€å®¢æˆ·åšæ›´å…¨é¢å‘¨åˆ°çš„æœåŠ¡ï¼Œå¼€å‘è€å®¢æˆ·çš„æ–°éœ€æ±‚å’Œæ¶ˆè´¹ã€‚â€ç­‰ç­‰ã€‚</p>
</li>
<li><p>ä½ çš„ä¸šä½™çˆ±å¥½æ˜¯ä»€ä¹ˆï¼Ÿ<br>æˆ‘å–œæ¬¢è¶³çƒï¼Œæˆ‘äº«å—å’Œæˆ‘çš„é˜Ÿå‹ä¸€èµ·æ‹¼å°½å…¨åŠ›ï¼Œäº’ç›¸ä¿¡ä»»ï¼Œæ— è®ºè¾“èµ¢ä¸€èµ·å…±è¿›é€€ã€‚åœ¨è¶³çƒæ¯”èµ›ä¸­ï¼Œä¸€ä¸ªå›¢é˜Ÿçš„æˆåŠŸä¸ä»…ä»…å–å†³äºä¸ªåˆ«çƒå‘˜çš„æŠ€æœ¯æ°´å¹³ï¼Œæ›´é‡è¦çš„æ˜¯æ•´ä¸ªå›¢é˜Ÿçš„ååŒåˆä½œã€æ²Ÿé€šå’Œç›¸äº’ç†è§£ã€‚ï¼ˆå›ç­”æç¤ºï¼šæ‰¾ä¸€äº›å¯Œäºå›¢ä½“åˆä½œç²¾ç¥çš„ï¼‰</p>
</li>
<li><p>æœ€å–œæ¬¢çš„åæœ¬ä¹¦ï¼Ÿ</p>
<ol>
<li>ã€Šä¸‰ä½“ã€‹- åˆ˜æ…ˆæ¬£</li>
<li>ã€Šæ´»ç€ã€‹- ä½™å</li>
<li>ã€Šå›´åŸã€‹- é’±é’Ÿä¹¦</li>
<li>ã€Š1984ã€‹- ä¹”æ²»Â·å¥¥å¨å°”</li>
<li>ã€ŠåŠ¨ç‰©å†œåœºã€‹- ä¹”æ²»Â·å¥¥å¨å°”</li>
<li>ã€Šç™½å¤œè¡Œã€‹- ä¸œé‡åœ­å¾</li>
<li>ã€Šçª—è¾¹çš„å°è±†è±†ã€‹- é»‘æŸ³å½»å­</li>
<li>ã€Šè‹è²çš„ä¸–ç•Œã€‹- ä¹”æ–¯å¦Â·è´¾å¾·</li>
<li>ã€Šæ°´æµ’ä¼ ã€‹- æ–½è€åºµ</li>
<li>ã€Šçº¢æ¥¼æ¢¦ã€‹- æ›¹é›ªèŠ¹</li>
</ol>
</li>
<li><p>ä½œä¸ºè¢«é¢è¯•è€…ç»™æˆ‘æ‰“ä¸€ä¸‹åˆ†<br>â€œæˆ‘è®¤ä¸ºåœ¨è¿™æ¬¡é¢è¯•ä¸­ï¼Œæˆ‘æœ‰æœºä¼šæ·±å…¥äº†è§£å…¬å¸ï¼Œå¹¶ä¸”å¾ˆé«˜å…´èƒ½å¤Ÿåˆ†äº«æˆ‘çš„ç»éªŒå’Œèƒ½åŠ›ã€‚<br>é¢è¯•å®˜æå‡ºçš„é—®é¢˜æ¶‰åŠåˆ°æˆ‘çš„ä¸“ä¸šé¢†åŸŸå’Œä¸å…¬å¸æ–‡åŒ–ç›¸å…³çš„æ–¹é¢ï¼Œè¿™è®©æˆ‘æ„Ÿåˆ°è¿™æ¬¡é¢è¯•éå¸¸æœ‰ä»·å€¼ã€‚æˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æœºä¼šï¼Œå±•ç¤ºäº†æˆ‘ä¸å…¬å¸çš„åŒ¹é…åº¦ï¼ŒåŒæ—¶ä¹Ÿè®©æˆ‘æ›´æ·±å…¥åœ°äº†è§£äº†è´µå…¬å¸çš„æœŸæœ›å’Œæ–‡åŒ–ã€‚<br>æˆ‘æœŸå¾…ç€æœ‰æœºä¼šä¸ºå…¬å¸åšå‡ºç§¯æçš„è´¡çŒ®ï¼Œå¦‚æœæœ‰è¿›ä¸€æ­¥çš„æœºä¼šï¼Œæˆ‘å°†éå¸¸æ„¿æ„æ·±å…¥æ¢è®¨æˆ‘å¦‚ä½•èƒ½å¤Ÿåœ¨å…¬å¸ä¸­è“¬å‹ƒå‘å±•ã€‚â€<br>ï¼ˆå›ç­”æç¤ºï¼šè¯•ç€åˆ—å‡ºå››ä¸ªä¼˜ç‚¹å’Œä¸€ä¸ªéå¸¸éå¸¸éå¸¸å°çš„ç¼ºç‚¹ï¼Œï¼Œå¯ä»¥æŠ±æ€¨ä¸€ä¸‹è®¾æ–½ï¼Œæ²¡æœ‰æ˜ç¡®è´£ä»»äººçš„ç¼ºç‚¹æ˜¯ä¸ä¼šæœ‰äººä»‹æ„çš„ï¼‰</p>
</li>
<li><p>å–œæ¬¢è¿™ä»½å·¥ä½œçš„å“ªä¸€ç‚¹ï¼Ÿ<br>ï¼Ÿï¼Ÿï¼Ÿ<br>åœ¨å›ç­”é¢è¯•å®˜è¿™ä¸ªé—®é¢˜æ—¶å¯ä¸èƒ½å¤ªç›´æ¥å°±æŠŠè‡ªå·±å¿ƒç†çš„è¯è¯´å‡ºæ¥ï¼Œå°¤å…¶æ˜¯è–ªèµ„æ–¹é¢çš„é—®é¢˜ï¼Œä¸è¿‡ä¸€äº›æ— ä¼¤å¤§é›…çš„å›ç­”æ˜¯ä¸é”™çš„è€ƒè™‘ï¼Œå¦‚äº¤é€šæ–¹ä¾¿ï¼Œå·¥ä½œæ€§è´¨åŠå†…å®¹é¢‡èƒ½ç¬¦åˆè‡ªå·±çš„å…´è¶£ç­‰ç­‰éƒ½æ˜¯ä¸é”™çš„ç­”æ¡ˆï¼Œä¸è¿‡å¦‚æœè¿™æ—¶è‡ªå·±èƒ½ä»”ç»†æ€è€ƒå‡ºè¿™ä»½å·¥ä½œçš„ä¸ä¼—ä¸åŒä¹‹å¤„ï¼Œç›¸ä¿¡åœ¨é¢è¯•ä¸Šä¼šå¤§å¤§åŠ åˆ†ã€‚</p>
</li>
<li><p>è¯´è¯´ä½ çš„å®¶åº­ã€‚<br>ï¼ˆä¼ä¸šä¸å–œæ¬¢æ¢ç©¶ä¸ªäººéšç§ï¼Œè€Œæ˜¯è¦äº†è§£å®¶åº­èƒŒæ™¯å¯¹æ±‚èŒè€…çš„å¡‘é€ å’Œå½±å“ã€‚ä¼ä¸šå¸Œæœ›å¬åˆ°çš„é‡ç‚¹ä¹Ÿåœ¨äºå®¶åº­å¯¹æ±‚èŒè€…çš„ç§¯æå½±å“ã€‚ä¼ä¸šæœ€å–œæ¬¢å¬åˆ°çš„æ˜¯ï¼šï¼‰<br>æˆ‘çš„å®¶åº­ä¸€å‘å¾ˆå’Œç¦ï¼Œè™½ç„¶æˆ‘çš„çˆ¶äº²å’Œæ¯äº²éƒ½æ˜¯æ™®é€šäººï¼Œä½†æ˜¯ä»å°ï¼Œæˆ‘å°±çœ‹åˆ°çˆ¶æ¯ä¸ºäº†å®¶åº­èµ·æ—©è´ªé»‘ï¼Œæ¯å¤©å‹¤åŠ³å·¥ä½œï¼Œä»–çš„è¡ŒåŠ¨æ— å½¢ä¸­åŸ¹å…»äº†æˆ‘è®¤çœŸè´Ÿè´£çš„æ€åº¦å’Œå‹¤åŠ³çš„ç²¾ç¥ã€‚ä»–ä»¬ä¹Ÿæ•™è‚²æˆ‘å¯¹äººè¯šå®ã€å‹å–„ï¼Œè¦ä¹äºåŠ©äººã€‚</p>
</li>
<li><p>å°±ä½ ç”³è¯·çš„è¿™ä¸ªèŒä½ï¼Œä½ è®¤ä¸ºä½ è¿˜æ¬ ç¼ºä»€ä¹ˆï¼Ÿ<br>å›ç­”å»ºè®®ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼šä¼ä¸šå–œæ¬¢é—®æ±‚èŒè€…å¼±ç‚¹ï¼Œä½†ç²¾æ˜çš„æ±‚èŒè€…ä¸€èˆ¬ä¸ç›´æ¥å›ç­”ã€‚ä»–ä»¬å¸Œæœ›çœ‹åˆ°è¿™æ ·çš„æ±‚èŒè€…ï¼šç»§ç»­é‡å¤è‡ªå·±çš„ä¼˜åŠ¿ï¼Œç„¶åè¯´ï¼šâ€œå¯¹äºè¿™ä¸ªèŒä½å’Œæˆ‘çš„èƒ½åŠ›æ¥è¯´ï¼Œæˆ‘ç›¸ä¿¡è‡ªå·±æ˜¯å¯ä»¥èƒœä»»çš„ï¼Œåªæ˜¯ç¼ºä¹ç»éªŒï¼Œè¿™ä¸ªé—®é¢˜æˆ‘æƒ³æˆ‘å¯ä»¥è¿›å…¥å…¬å¸ä»¥åä»¥æœ€çŸ­çš„æ—¶é—´æ¥è§£å†³ï¼Œæˆ‘çš„å­¦ä¹ èƒ½åŠ›å¾ˆå¼ºï¼Œæˆ‘ç›¸ä¿¡å¯ä»¥å¾ˆå¿«èå…¥å…¬å¸çš„ä¼ä¸šæ–‡åŒ–ï¼Œè¿›å…¥å·¥ä½œçŠ¶æ€ã€‚â€<br>ä¼ä¸šå–œæ¬¢èƒ½å¤Ÿå·§å¦™åœ°èº²è¿‡éš¾é¢˜çš„æ±‚èŒè€…ã€‚</p>
</li>
<li><p>ä½ æ¬£èµå“ªç§æ€§æ ¼çš„äººï¼Ÿ<br>è¯šå®ã€ä¸æ­»æ¿è€Œä¸”å®¹æ˜“ç›¸å¤„çš„äººã€æœ‰â€å®é™…è¡ŒåŠ¨â€çš„äººã€‚</p>
</li>
<li><p>ä½ é€šå¸¸å¦‚ä½•å¤„ç†åˆ¥äººçš„æ‰¹è¯„ï¼Ÿ<br>æ²ˆé»˜æ˜¯é‡‘ã€‚ä¸å¿…è¯´ä»€ä¹ˆï¼Œå¦åˆ™æƒ…å†µæ›´ç³Ÿï¼Œä¸è¿‡æˆ‘ä¼šæ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„ï¼› æˆ‘ä¼šç­‰å¤§å®¶å†·éœä¸‹æ¥å†è®¨è®ºã€‚</p>
</li>
<li><p>ä½ æ€æ ·å¯¹å¾…è‡ªå·±çš„å¤±æ•—ï¼Ÿ<br>æˆ‘ä»¬å¤§å®¶ç”Ÿæ¥éƒ½ä¸æ˜¯åå…¨åç¾çš„ï¼Œæˆ‘ç›¸ä¿¡æˆ‘æœ‰ç¬¬äºŒä¸ªæœºä¼šæ”¹æ­£æˆ‘çš„é”™è¯¯ã€‚</p>
</li>
<li><p>ä½ å’Œåˆ«äººå‘ç”Ÿè¿‡äº‰æ‰§å—ï¼Ÿä½ æ˜¯æ€æ ·è§£å†³çš„ï¼Ÿ<br>ï¼ˆåƒä¸‡ä¸è¦è¯´ä»»ä½•äººçš„è¿‡é”™ã€‚åº”çŸ¥æˆåŠŸè§£å†³çŸ›ç›¾æ˜¯ä¸€ä¸ªåä½œå›¢ä½“ä¸­æˆå‘˜æ‰€å¿…å¤‡çš„èƒ½åŠ›ã€‚è€ƒå®˜å¸Œæœ›çœ‹åˆ°ä½ æ˜¯æˆç†Ÿä¸”ä¹äºå¥‰çŒ®çš„ã€‚ä»–ä»¬é€šè¿‡è¿™ä¸ªé—®é¢˜äº†è§£ä½ çš„æˆç†Ÿåº¦å’Œå¤„ä¸–èƒ½åŠ›ã€‚ï¼‰<br>åœ¨æ²¡æœ‰å¤–ç•Œå¹²æ¶‰çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å¦¥åçš„æ–¹å¼è§£å†³ã€‚</p>
</li>
<li><p>ä¸ºäº†åšå¥½ä½ å·¥ä½œä»½å¤–ä¹‹äº‹ï¼Œä½ è¯¥æ€æ ·è·å¾—ä»–äººçš„æ”¯æŒå’Œå¸®åŠ©ï¼Ÿ<br>ï¼Ÿï¼Ÿï¼Ÿ</p>
</li>
<li><p>é¡¹ç›®ä¸­é‡åˆ°å›°éš¾ï¼Œä½ æ€ä¹ˆåŠï¼Ÿæ€ä¹ˆå›ç­”<br>ï¼Ÿï¼Ÿï¼Ÿ<br>ç¬¬ä¸€ç§è¿™ä¸ªè¦æ‰¾é¡¹ç›®è´Ÿè´£äººå•†é‡ã€ç”šè‡³è¦æ‰¾äº§å“&#x2F;è¿è¡Œæˆ–å…¶ä»–ç”²æ–¹æ²Ÿé€šã€<br>ç¬¬äºŒç§æ™®éæŠ€æœ¯éš¾ç‚¹çš„è¯ã€å‚è€ƒèµ„æ–™æˆ–è€…å’Œé¡¹ç›®è´Ÿè´£äººå•†é‡çœ‹çœ‹æ€ä¹ˆåŠã€<br>ç¬¬ä¸‰ç§çš„è¯ã€å…ˆè‡ªå·±æŸ¥èµ„æ–™è¯•ç€è§£å†³ã€ä¸è¡Œå°±æ‰¾äººå…¶ä»–èµ„è®¯ã€ã€</p>
</li>
<li><p>æ„å‘åŸå¸‚ï¼Œäººç”Ÿå‘å±•ï¼ˆä»¥æé«˜è‡ªå·±ä¸ºä¸»ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¥½çš„ç¯å¢ƒï¼‰</p>
</li>
<li><p><strong>å‹è–ª</strong>ï¼šå¦‚æœå·¥èµ„è¾¾ä¸åˆ°æ‚¨çš„é¢„æœŸï¼Œè¿˜æ¥å—ï¼Ÿ<br>1ã€æ„Ÿè°¢hråœ¨é¢è¯•è¿™å‡ è½®çš„å·¥ä½œå’Œæ—¶é—´<br>2ã€æˆ‘æ„Ÿè§‰å…¶å®å¾ˆé€‚åˆè¿™ä¸ªå²—ä½äº†ï¼ˆæˆ‘å°±æ˜¯å…¬å¸éœ€è¦çš„äººï¼Œä¸è¦å‹æˆ‘å·¥èµ„å®Œæˆä½ çš„kpi<br>3ã€ä¸ç®¡ç»“æœå¦‚ä½•ï¼Œå¸Œæœ›æ‚¨èƒ½å¤Ÿå†å¸®æˆ‘äº‰å–ä¸€ä¸‹ï¼ˆæˆ‘ä¹Ÿå’Œï¼Œï¼Œæ‰“æ‰“æ‹›å‘¼ï¼Œè¡¨è¾¾è¯šæ„ï¼Œä¸è®©æ‚¨è¿™è¾¹ä¸ºéš¾ï¼Ÿ<br>ä¸ç›´æ¥å›ç­”ï¼Œåªè¡¨è¾¾å¸Œæœ›hrèƒ½å¸®æˆ‘äº‰å–ï¼Œä¸ä¿è¯æ¥ä¸æ¥offerï¼Ÿï¼Ÿ</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/10/13/%E9%9D%A2%E8%AF%95_%E4%B8%AA%E4%BA%BA/" data-id="cmjzvj9mi000yhgv52xf5hsnj" data-title="é¢ é€ | ä¸ªäºº" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-é¢è¯•_Java" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/12/%E9%9D%A2%E8%AF%95_Java/" class="article-date">
  <time class="dt-published" datetime="2023-10-12T03:11:00.000Z" itemprop="datePublished">2023-10-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/12/%E9%9D%A2%E8%AF%95_Java/">é¢ é€ | Java</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><ul>
<li><p>ä»€ä¹ˆæ˜¯B&#x2F;Sæ¶æ„ï¼ŒC&#x2F;Sæ¶æ„ï¼ŸJavaéƒ½æœ‰é‚£äº›å¼€å‘å¹³å°ï¼Ÿ</p>
<ol>
<li>B&#x2F;S(Browser&#x2F;Server)ï¼Œæµè§ˆå™¨&#x2F;æœåŠ¡å™¨ç¨‹åº</li>
<li>C&#x2F;S(Client&#x2F;Server)ï¼Œå®¢æˆ·ç«¯&#x2F;æœåŠ¡ç«¯ï¼Œæ¡Œé¢åº”ç”¨ç¨‹åº</li>
<li>JAVA SEï¼šä¸»è¦ç”¨åœ¨å®¢æˆ·ç«¯å¼€å‘</li>
<li>JAVA EEï¼šä¸»è¦ç”¨åœ¨webåº”ç”¨ç¨‹åºå¼€å‘</li>
<li>JAVA MEï¼šä¸»è¦ç”¨åœ¨åµŒå…¥å¼åº”ç”¨ç¨‹åºå¼€å‘</li>
</ol>
</li>
<li><p>JDK, JRE, JVMï¼Ÿ<br><strong>JDKï¼ˆJava Development Kitï¼‰ï¼š</strong>JDKæ˜¯Javaå¼€å‘å·¥å…·åŒ…ï¼Œå®ƒæ˜¯Javaå¼€å‘çš„å®Œæ•´å·¥å…·é›†ï¼ŒåŒ…æ‹¬äº†Javaç¼–è¯‘å™¨ï¼ˆjavacï¼‰ã€Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ã€Javaç±»åº“ç­‰ã€‚ä¸»è¦ç”¨äºJavaåº”ç”¨ç¨‹åºçš„å¼€å‘ï¼Œæä¾›äº†å¼€å‘ã€ç¼–è¯‘ã€è°ƒè¯•å’Œè¿è¡ŒJavaç¨‹åºæ‰€éœ€çš„å·¥å…·ã€‚<br><strong>JREï¼ˆJava Runtime Environmentï¼‰ï¼š</strong>JREæ˜¯Javaè¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒæ˜¯Javaåº”ç”¨ç¨‹åºæ‰§è¡Œçš„ç¯å¢ƒï¼ŒåŒ…å«äº†Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰å’ŒJavaç±»åº“ã€‚ç”¨äºåœ¨è®¡ç®—æœºä¸Šè¿è¡Œå·²ç»ç¼–è¯‘è¿‡çš„Javaåº”ç”¨ç¨‹åºï¼Œä½†ä¸åŒ…å«ç”¨äºJavaå¼€å‘çš„å·¥å…·ï¼Œå¦‚ç¼–è¯‘å™¨ã€‚<br><strong>JVMï¼ˆJava Virtual Machineï¼‰ï¼š</strong>JVMæ˜¯Javaè™šæ‹Ÿæœºï¼Œæ˜¯ä¸€ä¸ªåœ¨ç‰©ç†è®¡ç®—æœºä¸Šæ¨¡æ‹Ÿè¿è¡ŒJavaå­—èŠ‚ç ï¼ˆ.classï¼‰çš„è™šæ‹Ÿæœºã€‚è´Ÿè´£è§£é‡Šå’Œæ‰§è¡ŒJavaå­—èŠ‚ç ï¼Œé€šè¿‡ä¸åŒæ“ä½œç³»ç»Ÿä¸Šçš„ JVM è§£é‡Šä¸ºè¯¥æ“ä½œç³»ç»Ÿçš„æœºå™¨æŒ‡ä»¤ï¼Œä½¿å¾—Javaç¨‹åºèƒ½å¤Ÿåœ¨ä¸åŒçš„å¹³å°ä¸Šå®ç°ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œçš„è·¨å¹³å°ç‰¹æ€§ã€‚</p>
</li>
<li><p>Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ</p>
<ol>
<li>ç®€å•æ˜“å­¦ã€æœ‰ä¸°å¯Œçš„ç±»åº“</li>
<li>é¢å‘å¯¹è±¡ OOPï¼ˆJavaæœ€é‡è¦çš„ç‰¹æ€§ï¼Œè®©ç¨‹åºè€¦åˆåº¦æ›´ä½ï¼Œå†…èšæ€§æ›´é«˜ï¼‰<br>  ç±»æ˜¯å¯¹è±¡çš„æŠ½è±¡ï¼Œå¯¹è±¡æ˜¯ç±»çš„å…·ä½“ï¼Œç±»æ˜¯å¯¹è±¡çš„æ¨¡æ¿ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹</li>
<li>ä¸å¹³å°æ— å…³æ€§ï¼ˆJVMæ˜¯Javaè·¨å¹³å°ä½¿ç”¨çš„æ ¹æœ¬ï¼‰</li>
<li>å¯é å®‰å…¨</li>
<li>æ”¯æŒå¤šçº¿ç¨‹</li>
</ol>
</li>
<li><p>ä¸€ä¸ªjavaç±»ä¸­åŒ…å«é‚£äº›å†…å®¹ï¼Ÿ<br>å±æ€§ã€æ–¹æ³•ã€å†…éƒ¨ç±»ã€æ„é€ æ–¹æ³•ã€ä»£ç å—ã€‚</p>
</li>
<li><p>æ•°æ®ç»“æ„ï¼ŸJavaçš„æ•°æ®ç»“æ„æœ‰é‚£äº›ï¼ŸJavaä¸­æœ‰å‡ ç§æ•°æ®ç±»å‹ï¼Ÿ<br>æ•°æ®ç»“æ„ï¼šè®¡ç®—æœºä¿å­˜ï¼Œç»„ç»‡æ•°æ®çš„æ–¹å¼<br>javaä¸­æ•°æ®ç»“æ„æœ‰ï¼š1.çº¿æ€§è¡¨ 2.é“¾è¡¨ 3.æ ˆ 4.é˜Ÿåˆ— 5.å›¾ 6.æ ‘<br>æ•°æ®ç±»å‹æœ‰ï¼Œæ•´å½¢ï¼šbyte,short,int,longï¼›æµ®ç‚¹å‹ï¼šfloat,doubleï¼›å­—ç¬¦å‹ï¼šcharï¼›å¸ƒå°”å‹ï¼šboolean</p>
</li>
<li><p>float å’Œ double.<br>  ä¸¤ç§ç”¨äºè¡¨ç¤ºæµ®ç‚¹æ•°çš„æ•°æ®ç±»å‹ã€‚å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºç²¾åº¦å’Œå­˜å‚¨å¤§å°ã€‚</p>
<ul>
<li>floatæ˜¯ä¸€ç§å•ç²¾åº¦æµ®ç‚¹æ•°æ•°æ®ç±»å‹ï¼Œé€šå¸¸ç”¨äºéœ€è¦å°æ•°ç‚¹çš„è®¡ç®—ï¼Œä½†å®ƒä¸å¦‚doubleç±»å‹ç²¾ç¡®ã€‚floatç±»å‹æœ‰7ä½åè¿›åˆ¶æœ‰æ•ˆæ•°å­—ï¼Œå¹¶ä¸”å®ƒçš„å­˜å‚¨å¤§å°æ˜¯32ä½ï¼ˆ4å­—èŠ‚ï¼‰ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> <span class="variable">myFloat</span> <span class="operator">=</span> <span class="number">3.14f</span>; <span class="comment">// æ³¨æ„ &#x27;f&#x27;æˆ–F åç¼€ï¼Œå¼ºåˆ¶Javaç¼–è¯‘å™¨å°†å…¶è¯†åˆ«ä¸ºfloatç±»å‹ï¼Œå¦åˆ™å®ƒä¼šè¢«é»˜è®¤ä¸ºdouble</span></span><br></pre></td></tr></table></figure></li>
<li>doubleæ˜¯ä¸€ç§åŒç²¾åº¦æµ®ç‚¹æ•°æ•°æ®ç±»å‹ï¼Œæ¯”floatç±»å‹æœ‰æ›´é«˜çš„ç²¾åº¦ï¼Œé€šå¸¸ç”¨äºéœ€è¦æ›´ç²¾ç¡®è®¡ç®—çš„æƒ…å†µã€‚doubleç±»å‹æœ‰15ä½åè¿›åˆ¶æœ‰æ•ˆæ•°å­—ï¼Œå¹¶ä¸”å®ƒçš„å­˜å‚¨å¤§å°æ˜¯64ä½ï¼ˆ8å­—èŠ‚ï¼‰ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">myDouble</span> <span class="operator">=</span> <span class="number">3.141592653589793</span>; <span class="comment">// ç”±äºdoubleçš„ç²¾åº¦æ›´é«˜ï¼Œè‹¥æ— åç¼€ç‰¹åˆ«æŒ‡å®šï¼ŒJavaä¸­çš„æµ®ç‚¹æ•°é»˜è®¤double</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å¦‚ä½•è§£å†³æµ®ç‚¹å‹æ•°æ®è¿ç®—å‡ºç°çš„è¯¯å·®çš„é—®é¢˜ï¼Ÿfloat f&#x3D;3.4;æ˜¯å¦æ­£ç¡®ï¼Ÿ<br>ä½¿ç”¨ <code>Bigdecimalç±»</code> è¿›è¡Œæµ®ç‚¹å‹æ•°æ®çš„è¿ç®—ã€‚<br>3.4 æ˜¯åŒç²¾åº¦æ•°ï¼ˆdoubleï¼‰ï¼Œå°† double èµ‹å€¼ç»™ float å±äºä¸‹è½¬å‹ï¼ˆdown-castingï¼Œä¹Ÿç§°ä¸ºçª„åŒ–ï¼‰ä¼šé€ æˆç²¾åº¦æŸå¤±ï¼Œå› æ­¤éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ float f &#x3D;(float)3.4; æˆ– float f &#x3D;3.4F</p>
</li>
<li><p>short s1 &#x3D; 1; s1 &#x3D; s1 + 1;æœ‰é”™å—ï¼Ÿshort s1 &#x3D; 1; s1 +&#x3D; 1; æœ‰é”™å—ï¼Ÿ<br>å¯¹äº short s1 &#x3D; 1; s1 &#x3D; s1 + 1;ç”±äº 1 æ˜¯ int ç±»å‹ï¼Œå› æ­¤ s1+1 è¿ç®—ç»“æœä¹Ÿæ˜¯ int å‹ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢ç±»å‹æ‰èƒ½èµ‹å€¼ç»™ short å‹ã€‚<br>è€Œ short s1 &#x3D;1; s1 +&#x3D; 1;å¯æ­£ç¡®ç¼–è¯‘ï¼Œå› ä¸º s1+&#x3D; 1;ç›¸å½“äº s1 &#x3D; (short)(s1 + 1);å…¶ä¸­æœ‰éšå«çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p>
</li>
<li><p>int i &#x3D; 0; count &#x3D; (i++)+ (i++)+ (i++); å€¼ä¸ºï¼Ÿ<br>count &#x3D; 0 + 1 + 2 &#x3D; 3</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯éšå¼è½¬æ¢ï¼Œä»€ä¹ˆæ˜¯æ˜¾å¼è½¬æ¢ï¼ŸCharç±»å‹èƒ½ä¸èƒ½è½¬æˆintç±»å‹ï¼Œstringç±»å‹ï¼Œdoubleç±»å‹ï¼Ÿ<br>æ˜¾ç¤ºè½¬æ¢å°±æ˜¯ç±»å‹å¼ºè½¬ï¼ŒæŠŠä¸€ä¸ªå¤§ç±»å‹çš„æ•°æ®å¼ºåˆ¶èµ‹å€¼ç»™å°ç±»å‹çš„æ•°æ®ï¼›éšå¼è½¬æ¢å°±æ˜¯å¤§èŒƒå›´çš„å˜é‡èƒ½å¤Ÿæ¥å—å°èŒƒå›´çš„æ•°æ®ï¼›éšå¼è½¬æ¢å’Œæ˜¾å¼è½¬æ¢å…¶å®å°±æ˜¯è‡ªåŠ¨ç±»å‹è½¬æ¢å’Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚<br>Char &lt; int &lt; long &lt; float &lt; doubleï¼›Charç±»å‹å¯ä»¥éšå¼è½¬æˆint,doubleç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½éšå¼è½¬æ¢æˆstringï¼›å¦‚æœcharç±»å‹è½¬æˆbyteï¼Œshortç±»å‹çš„æ—¶å€™ï¼Œéœ€è¦å¼ºè½¬ã€‚</p>
</li>
<li><p>char å‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜è´®ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Ÿ<br>å¯ä»¥ï¼Œå› ä¸º  Java ä¸­ä½¿ç”¨çš„ç¼–ç æ˜¯ Unicodeï¼ˆä¸é€‰æ‹©ä»»ä½•ç‰¹å®šçš„ç¼–ç ï¼Œç›´æ¥ä½¿ç”¨å­—ç¬¦åœ¨å­—ç¬¦é›†ä¸­çš„ç¼–å·ï¼Œè¿™æ˜¯ç»Ÿä¸€çš„å”¯ä¸€æ–¹æ³•ï¼‰ï¼Œä¸€ä¸ª char ç±»å‹å  2 ä¸ªå­—èŠ‚ï¼ˆ16 æ¯”ç‰¹ï¼‰ï¼Œæ‰€ä»¥æ”¾ä¸€ä¸ªä¸­æ–‡æ˜¯æ²¡é—®é¢˜çš„ã€‚<br>è¡¥å……ï¼šä½¿ç”¨ Unicode æ„å‘³ç€å­—ç¬¦åœ¨  JVM å†…éƒ¨å’Œå¤–éƒ¨æœ‰ä¸åŒçš„è¡¨ç°å½¢å¼ï¼Œåœ¨  JVMå†…éƒ¨éƒ½æ˜¯ Unicodeï¼Œå½“è¿™ä¸ªå­—ç¬¦è¢«ä»  JVM å†…éƒ¨è½¬ç§»åˆ°å¤–éƒ¨æ—¶ï¼ˆä¾‹å¦‚å­˜å…¥æ–‡ä»¶ç³»ç»Ÿä¸­ï¼‰ï¼Œéœ€è¦è¿›è¡Œç¼–ç è½¬æ¢ã€‚æ‰€ä»¥  Java ä¸­æœ‰å­—èŠ‚æµå’Œå­—ç¬¦æµï¼Œä»¥åŠåœ¨å­—ç¬¦æµå’Œå­—èŠ‚æµä¹‹é—´è¿›è¡Œè½¬æ¢çš„è½¬æ¢æµï¼Œå¦‚InputStreamReader å’Œ OutputStreamReaderï¼Œè¿™ä¸¤ä¸ªç±»æ˜¯å­—èŠ‚æµå’Œå­—ç¬¦æµä¹‹é—´çš„é€‚é…å™¨ç±»ï¼Œæ‰¿æ‹…äº†ç¼–ç è½¬æ¢çš„ä»»åŠ¡ï¼›å¯¹äº C ç¨‹åºå‘˜æ¥è¯´ï¼Œè¦å®Œæˆè¿™æ ·çš„ç¼–ç è½¬æ¢ææ€•è¦ä¾èµ–äº unionï¼ˆè”åˆä½“&#x2F;å…±ç”¨ä½“ï¼‰å…±äº«å†…å­˜çš„ç‰¹å¾æ¥å®ç°äº†ã€‚</p>
</li>
<li><p>æ•°ç»„åœ¨javaä¸­æ˜¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹å—ï¼Ÿå¼•ç”¨ç±»å‹ï¼Ÿ<br>åœ¨Javaä¸­ï¼Œæ•°ç»„ï¼ˆArrayï¼‰æ˜¯ä¸€ç§å¼•ç”¨ç±»å‹ï¼Œè€Œä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åˆ›å»ºæ•°ç»„ï¼šint[] numbers &#x3D; new int[5];<br>è¿™é‡Œï¼Œnumbersæ˜¯ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼ŒæŒ‡å‘ä¸€ä¸ªåŒ…å«5ä¸ªintç±»å‹å…ƒç´ çš„æ•°ç»„å¯¹è±¡ã€‚è¿™ä¸ªæ•°ç»„å¯¹è±¡æœ¬èº«ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯å¼•ç”¨ç±»å‹ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯intç±»å‹ï¼‰æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼Ÿ</p>
<ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹ï¼šæ˜¯ç¼–ç¨‹è¯­è¨€ä¸­å†…ç½®çš„ç®€å•æ•°æ®ç±»å‹ï¼Œç”¨äºç›´æ¥å­˜å‚¨å…·ä½“çš„å€¼ã€‚è¿™äº›å€¼é€šå¸¸æ˜¯ä¸å¯å˜çš„ï¼Œå³ä¸€æ—¦èµ‹å€¼ï¼Œå°±ä¸èƒ½æ”¹å˜å®ƒä»¬çš„ç±»å‹ã€‚åŸºæœ¬æ•°æ®ç±»å‹é€šå¸¸åŒ…æ‹¬æ•´å½¢ï¼šbyte,short,int,longï¼›æµ®ç‚¹å‹ï¼šfloat,doubleï¼›å­—ç¬¦å‹ï¼šcharï¼›å¸ƒå°”å‹ï¼šbooleanã€‚åœ¨Javaä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹æ˜¯ç›´æ¥å­˜å‚¨å€¼çš„ï¼Œå®ƒä»¬å ç”¨çš„å†…å­˜ç©ºé—´æ˜¯å›ºå®šçš„ï¼Œä¸”ä¸ä¼šå¼•ç”¨å…¶ä»–å¯¹è±¡ã€‚</li>
<li>å¼•ç”¨ç±»å‹ï¼šä¸åŸºæœ¬æ•°æ®ç±»å‹ç›¸å¯¹ï¼Œå®ƒä»¬ä¸ç›´æ¥å­˜å‚¨å€¼ï¼Œè€Œæ˜¯å­˜å‚¨å¯¹å†…å­˜ä¸­å¯¹è±¡çš„å¼•ç”¨ã€‚è¿™æ„å‘³ç€ï¼Œå¼•ç”¨ç±»å‹çš„å˜é‡å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å­˜å‚¨åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡ï¼ˆå¦‚æ•°ç»„ã€ç±»ã€æ¥å£ç­‰ï¼‰æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨å†…å­˜ä¸­åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å˜é‡è®¾ç½®ä¸ºæŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚å¼•ç”¨ç±»å‹åŒ…æ‹¬ç±»ï¼ˆClassï¼‰ã€æ¥å£ï¼ˆInterfaceï¼‰ã€æ•°ç»„ï¼ˆArrayï¼‰ç­‰ã€‚</li>
</ul>
</li>
<li><p>Java ä¸­å˜é‡æ˜¯â€œå€¼ä¼ é€’â€ è¿˜æ˜¯ â€œå¼•ç”¨ä¼ é€’â€ï¼Ÿ<br>  åœ¨Javaä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å€¼ä¼ é€’ï¼Œæ— è®ºæ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹ã€‚</p>
<ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡å­˜å‚¨çš„æ˜¯å€¼æœ¬èº«ã€‚å½“ä½ å°†ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼èµ‹ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®é™…ä¸Šæ˜¯å¤åˆ¶äº†è¿™ä¸ªå€¼ã€‚æ‰€ä»¥ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ŒJavaç¡®å®æ˜¯é€šè¿‡å€¼æ¥ä¼ é€’çš„ã€‚<br>  å½“ä¸€ä¸ªåŸºæœ¬ç±»å‹å˜é‡ä½œä¸ºæ–¹æ³•çš„å‚æ•°ä¼ é€’æ—¶ï¼Œä¼ é€’çš„æ˜¯è¯¥å˜é‡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚è¿™æ„å‘³ç€åœ¨æ–¹æ³•å†…éƒ¨å¯¹è¯¥å‰¯æœ¬æ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå½±å“åˆ°åŸå§‹å˜é‡ã€‚åŸºæœ¬ç±»å‹å˜é‡æ˜¯å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„å€¼æ˜¯ç›´æ¥å­˜å‚¨çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡å¼•ç”¨ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="type">int</span> <span class="variable">originalValue</span> <span class="operator">=</span> <span class="number">5</span>;  </span><br><span class="line">        modifyValue(originalValue);  </span><br><span class="line">        System.out.println(originalValue); <span class="comment">// è¾“å‡º 5ï¼ŒåŸå§‹å€¼æœªæ”¹å˜  </span></span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">modifyValue</span><span class="params">(<span class="type">int</span> value)</span> &#123;  </span><br><span class="line">        value = <span class="number">10</span>; <span class="comment">// è¿™é‡Œä¿®æ”¹çš„æ˜¯å‰¯æœ¬çš„å€¼  </span></span><br><span class="line">        System.out.println(value); <span class="comment">// è¾“å‡º 10ï¼Œå‰¯æœ¬çš„å€¼è¢«ä¿®æ”¹äº†  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  ä¸€æ—¦ä¸€ä¸ªåŸºæœ¬ç±»å‹å˜é‡è¢«åˆå§‹åŒ–å¹¶å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ï¼Œä½ ä¸èƒ½ç›´æ¥ä¿®æ”¹å®ƒå­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­çš„å€¼ã€‚åŸºæœ¬ç±»å‹å˜é‡æ˜¯ä¸å¯å˜çš„ï¼ˆjavaæ‰€æœ‰åŸºæœ¬ç±»å‹éƒ½ä¸å¯å˜ï¼Ÿï¼ï¼ï¼‰ï¼Œä¸€æ—¦å®ƒä»¬è¢«èµ‹å€¼ï¼Œå®ƒä»¬çš„å€¼å°±ä¸èƒ½è¢«æ”¹å˜ã€‚å¦‚æœæƒ³ä¿®æ”¹å…¶å€¼ï¼Œå¿…é¡»é‡æ–°èµ‹ä¸€ä¸ªæ–°çš„å€¼ã€‚è¿™é€šå¸¸æ˜¯é€šè¿‡å£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œæˆ–è€…é‡æ–°èµ‹å€¼ç»™åŸæ¥çš„å˜é‡æ¥å®Œæˆçš„ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">5</span>; <span class="comment">// number åˆå§‹åŒ–ä¸º 5  </span></span><br><span class="line">        System.out.println(<span class="string">&quot;Before modification: &quot;</span> + number); <span class="comment">// è¾“å‡º: Before modification: 5  </span></span><br><span class="line">        <span class="comment">// ä¿®æ”¹ number çš„å€¼  </span></span><br><span class="line">        number = <span class="number">10</span>; <span class="comment">// é‡æ–°ç»™ number èµ‹ä¸€ä¸ªæ–°çš„å€¼  </span></span><br><span class="line">        System.out.println(<span class="string">&quot;After modification: &quot;</span> + number); <span class="comment">// è¾“å‡º: After modification: 10  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å¼•ç”¨ç±»å‹çš„å˜é‡å®é™…ä¸Šå­˜å‚¨çš„æ˜¯ä¸€ä¸ªæŒ‡å‘å†…å­˜ä¸­å¯¹è±¡çš„å¼•ç”¨çš„åœ°å€ã€‚å½“ä½ å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡èµ‹ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨å¤åˆ¶è¿™ä¸ªå¼•ç”¨åœ°å€ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«ã€‚è¿™æ„å‘³ç€ä¸¤ä¸ªå˜é‡ç°åœ¨æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤ï¼Œå°½ç®¡åœ¨å¼•ç”¨ç±»å‹ä¸­ï¼Œä¼ é€’çš„æ˜¯å¼•ç”¨ï¼ˆåœ°å€ï¼‰ï¼Œä½†è¿™å¹¶ä¸ç­‰åŒäºä¼ ç»Ÿæ„ä¹‰ä¸Šçš„â€œå¼•ç”¨ä¼ é€’â€ã€‚<br>  åœ¨Javaä¸­ï¼Œå¯¹è±¡æœ¬èº«æ˜¯é€šè¿‡å †å†…å­˜æ¥å­˜å‚¨çš„ï¼Œè€Œå¼•ç”¨å˜é‡ï¼ˆå³å¯¹è±¡çš„å¼•ç”¨ï¼‰æ˜¯é€šè¿‡æ ˆå†…å­˜æ¥å­˜å‚¨çš„ã€‚å½“ä½ å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨æ ˆå†…å­˜ä¸­å¤åˆ¶äº†è¿™ä¸ªå¼•ç”¨åœ°å€ï¼Œè€Œä¸æ˜¯å¤åˆ¶äº†æ•´ä¸ªå¯¹è±¡ã€‚</li>
</ul>
</li>
<li><p>Javaåˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹å¼ï¼Ÿ</p>
<ol>
<li><strong>ä½¿ç”¨ <code>new</code> å…³é”®å­—ï¼š</strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MyClass</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br></pre></td></tr></table></figure></li>
<li><strong>é€šè¿‡åå°„æœºåˆ¶ï¼š</strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;MyClass&quot;</span>);</span><br><span class="line">    <span class="type">MyClass</span> <span class="variable">obj</span> <span class="operator">=</span> (MyClass) clazz.newInstance();</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException | InstantiationException | IllegalAccessException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>ä½¿ç”¨ <code>clone()</code> æ–¹æ³•ï¼š</strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MyClass</span> <span class="variable">original</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">MyClass</span> <span class="variable">cloned</span> <span class="operator">=</span> (MyClass) original.clone();</span><br><span class="line">&#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>é€šè¿‡ååºåˆ—åŒ–ï¼š</strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ MyClass å®ç°äº† Serializable æ¥å£</span></span><br><span class="line"><span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;object.ser&quot;</span>));</span><br><span class="line">out.writeObject(<span class="keyword">new</span> <span class="title class_">MyClass</span>());</span><br><span class="line">out.close();</span><br><span class="line"></span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;object.ser&quot;</span>));</span><br><span class="line"><span class="type">MyClass</span> <span class="variable">obj</span> <span class="operator">=</span> (MyClass) in.readObject();</span><br><span class="line">in.close();</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨åŒ¿åç±»</li>
<li>å·¥å‚æ–¹æ³•</li>
<li>ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•</li>
</ol>
</li>
<li><p>é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«ã€‚</p>
<ol>
<li>é¢å‘è¿‡ç¨‹ï¼šä¸€ç§è¾ƒæ—©çš„ç¼–ç¨‹æ€æƒ³ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è¯¥æ€æƒ³æ˜¯ç«™ç€è¿‡ç¨‹çš„è§’åº¦æ€è€ƒé—®é¢˜ï¼Œå¼ºè°ƒçš„å°±æ˜¯åŠŸèƒ½è¡Œä¸ºï¼ŒåŠŸèƒ½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå³å…ˆåé¡ºåºï¼Œè€Œæ¯ä¸€ä¸ªåŠŸèƒ½æˆ‘ä»¬éƒ½ä½¿ç”¨å‡½æ•°ï¼ˆç±»ä¼¼äºæ–¹æ³•ï¼‰æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®ç°ã€‚ä½¿ç”¨çš„æ—¶å€™ä¾æ¬¡è°ƒç”¨å‡½æ•°å°±å¯ä»¥äº†ã€‚</li>
<li>é¢å‘å¯¹è±¡ï¼šä¸€ç§åŸºäºé¢å‘è¿‡ç¨‹çš„æ–°ç¼–ç¨‹æ€æƒ³ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è¯¥æ€æƒ³æ˜¯ç«™åœ¨å¯¹è±¡çš„è§’åº¦æ€è€ƒé—®é¢˜ï¼Œæˆ‘ä»¬æŠŠå¤šä¸ªåŠŸèƒ½åˆç†æ”¾åˆ°ä¸åŒå¯¹è±¡é‡Œï¼Œå¼ºè°ƒçš„æ˜¯å…·å¤‡æŸäº›åŠŸèƒ½çš„å¯¹è±¡ã€‚<br>  å…·å¤‡æŸç§åŠŸèƒ½çš„å®ä½“ï¼Œç§°ä¸ºå¯¹è±¡ã€‚é¢å‘å¯¹è±¡æœ€å°çš„ç¨‹åºå•å…ƒæ˜¯ç±»ã€‚é¢å‘å¯¹è±¡æ›´åŠ ç¬¦åˆå¸¸è§„çš„æ€ç»´æ–¹å¼ï¼Œç¨³å®šæ€§å¥½ï¼Œå¯é‡ç”¨æ€§å¼ºï¼Œæ˜“äºå¼€å‘å¤§å‹è½¯ä»¶äº§å“ï¼Œæœ‰è‰¯å¥½çš„å¯ç»´æŠ¤æ€§ã€‚<br>  åœ¨è½¯ä»¶å·¥ç¨‹ä¸Šï¼Œé¢å‘å¯¹è±¡å¯ä»¥ä½¿å·¥ç¨‹æ›´åŠ æ¨¡å—åŒ–ï¼Œå®ç°æ›´ä½çš„è€¦åˆå’Œæ›´é«˜çš„å†…èšã€‚</li>
<li>instanceof å…³é”®å­—çš„ä½œç”¨<br>  instanceof ä¸¥æ ¼æ¥è¯´æ˜¯Javaä¸­çš„ä¸€ä¸ªåŒç›®è¿ç®—ç¬¦ï¼Œç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œç”¨æ³•ä¸ºï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> obj <span class="keyword">instanceof</span> Class</span><br></pre></td></tr></table></figure>
  å…¶ä¸­ obj ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒClass è¡¨ç¤ºä¸€ä¸ªç±»æˆ–è€…ä¸€ä¸ªæ¥å£ï¼Œå½“ obj ä¸º Class çš„å¯¹è±¡ï¼Œæˆ–è€…æ˜¯å…¶ç›´æ¥æˆ–é—´æ¥å­ç±»ï¼Œæˆ–è€…æ˜¯å…¶æ¥å£çš„å®ç°ç±»ï¼Œç»“æœresult éƒ½è¿”å› trueï¼Œå¦åˆ™è¿”å›falseã€‚æ³¨æ„ï¼šç¼–è¯‘å™¨ä¼šæ£€æŸ¥ obj æ˜¯å¦èƒ½è½¬æ¢æˆå³è¾¹çš„classç±»å‹ï¼Œå¦‚æœä¸èƒ½è½¬æ¢åˆ™ç›´æ¥æŠ¥é”™ï¼Œå¦‚æœä¸èƒ½ç¡®å®šç±»å‹ï¼Œåˆ™é€šè¿‡ç¼–è¯‘ï¼Œå…·ä½“çœ‹è¿è¡Œæ—¶å®šã€‚</li>
</ol>
</li>
<li><p><strong>å°è£…</strong>ï¼Ÿä»€ä¹ˆæ˜¯æ‹†è£…ç®±ï¼Ÿ<br>Javaé¢å‘å¯¹è±¡è¯­è¨€ï¼Œä¸€åˆ‡æ“ä½œä»¥å¯¹è±¡ä¸ºåŸºç¡€ã€‚å¯¹è±¡ä¸­å°è£…äº†å±æ€§å’Œæ“ä½œï¼Œä½¿ç”¨çµæ´»ï¼Œæ•°æ®ä¸è¢«å¤–éƒ¨ä¿®æ”¹ã€‚å°è£…ç±»åœ¨å¤„ç†é›†åˆã€æ³›å‹ã€åå°„ç­‰åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚<br>è£…ç®±å°±æ˜¯è‡ªåŠ¨å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºåŒ…è£…å™¨ç±»å‹ï¼ˆint-&gt;Integerï¼‰ï¼›è°ƒç”¨æ–¹æ³•ï¼šIntegerçš„valueOf(int) æ–¹æ³•æ‹†ç®±å°±æ˜¯è‡ªåŠ¨å°†åŒ…è£…å™¨ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆInteger-&gt;intï¼‰ã€‚</p>
</li>
<li><p>int ä¸ Integeråˆå§‹å€¼ï¼Ÿ<br>Integeråˆå§‹å€¼ä¸ºnullï¼Œå­˜å‚¨åœ¨å †å†…å­˜ï¼›intåˆå§‹å€¼0ï¼Œå­˜å‚¨åœ¨æ ˆç©ºé—´ã€‚</p>
</li>
<li><p>æŠ½è±¡<br>æŠ½è±¡æ˜¯å°†ä¸€ç±»å¯¹è±¡çš„å…±åŒç‰¹å¾æ€»ç»“å‡ºæ¥æ„é€ ç±»çš„è¿‡ç¨‹, åŒ…æ‹¬æ•°æ®æŠ½è±¡å’Œè¡Œä¸ºæŠ½è±¡ä¸¤æ–¹é¢ã€‚æŠ½è±¡åªå…³æ³¨å¯¹è±¡æœ‰å“ªäº›å±æ€§å’Œè¡Œä¸º,å¹¶ä¸å…³æ³¨è¿™äº›è¡Œä¸ºçš„ç»†èŠ‚æ˜¯ä»€ä¹ˆã€‚</p>
</li>
<li><p><strong>é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢?</strong></p>
<ol>
<li>å°è£…ï¼šé€šå¸¸è®¤ä¸ºå°è£…æ˜¯æŠŠæ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ç»‘å®šèµ·æ¥ï¼Œå¯¹æ•°æ®çš„è®¿é—®åªèƒ½é€šè¿‡å·²å®šä¹‰çš„æ¥å£ã€‚<ul>
<li>é¢å‘å¯¹è±¡çš„æœ¬è´¨å°±æ˜¯å°†ç°å®ä¸–ç•Œæç»˜æˆä¸€ç³»åˆ—å®Œå…¨è‡ªæ²»ã€å°é—­çš„å¯¹è±¡ã€‚æˆ‘ä»¬åœ¨ç±»ä¸­ç¼–å†™çš„æ–¹æ³•å°±æ˜¯å¯¹å®ç°ç»†èŠ‚çš„ä¸€ç§å°è£…ï¼›ç¼–å†™ä¸€ä¸ªç±»å°±æ˜¯å¯¹æ•°æ®å’Œæ•°æ®æ“ä½œçš„å°è£…ã€‚</li>
<li>ä¼˜ç‚¹:<ul>
<li><strong>ä¿¡æ¯éšè—</strong>: å…è®¸éšè—å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€å’Œå®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£ã€‚è¿™æ ·å¯ä»¥ä¿æŠ¤å¯¹è±¡çš„å†…éƒ¨æ•°æ®ä¸è¢«å¤–éƒ¨ç›´æ¥è®¿é—®å’Œä¿®æ”¹ï¼Œå‡å°‘é”™è¯¯å’Œä¸ä¸€è‡´çš„çŠ¶æ€ã€‚</li>
<li><strong>æ¨¡å—åŒ–</strong>: å°†å¤æ‚çš„ç³»ç»Ÿåˆ†è§£ä¸ºç‹¬ç«‹çš„ã€å¯ç®¡ç†çš„æ¨¡å—ã€‚æ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½ï¼Œä½¿å¾—å¼€å‘å’Œç»´æŠ¤æ›´åŠ ç®€å•ã€‚</li>
<li><strong>æ˜“äºç»´æŠ¤</strong>: å°è£…ä½¿å¾—å¯¹è±¡çš„å®ç°å¯ä»¥ç‹¬ç«‹äºå…¶ä½¿ç”¨è€…è¿›è¡Œæ›´æ”¹ã€‚åªè¦æ¥å£ä¿æŒä¸å˜ï¼Œå†…éƒ¨çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°ä½¿ç”¨è¯¥å¯¹è±¡çš„å…¶ä»–éƒ¨åˆ†ä»£ç ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>ç»§æ‰¿ï¼šç»§æ‰¿æ˜¯ä»å·²æœ‰ç±»å¾—åˆ°ç»§æ‰¿ä¿¡æ¯åˆ›å»ºæ–°ç±»çš„è¿‡ç¨‹.<ul>
<li>æä¾›ç»§æ‰¿ä¿¡æ¯çš„ç±»è¢«ç§°ä¸ºçˆ¶ç±»(è¶…ç±»ã€åŸºç±»);å¾—åˆ°ç»§æ‰¿ä¿¡æ¯çš„ç±»è¢«ç§°ä¸ºå­ç±»(æ´¾ç”Ÿç±»)ã€‚ç»§æ‰¿è®©å˜åŒ–ä¸­çš„è½¯ä»¶ç³»ç»Ÿæœ‰äº†ä¸€å®šçš„å»¶ç»­æ€§,åŒæ—¶ç»§æ‰¿ä¹Ÿæ˜¯å°è£…ç¨‹åºä¸­å¯å˜å› ç´ çš„é‡è¦æ‰‹æ®µã€‚</li>
<li>ä¼˜ç‚¹:<ul>
<li><strong>ä»£ç é‡ç”¨</strong>: ç»§æ‰¿å…è®¸å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå‡å°‘äº†ä»£ç çš„é‡å¤ç¼–å†™ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚</li>
<li><strong>å»ºç«‹å±‚æ¬¡ç»“æ„</strong>: ç»§æ‰¿æ”¯æŒåˆ›å»ºä¸€ä¸ªç±»çš„å±‚æ¬¡ç»“æ„ï¼Œè¿™æœ‰åŠ©äºç»„ç»‡å’Œç®¡ç†å…·æœ‰å…±åŒç‰¹å¾çš„å¯¹è±¡ã€‚å­ç±»å¯ä»¥æ‰©å±•æˆ–è¦†ç›–çˆ¶ç±»çš„è¡Œä¸ºï¼Œä»è€Œå®ç°æ›´å…·ä½“çš„åŠŸèƒ½ã€‚</li>
<li><strong>å¤šæ€çš„åŸºç¡€</strong>: ç»§æ‰¿æ˜¯å¤šæ€å®ç°çš„åŸºç¡€ã€‚é€šè¿‡ç»§æ‰¿ï¼Œå¯ä½¿ç”¨çˆ¶ç±»ç±»å‹çš„å¼•ç”¨æ¥æ“ä½œå­ç±»å¯¹è±¡ï¼Œä¸ºå¤šæ€æä¾›äº†å¯èƒ½ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>å¤šæ€æ€§ï¼šæ˜¯æŒ‡å…è®¸ä¸åŒå­ç±»å‹çš„å¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯ä½œå‡ºä¸åŒçš„å“åº”ã€‚<ul>
<li>ç®€å•çš„è¯´å°±æ˜¯ç”¨åŒæ ·çš„å¯¹è±¡å¼•ç”¨è°ƒç”¨åŒæ ·çš„æ–¹æ³•ä½†æ˜¯åšäº†ä¸åŒçš„äº‹æƒ…ã€‚å¤šæ€æ€§åˆ†ä¸ºç¼–è¯‘æ—¶çš„å¤šæ€æ€§å’Œè¿è¡Œæ—¶çš„å¤šæ€æ€§ã€‚</li>
<li>ä¼˜ç‚¹:<ul>
<li><strong>æ¥å£ç»Ÿä¸€</strong>: å…è®¸ä¸åŒçš„å­ç±»å¯¹è±¡é€šè¿‡ç»Ÿä¸€çš„æ¥å£è¿›è¡Œæ“ä½œï¼Œç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç çš„å¤æ‚æ€§ï¼Œå¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡è€Œä¸éœ€è¦çŸ¥é“å¯¹è±¡çš„å…·ä½“ç±»å‹ã€‚</li>
<li><strong>æ‰©å±•æ€§</strong>: æé«˜äº†ä»£ç çš„æ‰©å±•æ€§ã€‚å¦‚æœéœ€è¦å¼•å…¥æ–°çš„å­ç±»ï¼Œåªéœ€ç¡®ä¿å®ƒéµå¾ªç°æœ‰çš„æ¥å£ï¼Œè€Œæ— éœ€ä¿®æ”¹å·²æœ‰çš„ä»£ç ã€‚</li>
<li><strong>åŠ¨æ€ç»‘å®š</strong>: åœ¨Javaç­‰è¯­è¨€ä¸­ï¼Œå¤šæ€å…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€å†³å®šå¯¹è±¡çš„å…·ä½“ç±»å‹å’Œè°ƒç”¨çš„æ–¹æ³•ã€‚è¿™ç§åŠ¨æ€ç»‘å®šæä¾›äº†æ›´å¤§çš„çµæ´»æ€§å’Œæ›´å¼ºçš„è¡¨è¾¾èƒ½åŠ›ã€‚</li>
</ul>
</li>
<li>æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å®ç°çš„æ˜¯ç¼–è¯‘æ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºå‰ç»‘å®šï¼‰ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ ¹æ®å‚æ•°ç±»å‹å’Œæ•°é‡ç¡®å®šå“ªä¸ªæ–¹æ³• <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>  <span class="keyword">return</span> a + b;     </span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">add</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span>  <span class="keyword">return</span> a + b; </span><br></pre></td></tr></table></figure></li>
<li>æ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰å®ç°çš„æ˜¯è¿è¡Œæ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºåç»‘å®šï¼‰ã€‚è¿è¡Œæ—¶çš„å¤šæ€æ˜¯é¢å‘å¯¹è±¡æœ€ç²¾é«“çš„ä¸œè¥¿ï¼Œè¦å®ç°å¤šæ€éœ€è¦åšä¸¤ä»¶äº‹ï¼š<br> 1ã€æ–¹æ³•é‡å†™ï¼ˆå­ç±»ç»§æ‰¿çˆ¶ç±»å¹¶é‡å†™çˆ¶ç±»ä¸­å·²æœ‰çš„æˆ–æŠ½è±¡çš„æ–¹æ³•ï¼‰ï¼›<br> 2ã€å¯¹è±¡é€ å‹ï¼ˆç”¨çˆ¶ç±»å‹å¼•ç”¨å¼•ç”¨å­ç±»å‹å¯¹è±¡ï¼Œè¿™æ ·åŒæ ·çš„å¼•ç”¨è°ƒç”¨åŒæ ·çš„æ–¹æ³•å°±ä¼šæ ¹æ®å­ç±»å¯¹è±¡çš„ä¸åŒè€Œè¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼‰ã€‚<br> è¿è¡Œæ—¶çš„å¤šæ€æ€§ä¸»è¦é€šè¿‡æ–¹æ³•é‡å†™å’Œå¯¹è±¡çš„å¤šæ€æ€§å®ç°ï¼Œè¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œè¿™å–å†³äºå¯¹è±¡çš„å®é™…ç±»å‹ã€‚ç¼–è¯‘æ—¶ï¼ŒJavaç¼–è¯‘å™¨åªçŸ¥é“å¼•ç”¨å˜é‡çš„ç±»å‹ï¼Œè€Œä¸çŸ¥é“å®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡çš„å®é™…ç±»å‹ã€‚å› æ­¤ï¼Œæ–¹æ³•è°ƒç”¨çš„ç¡®å®šï¼ˆå³åˆ†æ´¾ï¼‰è¢«æ¨è¿Ÿåˆ°è¿è¡Œæ—¶ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sound</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;The animal makes a sound&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sound</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;The dog barks&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="comment">// çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ </span></span><br><span class="line">        <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(); </span><br><span class="line">        <span class="comment">// å½“è°ƒç”¨ animal.sound()æ—¶ï¼Œå°½ç®¡ animal æ˜¯ Animal ç±»å‹çš„å¼•ç”¨ï¼Œ</span></span><br><span class="line">        <span class="comment">// ä½†è¿è¡Œæ—¶ç³»ç»Ÿä¼šæ£€æŸ¥ animal å®é™…å¼•ç”¨çš„å¯¹è±¡ç±»å‹ï¼ˆå³Dogï¼‰å¹¶è°ƒç”¨è¯¥å¯¹è±¡ç±»å‹ï¼ˆDogï¼‰ä¸­çš„ sound æ–¹æ³•</span></span><br><span class="line">        animal.sound(); </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>æ€»çš„æ¥è¯´ï¼Œå°è£…ã€ç»§æ‰¿å’Œå¤šæ€å…±åŒä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹æä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥æ„å»ºå¤æ‚å’Œå¯æ‰©å±•çš„è½¯ä»¶ç³»ç»Ÿã€‚å®ƒä»¬ä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°ã€æ˜“äºç»´æŠ¤å’Œæ‰©å±•ï¼ŒåŒæ—¶ä¹Ÿæé«˜äº†ä»£ç çš„å¤ç”¨æ€§å’Œå¯è¯»æ€§ã€‚æå¤§åœ°æé«˜äº†è½¯ä»¶å¼€å‘çš„æ•ˆç‡ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li>
</ol>
</li>
<li><p>é‡è½½å’Œé‡å†™çš„åŒºåˆ«</p>
<ul>
<li>é‡å†™ Overrideï¼šåœ¨å­ç±»ä¸­æŠŠçˆ¶ç±»æœ¬èº«æœ‰çš„æ–¹æ³•é‡æ–°å†™ä¸€éã€‚å­ç±»ç»§æ‰¿äº†çˆ¶ç±»åŸæœ‰çš„æ–¹æ³•ï¼Œä½†æœ‰æ—¶å­ç±»å¹¶ä¸æƒ³åŸå°ä¸åŠ¨çš„ç»§æ‰¿çˆ¶ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥åœ¨æ–¹æ³•åï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›ç±»å‹(é™¤è¿‡å­ç±»ä¸­æ–¹æ³•çš„è¿”å›å€¼æ˜¯çˆ¶ç±»ä¸­æ–¹æ³•è¿”å›å€¼çš„å­ç±»æ—¶)éƒ½ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œ å¯¹æ–¹æ³•ä½“è¿›è¡Œä¿®æ”¹æˆ–é‡å†™ï¼Œè¿™å°±æ˜¯é‡å†™ã€‚è¢«é‡å†™æ–¹æ³•æ¯”çˆ¶ç±»æ›´å¥½è®¿é—®ï¼ˆå³å­ç±»å‡½æ•°çš„è®¿é—®ä¿®é¥°æƒé™ä¸èƒ½å°‘äºçˆ¶ç±»çš„ï¼‰ï¼Œä¸èƒ½æ¯”çˆ¶ç±»è¢«é‡å†™æ–¹æ³•å£°æ˜æ›´å¤šçš„å¼‚å¸¸ï¼ˆé‡Œæ°ä»£æ¢åŸåˆ™ï¼‰ã€‚<br>  1ã€å‘ç”Ÿåœ¨çˆ¶ç±»ä¸å­ç±»ä¹‹é—´<br>  2ã€<strong>æ–¹æ³•åï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›ç±»å‹ï¼ˆé™¤è¿‡å­ç±»ä¸­æ–¹æ³•çš„è¿”å›ç±»å‹æ˜¯çˆ¶ç±»ä¸­è¿”å›ç±»å‹çš„å­ç±»ï¼‰å¿…é¡»ç›¸åŒ</strong><br>  3ã€<strong>è®¿é—®ä¿®é¥°ç¬¦çš„é™åˆ¶ä¸€å®šè¦å¤§äºè¢«é‡å†™æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublic&gt;protected&gt;default&gt;privateï¼‰</strong>ï¼Œå­ç±»é‡å†™æ–¹æ³•åº”è¯¥è¦æ¯”çˆ¶ç±»æ–¹æ³•å…·æœ‰ç›¸åŒæˆ–æ›´å¹¿æ³›çš„å¯è§æ€§ï¼Œå­ç±»å¯¹å¤–æš´éœ²çš„æ¥å£æ¯”çˆ¶ç±»æ›´å¤šï¼Œè¿™ç¬¦åˆé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„å¼€é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼‰ï¼Œæä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚<br>  4ã€é‡å†™æ–¹æ³•ä¸€å®šä¸èƒ½æŠ›å‡ºæ–°çš„æ£€æŸ¥å¼‚å¸¸æˆ–è€…æ¯”è¢«é‡å†™æ–¹æ³•ç”³æ˜æ›´åŠ å®½æ³›çš„æ£€æŸ¥å‹å¼‚å¸¸</li>
<li>é‡è½½ï¼ˆOverloadï¼‰åœ¨ä¸€ä¸ªç±»ä¸­ï¼ŒåŒåçš„æ–¹æ³•å¦‚æœæœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼ˆå‚æ•°ç±»å‹ä¸åŒã€å‚æ•°ä¸ªæ•°ä¸åŒç”šè‡³æ˜¯å‚æ•°é¡ºåºä¸åŒï¼‰åˆ™è§†ä¸ºé‡è½½ã€‚åŒæ—¶ï¼Œé‡è½½å¯¹è¿”å›ç±»å‹æ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒï¼Œä½†ä¸èƒ½é€šè¿‡è¿”å›ç±»å‹æ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­é‡è½½ã€‚<br>  1ã€é‡è½½Overloadæ˜¯ä¸€ä¸ªç±»ä¸­å¤šæ€æ€§çš„ä¸€ç§è¡¨ç°<br>  2ã€<strong>é‡è½½è¦æ±‚åŒåæ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸åŒ(å‚æ•°ç±»å‹ï¼Œå‚æ•°ä¸ªæ•°ç”šè‡³æ˜¯å‚æ•°é¡ºåº)</strong><br>  3ã€<strong>é‡è½½çš„æ—¶å€™ï¼Œè¿”å›å€¼ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸ç›¸åŒã€‚æ— æ³•ä»¥è¿”å›å‹åˆ«ä½œä¸ºé‡è½½å‡½æ•°çš„åŒºåˆ†æ ‡å‡†</strong></li>
</ul>
</li>
<li><p>åŠ¨æ€ç»‘å®šï¼Ÿ<br>æ˜¯æŒ‡åœ¨è¿è¡Œæ—¶ç¡®å®šæ–¹æ³•è°ƒç”¨çš„å…·ä½“å®ç°ã€‚å®ƒæ˜¯ Java ä¸­çš„ä¸€ç§å¤šæ€æ€§è¡¨ç°ï¼Œé€šè¿‡åŠ¨æ€ç»‘å®šï¼Œç¨‹åºå¯ä»¥æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥å†³å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•å®ç°ã€‚<br>åŠ¨æ€ç»‘å®šçš„å®ç°ä¾èµ–äº Java ä¸­çš„ç»§æ‰¿å’Œé‡å†™æœºåˆ¶ã€‚å½“å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œå¦‚æœçˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨è¢«é‡å†™çš„æ–¹æ³•æ—¶ï¼Œå°†æ ¹æ®å®é™…å¯¹è±¡ç±»å‹å†³å®šè°ƒç”¨å“ªä¸ªç‰ˆæœ¬çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯åŠ¨æ€ç»‘å®šã€‚ä½¿å¾— Java å…·æœ‰æ›´å¼ºå¤§çš„å¤šæ€æ€§ï¼Œå¯ä»¥æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥è°ƒç”¨ä¸åŒçš„æ–¹æ³•å®ç°ï¼Œå¢å¼ºäº†ç¨‹åºçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
</li>
<li><p>publicï¼Œprivateï¼Œprotectedï¼Œä»¥åŠä¸å†™ï¼ˆé»˜è®¤ï¼‰æ—¶çš„åŒºåˆ«ï¼Ÿ<br>  åœ¨Javaä¸­ï¼Œè®¿é—®ä¿®é¥°ç¬¦ç”¨äºæŒ‡å®šç±»ã€å˜é‡ã€æ–¹æ³•å’Œæ„é€ å‡½æ•°çš„è®¿é—®æƒé™ã€‚å®ƒä»¬æœ‰å››ç§çº§åˆ«ï¼špublicã€privateã€protectedå’Œé»˜è®¤ï¼ˆæ— ä¿®é¥°ç¬¦ï¼‰ã€‚è¿™äº›ä¿®é¥°ç¬¦å†³å®šäº†å“ªäº›å…¶ä»–ç±»å¯ä»¥è®¿é—®ç‰¹å®šçš„æˆå‘˜ã€‚Java ä¸­ï¼Œå¤–éƒ¨ç±»çš„ä¿®é¥°ç¬¦åªèƒ½æ˜¯ public æˆ–é»˜è®¤ï¼Œç±»çš„æˆå‘˜ï¼ˆåŒ…æ‹¬å†…éƒ¨ç±»ï¼‰çš„ ä¿®é¥°ç¬¦å¯ä»¥æ˜¯ä»¥ä¸Šå››ç§ã€‚</p>
<ul>
<li>publicå£°æ˜ç±»çš„æˆå‘˜æ—¶ï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•å…¶ä»–ç±»ä¸­ï¼ˆåŒä¸€åŒ…ä¸­&#x2F;ä¸åŒçš„åŒ…ä¸­ï¼‰è¢«è®¿é—®ã€‚</li>
<li>privateæˆå‘˜åªèƒ½åœ¨å…¶è‡ªå·±çš„ç±»ä¸­è¢«è®¿é—®ã€‚å®ƒä¸èƒ½è¢«ä»»ä½•å…¶ä»–ç±»ï¼ˆå³ä½¿æ˜¯åŒä¸€åŒ…ä¸­çš„ç±»ï¼‰è®¿é—®ã€‚</li>
<li>protectedæˆå‘˜å¯ä»¥åœ¨å…¶è‡ªå·±çš„ç±»ã€åŒä¸€åŒ…ä¸­çš„å…¶ä»–ç±»ä»¥åŠä»»ä½•å­ç±»ï¼ˆæ— è®ºå­ç±»åœ¨å“ªé‡Œï¼‰ä¸­è¢«è®¿é—®ã€‚<br>  å®ƒæä¾›äº†ä¸€ç§æœ‰é™çš„è®¿é—®ï¼Œæ¯”privateæ›´å¼€æ”¾ï¼Œä½†ä»ç„¶é™åˆ¶äº†å¯¹ç±»çš„ç›´æ¥è®¿é—®ã€‚<br>  è¿™åœ¨åˆ›å»ºAPIæˆ–åº“æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºä½ å¯èƒ½å¸Œæœ›å…è®¸å­ç±»è®¿é—®æŸäº›æ–¹æ³•æˆ–å˜é‡ï¼Œä½†ä¸å¸Œæœ›å®ƒä»¬è¢«å…¶ä»–ä¸ç›¸å…³çš„ç±»è®¿é—®ã€‚</li>
<li>é»˜è®¤ï¼ˆæ— ä¿®é¥°ç¬¦ï¼‰defaultï¼šå½“ä¸€ä¸ªç±»çš„æˆå‘˜æ²¡æœ‰æ˜ç¡®çš„è®¿é—®ä¿®é¥°ç¬¦æ—¶ï¼Œå®ƒåªèƒ½åœ¨åŒä¸€åŒ…ä¸­çš„å…¶ä»–ç±»ä¸­è¢«è®¿é—®ã€‚å¯¹äºåŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»ç›¸å½“äº publicï¼Œå¯¹äºä¸æ˜¯åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»ç›¸å½“äº privateã€‚è¿™æ„å‘³ç€å®ƒä¸èƒ½è¢«å…¶ä»–åŒ…ä¸­çš„ç±»ç›´æ¥è®¿é—®ï¼Œä½†å¯ä»¥è¢«åŒä¸€åŒ…ä¸­çš„ä»»ä½•ç±»è®¿é—®ã€‚è¿™æ˜¯æ¯”privateæ›´å¼€æ”¾ï¼Œä½†æ¯”protectedå’Œpublicæ›´å—é™çš„è®¿é—®çº§åˆ«ã€‚</li>
</ul>
</li>
<li><p>String æ˜¯æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹å—ï¼Ÿ<br>ä¸æ˜¯ã€‚Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹åªæœ‰ 8 ä¸ªï¼›é™¤äº†åŸºæœ¬ç±»å‹ å‰©ä¸‹çš„éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼ŒJava 5 ä»¥åå¼•å…¥çš„æšä¸¾ç±»å‹ä¹Ÿç®—æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ã€‚<br>String æ˜¯ä¸å¯å˜ç±»ã€‚ä¸å¯å˜ç±»æŒ‡çš„æ˜¯æ— æ³•ä¿®æ”¹å¯¹è±¡çš„å€¼ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ª String å¯¹è±¡ä¹‹åï¼Œè¿™ä¸ªå¯¹è±¡å°±æ— æ³•è¢«ä¿®æ”¹ã€‚åƒæ‰§è¡Œs +&#x3D; â€œaâ€; è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ String å¯¹è±¡ï¼Œè€çš„ s æŒ‡å‘çš„å¯¹è±¡ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåªæ˜¯ s çš„å¼•ç”¨æŒ‡å‘äº†æ–°çš„å¯¹è±¡è€Œå·²ã€‚â€œä¸å¯å˜â€æœ€ä¸»è¦çš„å¥½å¤„å°±æ˜¯å®‰å…¨ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›ç„¶åï¼Œé…åˆå¸¸é‡æ± å¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ï¼Œä¸”è·å–æ•ˆç‡ä¹Ÿæ›´é«˜ï¼ˆå¦‚æœå¸¸é‡æ± é‡Œé¢å·²ç»æœ‰è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡äº†ï¼Œå°±ä¸éœ€è¦æ–°å»ºï¼Œç›´æ¥è¿”å›å³å¯ï¼‰ã€‚</p>
</li>
<li><p>Stringçš„åˆå§‹å€¼æ˜¯ï¼Ÿ<br><strong>NULL.</strong></p>
</li>
<li><p>String å¸¸è§é¢˜.</p>
<ul>
<li>â€œå­—é¢é‡åˆ›å»ºå­—ç¬¦ä¸²â€ï¼šyesA æ˜¯ä¸€ä¸ªå¼•ç”¨æŒ‡å‘äº†å †é‡Œé¢çš„å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œçš„å¯¹è±¡ aã€‚å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± å·²ç»æœ‰äº† abbï¼Œé‚£ä¹ˆç›´æ¥è¿”å›å…¶å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰ abbï¼Œåˆ™ä¼šåˆ›å»º abb å¯¹è±¡ï¼Œç„¶åè¿”å›å…¶å¼•ç”¨ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">yesA</span> <span class="operator">=</span> <span class="string">&quot;abb&quot;</span>; </span><br><span class="line"><span class="type">String</span> <span class="variable">yesB</span> <span class="operator">=</span> <span class="string">&quot;abb&quot;</span>;                </span><br><span class="line">System.out.printIn(yesA == yesB);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
<li>â€œnew Stringåˆ›å»ºå­—ç¬¦ä¸²â€ï¼šå…ˆåˆ¤æ–­å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œé¢æ˜¯å¦æœ‰ abbï¼Œå¦‚æœæ²¡æœ‰ abb åˆ™åˆ›å»ºä¸€ä¸ª abbï¼Œç„¶åä¼šåœ¨å †å†…å­˜é‡Œé¢åˆ›å»ºä¸€ä¸ªå¯¹è±¡ abbï¼Œè¿”å›å †å†…å­˜å¯¹è±¡ abb çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´è¿”å›çš„ä¸æ˜¯å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œé¢çš„ abb  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yesA = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abb&quot;</span>); </span><br><span class="line">yesB = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abb&quot;</span>);           </span><br><span class="line">System.out.println(yesA == yesB);  <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
<li>intern()ï¼šåˆ¤æ–­ä¸‹ yesB å¼•ç”¨æŒ‡å‘çš„å€¼åœ¨å­—ç¬¦ä¸²å¸¸é‡é‡Œé¢æ˜¯å¦æœ‰ï¼Œå¦‚æœæ²¡æœ‰å°±åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œé¢æ–°å»ºä¸€ä¸ª aaabbb å¯¹è±¡ï¼Œè¿”å›å…¶å¼•ç”¨ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥è¿”å›å¼•ç”¨ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">yesA</span> <span class="operator">=</span> <span class="string">&quot;aaabbb&quot;</span>;    <span class="comment">// é€šè¿‡å­—é¢é‡å®šä¹‰äº† yesAï¼Œåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œåˆ›å»º aaabbb å¯¹è±¡ï¼Œè¿”å›å…¶å¼•ç”¨</span></span><br><span class="line"><span class="type">String</span> <span class="variable">yesB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;aaa&quot;</span>) + <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;bbb&quot;</span>); <span class="comment">// è¿”å›å †å†…çš„å¼•ç”¨</span></span><br><span class="line"><span class="type">String</span> <span class="variable">yesC</span> <span class="operator">=</span> yesB.intern();       </span><br><span class="line">System.out.println(yesA == yesB);  <span class="comment">// false</span></span><br><span class="line">System.out.println(yesA == yesC);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
<li>JDK 1.6 æ—¶ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯æ”¾ç½®åœ¨æ°¸ä¹…ä»£çš„;<br>  ??? JDK 1.7 ä¹‹åå­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯æ”¾åœ¨å †å†…çš„  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">yesB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;aaa&quot;</span>) + <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;bbb&quot;</span>);  <span class="comment">// æ­¤æ—¶ï¼Œå †å†…ä¼šæ–°å»ºä¸€ä¸ª aaabbb å¯¹è±¡ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± é‡Œä¸ä¼šåˆ›å»ºï¼Œå› ä¸ºå¹¶æ²¡æœ‰å‡ºç° aaabbb è¿™ä¸ªå­—é¢é‡ã€‚</span></span><br><span class="line"><span class="type">String</span> <span class="variable">yesC</span> <span class="operator">=</span> yesB.intern();       <span class="comment">// 1.7 ä¹‹åï¼Œå¦‚æœå †å†…å·²ç»å­˜åœ¨æŸä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„è¯ï¼Œå†è°ƒç”¨ intern æ­¤æ—¶ä¸ä¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± å†…æ–°å»ºå¯¹è±¡ï¼Œè€Œæ˜¯ç›´æ¥ä¿å­˜è¿™ä¸ªå¼•ç”¨ç„¶åè¿”å›ã€‚</span></span><br><span class="line"><span class="type">String</span> <span class="variable">yesA</span> <span class="operator">=</span> <span class="string">&quot;aaabbb&quot;</span>;            <span class="comment">// yesA å¾—åˆ°çš„å¼•ç”¨ä¸ yesC å’Œ yesB ä¸€è‡´ï¼Œéƒ½æŒ‡å‘å †å†…çš„ aaabbb å¯¹è±¡ã€‚</span></span><br><span class="line">System.out.println(yesA == yesB);  <span class="comment">// true</span></span><br><span class="line">System.out.println(yesA == yesC);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>String è¿æ¥ï¼Ÿ</p>
<ol>
<li>ä½¿ç”¨ <code>+</code> è¿ç®—ç¬¦ï¼šå­—ç¬¦ä¸²è¿æ¥æœ€ç®€å•çš„æ–¹æ³•ï¼Œä½†åœ¨å¤§é‡è¿æ¥æ“ä½œæ—¶å¯èƒ½æ•ˆç‡è¾ƒä½ï¼Œå› ä¸ºå®ƒä¼šç”Ÿæˆå¤šä¸ªä¸´æ—¶çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚</li>
<li>ä½¿ç”¨ <code>StringBuilder</code>ï¼šå¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œé€‚ç”¨äºéœ€è¦é¢‘ç¹è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥çš„åœºæ™¯ã€‚<code>append</code> æ–¹æ³•ç”¨äºæ·»åŠ å­—ç¬¦ä¸²å†…å®¹ï¼Œæœ€åä½¿ç”¨ <code>toString</code> æ–¹æ³•è·å–æœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚é€‚åˆå•çº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</li>
<li>ä½¿ç”¨ <code>StringBuffer</code>ï¼šä¸ <code>StringBuilder</code> ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œä½†ä¸åŒä¹‹å¤„åœ¨äº <code>StringBuffer</code> æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé€‚ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒã€‚</li>
</ol>
</li>
<li><p>Stringï¼ŒStringBuffer å’Œ StringBuilder çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ<br>Stringæ˜¯åªè¯»å­—ç¬¦ä¸²ï¼Œå®ƒå¹¶ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ä»åº•å±‚æºç æ¥çœ‹æ˜¯ä¸€ä¸ªfinalç±»å‹çš„å­—ç¬¦æ•°ç»„ï¼Œæ‰€å¼•ç”¨çš„å­—ç¬¦ä¸²ä¸èƒ½è¢«æ”¹å˜ï¼Œä¸€ç»å®šä¹‰ï¼Œæ— æ³•å†å¢åˆ æ”¹ã€‚æ¯æ¬¡å¯¹Stringçš„æ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„Stringå¯¹è±¡ã€‚<br>StringBufferä¸StringBuilderéƒ½ç»§æ‰¿äº†AbstractStringBulderç±»ï¼Œè€ŒAbtractStringBuilderåˆå®ç°äº†CharSequenceæ¥å£ï¼Œä¸¤ä¸ªç±»éƒ½æ˜¯ç”¨æ¥è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œçš„ã€‚åœ¨åšå­—ç¬¦ä¸²æ‹¼æ¥ä¿®æ”¹åˆ é™¤æ›¿æ¢æ—¶ï¼Œæ•ˆç‡æ¯”stringæ›´é«˜ã€‚<br>StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒStringbuilderæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚æ‰€ä»¥Stringbuilderæ¯”stringbufferæ•ˆç‡æ›´é«˜ï¼ŒStringBufferçš„æ–¹æ³•å¤§å¤šéƒ½åŠ äº†synchronizedå…³é”®å­—</p>
</li>
<li><p>Stringç±»çš„å¸¸ç”¨æ–¹æ³•æœ‰é‚£äº›ï¼Ÿ<br>charAtï¼šè¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦<br>indexOf()ï¼šè¿”å›æŒ‡å®šå­—ç¬¦çš„ç´¢å¼•<br>replace()ï¼šå­—ç¬¦ä¸²æ›¿æ¢<br>trim()ï¼šå»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯ç©ºç™½<br>split()ï¼šåˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªåˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„<br>getBytes()ï¼šè¿”å›å­—ç¬¦ä¸²çš„byteç±»å‹æ•°ç»„<br>length()ï¼šè¿”å›å­—ç¬¦ä¸²é•¿åº¦<br>toLowerCase()ï¼šå°†å­—ç¬¦ä¸²è½¬æˆå°å†™å­—æ¯<br>toUpperCase()ï¼šå°†å­—ç¬¦ä¸²è½¬æˆå¤§å†™å­—ç¬¦<br>substring()ï¼šæˆªå–å­—ç¬¦ä¸²<br>format()ï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²<br>equals()ï¼šå­—ç¬¦ä¸²æ¯”è¾ƒ</p>
</li>
<li><p>åˆ†å‰²å­—ç¬¦ä¸²å¸¸ç”¨çš„æ–¹æ³•ã€‚</p>
<ol>
<li><strong><code>split(String regex)</code> æ–¹æ³•ï¼š</strong> ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åˆ†å‰²å­—ç¬¦ä¸²ã€‚è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼ŒåŒ…å«åˆ†å‰²åçš„å­å­—ç¬¦ä¸²ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;apple,orange,banana&quot;</span>;</span><br><span class="line">String[] fruits = input.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line"><span class="comment">// fruits æ•°ç»„: &#123;&quot;apple&quot;, &quot;orange&quot;, &quot;banana&quot;&#125;</span></span><br></pre></td></tr></table></figure></li>
<li><strong><code>split</code> æ–¹æ³•é…åˆæ­£åˆ™è¡¨è¾¾å¼çš„è½¬ä¹‰å­—ç¬¦ï¼š</strong> å¦‚æœåˆ†éš”ç¬¦æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„å…ƒå­—ç¬¦ï¼Œéœ€è¦è¿›è¡Œè½¬ä¹‰ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;apple.orange.banana&quot;</span>;</span><br><span class="line">String[] fruits = input.split(<span class="string">&quot;\\.&quot;</span>);</span><br><span class="line"><span class="comment">// fruits æ•°ç»„: &#123;&quot;apple&quot;, &quot;orange&quot;, &quot;banana&quot;&#125;</span></span><br></pre></td></tr></table></figure></li>
<li><strong><code>substring</code> å’Œ <code>indexOf</code> æ–¹æ³•ï¼š</strong> æ‰‹åŠ¨æˆªå–å­å­—ç¬¦ä¸²ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;apple,orange,banana&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">commaIndex</span> <span class="operator">=</span> input.indexOf(<span class="string">&quot;,&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">firstPart</span> <span class="operator">=</span> input.substring(<span class="number">0</span>, commaIndex);</span><br><span class="line"><span class="type">String</span> <span class="variable">secondPart</span> <span class="operator">=</span> input.substring(commaIndex + <span class="number">1</span>);</span><br><span class="line"><span class="comment">// firstPart: &quot;apple&quot;, secondPart: &quot;orange,banana&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>ä½¿ç”¨ <code>Pattern</code> å’Œ <code>Matcher</code> ç±»ï¼š</strong> è¿›è¡Œæ›´å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å’Œåˆ†å‰²ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;apple,orange;banana&quot;</span>;</span><br><span class="line"><span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;[,;]&quot;</span>);</span><br><span class="line">String[] fruits = pattern.split(input);</span><br><span class="line"><span class="comment">// fruits æ•°ç»„: &#123;&quot;apple&quot;, &quot;orange&quot;, &quot;banana&quot;&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>JDK9ä¸ºä»€ä¹ˆè¦å°† String çš„åº•å±‚å®ç°ç”± char[] æ”¹ä¸º byte[]ï¼Ÿ<br>jdkä¸­å­—ç¬¦ç”¨utf-16ç¼–ç ï¼ˆUTF-16æ˜¯Unicodeçš„ä¸€ç§å®ç°æ–¹å¼ï¼Œå®ƒä½¿ç”¨16ä½çš„ç¼–ç å•å…ƒæ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼‰ï¼Œä¸€ä¸ªå­—ç¬¦charè¦å ç”¨2ä¸ªå­—èŠ‚ï¼›ä½†æ˜¯å¯¹äºç”±çº¯è‹±æ–‡å­—ç¬¦å’Œasciiå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œåªéœ€è¦ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºæ‰€æœ‰asciiå­—ç¬¦ï¼Œä½¿ç”¨ byte[] å¯ä»¥èŠ‚çœä¸€åŠç©ºé—´ã€‚<br>åªæœ‰åœ¨éœ€è¦å­˜å‚¨éasciiå­—ç¬¦æ—¶ï¼Œæ‰ä¼šä½¿ç”¨char[]</p>
</li>
<li><p>Unicode å’Œ UTF-8 çš„åŒºåˆ«ï¼š</p>
<ol>
<li><strong>Unicodeï¼ˆç»Ÿä¸€ç ï¼‰ï¼š</strong><br>  Unicode æ˜¯ä¸€ç§å­—ç¬¦é›†ï¼ˆCharacter Setï¼‰ï¼Œç”¨äºå®šä¹‰å­—ç¬¦å’Œå­—ç¬¦ç¼–ç ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚<br>  Unicode ä¸­åŒ…å«äº†ä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬å„ç§è¯­è¨€çš„æ–‡å­—ã€ç¬¦å·ã€è¡¨æƒ…ç¬¦å·ç­‰ã€‚<br>  Unicode é‡‡ç”¨ 16 ä½ï¼ˆ2 å­—èŠ‚ï¼‰æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå› æ­¤å¯ä»¥è¡¨ç¤ºçš„å­—ç¬¦èŒƒå›´å¾ˆå¹¿æ³›ï¼Œå…±æœ‰ 65536 ä¸ªç ä½ï¼ˆCode Pointï¼‰ã€‚</li>
<li><strong>UTF-8ï¼ˆUnicode Transformation Format-8ï¼‰ï¼š</strong><br>  UTF-8 æ˜¯ä¸€ç§å˜é•¿çš„å­—ç¬¦ç¼–ç æ–¹å¼ï¼Œç”¨äºå°† Unicode å­—ç¬¦ç¼–ç æˆå­—èŠ‚åºåˆ—ã€‚<br>  UTF-8 çš„æœ€å¤§ç‰¹ç‚¹æ˜¯å…¼å®¹ ASCII ç ï¼Œå³ ASCII ç ä¸­çš„å­—ç¬¦ï¼ˆ0-127ï¼‰ä¸ UTF-8 ä¸­çš„ç¼–ç æ˜¯ç›¸åŒçš„ï¼Œè¿™ä½¿å¾— UTF-8 åœ¨ Web ä¸Šå…·æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚<br>  UTF-8 ä½¿ç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ª Unicode å­—ç¬¦ï¼Œæ ¹æ®å­—ç¬¦çš„ä¸åŒè€Œå˜åŒ–ï¼Œå› æ­¤å¯ä»¥çµæ´»åœ°è¡¨ç¤ºå„ç§å­—ç¬¦ï¼ŒåŒ…æ‹¬ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰ç­‰ã€‚</li>
</ol>
</li>
<li><p>++iä¸i++çš„åŒºåˆ«</p>
<ul>
<li>i++ï¼šå…ˆèµ‹å€¼ï¼Œåè®¡ç®—ï¼›</li>
<li>++iï¼šå…ˆè®¡ç®—ï¼Œåèµ‹å€¼</li>
<li>åœ¨JVMå±‚é¢ï¼Œè¿™ä¸¤ä¸ªæ“ä½œçš„å®ç°æ˜¯é€šè¿‡æŒ‡ä»¤é›†ä¸­çš„ä¸åŒæŒ‡ä»¤æ¥å®Œæˆçš„ã€‚Javaè™šæ‹Ÿæœºä¸­çš„å­—èŠ‚ç æŒ‡ä»¤åŒ…å« iinc æŒ‡ä»¤ç”¨äºé€’å¢å±€éƒ¨å˜é‡çš„å€¼ã€‚è¿™ä¸¤ç§é€’å¢æ“ä½œåœ¨åº•å±‚éƒ½æ˜¯é€šè¿‡ iinc æŒ‡ä»¤å®ç°çš„ï¼Œä½†åœ¨å…·ä½“çš„ä½¿ç”¨ä¸Šæœ‰ä¸€äº›å·®å¼‚ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getstatic i <span class="comment">// è·å–é™æ€å˜é‡içš„å€¼</span></span><br><span class="line">iconst_1 <span class="comment">// å‡†å¤‡å¸¸é‡1</span></span><br><span class="line">iadd <span class="comment">// è‡ªå¢</span></span><br><span class="line">putstatic i <span class="comment">// å°†ä¿®æ”¹åçš„å€¼å­˜å…¥é™æ€å˜é‡i</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getstatic i <span class="comment">// è·å–é™æ€å˜é‡içš„å€¼</span></span><br><span class="line">iconst_1 <span class="comment">// å‡†å¤‡å¸¸é‡1</span></span><br><span class="line">isub <span class="comment">// è‡ªå‡</span></span><br><span class="line">putstatic i <span class="comment">// å°†ä¿®æ”¹åçš„å€¼å­˜å…¥é™æ€å˜é‡i</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>count +&#x3D; â€“count; å€¼ä¸ºï¼Ÿ<br>1ã€ <code>--count</code> è¡¨ç¤ºå…ˆå¯¹ <code>count</code> æ‰§è¡Œå‡ä¸€æ“ä½œï¼Œç„¶åå°†ç»“æœèµ‹ç»™ <code>count</code>ã€‚<br>2ã€ ç„¶åå°† <code>count</code> çš„å½“å‰å€¼ï¼ˆæ‰§è¡Œäº†å‡ä¸€æ“ä½œåçš„å€¼ï¼‰åŠ ä¸Š <code>count</code> çš„å½“å‰å€¼ï¼Œå†å°†ç»“æœèµ‹ç»™ <code>count</code>ã€‚</p>
</li>
<li><p>a&#x3D;a+b ä¸ a+&#x3D;b æœ‰ä»€ä¹ˆåŒºåˆ«å—?</p>
<ul>
<li>+&#x3D; æ“ä½œç¬¦ä¼šè¿›è¡Œéšå¼è‡ªåŠ¨ç±»å‹è½¬æ¢,æ­¤å¤„a+&#x3D;béšå¼çš„å°†åŠ æ“ä½œçš„ç»“æœç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºæŒæœ‰ç»“æœçš„ç±»å‹,<br>  è€Œa&#x3D;a+båˆ™ä¸ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢.å¦‚ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">127</span>, b = <span class="number">127</span>;</span><br><span class="line">b = a + b; <span class="comment">// æŠ¥ç¼–è¯‘é”™è¯¯:cannot convert from int to byte</span></span><br><span class="line">b += a;</span><br><span class="line"><span class="type">short</span> s1= <span class="number">1</span>;</span><br><span class="line">s1 = s1 + <span class="number">1</span>; <span class="comment">// ç¼–è¯‘å™¨ä¼šæŠ¥é”™.shortç±»å‹åœ¨è¿›è¡Œè¿ç®—æ—¶ä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹,ä¹Ÿå°±æ˜¯è¯´ s1+1 çš„è¿ç®—ç»“æœæ˜¯intç±»å‹,è€Œs1æ˜¯shortç±»å‹,.</span></span><br><span class="line">s1 += <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>&amp;å’Œ&amp;&amp;çš„åŒºåˆ«<br>&amp;æ˜¯ä½è¿ç®—ç¬¦ã€‚&amp;&amp;æ˜¯å¸ƒå°”é€»è¾‘è¿ç®—ç¬¦<br>åœ¨è¿›è¡Œé€»è¾‘åˆ¤æ–­æ—¶ç”¨&amp;å¤„ç†çš„å‰é¢ä¸ºfalseåé¢çš„å†…å®¹ä»éœ€å¤„ç†ï¼Œç”¨&amp;&amp;å¤„ç†çš„å‰é¢ä¸ºfalseä¸å†å¤„ç†åé¢çš„å†…å®¹ã€‚</p>
</li>
<li><p>200 + null å€¼ä¸ºï¼Ÿ<br> Java ä¸­ï¼Œå¦‚æœå¯¹ä¸€ä¸ªæ•´æ•°å’Œ null å€¼è¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚åœ¨è¿è¡Œæ—¶ï¼Œå¦‚æœå­˜åœ¨ null å€¼å‚ä¸è¿ç®—ï¼Œä¼šæŠ›å‡º NullPointerException å¼‚å¸¸ã€‚</p>
</li>
<li><p>(-10) % (-3) &#x3D; ï¼Ÿ</p>
<ol>
<li>å¦‚æœè¢«å–æ¨¡æ•°ä¸ºæ­£æ•°ï¼Œç»“æœçš„ç¬¦å·ä¸è¢«å–æ¨¡æ•°ç›¸åŒã€‚10 &#x3D; 3 * 3 + 1ï¼›</li>
<li>å¦‚æœè¢«å–æ¨¡æ•°ä¸ºè´Ÿæ•°ï¼Œç»“æœçš„ç¬¦å·ä¸é™¤æ•°ç›¸åŒã€‚ (-10) &#x3D; (-3) * 3 + (-1); æ‰€ä»¥ <code>(-10) % (-3)</code> &#x3D; -1ã€‚</li>
</ol>
</li>
<li><p>Java å¸¸ç”¨çš„ç±»ï¼ŒåŒ…ï¼Œæ¥å£ã€‚<br>ç±»ï¼šBufferedReader BufferedWriter FileReader FileWirter String Integer<br>å¸¸ç”¨çš„åŒ…ï¼šjava.lang java.awt java.io java.util java.sql Java.net Java.math<br>å¸¸ç”¨çš„æ¥å£ï¼šRemote List Map Document NodeList</p>
</li>
<li><p>Objectç±»å¸¸ç”¨æ–¹æ³•æœ‰é‚£äº›ï¼Ÿ<br>Equals<br>Hashcode<br>toString<br>wait<br>notify<br>clone<br>getClass</p>
</li>
<li><p>equalsä¸&#x3D;&#x3D;çš„åŒºåˆ«</p>
<ul>
<li>&#x3D;&#x3D;ï¼šæ¯”è¾ƒçš„æ˜¯å˜é‡(æ ˆ)å†…å­˜ä¸­å­˜æ”¾çš„å¯¹è±¡çš„(å †)å†…å­˜åœ°å€ï¼Œç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯å¦ç›¸åŒï¼Œå³æ˜¯å¦æ˜¯æŒ‡ç›¸åŒä¸€ä¸ªå¯¹è±¡ã€‚æ¯”è¾ƒçš„æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æŒ‡é’ˆæ“ä½œã€‚<br>  1ã€æ¯”è¾ƒçš„æ˜¯æ“ä½œç¬¦ä¸¤ç«¯çš„æ“ä½œæ•°æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚<br>  2ã€ä¸¤è¾¹çš„æ“ä½œæ•°å¿…é¡»æ˜¯åŒä¸€ç±»å‹çš„ï¼ˆå¯ä»¥æ˜¯çˆ¶å­ç±»ä¹‹é—´ï¼‰æ‰èƒ½ç¼–è¯‘é€šè¿‡ã€‚<br>  3ã€æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹çš„ <code>==</code> æ“ä½œç¬¦ç›´æ¥æ¯”è¾ƒå®ƒä»¬çš„å€¼ï¼Œå€¼ç›¸ç­‰åˆ™ä¸ºtrueã€‚å¦‚ï¼šint a&#x3D;10 ä¸ long b&#x3D;10L ä¸ double c&#x3D;10.0éƒ½æ˜¯ç›¸åŒçš„ï¼ˆä¸ºtrueï¼‰ï¼Œå› ä¸ºä»–ä»¬éƒ½æŒ‡å‘åœ°å€ä¸º10çš„å †ã€‚è€Œå¯¹äº Integer a &#x3D;10 ä¸ Long b &#x3D; 10Lï¼Œ ä½¿ç”¨ <code>==</code> æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯å€¼ï¼Œç»“æœä¸º falseã€‚</li>
<li>equalsï¼šç”¨æ¥æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œç”±äºæ‰€æœ‰çš„ç±»éƒ½æ˜¯ç»§æ‰¿è‡ªjava.lang.Objectç±»çš„ï¼Œæ‰€ä»¥é€‚ç”¨äºæ‰€æœ‰å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å¯¹è¯¥æ–¹æ³•è¿›è¡Œè¦†ç›–çš„è¯ï¼Œè°ƒç”¨çš„ä»ç„¶æ˜¯Objectç±»ä¸­çš„æ–¹æ³•ï¼Œè€ŒObjectä¸­çš„equalsæ–¹æ³•è¿”å›çš„å´æ˜¯&#x3D;&#x3D;çš„åˆ¤æ–­ã€‚</li>
</ul>
</li>
<li><p><code>equals()</code> å’Œ <code>hashCode()</code> æ–¹æ³•ã€‚ä¸ºä»€ä¹ˆé‡å†™ <code>equals()</code> æ—¶é€šå¸¸ä¹Ÿéœ€è¦é‡å†™ <code>hashCode()</code>ï¼Ÿ</p>
<ol>
<li><strong><code>equals()</code> æ–¹æ³•</strong>ï¼šç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦åœ¨é€»è¾‘ä¸Šç›¸ç­‰ã€‚é»˜è®¤å®ç°æ˜¯æ¯”è¾ƒå¯¹è±¡çš„å†…å­˜åœ°å€ï¼ˆç›¸å½“äº &#x3D;&#x3D;ï¼‰ï¼Œå³ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€èˆ¬éœ€è¦æ ¹æ®å¯¹è±¡çš„ä¸šåŠ¡å«ä¹‰é‡å†™è¯¥æ–¹æ³•ï¼Œæ¯”è¾ƒå¯¹è±¡çš„å®é™…å†…å®¹ã€‚</li>
<li><strong><code>hashCode()</code> æ–¹æ³•ï¼š</strong>ç”¨äºè·å–å¯¹è±¡çš„å“ˆå¸Œç ï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°ã€‚å“ˆå¸Œç æ˜¯ä¸€ç§ç”¨äºå¿«é€ŸæŸ¥æ‰¾çš„æŠ€æœ¯ï¼Œé€šå¸¸åœ¨é›†åˆï¼ˆå¦‚ HashMapã€HashSetï¼‰ä¸­ç”¨åˆ°ã€‚å®ƒå¯ä»¥å¸®åŠ©ç¡®å®šå¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„å­˜å‚¨ä½ç½®ï¼Œæé«˜æŸ¥æ‰¾çš„æ•ˆç‡ã€‚é»˜è®¤å®ç°æ˜¯c++ç¼–å†™çš„nativeæ–¹æ³•ï¼ŒåŸºäºå¯¹è±¡çš„å†…å­˜åœ°å€ç”Ÿæˆå“ˆå¸Œç ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€èˆ¬éœ€è¦åœ¨ç±»ä¸­é‡å†™è¯¥æ–¹æ³•ï¼Œä»¥ä¾¿ç›¸ç­‰çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„å“ˆå¸Œç ã€‚<br>  ä½†æ˜¯ï¼Œä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨hashCode()è¿”å›çš„intå€¼ï¼ˆå–å€¼èŒƒå›´2^32ï¼‰ä¹Ÿå¯èƒ½ç›¸ç­‰ï¼Œå³å‘ç”Ÿäº†hashå†²çªã€‚</li>
<li><strong>å…³ç³»ï¼š</strong>åœ¨ä½¿ç”¨å“ˆå¸Œè¡¨çš„é›†åˆä¸­ï¼Œ<code>hashCode()</code> å’Œ <code>equals()</code> ä¹‹é—´å­˜åœ¨ä¸€å®šçš„å…³ç³»ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡ <code>equals()</code> æ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼Œå®ƒä»¬çš„ <code>hashCode()</code> åº”è¯¥è¿”å›ç›¸åŒçš„å€¼ã€‚è¿™æ˜¯ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œä½¿å¾—ç›¸ç­‰çš„å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­èƒ½å¤Ÿæ­£ç¡®åœ°è¯†åˆ«å’Œå¤„ç†ã€‚ç¡®ä¿ç›¸ç­‰çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„å“ˆå¸Œç ï¼Œä»è€Œä½¿å¾—åœ¨é›†åˆä¸­æ­£ç¡®åœ°å¤„ç†ç›¸ç­‰æ€§ã€‚<br>  å¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡ <code>equals()</code> æ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼Œä½†å®ƒä»¬çš„ <code>hashCode()</code> ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆå½“æ”¾å…¥å“ˆå¸Œè¡¨ç­‰é›†åˆä¸­æ—¶ï¼Œå®ƒä»¬å°†è¢«è§†ä¸ºä¸åŒçš„å¯¹è±¡ã€‚è¿™å¯èƒ½å¯¼è‡´å“ˆå¸Œè¡¨ä¸­å­˜åœ¨ç›¸ç­‰çš„å¯¹è±¡ï¼Œç ´åäº†é›†åˆçš„ä¸€è‡´æ€§ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// Constructors, getters, setters...</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == obj) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="literal">null</span> || getClass() != obj.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">MyClass</span> <span class="variable">myClass</span> <span class="operator">=</span> (MyClass) obj;</span><br><span class="line">        <span class="keyword">return</span> id == myClass.id &amp;&amp; Objects.equals(name, myClass.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(id, name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>æœ‰æ²¡æœ‰å¯èƒ½ä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„hashcodeï¼Ÿ<br>  æœ‰å¯èƒ½ï¼Œå³äº§ç”Ÿhashå†²çªã€‚å½“hashå†²çªäº§ç”Ÿæ—¶,ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥å¤„ç†:</p>
<ol>
<li>æ‹‰é“¾æ³•:æ¯ä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªnextæŒ‡é’ˆ,å¤šä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹å¯ä»¥ç”¨nextæŒ‡é’ˆæ„æˆä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œè¢«åˆ†é…åˆ°åŒä¸€ä¸ªç´¢å¼•ä¸Šçš„å¤šä¸ªèŠ‚ç‚¹å¯ä»¥ç”¨è¿™ä¸ªå•å‘é“¾è¡¨è¿›è¡Œå­˜å‚¨.</li>
<li>å¼€æ”¾å®šå€æ³•:ä¸€æ—¦å‘ç”Ÿäº†å†²çª,å°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„æ•£åˆ—åœ°å€,åªè¦æ•£åˆ—è¡¨è¶³å¤Ÿå¤§,ç©ºçš„æ•£åˆ—åœ°å€æ€»èƒ½æ‰¾åˆ°,å¹¶å°†è®°å½•å­˜å…¥</li>
<li>å†å“ˆå¸Œ:åˆå«åŒå“ˆå¸Œæ³•,æœ‰å¤šä¸ªä¸åŒçš„Hashå‡½æ•°.å½“å‘ç”Ÿå†²çªæ—¶,ä½¿ç”¨ç¬¬äºŒä¸ª,ç¬¬ä¸‰ä¸ªâ€¦.ç­‰å“ˆå¸Œå‡½æ•°è®¡ç®—åœ°å€,ç›´åˆ°æ— å†²çª.</li>
</ol>
</li>
<li><p>javaä¸­æœ‰æ²¡æœ‰æŒ‡é’ˆï¼Ÿjavaä¸­æ˜¯å€¼ä¼ é€’å¼•ç”¨ä¼ é€’ï¼Ÿ<br>æœ‰æŒ‡é’ˆï¼Œä½†æ˜¯éšè—äº†ï¼Œå¼€å‘äººå‘˜æ— æ³•ç›´æ¥æ“ä½œæŒ‡é’ˆï¼Œç”±jvmæ¥æ“ä½œæŒ‡é’ˆ<br><strong>javaéƒ½æ˜¯å€¼ä¼ é€’</strong>ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¼ é€’æ˜¯å€¼çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å€¼æœ¬èº«ã€‚å¯¹äºå¯¹è±¡ç±»å‹ï¼Œä¼ é€’æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œå½“åœ¨ä¸€ä¸ªæ–¹æ³•æ“ä½œæ“ä½œå‚æ•°çš„æ—¶å€™ï¼Œå…¶å®æ“ä½œçš„æ˜¯å¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚</p>
</li>
<li><p>æ„é€ æ–¹æ³• constructor</p>
<ul>
<li>æ„é€ æ–¹æ³•æ˜¯Javaç±»ä¸­çš„ä¸€ç§ç‰¹æ®Šæ–¹æ³•ï¼ˆå¯çœç•¥ï¼‰ï¼Œç”¨äºåœ¨åˆ›å»ºå¯¹è±¡æ—¶è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚<br>  æ„é€ æ–¹æ³•çš„åç§°å¿…é¡»ä¸ç±»åç›¸åŒï¼Œå¹¶ä¸”æ²¡æœ‰è¿”å›ç±»å‹ï¼ŒåŒ…æ‹¬ voidã€‚æ„é€ æ–¹æ³•é€šå¸¸ç”¨äºè®¾ç½®å¯¹è±¡çš„åˆå§‹çŠ¶æ€ï¼Œä¸ºå¯¹è±¡çš„å±æ€§èµ‹åˆå€¼æˆ–æ‰§è¡Œå…¶ä»–åˆå§‹åŒ–ä»»åŠ¡ã€‚</li>
<li>æ–¹æ³•ä¹Ÿå¯ä»¥ä¸classåŒåï¼ŒåŒºåˆ«åœ¨äºæ–¹æ³•å¿…é¡»è¦æœ‰voidæˆ–å…·ä½“è¿”å›å€¼ç±»å‹ï¼›</li>
<li>ä¸€ä¸ªç±»å¯ä»¥æ‹¥æœ‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œåªè¦å®ƒä»¬çš„å‚æ•°åˆ—è¡¨ä¸åŒã€‚è¿™ç§°ä¸ºæ„é€ æ–¹æ³•çš„é‡è½½ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="comment">// æ— å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">()</span> &#123;<span class="built_in">this</span>.value = <span class="number">0</span>;&#125;</span><br><span class="line">    <span class="comment">// æœ‰å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">(<span class="type">int</span> value)</span> &#123;<span class="built_in">this</span>.value = value;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ„é€ æ–¹æ³•èƒ½ä¸èƒ½æ˜¾å¼è°ƒç”¨ï¼Ÿ<br>  ä¸èƒ½ï¼Œæ„é€ æ–¹æ³•å½“æˆæ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œåªæœ‰åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™å®ƒæ‰ä¼šè¢«ç³»ç»Ÿè°ƒç”¨</li>
<li>æ„é€ æ–¹æ³•èƒ½ä¸èƒ½é‡å†™ï¼Œé‡è½½ï¼Ÿ<br>  å¯ä»¥é‡è½½ï¼Œä½†ä¸èƒ½é‡å†™ã€‚</li>
</ul>
</li>
<li><p>Javaä¸­æœ‰å„ç§ä¸åŒçš„ç±»å’Œä»£ç å—ç±»å‹ï¼Œè®©æˆ‘ä»¬é€ä¸ªè§£é‡Šå®ƒä»¬ï¼š</p>
<ol>
<li>æ™®é€šç±»ï¼šæ˜¯æœ€åŸºæœ¬çš„ç±»ç±»å‹ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡ã€‚å®ƒå¯ä»¥åŒ…å«å­—æ®µã€æ–¹æ³•ã€æ„é€ æ–¹æ³•ç­‰ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">// Fields, methods, constructors, etc.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ„é€ æ–¹æ³•ï¼šæ˜¯åŒ…å«åœ¨ç±»ä¸­çš„ä¸€ç»„è¯­å¥å—ï¼Œæ²¡æœ‰ä½¿ç”¨ä»»ä½•å…³é”®å­—ã€‚å®ƒåœ¨å¯¹è±¡æ¯ä¸€æ¬¡åˆ›å»ºæ—¶æ‰§è¡Œï¼Œå¯ä»¥ç”¨äºåˆå§‹åŒ–å¯¹è±¡ã€‚<br>  æ„é€ ä»£ç å—æ˜¯å®šä¹‰åœ¨ç±»ä¸­çš„ï¼Œä¸å¸¦ä»»ä½•ä¿®é¥°ç¬¦ï¼ˆä¾‹å¦‚publicã€privateç­‰ï¼‰ã€‚å®ƒåœ¨æ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶éƒ½ä¼šæ‰§è¡Œï¼Œæ‰§è¡Œçš„æ—¶æœºåœ¨æ„é€ å™¨è°ƒç”¨ä¹‹å‰ã€‚ä¸å®ä¾‹åˆå§‹åŒ–å—ä¸åŒï¼Œæ„é€ ä»£ç å—ä¸èƒ½è¢«å•ç‹¬è°ƒç”¨ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    MyClass() &#123;</span><br><span class="line">            <span class="comment">// æ„é€ å™¨</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ™®é€šä»£ç å—</span></span><br><span class="line">        <span class="comment">// åœ¨å¯¹è±¡åˆ›å»ºæ—¶æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å†…éƒ¨ç±»ï¼šå†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¦ä¸€ä¸ªç±»å†…éƒ¨çš„ç±»ã€‚å®ƒæœ‰è®¿é—®å¤–éƒ¨ç±»æˆå‘˜çš„æƒé™ï¼Œå¹¶ä¸”å¯ä»¥ç”¨äºå®ç°ä¸€äº›å°è£…å’Œé€»è¾‘ç»„ç»‡ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OuterClass</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">InnerClass</span> &#123;</span><br><span class="line">        <span class="comment">// å†…éƒ¨ç±»</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å¤–éƒ¨ç±»ï¼š å¤–éƒ¨ç±»æ˜¯æ™®é€šçš„é¡¶çº§ç±»ï¼Œä¸åµŒå¥—åœ¨å…¶ä»–ç±»ä¸­ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OuterClass</span> &#123;</span><br><span class="line">    <span class="comment">// å¤–éƒ¨ç±»</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>é™æ€ä»£ç å—ï¼š ä½¿ç”¨ <code>static</code> å…³é”®å­—ï¼ŒåŒ…å«åœ¨ç±»ä¸­ï¼Œç”¨äºåœ¨ç±»åŠ è½½æ—¶æ‰§è¡Œåˆå§‹åŒ–æ“ä½œã€‚å®ƒä»…æ‰§è¡Œä¸€æ¬¡ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// é™æ€ä»£ç å—</span></span><br><span class="line">        <span class="comment">// åœ¨ç±»åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>é™æ€å†…éƒ¨ç±»ï¼šæ˜¯å®šä¹‰åœ¨å¦ä¸€ä¸ªç±»å†…éƒ¨çš„ç±»ï¼Œä½¿ç”¨ <code>static</code> ä¿®é¥°ã€‚ä¸éé™æ€å†…éƒ¨ç±»ä¸åŒï¼Œå®ƒä¸ä¾èµ–äºå¤–éƒ¨ç±»çš„å®ä¾‹ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OuterClass</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StaticInnerClass</span> &#123;</span><br><span class="line">        <span class="comment">// é™æ€å†…éƒ¨ç±»</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>é™æ€ static</p>
<ol>
<li>é™æ€å˜é‡ï¼ˆStatic Variablesï¼‰ï¼šè¢«å£°æ˜ä¸º <code>static</code> çš„æˆå‘˜å˜é‡ï¼Œå±äºç±»è€Œä¸æ˜¯ç±»çš„å®ä¾‹ã€‚å®ƒè¢«æ‰€æœ‰ç±»çš„å®ä¾‹å…±äº«ï¼Œåªæœ‰ä¸€ä¸ªå‰¯æœ¬å­˜åœ¨äºå†…å­˜ä¸­ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰é™æ€å˜é‡å±äºç±»è€Œä¸å±äºç±»çš„å®ä¾‹ï¼Œå¹¶ä¸”åªèƒ½åœ¨ç±»çš„å†…éƒ¨è®¿é—®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123; count++; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>é™æ€æ–¹æ³•ï¼ˆStatic Methodsï¼‰ï¼šè¢«å£°æ˜ä¸º <code>static</code> çš„æ–¹æ³•ï¼Œå®ƒä¸éœ€è¦å®ä¾‹åŒ–ç±»å°±å¯ä»¥ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ã€‚é™æ€æ–¹æ³•ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ <code>this</code> å…³é”®å­—ã€‚<br>  é™æ€æ–¹æ³•å‡­ä»€ä¹ˆä¸èƒ½è®¿é—®æˆå‘˜æ–¹æ³•ï¼šå› ä¸ºæˆå‘˜æ–¹æ³•å±äºå¯¹è±¡å®ä¾‹ï¼Œé™æ€æ–¹æ³•å±äºç±»æœ¬èº«ï¼Œé™æ€æ–¹æ³•ç¬¬ä¸€æ¬¡åŠ è½½(æ–¹æ³•åŒº)çš„æ—¶å€™è¿˜æ²¡æœ‰å¯¹è±¡(å †)ï¼Œä¹Ÿå°±æ— æ³•è°ƒç”¨æˆå‘˜æ–¹æ³•</li>
<li>é™æ€ä»£ç å—ï¼ˆStatic Blocksï¼‰ï¼šæ˜¯åŒ…å«åœ¨ç±»ä¸­çš„é™æ€å—ï¼Œå®ƒåœ¨ç±»åŠ è½½æ—¶æ‰§è¡Œï¼Œå¹¶ä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚é€šå¸¸ç”¨äºåˆå§‹åŒ–é™æ€å˜é‡æˆ–æ‰§è¡Œä¸€äº›é™æ€çš„åˆå§‹åŒ–æ“ä½œã€‚</li>
<li>é™æ€å†…éƒ¨ç±»ï¼ˆStatic Inner Classesï¼‰ï¼šåœ¨ç±»ä¸­ä½¿ç”¨ <code>static</code> å…³é”®å­—ä¿®é¥°çš„å†…éƒ¨ç±»ã€‚é™æ€å†…éƒ¨ç±»ä¸å¤–éƒ¨ç±»å®ä¾‹æ— å…³ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å¤–éƒ¨ç±»åè®¿é—®ã€‚<br>  åœ¨ä½¿ç”¨é™æ€æˆå‘˜æ—¶éœ€è¦æ³¨æ„ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸä¸ç±»çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒï¼Œå½“ç±»åŠ è½½æ—¶ä¼šè¢«åˆå§‹åŒ–ã€‚é™æ€æˆå‘˜å±äºç±»è€Œä¸æ˜¯å¯¹è±¡ï¼Œåœ¨åˆé€‚çš„åœºæ™¯ä¸‹èƒ½æä¾›ä¾¿åˆ©å’Œæ•ˆç‡ã€‚ç„¶è€Œï¼Œè¿‡åº¦ä½¿ç”¨é™æ€æˆå‘˜å¯èƒ½ä¼šå¯¼è‡´è€¦åˆåº¦é«˜å’Œéš¾ä»¥æµ‹è¯•ç­‰é—®é¢˜ï¼Œå› æ­¤éœ€è¦æ ¹æ®å®é™…æƒ…å†µæ…é‡ä½¿ç”¨ã€‚</li>
</ol>
</li>
<li><p>å†…éƒ¨ç±»ä¸é™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ</p>
<ul>
<li>é™æ€å†…éƒ¨ç±»ç›¸å¯¹ä¸å¤–éƒ¨ç±»æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œåœ¨é™æ€å†…éƒ¨ç±»ä¸­æ— æ³•ç›´æ¥è®¿é—®å¤–éƒ¨ç±»ä¸­å˜é‡ã€æ–¹æ³•ã€‚å¦‚æœè¦è®¿é—®çš„è¯ï¼Œå¿…é¡»è¦newä¸€ä¸ªå¤–éƒ¨ç±»çš„å¯¹è±¡ï¼Œä½¿ç”¨newå‡ºæ¥çš„å¯¹è±¡æ¥è®¿é—®ã€‚ä½†æ˜¯å¯ä»¥ç›´æ¥è®¿é—®é™æ€çš„å˜é‡ã€è°ƒç”¨é™æ€çš„æ–¹æ³•ï¼›</li>
<li>æ™®é€šå†…éƒ¨ç±»ä½œä¸ºå¤–éƒ¨ç±»ä¸€ä¸ªæˆå‘˜è€Œå­˜åœ¨ï¼Œåœ¨æ™®é€šå†…éƒ¨ç±»ä¸­å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»å±æ€§ï¼Œè°ƒç”¨å¤–éƒ¨ç±»çš„æ–¹æ³•ã€‚</li>
<li>å¦‚æœå¤–éƒ¨ç±»è¦è®¿é—®å†…éƒ¨ç±»çš„å±æ€§æˆ–è€…è°ƒç”¨å†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œå¿…é¡»è¦åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»çš„å¯¹è±¡ï¼Œä½¿ç”¨è¯¥å¯¹è±¡è®¿é—®å±æ€§æˆ–è€…è°ƒç”¨æ–¹æ³•ã€‚</li>
<li>å¦‚æœå…¶ä»–çš„ç±»è¦è®¿é—®æ™®é€šå†…éƒ¨ç±»çš„å±æ€§æˆ–è€…è°ƒç”¨æ™®é€šå†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œå¿…é¡»è¦åœ¨å¤–éƒ¨ç±»ä¸­åˆ›å»ºä¸€ä¸ªæ™®é€šå†…éƒ¨ç±»çš„å¯¹è±¡ä½œä¸ºä¸€ä¸ªå±æ€§ï¼Œå¤–åŒç±»å¯ä»¥é€šè¿‡è¯¥å±æ€§è°ƒç”¨æ™®é€šå†…éƒ¨ç±»çš„æ–¹æ³•æˆ–è€…è®¿é—®æ™®é€šå†…éƒ¨ç±»çš„å±æ€§ã€‚</li>
<li>å¦‚æœå…¶ä»–çš„ç±»è¦è®¿é—®é™æ€å†…éƒ¨ç±»çš„å±æ€§æˆ–è€…è°ƒç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªé™æ€å†…éƒ¨ç±»å¯¹è±¡å³å¯ã€‚</li>
</ul>
</li>
<li><p>é™æ€å˜é‡ã€é™æ€ä»£ç å—ã€æ™®é€šä»£ç å—å’Œæ„é€ æ–¹æ³•çš„æ‰§è¡Œé¡ºåºï¼Ÿ<br>  æ‰§è¡Œé¡ºåºå¯ä»¥æ€»ç»“ä¸ºï¼šé™æ€å˜é‡ï¼ˆæŒ‰å®šä¹‰é¡ºåºåˆå§‹åŒ–ï¼‰ -&gt; é™æ€ä»£ç å—ï¼ˆæŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œï¼‰ -&gt; æ™®é€šä»£ç å—ï¼ˆå¯¹è±¡å®ä¾‹åŒ–æ—¶æŒ‰ç…§å®šä¹‰é¡ºåºæ‰§è¡Œï¼‰ -&gt; æ„é€ æ–¹æ³•ã€‚</p>
<ol>
<li>é™æ€å˜é‡ï¼ˆé™æ€æˆå‘˜å˜é‡ï¼‰ï¼šåœ¨ç±»åŠ è½½æ—¶æŒ‰ç…§å®šä¹‰çš„é¡ºåºä¾æ¬¡æ‰§è¡Œåˆå§‹åŒ–ï¼Œä¸è®ºè¯¥å˜é‡åœ¨ç±»ä¸­å®šä¹‰çš„ä½ç½®å¦‚ä½•ï¼Œåªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚</li>
<li>é™æ€ä»£ç å—ï¼ˆStatic Blocksï¼‰ï¼šé™æ€ä»£ç å—åœ¨ç±»åŠ è½½æ—¶æ‰§è¡Œï¼Œä¼˜å…ˆäºæ™®é€šä»£ç å—å’Œæ„é€ æ–¹æ³•ã€‚é™æ€ä»£ç å—åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li>æ„é€ ä»£ç å—ï¼ˆæ™®é€šåˆå§‹åŒ–å—ï¼‰ï¼šæ„é€ ä»£ç å—åœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶æ‰§è¡Œï¼Œåœ¨æ„é€ æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚æ¯æ¬¡åˆ›å»ºå¯¹è±¡éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li>æ„é€ æ–¹æ³•ï¼ˆConstructorï¼‰ï¼šæ„é€ æ–¹æ³•åœ¨å¯¹è±¡åˆ›å»ºæ—¶æ‰§è¡Œï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡ã€‚æ„é€ ä»£ç å—æ‰§è¡Œå®Œæ¯•åæ‰§è¡Œã€‚</li>
</ol>
</li>
<li><p>å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œä¸”éƒ½åŒ…å«é™æ€æ–¹æ³•ã€æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆé™æ€å˜é‡ã€é™æ€ä»£ç å—ã€æ™®é€šä»£ç å—å’Œæ„é€ æ–¹æ³•çš„æ‰§è¡Œé¡ºåºï¼Ÿ<br>é¡ºåºï¼šçˆ¶ç±»é™æ€æ–¹æ³• -&gt; çˆ¶ç±»é™æ€ä»£ç å— -&gt; å­ç±»é™æ€æ–¹æ³• -&gt; å­ç±»é™æ€ä»£ç å— -&gt; çˆ¶ç±»æ„é€ ä»£ç å— -&gt; çˆ¶ç±»æ„é€ æ–¹æ³• -&gt; å­ç±»æ„é€ ä»£ç å— -&gt; å­ç±»æ„é€ æ–¹æ³•</p>
</li>
<li><p>finalåœ¨javaä¸­çš„ä½œç”¨ï¼Œæœ‰å“ªäº›ç”¨æ³•?</p>
<ol>
<li>è¢«finalä¿®é¥°çš„ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿</li>
<li>è¢«finalä¿®é¥°çš„æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™</li>
<li>è¢«finalä¿®é¥°çš„å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜.å¦‚æœä¿®é¥°å¼•ç”¨,é‚£ä¹ˆè¡¨ç¤ºå¼•ç”¨ä¸å¯å˜,å¼•ç”¨æŒ‡å‘çš„å†…å®¹å¯å˜.</li>
<li>è¢«finalä¿®é¥°çš„æ–¹æ³•,JVMä¼šå°è¯•å°†å…¶å†…è”,ä»¥æé«˜è¿è¡Œæ•ˆç‡</li>
<li>è¢«finalä¿®é¥°çš„å¸¸é‡,åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥å¸¸é‡æ± ä¸­.<br>  é™¤æ­¤ä¹‹å¤–,ç¼–è¯‘å™¨å¯¹finalåŸŸè¦éµå®ˆçš„ä¸¤ä¸ªé‡æ’åºè§„åˆ™æ›´å¥½:åœ¨æ„é€ å‡½æ•°å†…å¯¹ä¸€ä¸ªfinalåŸŸçš„å†™å…¥,ä¸éšåæŠŠè¿™ä¸ªè¢«æ„é€ å¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡,è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åºåˆæ¬¡è¯»ä¸€ä¸ªåŒ…å«fifinalåŸŸçš„å¯¹è±¡çš„å¼•ç”¨,ä¸éšååˆæ¬¡è¯»è¿™ä¸ªfifinalåŸŸ,è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åº</li>
</ol>
</li>
<li><p>Javaä¸­çš„ç»§æ‰¿æ˜¯å•ç»§æ‰¿è¿˜æ˜¯å¤šç»§æ‰¿ï¼Ÿ<br>ç±»æ˜¯ä¸æ”¯æŒå¤šç»§æ‰¿çš„ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œ<br>ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œè¿™æ ·å°±å¯ä»¥è¾¾åˆ°ç±»å¯¹å¤šä¸ªæ¥å£çš„â€å¤šç»§æ‰¿â€æ•ˆæœã€‚æ¥å£ï¼ˆinterfaceï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»ï¼Œå®ƒå¯ä»¥è¢«ç±»å®ç°ï¼ˆimplementsï¼‰è€Œä¸æ˜¯è¢«ç»§æ‰¿ï¼ˆextendsï¼‰ã€‚æ¥å£ä¸­å®šä¹‰äº†ä¸€ç»„æŠ½è±¡æ–¹æ³•å’Œå¸¸é‡ï¼Œå®ç°è¯¥æ¥å£çš„ç±»å¿…é¡»å®ç°æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å­—æ®µå’Œæ–¹æ³•ã€‚</p>
</li>
<li><p>super() ä¸ this() è¡¨ç¤ºä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>superè¡¨ç¤ºå½“å‰ç±»çš„çˆ¶ç±»å¯¹è±¡ï¼ŒThisè¡¨ç¤ºå½“å‰ç±»çš„å¯¹è±¡ã€‚<code>super()</code> å’Œ <code>this()</code> éƒ½æ˜¯ç‰¹æ®Šçš„æ–¹æ³•è°ƒç”¨è¯­å¥ï¼Œç”¨äºè°ƒç”¨æ„é€ å™¨ï¼Œå¹¶ä¸”éƒ½åªèƒ½åœ¨æ„é€ å™¨ä¸­ä½¿ç”¨ï¼Œä¸èƒ½åœ¨æ™®é€šæ–¹æ³•ä¸­ä½¿ç”¨ã€‚å¦å¤–ï¼Œè°ƒç”¨æ„é€ å™¨æ—¶ä¸èƒ½å½¢æˆå¾ªç¯è°ƒç”¨ï¼Œå³ä¸èƒ½åœ¨åŒä¸€ä¸ªæ„é€ å™¨ä¸­åŒæ—¶è°ƒç”¨ <code>super()</code> å’Œ <code>this()</code>ã€‚</li>
<li><code>super()</code>ï¼šç”¨äºè°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ã€‚åœ¨å­ç±»çš„æ„é€ å™¨ä¸­ä½¿ç”¨ super() å¯ä»¥æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ï¼Œå¹¶ä¸”å¿…é¡»ä½œä¸ºå­ç±»æ„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥å‡ºç°ã€‚å¦‚æœå­ç±»æ„é€ å™¨æ²¡æœ‰æ˜¾å¼è°ƒç”¨ <code>super()</code>ï¼Œåˆ™ä¼šé»˜è®¤è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Child</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Child constructor&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>this()</code>ï¼šç”¨äºè°ƒç”¨å½“å‰ç±»çš„å…¶ä»–æ„é€ å™¨ã€‚åœ¨ä¸€ä¸ªç±»çš„æ„é€ å™¨ä¸­ä½¿ç”¨ this() å¯ä»¥è°ƒç”¨åŒä¸€ç±»ä¸­çš„å…¶ä»–æ„é€ å™¨ï¼Œå¹¶ä¸”å¿…é¡»ä½œä¸ºæ„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥å‡ºç°ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="number">0</span>); <span class="comment">// è°ƒç”¨å½“å‰ç±»çš„å¸¦å‚æ„é€ å™¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Default constructor&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        System.out.println(<span class="string">&quot;Parameterized constructor&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æŠ½è±¡ç±»ï¼ˆAbstract Classï¼‰ï¼š</p>
<ol>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæŠ½è±¡ç±»æ˜¯ä¸€ç§ä¸èƒ½è¢«å®ä¾‹åŒ–çš„ç±»ï¼Œé€šå¸¸ç”¨äºå®šä¹‰å…¶ä»–ç±»çš„ç»“æ„å’Œè¡Œä¸ºã€‚å®ƒå¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ˆåªæœ‰æ–¹æ³•ç­¾åï¼Œæ²¡æœ‰å…·ä½“å®ç°ï¼‰ï¼Œä»¥åŠæ™®é€šçš„æ–¹æ³•å’Œå­—æ®µã€‚ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚å¯ä»¥åŒ…å«æ„é€ å‡½æ•°ï¼Œå¯ä»¥æœ‰è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublicã€privateã€protectedï¼‰çš„æ–¹æ³•ã€‚å­ç±»å¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œé™¤éå­ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“éœ€è¦åˆ›å»ºä¸€ä¸ªç±»ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰ä¸€äº›æ–¹æ³•çš„è¡Œä¸ºï¼Œä½†ä¸å¸Œæœ›è¯¥ç±»è¢«å®ä¾‹åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»ã€‚æŠ½è±¡ç±»ä¹Ÿé€‚åˆç”¨äºåœ¨ç±»å±‚æ¬¡ç»“æ„ä¸­ä½œä¸ºå…¶ä»–ç±»çš„åŸºç±»ï¼Œæä¾›é€šç”¨æ–¹æ³•å’Œå­—æ®µï¼Œè€Œå…·ä½“å®ç°äº¤ç»™å…¶å­ç±»ã€‚</li>
<li>æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“ä¸éœ€è¦ä½¿ç”¨ <code>&#123;&#125;</code>ï¼ŒæŠ½è±¡æ–¹æ³•æ˜¯æŒ‡æ²¡æœ‰å…·ä½“å®ç°çš„æ–¹æ³•ã€‚åªéœ€åœ¨æ–¹æ³•ç­¾ååé¢åŠ ä¸Šåˆ†å·å³å¯ï¼Œä¸éœ€è¦æä¾›æ–¹æ³•ä½“ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractClass</span> &#123;</span><br><span class="line">    <span class="comment">// æŠ½è±¡æ–¹æ³•ï¼Œæ²¡æœ‰æ–¹æ³•ä½“</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">abstractMethod</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// å…·ä½“æ–¹æ³•ï¼Œæœ‰æ–¹æ³•ä½“</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">concreteMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;This is a concrete method.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>æ™®é€šç±»ä¸æŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>æ™®é€šç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼›<br>æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œæ™®é€šç±»å¯ä»¥ç›´æ¥å®ä¾‹åŒ–</p>
</li>
<li><p>æŠ½è±¡çš„æ–¹æ³•æ˜¯å¦å¯åŒæ—¶æ˜¯é™æ€çš„,æ˜¯å¦å¯åŒæ—¶æ˜¯æœ¬åœ°æ–¹æ³•ï¼ˆnativeï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶è¢« synchronizedä¿®é¥°ï¼Ÿ<br>éƒ½ä¸èƒ½ã€‚æŠ½è±¡æ–¹æ³•éœ€è¦å­ç±»é‡å†™ï¼Œè€Œé™æ€çš„æ–¹æ³•æ˜¯æ— æ³•è¢«é‡å†™çš„ï¼Œå› æ­¤äºŒè€…æ˜¯çŸ›ç›¾çš„ã€‚æœ¬åœ°æ–¹æ³•æ˜¯ç”±æœ¬åœ°ä»£ç ï¼ˆå¦‚ C ä»£ç ï¼‰å®ç°çš„æ–¹æ³•ï¼Œè€ŒæŠ½è±¡æ–¹æ³•æ˜¯æ²¡æœ‰å®ç°çš„ï¼Œä¹Ÿæ˜¯çŸ›ç›¾çš„ã€‚synchronized å’Œæ–¹æ³•çš„å®ç°ç»†èŠ‚æœ‰å…³ï¼ŒæŠ½è±¡æ–¹æ³•ä¸æ¶‰åŠå®ç°ç»†èŠ‚ï¼Œå› æ­¤ä¹Ÿæ˜¯ç›¸äº’çŸ›ç›¾çš„ã€‚</p>
</li>
<li><p>abstract å’Œ final åŒæ—¶ç”¨æ¥ä¿®é¥°åŒä¸€ä¸ªç±»æˆ–æ–¹æ³•ï¼Ÿ<br>å¦‚æœä¸€ä¸ªç±»ä½¿ç”¨äº†<code>abstract</code>ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯æŠ½è±¡ç±»ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œå¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚<br>å¦‚æœä¸€ä¸ªç±»ä½¿ç”¨äº†<code>final</code>ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯æœ€ç»ˆç±»ï¼Œä¸èƒ½è¢«å…¶ä»–ç±»ç»§æ‰¿ã€‚<br>å¦‚æœä¸€ä¸ªæ–¹æ³•ä½¿ç”¨äº†<code>public abstract</code>ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¿™ä¸ªæ–¹æ³•æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œåªæœ‰å£°æ˜æ²¡æœ‰å®ç°ï¼Œéœ€è¦åœ¨å­ç±»ä¸­å®ç°ã€‚<br>æ‰€ä»¥ï¼Œ<code>abstract final</code>ä¸èƒ½åŒæ—¶ä¿®é¥°ç±»æˆ–æ–¹æ³•ã€‚<code>public abstract final</code>ä¹Ÿæ˜¯ä¸ç¬¦åˆJavaè¯­æ³•çš„ç»„åˆã€‚éœ€è¦æ ¹æ®å…·ä½“çš„éœ€æ±‚å’Œè®¾è®¡æ¥é€‰æ‹©é€‚å½“çš„ä¿®é¥°ç¬¦ã€‚</p>
</li>
<li><p>æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªé™æ€æ–¹æ³•å†…éƒ¨å‘å‡ºå¯¹éé™æ€æ–¹æ³•çš„è°ƒç”¨ï¼Ÿ<br>ä¸å¯ä»¥ï¼Œé™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼Œå› ä¸ºéé™æ€æ–¹æ³•çš„è°ƒç”¨è¦å…ˆåˆ›å»ºå¯¹è±¡ï¼Œåœ¨è°ƒç”¨é™æ€æ–¹æ³•æ—¶å¯èƒ½å¯¹è±¡å¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–ã€‚</p>
</li>
<li><p>æ¥å£ï¼ˆInterfaceï¼‰ï¼š</p>
<ol>
<li>ç‰¹ç‚¹ï¼šæ¥å£æ˜¯ä¸€ç§å®Œå…¨æŠ½è±¡çš„ç±»åˆ«ï¼Œå…¶ä¸­åªåŒ…å«æ–¹æ³•çš„ç­¾åï¼Œä½†æ²¡æœ‰æ–¹æ³•çš„å®é™…å®ç°ã€‚ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†æ¥å£ä¸èƒ½åŒ…å«å­—æ®µæˆ–éæŠ½è±¡æ–¹æ³•ï¼ˆåœ¨Java 8ä¹‹åï¼Œå¼•å…¥äº†é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ï¼‰ã€‚æ¥å£å°±æ˜¯æŸä¸ªäº‹ç‰©å¯¹å¤–æä¾›çš„ä¸€äº›åŠŸèƒ½çš„å£°æ˜ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„javaç±»ï¼Œæ¥å£å¼¥è¡¥äº†javaå•ç»§æ‰¿çš„ç¼ºç‚¹ã€‚</li>
<li>ä½¿ç”¨åœºæ™¯ï¼šå½“ä¸åŒç±»éœ€è¦å…±äº«æŸäº›è¡Œä¸ºï¼Œä½†å®ƒä»¬å±äºä¸åŒçš„ç±»å±‚æ¬¡ç»“æ„æ—¶ï¼Œæ¥å£æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚æ¥å£å…è®¸ç±»å®šä¹‰ä¸€ç»„è§„èŒƒï¼Œä»¥ç¡®ä¿å®ç°ç±»å¿…é¡»æä¾›æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ã€‚å¯ä»¥ä½¿ç”¨æ¥å£æ¥å®ç°å¤šæ€æ€§ï¼Œå…è®¸ä¸åŒçš„ç±»å®ç°ç›¸åŒçš„æ¥å£å¹¶å…·æœ‰ä¸åŒçš„è¡Œä¸ºã€‚</li>
<li>æ¥å£æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ<br>  æ¥å£ä¸­å£°æ˜å…¨æ˜¯public static finalä¿®é¥°çš„å¸¸é‡<br>  æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•<br>  æ¥å£æ˜¯æ²¡æœ‰æ„é€ æ–¹æ³•çš„<br>  æ¥å£ä¹Ÿä¸èƒ½ç›´æ¥å®ä¾‹åŒ–<br>  æ¥å£å¯ä»¥å¤šç»§æ‰¿</li>
</ol>
</li>
<li><p><strong>æ¥å£ä¸æŠ½è±¡ç±»ï¼ï¼Ÿ</strong></p>
<ul>
<li>æ¥å£å’ŒæŠ½è±¡ç±»éƒ½æ˜¯ä¸ºäº†å®ç°ä»£ç çš„é‡ç”¨å’Œæä¾›ä¸€è‡´çš„ç¼–ç¨‹æ¥å£è€Œè®¾è®¡çš„ã€‚ç„¶è€Œï¼Œæ¥å£æ›´å¤šåœ°ç”¨äºå®šä¹‰è§„èŒƒå’ŒåˆåŒï¼Œä»¥ç¡®ä¿å®ç°ç±»æä¾›ç‰¹å®šçš„è¡Œä¸ºï¼Œè€ŒæŠ½è±¡ç±»æ›´å¤šåœ°ç”¨äºæä¾›ä¸€äº›é€šç”¨çš„æ–¹æ³•å’Œè¡Œä¸ºå®ç°ã€‚<ul>
<li>æŠ½è±¡ç±»å’Œæ¥å£éƒ½ç”¨äºå®ç°å¤šæ€æ€§å’Œæä¾›ä¸€è‡´çš„ç¼–ç¨‹æ¥å£ã€‚å®ƒä»¬é€šå¸¸ç”¨äºå¤§å‹é¡¹ç›®ä¸­çš„ç±»å±‚æ¬¡ç»“æ„è®¾è®¡å’Œä»£ç ç»„ç»‡ã€‚</li>
<li>åœ¨è®¾è®¡æ¡†æ¶æˆ–åº“æ—¶ï¼Œæ¥å£æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œå› ä¸ºå®ƒå¯ä»¥å®šä¹‰è§„èŒƒå’Œæ ‡å‡†ï¼Œå¹¶å…è®¸ç”¨æˆ·é€šè¿‡å®ç°æ¥å£æ¥æä¾›è‡ªå®šä¹‰è¡Œä¸ºã€‚</li>
<li>æŠ½è±¡ç±»ç”¨äºå°†ä¸€äº›é€šç”¨æ–¹æ³•å’Œå­—æ®µæå–åˆ°ä¸€ä¸ªçˆ¶ç±»ä¸­ï¼Œä»¥ä¾¿å­ç±»å¯ä»¥ç»§æ‰¿å’Œå…±äº«è¿™äº›åŠŸèƒ½ã€‚</li>
</ul>
</li>
<li>æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«?<ul>
<li>æŠ½è±¡ç±»ï¼š1. æŠ½è±¡æ–¹æ³•ï¼Œåªæœ‰è¡Œä¸ºçš„æ¦‚å¿µï¼Œæ²¡æœ‰å…·ä½“çš„è¡Œä¸ºå®ç°ã€‚ä½¿ç”¨abstractå…³é”®å­—ä¿®é¥°ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ã€‚å­ç±»å¿…é¡»é‡å†™è¿™äº›æŠ½è±¡æ–¹æ³•ã€‚2. åŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»ï¼Œä¸€å®šæ˜¯æŠ½è±¡ç±»ã€‚3. <strong>æŠ½è±¡ç±»åªèƒ½è¢«ç»§æ‰¿</strong>ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚</li>
<li>æ¥å£ï¼š1. å…¨éƒ¨çš„æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œå±æ€§éƒ½æ˜¯å¸¸é‡ 2. ä¸èƒ½å®ä¾‹åŒ–ï¼Œå¯ä»¥å®šä¹‰å˜é‡ã€‚3. æ¥å£å˜é‡å¯ä»¥å¼•ç”¨å…·ä½“å®ç°ç±»çš„å®ä¾‹ 4. <strong>æ¥å£åªèƒ½è¢«å®ç°</strong>ï¼Œä¸€ä¸ªå…·ä½“ç±»å®ç°æ¥å£ï¼Œå¿…é¡»å®ç°å…¨éƒ¨çš„æŠ½è±¡æ–¹æ³• 5. æ¥å£ä¹‹é—´å¯ä»¥å¤šå®ç° 6. ä¸€ä¸ªå…·ä½“ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œå®ç°å¤šç»§æ‰¿ç°è±¡</li>
</ul>
</li>
<li>æŠ½è±¡ç±»å’Œæ¥å£æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ<br>  æŠ½è±¡ç±»å’Œæ¥å£éƒ½ä¸èƒ½å¤Ÿå®ä¾‹åŒ–ï¼Œä½†å¯ä»¥å®šä¹‰æŠ½è±¡ç±»å’Œæ¥å£ç±»å‹çš„å¼•ç”¨ã€‚ä¸€ä¸ªç±»å¦‚æœç»§æ‰¿äº†æŸä¸ªæŠ½è±¡ç±»æˆ–è€…å®ç°äº†æŸä¸ªæ¥å£éƒ½éœ€è¦å¯¹å…¶ä¸­çš„æŠ½è±¡æ–¹æ³•å…¨éƒ¨è¿›è¡Œå®ç°ï¼Œå¦åˆ™è¯¥ç±»ä»ç„¶éœ€è¦è¢«å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚æ¥å£æ¯”æŠ½è±¡ç±»æ›´åŠ æŠ½è±¡ï¼Œå› ä¸ºæŠ½è±¡ç±»ä¸­å¯ä»¥å®šä¹‰æ„é€ å™¨ï¼Œå¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•å’Œå…·ä½“æ–¹æ³•ï¼Œè€Œæ¥å£ä¸­ä¸èƒ½å®šä¹‰æ„é€ å™¨è€Œä¸”å…¶ä¸­çš„æ–¹æ³•å…¨éƒ¨éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ã€‚æŠ½è±¡ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯ privateã€é»˜è®¤ã€protectedã€public çš„ï¼Œè€Œæ¥å£ä¸­çš„æˆå‘˜å…¨éƒ½æ˜¯ public çš„ã€‚æŠ½è±¡ç±»ä¸­å¯ä»¥å®šä¹‰æˆå‘˜å˜é‡ï¼Œè€Œæ¥å£ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å®é™…ä¸Šéƒ½æ˜¯å¸¸é‡ã€‚æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»è¢«å£°æ˜ä¸ºæŠ½è±¡ç±»ï¼Œè€ŒæŠ½è±¡ç±»æœªå¿…è¦æœ‰æŠ½è±¡æ–¹æ³•ã€‚</li>
</ul>
</li>
<li><p>æ¥å£æ˜¯å¦å¯ç»§æ‰¿æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯å®ç°æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å…·ä½“ç±»ï¼Ÿ<br>æ¥å£å¯ä»¥ç»§æ‰¿æ¥å£ ï¼Œè€Œä¸”æ”¯æŒ å¤šé‡ç»§æ‰¿ ã€‚ æŠ½è±¡ç±» å¯ä»¥ å®ç°æ¥å£ ï¼Œ æŠ½è±¡ç±» å¯ç»§æ‰¿ å…·ä½“ç±» ä¹Ÿå¯ä»¥ ç»§æ‰¿æŠ½è±¡ç±» ã€‚</p>
</li>
<li><p>Anonymous Inner Class(åŒ¿åå†…éƒ¨ç±»)æ˜¯å¦å¯ä»¥ç»§æ‰¿å…¶å®ƒç±»ï¼Ÿæ˜¯å¦å¯ä»¥å®ç°æ¥å£ï¼Ÿ<br>å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»æˆ–å®ç°å…¶ä»–æ¥å£ï¼Œåœ¨ Swing ç¼–ç¨‹å’Œ Android å¼€å‘ä¸­å¸¸ç”¨æ­¤æ–¹å¼æ¥å®ç°äº‹ä»¶ç›‘å¬å’Œå›è°ƒã€‚ </p>
</li>
<li><p>å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å®ƒçš„åŒ…å«ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰çš„æˆå‘˜å—ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ<br>ä¸€ä¸ªå†…éƒ¨ç±»å¯¹è±¡å¯ä»¥è®¿é—®åˆ›å»ºå®ƒçš„å¤–éƒ¨ç±»å¯¹è±¡çš„æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰æˆå‘˜ã€‚</p>
</li>
<li><p>åŒ¿åç±»ï¼ŒåŒ¿åå†…éƒ¨ç±»ã€‚<br>  Javaä¸­çš„ä¸¤ä¸ªç›¸å…³ä½†ä¸åŒçš„æ¦‚å¿µï¼Œå®ƒä»¬é€šå¸¸ç”¨äºåˆ›å»ºä¸´æ—¶çš„ã€ä¸€æ¬¡æ€§çš„ç±»å®ä¾‹ã€‚</p>
<ul>
<li>åŒ¿åç±»ï¼š<ol>
<li>æ¦‚å¿µï¼š åŒ¿åç±»æ˜¯æŒ‡æ²¡æœ‰æ˜ç¡®å‘½åçš„ç±»ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºä¸€ä¸ªå®ç°æŸä¸ªæ¥å£æˆ–ç»§æ‰¿æŸä¸ªç±»çš„å¯¹è±¡ã€‚</li>
<li>è¯­æ³•ï¼š åŒ¿åç±»çš„è¯­æ³•å½¢å¼æ˜¯é€šè¿‡ <code>new</code> å…³é”®å­—åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„åŒæ—¶å®ç°æ¥å£æˆ–ç»§æ‰¿ç±»ï¼Œå¹¶åœ¨èŠ±æ‹¬å·å†…å®šä¹‰ç±»çš„å®ç°ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SomeInterface</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SomeInterface</span>() &#123;</span><br><span class="line">    <span class="comment">// åŒ¿åç±»çš„å®ç°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> åŒ¿åç±»é€šå¸¸ç”¨äºåˆ›å»ºç®€å•çš„ã€ä¸€æ¬¡æ€§çš„ç±»å®ä¾‹ï¼Œä¸éœ€è¦ä¸ºå…¶å®šä¹‰ä¸“é—¨çš„ç±»åã€‚</li>
</ol>
</li>
<li>åŒ¿åå†…éƒ¨ç±»ï¼š<ol>
<li><strong>æ¦‚å¿µï¼š</strong> åŒ¿åå†…éƒ¨ç±»æ˜¯æŒ‡å®šä¹‰åœ¨å…¶ä»–ç±»å†…éƒ¨ã€æ²¡æœ‰ç±»åçš„ç±»ã€‚é€šå¸¸ä½¿ç”¨å®ƒæ¥å®ç°æ¥å£æˆ–ç»§æ‰¿ç±»ï¼Œå¹¶åœ¨ç±»çš„å†…éƒ¨è¿›è¡Œå®ç°ã€‚</li>
<li><strong>è¯­æ³•ï¼š</strong> åŒ¿åå†…éƒ¨ç±»çš„è¯­æ³•å½¢å¼ä¸åŒ¿åç±»ç›¸ä¼¼ï¼Œä½†å®ƒé€šå¸¸åœ¨å…¶ä»–ç±»çš„æ–¹æ³•å†…éƒ¨å®šä¹‰ï¼Œè€Œä¸æ˜¯åœ¨ç±»çš„æˆå‘˜å˜é‡æˆ–å…¶ä»–åœ°æ–¹ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SomeClass</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SomeInterface</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SomeInterface</span>() &#123;</span><br><span class="line">            <span class="comment">// åŒ¿åå†…éƒ¨ç±»çš„å®ç°</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨åœºæ™¯ï¼š åŒ¿åå†…éƒ¨ç±»é€šå¸¸ç”¨äºåœ¨æ–¹æ³•å†…éƒ¨åˆ›å»ºä¸€ä¸ªå®ç°æŸä¸ªæ¥å£æˆ–ç»§æ‰¿æŸä¸ªç±»çš„ä¸´æ—¶å¯¹è±¡ï¼Œå®ƒæœ‰åŠ©äºç®€åŒ–ä»£ç ç»“æ„ï¼Œé¿å…ä¸ºä¸€æ¬¡æ€§çš„éœ€æ±‚ä¸“é—¨å®šä¹‰ä¸€ä¸ªæ–°çš„ç±»ã€‚<br> æ€»ä½“è€Œè¨€ï¼ŒåŒ¿åç±»å’ŒåŒ¿åå†…éƒ¨ç±»éƒ½æ˜¯ç”¨äºåˆ›å»ºä¸´æ—¶çš„ã€ä¸€æ¬¡æ€§çš„ç±»å®ä¾‹ï¼Œé€šå¸¸åœ¨éœ€è¦å®ç°æŸä¸ªæ¥å£æˆ–ç»§æ‰¿æŸä¸ªç±»çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚åœ¨Javaä¸­ï¼ŒLambda è¡¨è¾¾å¼çš„å¼•å…¥ä¹Ÿæä¾›äº†ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼æ¥å®ç°å‡½æ•°æ¥å£çš„åŒ¿åç±»ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>Javaçš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š</p>
<ul>
<li>å¼ºå¼•ç”¨ï¼šæ˜¯å¹³å¸¸ä¸­ä½¿ç”¨æœ€å¤šçš„å¼•ç”¨ï¼Œå¼ºå¼•ç”¨åœ¨ç¨‹åºå†…å­˜ä¸è¶³ï¼ˆOOMï¼‰çš„æ—¶å€™ä¹Ÿä¸ä¼šè¢«å›æ”¶  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;str&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>è½¯å¼•ç”¨ï¼šåœ¨ç¨‹åºå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šè¢«å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ï¼šwrfè¿™ä¸ªå¼•ç”¨ä¹Ÿæ˜¯å¼ºå¼•ç”¨ï¼Œå®ƒæ˜¯æŒ‡å‘SoftReferenceè¿™ä¸ªå¯¹è±¡çš„ï¼Œ</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„è½¯å¼•ç”¨æŒ‡çš„æ˜¯æŒ‡å‘new String(&quot;str&quot;)çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯SoftReferenceç±»ä¸­T</span></span><br><span class="line">SoftReference&lt;String&gt; wrf = <span class="keyword">new</span> <span class="title class_">SoftReference</span>&lt;String&gt;(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;str&quot;</span>));</span><br></pre></td></tr></table></figure>
  å¯ç”¨åœºæ™¯ï¼š åˆ›å»ºç¼“å­˜çš„æ—¶å€™ï¼Œåˆ›å»ºçš„å¯¹è±¡æ”¾è¿›ç¼“å­˜ä¸­ï¼Œå½“å†…å­˜ä¸è¶³æ—¶ï¼ŒJVMå°±ä¼šå›æ”¶æ—©å…ˆåˆ›å»ºçš„å¯¹è±¡ã€‚</li>
<li>å¼±å¼•ç”¨ï¼šåªè¦JVMåƒåœ¾å›æ”¶å™¨å‘ç°äº†å®ƒï¼Œå°±ä¼šå°†ä¹‹å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WeakReference&lt;String&gt; wrf= newWeakReference&lt;String&gt; (str);</span><br></pre></td></tr></table></figure>
  å¯ç”¨åœºæ™¯ï¼šJavaæºç ä¸­çš„jçš„java.util.WeakHashMapä¸­çš„keyå°±æ˜¯ä½¿ç”¨å¼±å¼•ç”¨ï¼Œæˆ‘çš„ç†è§£å°±æ˜¯ï¼Œä¸€æ—¦æˆ‘ä¸éœ€è¦æŸä¸ªå¼•ç”¨ï¼ŒJVMä¼šè‡ªåŠ¨å¸®æˆ‘å¤„ç†å®ƒï¼Œè¿™æ ·æˆ‘å°±ä¸éœ€è¦åšå…¶å®ƒæ“ä½œã€‚</li>
<li>è™šå¼•ç”¨ï¼šè™šå¼•ç”¨çš„å›æ”¶æœºåˆ¶è·Ÿå¼±å¼•ç”¨å·®ä¸å¤šï¼Œä½†æ˜¯å®ƒè¢«å›æ”¶ä¹‹å‰ï¼Œä¼šè¢«æ”¾å…¥ReferenceQueueä¸­ã€‚æ³¨æ„å“¦ï¼Œå…¶å®ƒå¼•ç”¨æ˜¯è¢«JVMå›æ”¶åæ‰è¢«ä¼ å…¥ReferenceQueueä¸­çš„ã€‚ç”±äºè¿™ä¸ªæœºåˆ¶ï¼Œæ‰€ä»¥è™šå¼•ç”¨å¤§å¤šè¢«ç”¨äºå¼•ç”¨é”€æ¯å‰çš„å¤„ç†å·¥ä½œã€‚è¿˜æœ‰å°±æ˜¯ï¼Œè™šå¼•ç”¨åˆ›å»ºçš„æ—¶å€™ï¼Œå¿…é¡»å¸¦æœ‰ReferenceQueueï¼Œä½¿ç”¨ä¾‹å­ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PhantomReference&lt;String&gt; prf = newPhantomReference&lt;String&gt;(newString(<span class="string">&quot;str&quot;</span>),newReferenceQueue&lt;&gt;());</span><br></pre></td></tr></table></figure>
  å¯ç”¨åœºæ™¯ï¼šå¯¹è±¡é”€æ¯å‰çš„ä¸€äº›æ“ä½œï¼Œæ¯”å¦‚è¯´èµ„æºé‡Šæ”¾ç­‰ã€‚Object.finalize() è™½ç„¶ä¹Ÿå¯ä»¥åšè¿™ç±»åŠ¨ä½œï¼Œä½†æ˜¯è¿™ä¸ªæ–¹å¼å³ä¸å®‰å…¨åˆä½æ•ˆ</li>
<li>ï¼Ÿï¼Ÿï¼Ÿä¸Šè¯‰æ‰€è¯´çš„å‡ ç±»å¼•ç”¨ï¼Œéƒ½æ˜¯æŒ‡å¯¹è±¡æœ¬èº«çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯æŒ‡ Reference çš„å››ä¸ªå­ç±»çš„å¼•ç”¨</li>
</ul>
</li>
<li><p>æ³¨è§£ Annotation<br>æ³¨è§£åœ¨æˆ‘çš„ç†è§£ä¸‹ï¼Œå°±æ˜¯ä»£ç ä¸­çš„ç‰¹æ®Šæ ‡è®°ï¼Œè¿™äº›æ ‡è®°å¯ä»¥åœ¨ç¼–è¯‘ã€ç±»åŠ è½½ã€è¿è¡Œæ—¶è¢«è¯»å–ï¼Œå¹¶æ‰§è¡Œç›¸å¯¹åº”çš„å¤„ç†ã€‚æ³¨è§£æœ¬èº«åªæ˜¯å…ƒæ•°æ®ï¼Œå®ƒæœ¬èº«ä¸æ‰§è¡Œä»»ä½•åŠŸèƒ½ã€‚å…·ä½“çš„å®ç°é€šå¸¸æ˜¯åœ¨æŸä¸ªæ‹¦æˆªå™¨ã€åˆ‡é¢ï¼ˆAspectï¼‰æˆ–å…¶ä»–å¤„ç†æœºåˆ¶ä¸­å®Œæˆçš„ã€‚<br>æ³¨è§£åœ¨å¼€å‘ä¸­æ˜¯éå¸¸å¸¸è§çš„ï¼Œæ¯”å¦‚Springæ¡†æ¶çš„ @Controller &#x2F; @Param &#x2F; @Select ç­‰ç­‰ã€‚ä¸€äº›é¡¹ç›®ä¹Ÿç”¨åˆ°lombokçš„æ³¨è§£ï¼Œ@Slf4j &#x2F; @Data ç­‰ç­‰ã€‚JavaåŸç”Ÿä¹Ÿæœ‰@Overriedã€@Deprecatedã€@FunctionalInterfaceç­‰åŸºæœ¬æ³¨è§£ã€‚<br>JavaåŸç”Ÿçš„åŸºæœ¬æ³¨è§£å¤§å¤šæ•°ç”¨äºã€Œæ ‡è®°ã€å’Œã€Œæ£€æŸ¥ã€è¿˜ï¼Œæ­¤å¤–æœ‰ä¸€ç§å«åšå…ƒAnnotationï¼ˆå…ƒæ³¨è§£ï¼‰ï¼Œæ‰€è°“çš„å…ƒAnnotationå°±æ˜¯ç”¨æ¥ä¿®é¥°æ³¨è§£çš„ã€‚<br>é‚£ä½ è‡ªå·±å†™è¿‡æ³¨è§£å—ï¼Ÿ<br>@Passtokenï¼Œï¼Œæµ‹è¯•æ—¶åŠ ä¸Šæ­¤æ³¨è§£ï¼Œå‘é€è¯·æ±‚æ—¶ä¸ç”¨éªŒè¯ç™»å½•ä¿¡æ¯ï¼Œï¼Œ<br>JunboRestResponseï¼šä½¿ç”¨è¯¥æ³¨è§£ï¼Œç¡®ä¿è¢«æ³¨è§£çš„æ–¹æ³•æˆ–ç±»è¿”å›ä¸€ä¸ªç‰¹å®šçš„â€œéªä¼¯å“åº”â€æ ¼å¼ã€‚ï¼Ÿï¼Ÿï¼Ÿå¦‚ä½•å®ç°ï¼Ÿï¼Ÿ</p>
</li>
<li><p>4ç§æ ‡å‡†å…ƒæ³¨è§£æ˜¯å“ªå››ç§ï¼Ÿ<br>  å…ƒæ³¨è§£çš„ä½œç”¨æ˜¯è´Ÿè´£æ³¨è§£å…¶ä»–æ³¨è§£ã€‚Java5.0 å®šä¹‰äº† 4 ä¸ªæ ‡å‡†çš„ meta-annotation ç±»å‹ï¼Œè¢«ç”¨æ¥æä¾›å¯¹å…¶å®ƒ annotation ç±»å‹ä½œè¯´æ˜ã€‚</p>
<ul>
<li>@Target ä¿®é¥°çš„å¯¹è±¡èŒƒå›´<br>  @Targetè¯´æ˜äº†Annotationæ‰€ä¿®é¥°çš„å¯¹è±¡èŒƒå›´ï¼š Annotationå¯è¢«ç”¨äº packagesã€typesï¼ˆç±»ã€æ¥å£ã€æšä¸¾ã€Annotation ç±»å‹ï¼‰ã€ç±»å‹æˆå‘˜ï¼ˆæ–¹æ³•ã€æ„é€ æ–¹æ³•ã€æˆå‘˜å˜é‡ã€æšä¸¾å€¼ï¼‰ã€æ–¹æ³•å‚æ•°å’Œæœ¬åœ°å˜é‡ï¼ˆå¦‚å¾ªç¯å˜é‡ã€catch å‚æ•°ï¼‰ã€‚åœ¨ Annotation ç±»å‹çš„å£°æ˜ä¸­ä½¿ç”¨äº† targetå¯æ›´åŠ æ˜æ™°å…¶ä¿®é¥°çš„ç›®æ ‡</li>
<li>@Retention å®šä¹‰ è¢«ä¿ç•™çš„æ—¶é—´é•¿çŸ­<br>  Retention å®šä¹‰äº†è¯¥ Annotation è¢«ä¿ç•™çš„æ—¶é—´é•¿çŸ­ï¼šè¡¨ç¤ºéœ€è¦åœ¨ä»€ä¹ˆçº§åˆ«ä¿å­˜æ³¨è§£ä¿¡æ¯ï¼Œç”¨äºæè¿°æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆå³ï¼šè¢«æè¿°çš„æ³¨è§£åœ¨ä»€ä¹ˆèŒƒå›´å†…æœ‰æ•ˆï¼‰ï¼Œå–å€¼ï¼ˆRetentionPoicyï¼‰<br>  ç”±ï¼š1. SOURCE:åœ¨æºæ–‡ä»¶ä¸­æœ‰æ•ˆï¼ˆå³æºæ–‡ä»¶ä¿ç•™ï¼‰2. CLASS:åœ¨ class æ–‡ä»¶ä¸­æœ‰æ•ˆï¼ˆå³ class ä¿ç•™ï¼‰3. RUNTIME:åœ¨è¿è¡Œæ—¶æœ‰æ•ˆï¼ˆå³è¿è¡Œæ—¶ä¿ç•™ï¼‰4.</li>
<li>@Documented æè¿°-javadoc<br>  @Documented ç”¨äºæè¿°å…¶å®ƒç±»å‹çš„ annotation åº”è¯¥è¢«ä½œä¸ºè¢«æ ‡æ³¨çš„ç¨‹åºæˆå‘˜çš„å…¬å…± APIï¼Œå› æ­¤å¯ä»¥è¢«ä¾‹å¦‚  javadoc æ­¤ç±»çš„å·¥å…·æ–‡æ¡£åŒ–ã€‚</li>
<li>@Inherited é˜è¿°äº†æŸä¸ªè¢«æ ‡æ³¨çš„ç±»å‹æ˜¯è¢«ç»§æ‰¿çš„<br>  @Inherited å…ƒæ³¨è§£æ˜¯ä¸€ä¸ªæ ‡è®°æ³¨è§£ï¼Œ@Inherited é˜è¿°äº†æŸä¸ªè¢«æ ‡æ³¨çš„ç±»å‹æ˜¯è¢«ç»§æ‰¿çš„ã€‚å¦‚æœä¸€ä¸ªä½¿ç”¨äº†@Inherited ä¿®é¥°çš„ annotation ç±»å‹è¢«ç”¨äºä¸€ä¸ª classï¼Œåˆ™è¿™ä¸ª annotation å°†è¢«ç”¨äºè¯¥class çš„å­ç±»ã€‚</li>
</ul>
</li>
<li><p>finalã€finalize()ã€finally</p>
<ul>
<li>æ€§è´¨ä¸åŒï¼š1. finalä¸ºå…³é”®å­—ï¼›2. finalize()ä¸ºæ–¹æ³•ï¼›3. finallyä¸ºåŒºå—æ ‡å¿—ï¼Œç”¨äºtryè¯­å¥ä¸­ï¼›</li>
<li>ä½œç”¨ï¼š<ol>
<li>finalä¸ºç”¨äºæ ‡è¯†å¸¸é‡çš„å…³é”®å­—ï¼Œfinalæ ‡è¯†çš„å…³é”®å­—å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ï¼ˆåœ¨è¿™é‡Œfinalå¸¸é‡çš„å…·ä½“ç”¨æ³•å°†åœ¨ä¸‹é¢è¿›è¡Œä»‹ç»ï¼‰ï¼›</li>
<li>finalize()æ–¹æ³•åœ¨Objectä¸­è¿›è¡Œäº†å®šä¹‰ï¼Œç”¨äºåœ¨å¯¹è±¡â€œæ¶ˆå¤±â€æ—¶ï¼Œç”±JVMè¿›è¡Œè°ƒç”¨ç”¨äºå¯¹å¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œç±»ä¼¼äºC++ä¸­çš„ææ„å‡½æ•°ï¼›ç”¨æˆ·è‡ªå®šä¹‰æ—¶ï¼Œç”¨äºé‡Šæ”¾å¯¹è±¡å ç”¨çš„èµ„æºï¼ˆæ¯”å¦‚è¿›è¡ŒI&#x2F;0æ“ä½œï¼‰ï¼›</li>
<li>finally{}ç”¨äºæ ‡è¯†ä»£ç å—ï¼Œä¸try{}è¿›è¡Œé…åˆï¼Œä¸è®ºtryä¸­çš„ä»£ç æ‰§è¡Œå®Œæˆ–æ²¡æœ‰æ‰§è¡Œå®Œï¼ˆè¿™é‡ŒæŒ‡æœ‰å¼‚å¸¸ï¼‰ï¼Œè¯¥ä»£ç å—ä¹‹ä¸­çš„ç¨‹åºå¿…å®šä¼šè¿›è¡Œï¼›ä¸”finally{}ä¸­çš„ returnä¹Ÿä¼šæ¯” try{}ä¸­çš„æ›´æ—©è¿”å›ï¼ï¼</li>
</ol>
</li>
</ul>
</li>
<li><p>Javaä¸­çš„å¼‚å¸¸ä½“ç³»æ˜¯æ€æ ·çš„ï¼Ÿ<br>  Javaä¸­çš„æ‰€æœ‰å¼‚å¸¸éƒ½æ¥è‡ªé¡¶çº§çˆ¶ç±»Throwableã€‚Throwableä¸‹æœ‰ä¸¤ä¸ªå­ç±»Exceptionå’ŒErrorã€‚</p>
<ul>
<li>Errorè¡¨ç¤ºéå¸¸ä¸¥é‡çš„é”™è¯¯ï¼Œæ¯”å¦‚ java.lang.StackOverFlowError å’Œ Java.lang.OutofMemoryErrorï¼Œé€šå¸¸è¿™äº›é”™è¯¯å‡ºç°æ—¶ï¼Œä»…ä»…æƒ³é ç¨‹åºè‡ªå·±æ˜¯è§£å†³ä¸äº†çš„ï¼Œå¯èƒ½æ˜¯è™šæ‹Ÿæœºã€ç£ç›˜ã€æ“ä½œç³»ç»Ÿå±‚é¢å‡ºç°çš„é—®é¢˜äº†ï¼Œæ‰€ä»¥é€šå¸¸ä¹Ÿä¸å»ºè®®åœ¨ä»£ç ä¸­å»æ•è·è¿™äº›Errorï¼Œå› ä¸ºæ•è·çš„æ„ä¹‰ä¸å¤§ï¼Œå› ä¸ºç¨‹åºå¯èƒ½å·²ç»æ ¹æœ¬è¿è¡Œä¸äº†äº†ã€‚</li>
<li>Exceptionè¡¨ç¤ºå¼‚å¸¸ï¼Œè¡¨ç¤ºç¨‹åºå‡ºç°Exceptionæ—¶ï¼Œæ˜¯å¯ä»¥é ç¨‹åºè‡ªå·±æ¥è§£å†³çš„æ¯”å¦‚NullPointerExceptionã€legalAccessExceptionç­‰ï¼Œæˆ‘ä»¬å¯ä»¥æ•è·è¿™äº›å¼‚å¸¸æ¥åšç‰¹æ®Šå¤„ç†ã€‚<br>  Exceptionè¿™ç§å¼‚å¸¸åˆåˆ†ä¸ºä¸¤ç±»ï¼šè¿è¡Œæ—¶å¼‚å¸¸ å’Œ ç¼–è¯‘å¼‚å¸¸ã€‚<ol>
<li>è¿è¡Œæ—¶å¼‚å¸¸(ä¸å—æ£€å¼‚å¸¸)ï¼šRuntimeExceptionç±»åŠå…¶å­ç±»è¡¨ç¤ºJVMåœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚æ¯”å¦‚è¯´è¯•å›¾ä½¿ç”¨ç©ºå€¼å¯¹è±¡çš„å¼•ç”¨ï¼ˆNullPointerExceptionï¼‰ã€æ•°ç»„ä¸‹æ ‡è¶Šç•Œï¼ˆArrayIndexOutBoundExceptionï¼‰ã€‚æ­¤ç±»å¼‚å¸¸å±äºä¸å¯æŸ¥å¼‚å¸¸ï¼Œä¸€èˆ¬æ˜¯ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¼•èµ·çš„ï¼Œåœ¨ç¨‹åºä¸­å¯ä»¥é€‰æ‹©æ•è·å¤„ç†ï¼Œä¹Ÿå¯ä»¥ä¸å¤„ç†ã€‚</li>
<li>ç¼–è¯‘å¼‚å¸¸(å—æ£€å¼‚å¸¸)ï¼šExceptionä¸­é™¤RuntimeExceptionæå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚å¦‚æœç¨‹åºä¸­å‡ºç°æ­¤ç±»å¼‚å¸¸ï¼Œæ¯”å¦‚è¯´IOExceptionã€FileNotFoundExceptionã€SQLExceptionï¼Œå¿…é¡»å¯¹è¯¥å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ã€‚åœ¨ç¨‹åºä¸­ï¼Œé€šå¸¸ä¸ä¼šè‡ªå®šä¹‰è¯¥ç±»å¼‚å¸¸ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„å¼‚å¸¸ç±»ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸<br>ç»§æ‰¿ä¸€ä¸ªå¼‚å¸¸ç±»ï¼Œé€šå¸¸æ˜¯RumtimeExceptionæˆ–è€…Exception</p>
</li>
<li><p>å¼‚å¸¸çš„å¤„ç†æœºåˆ¶æœ‰å‡ ç§ï¼Ÿ<br>å¼‚å¸¸æ•æ‰ï¼štryâ€¦catchâ€¦finallyï¼Œå¼‚å¸¸æŠ›å‡ºï¼šthrowsã€‚</p>
</li>
<li><p>try catch finallyï¼Œtryé‡Œæœ‰returnï¼Œfinallyè¿˜æ‰§è¡Œä¹ˆï¼Ÿ<br>æ‰§è¡Œï¼Œå¹¶ä¸”finallyçš„æ‰§è¡Œæ—©äºtryé‡Œé¢çš„returnã€‚ç»“è®ºï¼š<br>1ã€ä¸ç®¡æœ‰æœ¨æœ‰å‡ºç°å¼‚å¸¸ï¼Œfinallyå—ä¸­ä»£ç éƒ½ä¼šæ‰§è¡Œï¼›<br>2ã€å½“tryå’Œcatchä¸­æœ‰returnæ—¶ï¼Œfinallyä»ç„¶ä¼šæ‰§è¡Œï¼›<br>3ã€finallyæ˜¯åœ¨returnåé¢çš„è¡¨è¾¾å¼è¿ç®—åæ‰§è¡Œçš„ï¼ˆæ­¤æ—¶å¹¶æ²¡æœ‰è¿”å›è¿ç®—åçš„å€¼ï¼Œè€Œæ˜¯å…ˆæŠŠè¦è¿”å›çš„å€¼ä¿å­˜èµ·æ¥ï¼Œç®¡finallyä¸­çš„ä»£ç æ€ä¹ˆæ ·ï¼Œè¿”å›çš„å€¼éƒ½ä¸ä¼šæ”¹å˜ï¼Œä»»ç„¶æ˜¯ä¹‹å‰ä¿å­˜çš„å€¼ï¼‰ï¼Œæ‰€ä»¥å‡½æ•°è¿”å›å€¼æ˜¯åœ¨finallyæ‰§è¡Œå‰ç¡®å®šçš„ï¼›<br>4ã€finallyä¸­æœ€å¥½ä¸è¦åŒ…å«returnï¼Œå¦åˆ™ç¨‹åºä¼šæå‰é€€å‡ºï¼Œè¿”å›å€¼ä¸æ˜¯tryæˆ–catchä¸­ä¿å­˜çš„è¿”å›å€¼ã€‚</p>
</li>
<li><p>throwä¸thorwsåŒºåˆ«</p>
<ul>
<li>ä½ç½®ä¸åŒ <ol>
<li>throws ç”¨åœ¨å‡½æ•°ä¸Šï¼Œåé¢è·Ÿçš„æ˜¯å¼‚å¸¸ç±»ï¼Œå¯ä»¥è·Ÿå¤šä¸ªï¼›è€Œ throw ç”¨åœ¨å‡½æ•°å†…ï¼Œåé¢è·Ÿçš„æ˜¯å¼‚å¸¸å¯¹è±¡ã€‚</li>
</ol>
</li>
<li>åŠŸèƒ½ä¸åŒï¼š<ol start="2">
<li>throws ç”¨æ¥å£°æ˜å¼‚å¸¸ï¼Œè®©è°ƒç”¨è€…åªçŸ¥é“è¯¥åŠŸèƒ½å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œå¯ä»¥ç»™å‡ºé¢„å…ˆçš„å¤„ç†æ–¹å¼ï¼›throw æŠ›å‡ºå…·ä½“çš„é—®é¢˜å¯¹è±¡ï¼Œæ‰§è¡Œåˆ° throwï¼ŒåŠŸèƒ½å°±å·²ç»ç»“æŸäº†ï¼Œè·³è½¬åˆ°è°ƒç”¨è€…ï¼Œå¹¶å°†å…·ä½“çš„é—®é¢˜å¯¹è±¡æŠ›ç»™è°ƒç”¨è€…ã€‚ä¹Ÿå°±æ˜¯è¯´ throw è¯­å¥ç‹¬ç«‹å­˜åœ¨æ—¶ï¼Œä¸‹é¢ä¸è¦å®šä¹‰å…¶ä»–è¯­å¥ï¼Œå› ä¸ºæ‰§è¡Œä¸åˆ°ã€‚</li>
<li>throws è¡¨ç¤ºå‡ºç°å¼‚å¸¸çš„ä¸€ç§å¯èƒ½æ€§ï¼Œå¹¶ä¸ä¸€å®šä¼šå‘ç”Ÿè¿™äº›å¼‚å¸¸ï¼›throw åˆ™æ˜¯æŠ›å‡ºäº†å¼‚å¸¸ï¼Œæ‰§è¡Œ throw åˆ™ä¸€å®šæŠ›å‡ºäº†æŸç§å¼‚å¸¸å¯¹è±¡ã€‚</li>
<li>ä¸¤è€…éƒ½æ˜¯æ¶ˆæå¤„ç†å¼‚å¸¸çš„æ–¹å¼ï¼Œåªæ˜¯æŠ›å‡ºæˆ–è€…å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯ä¸ä¼šç”±å‡½æ•°å»å¤„ç†å¼‚å¸¸ï¼ŒçœŸæ­£çš„å¤„ç†å¼‚å¸¸ç”±å‡½æ•°çš„ä¸Šå±‚è°ƒç”¨å¤„ç†ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>åœ¨Javaçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸­ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥æŠ›å‡ºå¼‚å¸¸ï¼Œä»€ä¹ˆæ—¶å€™æ•è·å¼‚å¸¸?</p>
<ul>
<li>å¼‚å¸¸ç›¸å½“äºä¸€ç§æç¤ºï¼Œå¦‚æœæˆ‘ä»¬æŠ›å‡ºå¼‚å¸¸ï¼Œå°±ç›¸å½“äºå‘Šè¯‰ä¸Šå±‚æ–¹æ³•ï¼Œæˆ‘æŠ›äº†ä¸€ä¸ªå¼‚å¸¸ï¼Œæˆ‘å¤„ç†ä¸äº†è¿™ä¸ªå¼‚å¸¸ï¼Œäº¤ç»™ä½ æ¥å¤„ç†ï¼Œè€Œå¯¹äºä¸Šå±‚æ–¹æ³•æ¥è¯´ï¼Œå®ƒä¹Ÿéœ€è¦å†³å®šè‡ªå·±èƒ½ä¸èƒ½å¤„ç†è¿™ä¸ªå¼‚å¸¸ï¼Œæ˜¯å¦ä¹Ÿéœ€è¦äº¤ç»™å®ƒçš„ä¸Šå±‚ã€‚</li>
<li>æ‰€ä»¥æˆ‘ä»¬åœ¨å†™ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘çš„å°±æ˜¯ï¼Œæœ¬æ–¹æ³•èƒ½å¦åˆç†çš„å¤„ç†è¯¥å¼‚å¸¸ï¼Œå¦‚æœå¤„ç†ä¸äº†å°±ç»§ç»­å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸ï¼ŒåŒ…æ‹¬æœ¬æ–¹æ³•ä¸­åœ¨è°ƒç”¨å¦å¤–ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå‘ç°å‡ºç°äº†å¼‚å¸¸ï¼Œå¦‚æœè¿™ä¸ªå¼‚å¸¸åº”è¯¥ç”±è‡ªå·±æ¥å¤„ç†ï¼Œé‚£å°±æ•è·è¯¥å¼‚å¸¸å¹¶è¿›è¡Œå¤„ç†ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">lowerLevelOperation</span><span class="params">()</span> <span class="keyword">throws</span> SpecificException &#123;</span><br><span class="line">        <span class="comment">// ä¸€äº›å¯èƒ½æŠ›å‡º SpecificException çš„æ“ä½œ</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SpecificException</span>(<span class="string">&quot;Something went wrong at lower level&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">higherLevelOperation</span><span class="params">()</span> <span class="keyword">throws</span> HigherLevelException &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨åº•å±‚æ–¹æ³•</span></span><br><span class="line">            lowerLevelOperation();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SpecificException e) &#123;</span><br><span class="line">            <span class="comment">// æ•è·åº•å±‚æ–¹æ³•æŠ›å‡ºçš„ SpecificException</span></span><br><span class="line">            <span class="comment">// è®°å½•å¼‚å¸¸ä¿¡æ¯æˆ–è¿›è¡Œå…¶ä»–å¤„ç†</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Caught specific exception: &quot;</span> + e.getMessage());</span><br><span class="line">            <span class="comment">// å°è£…å¹¶é€’äº¤å¼‚å¸¸ç»™æ›´é«˜å±‚</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">HigherLevelException</span>(<span class="string">&quot;Exception at higher level&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ExampleService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExampleService</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨æ›´é«˜å±‚çš„æ–¹æ³•</span></span><br><span class="line">            service.higherLevelOperation();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (HigherLevelException e) &#123;</span><br><span class="line">            <span class="comment">// æ•è·æ›´é«˜å±‚æ–¹æ³•æŠ›å‡ºçš„ HigherLevelException</span></span><br><span class="line">            <span class="comment">// è®°å½•å¼‚å¸¸ä¿¡æ¯æˆ–è¿›è¡Œå…¶ä»–å¤„ç†</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Caught higher level exception: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Java æ³›å‹ã€ã€</p>
<ul>
<li>åœ¨Javaä¸­çš„æ³›å‹ç®€å•æ¥è¯´å°±æ˜¯ï¼šåœ¨åˆ›å»ºå¯¹è±¡æˆ–è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æ‰æ˜ç¡®ä¸‹å…·ä½“çš„ç±»å‹<br>  ä½¿ç”¨æ³›å‹çš„å¥½å¤„å°±æ˜¯ä»£ç æ›´åŠ ç®€æ´ï¼ˆæ— éœ€å¼ºåˆ¶è½¬æ¢ï¼‰ï¼Œç¨‹åºæ›´åŠ å¥å£®ï¼ˆç¼–è¯‘æœŸé—´æ²¡æœ‰è­¦å‘Šï¼Œåœ¨è¿è¡ŒæœŸå°±æ— ClassCastExceptionï¼‰</li>
<li>ä½¿ç”¨åœºæ™¯ï¼šæ“ä½œé›†åˆçš„æ—¶å€™ï¼ŒList<String> lists &#x3D; new ArrayList&lt;&gt;();<br>  å¦‚æœæ˜¯å…¶ä»–åœºæ™¯çš„è¯ï¼Œé‚£å°±æ˜¯åœ¨å†™ã€ŒåŸºç¡€ç»„ä»¶ã€çš„æ—¶å€™äº†ï¼šå†æ˜ç¡®ä¸€ä¸‹æ³›å‹å°±æ˜¯ã€Œåœ¨åˆ›å»ºå¯¹è±¡æˆ–è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æ‰æ˜ç¡®ä¸‹å…·ä½“çš„ç±»å‹ã€ï¼Œè€Œç»„ä»¶ä¸ºäº†åšåˆ°è¶³å¤Ÿçš„é€šç”¨æ€§ï¼Œæ˜¯ä¸çŸ¥é“ã€Œç”¨æˆ·ã€ä¼ å…¥ä»€ä¹ˆç±»å‹å‚æ•°è¿›æ¥çš„ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ç”¨æ³›å‹å°±æ˜¯å¾ˆå¥½çš„å®è·µã€‚ </li>
<li>æ³›å‹æ˜¯ä¼šæ“¦é™¤çš„ï¼Œé‚£ä¸ºä»€ä¹ˆåå°„èƒ½è·å–åˆ°æ³›å‹çš„ä¿¡æ¯å‘¢ï¼Ÿ<br>  æ³›å‹çš„ä¿¡æ¯åªå­˜åœ¨ç¼–è¯‘é˜¶æ®µï¼Œåœ¨classå­—èŠ‚ç å°±çœ‹ä¸åˆ°æ³›å‹çš„ä¿¡æ¯äº†ã€‚é‚£ä¸ºä»€ä¹ˆä¸‹é¢è¿™æ®µä»£ç èƒ½è·å–å¾—åˆ°æ³›å‹çš„ä¿¡æ¯å‘¢ï¼Ÿ<br>  å¯ä»¥ç†è§£ä¸ºæ³›å‹æ“¦é™¤æ˜¯æœ‰èŒƒå›´çš„ï¼Œå®šä¹‰åœ¨ç±»ä¸Šçš„æ³›å‹ä¿¡æ¯æ˜¯ä¸ä¼šè¢«æ“¦é™¤çš„ã€‚<br>  Java ç¼–è¯‘å™¨ä»åœ¨ class æ–‡ä»¶ä»¥ Signature å±æ€§çš„æ–¹å¼ä¿ç•™äº†æ³›å‹ä¿¡æ¯ã€‚Typeä½œä¸ºé¡¶çº§æ¥å£ï¼ŒTypeä¸‹è¿˜æœ‰å‡ ç§ç±»å‹ï¼Œæ¯”å¦‚TypeVariableã€ParameterizedTypeã€WildCardTypeã€GenericArrayTypeã€ä»¥åŠClassã€‚é€šè¿‡è¿™äº›æ¥å£æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿è¡Œæ—¶è·å–æ³›å‹ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
<li>æ³›å‹å®ä¾‹ï¼šç»„ä»¶ä¸ºäº†åšåˆ°è¶³å¤Ÿçš„é€šç”¨æ€§ï¼Œæ˜¯ä¸çŸ¥é“ã€Œç”¨æˆ·ã€ä¼ å…¥ä»€ä¹ˆç±»å‹å‚æ•°è¿›æ¥çš„ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ç”¨æ³›å‹å°±æ˜¯å¾ˆå¥½çš„å®è·µã€‚è¦å†™ç»„ä»¶ï¼Œè¿˜æ˜¯ç¦»ä¸å¼€Javaåå°„æœºåˆ¶(èƒ½å¤Ÿä»è¿è¡Œæ—¶è·å–ä¿¡æ¯)ï¼Œæ‰€ä»¥ä¸€èˆ¬ç»„ä»¶æ˜¯<strong>æ³›å‹ + åå°„</strong>æ¥å®ç°çš„ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡ç±»ï¼Œå®šä¹‰æ³›å‹&lt;T&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseDao</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass();</span><br><span class="line">        <span class="type">ParameterizedType</span>  <span class="variable">pt</span> <span class="operator">=</span> (ParameterizedType) clazz.getGenericSuperclass(); </span><br><span class="line">        clazz = (Class) pt.getActualTypeArguments()[<span class="number">0</span>];</span><br><span class="line">        System.out.println(clazz);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">BaseDao</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        BaseDao&lt;User&gt; userDao = <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œç»“æœè¾“å‡º</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">com</span>.entity.User</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æ³›å‹ä¸­extendså’Œsuperçš„åŒºåˆ«<br>1ã€&lt;?extends T&gt; è¡¨ç¤ºåŒ…æ‹¬Tåœ¨å†…çš„ä»»ä½•Tçš„å­ç±»<br>2ã€&lt;?super T&gt; è¡¨æ±‚åŒ…æ‹¬Tåœ¨å†…çš„ä»»ä½•Tçš„çˆ¶ç±»</p>
</li>
<li><p><strong>Javaå¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Ÿnewä¸€ä¸ªå¯¹è±¡çš„æ­¥éª¤ï¼Ÿ</strong></p>
<ol>
<li>ï¼Ÿï¼Ÿï¼Ÿæ£€æŸ¥ç±»ç¬¦å·å¼•ç”¨ï¼šé¦–å…ˆï¼ŒJVM ä¼šæ£€æŸ¥ new å…³é”®å­—åé¢çš„ç±»ç¬¦å·å¼•ç”¨ï¼Œç¡®ä¿åœ¨å¸¸é‡æ± ä¸­èƒ½æ‰¾åˆ°å¯¹åº”çš„ç±»ã€‚ï¼Ÿï¼Ÿï¼Ÿ2. åŠ è½½ç±»ï¼šå¦‚æœåœ¨å¸¸é‡æ± ä¸­æ‰¾åˆ°äº†ç±»ç¬¦å·å¼•ç”¨ï¼ŒJVM å°±ä¼šåŠ è½½è¿™ä¸ªç±»ï¼ŒåŒ…æ‹¬åŠ è½½ã€è¿æ¥ï¼ˆéªŒè¯ã€å‡†å¤‡ã€è§£æï¼‰å’Œåˆå§‹åŒ–é˜¶æ®µã€‚</li>
<li>(1. )ç±»åŠ è½½æ£€æŸ¥ï¼šJVM é¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½å¹¶éªŒè¯äº†è¿™ä¸ªç±»çš„å­—èŠ‚ç ã€‚å¦‚æœæ²¡æœ‰ï¼ŒJVMä¼šé€šè¿‡ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰åŠ è½½è¿™ä¸ªç±»ï¼Œå¹¶è¿›è¡ŒéªŒè¯ï¼Œç¡®ä¿å…¶ç¬¦åˆJavaè¯­è¨€è§„èŒƒã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½åŒ…æ‹¬è§£æç±»çš„ä¾èµ–å…³ç³»ï¼Œè§£æå­—æ®µå’Œæ–¹æ³•ï¼Œä»¥åŠè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</li>
<li>åˆ†é…å†…å­˜ï¼šJVM ä¼šæ ¹æ®ç±»çš„å®šä¹‰ï¼Œåœ¨å †å†…å­˜ä¸­ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´ã€‚è¿™ä¸ªå†…å­˜ç©ºé—´åŒ…æ‹¬å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬é€‰æ‹©å†…å­˜åˆ†é…æ–¹å¼ï¼ˆå¦‚æŒ‡é’ˆç¢°æ’ã€ç©ºé—²åˆ—è¡¨ã€TLABï¼‰ã€åˆ†é…å†…å­˜å¹¶è¿›è¡Œå†…å­˜æ¸…é›¶ã€‚</li>
<li>åˆå§‹åŒ–å¯¹è±¡ï¼šåˆ†é…å®Œå†…å­˜ç©ºé—´åï¼ŒJVM ä¼šå°†å¯¹è±¡çš„é™¤å¯¹è±¡å¤´å¤–çš„å†…å­˜ç©ºé—´åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ä¸º 0ï¼Œå¼•ç”¨ç±»å‹ä¸º nullï¼‰ã€‚æœ€åï¼ŒJVM ä¼šè®¾ç½®å¯¹è±¡çš„å¯¹è±¡å¤´ï¼ŒåŒ…æ‹¬å“ˆå¸Œç ã€GC ä¿¡æ¯ç­‰å…ƒä¿¡æ¯ã€‚</li>
<li>è°ƒç”¨æ„é€ æ–¹æ³•ï¼šæ‰§è¡Œå¯¹è±¡çš„åˆå§‹åŒ–é€»è¾‘ï¼ŒåŒ…æ‹¬å¯¹æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼ã€æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œç­‰ã€‚</li>
<li>è¿”å›å¯¹è±¡å¼•ç”¨ï¼šæœ€åï¼Œnew æ“ä½œç¬¦ä¼šè¿”å›ä¸€ä¸ªæŒ‡å‘æ–°åˆ›å»ºå¯¹è±¡çš„å¼•ç”¨ï¼Œé€šè¿‡è¿™ä¸ªå¼•ç”¨å¯ä»¥åœ¨ç¨‹åºä¸­æ“ä½œå¯¹è±¡çš„å±æ€§å’Œè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚</li>
<li>è¿™äº›æ­¥éª¤æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„åŸºæœ¬æµç¨‹ï¼Œæ— è®ºæ˜¯é€šè¿‡ new å…³é”®å­—åˆ›å»ºå¯¹è±¡ï¼Œè¿˜æ˜¯é€šè¿‡åå°„ã€åºåˆ—åŒ–ç­‰æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œéƒ½è¦ç»å†è¿™äº›æ­¥éª¤ã€‚</li>
</ol>
</li>
<li><p><strong>Java åå°„</strong>ï¼Ÿ<br>ç®€å•æ¥è¯´ï¼Œåå°„å°±æ˜¯Javaå¯ä»¥ç»™æˆ‘ä»¬åœ¨è¿è¡Œæ—¶è·å–ç±»çš„ä¿¡æ¯<br>ä»€ä¹ˆæ˜¯ã€Œè¿è¡Œæ—¶ã€ï¼šåœ¨ç¼–è¯‘å™¨å†™çš„ä»£ç æ˜¯ .java æ–‡ä»¶ï¼Œç»è¿‡javac ç¼–è¯‘ä¼šå˜æˆ .class æ–‡ä»¶ï¼Œclass æ–‡ä»¶ä¼šè¢«JVMè£…è½½è¿è¡Œï¼ˆè¿™é‡Œå°±æ˜¯çœŸæ­£è¿è¡Œç€æˆ‘ä»¬æ‰€å†™çš„ä»£ç ï¼ˆè™½ç„¶æ˜¯è¢«ç¼–è¯‘è¿‡çš„ï¼‰ï¼Œä¹Ÿå°±æ‰€è°“çš„è¿è¡Œæ—¶ã€‚<br>ä¸ºä»€ä¹ˆè¦åœ¨ã€Œè¿è¡Œæ—¶ã€è·å–ç±»çš„ä¿¡æ¯ï¼šå…¶å®å°±æ˜¯ä¸ºäº†è®©æˆ‘ä»¬æ‰€å†™çš„ä»£ç æ›´å…·æœ‰ã€Œé€šç”¨æ€§ã€å’Œã€Œçµæ´»æ€§ã€ã€‚ä¸€ä¸ªå¥½ç”¨çš„â€œå·¥å…·â€æ˜¯éœ€è¦å…¼å®¹å„ç§æƒ…å†µçš„ï¼Œä¸çŸ¥é“ç”¨è¯¥â€œå·¥å…·â€çš„ç”¨æˆ·ä¼ å…¥çš„æ˜¯ä»€ä¹ˆå¯¹è±¡ï¼Œä½†ä½ éœ€è¦å¸®ä»–ä»¬å¾—åˆ°éœ€è¦çš„ç»“æœã€‚ä¾‹å¦‚ SpringMVC ä½ åœ¨æ–¹æ³•ä¸Šå†™ä¸Šå¯¹è±¡ï¼Œä¼ å…¥çš„å‚æ•°å°±ä¼šå¸®ä½ å°è£…åˆ°å¯¹è±¡ä¸Šï¼›Mybatiså¯ä»¥è®©æˆ‘ä»¬åªå†™æ¥å£ï¼Œä¸å†™å®ç°ç±»ï¼Œå°±å¯ä»¥æ‰§è¡ŒSQLï¼›åœ¨ç±»ä¸ŠåŠ ä¸Š@Componentæ³¨è§£ï¼ŒSpringå°±å¸®ä½ åˆ›å»ºå¯¹è±¡â€¦<br>è¿™äº›ç»Ÿç»Ÿéƒ½æœ‰åå°„çš„èº«å½±ï¼šçº¦å®šå¤§äºé…ç½®ï¼Œé…ç½®å¤§äºç¡¬ç¼–ç ã€‚é€šè¿‡â€çº¦å®šâ€ä½¿ç”¨å§¿åŠ¿ï¼Œä½¿ç”¨åå°„åœ¨è¿è¡Œæ—¶è·å–ç›¸åº”çš„ä¿¡æ¯ï¼ˆæ¯•ç«Ÿä½œä¸ºä¸€ä¸ªâ€å·¥å…·â€œæ˜¯çœŸçš„ä¸çŸ¥é“ä½ æ˜¯æ€ä¹ˆç”¨çš„ï¼‰ï¼Œå®ç°ä»£ç åŠŸèƒ½çš„ã€Œé€šç”¨æ€§ã€å’Œã€Œçµæ´»æ€§ã€ </p>
</li>
<li><p>é™¤äº†ä½¿ç”¨newåˆ›å»ºå¯¹è±¡ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Java åå°„å¯ä»¥åˆ›å»ºå¯¹è±¡ï¼Œè°çš„æ•ˆç‡é«˜ï¼Ÿ<br>é€šè¿‡newåˆ›å»ºå¯¹è±¡çš„æ•ˆç‡æ¯”è¾ƒé«˜ã€‚é€šè¿‡åå°„æ—¶ï¼Œå…ˆæ‰¾æŸ¥æ‰¾ç±»èµ„æºï¼Œä½¿ç”¨ç±»åŠ è½½å™¨åˆ›å»ºï¼Œè¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æ•ˆç‡è¾ƒä½ã€‚</p>
</li>
<li><p>ç”¨ new å…³é”®å­—åˆ›å»ºå¯¹è±¡åˆ°åº•æ˜¯ç¼–è¯‘æ—¶çš„è¿˜æ˜¯è¿è¡Œæ—¶çš„æ–¹å¼ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>new åˆ›å»ºå¯¹è±¡æ˜¯ä¸€ç§åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„æ–¹å¼ã€‚åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œé€šè¿‡ new å…³é”®å­—å¯ä»¥ç›´æ¥åœ¨æºä»£ç ä¸­åˆ›å»ºå¯¹è±¡ï¼Œåœ¨æºä»£ç è¢«ç¼–è¯‘æˆå­—èŠ‚ç æ—¶å°±ç¡®å®šäº†å¯¹è±¡çš„åˆ›å»ºï¼Œç„¶ååœ¨è¿è¡Œæ—¶ï¼ŒJava è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¼šåŠ è½½å­—èŠ‚ç æ–‡ä»¶ï¼Œå¹¶æ ¹æ® new å…³é”®å­—åˆ›å»ºå¯¹è±¡ã€‚è¿™æ—¶ä¼šåˆ†é…å†…å­˜ã€è°ƒç”¨æ„é€ æ–¹æ³•ç­‰ï¼Œå®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–ã€‚<br>è¿™ç§æ–¹å¼çš„ä¸»è¦ç‰¹ç‚¹æ˜¯é™æ€ï¼Œå› ä¸ºå¯¹è±¡çš„åˆ›å»ºå’Œåˆå§‹åŒ–éƒ½æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šçš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½¿ç”¨åå°„ç­‰æœºåˆ¶å¯ä»¥å®ç°åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºå¯¹è±¡ï¼Œä½†ä¹Ÿæ›´ä¸ºçµæ´»ï¼Œå› ä¸ºå®ƒå¯ä»¥å¤„ç†ä¸€äº›åœ¨ç¼–è¯‘æ—¶æ— æ³•ç¡®å®šçš„ç±»å‹å’Œç±»ã€‚</p>
</li>
<li><p>javaåå°„çš„ä½œç”¨<br>åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•ã€‚åœ¨javaä¸­ï¼Œåªè¦ç»™å®šç±»çš„åå­—ï¼Œå°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ¥è·å¾—ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p>
</li>
<li><p>å“ªé‡Œä¼šç”¨åˆ°åå°„æœºåˆ¶ï¼Ÿ</p>
<ul>
<li>jdbcå°±æ˜¯å…¸å‹çš„åå°„ï¼Œhibernateï¼Œstrutsç­‰æ¡†æ¶ä½¿ç”¨åå°„å®ç°çš„ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&#x27;com.mysql.jdbc.Driver.class&#x27;</span>);  <span class="comment">// åŠ è½½MySQLçš„é©±åŠ¨ç±»</span></span><br></pre></td></tr></table></figure></li>
<li>åœ¨ Spring ä¸­ä½¿ç”¨åå°„æœºåˆ¶ï¼šç›®çš„æ˜¯ä¸ºäº†å®ç°æ¡†æ¶çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿé€šè¿‡é…ç½®å’Œæ³¨è§£ç­‰æ–¹å¼ï¼Œå®ç°å„ç§åŠŸèƒ½è€Œæ— éœ€ä¿®æ”¹æºä»£ç ï¼š<ol>
<li>ä¾èµ–æ³¨å…¥ï¼šSpring ä½¿ç”¨åå°„æ¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œå³é€šè¿‡åœ¨é…ç½®æ–‡ä»¶æˆ–æ³¨è§£ä¸­å£°æ˜ä¾èµ–å…³ç³»ï¼ŒSpring åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æ³¨å…¥å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚é€šè¿‡åå°„ï¼ŒSpring èƒ½å¤Ÿå®ä¾‹åŒ–å’Œåˆå§‹åŒ–å¯¹è±¡ï¼Œä»¥åŠåœ¨è¿è¡Œæ—¶å¤„ç†ä¾èµ–æ³¨å…¥ã€‚</li>
<li>Bean çš„è‡ªåŠ¨è£…é…ï¼š Spring çš„è‡ªåŠ¨è£…é…æœºåˆ¶ä¾èµ–äºåå°„ï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®ä¸€å®šçš„è§„åˆ™è‡ªåŠ¨å°† Bean ä¸å…¶ä»– Bean è¿›è¡Œå…³è”ã€‚é€šè¿‡åå°„ï¼ŒSpring å¯ä»¥åŠ¨æ€åœ°è¯†åˆ«å’Œè¿æ¥ç›¸åº”çš„ Beanã€‚</li>
<li>AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼š åœ¨ Spring ä¸­ï¼ŒAOP æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†å’Œåå°„æ¥å®ç°çš„ã€‚é€šè¿‡åå°„ï¼ŒSpring èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå¹¶åœ¨æ–¹æ³•æ‰§è¡Œå‰åæ‰§è¡Œé¢å¤–çš„é€»è¾‘ã€‚</li>
<li>Bean çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š Spring å®¹å™¨å¯ä»¥é€šè¿‡åå°„æ¥å®ç°å¯¹ Bean çš„ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼ŒåŒ…æ‹¬å®ä¾‹åŒ–ã€åˆå§‹åŒ–ã€é”€æ¯ç­‰ã€‚</li>
<li>åŠ¨æ€ä»£ç†ï¼šSpring ä½¿ç”¨åŠ¨æ€ä»£ç†å’Œåå°„æ¥å®ç°ä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ï¼Œå¦‚äº‹åŠ¡ç®¡ç†ã€‚é€šè¿‡åŠ¨æ€ä»£ç†ï¼ŒSpring èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå°†æ¨ªåˆ‡é€»è¾‘ç»‡å…¥åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚</li>
<li>å¤„ç†æ³¨è§£ï¼šSpring ä½¿ç”¨åå°„æ¥å¤„ç†æ³¨è§£ï¼ŒåŒ…æ‹¬æ‰«æç±»è·¯å¾„ä¸Šçš„æ³¨è§£ã€è§£ææ³¨è§£çš„å±æ€§å€¼ç­‰ã€‚é€šè¿‡åå°„ï¼ŒSpring èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶è·å–å’Œå¤„ç†æ³¨è§£ä¿¡æ¯ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>åå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹</p>
<ul>
<li>ä¼˜ç‚¹ï¼š <ol>
<li>èƒ½å¤Ÿè¿è¡Œæ—¶åŠ¨æ€è·å–ç±»çš„å®ä¾‹ï¼Œæé«˜çµæ´»æ€§ï¼›  </li>
<li>ä¸åŠ¨æ€ç¼–è¯‘ç»“åˆ</li>
</ol>
</li>
<li>ç¼ºç‚¹ï¼š<ol>
<li>ä½¿ç”¨åå°„æ€§èƒ½è¾ƒä½ï¼Œéœ€è¦è§£æå­—èŠ‚ç ï¼Œå°†å†…å­˜ä¸­çš„å¯¹è±¡è¿›è¡Œè§£æã€‚è§£å†³æ–¹æ¡ˆï¼š1ã€é€šè¿‡setAccessible(true)å…³é—­JDKçš„å®‰å…¨æ£€æŸ¥æ¥æå‡åå°„é€Ÿåº¦ï¼›2ã€å¤šæ¬¡åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹æ—¶ï¼Œæœ‰ç¼“å­˜ä¼šå¿«å¾ˆå¤š; 3ã€ReflflectASMå·¥å…·ç±»ï¼Œé€šè¿‡å­—èŠ‚ç ç”Ÿæˆçš„æ–¹å¼åŠ å¿«åå°„é€Ÿåº¦</li>
<li>ç›¸å¯¹ä¸å®‰å…¨ï¼Œç ´åäº†å°è£…æ€§ï¼ˆå› ä¸ºé€šè¿‡åå°„å¯ä»¥è·å¾—ç§æœ‰æ–¹æ³•å’Œå±æ€§ï¼‰</li>
</ol>
</li>
</ul>
</li>
<li><p>åå°„çš„å®ç°æ–¹å¼ï¼š</p>
<ol>
<li>è·å–æƒ³è¦æ“ä½œçš„ç±»çš„ Class å¯¹è±¡ï¼Œä»–æ˜¯åå°„çš„æ ¸å¿ƒï¼Œé€šè¿‡ Class å¯¹è±¡æˆ‘ä»¬å¯ä»¥ä»»æ„è°ƒç”¨ç±»çš„æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æ–¹æ³•ï¼š<ul>
<li><strong>ä½¿ç”¨ <code>Class.forName</code> é™æ€æ–¹æ³•(æœ€å®‰å…¨&#x2F;æ€§èƒ½æœ€å¥½)</strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Class&lt;?&gt; myClass = Class.forName(<span class="string">&quot;com.example.MyClass&quot;</span>);  <span class="comment">// ç±»çš„å…¨é™å®šåä½œä¸ºå‚æ•°</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>ä½¿ç”¨ <code>ClassLoader</code> çš„ <code>loadClass</code> æ–¹æ³•ï¼š</strong>ä¹Ÿå¯ä»¥åŠ è½½ç±»å¹¶è¿”å› <code>Class</code> å¯¹è±¡ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> getClass().getClassLoader();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Class&lt;?&gt; myClass = classLoader.loadClass(<span class="string">&quot;com.example.MyClass&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>ä½¿ç”¨ <code>.class</code> è¯­æ³•ï¼š</strong> åœ¨å·²çŸ¥ç±»çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥è·å–è¯¥ç±»çš„ <code>Class</code> å¯¹è±¡ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; myClass = MyClass.class;</span><br></pre></td></tr></table></figure></li>
<li><strong>ä½¿ç”¨å¯¹è±¡çš„ <code>getClass</code> æ–¹æ³•ï¼š</strong> å¯ä»¥è¿”å›è¯¥å¯¹è±¡çš„ <code>Class</code> å¯¹è±¡ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MyClass</span> <span class="variable">myObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">Class&lt;?&gt; myClass = myObject.getClass();</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>è°ƒç”¨ Class ç±»ä¸­çš„æ–¹æ³•ï¼Œè·å–ç±»çš„ç»“æ„ä¿¡æ¯ã€‚<br> Java åå°„ APIï¼šç”¨æ¥ç”Ÿæˆ ??? JVM ä¸­çš„ç±»ã€æ¥å£æˆ–åˆ™å¯¹è±¡çš„ä¿¡æ¯ã€‚<ul>
<li>Class ç±»ï¼šåå°„çš„æ ¸å¿ƒç±»ï¼Œå¯ä»¥è·å–ç±»çš„å±æ€§ï¼Œæ–¹æ³•ç­‰ä¿¡æ¯ã€‚</li>
<li>Field ç±»ï¼šJava.lang.reflec åŒ…ä¸­çš„ç±»ï¼Œè¡¨ç¤ºç±»çš„æˆå‘˜å˜é‡ï¼Œå¯ä»¥ç”¨æ¥è·å–å’Œè®¾ç½®ç±»ä¹‹ä¸­çš„å±æ€§å€¼ã€‚</li>
<li>Method ç±»ï¼š  Java.lang.reflec åŒ…ä¸­çš„ç±»ï¼Œè¡¨ç¤ºç±»çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥ç”¨æ¥è·å–ç±»ä¸­çš„æ–¹æ³•ä¿¡æ¯æˆ–è€…æ‰§è¡Œæ–¹æ³•ã€‚</li>
<li>Constructor ç±»ï¼š  Java.lang.reflec åŒ…ä¸­çš„ç±»ï¼Œè¡¨ç¤ºç±»çš„æ„é€ æ–¹æ³•ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å– Person ç±»çš„ Class å¯¹è±¡</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;reflection.Person&quot;</span>);</span><br><span class="line"><span class="comment">//è·å– Person ç±»çš„æ‰€æœ‰æ–¹æ³•ä¿¡æ¯</span></span><br><span class="line">Method[] method = clazz.getDeclaredMethods();</span><br><span class="line"><span class="comment">//è·å– Person ç±»çš„æ‰€æœ‰æˆå‘˜å±æ€§ä¿¡æ¯</span></span><br><span class="line">Field[] field = clazz.getDeclaredFields();</span><br><span class="line"><span class="comment">//è·å– Person ç±»çš„æ‰€æœ‰æ„é€ æ–¹æ³•ä¿¡æ¯</span></span><br><span class="line">Constructor[] constructor = clazz.getDeclaredConstructors();</span><br><span class="line"><span class="keyword">for</span>(Constructor c : constructor) System.out.println(c.toString()); </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>å°†è·å–åˆ°çš„ç±»ä¿¡æ¯ç”¨äºå®é™…çš„æ“ä½œï¼Œä¾‹å¦‚åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨æ–¹æ³•ã€è·å–å’Œè®¾ç½®å­—æ®µçš„å€¼ç­‰ã€‚<br>  é€šè¿‡åå°„ API æ¥å®ç°åŠ¨æ€æ“ä½œã€‚</li>
</ol>
</li>
<li><p>åˆ©ç”¨åå°„åŠ¨æ€åˆ›å»ºå¯¹è±¡å®ä¾‹.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0. è·å– Person ç±»çš„ Class å¯¹è±¡</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;reflection.Person&quot;</span>);</span><br><span class="line"><span class="comment">// 1. ä½¿ç”¨ newInstane æ–¹æ³•åˆ›å»ºå®ä¾‹å¯¹è±¡(è¿™ç§æ–¹æ³•è¦æ±‚è¯¥ Class å¯¹è±¡å¯¹åº”çš„ç±»æœ‰é»˜è®¤çš„ç©ºæ„é€ å™¨)</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> (Person) clazz.newInstance();</span><br><span class="line"><span class="comment">// 2. å…ˆè·å–æŒ‡å®šçš„ Constructor å¯¹è±¡,å†è°ƒç”¨ Constructor å¯¹è±¡çš„ newInstance()æ–¹æ³•æ¥åˆ›å»º Class å¯¹è±¡å®ä¾‹</span></span><br><span class="line"><span class="comment">// (é€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥é€‰å®šæ„é€ æ–¹æ³•åˆ›å»ºå®ä¾‹)</span></span><br><span class="line"><span class="type">Constructor</span> <span class="variable">c</span> <span class="operator">=</span> clazz.getDeclaredConstructor(String.class,String.class,<span class="type">int</span>.class);  <span class="comment">// è·å–æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> (Person) c.newInstance(<span class="string">&quot;æå››&quot;</span>,<span class="string">&quot;ç”·&quot;</span>,<span class="number">20</span>);  <span class="comment">// åˆ›å»ºå¯¹è±¡å¹¶è®¾ç½®å±æ€§</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ·±æ‹·è´å’Œæµ…æ‹·è´<br>æ·±æ‹·è´å’Œæµ…æ‹·è´å°±æ˜¯æŒ‡å¯¹è±¡çš„æ‹·è´ï¼Œä¸€ä¸ªå¯¹è±¡ä¸­å­˜åœ¨ä¸¤ç§ç±»å‹çš„å±æ€§ï¼Œä¸€ç§æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¸€ç§æ˜¯å®ä¾‹å¯¹è±¡çš„å¼•ç”¨ã€‚<br>1ï¼Œæµ…æ‹·è´æ˜¯æŒ‡ï¼Œåªä¼šæ‹·è´åŸºæœ¬æ•™æ®ç±»å‹çš„å€¼ï¼Œä»¥åŠå®ä¾‹å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œå¹¶ä¸ä¼šå¤åˆ¶ä¸€ä»½å¼•ç”¨åœ°å¤„æ‰€æŒ‡çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯æµ…æ‹·è´å‡ºæ¥çš„å¯¹è±¡ï¼Œå†…éƒ¨çš„ç±»å±æ€§æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡<br>2ï¼Œæ·±æ‹·è´æ˜¯æŒ‡ï¼Œæ—¢ä¼šæ‹·è´åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ï¼Œä¹Ÿä¼šé’ˆå¯¹å®ä¾‹å¯¹è±¡çš„å¼•ç”¨åœ°å€æ‰€æŒ‡å‘çš„å¯¹è±¡è¿›è¡Œå¤åˆ¶ï¼Œæ·±æ‹·è´å‡ºæ¥çš„å¯¹è±¡ï¼Œå†…éƒ¨çš„å±æ€§æŒ‡å‘çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡</p>
</li>
<li><p><strong>ä½ äº†è§£åŠ¨æ€ä»£ç†å—ï¼Ÿ??</strong></p>
<ul>
<li>ä»£ç†æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚ä»£ç†æ¨¡å‹æœ‰é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚<ul>
<li>é™æ€ä»£ç†éœ€è¦è‡ªå·±å†™ä»£ç†ç±»ï¼Œå®ç°å¯¹åº”çš„æ¥å£ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œåœ¨ã€ç¼–è¯‘æœŸé—´ã€‘å°±ç¡®å®šå¥½ä»£ç†å…³ç³»ã€‚</li>
<li>åŠ¨æ€ä»£ç†è¿™ä¸€æŠ€æœ¯åœ¨å®é™…æˆ–è€…æ¡†æ¶åŸç†ä¸­æ˜¯éå¸¸å¸¸è§çš„ï¼Œåœ¨ã€è¿è¡ŒæœŸé—´ã€‘ç¡®å®šå¥½ä»£ç†å…³ç³»ã€‚</li>
</ul>
</li>
<li>åŠ¨æ€ä»£ç†æœ‰ä»€ä¹ˆç”¨ï¼šå®ƒæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåœ¨ä¸ä¿®æ”¹åŸå§‹å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ¥é—´æ¥è®¿é—®åŸå§‹å¯¹è±¡ï¼Œå¹¶åœ¨è®¿é—®å‰åæ‰§è¡Œé¢å¤–çš„æ“ä½œã€‚</li>
<li>åŠ¨æ€ä»£ç†ä¸­çš„å¯¹è±¡ï¼š<ul>
<li>ç›®æ ‡å¯¹è±¡ï¼šå¾…å¢å¼ºçš„å¯¹è±¡</li>
<li>ä»£ç†å¯¹è±¡ï¼šå¢å¼ºè¿‡åçš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„å¯¹è±¡</li>
</ul>
</li>
<li>ä¸¤ç§å®ç°æ–¹å¼ï¼š<ul>
<li>JDKåŠ¨æ€ä»£ç†ï¼ˆåå°„ï¼‰å…¶å®å°±æ˜¯è¿ç”¨äº†åå°„çš„æœºåˆ¶ï¼Œä¼šå¸®æˆ‘ä»¬å®ç°æ¥å£çš„æ–¹æ³•ï¼Œé€šè¿‡invokeHandlerå¯¹æ‰€éœ€è¦çš„æ–¹æ³•è¿›è¡Œå¢å¼ºï¼›<ul>
<li>ç›®æ ‡å¯¹è±¡ implement ç›®æ ‡æ¥å£</li>
<li>ä»£ç†å¯¹è±¡ implement ç›®æ ‡æ¥å£</li>
<li>ç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡æ˜¯å¹³çº§å…³ç³»</li>
</ul>
</li>
<li>CGLIBä»£ç†ï¼ˆç»§æ‰¿ï¼‰åˆ™ç”¨çš„æ˜¯åˆ©ç”¨ASMæ¡†æ¶ï¼Œé€šè¿‡ä¿®æ”¹å…¶å­—èŠ‚ç ç”Ÿæˆå­ç±»æ¥å¤„ç†ã€‚            <ul>
<li>ä»£ç†å¯¹è±¡ extend ç›®æ ‡å¯¹è±¡</li>
<li>ç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡æ˜¯çˆ¶å­å…³ç³»</li>
</ul>
</li>
</ul>
</li>
<li>åŠ¨æ€ä»£ç†çš„åº”ç”¨ï¼šåŠŸèƒ½å¢å¼ºã€æ§åˆ¶è®¿é—®ã€‚<ul>
<li>SpringAOP</li>
<li>Springæ•´åˆMybaitsç®¡ç†Mapperæ¥å£ï¼Œä¸ç”¨å†™å®ç°ç±»ï¼Œåªå†™æ¥å£å°±å¯ä»¥æ‰§è¡ŒSQL</li>
</ul>
</li>
</ul>
</li>
<li><p>é¢å‘å¯¹è±¡è®¾è®¡ä¸­äº”å¤§è®¾è®¡åŸåˆ™ SOLIDã€ã€</p>
<ol>
<li>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ï¼š æ¯ä¸ªç±»æˆ–æ¨¡å—åº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ï¼Œå³ä¸€ä¸ªç±»æˆ–æ¨¡å—åº”è¯¥åªè´Ÿè´£ä¸€ç§ç±»å‹çš„ä»»åŠ¡æˆ–åŠŸèƒ½ã€‚è¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å†…èšæ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå‡å°‘ä»£ç çš„å¤æ‚åº¦ã€‚</li>
<li>å¼€æ”¾å°é—­åŸåˆ™ï¼ˆOCPï¼‰ï¼š è½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰ï¼‰åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å³é€šè¿‡æ‰©å±•ç°æœ‰çš„ä»£ç æ¥å®ç°æ–°çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰çš„ä»£ç ã€‚è¿™æ ·å¯ä»¥é™ä½ä¿®æ”¹å·²æœ‰ä»£ç å¸¦æ¥çš„é£é™©ï¼Œå¹¶æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li>
<li>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ï¼šå­ç±»å¿…é¡»èƒ½æ›¿æ¢çˆ¶ç±»å¹¶å‡ºç°åœ¨çˆ¶ç±»èƒ½å¤Ÿå‡ºç°çš„ä»»ä½•åœ°æ–¹ï¼Œè€Œä¸å½±å“ç¨‹åºçš„æ­£ç¡®æ€§ã€‚å³å­ç±»åº”è¯¥å®Œå…¨å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¹¶ä¸”éµå¾ªçˆ¶ç±»çš„çº¦å®šå’Œå¥‘çº¦ã€‚</li>
<li>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ï¼š ä¸åº”è¯¥å¼ºè¿«å®¢æˆ·ç«¯ä¾èµ–å®ƒä»¬ä¸éœ€è¦çš„æ¥å£ã€‚æ¥å£åº”è¯¥å°è€Œä¸“ä¸€ï¼Œåº”è¯¥æ ¹æ®å®é™…éœ€è¦å®šä¹‰å¤šä¸ªæ¥å£ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè‡ƒè‚¿çš„æ¥å£ã€‚è¿™æ ·å¯ä»¥é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
<li>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ï¼šé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼Œå®ƒä»¬éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºå…·ä½“å®ç°ç»†èŠ‚ï¼Œå…·ä½“å®ç°ç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚è¿™æ ·å¯ä»¥é™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li>
</ol>
</li>
<li><p>å¸¸ç”¨çš„<strong>è®¾è®¡æ¨¡å¼ã€ã€</strong></p>
<ul>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šå®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„çš„å®¢æˆ·ã€‚<ul>
<li>ä½¿ç”¨åœºæ™¯ï¼šå¦‚æœä»£ç æœ‰å¤šä¸ª ifâ€¦else ç­‰æ¡ä»¶åˆ†æ”¯ï¼Œå¹¶ä¸”æ¯ä¸ªæ¡ä»¶åˆ†æ”¯ï¼Œå¯ä»¥å°è£…èµ·æ¥æ›¿æ¢çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥ä¼˜åŒ–ã€‚</li>
<li>æ¨¡å¼å®ç°ï¼šä¸€ä¸ªæ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œé‡Œé¢ä¸¤ä¸ªæ–¹æ³•(ä¸€ä¸ªæ–¹æ³•åŒ¹é…ç±»å‹ï¼Œä¸€ä¸ªå¯æ›¿æ¢çš„é€»è¾‘å®ç°æ–¹æ³•)ã€ä¸åŒç­–ç•¥çš„å·®å¼‚åŒ–å®ç°(å³ï¼Œä¸åŒç­–ç•¥çš„å®ç°ç±»)ã€ä½¿ç”¨ç­–ç•¥æ¨¡å¼</li>
<li>æ¨¡å¼ä½¿ç”¨ï¼šæˆ‘ä»¬å€ŸåŠ© spring çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½¿ç”¨ ApplicationcontextAware æ¥å£ï¼ŒæŠŠå¯¹ç”¨çš„ç­–ç•¥ï¼Œåˆå§‹åŒ–åˆ° map é‡Œé¢ã€‚ç„¶åå¯¹å¤–æä¾› resolveFile æ–¹æ³•å³å¯ã€‚</li>
</ul>
</li>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šå®é™…ä¸Šæ˜¯ä¸€ç§å¤„ç†è¯·æ±‚çš„æ¨¡å¼ï¼Œå®ƒè®©å¤šä¸ªå¤„ç†å™¨(å¯¹è±¡èŠ‚ç‚¹)éƒ½æœ‰æœºä¼šå¤„ç†è¯¥è¯·æ±‚ï¼Œç›´åˆ°å…¶ä¸­æŸä¸ªå¤„ç†æˆåŠŸä¸ºæ­¢ã€‚è´£ä»»é“¾æ¨¡å¼æŠŠå¤šä¸ªå¤„ç†å™¨ä¸²æˆé“¾ï¼Œç„¶åè®©è¯·æ±‚åœ¨é“¾ä¸Šä¼ é€’ã€‚<ul>
<li>ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ æƒ³è¦è®©ä¸€ä¸ªä»¥ä¸Šçš„å¯¹è±¡æœ‰æœºä¼šèƒ½å¤Ÿå¤„ç†æŸä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼ã€‚è´£ä»»é“¾ä¸Šï¼Œæ¯ä¸ªå¯¹è±¡çš„å·®å¼‚åŒ–å¤„ç†ï¼Œå¦‚æœ¬å°èŠ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œå°±æœ‰å‚æ•°æ ¡éªŒå¯¹è±¡ã€å®‰å…¨æ ¡éªŒå¯¹è±¡ã€é»‘åå•æ ¡éªŒå¯¹è±¡ã€è§„åˆ™æ‹¦æˆªå¯¹è±¡</li>
<li>æ¨¡å¼å®ç°ï¼šä¸€ä¸ªæ¥å£æˆ–è€…æŠ½è±¡ç±»ã€æ¯ä¸ªå¯¹è±¡å·®å¼‚åŒ–å¤„ç†ã€å¯¹è±¡é“¾(æ•°ç»„)åˆå§‹åŒ–(è¿èµ·æ¥)</li>
<li>è¿™ä¸ªæ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œéœ€è¦ï¼šæœ‰ä¸€ä¸ªæŒ‡å‘è´£ä»»ä¸‹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€ä¸€ä¸ªæ²¡ç½®ä¸‹ä¸€ä¸ªå¯¹è±¡çš„setæ–¹æ³•ã€ç»™å­ç±»å¯¹è±¡æœ‰å¼‚åŒ–å®ç°çš„æ–¹æ³•(å¦‚ä»¥ä¸‹ä»£ç çš„doFiteræ–¹æ³•)</li>
</ul>
</li>
<li><strong>æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</strong>ï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶æµç¨‹ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯:å®šä¹‰ä¸€ä¸ªæ“ä½œçš„ä¸€ç³»åˆ—æ­¥éª¤ï¼Œå¯¹äºæŸäº›æš‚æ—¶ç¡®å®šä¸ä¸‹æ¥çš„æ­¥éª¤ï¼Œå°±ç•™ç»™å­ç±»å»å®ç°ï¼Œè¿™æ ·ä¸åŒçš„å­ç±»å°±å¯ä»¥å®šä¹‰å‡ºä¸åŒçš„æ­¥éª¤ã€‚<ul>
<li>æ¨¡å¼å®ç°ï¼šä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰éª¨æ¶æµç¨‹(æŠ½è±¡æ–¹æ³•æ”¾ä¸€èµ·)ç¡®å®šçš„å…±åŒæ–¹æ³•æ­¥éª¤ï¼Œæ”¾åˆ°æŠ½è±¡ç±»(å»é™¤æŠ½è±¡æ–¹æ³•æ ‡è®°)ã€‚ä¸ç¡®å®šçš„æ­¥éª¤ï¼Œç»™å­ç±»å»å·®å¼‚åŒ–å®ç°</li>
</ul>
</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼ï¼šè¡Œä¸ºæ¨¡å¼ï¼Œä¸€ä¸ªå¯¹è±¡(è¢«è§‚å¯Ÿè€…)çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰çš„ä¾èµ–å¯¹è±¡(è§‚å¯Ÿè€…å¯¹è±¡)éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œè¿›è¡Œå¹¿æ’­é€šçŸ¥ã€‚<ul>
<li>å®ƒçš„ä¸»è¦æˆå‘˜å°±æ˜¯è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ã€‚<ul>
<li>è¢«è§‚å¯Ÿè€…(0bserverable):ç›®æ ‡å¯¹è±¡ï¼ŒçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…ã€‚</li>
<li>è§‚å¯Ÿè€…(observer):æ¥å—è¢«è§‚å¯Ÿè€…çš„çŠ¶æ€å˜åŒ–é€šçŸ¥ï¼Œæ‰§è¡Œé¢„å…ˆå®šä¹‰çš„ä¸šåŠ¡ã€‚</li>
</ul>
</li>
<li>ä½¿ç”¨åœºæ™¯:å®ŒæˆæŸä»¶äº‹æƒ…åï¼Œå¼‚æ­¥é€šçŸ¥åœºæ™¯ã€‚å¦‚ï¼Œç™»é™†æˆåŠŸï¼Œå‘ä¸ªMæ¶ˆæ¯ç­‰ç­‰ã€‚</li>
<li>æ¨¡å¼å®ç°ï¼šä¸€ä¸ªè¢«è§‚å¯Ÿè€…çš„ç±»Observerableã€å¤šä¸ªè§‚å¯Ÿè€…Observerã€è§‚å¯Ÿè€…çš„å·®å¼‚åŒ–å®ç°ã€ç»å…¸è§‚å¯Ÿè€…æ¨¡å¼å°è£…:EventBuså®æˆ˜</li>
</ul>
</li>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼š<ul>
<li>å·¥å‚æ¨¡å¼ä¸€èˆ¬é…åˆç­–ç•¥æ¨¡å¼ä¸€èµ·ä½¿ç”¨ã€‚ç”¨æ¥å»ä¼˜åŒ–å¤§é‡çš„if..else..æˆ–switcâ€¦casâ€¦æ¡ä»¶è¯­å¥ã€‚</li>
<li>å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å…¶å­ç±»è‡ªå·±å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªå·¥å‚ç±»ï¼Œå·¥å‚æ¨¡å¼ä½¿å…¶åˆ›å»ºè¿‡ç¨‹å»¶è¿Ÿåˆ°å­ç±»è¿›è¡Œã€‚</li>
</ul>
</li>
<li>å•ä¾‹æ¨¡å¼ï¼šç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹<ul>
<li>æ‡’æ±‰æ¨¡å¼ã€é¥¿æ±‰æ¨¡å¼</li>
</ul>
</li>
</ul>
</li>
<li><p>å·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚çš„åŒºåˆ«</p>
<ol>
<li>ç®€å•å·¥å‚æ¨¡å¼ï¼š<ul>
<li>ç®€å•å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªå·¥å‚ç±»æ¥å°è£…å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œç”¨æˆ·åªéœ€è¦é€šè¿‡å·¥å‚ç±»æ¥è·å–æ‰€éœ€çš„å¯¹è±¡ï¼Œè€Œæ— éœ€ç›´æ¥è°ƒç”¨å¯¹è±¡çš„æ„é€ æ–¹æ³•ã€‚</li>
<li>ç®€å•å·¥å‚æ¨¡å¼åªåŒ…å«ä¸€ä¸ªå·¥å‚ç±»å’Œå¤šä¸ªäº§å“ç±»ï¼Œå·¥å‚ç±»æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚è¿”å›ä¸åŒçš„äº§å“å¯¹è±¡ã€‚</li>
<li>ç®€å•å·¥å‚æ¨¡å¼é€‚ç”¨äºå¯¹è±¡ç±»å‹è¾ƒå°‘ã€ä¸éœ€è¦é¢‘ç¹å˜åŒ–çš„æƒ…å†µä¸‹ï¼Œå¯¹äºæ–°å¢äº§å“ç±»å‹æˆ–è€…ä¿®æ”¹äº§å“æ„é€ æ–¹æ³•æ—¶ï¼Œéœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç ã€‚</li>
</ul>
</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼š<ul>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼ä¹Ÿæ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªæŠ½è±¡å·¥å‚æ¥å£å’Œå¤šä¸ªå…·ä½“å·¥å‚ç±»æ¥åˆ›å»ºä¸€ç»„ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–çš„å¯¹è±¡ï¼Œè€Œæ— éœ€æŒ‡å®šå…·ä½“çš„ç±»ã€‚</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼åŒ…å«æŠ½è±¡å·¥å‚æ¥å£ã€å…·ä½“å·¥å‚ç±»ã€æŠ½è±¡äº§å“æ¥å£å’Œå…·ä½“äº§å“ç±»ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚ç±»è´Ÿè´£åˆ›å»ºä¸€ç»„ç›¸å…³çš„äº§å“å¯¹è±¡ã€‚</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼é€‚ç”¨äºéœ€è¦åˆ›å»ºä¸€ç»„ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–çš„äº§å“å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹äº§å“çš„å…·ä½“ç±»å‹å’Œå®ç°è¿›è¡Œè§£è€¦çš„æƒ…å†µä¸‹ï¼Œå½“éœ€è¦æ–°å¢äº§å“ç±»å‹æ—¶ï¼Œåªéœ€è¦æ·»åŠ æ–°çš„å…·ä½“å·¥å‚ç±»å’Œå¯¹åº”çš„äº§å“ç±»ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ã€‚</li>
</ul>
</li>
<li>ç»¼ä¸Šæ‰€è¿°ï¼Œç®€å•å·¥å‚æ¨¡å¼ä¸»è¦ç”¨äºåˆ›å»º<strong>å•ä¸€ç±»å‹çš„å¯¹è±¡</strong>ï¼Œå·¥å‚ç±»è´Ÿè´£æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚è¿”å›ç›¸åº”çš„äº§å“å¯¹è±¡ï¼›è€ŒæŠ½è±¡å·¥å‚æ¨¡å¼ä¸»è¦ç”¨äºåˆ›å»º<strong>ä¸€ç»„ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–çš„äº§å“å¯¹è±¡</strong>ï¼Œé€šè¿‡æŠ½è±¡å·¥å‚æ¥å£å’Œå…·ä½“å·¥å‚ç±»æ¥å®ç°å¯¹è±¡çš„åˆ›å»ºï¼Œå¹¶ä¸”å¯¹äº§å“çš„å…·ä½“ç±»å‹å’Œå®ç°è¿›è¡Œè§£è€¦ï¼Œé€‚ç”¨äºäº§å“ç±»å‹é¢‘ç¹å˜åŒ–çš„æƒ…å†µã€‚</li>
</ol>
</li>
<li><p>æ‰‹å†™å•ä¾‹æ¨¡å¼</p>
<ul>
<li>æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ï¼šåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šåˆ›å»ºå®ä¾‹  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance; <span class="comment">// ç§æœ‰é™æ€å˜é‡ï¼Œç”¨äºä¿å­˜å”¯ä¸€å®ä¾‹</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123; &#125;  <span class="comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨å®ä¾‹åŒ–       </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123; <span class="comment">// å…¬å…±é™æ€æ–¹æ³•ï¼Œç”¨äºè·å–å®ä¾‹</span></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;  <span class="comment">// ä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šï¼ˆdouble-checked lockingï¼‰æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨</span></span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼ï¼šå¦‚æœéœ€è¦åœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºå®ä¾‹ï¼Œå¯ä»¥ç›´æ¥åœ¨é™æ€å˜é‡ä¸­åˆå§‹åŒ–  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å¯¹åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ç†è§£ï¼Ÿ</p>
<ul>
<li>åºåˆ—åŒ–ï¼šæŠŠå†…å­˜ä¸­çš„å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œä»¥ä¾¿å®ç°å­˜å‚¨å’Œè¿è¾“</li>
<li>ååºåˆ—åŒ–ï¼šæ ¹æ®ä»ç½‘ç»œæˆ–æ–‡ä»¶è·å–çš„å¯¹è±¡çš„å­—èŠ‚æµï¼Œæ ¹æ®å­—èŠ‚æµä¸­ä¿å­˜çš„å¯¹è±¡æè¿°ä¿¡æ¯å’ŒçŠ¶æ€ï¼Œé‡æ–°æ„å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</li>
<li>åºåˆ—åŒ–çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³ç½‘ç»œé€šä¿¡ä¸­çš„å¯¹è±¡ä¼ è¾“çš„é—®é¢˜ï¼ŒæŠŠå½“å‰jvmè¿›ç¨‹ä¸­çš„å¯¹è±¡è·¨ç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ä¸ªjvmè¿›ç¨‹ä¸­å¹¶æ¢å¤ï¼›ä¸ºä¿è¯é€šä¿¡åŒæ–¹å¯¹å¯¹è±¡çš„å¯è¯†åˆ«ï¼Œä¼šæŠŠå¯¹è±¡å…ˆè½¬æ¢ä¸ºé€šç”¨çš„è§£ææ ¼å¼å¦‚ï¼šjsonï¼Œxmlã€ã€å†è½¬æ¢ä¸ºå­—èŠ‚æµè¿›è¡Œè¿è¾“</li>
<li>å®ç°æ–¹æ³•ï¼šåºåˆ—åŒ–å¯¹è±¡å®ç°<code>Serializable</code>æ¥å£ï¼Œå¹¶å†å¯¹è±¡ä¸­æ·»åŠ <code>serialVersionUID</code>å­—æ®µã€‚</li>
</ul>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™ç”¨assert<br>assertion(æ–­è¨€)åœ¨è½¯ä»¶å¼€å‘ä¸­æ˜¯ä¸€ç§å¸¸ç”¨çš„è°ƒè¯•æ–¹å¼ï¼Œå¾ˆå¤šå¼€å‘è¯­è¨€ä¸­éƒ½æ”¯æŒè¿™ç§æœºåˆ¶ã€‚åœ¨å®ç°ä¸­ï¼Œassertionå°±æ˜¯åœ¨ç¨‹åºä¸­çš„ä¸€æ¡è¯­å¥ï¼Œå®ƒå¯¹ä¸€ä¸ªbooleanè¡¨è¾¾å¼è¿›è¡Œæ£€æŸ¥ï¼Œä¸€ä¸ªæ­£ç¡®ç¨‹åºå¿…é¡»ä¿è¯è¿™ä¸ªbooleanè¡¨è¾¾å¼çš„å€¼ä¸ºtrueï¼›å¦‚æœè¯¥å€¼ä¸ºfalseï¼Œè¯´æ˜ç¨‹åºå·²ç»å¤„äºä¸æ­£ç¡®çš„çŠ¶æ€ä¸‹ï¼Œç³»ç»Ÿå°†ç»™å‡ºè­¦å‘Šæˆ–é€€å‡ºã€‚ä¸€èˆ¬æ¥è¯´ï¼Œassertionç”¨äºä¿è¯ç¨‹åºæœ€åŸºæœ¬ã€å…³é”®çš„æ­£ç¡®æ€§ã€‚assertionæ£€æŸ¥é€šå¸¸åœ¨å¼€å‘å’Œæµ‹è¯•æ—¶å¼€å¯ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œåœ¨è½¯ä»¶å‘å¸ƒåï¼Œassertionæ£€æŸ¥é€šå¸¸æ˜¯å…³é—­çš„</p>
</li>
<li><p>Javaæœ‰æ²¡æœ‰goto<br>javaä¸­çš„ä¿ç•™å­—ï¼Œç°åœ¨æ²¡æœ‰åœ¨javaä¸­ä½¿ç”¨</p>
</li>
<li><p>ï¼Ÿï¼Ÿï¼Ÿæ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨ï¼Ÿ</p>
<ul>
<li>è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼š<ul>
<li>è¿‡æ»¤å™¨æ˜¯ Servlet è§„èŒƒä¸­å®šä¹‰çš„ä¸€ç§ç»„ä»¶ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ã€åå¤„ç†ä»¥åŠè¿‡æ»¤ã€‚è¿‡æ»¤å™¨å¯ä»¥åœ¨è¯·æ±‚è¿›å…¥ Servlet ä¹‹å‰è¿›è¡Œé¢„å¤„ç†ï¼Œä¹Ÿå¯ä»¥åœ¨å“åº”è¿”å›å®¢æˆ·ç«¯ä¹‹å‰è¿›è¡Œåå¤„ç†ã€‚è¿‡æ»¤å™¨ä¸»è¦ç”¨äºå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œä¿®æ”¹ã€éªŒè¯ã€è®°å½•æ—¥å¿—ç­‰æ“ä½œã€‚</li>
<li>è¿‡æ»¤å™¨å¯ä»¥é€šè¿‡åœ¨ <code>web.xml</code> é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ³¨è§£ <code>@WebFilter</code> æ¥å£°æ˜ã€‚è¿‡æ»¤å™¨éœ€è¦å®ç° <code>javax.servlet.Filter</code> æ¥å£ï¼Œå¹¶å®ç°å…¶ä¸­çš„ <code>init</code>ã€<code>doFilter</code> å’Œ <code>destroy</code> æ–¹æ³•ã€‚</li>
<li>è¿‡æ»¤å™¨å¯ä»¥å¯¹æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œä¾‹å¦‚å¯¹ URL æ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼åŠ¨æ€åœ°æ·»åŠ æˆ–ç§»é™¤è¿‡æ»¤å™¨ã€‚</li>
</ul>
</li>
<li>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼š<ul>
<li>æ‹¦æˆªå™¨æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚æ‹¦æˆªå™¨æ˜¯åŸºäºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ€æƒ³ï¼Œå¯ä»¥å¯¹æ§åˆ¶å™¨æ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œå¯¹è¯·æ±‚è¿›è¡Œå‰ç½®å¤„ç†ã€åç½®å¤„ç†ã€å¼‚å¸¸å¤„ç†ç­‰æ“ä½œã€‚</li>
<li>æ‹¦æˆªå™¨æ˜¯ Spring MVC æ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡å®ç° <code>HandlerInterceptor</code> æ¥å£æ¥å®šä¹‰æ‹¦æˆªå™¨ï¼Œå¹¶é€šè¿‡é…ç½®æ–‡ä»¶æˆ–è€… Java é…ç½®ç±»è¿›è¡Œå£°æ˜å’Œæ³¨å†Œã€‚</li>
<li>æ‹¦æˆªå™¨å¯ä»¥ç²¾ç¡®åœ°å¯¹æŒ‡å®šçš„æ§åˆ¶å™¨æ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œå¯ä»¥åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰æˆ–ä¹‹åè¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”å¯ä»¥å¯¹ Model å’Œ View è¿›è¡Œä¿®æ”¹æˆ–è€…å¢å¼ºã€‚</li>
</ul>
</li>
<li>åŒºåˆ«ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š<ol>
<li><strong>æ‰€å¤„æ¡†æ¶</strong>ï¼š<br>  è¿‡æ»¤å™¨ï¼ˆFilterï¼‰æ˜¯ Servlet è§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚å®ƒæ˜¯åœ¨ Web å®¹å™¨å±‚é¢çš„ä¸€ç§åŠŸèƒ½ã€‚<br>  æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æ˜¯ Spring MVC æ¡†æ¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå¯¹æ§åˆ¶å™¨æ–¹æ³•è¿›è¡Œæ‹¦æˆªå’Œå¤„ç†ã€‚å®ƒæ˜¯åœ¨ Spring MVC æ¡†æ¶çš„æ§åˆ¶å™¨å±‚é¢çš„ä¸€ç§åŠŸèƒ½ã€‚</li>
<li><strong>å®ç°æ–¹å¼</strong>ï¼š<br>  è¿‡æ»¤å™¨éœ€è¦å®ç° <code>javax.servlet.Filter</code> æ¥å£ï¼Œå¹¶å®ç°å…¶ä¸­çš„ <code>init</code>ã€<code>doFilter</code> å’Œ <code>destroy</code> æ–¹æ³•ã€‚è¿‡æ»¤å™¨å¯ä»¥é€šè¿‡ <code>web.xml</code> é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ³¨è§£ <code>@WebFilter</code> æ¥å£°æ˜ã€‚<br>  æ‹¦æˆªå™¨éœ€è¦å®ç° <code>HandlerInterceptor</code> æ¥å£ï¼Œå¹¶å®ç°å…¶ä¸­çš„ <code>preHandle</code>ã€<code>postHandle</code> å’Œ <code>afterCompletion</code> æ–¹æ³•ã€‚æ‹¦æˆªå™¨çš„å£°æ˜å’Œæ³¨å†Œé€šå¸¸æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æˆ–è€… Java é…ç½®ç±»æ¥å®Œæˆã€‚</li>
<li><strong>åŠŸèƒ½ç‰¹æ€§</strong>ï¼š<br>  è¿‡æ»¤å™¨å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥è¿›è¡Œå†…å®¹ä¿®æ”¹ã€è¯·æ±‚é‡å®šå‘ã€æ—¥å¿—è®°å½•ç­‰æ“ä½œã€‚è¿‡æ»¤å™¨å¯ä»¥å¯¹æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œè¿‡æ»¤ã€‚<br>  æ‹¦æˆªå™¨ä¸»è¦ç”¨äºå¯¹æ§åˆ¶å™¨æ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œå¯ä»¥åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰æˆ–ä¹‹åè¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚æƒé™éªŒè¯ã€æ—¥å¿—è®°å½•ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚æ‹¦æˆªå™¨å¯ä»¥ç²¾ç¡®åœ°å¯¹æŒ‡å®šçš„æ§åˆ¶å™¨æ–¹æ³•è¿›è¡Œæ‹¦æˆªã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<br>  è¿‡æ»¤å™¨é€‚ç”¨äºå¯¹ Web åº”ç”¨çš„å…¨å±€è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚å­—ç¬¦ç¼–ç è¿‡æ»¤ã€å®‰å…¨è¿‡æ»¤ã€æ—¥å¿—è®°å½•ç­‰ã€‚<br>  æ‹¦æˆªå™¨é€‚ç”¨äºå¯¹æ§åˆ¶å™¨æ–¹æ³•çš„è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚æƒé™æ§åˆ¶ã€æ—¥å¿—è®°å½•ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>æ—¥å¿—ã€ã€<br>1.é€‰æ‹©æ°å½“çš„æ—¥å¿—çº§åˆ« error warn info debug<br>2.æ—¥å¿—è¦æ‰“å°å‡ºå‚å…¥å‚æ•°  æ–¹ä¾¿ç”©é”…<br>3.é€‰æ‹©åˆé€‚çš„æ—¥å¿—æ ¼å¼ æ—¶é—´æˆ³  çº¿ç¨‹åå­— æ—¥å¿—çº§åˆ«ç­‰<br>4.if-else ï¼Œswitch ç­‰åˆ†æ”¯è¯­å¥éƒ½å»ºè®®æ‰“å°æ—¥å¿—ï¼Œæ–¹ä¾¿æ’æŸ¥<br>5.å¯¹ä¸€äº›æ¯”è¾ƒä½çš„æ—¥å¿—çº§åˆ«è¿›è¡Œåˆ¤æ–­ï¼Œä½¿ç”¨log.isXXXXï¼ˆï¼‰æ–¹æ³•åˆ¤æ–­<br>6.ä¸å»ºè®®ç›´æ¥ä½¿ç”¨log4j ,logbackç­‰æ—¥å¿—ç³»ç»Ÿï¼Œå»ºè®®ä½¿ç”¨slf4jæ¡†æ¶ï¼Œæ–¹ä¾¿ç»Ÿä¸€å¤„ç†<br>7.å»ºè®®ä½¿ç”¨å‚æ•°å ä½ç¬¦ï½›ï½ï¼Œè€Œä¸æ˜¯+æ‹¼æ¥ï¼Œç®€æ´ä¸”æå‡æ€§èƒ½<br>8.å»ºè®®ä½¿ç”¨å¼‚æ­¥æ—¥å¿—ï¼Œèƒ½æœ‰æ•ˆæå‡IOæ€§èƒ½<br>9.ä¸è¦ä½¿ç”¨ e.printStackTrace() æ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œå› ä¸ºå¤ªå¤šä¿¡æ¯ï¼Œä¸”æ˜¯å †æ ˆä¿¡æ¯ï¼Œä¼šä½¿å¾—å†…å­˜æº¢å‡º<br>10.å¼‚å¸¸ä¸è¦åªæ‰“ä¸€åŠï¼Œè¦å®Œæˆè¾“å‡º<br>11.ç¦æ­¢åœ¨çº¿ä¸Šå¼€å¯debug ä¼šæŠŠç£ç›˜æ‰“æ»¡<br>12.ä¸è¦è®°å½•äº†å¼‚å¸¸ï¼ŒåˆæŠ›å‡ºå¼‚å¸¸<br>13.é¿å…é‡å¤æ‰“å°æ—¥å¿—ï¼Œæµªè´¹ç£ç›˜ç©ºé—´<br>14.æ—¥å¿—æ–‡ä»¶åˆ†ç¦»ï¼Œä¸åŒçº§åˆ«æ—¥å¿—å­˜æ”¾åœ¨ä¸åŒæ–‡ä»¶ä¸­<br>15.æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼Œå»ºè®®æ‰“å°è¯¦ç»†çš„æ—¥å¿—</p>
</li>
<li><p>å‡½æ•°å¼æ¥å£ã€ã€</p>
<ul>
<li>å‡½æ•°å¼æ¥å£å…·æœ‰ä»¥ä¸‹ä¸»è¦ç‰¹ç‚¹ï¼š<br>  å‡½æ•°å¼æ¥å£åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†å¯ä»¥åŒ…å«å¤šä¸ªé»˜è®¤æ–¹æ³•æˆ–é™æ€æ–¹æ³•ã€‚<br>  å‡½æ•°å¼æ¥å£å¯ä»¥ä½¿ç”¨ @FunctionalInterface æ³¨è§£æ¥æ˜¾å¼å£°æ˜ï¼Œè¿™æ ·å¯ä»¥è®©ç¼–è¯‘å™¨è¿›è¡Œæ£€æŸ¥ï¼Œç¡®ä¿å…¶æ»¡è¶³å‡½æ•°å¼æ¥å£çš„å®šä¹‰ã€‚<br>  å‡½æ•°å¼æ¥å£å¯ä»¥é€šè¿‡ Lambda è¡¨è¾¾å¼ã€æ–¹æ³•å¼•ç”¨ç­‰æ–¹å¼è¿›è¡Œå®ä¾‹åŒ–ã€‚</li>
<li>å‡½æ•°å¼æ¥å£çš„å¼•å…¥ä½¿å¾— Java å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼ŒåŒ…æ‹¬ï¼š<br>  æ›´ç®€æ´çš„ä»£ç ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼å¯ä»¥ç¼–å†™æ›´åŠ ç®€æ´ã€å¯è¯»æ€§æ›´å¼ºçš„ä»£ç ã€‚<br>  æ”¯æŒå¹¶è¡Œæ“ä½œï¼šå‡½æ•°å¼æ¥å£å¯ä»¥å¾ˆå¥½åœ°é…åˆ Stream API ä½¿ç”¨ï¼Œæ”¯æŒå¹¶è¡Œæ“ä½œå’Œå‡½æ•°å¼å˜æˆã€‚<br>  æå‡ä»£ç çµæ´»æ€§ï¼šå‡½æ•°å¼æ¥å£çš„ä½¿ç”¨å¯ä»¥æå‡ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºæ‰©å±•å’Œä¿®æ”¹ã€‚</li>
<li>å‡½æ•°å¼æ¥å£åœ¨å®é™…åº”ç”¨ä¸­æœ‰å¾ˆå¤šåœºæ™¯ï¼Œä¾‹å¦‚ï¼š<br>  åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°å¼æ¥å£é…åˆ CompletableFuture æ¥è¿›è¡Œå¼‚æ­¥ä»»åŠ¡å¤„ç†ã€‚<br>  åœ¨é›†åˆæ“ä½œä¸­ï¼Œä½¿ç”¨å‡½æ•°å¼æ¥å£å¯ä»¥ç®€åŒ–é›†åˆçš„ç­›é€‰ã€æ˜ å°„ç­‰æ“ä½œã€‚<br>  åœ¨äº‹ä»¶å¤„ç†å’Œå›è°ƒæœºåˆ¶ä¸­ï¼Œä½¿ç”¨å‡½æ•°å¼æ¥å£å¯ä»¥å®šä¹‰äº‹ä»¶å¤„ç†å™¨ã€‚</li>
</ul>
</li>
</ul>
<hr>


<h2 id="Java-é›†åˆ"><a href="#Java-é›†åˆ" class="headerlink" title="Java é›†åˆ"></a>Java é›†åˆ</h2><ul>
<li><p>é›†åˆæœ‰ä»€ä¹ˆã€‚<br>Java é›†åˆ ä¸»è¦åŒ…æ‹¬ Collection å’Œ Map ä¸¤ç§ï¼ŒCollection å­˜å‚¨ç€å¯¹è±¡çš„é›†åˆï¼Œè€Œ Map å­˜å‚¨ç€é”®å€¼å¯¹(ä¸¤ä¸ªå¯¹è±¡)çš„æ˜ å°„è¡¨ã€‚<br><img src="https://pdai.tech/images/java_collections_overview.png"></p>
</li>
<li><p>CollectionåŒ…ç»“æ„ï¼Œä¸Collectionsçš„åŒºåˆ«<br>Collectionæ˜¯é›†åˆç±»çš„ä¸Šçº§æ¥å£ï¼Œå­æ¥å£æœ‰ Setã€Listã€LinkedListã€ArrayListã€Vectorã€Stackã€Setï¼›<br>Collectionsæ˜¯é›†åˆç±»çš„ä¸€ä¸ªå¸®åŠ©ç±»ï¼Œ å®ƒåŒ…å«æœ‰å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€å¤šæ€æ–¹æ³•ï¼Œç”¨äºå®ç°å¯¹å„ç§é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰æ“ä½œã€‚æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äºJavaçš„Collectionæ¡†æ¶ã€‚</p>
</li>
<li><p>è¯´è¯´ List, Set, Mapä¸‰è€…çš„åŒºåˆ«<br>List(å¯¹ä»˜é¡ºåºçš„å¥½å¸®æ‰‹)ï¼š Listæ¥å£å­˜å‚¨ä¸€ç»„ä¸å”¯ä¸€ï¼ˆå¯ä»¥æœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼‰ï¼Œæœ‰åºçš„å¯¹è±¡<br>Set(æ³¨é‡ç‹¬ä¸€æ— äºŒçš„æ€§è´¨):ä¸å…è®¸é‡å¤çš„é›†åˆã€‚ä¸ä¼šæœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚<br>Map(ç”¨Keyæ¥æœç´¢çš„ä¸“å®¶): ä½¿ç”¨é”®å€¼å¯¹å­˜å‚¨ã€‚Mapä¼šç»´æŠ¤ä¸Keyæœ‰å…³è”çš„å€¼ã€‚ä¸¤ä¸ªKeyå¯ä»¥å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼Œä½†Keyä¸èƒ½é‡å¤ï¼ŒKeyå¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ã€‚</p>
</li>
<li><p>Java çš„ Listï¼Ÿ<br>Liståœ¨Javaé‡Œè¾¹æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¸¸è§çš„å®ç°ç±»æœ‰ArrayListå’ŒLinkedListï¼ŒArrayListåº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼ŒLinkedListé“¾è¡¨ã€‚</p>
</li>
<li><p><strong>ArrayList</strong><br>å®ç°äº†åŠ¨æ€æ‰©å®¹ã€‚å½“new ArrayList()æ—¶ï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ªå¤§å°ä¸º0ï¼Œç©ºçš„ Object[] æ•°ç»„ã€‚<br>ç¬¬ä¸€æ¬¡addæ·»åŠ æ•°æ®çš„æ—¶å€™ï¼Œä¼šç»™æ•°ç»„åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤å€¼ <strong>10</strong> çš„å¤§å°ï¼Œå¹¶å°†å…ƒç´ æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚ä½¿ç”¨ArrayListåœ¨æ¯ä¸€æ¬¡addçš„æ—¶å€™ï¼Œä¼šå…ˆå»è®¡ç®—æ•°ç»„ç©ºé—´ï¼›å¦‚æœç©ºé—´æ˜¯å¤Ÿçš„ï¼Œç›´æ¥è¿½åŠ ä¸Šå»ï¼›å¦‚æœä¸å¤Ÿï¼Œé‚£å°±å¾—æ‰©å®¹ã€‚<br>æ¯ä¸€æ¬¡æ‰©å®¹åŸæ¥çš„ <strong>1.5å€</strong>ï¼Œæ–°å®¹é‡çš„è®¡ç®—æ–¹å¼ä¸º(oldCapacity * 3)&#x2F;2 + 1 å³åŸå®¹é‡çš„1.5å€å†åŠ 1ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„[newData]ã€‚ç„¶åä½¿ç”¨System.arraycopyæ–¹æ³•ï¼ˆåº•å±‚ä¸ºnativeæ–¹æ³•å®ç°ï¼‰å°†æ—§æ•°ç»„[elementData]ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„åº•å±‚æ•°ç»„æ‹·è´æ“ä½œï¼Œé¿å…äº†é€ä¸ªå…ƒç´ å¤åˆ¶çš„å¼€é”€ã€‚æœ€åï¼Œå°†æ–°æ•°ç»„[newData]æ›¿æ¢ä¸ºArrayListçš„å†…éƒ¨æ•°ç»„[elementData]ã€‚<br>æ—¥å¸¸å¼€å‘ä¸­ç”¨å¾—æœ€å¤šçš„æ˜¯ArrayListå‘¢ï¼šæ˜¯ç”±åº•å±‚çš„æ•°æ®ç»“æ„æ¥å†³å®šçš„ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œ<strong>éå†</strong>çš„éœ€æ±‚æ¯”å¢åˆ è¦å¤šï¼Œå³ä¾¿æ˜¯å¢åˆ ä¹Ÿæ˜¯å¾€å¾€åœ¨Listçš„å°¾éƒ¨æ·»åŠ å°±OKäº†ã€‚åƒåœ¨å°¾éƒ¨æ·»åŠ å…ƒç´ ï¼ŒArrayListçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿå°±O(1)ã€‚</p>
</li>
<li><p>LinkedList<br>åŸºäºé“¾è¡¨å®ç°çš„ï¼Œå¯¹äºå¢åˆ æ“ä½œæ¥è¯´ï¼Œç”±äºé“¾è¡¨èŠ‚ç‚¹çš„æŒ‡é’ˆè°ƒæ•´ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œåˆ é™¤æˆ–æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹çš„å¼€é”€æ˜¯ O(1) çš„ã€‚ä½†åœ¨è¿›è¡Œéå†å’Œéšæœºè®¿é—®æ—¶ï¼Œç”±äºé“¾è¡¨çš„éè¿ç»­å­˜å‚¨ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒå·®ã€‚å› æ­¤ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼ŒArrayList åœ¨éšæœºè®¿é—®å’Œéå†æ–¹é¢çš„æ€§èƒ½é€šå¸¸æ¯” LinkedList æ›´å¥½ï¼Œè€Œåœ¨é¢‘ç¹çš„<strong>å¢åˆ </strong>æ“ä½œæ—¶ï¼ŒLinkedList å¯èƒ½æ›´å…·ä¼˜åŠ¿.<br>LinkedList è¿˜å®ç°äº† DeQueueï¼Œå¯ä»¥å¯¹å¤´å°¾å…ƒç´ æ“ä½œï¼Œæ‰€ä»¥ LinkedList ä¹Ÿå¯ä»¥å½“ä½œé˜Ÿåˆ—ä½¿ç”¨ã€‚</p>
</li>
<li><p>Arrayä¸ArrayListæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ<br>Arrayä¸ArrayListéƒ½æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®çš„é›†åˆã€‚ArrayListåº•å±‚æ˜¯ä½¿ç”¨æ•°ç»„å®ç°çš„ï¼Œä½†æ˜¯ArrayListå¯¹æ•°ç»„è¿›è¡Œäº†å°è£…å’ŒåŠŸèƒ½æ‰©å±•ï¼Œæ‹¥æœ‰è®¸å¤šåŸç”Ÿæ•°ç»„æ²¡æœ‰çš„ä¸€äº›åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥ç†è§£æˆArrayListæ˜¯Arrayçš„ä¸€ä¸ªå‡çº§ç‰ˆã€‚</p>
</li>
<li><p>ArrayList çš„ <code>éå†</code>;</p>
<ul>
<li>ä½¿ç”¨ for å¾ªç¯ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; list.size(); j++) &#123;</span><br><span class="line">    System.out.println(list.get(j));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨å¢å¼ºå‹ for å¾ªç¯ï¼ˆfor-each å¾ªç¯ï¼‰ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Integer num : list) &#123;</span><br><span class="line">    System.out.println(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">num</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">    System.out.println(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>ArrayList çš„ <code>remove</code>ã€ã€</p>
<ul>
<li>æ ¹æ®ç´¢å¼•åˆ é™¤å…ƒç´ ï¼›åˆ é™¤å…ƒç´ åï¼Œåé¢çš„å…ƒç´ ä¼šå‘å‰ç§»åŠ¨ï¼Œåˆ—è¡¨çš„å¤§å°ä¼šå‡å°‘ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.remove(<span class="number">0</span>); <span class="comment">// åˆ é™¤ç´¢å¼•ä¸º 0 çš„å…ƒç´ </span></span><br></pre></td></tr></table></figure></li>
<li>æ ¹æ®å¯¹è±¡åˆ é™¤å…ƒç´ ï¼šremove(Object o) æ–¹æ³•å¯ä»¥åˆ é™¤åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå¯¹è±¡ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.remove(Integer.valueOf(<span class="number">5</span>)); <span class="comment">// åˆ é™¤å€¼ä¸º 5 çš„å…ƒç´ </span></span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤å…ƒç´ ï¼šä½¿ç”¨ Iterator éå† ArrayListï¼Œå¹¶ä½¿ç”¨è¿­ä»£å™¨çš„ remove æ–¹æ³•å®‰å…¨åœ°åˆ é™¤å…ƒç´ ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">num</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">5</span>) &#123;</span><br><span class="line">        iterator.remove(); <span class="comment">// åˆ é™¤ç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>**<code>ConcurrentModificationException</code>**å¼‚å¸¸ï¼šåœ¨éå†è¿‡ç¨‹ä¸­ç›´æ¥è°ƒç”¨ remove() å¯èƒ½ä¼šå¼•èµ·å¹¶å‘ä¿®æ”¹å¼‚å¸¸ã€‚è¿™æ˜¯å› ä¸ºåœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹äº†é›†åˆç»“æ„ï¼Œå¯¼è‡´è¿­ä»£å™¨çš„æ£€æµ‹æœºåˆ¶æ£€æµ‹åˆ°å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚ä¸ºé¿å…ï¼Œå¯é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š<ul>
<li>åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¸ä¿®æ”¹é›†åˆçš„ç»“æ„ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶é›†åˆæˆ–è€…ä½¿ç”¨è¿­ä»£å™¨çš„ remove æ–¹æ³•è¿›è¡Œå®‰å…¨çš„åˆ é™¤æ“ä½œã€‚</li>
<li>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼ˆå¦‚ ConcurrentHashMapï¼‰æˆ–è€…é‡‡ç”¨åŒæ­¥æœºåˆ¶ï¼ˆå¦‚ä½¿ç”¨ synchronized å…³é”®å­—æˆ–è€…ä½¿ç”¨ Lockï¼‰æ¥ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>ArrayListå¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ</p>
<ol>
<li>ä½¿ç”¨<code>Collections.synchronizedList</code>æ–¹æ³•ï¼šè¿™å°†è¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ List åŒ…è£…å™¨ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯¹ <code>synchronizedList</code> çš„æ‰€æœ‰æ“ä½œéƒ½ä¼šåœ¨å†…éƒ¨è¢«åŒæ­¥ï¼Œä»è€Œç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚å¦‚æœå†™å…¥æ“ä½œè¾ƒä¸ºé¢‘ç¹ï¼Œå¯èƒ½éœ€è¦æƒè¡¡ä½¿ç”¨ synchronizedList æˆ–è€…å…¶ä»–å¹¶å‘é›†åˆç±»ï¼Œå…·ä½“æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ¥å†³å®šã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Type&gt; synchronizedList = Collections.synchronizedList(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Type&gt;());</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨<code>CopyOnWriteArrayList</code>ç±»ï¼š<code>java.util.concurrent</code> åŒ…ä¸‹çš„ç±»ï¼Œå®ƒé€šè¿‡åœ¨ä¿®æ”¹æ“ä½œæ—¶å¤åˆ¶æ•´ä¸ªæ•°ç»„æ¥å®ç°<strong>çº¿ç¨‹å®‰å…¨</strong>ã€‚è¿™æ„å‘³ç€åœ¨å†™å…¥æ“ä½œæ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä»è€Œä¸å½±å“æ­£åœ¨è¿›è¡Œçš„è¯»å–æ“ä½œã€‚å¦‚æœè¯»å–æ“ä½œé¢‘ç¹è€Œå†™å…¥æ“ä½œè¾ƒå°‘ï¼Œ<code>CopyOnWriteArrayList</code> å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒå¯¹äºå¹¶å‘è¯»å–æ“ä½œè€Œè¨€æ€§èƒ½è¾ƒå¥½ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Type&gt; threadSafeList = <span class="keyword">new</span> <span class="title class_">CopyOnWriteArrayList</span>&lt;Type&gt;();</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>CopyOnWriteArrayListçš„åº•å±‚åŸç†æ˜¯æ€æ ·çš„</p>
<ol>
<li>é¦–å…ˆCopyOnWriteArraylstå†…éƒ¨ä¹Ÿæ˜¯ç”¨è¿‡æ•°ç»„æ¥å®ç°çš„ï¼Œåœ¨å‘CpyOnWriteAraistæ·»åŠ å…ƒç´ æ—¶ï¼Œä¼šå¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå†™æ“ä½œåœ¨æ–°æ•°ç»„ä¸Šè¿›è¡Œï¼Œè¯»æ“ä½œåœ¨åŸæ•°ç»„ä¸Šè¡Œ</li>
<li>å¹¶ä¸”ï¼Œå†™æ“ä½œä¼šåŠ é”ï¼Œé˜²æ­¢å‡ºç°å¹¶å‘å†™å…¥ä¸¢å¤±æ•°æ®çš„é—®é¢˜</li>
<li>å†™æ“ä½œç»“æŸä¹‹åä¼šæŠŠåŸæ•°ç»„æŒ‡å‘æ–°æ•°ç»„</li>
<li>CopyOnWriteArraylistå…è®¸åœ¨å†™æ“ä½œæ—¶æ¥è¯»å–æ•°æ®ï¼Œå¤§å¤§æé«˜äº†è¯»çš„æ€§èƒ½ï¼Œå› æ­¤é€‚åˆè¯»å¤šå†™å°‘çš„åº”ç”¨åœºï¼Œä½†ä¼šå å†…å­˜ï¼ŒåŒæ—¶å¯èƒ½è¯»åˆ°çš„æ•°æ®ä¸æ˜¯å®æ—¶æœ€æ–°çš„æ•™æ®ï¼ˆå†™çº¿ç¨‹æ“ä½œç»“æŸåæ‰èƒ½è¯»åˆ°æ–°æ•°æ®ï¼‰ï¼Œæ‰€ä»¥ä¸é€‚åˆå®æ—¶æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯</li>
</ol>
</li>
<li><p>Vector ä½ äº†è§£å—ï¼Ÿ<br>Vectoræ˜¯åº•å±‚ç»“æ„æ˜¯æ•°ç»„ï¼Œä¸€èˆ¬ç°åœ¨å·²ç»å¾ˆå°‘ç”¨äº†ã€‚ç›¸å¯¹äºArrayListï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨æ‰©å®¹çš„æ—¶å€™ç›´æ¥æ‰©å®¹ä¸¤å€ã€‚<br>åœ¨Javaä¸­ï¼ŒStack ç±»æ‰©å±•äº†Vectorï¼Œæä¾›äº†ä¸€ä¸ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„å †æ ˆæ•°æ®ç»“æ„ï¼Œå…¶ä¸­å…ƒç´ çš„æ’å…¥å’Œåˆ é™¤éƒ½å‘ç”Ÿåœ¨å †æ ˆçš„é¡¶éƒ¨ã€‚</p>
</li>
<li><p>set é›†åˆ<br>Set æ³¨é‡ç‹¬ä¸€æ— äºŒçš„æ€§è´¨,è¯¥ä½“ç³»é›†åˆç”¨äºå­˜å‚¨æ— åº(å­˜å…¥å’Œå–å‡ºçš„é¡ºåºä¸ä¸€å®šç›¸åŒ)å…ƒç´ ï¼Œ å€¼ä¸èƒ½é‡å¤ã€‚å¯¹è±¡çš„ç›¸ç­‰æ€§æœ¬è´¨æ˜¯å¯¹è±¡ hashCode å€¼ï¼ˆjava æ˜¯ä¾æ®å¯¹è±¡çš„å†…å­˜åœ°å€è®¡ç®—å‡ºçš„æ­¤åºå·ï¼‰ åˆ¤æ–­çš„ï¼Œ å¦‚æœæƒ³è¦è®©ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡è§†ä¸ºç›¸ç­‰çš„ï¼Œå°±å¿…é¡»è¦†ç›– Object çš„ hashCode æ–¹æ³•å’Œ equals æ–¹æ³•ã€‚</p>
</li>
<li><p>HashSetï¼ˆHash è¡¨ï¼‰<br>å“ˆå¸Œè¡¨è¾¹å­˜æ”¾çš„æ˜¯å“ˆå¸Œå€¼ã€‚ HashSet å­˜å‚¨å…ƒç´ çš„é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§å­˜å…¥æ—¶çš„é¡ºåºï¼ˆå’Œ List æ˜¾ç„¶ä¸åŒï¼‰ è€Œæ˜¯æŒ‰ç…§å“ˆå¸Œå€¼æ¥å­˜çš„æ‰€ä»¥å–æ•°æ®ä¹Ÿæ˜¯æŒ‰ç…§å“ˆå¸Œå€¼å–å¾—ã€‚<br>å…ƒç´ çš„å“ˆå¸Œå€¼æ˜¯é€šè¿‡å…ƒç´ çš„hashcode æ–¹æ³•æ¥è·å–çš„, HashSet é¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ çš„å“ˆå¸Œå€¼ï¼Œå¦‚æœå“ˆå¸Œå€¼ä¸€æ ·ï¼Œæ¥ç€ä¼šæ¯”è¾ƒequals æ–¹æ³• å¦‚æœ equls ç»“æœä¸º true ï¼Œ HashSet å°±è§†ä¸ºåŒä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœ equals ä¸º false å°±ä¸æ˜¯åŒä¸€ä¸ªå…ƒç´ ã€‚<br>å“ˆå¸Œå€¼ç›¸åŒ equals ä¸º false çš„å…ƒç´ æ˜¯æ€ä¹ˆå­˜å‚¨å‘¢,å°±æ˜¯åœ¨åŒæ ·çš„å“ˆå¸Œå€¼ä¸‹é¡ºå»¶ï¼ˆå¯ä»¥è®¤ä¸ºå“ˆå¸Œå€¼ç›¸åŒçš„å…ƒç´ æ”¾åœ¨ä¸€ä¸ªå“ˆå¸Œæ¡¶ä¸­ï¼‰ã€‚</p>
</li>
<li><p>HashSetã€HashMap å’Œ Hashtable çš„å…³ç³»ã€‚</p>
<ul>
<li><code>HashSet</code> ä½¿ç”¨ <code>HashMap</code> ä½œä¸ºåº•å±‚å®ç°ï¼Œç”¨äºå­˜å‚¨ä¸é‡å¤çš„å…ƒç´ ã€‚</li>
<li><code>HashMap</code> æ˜¯é”®å€¼å¯¹çš„å­˜å‚¨ç»“æ„ï¼Œè€Œ <code>HashSet</code> åªå­˜å‚¨é”®ã€‚</li>
<li><code>Hashtable</code> ä¹Ÿæ˜¯é”®å€¼å¯¹çš„å­˜å‚¨ç»“æ„ï¼Œç±»ä¼¼äº <code>HashMap</code>ï¼Œä½†æ˜¯æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤é€‚åˆäºå¤šçº¿ç¨‹ç¯å¢ƒã€‚</li>
<li><code>HashMap</code> å®ç°äº† <code>Map</code> æ¥å£ã€‚<code>Hashtable</code> å®ç°äº† <code>Map</code> æ¥å£ä»¥åŠ <code>Dictionary</code> æ¥å£ï¼ˆåœ¨ Java 1.0 å’Œ 1.1 ç‰ˆæœ¬ä¸­ä½¿ç”¨è¾ƒå¤šï¼Œç°å·²è¢« <code>Map</code> æ¥å£å–ä»£ï¼‰ã€‚</li>
<li><code>HashMap</code> å’Œ <code>Hashtable</code> å…è®¸é”®å’Œå€¼ä¸º <code>null</code>ï¼Œè€Œ <code>HashSet</code> åªå…è®¸ä¸€ä¸ª <code>null</code> å…ƒç´ ã€‚<br>  åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬æ¨èä½¿ç”¨ <code>HashMap</code> è€Œä¸æ˜¯ <code>Hashtable</code>ï¼Œå› ä¸º <code>Hashtable</code> çš„åŒæ­¥æ€§ä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚å¦‚æœéœ€è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>Collections.synchronizedMap()</code> æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªåŒæ­¥çš„ <code>HashMap</code>ã€‚</li>
</ul>
</li>
<li><p>TreeSet</p>
<ol>
<li>TreeSet()æ˜¯ä½¿ç”¨äºŒå‰æ ‘çš„åŸç†å¯¹æ–° add()çš„å¯¹è±¡æŒ‰ç…§æŒ‡å®šçš„é¡ºåºæ’åºï¼ˆå‡åºã€é™åºï¼‰ï¼Œæ¯å¢åŠ ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šè¿›è¡Œæ’åºï¼Œå°†å¯¹è±¡æ’å…¥çš„äºŒå‰æ ‘æŒ‡å®šçš„ä½ç½®ã€‚</li>
<li>Integer å’Œ String å¯¹è±¡éƒ½å¯ä»¥è¿›è¡Œé»˜è®¤çš„ TreeSet æ’åºï¼Œè€Œè‡ªå®šä¹‰ç±»çš„å¯¹è±¡æ˜¯ä¸å¯ä»¥çš„ï¼Œ è‡ªå·±å®šä¹‰çš„ç±»å¿…é¡»å®ç° Comparable æ¥å£ï¼Œå¹¶ä¸”è¦†å†™ç›¸åº”çš„ compareToTo()å‡½æ•°ï¼Œæ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</li>
<li>åœ¨è¦†å†™ compare()å‡½æ•°æ—¶ï¼Œè¦è¿”å›ç›¸åº”çš„å€¼æ‰èƒ½ä½¿ TreeSet æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ¥æ’åº</li>
<li>æ¯”è¾ƒæ­¤å¯¹è±¡ä¸æŒ‡å®šå¯¹è±¡çš„é¡ºåºã€‚å¦‚æœè¯¥å¯¹è±¡å°äºã€ç­‰äºæˆ–å¤§äºæŒ‡å®šå¯¹è±¡ï¼Œåˆ™åˆ†åˆ«è¿”å›è´Ÿæ•´æ•°ã€é›¶æˆ–æ­£æ•´æ•°</li>
</ol>
</li>
<li><p>LinkHashSetï¼ˆ HashSet+LinkedHashMapï¼‰<br>å¯¹äº LinkedHashSet è€Œè¨€ï¼Œå®ƒç»§æ‰¿ä¸ HashSetã€åˆåŸºäº LinkedHashMap æ¥å®ç°çš„ã€‚LinkedHashSet åº•å±‚ä½¿ç”¨ LinkedHashMap æ¥ä¿å­˜æ‰€æœ‰å…ƒç´ ï¼Œå®ƒç»§æ‰¿ä¸ HashSetï¼Œå…¶æ‰€æœ‰çš„æ–¹æ³•æ“ä½œä¸Šåˆä¸ HashSet ç›¸åŒï¼Œå› æ­¤ LinkedHashSet çš„å®ç°ä¸Šéå¸¸ç®€å•ï¼Œåªæä¾›äº†å››ä¸ªæ„é€ æ–¹æ³•ï¼Œå¹¶é€šè¿‡ä¼ é€’ä¸€ä¸ªæ ‡è¯†å‚æ•°ï¼Œè°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ï¼Œåº•å±‚æ„é€ ä¸€ä¸ª LinkedHashMap æ¥å®ç°ï¼Œåœ¨ç›¸å…³æ“ä½œä¸Šä¸çˆ¶ç±» HashSet çš„æ“ä½œç›¸åŒï¼Œç›´æ¥è°ƒç”¨çˆ¶ç±» HashSet çš„æ–¹æ³•å³å¯ã€‚</p>
</li>
<li><p>Map äº†è§£å¤šå°‘ï¼Ÿ<br>Mapåœ¨Javaé‡Œè¾¹æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¸¸è§çš„å®ç°ç±»æœ‰ HashMapã€LinkedHashMapã€TreeMap å’Œ ConcurrentHashMap<br>åœ¨Javaé‡Œè¾¹ï¼Œå“ˆå¸Œè¡¨çš„ç»“æ„æ˜¯æ•°ç»„+é“¾è¡¨çš„æ–¹å¼ã€‚HashMapåº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„+é“¾è¡¨&#x2F;çº¢é»‘æ ‘ï¼›LinkedHashMapæ˜¯æ•°ç»„+é“¾è¡¨&#x2F;çº¢é»‘æ ‘+åŒå‘é“¾è¡¨ï¼›TreeMapæ˜¯çº¢é»‘æ ‘ï¼›è€ŒConcurrentHashMapæ˜¯æ•°ç»„+é“¾è¡¨&#x2F;çº¢é»‘æ ‘ </p>
</li>
<li><p><strong>HashMap</strong></p>
<ul>
<li>hashmapé€šè¿‡put(key,value)å­˜å‚¨ï¼Œé€šè¿‡get(key)è·å–ã€‚å½“ä¼ å…¥keyæ—¶ï¼Œhashmapä¼šè°ƒç”¨hashcode()æ–¹æ³•è®¡ç®—å‡ºhashå€¼ï¼Œæ ¹æ® hash å€¼å°† value ä¿å­˜åœ¨ bucket é‡Œ</li>
<li>å®ç°åŸç†ï¼šå…¶å®å°±æ˜¯æœ‰ä¸ª Entry æ•°ç»„ï¼ŒEntry ä¿å­˜äº† key å’Œ valueã€‚å½“ä½ è¦å¡å…¥ä¸€ä¸ªé”®å€¼å¯¹çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ä¸€ä¸ª hash ç®—æ³•è®¡ç®— key çš„ hash å€¼ï¼Œç„¶åé€šè¿‡æ•°ç»„å¤§å° <code>n-1 &amp; hash</code> å€¼ä¹‹åï¼Œå¾—åˆ°ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡ï¼Œç„¶åå¾€é‚£ä¸ªä½ç½®å¡å…¥è¿™ä¸ª Entryã€‚ï¼ˆhashmapçš„åº•å±‚æ˜¯å“ˆå¸Œè¡¨ï¼Œå“ˆå¸Œè¡¨çš„å®ç°æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰</li>
<li>ä¸ºäº†è§£å†³ hash å†²çªçš„é—®é¢˜ï¼Œé‡‡ç”¨äº†é“¾è¡¨æ³•<ul>
<li>åœ¨ JDK 1.7 åŠä¹‹å‰é“¾è¡¨çš„æ’å…¥é‡‡ç”¨çš„æ˜¯å¤´æ’æ³•ï¼Œå³åœ¨é“¾è¡¨çš„å¤´éƒ¨æ’å…¥æ–°çš„ Entryã€‚åœ¨ JDK 1.8 çš„æ—¶å€™ï¼Œæ”¹æˆäº†å°¾æ’æ³•ï¼Œå¹¶ä¸”å¼•å…¥äº†çº¢é»‘æ ‘ã€‚å½“é“¾è¡¨çš„é•¿åº¦å¤§äº 8 ä¸”æ•°ç»„å¤§å°å¤§äºç­‰äº 64 çš„æ—¶å€™ï¼Œå°±æŠŠé“¾è¡¨è½¬åŒ–æˆçº¢é»‘æ ‘ï¼Œå½“çº¢é»‘æ ‘èŠ‚ç‚¹å°äº 6 çš„æ—¶å€™ï¼Œåˆä¼šé€€åŒ–æˆé“¾è¡¨ã€‚</li>
<li>ä¸ºä»€ä¹ˆ JDK 1.8 è¦å¯¹ HashMap åšçº¢é»‘æ ‘è¿™ä¸ªæ”¹åŠ¨ï¼Ÿä¸»è¦æ˜¯é¿å… hash å†²çªå¯¼è‡´é“¾è¡¨çš„é•¿åº¦è¿‡é•¿ï¼Œè¿™æ · get çš„æ—¶å€™æ—¶é—´å¤æ‚åº¦ä¸¥æ ¼æ¥è¯´å°±ä¸æ˜¯ O(1) äº†ï¼Œå› ä¸ºå¯èƒ½éœ€è¦éå†é“¾è¡¨æ¥æŸ¥æ‰¾å‘½ä¸­çš„ Entryã€‚</li>
<li>ä¸ºä»€ä¹ˆå®šä¹‰é“¾è¡¨é•¿åº¦ä¸º 8 ä¸”æ•°ç»„å¤§å°å¤§äºç­‰äº 64 æ‰è½¬çº¢é»‘æ ‘ï¼Ÿä¸è¦é“¾è¡¨ç›´æ¥ç”¨çº¢é»‘æ ‘ä¸å°±å¾—äº†å—ï¼Ÿå› ä¸ºçº¢é»‘æ ‘èŠ‚ç‚¹çš„å¤§å°æ˜¯æ™®é€šèŠ‚ç‚¹å¤§å°çš„ä¸¤å€ï¼Œæ‰€ä»¥ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ä¸ä¼šç›´æ¥åªç”¨çº¢é»‘æ ‘ï¼Œåªæœ‰å½“èŠ‚ç‚¹åˆ°è¾¾ä¸€å®šæ•°é‡æ‰ä¼šè½¬æˆçº¢é»‘æ ‘ï¼Œè¿™é‡Œå®šä¹‰çš„æ˜¯ 8ï¼ˆæ³Šæ¾åˆ†å¸ƒï¼‰</li>
<li>ä¸ºä»€ä¹ˆèŠ‚ç‚¹å°‘äº 6 è¦ä»çº¢é»‘æ ‘è½¬æˆé“¾è¡¨ï¼Ÿä¹Ÿæ˜¯ä¸ºäº†å¹³è¡¡æ—¶é—´å’Œç©ºé—´ï¼ŒèŠ‚ç‚¹å¤ªå°‘é“¾è¡¨éå†ä¹Ÿå¾ˆå¿«ï¼ŒèŠ‚çº¦å†…å­˜ã€‚</li>
</ul>
</li>
<li>HashMap <strong>é»˜è®¤å¤§å°ä¸º16ï¼Œè´Ÿè½½å› å­çš„å¤§å°ä¸º 0.75ã€‚</strong><ul>
<li>HashMapçš„å¤§å°åªèƒ½æ˜¯2æ¬¡å¹‚çš„ï¼Œå‡è®¾ä½ ä¼ ä¸€ä¸ª10è¿›å»ï¼Œå®é™…ä¸Šæœ€ç»ˆHashMapçš„å¤§å°æ˜¯16ï¼ˆå…·ä½“çš„å®ç°åœ¨tableSizeForå¯ä»¥çœ‹åˆ°ï¼‰æŠŠå…ƒç´ æ”¾è¿›HashMapçš„æ—¶å€™ï¼Œéœ€è¦ç®—å‡ºè¿™ä¸ªå…ƒç´ æ‰€åœ¨çš„ä½ç½®ï¼ˆhashï¼‰ã€‚åœ¨HashMapé‡Œç”¨çš„æ˜¯ä½è¿ç®—æ¥ä»£æ›¿å–æ¨¡ï¼Œæ›´åŠ é«˜æ•ˆã€‚HashMapçš„å¤§å°åªèƒ½æ˜¯2æ¬¡å¹‚æ—¶ï¼Œæ‰èƒ½åˆç†ç”¨ä½è¿ç®—æ›¿ä»£å–æ¨¡ã€‚ </li>
<li>è´Ÿè½½å› å­çš„å¤§å°å†³å®šç€å“ˆå¸Œè¡¨çš„æ‰©å®¹å’Œå“ˆå¸Œå†²çªã€‚æ¯”å¦‚é»˜è®¤çš„HashMapå¤§å°ä¸º16ï¼Œè´Ÿè½½å› å­ä¸º0.75ï¼Œè¿™æ„å‘³ç€æ•°ç»„æœ€å¤šåªèƒ½æ”¾16*0.75&#x3D;12ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡putå…ƒç´ è¿›å»çš„æ—¶å€™ï¼Œéƒ½ä¼šæ£€æŸ¥HashMapçš„å¤§å°æœ‰æ²¡æœ‰è¶…è¿‡è¿™ä¸ªé˜ˆå€¼ï¼Œä¸€æ—¦è¶…è¿‡12ï¼Œåˆ™å“ˆå¸Œè¡¨éœ€è¦æ‰©å®¹ã€‚å¦‚æœæŠŠè´Ÿè½½å› å­è°ƒé«˜äº†ï¼Œå“ˆå¸Œå†²çªçš„æ¦‚ç‡ä¼šå¢é«˜ï¼ŒåŒæ ·ä¼šè€—æ—¶ï¼ˆæŸ¥æ‰¾é€Ÿåº¦å˜æ…¢äº†ï¼‰</li>
</ul>
</li>
<li><strong>put</strong>ï¼šé¦–å…ˆå¯¹keyåšhashè¿ç®—ï¼Œè®¡ç®—å‡ºè¯¥keyæ‰€åœ¨çš„indexã€‚å¦‚æœæ²¡ç¢°æ’ï¼Œç›´æ¥æ”¾åˆ°æ•°ç»„ä¸­ï¼Œå¦‚æœç¢°æ’äº†ï¼Œéœ€è¦åˆ¤æ–­ç›®å‰æ•°æ®ç»“æ„æ˜¯é“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘ï¼Œæ ¹æ®ä¸åŒçš„æƒ…å†µæ¥è¿›è¡Œæ’å…¥ã€‚å‡è®¾keyæ˜¯ç›¸åŒçš„ï¼Œåˆ™æ›¿æ¢åˆ°åŸæ¥çš„å€¼ã€‚æœ€ååˆ¤æ–­å“ˆå¸Œè¡¨å¦‚æœæ»¡äº†ï¼Œæ‰©å®¹ã€‚</li>
<li><strong>get</strong>ï¼šè¿˜æ˜¯å¯¹keyåšhashè¿ç®—ï¼Œè®¡ç®—å‡ºè¯¥keyæ‰€åœ¨çš„indexï¼Œç„¶ååˆ¤æ–­æ˜¯å¦æœ‰hashå†²çªã€‚å‡è®¾æ²¡æœ‰å†²çªç›´æ¥è¿”å›ï¼Œå‡è®¾æœ‰å†²çªåˆ™åˆ¤æ–­å½“å‰æ•°æ®ç»“æ„æ˜¯é“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘ï¼Œåˆ†åˆ«ä»ä¸åŒçš„æ•°æ®ç»“æ„ä¸­å–å‡ºã€‚<br>  åœ¨HashMapä¸­æ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦ç›¸åŒï¼Ÿé¦–å…ˆä¼šæ¯”è¾ƒhashå€¼ï¼Œéšåä¼šç”¨&#x3D;&#x3D;è¿ç®—ç¬¦å’Œequals()æ¥åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦ç›¸åŒã€‚å¦‚æœåªæœ‰hashå€¼ç›¸åŒï¼Œé‚£è¯´æ˜è¯¥å…ƒç´ å“ˆå¸Œå†²çªäº†ï¼Œå¦‚æœhashå€¼å’Œequals() || &#x3D;&#x3D; éƒ½ç›¸åŒï¼Œé‚£è¯´æ˜è¯¥å…ƒç´ æ˜¯åŒä¸€ä¸ªã€‚</li>
<li>Jdk1.7 åˆ° Jdk1.8 HashMap å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–(åº•å±‚)?<ul>
<li>1.7ä¸­åº•å±‚æ˜¯æ•°ç»„+é“¾è¡¨ï¼Œ1.8ä¸­åº•å±‚æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼ŒåŠ çº¢é»‘æ ‘çš„ç›®çš„æ˜¯æé«˜HashMapæ’å…¥å’ŒæŸ¥è¯¢æ•´ä½“æ•ˆç‡</li>
<li>1.7ä¸­é“¾è¡¨æ’å…¥ä½¿ç”¨çš„æ˜¯å¤´æ’æ³•ï¼Œ1.8ä½¿ç”¨çš„æ˜¯å°¾æ’æ³•ï¼Œå› ä¸º1.8ä¸­æ’å…¥keyå’Œvalueæ—¶éœ€è¦åˆ¤æ–­é“¾è¡¨å…ƒç´ ä¸ªæ•°ï¼Œæ‰€ä»¥éœ€è¦éå†é“¾è¡¨ç»Ÿè®¡é“¾è¡¨å…ƒç´ ä¸ªæ•°ï¼Œæ‰€ä»¥æ­£å¥½å°±ç›´æ¥ä½¿ç”¨å°¾æ’æ³•</li>
<li>1.7ä¸­å“ˆå¸Œç®—æ³•æ¯”è¾ƒå¤æ‚ï¼Œå­˜åœ¨å„ç§å³ç§»ä¸å¼‚æˆ–è¿ç®—ï¼Œ1.8ä¸­è¿›è¡Œäº†ç®€åŒ–ï¼Œå› ä¸ºå¤æ‚çš„å“ˆå¸Œç®—æ³•çš„ç›®çš„å°±æ˜¯æé«˜æ•£åˆ—æ€§ï¼Œæ¥æä¾›HashMapçš„æ•´ä½“æ•ˆç‡ï¼Œè€Œ1.8ä¸­æ–°å¢äº†çº¢é»‘æ ‘ï¼Œæ‰€ä»¥å¯ä»¥é€‚å½“çš„ç®€åŒ–å“ˆå¸Œç®—æ³•ï¼ŒèŠ‚çœCPUèµ„æº</li>
</ul>
</li>
</ul>
</li>
<li><p>hash å‡½æ•°çš„ä¼˜åŒ–ï¼š</p>
<ul>
<li>1.8åï¼Œåœ¨putå…ƒç´ çš„æ—¶å€™ä¼ é€’çš„Keyï¼Œå…ˆç®—å‡ºæ­£å¸¸çš„å“ˆå¸Œå€¼ï¼Œç„¶åä¸é«˜16ä½åšå¼‚æˆ–è¿ç®—ï¼Œäº§ç”Ÿæœ€ç»ˆçš„å“ˆå¸Œå€¼ã€‚ç›¸å½“äºæŠŠé«˜ä½å’Œä½ä½çš„ç‰¹å¾è¿›è¡Œç»„åˆï¼Œç»“æœå¾—åˆ°çš„æ•°ç»„ä½ç½®çš„æ•£åˆ—åº¦ä¸€å®šä¼šæ›´é«˜ï¼Œå¯ä»¥å¢åŠ äº†éšæœºæ€§ï¼Œå‡å°‘äº†ç¢°æ’å†²çªçš„å¯èƒ½æ€§ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>HashMap æ‰©å®¹ resize()</strong> ï¼šé»˜è®¤æ˜¯æ‰©åŸæ¥çš„2å€ï¼ˆå› ä¸ºHashMapçš„å¤§å°åªèƒ½æ˜¯2æ¬¡å¹‚ï¼‰ï¼Œæ‰©çš„æ˜¯æ•°ç»„ä¸æ˜¯é“¾è¡¨ã€‚</p>
<ul>
<li>1.7ç‰ˆæœ¬ï¼š<ol>
<li>å…ˆç”Ÿæˆé•¿åº¦ä¸ºåŸæ¥2å€çš„æ–°æ•°ç»„</li>
<li>éå†è€æ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®ä¸Šçš„é“¾è¡¨ä¸Šçš„æ¯ä¸ªå…ƒç´ </li>
<li>å–æ¯ä¸ªå…ƒç´ çš„keyï¼Œå¹¶åŸºäºæ–°æ•°ç»„é•¿åº¦ï¼Œè®¡ç®—å‡ºæ¯ä¸ªå…ƒç´ åœ¨æ–°æ•°ç»„ä¸­çš„ä¸‹æ ‡</li>
<li>å¤´æ’æ³•å°†å…ƒç´ æ·»åŠ åˆ°æ–°æ•°ç»„ä¸­å»</li>
<li>æ‰€æœ‰å…ƒç´ è½¬ç§»å®Œäº†ä¹‹åï¼Œå°†æ–°æ•°ç»„èµ‹å€¼ç»™HashMapå¯¹è±¡çš„tableå±æ€§</li>
</ol>
</li>
<li>1.8ç‰ˆæœ¬ï¼š<ol>
<li>å…ˆç”Ÿæˆæ–°æ•°ç»„ï¼Œé•¿åº¦æ˜¯è€æ•°ç»„çš„2å€</li>
<li>éå†è€æ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®ä¸Šçš„é“¾è¡¨æˆ–çº¢é»‘æ ‘</li>
<li>å¦‚æœæ˜¯é“¾è¡¨ï¼Œåˆ™ç›´æ¥å°†é“¾è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ é‡Œæ–°è®¡ç®—ä¸‹æ ‡ï¼Œå¹¶æ·»åŠ åˆ°æ–°æ•°ç»„ä¸­å»<br>  (å°†é“¾è¡¨é‡æ–°é“¾æ¥ï¼ŒæŒ‰ç…§ä½ä½åŒºå’Œé«˜ä½åŒºé‡æ–°åˆ†é…åˆ°æ–°æ•°ç»„;)</li>
<li>å¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™å…ˆéå†çº¢é»‘æ ‘ï¼Œå…ˆè®¡ç®—å‡ºçº¢é»‘æ ‘ä¸­æ¯ä¸ªå…ƒç´ å¯¹åº”åœ¨æ–°æ•°ç»„ä¸­çš„ä¸‹æ ‡ä½ç½®ï¼šç»Ÿè®¡æ¯ä¸ªä¸‹æ ‡ä½ç½®çš„å…ƒç´ ä¸ªæ•°ï¼Œå¦‚æœè¯¥ä½ç½®ä¸‹çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡äº†8ï¼Œåˆ™ç”Ÿæˆä¸€ä¸ªæ–°çš„çº¢é»‘æ ‘ï¼Œå¹¶å°†æ ¹èŠ‚ç‚¹çš„æ·»åŠ åˆ°æ–°æ•°ç»„çš„å¯¹åº”ä½ç½®ï¼›å¦‚æœè¯¥ä½ç½®ä¸‹çš„å…ƒç´ ä¸ªæ•°æ²¡æœ‰è¶…è¿‡8ï¼Œé‚£ä¹ˆåˆ™ç”Ÿæˆä¸€ä¸ªé“¾è¡¨ï¼Œå¹¶å°†é“¾è¡¨çš„å¤´èŠ‚ç‚¹æ·»åŠ åˆ°æ–°æ•°ç»„çš„å¯¹åº”ä½ç½®ã€<br>  (è°ƒç”¨splitæ–¹æ³•å°†çº¢é»‘æ ‘é‡æ–°åˆ‡åˆ†ä¸ºä½ä½åŒºå’Œé«˜ä½åŒº2ä¸ªé“¾è¡¨;åˆ¤æ–­ä½ä½åŒºå’Œé«˜ä½åŒºé“¾è¡¨çš„é•¿åº¦ï¼Œé“¾è¡¨é•¿åº¦å°äº6ï¼Œåˆ™ä¼šè¿›è¡Œå–æ¶ˆæ ‘åŒ–çš„å¤„ç†ï¼Œå¦åˆ™ä¼šå°†æ–°ç”Ÿæˆçš„é“¾è¡¨é‡æ–°æ ‘åŒ–;)</li>
<li>æ‰€æœ‰å…ƒç´ è½¬ç§»å®Œäº†ä¹‹åï¼Œå°†æ–°æ•°ç»„èµ‹å€¼ç»™HashMapå¯¹è±¡çš„tableå±æ€§</li>
</ol>
</li>
</ul>
</li>
<li><p>Java8ä¸ºä»€ä¹ˆå°†HashMapçš„æ’å…¥æ–¹æ³•æ”¹ä¸ºäº†å°¾æ’æ³•ï¼Ÿ</p>
<ul>
<li>å¤´æ’æ³•ï¼Œå³æ–°æ’å…¥çš„å…ƒç´ ä¼šæ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼Œä¼šäº§ç”Ÿä»¥ä¸‹é—®é¢˜ï¼š<ul>
<li>ç ´åäº†é“¾è¡¨å…ƒç´ çš„æ’å…¥é¡ºåºï¼šç”±äºå¤´æ’æ³•æ˜¯å°†æ–°æ’å…¥çš„å…ƒç´ æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼Œè¿™æ ·å°±å¯¼è‡´é“¾è¡¨çš„é¡ºåºä¸å…ƒç´ æ’å…¥çš„é¡ºåºç›¸åï¼Œä¸åˆ©äºä¸€äº›éœ€è¦æŒ‰ç…§æ’å…¥é¡ºåºéå†çš„åœºæ™¯ã€‚</li>
<li>å®¹æ˜“å¼•èµ·é“¾è¡¨ç¯å½¢é—®é¢˜ï¼šç”±äºå¤´æ’æ³•éœ€è¦<strong>ä¿®æ”¹é“¾è¡¨å¤´</strong>ï¼Œè¿™ä¼šå¯¼è‡´åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œè§¦å‘resize()æ—¶å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹æ–°æ•°ç»„çš„æ¡¶èŠ‚ç‚¹çš„é“¾è¡¨å¤´ï¼Œå¯èƒ½ä¼šå¼•èµ·é“¾è¡¨ç¯å½¢é—®é¢˜ï¼Œä½¿å¾—é“¾è¡¨æ— æ³•æ­£ç¡®éå†æˆ–è€…å‡ºç°æ­»å¾ªç¯çš„æƒ…å†µã€‚<br>  ï¼Ÿï¼Ÿ  <!-- - ä¸åˆ©äºé“¾è¡¨é•¿åº¦çš„å¹³è¡¡ï¼šåœ¨é•¿æ—¶é—´è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œå¤´æ’æ³•å¯èƒ½ä¼šå¯¼è‡´é“¾è¡¨çš„é•¿åº¦ä¸å¹³è¡¡ï¼Œå³æŸäº›é“¾è¡¨çš„é•¿åº¦ä¼šå¾ˆé•¿ï¼Œè€ŒæŸäº›é“¾è¡¨çš„é•¿åº¦å¾ˆçŸ­ï¼Œè¿™ä¼šé™ä½HashMapçš„æ€§èƒ½ã€‚ --></li>
</ul>
</li>
<li>å°¾æ’æ³•ï¼Œå³æ–°æ’å…¥çš„å…ƒç´ ä¼šæ’å…¥åˆ°é“¾è¡¨çš„å°¾éƒ¨ï¼Œè¿™æ ·å¯ä»¥è§£å†³å¾ˆå¤šé—®é¢˜å¹¶ä¸”æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šã€‚<ul>
<li>æé«˜æŸ¥è¯¢æ•ˆç‡ï¼šå°¾æ’æ³•ä½¿å¾—é“¾è¡¨å…ƒç´ çš„æ’å…¥é¡ºåºä¸å…ƒç´ æ’å…¥çš„é¡ºåºä¸€è‡´ï¼Œä»è€Œæ–¹ä¾¿äº†å…ƒç´ çš„æŸ¥æ‰¾å’Œéå†æ“ä½œï¼Œæé«˜äº†HashMapçš„æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li>é¿å…é“¾è¡¨ç¯å½¢é—®é¢˜ï¼šå°¾æ’æ³•æ˜¯å°†æ–°æ’å…¥çš„å…ƒç´ æ’å…¥åˆ°é“¾è¡¨çš„å°¾éƒ¨ï¼Œä¸éœ€è¦ä¿®æ”¹é“¾è¡¨å¤´ï¼Œå› æ­¤å¯ä»¥é¿å…åœ¨å¹¶å‘ç¯å¢ƒä¸‹å¤šä¸ªçº¿ç¨‹ä¿®æ”¹é“¾è¡¨å¤´å¯¼è‡´çš„é“¾è¡¨ç¯å½¢é—®é¢˜ã€‚</li>
<li>1.8ä¸­æ’å…¥keyå’Œvalueæ—¶éœ€è¦åˆ¤æ–­é“¾è¡¨å…ƒç´ ä¸ªæ•°ï¼Œæ‰€ä»¥éœ€è¦éå†é“¾è¡¨ç»Ÿè®¡é“¾è¡¨å…ƒç´ ä¸ªæ•°ï¼Œæ‰€ä»¥æ­£å¥½å°±ç›´æ¥ä½¿ç”¨å°¾æ’æ³•  <!-- - æé«˜é“¾è¡¨é•¿åº¦çš„å¹³è¡¡ï¼šå°¾æ’æ³•å¯ä»¥ä½¿å¾—é“¾è¡¨é•¿åº¦æ¯”è¾ƒå¹³è¡¡ï¼Œå‡å°‘äº†æŸäº›é“¾è¡¨é•¿åº¦è¿‡é•¿çš„æƒ…å†µï¼Œä»è€Œæé«˜äº†HashMapçš„æ€§èƒ½ã€‚ --></li>
</ul>
</li>
<li>Java8åŠä»¥åçš„ç‰ˆæœ¬æ’å…¥æ“ä½œçš„å¹³å‡æ—¶é—´è¦æ¯”Java8ä¹‹å‰çš„ç‰ˆæœ¬å¿«ï¼Œå·®è·åœ¨1mså·¦å³ï¼Œè¿™æ˜¯ç”±äºJava8å°†HashMapçš„æ’å…¥æ–¹æ³•æ”¹ä¸ºäº†å°¾æ’æ³•ï¼Œé¿å…äº†é“¾è¡¨ç¯å½¢é—®é¢˜çš„å‘ç”Ÿï¼ŒåŒæ—¶ä¼˜åŒ–äº†å“ˆå¸Œç®—æ³•å’ŒæŸ¥è¯¢æ•ˆç‡ï¼Œä»è€Œæé«˜äº†HashMapçš„æ€§èƒ½ã€‚</li>
</ul>
</li>
<li><p>LinkedHashMapï¼Ÿ<br>LinkedHashMap åº•å±‚ç»“æ„æ˜¯æ•°ç»„+é“¾è¡¨+åŒå‘é“¾è¡¨ï¼Œå®é™…ä¸Šå®ƒç»§æ‰¿äº† HashMapï¼Œåœ¨ HashMap çš„åŸºç¡€ä¸Šç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨<br>LinkedHashMap æŠŠ HashMap çš„ Entryæ•°ç»„ åŠ äº†ä¸¤ä¸ªæŒ‡é’ˆï¼šbefore å’Œ afterã€‚å°±æ˜¯è¦æŠŠå¡å…¥çš„ Entry ä¹‹é—´è¿›è¡Œå…³è”ï¼Œä¸²æˆåŒå‘é“¾è¡¨ï¼›æœ‰äº†è¿™ä¸ªåŒå‘é“¾è¡¨ï¼Œæˆ‘ä»¬çš„æ’å…¥å¯ä»¥æ˜¯æœ‰åºçš„ï¼Œè¿™é‡Œçš„æœ‰åºä¸æ˜¯æŒ‡å¤§å°æœ‰åºï¼Œè€Œæ˜¯æ’å…¥æœ‰åºã€‚LinkedHashMapåœ¨éå†çš„æ—¶å€™å®é™…ç”¨çš„æ˜¯åŒå‘é“¾è¡¨æ¥éå†çš„ï¼Œæ‰€ä»¥LinkedHashMapçš„å¤§å°ä¸ä¼šå½±å“åˆ°éå†çš„æ€§èƒ½<br>å¹¶ä¸”å†…éƒ¨è¿˜æœ‰ä¸ª accessOrder æˆå‘˜ï¼Œé»˜è®¤æ˜¯ falseï¼Œ ä»£è¡¨é“¾è¡¨æ˜¯é¡ºåºæ˜¯æŒ‰æ’å…¥é¡ºåºæ¥æ’çš„ï¼Œå¦‚æœæ˜¯ true åˆ™ä¼šæ ¹æ®è®¿é—®é¡ºåºæ¥è¿›è¡Œè°ƒæ•´ï¼Œå°±æ˜¯å’±ä»¬ç†ŸçŸ¥çš„ LRU é‚£ç§ï¼Œå¦‚æœå“ªä¸ªèŠ‚ç‚¹è®¿é—®äº†ï¼Œå°±æŠŠå®ƒç§»åˆ°æœ€åï¼Œä»£è¡¨æœ€è¿‘è®¿é—®çš„èŠ‚ç‚¹ã€‚</p>
</li>
<li><p>TreeMapï¼Ÿ<br>TreeMapçš„åº•å±‚æ•°æ®ç»“æ„æ˜¯çº¢é»‘æ ‘ï¼ŒTreeMapçš„keyä¸èƒ½ä¸ºnullï¼ˆå¦‚æœä¸ºnullï¼Œé‚£è¿˜æ€ä¹ˆæ’åºå‘¢ï¼‰ã€‚<br>TreeMapæœ‰åºæ˜¯é€šè¿‡å®ç° Comparable æ¥å£æˆ–è€…è‡ªå®šä¹‰å®ç°ä¸€ä¸ª comparator ä¼ å…¥æ„é€ å‡½æ•°(å¦‚æœcomparatorä¸ºnullï¼Œé‚£ä¹ˆå°±ä½¿ç”¨è‡ªç„¶é¡ºåº )ï¼Œè¿™æ ·å¡å…¥çš„èŠ‚ç‚¹å°±ä¼šæ ¹æ®ä½ å®šä¹‰çš„è§„åˆ™è¿›è¡Œæ’åºã€‚å› æ­¤å®ƒé™¤äº†ä½œä¸º Map å¤–ï¼Œè¿˜å¯ä»¥ç”¨ä½œåŒç«¯é˜Ÿåˆ—ã€‚</p>
</li>
<li><p>Hashtableã€HashMapã€TreeMapï¼Ÿ</p>
<ul>
<li>Hashtable<ul>
<li>ä¸å…è®¸ä½¿ç”¨ null é”®æˆ– null å€¼ã€‚</li>
<li>ä½¿ç”¨åœºæ™¯ï¼š1ã€å½“éœ€è¦ç¡®ä¿æ•°æ®çš„çº¿ç¨‹å®‰å…¨ï¼Œä¸”åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å…±äº« Map æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Hashtableã€‚2ã€ç”±äºå…¶æ€§èƒ½ç›¸å¯¹è¾ƒä½ï¼Œæ¨èåœ¨é—ç•™ä»£ç ä¸­æˆ–è€…ç‰¹å®šè¦æ±‚çº¿ç¨‹å®‰å…¨çš„å°è§„æ¨¡æ•°æ®é›†åˆä¸­ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li>HashMap<ul>
<li>å…è®¸ä¸€ä¸ª null é”®å’Œå¤šä¸ª null å€¼ã€‚</li>
<li>ä½¿ç”¨åœºæ™¯ï¼š 1ã€åœ¨éå¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œæˆ–è€…åœ¨è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹ï¼ˆå¯ä»¥é€šè¿‡å¤–éƒ¨åŒæ­¥æ¥è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰ï¼ŒHashMap æ˜¯ä¸€ä¸ªä¼˜é€‰ï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¥½çš„æ€§èƒ½ã€‚ 2ã€å½“éœ€è¦å¿«é€ŸæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤é”®å€¼å¯¹æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®é‡è¾ƒå¤§çš„æƒ…å†µä¸‹ã€‚</li>
<li>å½“éœ€è¦å¤šçº¿ç¨‹æ“ä½œçš„æ—¶å€™å¯ä»¥ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„ConcurrentHashMapã€‚ConcurrentHashMapè™½ç„¶ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å®ƒçš„æ•ˆç‡æ¯”Hashtableè¦é«˜å¥½å¤šå€ã€‚å› ä¸ºConcurrentHashMapä½¿ç”¨äº†åˆ†æ®µé”ï¼Œå¹¶ä¸å¯¹æ•´ä¸ªæ•°æ®è¿›è¡Œé”å®šã€‚</li>
</ul>
</li>
<li>TreeMap<ul>
<li>keyä¸èƒ½ä¸ºnull</li>
<li>ä½¿ç”¨åœºæ™¯ï¼š1ã€å½“éœ€è¦ä¸€ä¸ªæ€»æ˜¯ä¿æŒæ’åºçŠ¶æ€çš„ Map æ—¶ï¼ŒTreeMap æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ã€‚å®ƒé€‚ç”¨äºéœ€è¦é¢‘ç¹åœ°è¿›è¡Œæœ‰åºéå†æˆ–èŒƒå›´æœç´¢çš„åœºæ™¯ã€‚  2ã€  åœ¨éœ€è¦æ ¹æ®é”®è¿›è¡Œæ’åºçš„åº”ç”¨ä¸­ï¼Œå¦‚æ—¶é—´çº¿ç´¢å¼•ã€è‡ªç„¶æ’åºçš„ç›®å½•ç»“æ„ç­‰ã€‚3ã€   å½“æ•°æ®ç»“æ„çš„å¤§å°é¢‘ç¹å˜åŠ¨ï¼Œä¸”éœ€è¦ä¿æŒæœ‰åºçŠ¶æ€æ—¶ï¼ŒTreeMap é€šå¸¸æ¯”ç»´æŠ¤ä¸€ä¸ª ArrayList ä¹‹åå†æ’åºè¦é«˜æ•ˆã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>ConcurrentHashMapï¼Ÿ</p>
<ul>
<li>ConcurrentHashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„Mapå®ç°ç±»ï¼Œå®ƒåœ¨jucåŒ…ä¸‹çš„ã€‚çº¿ç¨‹å®‰å…¨çš„Mapå®ç°ç±»é™¤äº†ConcurrentHashMapè¿˜æœ‰ä¸€ä¸ªå«åšHashtableã€‚å½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Collectionsæ¥åŒ…è£…å‡ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Mapï¼Œä½†æ— è®ºæ˜¯Hashtableè¿˜æ˜¯CollectionsåŒ…è£…å‡ºæ¥çš„éƒ½æ¯”è¾ƒä½æ•ˆï¼ˆå› ä¸ºæ˜¯ç›´æ¥åœ¨å¤–å±‚å¥—synchronizeï¼‰ï¼›<br>  HashMapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹æœ‰å¯èƒ½ä¼šæœ‰æ•°æ®ä¸¢å¤±å’Œè·å–ä¸äº†æœ€æ–°æ•°æ®çš„é—®é¢˜</li>
<li>ConcurrentHashMap æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª HashMapï¼Œå› æ­¤åŠŸèƒ½å’Œ HashMap ä¸€æ ·ï¼Œä½†æ˜¯ConcurrentHashMap åœ¨ HashMap çš„åŸºç¡€ä¸Šï¼Œæä¾›äº†å¹¶å‘å®‰å…¨çš„å®ç°ã€‚å¹¶å‘å®‰å…¨çš„ä¸»è¦å®ç°æ˜¯é€šè¿‡å¯¹æŒ‡å®šçš„ Node èŠ‚ç‚¹åŠ é”ï¼Œæ¥ä¿è¯æ•°æ®æ›´æ–°çš„å®‰å…¨æ€§</li>
<li>åº•å±‚æ•°æ®ç»“æ„<br>  JDK1.7åº•å±‚é‡‡ç”¨åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨å®ç°<br>  JDK1.8 é‡‡ç”¨çš„æ•°æ®ç»“æ„è·ŸHashMap1.8çš„ç»“æ„ä¸€æ ·ï¼Œæ•°ç»„+é“¾è¡¨&#x2F;çº¢é»‘äºŒå‰æ ‘</li>
<li>åŠ é”çš„æ–¹å¼<br>  JDK1.7é‡‡ç”¨Segmentåˆ†æ®µé”ï¼Œåº•å±‚ä½¿ç”¨çš„æ˜¯ReentrantLock<br>  JDK1.8é‡‡ç”¨CASæ·»åŠ æ–°èŠ‚ç‚¹ï¼Œï¼ˆå¦‚æœå·²å­˜åœ¨èŠ‚ç‚¹ï¼‰é‡‡ç”¨synchronizedé”å®šé“¾è¡¨æˆ–çº¢é»‘äºŒå‰æ ‘çš„é¦–èŠ‚ç‚¹ï¼Œç›¸å¯¹Segmentåˆ†æ®µé”ç²’åº¦æ›´ç»†ï¼Œæ€§èƒ½æ›´å¥½</li>
</ul>
</li>
<li><p>çº¢é»‘æ ‘</p>
<ul>
<li>Red-Black Treeæ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒé€šè¿‡ä¸€äº›é™„åŠ çš„ä¿¡æ¯ï¼ˆé¢œè‰²æ ‡è®°ï¼‰ä¿æŒæ ‘çš„å¹³è¡¡ã€‚è¿™ç§å¹³è¡¡æ€§è´¨ç¡®ä¿äº†åœ¨æœ€åæƒ…å†µä¸‹å¯¹äºå„ç§åŸºæœ¬åŠ¨æ€é›†åˆæ“ä½œï¼ˆæ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾ï¼‰çš„æ€§èƒ½éƒ½æœ‰è¾ƒå¥½çš„ä¸Šç•Œï¼Œä¿è¯äº†æ ‘çš„é«˜åº¦æ˜¯å¯¹æ•°çº§åˆ«çš„ã€‚</li>
<li>åœ¨Javaä¸­ï¼Œ<code>TreeMap</code> å’Œ <code>TreeSet</code> ç±»ä½¿ç”¨çº¢é»‘æ ‘æ¥å®ç°<strong>æœ‰åº</strong>æ˜ å°„å’Œ<strong>æœ‰åº</strong>é›†åˆã€‚</li>
<li>çº¢é»‘æ ‘å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š<ol>
<li>èŠ‚ç‚¹é¢œè‰²ï¼š æ¯ä¸ªèŠ‚ç‚¹éƒ½å¸¦æœ‰é¢œè‰²ï¼Œå¯ä»¥æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚</li>
<li>æ ¹èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ï¼š æ ¹èŠ‚ç‚¹å’Œæ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼ˆNILèŠ‚ç‚¹ï¼‰éƒ½æ˜¯é»‘è‰²çš„ã€‚</li>
<li>ç›¸é‚»èŠ‚ç‚¹é¢œè‰²ï¼š ç›¸é‚»çš„èŠ‚ç‚¹ä¸èƒ½éƒ½æ˜¯çº¢è‰²ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¢è‰²èŠ‚ç‚¹ä¸èƒ½ç›´æ¥ç›¸è¿ï¼Œé»‘è‰²èŠ‚ç‚¹å¯ä»¥ç›¸è¿ã€‚</li>
<li>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚<br>  è¿™äº›è§„åˆ™ç¡®ä¿äº†çº¢é»‘æ ‘çš„å…³é”®æ€§è´¨ï¼Œå³ä»»æ„ä¸€æ¡ä»æ ¹åˆ°å¶å­çš„è·¯å¾„éƒ½ä¸ä¼šè¶…è¿‡æœ€çŸ­è·¯å¾„çš„ä¸¤å€é•¿ã€‚è¿™ä¿è¯äº†çº¢é»‘æ ‘åœ¨åŠ¨æ€æ’å…¥å’Œåˆ é™¤æ“ä½œæ—¶èƒ½å¤Ÿä¿æŒç›¸å¯¹å¹³è¡¡ï¼Œä»è€Œé¿å…äº†å‡ºç°æç«¯ä¸å¹³è¡¡çš„æƒ…å†µã€‚</li>
</ol>
</li>
<li>çº¢é»‘æ ‘æ’å…¥å’Œåˆ é™¤ï¼šéƒ½å¯èƒ½å¯¼è‡´æ ‘å¤±å»å¹³è¡¡ï¼Œå› æ­¤éœ€è¦é€šè¿‡æ—‹è½¬å’Œé‡æ–°ç€è‰²ç­‰æ“ä½œæ¥ç»´æŠ¤å¹³è¡¡æ€§è´¨ã€‚<ul>
<li>æ’å…¥æ“ä½œï¼š<ol>
<li>å°†èŠ‚ç‚¹æ’å…¥ï¼š å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°çº¢é»‘æ ‘çš„åˆé€‚ä½ç½®ï¼Œé€šå¸¸æ˜¯æŒ‰ç…§äºŒå‰æœç´¢æ ‘çš„æ’å…¥è§„åˆ™ã€‚</li>
<li>æ–°èŠ‚ç‚¹ç€è‰²ä¸ºçº¢è‰²ï¼š æ’å…¥çš„æ–°èŠ‚ç‚¹ç€è‰²ä¸ºçº¢è‰²ï¼Œä»¥ä¾¿æ›´å®¹æ˜“ç»´æŠ¤å¹³è¡¡æ€§è´¨ã€‚</li>
<li>é‡æ–°ç€è‰²å’Œæ—‹è½¬ï¼š æ ¹æ®çˆ¶èŠ‚ç‚¹ã€ç¥–çˆ¶èŠ‚ç‚¹ã€å”å”èŠ‚ç‚¹ç­‰ä¹‹é—´çš„é¢œè‰²å…³ç³»ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š<ul>
<li><strong>æƒ…å†µ1ï¼š</strong> å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œé‚£ä¹ˆä¸éœ€è¦åšé¢å¤–æ“ä½œï¼Œæ ‘ä»ç„¶ä¿æŒå¹³è¡¡ã€‚</li>
<li><strong>æƒ…å†µ2ï¼š</strong> å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²è€Œå”å”èŠ‚ç‚¹ä¹Ÿæ˜¯çº¢è‰²ï¼Œå¯ä»¥é€šè¿‡é¢œè‰²ç¿»è½¬æ¥ä¿æŒå¹³è¡¡ã€‚</li>
<li><strong>æƒ…å†µ3ï¼š</strong> å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²è€Œå”å”èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œå¹¶ä¸”å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡å·¦æ—‹è½¬å’Œå³æ—‹è½¬æ¥ä¿æŒå¹³è¡¡ã€‚</li>
<li><strong>æƒ…å†µ4ï¼š</strong> å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²è€Œå”å”èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œå¹¶ä¸”å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡å³æ—‹è½¬æ¥ä¿æŒå¹³è¡¡ã€‚</li>
</ul>
</li>
</ol>
</li>
<li>åˆ é™¤æ“ä½œï¼š<ol>
<li>æ‰§è¡Œæ™®é€šçš„äºŒå‰æœç´¢æ ‘åˆ é™¤æ“ä½œï¼š å°†è¦åˆ é™¤çš„èŠ‚ç‚¹ä»æ ‘ä¸­åˆ é™¤ï¼Œå¹¶æ ¹æ®å­èŠ‚ç‚¹çš„æƒ…å†µè¿›è¡Œé€‚å½“çš„æ›¿æ¢ã€‚</li>
<li>é‡æ–°ç€è‰²å’Œæ—‹è½¬ï¼š åˆ é™¤æ“ä½œå¯èƒ½ç ´åäº†çº¢é»‘æ ‘çš„å¹³è¡¡æ€§è´¨ï¼Œå› æ­¤å¯èƒ½éœ€è¦è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š<ul>
<li><strong>æƒ…å†µ1ï¼š</strong> å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æˆ–æ›¿ä»£èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œåªéœ€å°†æ›¿ä»£èŠ‚ç‚¹ç€è‰²ä¸ºé»‘è‰²ã€‚</li>
<li><strong>æƒ…å†µ2ï¼š</strong> å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œè€Œæ›¿ä»£èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œå¯ä»¥å°†æ›¿ä»£èŠ‚ç‚¹ç€è‰²ä¸ºé»‘è‰²ã€‚</li>
<li><strong>æƒ…å†µ3ï¼š</strong> å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹å’Œæ›¿ä»£èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ï¼Œå¯èƒ½éœ€è¦é€šè¿‡é‡æ–°ç€è‰²å’Œæ—‹è½¬æ¥ä¿æŒå¹³è¡¡ã€‚</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Java é›†åˆä½¿ç”¨æ³›å‹çš„å¥½å¤„ã€‚</p>
<ul>
<li>å¯ä»¥ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œé¿å…å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œèƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶é”™è¯¯æ£€æµ‹ã€‚</li>
<li>â€œæ³›å‹â€ æ„å‘³ç€ç¼–å†™çš„ä»£ç å¯ä»¥è¢«ä¸åŒç±»å‹çš„å¯¹è±¡æ‰€é‡ç”¨ã€‚<br>  ä»¥é›†åˆæ¥ä¸¾ä¾‹ï¼Œä½¿ç”¨æ³›å‹çš„å¥½å¤„æ˜¯æˆ‘ä»¬ä¸å¿…å› ä¸ºæ·»åŠ å…ƒç´ ç±»å‹çš„ä¸åŒè€Œå®šä¹‰ä¸åŒç±»å‹çš„é›†åˆï¼Œå¦‚æ•´å‹é›†åˆç±»ï¼Œæµ®ç‚¹å‹é›†åˆç±»ï¼Œå­—ç¬¦ä¸²é›†åˆç±»ï¼Œè€Œè¿™å¹¶ä¸æ˜¯æœ€é‡è¦çš„ï¼Œå› ä¸ºè¿™ä¹Ÿåªéœ€æŠŠåº•å±‚å­˜å‚¨è®¾ç½®Objectå³å¯ï¼Œæ·»åŠ çš„æ•°æ®å…¨éƒ¨éƒ½å¯å‘ä¸Šè½¬å‹ä¸ºObjectã€‚ï¼Ÿï¼Ÿ æ›´é‡è¦çš„æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡è§„åˆ™æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•æ§åˆ¶å­˜å‚¨çš„æ•°æ®ç±»å‹ã€‚ï¼Ÿ</li>
</ul>
</li>
<li><p>æ³›å‹ç±»</p>
<ul>
<li>æ³›å‹ç±»çš„å£°æ˜å’Œéæ³›å‹ç±»çš„å£°æ˜ç±»ä¼¼ï¼Œé™¤äº†åœ¨ç±»ååé¢æ·»åŠ äº†ç±»å‹å‚æ•°å£°æ˜éƒ¨åˆ†ã€‚å’Œæ³›å‹æ–¹æ³•ä¸€æ ·ï¼Œæ³›å‹ç±»çš„ç±»å‹å‚æ•°å£°æ˜éƒ¨åˆ†ä¹ŸåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å‚æ•°ï¼Œå‚æ•°é—´ç”¨é€—å·éš”å¼€ã€‚ä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œä¹Ÿè¢«ç§°ä¸ºä¸€ä¸ªç±»å‹å˜é‡ï¼Œæ˜¯ç”¨äºæŒ‡å®šä¸€ä¸ªæ³›å‹ç±»å‹åç§°çš„æ ‡è¯†ç¬¦ã€‚å› ä¸ºä»–ä»¬æ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œè¿™äº›ç±»è¢«ç§°ä¸ºå‚æ•°åŒ–çš„ç±»æˆ–å‚æ•°åŒ–çš„ç±»å‹ã€‚</li>
<li>ç±»å‹é€šé…ç¬¦ ä¸€èˆ¬æ˜¯ ä½¿ç”¨ ? ä»£æ›¿å…·ä½“çš„ç±»å‹å‚æ•°ã€‚ ä¾‹å¦‚ List&lt;?&gt; åœ¨é€»è¾‘ä¸Šæ˜¯List, List ç­‰æ‰€æœ‰ List&lt;å…·ä½“ç±»å‹å®å‚&gt;çš„çˆ¶ç±»ã€‚   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Box</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T t;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T t)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.t = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>ç±»å‹æ“¦é™¤</p>
<ul>
<li>Java ä¸­çš„æ³›å‹åŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨ç¼–è¯‘å™¨è¿™ä¸ªå±‚æ¬¡æ¥å®ç°çš„ï¼Œåœ¨ç”Ÿæˆçš„å­—èŠ‚ä»£ç ä¸­æ˜¯ä¸åŒ…å«æ³›å‹ä¸­çš„ç±»å‹ä¿¡æ¯çš„ã€‚<br>  ä½¿ç”¨æ³›å‹çš„æ—¶å€™åŠ ä¸Šçš„ç±»å‹å‚æ•°ï¼Œå¦‚ List<E> å’Œ List&lt;?&gt; ç­‰ç±»å‹åœ¨ç¼–è¯‘æ—¶ä¼šè¢«æ“¦é™¤ä¸ºåŸå§‹ç±»å‹ Listã€‚JVM çœ‹åˆ°çš„åªæ˜¯ Listï¼Œè€Œç”±æ³›å‹é™„åŠ çš„ç±»å‹ä¿¡æ¯å¯¹ JVM æ˜¯ä¸å¯è§çš„ã€‚è¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¸ºç±»å‹æ“¦é™¤ã€‚</li>
<li>ç±»å‹æ“¦é™¤çš„åŸºæœ¬è¿‡ç¨‹æ˜¯æ‰¾åˆ°ç”¨æ¥æ›¿æ¢ç±»å‹å‚æ•°çš„å…·ä½“ç±»ï¼Œä¸€èˆ¬æ˜¯ Objectã€‚å¦‚æœæŒ‡å®šäº†ç±»å‹å‚æ•°çš„ä¸Šç•Œçš„è¯ï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªä¸Šç•Œã€‚ç¼–è¯‘å™¨ä¼šå°†ä»£ç ä¸­çš„ç±»å‹å‚æ•°éƒ½æ›¿æ¢æˆå…·ä½“çš„ç±»ã€‚è¿™ç§æ›¿æ¢çš„è¡Œä¸ºæ˜¯æ³›å‹åœ¨ Java ä¸­å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒç¡®ä¿äº†æ³›å‹ä»£ç åœ¨è¿è¡Œæ—¶ä¸ä¼šå—åˆ°æ³›å‹ç±»å‹ä¿¡æ¯çš„å½±å“ï¼Œä»è€Œä¿æŒäº† Java çš„å‘åå…¼å®¹æ€§ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ‰ä¸€ä¸ªæ³›å‹ç±»æˆ–æ¥å£å¦‚ä¸‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;T&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨ç±»å‹æ“¦é™¤ä¹‹åï¼Œå®ƒç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯¹äºæ³›å‹æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">myMethod</span><span class="params">(T item)</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨ç±»å‹æ“¦é™¤åï¼Œå®ƒç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myMethod</span><span class="params">(Object item)</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>

<h2 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h2><ul>
<li><p>â€œJava è·¨å¹³å°â€<br>å› ä¸ºæœ‰ JVM å±è”½äº†åº•å±‚æ“ä½œç³»ç»Ÿã€‚Javaæºä»£ç ä¼šè¢«ç¼–è¯‘ä¸ºclassæ–‡ä»¶ï¼Œclassæ–‡ä»¶è¿è¡Œåœ¨JVMä¹‹ä¸Šã€‚JVMæ˜¯é¢å‘æ“ä½œç³»ç»Ÿçš„ï¼Œå®ƒè´Ÿè´£æŠŠClasså­—èŠ‚ç è§£é‡Šæˆç³»ç»Ÿæ‰€èƒ½è¯†åˆ«çš„æŒ‡ä»¤å¹¶æ‰§è¡Œï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£ç¨‹åºè¿è¡Œæ—¶å†…å­˜çš„ç®¡ç†ã€‚å®‰è£…JDKçš„æ—¶å¯ä»¥å‘ç°JDKæ˜¯åˆ†ã€Œä¸åŒçš„æ“ä½œç³»ç»Ÿã€ï¼ŒJDKé‡Œæ˜¯åŒ…å«JVMçš„ï¼Œæ‰€ä»¥Javaä¾èµ–ç€JVMå®ç°äº†ã€è·¨å¹³å°ã€</p>
</li>
<li><p>JVM ç»„æˆã€‚<br>javaè™šæ‹Ÿæœºæ˜¯jdkçš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œæœ‰å››å¤§ç»„æˆéƒ¨åˆ†ã€‚<br>1ã€ç±»åŠ è½½å™¨ï¼šå°†classå­—èŠ‚ç æ–‡ä»¶ä¸­çš„å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ã€‚<br>2ã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼šè´Ÿè´£ç®¡ç†JVM ä½¿ç”¨åˆ°çš„å†…å­˜ï¼Œæ¯”å¦‚åˆ›å»ºå¯¹è±¡å’Œé”€æ¯å¯¹è±¡ã€‚<br>3ã€æ‰§è¡Œå¼•æ“ï¼šå°†å­—èŠ‚ç æ–‡ä»¶ä¸­çš„æŒ‡ä»¤è§£é‡Šæˆæœºå™¨ç ï¼ŒåŒæ—¶ä½¿ç”¨å³æ—¶ç¼–è¯‘å™¨ä¼˜åŒ–æ€§èƒ½ï¼Œç”¨gcå›æ”¶å†…å­˜ã€‚<br>4ã€æœ¬åœ°æ¥å£ï¼šè°ƒç”¨æœ¬åœ°å·²ç»ç¼–è¯‘å¥½çš„æ–¹æ³•ï¼ˆä¸åœ¨å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼‰æ¯”å¦‚è™šæ‹Ÿæœºä¸­æä¾›çš„cppæ–¹æ³•ã€‚<br>è€Œ JVM çš„å†…å­˜ç»“æ„ï¼Œå¾€å¾€æŒ‡çš„å°±æ˜¯JVMå®šä¹‰çš„ã€Œè¿è¡Œæ—¶æ•°æ®åŒºåŸŸã€ã€‚ç®€å•æ¥è¯´å°±åˆ†ä¸ºäº†5å¤§å—ï¼šæ–¹æ³•åŒºã€å †ã€ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€‚å…¶ä¸­çº¿ç¨‹å…±äº«ï¼šå †ã€æ–¹æ³•åŒºï¼Œç§æœ‰ï¼šè™šæ‹Ÿæœºæ ˆã€ç¨‹åºè®¡æ•°å™¨ã€æœ¬åœ°æ–¹æ³•æ ˆã€‚</p>
</li>
<li><p>JVM å‚æ•°ï¼š</p>
<ol>
<li>é€šç”¨å‚æ•°ï¼š   <code>-version</code>ï¼šæ˜¾ç¤ºJavaç‰ˆæœ¬ä¿¡æ¯ã€‚ <code>-help</code> æˆ– <code>-?</code>ï¼šæ˜¾ç¤ºå‘½ä»¤è¡Œé€‰é¡¹å’Œä½¿ç”¨ä¿¡æ¯ã€‚</li>
<li>å †ç›¸å…³å‚æ•°ï¼š <code>-Xms&lt;size&gt;</code>ï¼šè®¾ç½®åˆå§‹å †å¤§å°ã€‚  <code>-Xmx&lt;size&gt;</code>ï¼šè®¾ç½®æœ€å¤§å †å¤§å°ã€‚ <code>-Xmn&lt;size&gt;</code>ï¼šè®¾ç½®å¹´è½»ä»£çš„å¤§å°ã€‚<br>  <code>-XX:MaxPermSize=&lt;size&gt;</code>ï¼šè®¾ç½®æŒä¹…ä»£ï¼ˆJava 8ä¹‹å‰ï¼‰çš„æœ€å¤§å¤§å°ã€‚- <code>-XX:MaxMetaspaceSize=&lt;size&gt;</code>ï¼šè®¾ç½®å…ƒç©ºé—´ï¼ˆJava 8åŠæ›´é«˜ç‰ˆæœ¬ï¼‰çš„æœ€å¤§å¤§å°ã€‚</li>
<li>åƒåœ¾å›æ”¶ç›¸å…³å‚æ•°ï¼š  - <code>-XX:+UseSerialGC</code>ï¼šä½¿ç”¨ä¸²è¡Œåƒåœ¾å›æ”¶å™¨ã€‚    - <code>-XX:+UseParallelGC</code>ï¼šä½¿ç”¨å¹¶è¡Œåƒåœ¾å›æ”¶å™¨ã€‚<br>  <code>-XX:+UseConcMarkSweepGC</code>ï¼šä½¿ç”¨CMSåƒåœ¾å›æ”¶å™¨ã€‚<code>-XX:+UseG1GC</code>ï¼šä½¿ç”¨G1å›æ”¶å™¨ã€‚<code>-XX:+UseZGC</code>ï¼šä½¿ç”¨ZGC</li>
<li>æ€§èƒ½è°ƒä¼˜å‚æ•°ï¼š<br>  <code>-XX:ThreadStackSize=&lt;size&gt;</code>ï¼šè®¾ç½®çº¿ç¨‹å †æ ˆå¤§å°ã€‚<br>  <code>-XX:CompileThreshold=&lt;threshold&gt;</code>ï¼šè®¾ç½®æ–¹æ³•è°ƒç”¨çš„ç¼–è¯‘é˜ˆå€¼ã€‚<br>  <code>-XX:MaxGCPauseMillis=&lt;milliseconds&gt;</code>ï¼šè®¾ç½®åƒåœ¾å›æ”¶æœ€å¤§åœé¡¿æ—¶é—´ç›®æ ‡ã€‚</li>
<li>è°ƒè¯•å‚æ•°ï¼š  <code>-Xdebug</code>ï¼šå¼€å¯è¿œç¨‹è°ƒè¯•ã€‚  <code>-Xrunjdwp:transport=dt_socket,address=&lt;address&gt;,server=y,suspend=n</code>ï¼šé…ç½®JDWPè¿œç¨‹è°ƒè¯•ã€‚ <code>-verbose:gc</code>ï¼šè¾“å‡ºåƒåœ¾å›æ”¶è¯¦ç»†ä¿¡æ¯ã€‚</li>
<li>åº”ç”¨ç¨‹åºæ€§èƒ½åˆ†æå‚æ•°ï¼š  - <code>-javaagent:&lt;path-to-agent-jar&gt;</code>ï¼šå¯ç”¨Javaä»£ç†ï¼Œä¾‹å¦‚ç”¨äºæ€§èƒ½åˆ†æå·¥å…·ã€‚</li>
</ol>
</li>
<li><p>Java ç¼–è¯‘åˆ°æ‰§è¡Œçš„è¿‡ç¨‹ï¼Ÿ</p>
<ul>
<li>Javaæºç åˆ°æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œä»JVMçš„è§’åº¦çœ‹å¯ä»¥æ€»ç»“ä¸ºå››ä¸ªæ­¥éª¤ï¼šç¼–è¯‘-&gt;åŠ è½½-&gt;è§£é‡Š-&gt;æ‰§è¡Œ</li>
<li><strong>ã€Œç¼–è¯‘ã€</strong>javaæºä»£ç ç»è¿‡ è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€æ³¨è§£å¤„ç† æœ€åæ‰ç”Ÿæˆä¼šclassæ–‡ä»¶ã€‚å¯¹æ³›å‹çš„æ“¦é™¤å’ŒLombokå°±åœ¨ç¼–è¯‘é˜¶æ®µã€‚ </li>
<li><strong>ã€ŒåŠ è½½ã€</strong>åˆå¯ä»¥ç»†åˆ†æ­¥éª¤ä¸ºï¼šè£…è½½-&gt;è¿æ¥-&gt;åˆå§‹åŒ–ã€‚è£…è½½åˆ™æŠŠclassæ–‡ä»¶è£…è½½è‡³JVMï¼Œè¿æ¥åˆ™æ ¡éªŒclassä¿¡æ¯ã€åˆ†é…å†…å­˜ç©ºé—´åŠèµ‹é»˜è®¤å€¼ï¼Œåˆå§‹åŒ–åˆ™ä¸ºå˜é‡èµ‹å€¼ä¸ºæ­£ç¡®çš„åˆå§‹å€¼ã€‚è¿æ¥é‡Œåˆå¯ä»¥ç»†åŒ–ä¸ºï¼šéªŒè¯ã€å‡†å¤‡ã€è§£æ<ul>
<li><strong>ã€Œè£…é…ã€</strong>é˜¶æ®µå¯ä»¥æ€»ç»“ä¸ºï¼šæŸ¥æ‰¾å¹¶åŠ è½½ç±»çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œåœ¨JVMã€Œå †ã€ä¸­åˆ›å»ºä¸€ä¸ªjava.lang.Classç±»çš„å¯¹è±¡ï¼Œå¹¶å°†ç±»ç›¸å…³çš„ä¿¡æ¯å­˜å‚¨åœ¨JVMã€Œæ–¹æ³•åŒºã€ä¸­ <ul>
<li>ã€è£…è½½æ—¶æœºã€‘ä¸ºäº†èŠ‚çœå†…å­˜çš„å¼€é”€ï¼Œå¹¶ä¸ä¼šä¸€æ¬¡æ€§æŠŠæ‰€æœ‰çš„ç±»éƒ½è£…è½½è‡³JVMï¼Œè€Œæ˜¯ç­‰åˆ°ã€Œæœ‰éœ€è¦ã€çš„æ—¶å€™æ‰è¿›è¡Œè£…è½½ï¼ˆæ¯”å¦‚newå’Œåå°„ç­‰ç­‰ï¼‰</li>
<li>ã€è£…è½½å‘ç”Ÿã€‘classæ–‡ä»¶æ˜¯é€šè¿‡ã€Œç±»åŠ è½½å™¨ã€è£…è½½åˆ°jvmä¸­çš„ï¼Œä¸ºäº†é˜²æ­¢å†…å­˜ä¸­å‡ºç°å¤šä»½åŒæ ·çš„å­—èŠ‚ç ï¼Œä½¿ç”¨äº†<strong>åŒäº²å§”æ´¾æœºåˆ¶</strong></li>
<li>ã€è£…è½½è§„åˆ™ã€‘JDK ä¸­çš„æœ¬åœ°æ–¹æ³•ç±»ä¸€èˆ¬ç”±æ ¹åŠ è½½å™¨ï¼ˆBootstrp loaderï¼‰è£…è½½ï¼ŒJDK ä¸­å†…éƒ¨å®ç°çš„æ‰©å±•ç±»ä¸€èˆ¬ç”±æ‰©å±•åŠ è½½å™¨ï¼ˆExtClassLoaderï¼‰å®ç°è£…è½½ï¼Œè€Œç¨‹åºä¸­çš„ç±»æ–‡ä»¶åˆ™ç”±ç³»ç»ŸåŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰å®ç°è£…è½½ã€‚</li>
</ul>
</li>
<li><strong>ã€Œè¿æ¥ã€</strong>è¿™ä¸ªé˜¶æ®µå®ƒåšçš„äº‹æƒ…å¯ä»¥æ€»ç»“ä¸ºï¼šå¯¹classçš„ä¿¡æ¯è¿›è¡ŒéªŒè¯ã€ä¸ºã€Œç±»å˜é‡ã€åˆ†é…å†…å­˜ç©ºé—´å¹¶å¯¹å…¶èµ‹é»˜è®¤å€¼ã€‚åˆå¯ä»¥ç»†åŒ–ä¸ºå‡ ä¸ªæ­¥éª¤ï¼š<ol>
<li>éªŒè¯ï¼šéªŒè¯ç±»æ˜¯å¦ç¬¦åˆ Java è§„èŒƒå’Œ JVM è§„èŒƒ </li>
<li>å‡†å¤‡ï¼šä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œåˆå§‹åŒ–ä¸ºç³»ç»Ÿçš„åˆå§‹å€¼ </li>
<li>è§£æï¼šå°†ç¬¦å·å¼•ç”¨è½¬ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹</li>
</ol>
</li>
<li><strong>ã€Œåˆå§‹åŒ–ã€</strong>é˜¶æ®µå¯ä»¥æ€»ç»“ä¸ºï¼šä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆæ­£ç¡®çš„åˆå§‹å€¼ã€‚è¿‡ç¨‹å¤§æ¦‚å°±æ˜¯æ”¶é›†classçš„é™æ€å˜é‡ã€é™æ€ä»£ç å—ã€é™æ€æ–¹æ³•è‡³()æ–¹æ³•ï¼Œéšåä»ä¸Šå¾€ä¸‹å¼€å§‹æ‰§è¡Œã€‚å¦‚æœã€Œå®ä¾‹åŒ–å¯¹è±¡ã€åˆ™ä¼šè°ƒç”¨æ–¹æ³•å¯¹å®ä¾‹å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„æ„é€ æ–¹æ³•å†…çš„ä»£ç ã€‚</li>
</ul>
</li>
<li><strong>ã€Œè§£é‡Šã€</strong>åˆ™æ˜¯æŠŠå­—èŠ‚ç è½¬æ¢æˆæ“ä½œç³»ç»Ÿå¯è¯†åˆ«çš„æ‰§è¡ŒæŒ‡ä»¤ï¼Œåœ¨JVMä¸­ä¼šæœ‰å­—èŠ‚ç è§£é‡Šå™¨å’Œå³æ—¶ç¼–è¯‘å™¨ã€‚åœ¨è§£é‡Šæ—¶ä¼šå¯¹ä»£ç è¿›è¡Œåˆ†æï¼ŒæŸ¥çœ‹æ˜¯å¦ä¸ºã€Œçƒ­ç‚¹ä»£ç ã€ï¼Œå¦‚æœä¸ºã€Œçƒ­ç‚¹ä»£ç ã€åˆ™è§¦å‘JITç¼–è¯‘ï¼Œä¸‹æ¬¡æ‰§è¡Œæ—¶å°±æ— éœ€é‡å¤è¿›è¡Œè§£é‡Šï¼Œæé«˜è§£é‡Šé€Ÿåº¦<ul>
<li>JVMä¼šå¯¹ã€Œçƒ­ç‚¹ä»£ç ã€åšç¼–è¯‘ï¼Œéçƒ­ç‚¹ä»£ç ç›´æ¥è¿›è¡Œè§£é‡Šã€‚å½“JVMå‘ç°æŸä¸ªæ–¹æ³•æˆ–ä»£ç å—çš„è¿è¡Œç‰¹åˆ«é¢‘ç¹çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½æŠŠè¿™éƒ¨åˆ†ä»£ç è®¤å®šä¸ºã€Œçƒ­ç‚¹ä»£ç ã€ã€‚</li>
<li>ä½¿ç”¨ã€Œçƒ­ç‚¹æ¢æµ‹ã€æ¥æ£€æµ‹æ˜¯å¦ä¸ºçƒ­ç‚¹ä»£ç ã€‚ã€Œçƒ­ç‚¹æ¢æµ‹ã€ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œè®¡æ•°å™¨å’ŒæŠ½æ ·ã€‚HotSpotä½¿ç”¨çš„æ˜¯ã€Œè®¡æ•°å™¨ã€çš„æ–¹å¼è¿›è¡Œæ¢æµ‹ï¼Œä¸ºæ¯ä¸ªæ–¹æ³•å‡†å¤‡äº†ä¸¤ç±»è®¡æ•°å™¨ï¼šæ–¹æ³•è°ƒç”¨è®¡æ•°å™¨å’Œå›è¾¹è®¡æ•°å™¨ã€‚è¿™ä¸¤ä¸ªè®¡æ•°å™¨éƒ½æœ‰ä¸€ä¸ªç¡®å®šçš„é˜ˆå€¼ï¼Œå½“è®¡æ•°å™¨è¶…è¿‡é˜ˆå€¼æº¢å‡ºäº†ï¼Œå°±ä¼šè§¦å‘JITç¼–è¯‘ã€‚å³æ—¶ç¼–è¯‘å™¨æŠŠçƒ­ç‚¹æ–¹æ³•çš„æŒ‡ä»¤ç ä¿å­˜èµ·æ¥ï¼Œä¸‹æ¬¡æ‰§è¡Œçš„æ—¶å€™å°±æ— éœ€é‡å¤çš„è¿›è¡Œè§£é‡Šï¼Œç›´æ¥æ‰§è¡Œç¼“å­˜çš„æœºå™¨è¯­è¨€ã€‚</li>
</ul>
</li>
<li><strong>ã€Œæ‰§è¡Œã€</strong>æ“ä½œç³»ç»ŸæŠŠè§£é‡Šå™¨è§£æå‡ºæ¥çš„æŒ‡ä»¤ç ï¼Œè°ƒç”¨ç³»ç»Ÿçš„ç¡¬ä»¶æ‰§è¡Œæœ€ç»ˆçš„ç¨‹åºæŒ‡ä»¤ã€‚</li>
</ul>
</li>
<li><p><strong>ç±»åŠ è½½å™¨</strong>ã€ã€</p>
<ul>
<li>JDKè‡ªå¸¦æœ‰ä¸‰ä¸ªç±»åŠ è½½å™¨ï¼šBootstrap ClassLoaderã€ExtClassLoaderã€AppClassLoaderï¼›<br>  JDK ä¸­çš„æœ¬åœ°æ–¹æ³•ç±»ä¸€èˆ¬ç”±æ ¹åŠ è½½å™¨ï¼ˆBootstrpï¼‰è£…è½½ï¼Œå†…éƒ¨å®ç°çš„æ‰©å±•ç±»ä¸€èˆ¬ç”±æ‰©å±•åŠ è½½å™¨ï¼ˆExtï¼‰è£…è½½ï¼Œè€Œç¨‹åºä¸­çš„ç±»æ–‡ä»¶åˆ™ç”±ç³»ç»ŸåŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰å®ç°è£…è½½ã€‚ <ul>
<li>BootStrapClassLoaderæ˜¯ExtClassLoaderçš„çˆ¶ç±»åŠ è½½å™¨ï¼Œé»˜è®¤è´Ÿè´£åŠ è½½%JAVA HOME%libä¸‹çš„jaråŒ…å’Œclassæ–‡ä»¶</li>
<li>ExtClassLoaderæ˜¯AppClassLoaderçš„çˆ¶ç±»åŠ è½½å™¨ï¼Œè´Ÿè´µåŠ è½½%JAVA HOME%&#x2F;lib&#x2F;extæ–‡ä»¶å¤¹ä¸‹çš„jaråŒ…å’Œclassç±»ã€‚</li>
<li>AppClassLoaderæ˜¯è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„çˆ¶ç±»ï¼Œè´Ÿè´µåŠ è½½classpathä¸‹çš„ç±»æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>åŒäº²å§”æ´¾æ¨¡å‹</p>
<ul>
<li>classæ–‡ä»¶æ˜¯é€šè¿‡ã€Œç±»åŠ è½½å™¨ã€è£…è½½è‡³JVMä¸­çš„ï¼Œä¸ºäº†é˜²æ­¢å†…å­˜ä¸­å­˜åœ¨å¤šä»½åŒæ ·çš„å­—èŠ‚ç ï¼Œä½¿ç”¨äº†åŒäº²å§”æ´¾æœºåˆ¶ï¼ˆå®ƒä¸ä¼šè‡ªå·±å»å°è¯•åŠ è½½ç±»ï¼Œè€Œæ˜¯æŠŠè¯·æ±‚å§”æ‰˜ç»™çˆ¶åŠ è½½å™¨å»å®Œæˆï¼Œä¾æ¬¡å‘ä¸Šï¼‰</li>
<li>JDK ä¸­çš„æœ¬åœ°æ–¹æ³•ç±»ä¸€èˆ¬ç”±æ ¹åŠ è½½å™¨ï¼ˆBootstrp loaderï¼‰è£…è½½ï¼Œå†…éƒ¨å®ç°çš„æ‰©å±•ç±»ä¸€èˆ¬ç”±æ‰©å±•åŠ è½½å™¨ï¼ˆExtClassLoaderï¼‰å®ç°è£…è½½ï¼Œè€Œç¨‹åºä¸­çš„ç±»æ–‡ä»¶åˆ™ç”±ç³»ç»ŸåŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰å®ç°è£…è½½ã€‚<br>  AppClassLoaderçš„çˆ¶åŠ è½½å™¨ä¸ºExt ClassLoaderã€Ext ClassLoaderçš„çˆ¶åŠ è½½å™¨ä¸ºBootStrap ClassLoaderã€‚è¿™é‡Œçš„çˆ¶å­å…³ç³»å¹¶ä¸æ˜¯é€šè¿‡ç»§æ‰¿å®ç°çš„ï¼Œè€Œæ˜¯ç»„åˆã€‚</li>
<li>æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ï¼šè‡ªå®šä¹‰ClassLoaderï¼Œé‡å†™loadClassæ–¹æ³•ï¼ˆåªè¦ä¸ä¾æ¬¡å¾€ä¸Šäº¤ç»™çˆ¶åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œå°±ç®—æ˜¯æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ï¼‰ </li>
<li>æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶æ¡ˆä¾‹ï¼šTomcat<ul>
<li>ä¸ºäº†Webåº”ç”¨ç¨‹åºç±»ä¹‹é—´éš”ç¦»ï¼Œä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºWebAppClassLoaderç±»åŠ è½½å™¨</li>
<li>ä¸ºäº†Webåº”ç”¨ç¨‹åºç±»ä¹‹é—´å…±äº«ï¼ŒæŠŠShareClassLoaderä½œä¸ºWebAppClassLoaderçš„çˆ¶ç±»åŠ è½½å™¨ï¼Œå¦‚æœWebAppClassLoaderåŠ è½½å™¨æ‰¾ä¸åˆ°ï¼Œåˆ™å°è¯•ç”¨ShareClassLoaderè¿›è¡ŒåŠ è½½</li>
<li>ä¸ºäº†Tomcatæœ¬èº«ä¸Webåº”ç”¨ç¨‹åºç±»éš”ç¦»ï¼Œç”¨CatalinaClassLoaderç±»åŠ è½½å™¨è¿›è¡Œéš”ç¦»å’ŒåŠ è½½Tomcatæœ¬èº«çš„ç±»</li>
<li>ä¸ºäº†Tomcatä¸Webåº”ç”¨ç¨‹åºç±»å…±äº«ï¼Œç”¨CommonClassLoaderä½œä¸ºCatalinaClassLoaderå’ŒShareClassLoaderçš„çˆ¶ç±»åŠ è½½å™¨</li>
<li>ShareClassLoaderã€CatalinaClassLoaderã€CommonClassLoaderçš„ç›®å½•å¯ä»¥åœ¨Tomcatçš„catalina.propertiesè¿›è¡Œé…ç½®   <img src="https://leo710aka.github.io/bk/job6.png" width="450" height="300" alt=""></li>
</ul>
</li>
<li>ï¼Ÿï¼Ÿï¼Ÿçº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨ï¼šç”±äºç±»åŠ è½½çš„è§„åˆ™ï¼Œå¾ˆå¯èƒ½å¯¼è‡´çˆ¶åŠ è½½å™¨åŠ è½½æ—¶ä¾èµ–å­åŠ è½½å™¨çš„ç±»ï¼Œå¯¼è‡´æ— æ³•åŠ è½½æˆåŠŸï¼ˆBootStrap ClassLoaderæ— æ³•åŠ è½½ç¬¬ä¸‰æ–¹åº“çš„ç±»ï¼‰ï¼Œæ‰€ä»¥å­˜åœ¨ã€Œçº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨ã€æ¥è¿›è¡ŒåŠ è½½ã€‚</li>
</ul>
</li>
<li><p>JVMçš„å†…å­˜ç»“æ„ï¼Ÿ</p>
<ul>
<li>.classæ–‡ä»¶ä¼šè¢«ç±»åŠ è½½å™¨è£…è½½è‡³JVMä¸­ï¼Œå¹¶ä¸”JVMä¼šè´Ÿè´£ç¨‹åºã€Œè¿è¡Œæ—¶ã€çš„ã€Œå†…å­˜ç®¡ç†ã€ã€‚è€ŒJVMçš„å†…å­˜ç»“æ„ï¼Œå¾€å¾€æŒ‡çš„å°±æ˜¯JVMå®šä¹‰çš„ã€Œè¿è¡Œæ—¶æ•°æ®åŒºåŸŸã€ã€‚ç®€å•æ¥è¯´å°±åˆ†ä¸ºäº†5å¤§å—ï¼šæ–¹æ³•åŒºã€å †ã€ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li>
<li>è¦å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šè¿™æ˜¯JVMã€Œè§„èŒƒã€çš„åˆ†åŒºæ¦‚å¿µï¼Œåˆ°å…·ä½“çš„å®ç°è½åœ°ï¼Œä¸åŒçš„å‚å•†å®ç°å¯èƒ½æ˜¯æœ‰æ‰€åŒºåˆ«çš„ã€‚ </li>
<li><strong>ç¨‹åºè®¡æ•°å™¨</strong>ï¼šçº¿ç¨‹åˆ‡æ¢æ„å‘³ç€ã€Œä¸­æ–­ã€å’Œã€Œæ¢å¤ã€ï¼Œé‚£è‡ªç„¶å°±éœ€è¦æœ‰ä¸€å—åŒºåŸŸæ¥ä¿å­˜ã€Œå½“å‰çº¿ç¨‹çš„æ‰§è¡Œä¿¡æ¯ã€ã€‚æ‰€ä»¥ï¼Œç¨‹åºè®¡æ•°å™¨å°±æ˜¯ç”¨äºè®°å½•å„ä¸ªçº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç çš„åœ°å€ï¼ˆåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸ã€çº¿ç¨‹æ¢å¤ç­‰éƒ½ä¾èµ–äºè®¡æ•°å™¨ï¼‰</li>
<li><strong>è™šæ‹Ÿæœºæ ˆ</strong>ï¼šæ¯ä¸ªçº¿ç¨‹åœ¨åˆ›å»ºçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªã€Œè™šæ‹Ÿæœºæ ˆã€ï¼Œæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªã€Œæ ˆå¸§ã€ã€‚æ¯ä¸ªã€Œæ ˆå¸§ã€ä¼šåŒ…å«å‡ å—å†…å®¹ï¼šå±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥å’Œè¿”å›åœ°å€ã€‚å®ƒçš„ä½œç”¨ï¼šå®ƒä¿å­˜æ–¹æ³•çš„å±€éƒ¨å˜é‡ã€éƒ¨åˆ†å˜é‡çš„è®¡ç®—å¹¶å‚ä¸äº†æ–¹æ³•çš„è°ƒç”¨å’Œè¿”å›ã€‚</li>
<li><strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong>ï¼šæœ¬åœ°æ–¹æ³•æ ˆè·Ÿè™šæ‹Ÿæœºæ ˆçš„åŠŸèƒ½ç±»ä¼¼ï¼Œè™šæ‹Ÿæœºæ ˆç”¨äºç®¡ç† Java å‡½æ•°çš„è°ƒç”¨ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ç”¨äºç®¡ç†æœ¬åœ°æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™é‡Œçš„ã€Œæœ¬åœ°æ–¹æ³•ã€æŒ‡çš„æ˜¯ã€ŒéJavaæ–¹æ³•ã€ï¼Œä¸€èˆ¬æœ¬åœ°æ–¹æ³•æ˜¯ä½¿ç”¨Cè¯­è¨€å®ç°çš„ã€‚</li>
<li><strong>æ–¹æ³•åŒº</strong>ï¼šåœ¨HotSpotè™šæ‹Ÿæœºï¼Œå°±ä¼šå¸¸å¸¸æåˆ°ã€Œæ°¸ä¹…ä»£ã€è¿™ä¸ªè¯ï¼Œjdk8 å‰ç”¨ã€Œæ°¸ä¹…ä»£ã€å®ç°äº†ã€Œæ–¹æ³•åŒºã€ï¼Œè€Œå¾ˆå¤šå…¶ä»–å‚å•†è™šæ‹Ÿæœºå…¶å®æ˜¯æ²¡æœ‰ã€Œæ°¸ä¹…ä»£ã€çš„æ¦‚å¿µçš„ã€‚JDK8ä¸­ï¼Œå·²ç»ç”¨ã€Œå…ƒç©ºé—´ã€æ¥æ›¿ä»£äº†ã€Œæ°¸ä¹…ä»£ã€ä½œä¸ºã€Œæ–¹æ³•åŒºã€çš„å®ç°äº†ã€‚<ul>
<li>æ–¹æ³•åŒºä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ã€Œç±»ç›¸å…³ä¿¡æ¯ã€ï¼šåŒ…æ‹¬ç±»ä¿¡æ¯ã€å¸¸é‡æ± ã€‚ç±»ä¿¡æ¯åˆåŒ…æ‹¬äº†ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£å’Œçˆ¶ç±»ç­‰ä¿¡æ¯ï¼›å¸¸é‡æ± åˆå¯ä»¥åˆ†ã€Œé™æ€å¸¸é‡æ± ã€å’Œã€Œè¿è¡Œæ—¶å¸¸é‡æ± ã€<ul>
<li>é™æ€å¸¸é‡æ± ä¸»è¦å­˜å‚¨çš„æ˜¯ã€Œå­—é¢é‡ã€ä»¥åŠã€Œç¬¦å·å¼•ç”¨ã€ç­‰ä¿¡æ¯ï¼Œä¹ŸåŒ…æ‹¬äº†æˆ‘ä»¬è¯´çš„ã€Œå­—ç¬¦ä¸²å¸¸é‡æ± ã€ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± å­˜å‚¨çš„æ˜¯ç±»åŠ è½½æ—¶ç”Ÿæˆçš„ã€Œç›´æ¥å¼•ç”¨ã€ç­‰ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>ä»é€»è¾‘åˆ†åŒºçš„è§’åº¦è€Œè¨€ã€Œå¸¸é‡æ± ã€æ˜¯å±äºã€Œæ–¹æ³•åŒºã€çš„ã€‚ä½†è‡ªä»åœ¨ jdk7 ä»¥åï¼Œå°±å·²ç»æŠŠè¿è¡Œæ—¶å¸¸é‡æ± å’Œé™æ€å¸¸é‡æ± è½¬ç§»åˆ°äº†å †å†…å­˜ä¸­è¿›è¡Œå­˜å‚¨ï¼ˆå¯¹äºç‰©ç†åˆ†åŒºæ¥è¯´è¿è¡Œæ—¶å¸¸é‡æ± å’Œé™æ€å¸¸é‡æ± å°±å±äºå †ï¼‰</li>
<li>ä» jdk8 å·²ç»æŠŠã€Œæ–¹æ³•åŒºã€çš„å®ç°ä»ã€Œæ°¸ä¹…ä»£ã€å˜æˆã€Œå…ƒç©ºé—´ã€ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>  æœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯ï¼šå…ƒç©ºé—´å­˜å‚¨ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼ŒJVM ä¸ä¼šå†å‡ºç°æ–¹æ³•åŒºçš„å†…å­˜æº¢å‡ºï¼Œä»¥å¾€ã€Œæ°¸ä¹…ä»£ã€ç»å¸¸å› ä¸ºå†…å­˜ä¸å¤Ÿç”¨å¯¼è‡´è·‘å‡ºOOMå¼‚å¸¸ã€‚æŒ‰JDK8ç‰ˆæœ¬ï¼Œæ€»ç»“èµ·æ¥å…¶å®å°±ç›¸å½“äºï¼š<strong>ã€Œç±»ä¿¡æ¯ã€æ˜¯å­˜å‚¨åœ¨ã€Œå…ƒç©ºé—´ã€çš„ï¼ˆä¹Ÿæœ‰äººæŠŠç±»ä¿¡æ¯è¿™å—å«åšç±»ä¿¡æ¯å¸¸é‡æ± ï¼Œä¸»è¦æ˜¯å«æ³•ä¸åŒï¼Œæ„æ€åˆ°ä½å°±å¥½ï¼‰ï¼Œè€Œã€Œå¸¸é‡æ± ã€ä»JDK7å¼€å§‹ï¼Œä»ç‰©ç†å­˜å‚¨è§’åº¦ä¸Šå°±åœ¨ã€Œå †ã€ä¸­ã€‚</strong></li>
</ul>
</li>
<li><strong>å †</strong>ï¼šå †æ˜¯çº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œå‡ ä¹ç±»çš„å®ä¾‹å’Œæ•°ç»„åˆ†é…çš„å†…å­˜éƒ½æ¥è‡ªäºå®ƒã€‚å †è¢«åˆ’åˆ†ä¸ºã€Œæ–°ç”Ÿä»£ã€å’Œã€Œè€å¹´ä»£ã€ï¼Œã€Œæ–°ç”Ÿä»£ã€åˆè¢«è¿›ä¸€æ­¥åˆ’åˆ†ä¸º Eden å’Œ Survivor åŒºï¼Œæœ€å Survivor ç”± From Survivor å’Œ To Survivor ç»„æˆã€‚å°†å †å†…å­˜åˆ†å¼€äº†å‡ å—åŒºåŸŸï¼Œä¸»è¦è·Ÿå†…å­˜å›æ”¶æœ‰å…³ï¼ˆåƒåœ¾å›æ”¶æœºåˆ¶ï¼‰</li>
</ul>
</li>
<li><p>jvmçº¿ç¨‹å…±äº«åŒºï¼Ÿ<br>çº¿ç¨‹å…±äº«ï¼šå †åŒºå’Œæ–¹æ³•åŒº<br>çº¿ç¨‹ç‹¬æœ‰ï¼šæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆå’Œç¨‹åºè®¡æ•°å™¨</p>
</li>
<li><p>JVMå†…å­˜ç»“æ„å’ŒJavaå†…å­˜æ¨¡å‹æœ‰å•¥åŒºåˆ«ï¼Ÿ<br>æ²¡æœ‰å•¥ç›´æ¥å…³è”ï¼Œï¼ŒJavaå†…å­˜æ¨¡å‹æ˜¯è·Ÿã€Œå¹¶å‘ã€ç›¸å…³çš„ï¼Œå®ƒæ˜¯ä¸ºäº†å±è”½åº•å±‚ç»†èŠ‚è€Œæå‡ºçš„è§„èŒƒï¼Œå¸Œæœ›åœ¨ä¸Šå±‚(Javaå±‚é¢ä¸Š)åœ¨æ“ä½œå†…å­˜æ—¶åœ¨ä¸åŒçš„å¹³å°ä¸Šä¹Ÿæœ‰ç›¸åŒçš„æ•ˆæœï¼›JVMå†…å­˜ç»“æ„ï¼ˆåˆç§°ä¸ºè¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼‰ï¼Œå®ƒæè¿°ç€å½“æˆ‘ä»¬çš„classæ–‡ä»¶åŠ è½½è‡³è™šæ‹Ÿæœºåï¼Œå„ä¸ªåˆ†åŒºçš„ã€Œé€»è¾‘ç»“æ„ã€æ˜¯å¦‚ä½•çš„ï¼Œæ¯ä¸ªåˆ†åŒºæ‰¿æ‹…ç€ä»€ä¹ˆä½œç”¨ã€‚ </p>
</li>
<li><p><strong>Javaå¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Ÿnewä¸€ä¸ªå¯¹è±¡çš„æ­¥éª¤ï¼Ÿ</strong></p>
<ol>
<li>æ£€æŸ¥ç±»ç¬¦å·å¼•ç”¨ï¼šé¦–å…ˆï¼ŒJVM ä¼šæ£€æŸ¥ new å…³é”®å­—åé¢çš„ç±»ç¬¦å·å¼•ç”¨ï¼Œç¡®ä¿åœ¨å¸¸é‡æ± ä¸­èƒ½æ‰¾åˆ°å¯¹åº”çš„ç±»ã€‚</li>
<li>åŠ è½½ç±»ï¼šå¦‚æœåœ¨å¸¸é‡æ± ä¸­æ‰¾åˆ°äº†ç±»ç¬¦å·å¼•ç”¨ï¼ŒJVM å°±ä¼šåŠ è½½è¿™ä¸ªç±»ï¼ŒåŒ…æ‹¬åŠ è½½ã€è¿æ¥ï¼ˆéªŒè¯ã€å‡†å¤‡ã€è§£æï¼‰å’Œåˆå§‹åŒ–é˜¶æ®µã€‚(å¦‚æœå·²ç»åŠ è½½äº†è¿™ä¸ªç±»ï¼Œé‚£ä¹ˆç±»ä¿¡æ¯å¯ä»¥åœ¨æ–¹æ³•åŒºä¸­æ‰¾åˆ°)</li>
<li>åˆ†é…å†…å­˜ï¼šJVM ä¼šæ ¹æ®ç±»çš„å®šä¹‰ï¼Œåœ¨å †å†…å­˜ä¸­ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´ã€‚è¿™ä¸ªå†…å­˜ç©ºé—´åŒ…æ‹¬å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬é€‰æ‹©å†…å­˜åˆ†é…æ–¹å¼ï¼ˆå¦‚æŒ‡é’ˆç¢°æ’ã€ç©ºé—²åˆ—è¡¨ã€TLABï¼‰ã€åˆ†é…å†…å­˜å¹¶è¿›è¡Œå†…å­˜æ¸…é›¶ã€‚</li>
<li>åˆå§‹åŒ–å¯¹è±¡ï¼šåˆ†é…å®Œå†…å­˜ç©ºé—´åï¼ŒJVM ä¼šå°†å¯¹è±¡çš„é™¤å¯¹è±¡å¤´å¤–çš„å†…å­˜ç©ºé—´åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ä¸º 0ï¼Œå¼•ç”¨ç±»å‹ä¸º nullï¼‰ã€‚æœ€åï¼ŒJVM ä¼šè®¾ç½®å¯¹è±¡çš„å¯¹è±¡å¤´ï¼ŒåŒ…æ‹¬å“ˆå¸Œç ã€GC ä¿¡æ¯ç­‰å…ƒä¿¡æ¯ã€‚</li>
<li>è°ƒç”¨æ„é€ æ–¹æ³•ï¼šæ‰§è¡Œå¯¹è±¡çš„åˆå§‹åŒ–é€»è¾‘ï¼ŒåŒ…æ‹¬å¯¹æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼ã€æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œç­‰ã€‚</li>
<li>è¿”å›å¯¹è±¡å¼•ç”¨ï¼šæœ€åï¼Œnew æ“ä½œç¬¦ä¼šè¿”å›ä¸€ä¸ªæŒ‡å‘æ–°åˆ›å»ºå¯¹è±¡çš„å¼•ç”¨ï¼Œé€šè¿‡è¿™ä¸ªå¼•ç”¨å¯ä»¥åœ¨ç¨‹åºä¸­æ“ä½œå¯¹è±¡çš„å±æ€§å’Œè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚</li>
<li>è¿™äº›æ­¥éª¤æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„åŸºæœ¬æµç¨‹ï¼Œæ— è®ºæ˜¯é€šè¿‡ new å…³é”®å­—åˆ›å»ºå¯¹è±¡ï¼Œè¿˜æ˜¯é€šè¿‡åå°„ã€åºåˆ—åŒ–ç­‰æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œéƒ½è¦ç»å†è¿™äº›æ­¥éª¤ã€‚</li>
</ol>
</li>
<li><p>ç®€è¿°Javaçš„å¯¹è±¡ç»“æ„ï¼ˆJMMï¼Ÿï¼Ÿï¼‰</p>
<ul>
<li>Javaå¯¹è±¡ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šå¯¹è±¡å¤´ã€å®ä¾‹æ•°æ®ã€å¯¹é½å¡«å……ã€‚<ul>
<li>å¯¹è±¡å¤´ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†å­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼šå“ˆå¸Œç ã€GCåˆ†ä»£å¹´é¾„ã€é”æ ‡è¯†çŠ¶æ€ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDï¼ˆä¸€èˆ¬å 32&#x2F;64 bitï¼‰ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯æŒ‡é’ˆç±»å‹ï¼ŒæŒ‡å‘å¯¹è±¡çš„ç±»å…ƒæ•°æ®ç±»å‹ï¼ˆå³å¯¹è±¡ä»£è¡¨å“ªä¸ªç±»ï¼‰ã€‚å¦‚æœæ˜¯æ•°ç»„å¯¹è±¡ï¼Œåˆ™å¯¹è±¡å¤´ä¸­è¿˜æœ‰ä¸€éƒ¨åˆ†ç”¨æ¥è®°å½•æ•°ç»„é•¿åº¦ã€‚</li>
<li>å®ä¾‹æ•°æ®ç”¨æ¥å­˜å‚¨å¯¹è±¡çœŸæ­£çš„æœ‰æ•ˆä¿¡æ¯ï¼ˆåŒ…æ‹¬çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„å’Œè‡ªå·±å®šä¹‰çš„ï¼‰</li>
<li>å¯¹é½å¡«å……ï¼šJVMè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ï¼ˆ8å­—èŠ‚å¯¹é½ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li><p>ç¨‹åºå‘˜å¯ä»¥æ ¹æ®éœ€è¦æ§åˆ¶JVMåœ¨ç‰¹å®šæ—¶é—´è¿›è¡Œåƒåœ¾å›æ”¶å—ï¼Ÿ<br>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸èƒ½ç›´æ¥æ§åˆ¶ JVM åœ¨ç‰¹å®šæ—¶é—´è¿›è¡Œåƒåœ¾å›æ”¶ã€‚åƒåœ¾å›æ”¶æ˜¯ JVM çš„è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œå…¶ç›®æ ‡æ˜¯åœ¨è¿è¡Œæ—¶è‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å†…å­˜ï¼Œè€Œä¸éœ€è¦ç¨‹åºå‘˜æ˜¾å¼å¹²é¢„ã€‚ä½†æ˜¯,å¯ä»¥é€šè¿‡ä¸€äº› JVM å‚æ•°å’Œ API é—´æ¥åœ°å½±å“åƒåœ¾å›æ”¶çš„è¡Œä¸ºã€‚</p>
</li>
<li><p>javaçš„å¯¹è±¡æ˜¯æ€ä¹ˆè¢«å›æ”¶çš„ï¼Ÿ</p>
<ul>
<li>ä»€ä¹ˆæ˜¯åƒåœ¾ï¼šåªè¦å¯¹è±¡ä¸å†è¢«ä½¿ç”¨ï¼Œé‚£å³æ˜¯åƒåœ¾ã€‚GCå°±æ˜¯å¯¹å †ä¸­çš„å¯¹è±¡å›æ”¶ã€‚</li>
<li>å¦‚ä½•åˆ¤æ–­ä¸ºåƒåœ¾ï¼šå¸¸ç”¨çš„ç®—æ³•æœ‰ä¸¤ä¸ªã€Œå¼•ç”¨è®¡æ•°æ³•ã€å’Œã€Œå¯è¾¾æ€§åˆ†ææ³•ã€ï¼›</li>
<li>JVMä½¿ç”¨çš„æ˜¯å¯è¾¾æ€§åˆ†æç®—æ³•ã€ŒGC Rootsã€ï¼šGC Rootsæ˜¯ä¸€ç»„å¿…é¡»æ´»è·ƒçš„å¼•ç”¨ï¼Œè·ŸGC Rootsæ— å…³è”çš„å¼•ç”¨å³æ˜¯åƒåœ¾ï¼Œå¯è¢«å›æ”¶</li>
<li>å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼šæ ‡è®°æ¸…é™¤ã€æ ‡è®°å¤åˆ¶ã€æ ‡è®°æ•´ç†ã€‚æ•´ç†ç®—æ³•æ˜¯å‰ä¸¤è€…çš„æŠ˜ä¸­ï¼šæœªå¿…è¦æœ‰ä¸€å—ã€Œå¤§çš„å®Œæ•´ç©ºé—´ã€æ‰èƒ½è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œæˆ‘åªè¦èƒ½åœ¨ã€Œå½“å‰åŒºåŸŸã€å†…è¿›è¡Œç§»åŠ¨ï¼ŒæŠŠå­˜æ´»çš„å¯¹è±¡ç§»åˆ°ä¸€è¾¹ï¼ŒæŠŠåƒåœ¾ç§»åˆ°ä¸€è¾¹ï¼Œé‚£å†å°†åƒåœ¾ä¸€èµ·åˆ é™¤æ‰ï¼Œä¸å°±æ²¡æœ‰å†…å­˜ç¢ç‰‡äº†å˜› </li>
<li>åˆ†ä»£ï¼šå †åˆ†äº†ã€Œæ–°ç”Ÿä»£ã€å’Œã€Œè€å¹´ä»£ã€ï¼Œã€Œæ–°ç”Ÿä»£ã€åˆåˆ†ä¸ºã€ŒEdenã€å’Œã€ŒSurvivorã€åŒºï¼Œã€ŒSurvivorã€åŒºåˆåˆ†ä¸ºã€ŒFrom Survivorã€å’Œã€ŒTo Survivorã€åŒº<br>  å †å†…å­˜å æ¯”ï¼šå¹´è½»ä»£å å †å†…å­˜1&#x2F;3ï¼Œè€å¹´ä»£å å †å†…å­˜2&#x2F;3ã€‚EdenåŒºå å¹´è½»ä»£8&#x2F;10ï¼ŒSurvivoråŒºå å¹´è½»ä»£2&#x2F;10ï¼ˆå…¶ä¸­From å’ŒTo å„ç«™1&#x2F;10ï¼‰</li>
<li>ä¸ºä»€ä¹ˆéœ€è¦åˆ†ä»£ï¼šå¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ­»å¾—æ—©ï¼Œåªæœ‰å°‘éƒ¨åˆ†å¯¹è±¡ä¼šå­˜æ´»å¾ˆé•¿æ—¶é—´ã€‚åœ¨å †å†…å­˜ä¸Šéƒ½ä¼šåœ¨ç‰©ç†æˆ–é€»è¾‘ä¸Šè¿›è¡Œåˆ†ä»£ï¼Œä¸ºäº†ä½¿ã€Œstop the worldã€æŒç»­çš„æ—¶é—´å°½å¯èƒ½çŸ­ä»¥åŠæé«˜å¹¶å‘å¼GCæ‰€èƒ½åº”ä»˜çš„å†…å­˜åˆ†é…é€Ÿç‡ã€‚</li>
<li>åƒåœ¾å›æ”¶å™¨ï¼šå®é™…ä¸Šå°±æ˜¯ã€Œå®ç°äº†ã€åƒåœ¾å›æ”¶ç®—æ³•ï¼ˆæ ‡è®°å¤åˆ¶ã€æ ‡è®°æ•´ç†ä»¥åŠæ ‡è®°æ¸…é™¤ç®—æ³•ï¼‰<br>  ã€Œå¹´è½»ä»£ã€çš„åƒåœ¾æ”¶é›†å™¨æœ‰ï¼šSeriaã€Parallel Scavengeã€ParNew<br>  ã€Œè€å¹´ä»£ã€çš„åƒåœ¾æ”¶é›†å™¨æœ‰ï¼šSerial Oldã€Parallel Oldã€CMS</li>
<li>Minor GCï¼šå½“EdenåŒºæ»¡äº†åˆ™è§¦å‘ï¼Œä»GC Rootså¾€ä¸‹éå†ï¼Œå¹´è½»ä»£GCä¸å…³å¿ƒè€å¹´ä»£å¯¹è±¡</li>
<li>ä»€ä¹ˆæ˜¯card tableã€å¡è¡¨ã€‘ï¼šç©ºé—´æ¢æ—¶é—´ï¼ˆç±»ä¼¼bitmapï¼‰ï¼Œèƒ½å¤Ÿé¿å…æ‰«æè€å¹´ä»£çš„æ‰€æœ‰å¯¹åº”è¿›è€Œé¡ºåˆ©è¿›è¡ŒMinor GCæ¡ˆä¾‹ï¼šè€å¹´ä»£å¯¹è±¡æŒæœ‰å¹´è½»ä»£å¯¹è±¡å¼•ç”¨ï¼‰</li>
<li>Full GCï¼šã€‚ã€‚ã€‚</li>
</ul>
</li>
<li><p>å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥è¢«å›æ”¶åˆ¤æ–­ï¼Ÿ</p>
<ol>
<li>å¼•ç”¨è®¡æ•°ï¼šæ¯ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å±æ€§ï¼Œæ–°å¢ä¸€ä¸ªå¼•ç”¨æ—¶è®¡æ•°åŠ 1ï¼Œå¼•ç”¨é‡Šæ”¾æ—¶è®¡æ•°å‡1ï¼Œè®¡æ•°ä¸º0æ—¶å¯ä»¥å›æ”¶ã€‚æ­¤æ–¹æ³•ç®€å•ï¼Œæ— æ³•è§£å†³å¯¹è±¡ç›¸äº’å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</li>
<li>å¯è¾¾æ€§åˆ†æï¼šä»GC Rootså¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ã€‚å½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ï¼Œä¸å¯è¾¾å¯¹è±¡ã€‚</li>
</ol>
</li>
<li><p>JVMæœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•?</p>
<ol>
<li>æ ‡è®°æ¸…é™¤ç®—æ³•ï¼ša.æ ‡è®°é˜¶æ®µ:æŠŠåƒåœ¾å†…å­˜æ ‡è®°å‡ºæ¥ï¼›b.æ¸…é™¤é˜¶æ®µï¼šç›´æ¥å°†åƒåœ¾å†…å­˜å›æ”¶ã€‚<br>  è¿™ç§ç®—æ³•æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯æœ‰ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œå°±æ˜¯ä¼šäº§ç”Ÿå¤§é‡çš„å†…å­˜ç¢ç‰‡ã€‚</li>
<li>å¤åˆ¶ç®—æ³•ï¼šä¸ºäº†è§£å†³æ ‡è®°æ¸…é™¤ç®—æ³•çš„å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œå°±äº§ç”Ÿäº†å¤åˆ¶ç®—æ³•ã€‚å¤åˆ¶ç®—æ³•å°†å†…å­˜åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤åŠï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€åŠã€‚åƒåœ¾å›æ”¶æ—¶ï¼Œå°†å½“å‰è¿™ä¸€å—çš„å­˜æ´»å¯¹è±¡å…¨éƒ¨æ‹·è´åˆ°å¦ä¸€åŠï¼Œç„¶åå½“å‰è¿™ä¸€åŠå†…å­˜å°±å¯ä»¥ç›´æ¥æ¸…é™¤ã€‚è¿™ç§ç®—æ³•æœ‰å†…å­˜ç¢ç‰‡ï¼Œä½†æ˜¯ä»–çš„é—®é¢˜å°±åœ¨äºæµªè´¹ç©ºé—´ã€‚è€Œä¸”ï¼Œä»–çš„æ•ˆç‡è·Ÿå­˜æ´»å¯¹è±¡çš„ä¸ªæ•°æœ‰å…³ã€‚</li>
<li>æ ‡è®°å‹ç¼©ç®—æ³•:ä¸ºäº†è§£å†³å¤åˆ¶ç®—æ³•çš„ç¼ºé™·ï¼Œå°±æå‡ºäº†æ ‡è®°å‹ç¼©ç®—æ³•ã€‚è¿™ç§ç®—åœ¨æ ‡è®°é˜¶æ®µè·Ÿæ ‡è®°æ¸…é™¤ç®—æ³•æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åœ¨å®Œæˆæ ‡è®°ä¹‹åï¼Œä¸æ˜¯ç›´æ¥æ¸…ç†åƒåœ¾å†…å­˜ï¼Œè€Œæ˜¯å°†å­˜æ´»å¯¹è±¡å¾€ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åå°†è¾¹ç•Œä»¥å¤–çš„æ‰€æœ‰å†…å­˜ç›´æ¥æ¸…é™¤ã€‚</li>
</ol>
</li>
<li><p>JVM åˆ†ä»£å›æ”¶ã€ã€</p>
<ul>
<li>å †çš„åŒºåŸŸåˆ’åˆ†<br>  1ã€å †è¢«åˆ†ä¸ºäº†ä¸¤ä»½ï¼šã€Œæ–°ç”Ÿä»£ã€å’Œã€Œè€å¹´ä»£ã€ã€1:2ã€‘<br>  2ã€å¯¹äºæ–°ç”Ÿä»£ï¼Œå†…éƒ¨åˆè¢«åˆ†ä¸ºäº†ã€ŒEdenã€å’Œã€ŒSurvivorã€åŒºï¼Œã€Œsurvivorã€åŒºåˆåˆ†ä¸ºã€ŒFromã€å’Œã€ŒToã€åŒºã€8:1:1ã€‘<img src="https://github.com/leo710aka/bk/blob/main/job20.png?raw=true" width="500" height="300" alt=""></li>
<li>å¯¹è±¡å›æ”¶åˆ†ä»£å›æ”¶ç­–ç•¥<ol>
<li>æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œéƒ½ä¼šå…ˆåˆ†é…åˆ°edenåŒº</li>
<li>å½“ä¼Šç”¸å›­å†…å­˜ä¸è¶³ï¼Œæ ‡è®°ä¼Šç”¸å›­ä¸from(ç°é˜¶æ®µæ²¡æœ‰)çš„å­˜æ´»å¯¹è±¡</li>
<li>å°†å­˜æ´»å¯¹è±¡é‡‡ç”¨å¤åˆ¶ç®—æ³•å¤åˆ¶åˆ°toä¸­ï¼Œå¤åˆ¶å®Œæ¯•åï¼Œä¼Šç”¸å›­å’Œfrom å†…å­˜éƒ½å¾—åˆ°é‡Šæ”¾</li>
<li>ç»è¿‡ä¸€æ®µæ—¶é—´åä¼Šç”¸å›­çš„å†…å­˜åˆå‡ºç°ä¸è¶³ï¼Œæ ‡è®°edenåŒºåŸŸtoåŒºå­˜æ´»çš„å¯¹è±¡ï¼Œå°†å…¶å¤åˆ¶åˆ°fromåŒº</li>
<li>å½“å¹¸å­˜åŒºå¯¹è±¡ç†¬è¿‡å‡ æ¬¡å›æ”¶(æœ€å¤š15æ¬¡)ï¼Œæ™‹å‡åˆ°è€å¹´ä»£(å¹¸å­˜åŒºå†…å­˜ä¸è¶³æˆ–å¤§å¯¹è±¡ä¼šæå‰æ™‹å‡)</li>
</ol>
</li>
<li>MinorGCã€Mixed Gcã€FullGCçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ<ul>
<li>MinorGCã€young GCã€‘ï¼ˆæ–°ç”Ÿä»£åƒåœ¾å›æ”¶ï¼‰ï¼šå‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ï¼Œæš‚åœæ—¶é—´çŸ­(STW)</li>
<li>Mixed GCï¼ˆæ··åˆå›æ”¶ï¼‰ï¼šæ–°ç”Ÿä»£+è€å¹´ä»£éƒ¨åˆ†åŒºåŸŸçš„åƒåœ¾å›æ”¶ï¼ŒG1æ”¶é›†å™¨ç‰¹æœ‰</li>
<li>FullGCï¼ˆè€å¹´ä»£åƒåœ¾å›æ”¶ï¼‰ï¼šæ–°ç”Ÿä»£+è€å¹´ä»£å®Œæ•´åƒåœ¾å›æ”¶ï¼Œæš‚åœæ—¶é—´é•¿(STW)ï¼Œåº”å°½åŠ›é¿å…</li>
</ul>
</li>
<li>Minor GCã€Mixed GC å’Œ Full GC çš„è§¦å‘æ¡ä»¶å¦‚ä¸‹ï¼š<ul>
<li><strong>Minor GC</strong>ï¼šåœ¨æ–°å¯¹è±¡åˆ›å»ºæ—¶ï¼Œå½“ Eden åŒºæ»¡æ—¶è§¦å‘ Minor GCã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒMinor GC ä¼šå›æ”¶å¹´è½»ä»£çš„ Eden åŒºå’Œ Survivor åŒºä¸­çš„åƒåœ¾å¯¹è±¡ã€‚</li>
<li><strong>Mixed GC</strong>ï¼šåœ¨ G1 åƒåœ¾å›æ”¶å™¨ä¸­ï¼ŒMixed GC æ˜¯æŒ‡åŒæ—¶æ‰§è¡Œéƒ¨åˆ† Young GC å’Œéƒ¨åˆ† Old GC çš„è¿‡ç¨‹ï¼›åœ¨ä¸€æ¬¡ Full GC åï¼Œå¯èƒ½ä¼šè§¦å‘ Mixed GC æ¥å¯¹éƒ¨åˆ†è€å¹´ä»£å’Œå¹´è½»ä»£è¿›è¡Œå›æ”¶ã€‚</li>
<li><strong>Full GC</strong>ï¼šåœ¨è€å¹´ä»£ç©ºé—´ä¸è¶³ã€æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³ï¼ˆå¦‚æœä½¿ç”¨æ°¸ä¹…ä»£ï¼‰ã€è€å¹´ä»£è¿ç»­å¤šæ¬¡è§¦å‘ Minor GC æ— æ³•å›æ”¶è¶³å¤Ÿçš„ç©ºé—´æ—¶ï¼Œæˆ–è€…æ˜ç¡®è°ƒç”¨ System.gc() æ–¹æ³•æ—¶ï¼Œå¯èƒ½ä¼šè§¦å‘ Full GCã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>CMSåƒåœ¾æ”¶é›†å™¨</p>
<ul>
<li>CMSçš„å…¨ç§°ï¼šConcurrent Mark Sweepï¼Œç¿»è¯‘è¿‡æ¥æ˜¯ã€Œå¹¶å‘æ ‡è®°æ¸…é™¤ã€<br>  å¯¹æ¯”å…¶ä»–åƒåœ¾æ”¶é›†å™¨(Seriaå’ŒParallelå’ŒparNew)ï¼Œå®ƒæœ€å¤§çš„ä¸åŒç‚¹å°±æ˜¯â€œå¹¶å‘â€ï¼šåœ¨GCçº¿ç¨‹å·¥ä½œçš„æ—¶å€™ï¼Œç”¨æˆ·çº¿ç¨‹ä¸ä¼šå®Œå…¨åœæ­¢ï¼Œç”¨æˆ·çº¿ç¨‹åœ¨â€œéƒ¨åˆ†åœºæ™¯ä¸‹â€ä¸GCçº¿ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œï¼Œé¿å…è€å¹´ä»£ GCå‡ºç°é•¿æ—¶é—´çš„å¡é¡¿ï¼ˆStop The Worldï¼‰</li>
<li>CMSå¯ç®€å•åˆ†ä¸º5ä¸ªæ­¥éª¤ï¼šåˆå§‹æ ‡è®°ã€å¹¶å‘æ ‡è®°ã€å¹¶å‘é¢„æ¸…ç†ã€é‡æ–°æ ‡è®°åŠå¹¶å‘æ¸…é™¤ï¼Œå³<strong>CMSä¸»è¦æ˜¯å®ç°äº†ã€Œæ ‡è®°æ¸…é™¤ã€GC</strong><ol>
<li>ã€Œåˆå§‹æ ‡è®°ã€ä¼šæ ‡è®°GCRootsã€Œç›´æ¥å…³è”ã€çš„å¯¹è±¡ä»¥åŠã€Œå¹´è½»ä»£ã€æŒ‡å‘ã€Œè€å¹´ä»£ã€çš„å¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¼šå‘ç”ŸStop The Worldçš„ã€‚ä½†è¿™ä¸ªé˜¶æ®µçš„é€Ÿåº¦ç®—æ˜¯å¾ˆå¿«çš„ï¼Œå› ä¸ºæ²¡æœ‰ã€Œå‘ä¸‹è¿½æº¯ã€ï¼ˆåªæ ‡è®°ä¸€å±‚ï¼‰</li>
<li>ã€Œå¹¶å‘æ ‡è®°ã€è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸ä¼šåœæ­¢ç”¨æˆ·çº¿ç¨‹çš„ï¼ˆä¸ä¼šå‘ç”Ÿ Stop The Worldï¼‰ã€‚è¿™ä¸€é˜¶æ®µä¸»è¦æ˜¯ä»GC Rootså‘ä¸‹ã€Œè¿½æº¯ã€ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾çš„å¯¹è±¡ï¼›åœ¨GCçš„è§’åº¦è€Œè¨€ï¼Œæ˜¯æ¯”è¾ƒè€—è´¹æ—¶é—´çš„ï¼ˆéœ€è¦è¿½æº¯ï¼‰</li>
<li>ã€Œå¹¶å‘é¢„å¤„ç†ã€è¿™ä¸ªé˜¶æ®µä¸»è¦æƒ³å¹²çš„äº‹æƒ…ï¼šå¸Œæœ›èƒ½å‡å°‘ä¸‹ä¸€ä¸ªé˜¶æ®µã€Œé‡æ–°æ ‡è®°ã€æ‰€æ¶ˆè€—çš„æ—¶é—´ï¼Œå› ä¸ºä¸‹ä¸€ä¸ªé˜¶æ®µã€Œé‡æ–°æ ‡è®°ã€æ˜¯éœ€è¦Stop The Worldçš„<br>  è¿™ä¸ªé˜¶æ®µä¼šæ‰«æå¯èƒ½ç”±äºã€Œå¹¶å‘æ ‡è®°ã€æ—¶å¯¼è‡´è€å¹´ä»£å‘ç”Ÿå˜åŒ–çš„å¯¹è±¡ï¼ˆã€Œå¹¶å‘æ ‡è®°ã€è¿™ä¸ªé˜¶æ®µç”±äºç”¨æˆ·çº¿ç¨‹æ˜¯æ²¡æœ‰è¢«æŒ‚èµ·çš„ï¼Œå¯èƒ½æœ‰äº›å¯¹è±¡ä»æ–°ç”Ÿä»£æ™‹å‡åˆ°äº†è€å¹´ä»£ï¼Œå¯èƒ½æœ‰äº›å¤§å¯¹è±¡ç›´æ¥åˆ†é…åˆ°äº†è€å¹´ä»£ï¼Œå¯èƒ½è€å¹´ä»£æˆ–è€…æ–°ç”Ÿä»£çš„å¯¹è±¡å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–â€¦ï¼‰ï¼Œä¼šå†æ‰«æä¸€éæ ‡è®°ä¸ºdirtyçš„å¡é¡µ<br>  é’ˆå¯¹è€å¹´ä»£çš„å¯¹è±¡ï¼Œå…¶å®è¿˜æ˜¯å¯ä»¥å€ŸåŠ©ç±»card tableçš„å­˜å‚¨ï¼ˆå°†è€å¹´ä»£å¯¹è±¡å‘ç”Ÿå˜åŒ–æ‰€å¯¹åº”çš„å¡é¡µæ ‡è®°ä¸ºdirtyï¼‰ï¼›å¯¹äºæ–°ç”Ÿä»£çš„å¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—éå†æ–°ç”Ÿä»£æ¥çœ‹çœ‹åœ¨å¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰å¯¹è±¡å¼•ç”¨äº†è€å¹´ä»£..</li>
<li>ã€Œé‡æ–°æ ‡è®°ã€é˜¶æ®µä¼šStop The Worldï¼Œè¿™ä¸ªè¿‡ç¨‹çš„åœé¡¿æ—¶é—´å…¶å®å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä¸Šé¢ã€Œå¹¶å‘é¢„å¤„ç†ã€é˜¶æ®µï¼ˆå¯ä»¥å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿½èµ¶çš„è¿‡ç¨‹ï¼šä¸€è¾¹åœ¨æ ‡è®°å­˜æ´»å¯¹è±¡ï¼Œä¸€è¾¹ç”¨æˆ·çº¿ç¨‹åœ¨æ‰§è¡Œäº§ç”Ÿåƒåœ¾ï¼‰</li>
<li>æœ€åå°±æ˜¯ã€Œå¹¶å‘æ¸…é™¤ã€é˜¶æ®µï¼Œä¸ä¼šStop The Worldï¼Œä¸€è¾¹ç”¨æˆ·çº¿ç¨‹åœ¨æ‰§è¡Œï¼Œä¸€è¾¹GCçº¿ç¨‹åœ¨å›æ”¶ä¸å¯è¾¾çš„å¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½ç”¨æˆ·çº¿ç¨‹åœ¨ä¸æ–­äº§ç”Ÿåƒåœ¾ï¼Œä½†åªèƒ½ç•™åˆ°ä¸‹ä¸€æ¬¡GC è¿›è¡Œå¤„ç†äº†ï¼Œäº§ç”Ÿçš„è¿™äº›åƒåœ¾è¢«å«åšâ€œæµ®åŠ¨åƒåœ¾â€ï¼Œå®Œäº†ä»¥åä¼šé‡ç½® CMS ç®—æ³•ç›¸å…³çš„å†…éƒ¨æ•°æ®ï¼Œä¸ºä¸‹ä¸€æ¬¡ GC å¾ªç¯åšå‡†å¤‡</li>
</ol>
</li>
<li>æ¯”èµ·G1ï¼ŒCMSæœ‰ä»€ä¹ˆç¼ºç‚¹å‘¢ï¼Ÿ<ol>
<li>ç©ºé—´éœ€è¦é¢„ç•™ï¼šCMSåƒåœ¾æ”¶é›†å™¨å¯ä»¥ä¸€è¾¹å›æ”¶åƒåœ¾ï¼Œä¸€è¾¹å¤„ç†ç”¨æˆ·çº¿ç¨‹ï¼Œé‚£éœ€è¦åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¿è¯æœ‰å……è¶³çš„å†…å­˜ç©ºé—´ä¾›ç”¨æˆ·ä½¿ç”¨ã€‚å¦‚æœCMSè¿è¡Œè¿‡ç¨‹ä¸­é¢„ç•™çš„ç©ºé—´ä¸å¤Ÿç”¨äº†ï¼Œä¼šæŠ¥é”™ï¼ˆConcurrent Mode Failureï¼‰ï¼Œè¿™æ—¶ä¼šå¯åŠ¨ Serial Oldåƒåœ¾æ”¶é›†å™¨è¿›è¡Œè€å¹´ä»£çš„åƒåœ¾å›æ”¶ï¼Œä¼šå¯¼è‡´åœé¡¿çš„æ—¶é—´å¾ˆé•¿ã€‚</li>
<li>å†…å­˜ç¢ç‰‡é—®é¢˜ï¼šCMSæœ¬è´¨ä¸Šæ˜¯å®ç°äº†ã€Œæ ‡è®°æ¸…é™¤ç®—æ³•ã€çš„æ”¶é›†å™¨ï¼ˆä»è¿‡ç¨‹å°±å¯ä»¥çœ‹å¾—å‡ºï¼‰ï¼Œè¿™ä¼šæ„å‘³ç€ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚ç”±äºç¢ç‰‡å¤ªå¤šï¼Œåˆå¯èƒ½ä¼šå¯¼è‡´å†…å­˜ç©ºé—´ä¸è¶³æ‰€è§¦å‘full GCï¼ŒCMSä¸€èˆ¬ä¼šåœ¨è§¦å‘full GCè¿™ä¸ªè¿‡ç¨‹å¯¹ç¢ç‰‡è¿›è¡Œæ•´ç†ã€‚</li>
<li>è¦å¤„ç†å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼ˆæ•´ç†ï¼‰ï¼Œæ•´ç†æ¶‰åŠåˆ°ã€Œç§»åŠ¨ã€&#x2F;ã€Œæ ‡è®°ã€ï¼Œé‚£è¿™ä¸ªè¿‡ç¨‹è‚¯å®šä¼šStop The Worldçš„ï¼Œå¦‚æœå†…å­˜è¶³å¤Ÿå¤§ï¼ˆæ„å‘³ç€å¯èƒ½è£…è½½çš„å¯¹è±¡è¶³å¤Ÿå¤šï¼‰ï¼Œé‚£è¿™ä¸ªè¿‡ç¨‹å¡é¡¿ä¹Ÿæ˜¯éœ€è¦ä¸€å®šçš„æ—¶é—´çš„ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>G1åƒåœ¾æ”¶é›†å™¨ <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv26352521/?spm_id_from=333.999.0.0&jump_opus=1">https://www.bilibili.com/read/cv26352521/?spm_id_from=333.999.0.0&amp;jump_opus=1</a></p>
<ul>
<li>åœ¨G1åƒåœ¾æ”¶é›†å™¨çš„ä¸–ç•Œä¸­ï¼Œå †çš„åˆ’åˆ†ä¸å†æ˜¯ç‰©ç†å½¢å¼ï¼Œè€Œæ˜¯ä»¥â€é€»è¾‘â€çš„å½¢å¼è¿›è¡Œåˆ’åˆ†ï¼›<br>  ä½¿ç”¨CSetæ¥å­˜å‚¨å¯å›æ”¶Regionçš„é›†åˆï¼Œä½¿ç”¨RSetæ¥å¤„ç†è·¨ä»£å¼•ç”¨çš„é—®é¢˜ï¼ˆæ³¨æ„ï¼šRSetä¸ä¿ç•™ å¹´è½»ä»£ç›¸å…³çš„å¼•ç”¨å…³ç³»ï¼‰<br>  G1åƒåœ¾æ”¶é›†å™¨ä¸–ç•Œçš„ã€Œå †ã€ç©ºé—´åˆ†å¸ƒï¼š<img src="https://github.com/leo710aka/bk/blob/main/job19.png?raw=true" width="300" height="300" alt=""><br>  ä»å›¾ä¸Šå°±å¯ä»¥å‘ç°ï¼Œå †è¢«åˆ’åˆ†äº†å¤šä¸ªåŒç­‰ä»½çš„åŒºåŸŸ Region<br>  ä¸è¿‡åƒä¹‹å‰çš„ã€Œåˆ†ä»£ã€æ¦‚å¿µåœ¨G1çš„ä¸–ç•Œè¿˜æ˜¯ä¸€æ ·å¥æ•ˆçš„ï¼Œæ¯”å¦‚è¯´ï¼šæ–°å¯¹è±¡ä¸€èˆ¬ä¼šåˆ†é…åˆ°EdenåŒºã€ç»è¿‡é»˜è®¤15æ¬¡çš„Minor GCæ–°ç”Ÿä»£çš„å¯¹è±¡å¦‚æœè¿˜å­˜æ´»ï¼Œä¼šç§»äº¤åˆ°è€å¹´ä»£ç­‰ç­‰â€¦è€å¹´ä»£ã€æ–°ç”Ÿä»£ã€Survivorè¿™äº›è§„åˆ™æ˜¯è·ŸCMSä¸€æ ·çš„ï¼Œæ­¤å¤–ï¼ŒG1ä¸­è¿˜æœ‰ä¸€ç§å« Humongousï¼ˆå¤§å¯¹è±¡ï¼‰åŒºåŸŸï¼Œå…¶å®å°±æ˜¯ç”¨æ¥å­˜å‚¨ç‰¹åˆ«å¤§çš„å¯¹è±¡ï¼ˆå¤§äºRegionå†…å­˜çš„ä¸€åŠï¼‰ï¼Œä¸€æ—¦å‘ç°æ²¡æœ‰å¼•ç”¨æŒ‡å‘å¤§å¯¹è±¡ï¼Œå°±å¯ç›´æ¥åœ¨å¹´è½»ä»£çš„Minor GCä¸­è¢«å›æ”¶æ‰</li>
<li>ä¸ºä»€ä¹ˆè¦å°†å †ç©ºé—´è¿›è¡Œç»†åˆ†å¤šä¸ªå°çš„åŒºåŸŸï¼Ÿ<br>  åƒä»¥å‰çš„åƒåœ¾æ”¶é›†å™¨éƒ½æ˜¯å¯¹å †è¿›è¡Œã€Œç‰©ç†ã€åˆ’åˆ†ï¼Œå¦‚æœå †ç©ºé—´ï¼ˆå†…å­˜ï¼‰å¤§çš„æ—¶å€™ï¼Œæ¯æ¬¡è¿›è¡Œã€Œåƒåœ¾å›æ”¶ã€éƒ½éœ€è¦å¯¹ä¸€æ•´å—å¤§çš„åŒºåŸŸè¿›è¡Œå›æ”¶ï¼Œé‚£æ”¶é›†çš„æ—¶é—´æ˜¯ä¸å¥½æ§åˆ¶çš„ã€‚è€Œåˆ’åˆ†å¤šä¸ªå°åŒºåŸŸä¹‹åï¼Œé‚£å¯¹è¿™äº›ã€Œå°åŒºåŸŸã€å›æ”¶å°±å®¹æ˜“æ§åˆ¶ã€Œæ”¶é›†æ—¶é—´ã€äº†</li>
<li>GCè¿‡ç¨‹ï¼šåœ¨G1æ”¶é›†å™¨ä¸­å¯ä»¥ä¸»è¦åˆ†ä¸ºæœ‰Minor GC(Young GC) å’Œ Mixed GCï¼ŒFull GC<ul>
<li>ã€EdenåŒºæ»¡åˆ™è§¦å‘ã€‘Minor GC å›æ”¶è¿‡ç¨‹å¯ç®€å•åˆ†ä¸ºï¼š(STW) æ‰«æ GC Rootsã€æ›´æ–°&amp;&amp;å¤„ç†Rsetã€å¤åˆ¶æ¸…é™¤</li>
<li>ã€æ•´å †ç©ºé—´å ä¸€å®šæ¯”ä¾‹åˆ™è§¦å‘ã€‘Mixed GC ä¾èµ–ã€Œå…¨å±€å¹¶å‘æ ‡è®°ã€ï¼Œå¾—åˆ°CSet(å¯å›æ”¶Region)ï¼Œå°±è¿›è¡Œã€Œå¤åˆ¶æ¸…é™¤ã€</li>
<li>ã€ä¹Ÿæœ‰äº›ç‰¹æ®Šåœºæ™¯å¯èƒ½ä¼šå‘ç”Ÿã€‘Full GC</li>
</ul>
</li>
<li>Minor GCï¼š<ul>
<li>è§¦å‘æ—¶æœºè·Ÿå‰é¢æåˆ°è¿‡çš„åƒåœ¾æ”¶é›†å™¨éƒ½æ˜¯ä¸€æ ·çš„<br>  ç­‰åˆ°EdenåŒºæ»¡äº†ä¹‹åï¼Œä¼šè§¦å‘Minor GCã€‚Minor GCåŒæ ·ä¹Ÿæ˜¯ä¼šå‘ç”ŸStop The Worldçš„<br>  è¦è¡¥å……è¯´æ˜çš„æ˜¯ï¼šåœ¨G1çš„ä¸–ç•Œé‡Œï¼Œæ–°ç”Ÿä»£å’Œè€å¹´ä»£æ‰€å å †çš„ç©ºé—´æ˜¯æ²¡é‚£ä¹ˆå›ºå®šçš„ï¼ˆä¼šåŠ¨æ€æ ¹æ®ã€Œæœ€å¤§åœé¡¿æ—¶é—´ã€è¿›è¡Œè°ƒæ•´ï¼‰<br>  è¿™å—è¦çŸ¥é“ä¼šç»™æˆ‘ä»¬æä¾›å‚æ•°è¿›è¡Œé…ç½®å°±å¥½äº†<br>  æ‰€ä»¥ï¼ŒåŠ¨æ€åœ°æ”¹å˜å¹´è½»ä»£Regionçš„ä¸ªæ•°å¯ä»¥ã€Œæ§åˆ¶ã€Minor GCçš„å¼€é”€</li>
<li>å›æ”¶è¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•åˆ†ä¸ºä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šæ ¹æ‰«æã€æ›´æ–°&amp;&amp;å¤„ç† RSetã€å¤åˆ¶å¯¹è±¡<br>  ç¬¬ä¸€æ­¥åº”è¯¥å¾ˆå¥½ç†è§£ï¼Œå› ä¸ºè¿™è·Ÿä¹‹å‰CMSæ˜¯ç±»ä¼¼çš„ï¼Œå¯ä»¥ç†è§£ä¸ºåˆå§‹æ ‡è®°çš„è¿‡ç¨‹<br>  ç¬¬äºŒæ­¥æ¶‰åŠåˆ°ã€ŒRsetã€çš„æ¦‚å¿µ<br>  ä»ä¸Šä¸€æ¬¡æˆ‘ä»¬èŠCMSå›æ”¶è¿‡ç¨‹çš„æ—¶å€™ï¼ŒåŒæ ·è®²åˆ°äº†Minor GCï¼Œå®ƒæ˜¯é€šè¿‡ã€Œå¡è¡¨ã€(cart table)æ¥é¿å…å…¨è¡¨æ‰«æè€å¹´ä»£çš„å¯¹è±¡<br>  å› ä¸ºMinor GC æ˜¯å›æ”¶å¹´è½»ä»£çš„å¯¹è±¡ï¼Œä½†å¦‚æœè€å¹´ä»£æœ‰å¯¹è±¡å¼•ç”¨ç€å¹´è½»ä»£ï¼Œé‚£è¿™äº›è¢«è€å¹´ä»£å¼•ç”¨çš„å¯¹è±¡ä¹Ÿä¸èƒ½å›æ”¶æ‰<br>  åŒæ ·çš„ï¼Œåœ¨G1ä¹Ÿæœ‰è¿™ç§é—®é¢˜ï¼ˆæ¯•ç«Ÿæ˜¯Minor GCï¼‰ã€‚CMSæ˜¯å¡è¡¨ï¼Œè€ŒG1è§£å†³ã€Œè·¨ä»£å¼•ç”¨ã€çš„é—®é¢˜çš„å­˜å‚¨ä¸€èˆ¬å«åšRSet<br>  åªè¦è®°ä½ï¼ŒRSetè¿™ç§å­˜å‚¨åœ¨æ¯ä¸ªRegionéƒ½ä¼šæœ‰ï¼Œå®ƒè®°å½•ç€ã€Œå…¶ä»–Regionå¼•ç”¨äº†å½“å‰Regionçš„å¯¹è±¡å…³ç³»ã€<br>  å¯¹äºå¹´è½»ä»£çš„Regionï¼Œå®ƒçš„RSet åªä¿å­˜äº†æ¥è‡ªè€å¹´ä»£çš„å¼•ç”¨ï¼ˆå› ä¸ºå¹´è½»ä»£çš„æ²¡å¿…è¦å­˜å‚¨å•Šï¼Œè‡ªå·±éƒ½è¦åšMinor GCäº†ï¼‰<br>  è€Œå¯¹äºè€å¹´ä»£çš„ Region æ¥è¯´ï¼Œå®ƒçš„ RSet ä¹Ÿåªä¼šä¿å­˜è€å¹´ä»£å¯¹å®ƒçš„å¼•ç”¨ï¼ˆåœ¨G1åƒåœ¾æ”¶é›†å™¨ï¼Œè€å¹´ä»£å›æ”¶ä¹‹å‰ï¼Œéƒ½ä¼šå…ˆå¯¹å¹´è½»ä»£è¿›è¡Œå›æ”¶ï¼Œæ‰€ä»¥æ²¡å¿…è¦ä¿å­˜å¹´è½»ä»£çš„å¼•ç”¨ï¼‰<br>  é‚£ç¬¬äºŒæ­¥çœ‹å®ŒRSetçš„æ¦‚å¿µï¼Œåº”è¯¥ä¹Ÿå¥½ç†è§£äº†å§ï¼Ÿ<br>  æ— éå°±æ˜¯å¤„ç†RSetçš„ä¿¡æ¯å¹¶ä¸”æ‰«æï¼Œå°†è€å¹´ä»£å¯¹è±¡æŒæœ‰å¹´è½»ä»£å¯¹è±¡çš„ç›¸å…³å¼•ç”¨éƒ½åŠ å…¥åˆ°GC Rootsä¸‹ï¼Œé¿å…è¢«å›æ”¶æ‰<br>  ç¬¬ä¸‰æ­¥ä¹ŸæŒºå¥½ç†è§£çš„ï¼šæŠŠæ‰«æä¹‹åå­˜æ´»çš„å¯¹è±¡å¾€ã€Œç©ºçš„SurvivoråŒºã€æˆ–è€…ã€Œè€å¹´ä»£ã€å­˜æ”¾ï¼Œå…¶ä»–çš„EdenåŒºè¿›è¡Œæ¸…é™¤</li>
</ul>
</li>
<li>Mixed GCï¼šä¼šé€‰å®šæ‰€æœ‰çš„å¹´è½»ä»£Regionï¼Œéƒ¨åˆ†ã€Œå›æ”¶ä»·å€¼é«˜ã€çš„è€å¹´ä»£Regionï¼ˆå›æ”¶ä»·å€¼é«˜å…¶å®å°±æ˜¯åƒåœ¾å¤šï¼‰è¿›è¡Œé‡‡é›†</li>
<li>Full GC</li>
</ul>
</li>
<li><p>JVMè°ƒä¼˜åˆ°åº•æ˜¯å¹²å•¥çš„ï¼Ÿ</p>
<ul>
<li>æˆ‘ä»¬ä¸€èˆ¬ä¼˜åŒ–ç³»ç»Ÿçš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼š<ol>
<li>ä¸€èˆ¬æ¥è¯´å…³ç³»å‹æ•°æ®åº“æ˜¯å…ˆåˆ°ç“¶é¢ˆï¼Œé¦–å…ˆæ’æŸ¥æ˜¯å¦ä¸ºæ•°æ®åº“çš„é—®é¢˜ï¼ˆè¿™ä¸ªè¿‡ç¨‹ä¸­å°±éœ€è¦è¯„ä¼°è‡ªå·±å»ºçš„ç´¢å¼•æ˜¯å¦åˆç†ã€æ˜¯å¦éœ€è¦å¼•å…¥åˆ†å¸ƒå¼ç¼“å­˜ã€æ˜¯å¦éœ€è¦åˆ†åº“åˆ†è¡¨ç­‰ç­‰ï¼‰</li>
<li>ç„¶åï¼Œæˆ‘ä»¬ä¼šè€ƒè™‘æ˜¯å¦éœ€è¦æ‰©å®¹ï¼ˆæ¨ªå‘å’Œçºµå‘éƒ½ä¼šè€ƒè™‘ï¼‰ï¼ˆè¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šæ€€ç–‘æ˜¯ç³»ç»Ÿçš„å‹åŠ›è¿‡å¤§æˆ–è€…æ˜¯ç³»ç»Ÿçš„ç¡¬ä»¶èƒ½åŠ›ä¸è¶³å¯¼è‡´ç³»ç»Ÿé¢‘ç¹å‡ºç°é—®é¢˜ï¼‰</li>
<li>æ¥ç€ï¼Œåº”ç”¨ä»£ç å±‚é¢ä¸Šæ’æŸ¥å¹¶ä¼˜åŒ–ï¼ˆæ‰©å®¹æ˜¯ä¸èƒ½æ— æ­¢å¢ƒçš„ï¼Œé‡Œå¤´é‡Œå¤–éƒ½æ˜¯é’±é˜¿ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šå®¡è§†è‡ªå·±å†™çš„ä»£ç æ˜¯å¦å­˜åœ¨èµ„æºæµªè´¹çš„é—®é¢˜ï¼Œåˆæˆ–è€…æ˜¯åœ¨é€»è¾‘ä¸Šå¯å­˜åœ¨ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ¯”å¦‚è¯´é€šè¿‡å¹¶è¡Œçš„æ–¹å¼å¤„ç†æŸäº›è¯·æ±‚ï¼‰</li>
<li>å†æ¥ç€ï¼ŒJVMå±‚é¢ä¸Šæ’æŸ¥å¹¶ä¼˜åŒ–ï¼ˆå®¡è§†å®Œä»£ç ä¹‹åï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬è§‚å¯ŸJVMæ˜¯å¦å­˜åœ¨å¤šæ¬¡GCé—®é¢˜ç­‰ç­‰ï¼‰</li>
<li>æœ€åï¼Œç½‘ç»œå’Œæ“ä½œç³»ç»Ÿå±‚é¢æ’æŸ¥ï¼ˆè¿™ä¸ªè¿‡ç¨‹æŸ¥çœ‹å†…å­˜&#x2F;CPU&#x2F;ç½‘ç»œ&#x2F;ç¡¬ç›˜è¯»å†™æŒ‡æ ‡æ˜¯å¦æ­£å¸¸ç­‰ç­‰ï¼‰</li>
</ol>
</li>
<li>ç»å¤§å¤šæ•°æƒ…å†µä¸‹åˆ°ç¬¬ä¸‰æ­¥å°±ç»“æŸäº†ï¼Œä¸€èˆ¬ç»è¿‡ã€Œè¿ç»´å›¢é˜Ÿã€ç»™æˆ‘ä»¬è®¾ç½®çš„JVMå’Œæœºå™¨ä¸Šçš„å‚æ•°å·²ç»æ»¡è¶³ç»å¤§å¤šæ•°çš„éœ€æ±‚äº†ã€‚</li>
<li>åœ¨æˆ‘çš„ç†è§£ä¸‹ï¼Œè°ƒä¼˜JVMå…¶å®å°±æ˜¯åœ¨ã€Œç†è§£ã€JVMå†…å­˜ç»“æ„ä»¥åŠå„ç§åƒåœ¾æ”¶é›†å™¨å‰æä¸‹ï¼Œç»“åˆè‡ªå·±çš„ç°æœ‰çš„ä¸šåŠ¡æ¥ã€Œè°ƒæ•´å‚æ•°ã€ï¼Œä½¿è‡ªå·±çš„åº”ç”¨èƒ½å¤Ÿæ­£å¸¸ç¨³å®šè¿è¡Œã€‚ä¸€èˆ¬è°ƒä¼˜JVMæˆ‘ä»¬è®¤ä¸ºä¼šæœ‰å‡ ç§æŒ‡æ ‡å¯ä»¥å‚è€ƒï¼šã€ååé‡ã€ã€ã€åœé¡¿æ—¶é—´ã€å’Œã€åƒåœ¾å›æ”¶é¢‘ç‡ã€ã€‚åŸºäºè¿™äº›æŒ‡æ ‡ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½éœ€è¦è°ƒæ•´ï¼š<ol>
<li>å†…å­˜åŒºåŸŸå¤§å°ä»¥åŠç›¸å…³ç­–ç•¥ï¼ˆæ¯”å¦‚æ•´å—å †å†…å­˜å å¤šå°‘ã€æ–°ç”Ÿä»£å å¤šå°‘ã€è€å¹´ä»£å å¤šå°‘ã€Survivorå å¤šå°‘ã€æ™‹å‡è€å¹´ä»£çš„æ¡ä»¶ç­‰ç­‰ï¼‰æ¯”å¦‚ï¼ˆ-Xmxï¼šè®¾ç½®å †çš„æœ€å¤§å€¼ã€-Xmsï¼šè®¾ç½®å †çš„åˆå§‹å€¼ã€-Xmnï¼šè¡¨ç¤ºå¹´è½»ä»£çš„å¤§å°ã€-XX:SurvivorRatioï¼šä¼Šç”¸åŒºå’Œå¹¸å­˜åŒºçš„æ¯”ä¾‹ç­‰ç­‰ï¼‰ï¼ˆæŒ‰ç»éªŒæ¥è¯´ï¼šIOå¯†é›†å‹çš„å¯ä»¥ç¨å¾®æŠŠã€Œå¹´è½»ä»£ã€ç©ºé—´åŠ å¤§äº›ï¼Œå› ä¸ºå¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯åœ¨å¹´è½»ä»£å°±ä¼šç­äº¡ã€‚å†…å­˜è®¡ç®—å¯†é›†å‹çš„å¯ä»¥ç¨å¾®æŠŠã€Œè€å¹´ä»£ã€ç©ºé—´åŠ å¤§äº›ï¼Œå¯¹è±¡å­˜æ´»æ—¶é—´ä¼šæ›´é•¿äº›ï¼‰</li>
<li>åƒåœ¾å›æ”¶å™¨ï¼ˆé€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨ï¼Œä»¥åŠå„ä¸ªåƒåœ¾å›æ”¶å™¨çš„å„ç§è°ƒä¼˜å‚æ•°ï¼‰æ¯”å¦‚ï¼ˆ-XX:+UseG1GCï¼šæŒ‡å®š JVM ä½¿ç”¨çš„åƒåœ¾å›æ”¶å™¨ä¸º G1ã€-XX:MaxGCPauseMillisï¼šè®¾ç½®ç›®æ ‡åœé¡¿æ—¶é—´ã€-XX:InitiatingHeapOccupancyPercentï¼šå½“æ•´ä¸ªå †å†…å­˜ä½¿ç”¨è¾¾åˆ°ä¸€å®šæ¯”ä¾‹ï¼Œå…¨å±€å¹¶å‘æ ‡è®°é˜¶æ®µ å°±ä¼šè¢«å¯åŠ¨ç­‰ç­‰ï¼‰<br>  æ²¡é”™ï¼Œè¿™äº›éƒ½æ˜¯å› åœ°åˆ¶å®œï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æï¼ˆå‰ææ˜¯å¾—æ‡‚JVMçš„å„ç§åŸºç¡€çŸ¥è¯†ï¼ŒåŸºç¡€çŸ¥è¯†éƒ½ä¸æ‡‚ï¼Œè°ˆä½•è°ƒä¼˜ï¼‰</li>
</ol>
</li>
<li>ä¸€èˆ¬æˆ‘ä»¬æ˜¯ã€Œé‡åˆ°é—®é¢˜ã€ä¹‹åæ‰è¿›è¡Œè°ƒä¼˜çš„ï¼Œè€Œé‡åˆ°é—®é¢˜åéœ€è¦åˆ©ç”¨å„ç§çš„ã€Œå·¥å…·ã€è¿›è¡Œæ’æŸ¥<ol>
<li>é€šè¿‡jpså‘½ä»¤æŸ¥çœ‹Javaè¿›ç¨‹ã€ŒåŸºç¡€ã€ä¿¡æ¯ï¼ˆè¿›ç¨‹å·ã€ä¸»ç±»ï¼‰ã€‚è¿™ä¸ªå‘½ä»¤å¾ˆå¸¸ç”¨çš„å°±æ˜¯ç”¨æ¥çœ‹å½“å‰æœåŠ¡å™¨æœ‰å¤šå°‘Javaè¿›ç¨‹åœ¨è¿è¡Œï¼Œå®ƒä»¬çš„è¿›ç¨‹å·å’ŒåŠ è½½ä¸»ç±»æ˜¯å•¥</li>
<li>é€šè¿‡jstatå‘½ä»¤æŸ¥çœ‹Javaè¿›ç¨‹ã€Œç»Ÿè®¡ç±»ã€ç›¸å…³çš„ä¿¡æ¯ï¼ˆç±»åŠ è½½ã€ç¼–è¯‘ç›¸å…³ä¿¡æ¯ç»Ÿè®¡ï¼Œå„ä¸ªå†…å­˜åŒºåŸŸGCæ¦‚å†µå’Œç»Ÿè®¡ï¼‰ã€‚è¿™ä¸ªå‘½ä»¤å¾ˆå¸¸ç”¨äºçœ‹GCçš„æƒ…å†µ</li>
<li>é€šè¿‡jinfoå‘½ä»¤æ¥æŸ¥çœ‹å’Œè°ƒæ•´Javaè¿›ç¨‹çš„ã€Œè¿è¡Œå‚æ•°ã€ã€‚</li>
<li>é€šè¿‡jmapå‘½ä»¤æ¥æŸ¥çœ‹Javaè¿›ç¨‹çš„ã€Œå†…å­˜ä¿¡æ¯ã€ã€‚è¿™ä¸ªå‘½ä»¤å¾ˆå¸¸ç”¨äºæŠŠJVMå†…å­˜ä¿¡æ¯dumpåˆ°æ–‡ä»¶ï¼Œç„¶åå†ç”¨MAT( Memory Analyzer tool å†…å­˜è§£æå·¥å…·)æŠŠæ–‡ä»¶è¿›è¡Œåˆ†æ</li>
<li>é€šè¿‡jstackå‘½ä»¤æ¥æŸ¥çœ‹JVMã€Œçº¿ç¨‹ä¿¡æ¯ã€ã€‚è¿™ä¸ªå‘½ä»¤ç”¨å¸¸ç”¨è¯­æ’æŸ¥æ­»é”ç›¸å…³çš„é—®é¢˜</li>
<li>è¿˜æœ‰è¿‘æœŸæ¯”è¾ƒçƒ­é—¨çš„Arthasï¼ˆé˜¿é‡Œå¼€æºçš„è¯Šæ–­å·¥å…·ï¼‰ï¼Œæ¶µç›–äº†ä¸Šé¢å¾ˆå¤šå‘½ä»¤çš„åŠŸèƒ½ä¸”è‡ªå¸¦å›¾å½¢åŒ–ç•Œé¢ã€‚</li>
</ol>
</li>
<li>JVM çš„ JIT ä¼˜åŒ–æŠ€æœ¯ï¼šæ¯”è¾ƒå‡ºåçš„æœ‰ä¸¤ç§ï¼šæ–¹æ³•å†…è”å’Œé€ƒé€¸åˆ†æ<br>  æ‰€è°“æ–¹æ³•å†…è”å°±æ˜¯æŠŠã€Œç›®æ ‡æ–¹æ³•ã€çš„ä»£ç å¤åˆ¶åˆ°ã€Œè°ƒç”¨çš„æ–¹æ³•ã€ä¸­ï¼Œé¿å…å‘ç”ŸçœŸå®çš„æ–¹æ³•è°ƒç”¨<br>  å› ä¸ºæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½ä¼šç”Ÿæˆæ ˆå¸§ï¼ˆå‹æ ˆå‡ºæ ˆè®°å½•æ–¹æ³•è°ƒç”¨ä½ç½®ç­‰ç­‰ï¼‰ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥ã€Œæ–¹æ³•å†…è”ã€çš„ä¼˜åŒ–å¯ä»¥æé«˜ä¸€å®šçš„æ€§èƒ½ã€‚åœ¨JVMä¸­ä¹Ÿæœ‰ç›¸å…³çš„å‚æ•°ç»™äºˆæˆ‘ä»¬æŒ‡å®šï¼ˆ-XX:MaxFreqInlineSizeã€-XX:MaxInlineSizeï¼‰<br>  è€Œã€Œé€ƒé€¸åˆ†æã€åˆ™æ˜¯åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢«å¤–éƒ¨æ–¹æ³•å¼•ç”¨æˆ–å¤–éƒ¨çº¿ç¨‹è®¿é—®çš„åˆ†ææŠ€æœ¯ï¼Œå¦‚æœã€Œæ²¡æœ‰è¢«å¼•ç”¨ã€ï¼Œå°±å¯ä»¥å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚è¯´ï¼š<ol>
<li>é”æ¶ˆé™¤ï¼ˆåŒæ­¥å¿½ç•¥ï¼‰ï¼šè¯¥å¯¹è±¡åªåœ¨æ–¹æ³•å†…éƒ¨è¢«è®¿é—®ï¼Œä¸ä¼šè¢«åˆ«çš„åœ°æ–¹å¼•ç”¨ï¼Œé‚£ä¹ˆå°±ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥æŠŠé”ç›¸å…³çš„ä»£ç ç»™å¿½ç•¥æ‰</li>
<li>æ ˆä¸Šåˆ†é…ï¼šè¯¥å¯¹è±¡åªä¼šåœ¨æ–¹æ³•å†…éƒ¨è¢«è®¿é—®ï¼Œç›´æ¥å°†å¯¹è±¡åˆ†é…åœ¨ã€Œæ ˆã€ä¸­ï¼ˆJavaé»˜è®¤æ˜¯å°†å¯¹è±¡åˆ†é…åœ¨ã€Œå †ã€ä¸­ï¼Œæ˜¯éœ€è¦é€šè¿‡JVMåƒåœ¾å›æ”¶æœŸè¿›è¡Œå›æ”¶ï¼Œéœ€è¦æŸè€—ä¸€å®šçš„æ€§èƒ½ï¼Œè€Œæ ˆå†…åˆ†é…åˆ™å¿«å¾ˆå¤šï¼‰</li>
<li>æ ‡é‡æ›¿æ¢&#x2F;åˆ†ç¦»å¯¹è±¡ï¼šå½“ç¨‹åºçœŸæ­£æ‰§è¡Œçš„æ—¶å€™å¯ä»¥ä¸åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼Œè€Œç›´æ¥åˆ›å»ºå®ƒçš„æˆå‘˜å˜é‡æ¥ä»£æ›¿ã€‚å°†å¯¹è±¡æ‹†åˆ†åï¼Œå¯ä»¥åˆ†é…å¯¹è±¡çš„æˆå‘˜å˜é‡åœ¨æ ˆæˆ–å¯„å­˜å™¨ä¸Šï¼ŒåŸæœ¬çš„å¯¹è±¡å°±æ— éœ€åˆ†é…å†…å­˜ç©ºé—´äº†</li>
</ol>
</li>
</ul>
</li>
<li><p>æœ‰æ²¡æœ‰æ’æŸ¥è¿‡çº¿ä¸Š oom çš„é—®é¢˜ï¼Ÿ</p>
<ul>
<li>æ²¡æœ‰ï¼Œä½†æ˜¯ï¼ŒçŸ¥é“ã€‚ã€‚ã€‚<br>  OOM æ˜¯ out of memory çš„ç®€ç§°ï¼Œè¡¨ç¤ºç¨‹åºéœ€è¦çš„å†…å­˜ç©ºé—´å¤§äº JVM åˆ†é…çš„å†…å­˜ç©ºé—´ã€‚OOM åæœå°±æ˜¯å¯¼è‡´ç¨‹åºå´©æºƒï¼›å¯ä»¥é€šä¿—ç†è§£ï¼šç¨‹åºç”³è¯·å†…å­˜è¿‡å¤§ï¼Œè™šæ‹Ÿæœºæ— æ³•æ»¡è¶³ã€‚</li>
<li>å¯¼è‡´ OOM é”™è¯¯çš„æƒ…å†µä¸€èˆ¬æ˜¯ï¼š<br>  1ã€ç»™ JVM è™šæ‹Ÿæœºåˆ†é…çš„å†…å­˜å¤ªå°ï¼Œå®é™…ä¸šåŠ¡éœ€æ±‚å¯¹å†…å­˜çš„æ¶ˆè€—æ¯”è¾ƒå¤š<br>  2ã€Java åº”ç”¨é‡Œé¢å­˜åœ¨å†…å­˜æ³„æ¼çš„é—®é¢˜ï¼Œæˆ–è€…åº”ç”¨ä¸­æœ‰å¤§é‡å ç”¨å†…å­˜çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ²¡åŠæ³•åŠæ—¶é‡Šæ”¾ã€‚æˆ‘ç»™å¤§å®¶è§£é‡Šä¸€ä¸‹å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸ä¸€æ ·çš„æƒ…å†µ<br>  å†…å­˜æ³„éœ²ï¼šç”³è¯·ä½¿ç”¨å®Œçš„å†…å­˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¯¼è‡´è™šæ‹Ÿæœºä¸æœºä¸èƒ½å†æ¬¡ä½¿ç”¨è¯¥å†…å­˜ï¼Œæ­¤æ—¶è¿™æ®µå†…å­˜å°±æ³„éœ²äº†ï¼Œå› ä¸ºç”³è¯·è€…ä¸ç”¨äº†ï¼Œè€Œåˆä¸èƒ½è¢«è™šæ‹Ÿæœºåˆ†æœºåˆ†é…ç»™åˆ«äººç”¨ã€‚<br>  å†…å­˜æº¢å‡ºï¼šç”³è¯·çš„å†…å­˜è¶…å‡ºäº† JVM èƒ½æä¾›çš„å†…å­˜å¤§å°ï¼Œæ­¤æ—¶ç§°ä¹‹ä¸ºæº¢å‡ºã€‚</li>
<li>å¸¸è§çš„ OOM å¼‚å¸¸æƒ…å†µæœ‰ä¸¤ç§ï¼š<br>  java.lang.OutOfMemoryError: Java heap space â€”â€”&gt;java å †å†…å­˜æº¢å‡ºï¼Œæ­¤ç§æƒ…å†µæœ€å¸¸è§ï¼Œä¸€èˆ¬ç”±äºå†…å­˜æ³„éœ²æˆ–è€…å †çš„å¤§å°è®¾ç½®ä¸å½“å¼•èµ·ã€‚å¯¹äºå†…å­˜æ³„éœ²ï¼Œéœ€è¦é€šè¿‡å†…å­˜ç›‘æ§è½¯ä»¶æŸ¥æ‰¾ç¨‹åºä¸­çš„æ³„éœ²ä»£ç ï¼Œè€Œå †å¤§å°å¯ä»¥é€šè¿‡è™šæ‹Ÿæœºå‚æ•°-Xms,-Xmx æ¥ä¿®æ”¹ã€‚<br>  java.lang.OutOfMemoryError: PermGen space æˆ–java.lang.OutOfMemoryErrorï¼šMetaSpace â€”â€”&gt;java æ–¹æ³•åŒºï¼Œæº¢å‡ºäº†ï¼Œä¸€èˆ¬å‡ºç°åœ¨å¤§é‡ Classã€æˆ–è€…é‡‡ç”¨ cglib ç­‰åå°„æœºåˆ¶çš„æƒ…å†µï¼Œå› ä¸ºè¿™äº›æƒ…å†µä¼šäº§ç”Ÿå¤§é‡çš„ Class ä¿¡æ¯å­˜å‚¨äºæ–¹æ³•åŒºã€‚è¿™ç§æƒ…å†µå¯ä»¥é€šè¿‡æ›´æ”¹æ–¹æ³•åŒºçš„å¤§å°æ¥è§£å†³ï¼Œä½¿ç”¨ç±»ä¼¼-XX:PermSize&#x3D;64m-XX:MaxPermSize&#x3D;256m çš„å½¢å¼ä¿®æ”¹ã€‚</li>
<li>å¦å¤–ï¼Œè¿‡å¤šçš„å¸¸é‡å°¤å…¶æ˜¯å­—ç¬¦ä¸²ä¹Ÿä¼šå¯¼è‡´æ–¹æ³•åŒºæº¢å‡ºã€‚<br>  é‡åˆ°è¿™ç±»é—®é¢˜ï¼Œé€šå¸¸çš„æ’æŸ¥æ–¹å¼æ˜¯ï¼Œå…ˆè·å–å†…å­˜çš„ Dump æ–‡ä»¶ã€‚Dump æ–‡ä»¶æœ‰ä¸¤ç§æ–¹å¼æ¥ç”Ÿæˆï¼šç¬¬ä¸€ç§æ˜¯é…ç½® JVM å¯åŠ¨å‚æ•°ï¼Œå½“è§¦å‘äº† OOM å¼‚å¸¸çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆï¼›ç¬¬äºŒç§æ˜¯ä½¿ç”¨ jmap å·¥å…·æ¥ç”Ÿæˆã€‚<br>  ç„¶åä½¿ç”¨ MAT å·¥å…·æ¥åˆ†æ Dump æ–‡ä»¶ã€‚å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œå¯è¿›ä¸€æ­¥é€šè¿‡å·¥å…·æŸ¥çœ‹æ³„æ¼å¯¹è±¡åˆ° GC Roots çš„å¼•ç”¨é“¾ã€‚æŒæ¡äº†æ³„æ¼å¯¹è±¡çš„ç±»ä¿¡æ¯å’Œ GC Roots å¼•ç”¨é“¾çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥æ¯”è¾ƒå‡†ç¡®åœ°å®šä½æ³„æ¼ä»£ç çš„ä½ç½®ã€‚å¦‚æœæ˜¯æ™®é€šçš„å†…å­˜æº¢å‡ºï¼Œç¡®å®æœ‰å¾ˆå¤šå ç”¨å†…å­˜çš„å¯¹è±¡ï¼Œé‚£å°±åªéœ€è¦æå‡å †å†…å­˜ç©ºé—´å³å¯ã€‚</li>
</ul>
</li>
<li><p>Java ä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚<br>ç†è®ºä¸Š Java å› ä¸ºæœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰ä¸ä¼šå­˜åœ¨å†…å­˜æ³„éœ²é—®é¢˜ï¼ˆ è¿™ä¹Ÿæ˜¯ Java è¢«å¹¿æ³›ä½¿ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦åŸå›  ï¼‰ï¼›ç„¶è€Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šå­˜åœ¨æ— ç”¨ä½†å¯è¾¾çš„å¯¹ è±¡ï¼Œè¿™äº›å¯¹è±¡ ä¸èƒ½è¢« GC å›æ”¶ ï¼Œå› æ­¤ä¹Ÿä¼šå¯¼è‡´å†…å­˜æ³„éœ²çš„å‘ç”Ÿ ã€‚</p>
</li>
</ul>
<hr>

<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><ul>
<li><p>JDBCã€Spring DAOã€MyBatisï¼Ÿ<br>  Java Database Connectivityã€Spring Data Access Objectå’Œ MyBatis æ˜¯ Java ä¸­ç”¨äºæ•°æ®åº“è®¿é—®çš„ä¸‰ç§ä¸åŒçš„æŠ€æœ¯æˆ–æ¨¡å¼ã€‚</p>
<ol>
<li>JDBC æ˜¯ Java æä¾›çš„æ ‡å‡†æ•°æ®åº“è®¿é—®æ¥å£ï¼Œå®ƒå…è®¸ Java åº”ç”¨ç¨‹åºä¸ä¸åŒçš„å…³ç³»å‹æ•°æ®åº“è¿›è¡Œé€šä¿¡ã€‚JDBC æä¾›äº†ä¸€ç»„ APIï¼Œé€šè¿‡è¿™äº› APIï¼Œå¼€å‘è€…å¯ä»¥æ‰§è¡Œ SQL æŸ¥è¯¢ã€æ›´æ–°æ•°æ®åº“ã€å¤„ç†äº‹åŠ¡ç­‰æ“ä½œã€‚JDBC æ˜¯ç›´æ¥ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’çš„åº•å±‚æŠ€æœ¯ï¼Œéœ€è¦å¼€å‘è€…ç¼–å†™è¾ƒå¤šçš„ä»£ç æ¥å¤„ç†æ•°æ®åº“è¿æ¥ã€SQL æ‰§è¡Œå’Œç»“æœé›†å¤„ç†ç­‰ç»†èŠ‚ã€‚</li>
<li>Spring DAO æ˜¯ Spring æ¡†æ¶ä¸­çš„ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒæä¾›äº†ä¸€ç§é«˜å±‚æ¬¡çš„ã€é¢å‘å¯¹è±¡çš„æ•°æ®åº“è®¿é—®æ–¹å¼ï¼Œé€šè¿‡å°è£…åº•å±‚çš„ JDBC æ“ä½œï¼Œç®€åŒ–äº†æ•°æ®åº“è®¿é—®çš„ä»£ç ã€‚Spring DAO çš„ç›®æ ‡æ˜¯æä¾›æ›´é«˜çº§åˆ«çš„æŠ½è±¡ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œä¸ç”¨è¿‡å¤šå…³å¿ƒæ•°æ®åº“è®¿é—®çš„ç»†èŠ‚ã€‚Spring DAO æä¾›äº†å¯¹å£°æ˜å¼äº‹åŠ¡ã€å¼‚å¸¸å¤„ç†ç­‰ç‰¹æ€§çš„æ”¯æŒã€‚</li>
<li>MyBatis æ˜¯ä¸€ç§åŸºäº Java çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€ç§å°† SQL è¯­å¥ä¸ Java å¯¹è±¡è¿›è¡Œæ˜ å°„çš„æ–¹å¼ï¼Œé€šè¿‡ XML æˆ–æ³¨è§£é…ç½® SQL æ˜ å°„å…³ç³»ã€‚MyBatis é¿å…äº†æ‰‹åŠ¨ç¼–å†™å¤§é‡ JDBC ä»£ç ï¼ŒåŒæ—¶æä¾›äº†æ›´çµæ´»çš„ SQL æ§åˆ¶å’Œç»“æœé›†æ˜ å°„ã€‚MyBatis æ˜¯ä¸€ç§åŠè‡ªåŠ¨åŒ–çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒå…è®¸å¼€å‘è€…ç›´æ¥ç¼–å†™ SQLï¼Œä½†æä¾›äº†ä¸€äº›ä¾¿åˆ©çš„åŠŸèƒ½æ¥ç®€åŒ–æ•°æ®åº“è®¿é—®ã€‚</li>
<li>å…³ç³»æ€»ç»“ï¼š<ul>
<li>JDBC æ˜¯ç›´æ¥ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’çš„åº•å±‚æŠ€æœ¯ï¼Œéœ€è¦å¼€å‘è€…ç¼–å†™æ›´å¤šçš„æ•°æ®åº“è®¿é—®ç›¸å…³ä»£ç ã€‚</li>
<li>Spring DAO æ˜¯ Spring æ¡†æ¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ï¼Œç®€åŒ–äº†æ•°æ®åº“è®¿é—®çš„ä»£ç ï¼Œæä¾›å£°æ˜å¼äº‹åŠ¡ç­‰åŠŸèƒ½ã€‚</li>
<li>MyBatis æ˜¯ä¸€ç§åŸºäº Java çš„æŒä¹…å±‚æ¡†æ¶ï¼Œé€šè¿‡å°† SQL è¯­å¥ä¸ Java å¯¹è±¡è¿›è¡Œæ˜ å°„ï¼Œç®€åŒ–äº†æ•°æ®åº“è®¿é—®çš„ä»£ç ï¼Œæä¾›äº†æ›´çµæ´»çš„ SQL æ§åˆ¶å’Œç»“æœé›†æ˜ å°„ã€‚<br> åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒSpring DAO å’Œ MyBatis å¯ä»¥ä¸ JDBC ç»“åˆä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨ä¸åŒå±‚æ¬¡ä¸Šæä¾›æ›´å¤šçš„æŠ½è±¡å’ŒåŠŸèƒ½ï¼ŒåŒæ—¶ä½¿å¼€å‘æ›´åŠ æ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ MyBatis æä¾›çš„ SQL æ˜ å°„å’Œç»“æœé›†æ˜ å°„åŠŸèƒ½ï¼Œä¸ Spring DAO é›†æˆï¼ŒåŒæ—¶åˆ©ç”¨ Spring æä¾›çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚</li>
</ul>
</li>
</ol>
</li>
<li><p>JDBCæ“ä½œçš„æ­¥éª¤:<br>åŠ è½½æ•°æ®åº“é©±åŠ¨ç±»<br>æ‰“å¼€æ•°æ®åº“è¿æ¥<br>æ‰§è¡Œsqlè¯­å¥<br>å¤„ç†è¿”å›ç»“æœ<br>å…³é—­èµ„æº</p>
</li>
<li><p>JDBCäº‹åŠ¡çš„æ­¥éª¤:</p>
<ol>
<li><strong>è¿æ¥æ•°æ®åº“ï¼š</strong> ä½¿ç”¨ <code>DriverManager</code> è·å–æ•°æ®åº“è¿æ¥ã€‚è¿™æ¶‰åŠæä¾›æ•°æ®åº“çš„è¿æ¥å­—ç¬¦ä¸²ã€ç”¨æˆ·åå’Œå¯†ç ç­‰ä¿¡æ¯ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:dbms://localhost:3306/mydatabase&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;password&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><strong>å…³é—­è‡ªåŠ¨æäº¤ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ª JDBC è¿æ¥éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ¯ä¸ª SQL è¯­å¥éƒ½è¢«ç«‹å³æ‰§è¡Œå¹¶æäº¤åˆ°æ•°æ®åº“ã€‚åœ¨äº‹åŠ¡ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å…³é—­è‡ªåŠ¨æäº¤ã€‚</li>
<li><strong>æ‰§è¡Œäº‹åŠ¡æ“ä½œï¼š</strong> åœ¨äº‹åŠ¡ä¸­ï¼Œæ‰§è¡Œä¸€ç³»åˆ—çš„ SQL æ“ä½œï¼ŒåŒ…æ‹¬æ’å…¥ã€æ›´æ–°ç­‰ã€‚è¿™äº›æ“ä½œå°†è¢«å»¶è¿Ÿæäº¤ï¼Œç›´åˆ°æ˜¾å¼è°ƒç”¨ <code>commit()</code>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">statement.executeUpdate(<span class="string">&quot;INSERT INTO mytable (column1, column2) VALUES (&#x27;value1&#x27;, &#x27;value2&#x27;)&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><strong>äº‹åŠ¡å›æ»šï¼š</strong> å¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æˆ–æŸäº›æ¡ä»¶ä¸æ»¡è¶³ï¼Œå¯ä»¥è°ƒç”¨ <code>rollback()</code> æ–¹æ³•å°†äº‹åŠ¡å›æ»šåˆ°å¼€å§‹çŠ¶æ€ï¼Œæ’¤é”€ä¹‹å‰çš„æ‰€æœ‰æ›´æ”¹ã€‚</li>
<li><strong>æäº¤äº‹åŠ¡ï¼š</strong> å¦‚æœäº‹åŠ¡çš„æ‰§è¡Œæ²¡æœ‰å‘ç”Ÿé”™è¯¯ï¼Œä¸”ç¬¦åˆé¢„æœŸï¼Œå¯ä»¥è°ƒç”¨ <code>commit()</code> æ–¹æ³•å°†äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ›´æ”¹æäº¤åˆ°æ•°æ®åº“ã€‚</li>
<li><strong>å…³é—­è¿æ¥ï¼š</strong> å½“äº‹åŠ¡å®Œæˆåï¼Œéœ€è¦å…³é—­æ•°æ®åº“è¿æ¥ã€‚å…³é—­è¿æ¥å°†é‡Šæ”¾èµ„æºå¹¶ç»“æŸä¸æ•°æ®åº“çš„é€šä¿¡ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•´ä¸ªäº‹åŠ¡çš„æ‰§è¡Œå¯ä»¥é€šè¿‡ try-catch å—è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œä»¥ç¡®ä¿åœ¨å‘ç”Ÿé”™è¯¯æ—¶èƒ½å¤Ÿæ‰§è¡Œå›æ»šæ“ä½œ</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    connection.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">// æ‰§è¡Œäº‹åŠ¡æ“ä½œ</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    connection.commit();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">    connection.rollback();</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>åœ¨ä½¿ç”¨jdbcçš„æ—¶å€™ï¼Œå¦‚ä½•é˜²æ­¢å‡ºç°sqlæ³¨å…¥çš„é—®é¢˜ï¼Ÿ<br>ä½¿ç”¨PreparedStatementç±»ï¼Œè€Œä¸æ˜¯ä½¿ç”¨Statementç±»</p>
</li>
<li><p>æ€ä¹ˆåœ¨JDBCå†…è°ƒç”¨ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹<br>ä½¿ç”¨CallableStatement</p>
</li>
<li><p>æ˜¯å¦äº†è§£è¿æ¥æ± ï¼Œä½¿ç”¨è¿æ¥æ± æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ<br>æ•°æ®åº“è¿æ¥æ˜¯éå¸¸æ¶ˆè€—èµ„æºçš„ï¼Œå½±å“åˆ°ç¨‹åºçš„æ€§èƒ½æŒ‡æ ‡ã€‚è¿æ¥æ± æ˜¯ç”¨æ¥åˆ†é…ã€ç®¡ç†ã€é‡Šæ”¾æ•°æ®åº“è¿æ¥çš„ï¼Œå¯ä»¥ä½¿åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“è¿æ¥ã€‚é€šè¿‡é‡Šæ”¾ç©ºé—²æ—¶é—´è¾ƒé•¿çš„æ•°æ®åº“è¿æ¥ï¼Œé¿å…æ•°æ®åº“å› ä¸ºåˆ›å»ºå¤ªå¤šçš„è¿æ¥è€Œé€ æˆçš„è¿æ¥é—æ¼é—®é¢˜ï¼Œæé«˜äº†ç¨‹åºæ€§èƒ½ã€‚</p>
</li>
<li><p>ä½ æ‰€äº†è§£çš„æ•°æ®æºæŠ€æœ¯æœ‰é‚£äº›ï¼Ÿä½¿ç”¨æ•°æ®æºæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ<br>Dbcp,c3p0ç­‰ï¼Œç”¨çš„æœ€å¤šè¿˜æ˜¯c3p0ï¼Œå› ä¸ºc3p0æ¯”dbcpæ›´åŠ ç¨³å®šï¼Œå®‰å…¨ï¼›é€šè¿‡é…ç½®æ–‡ä»¶çš„å½¢å¼æ¥ç»´æŠ¤æ•°æ®åº“ä¿¡æ¯ï¼Œè€Œä¸æ˜¯é€šè¿‡ç¡¬ç¼–ç ã€‚å½“è¿æ¥çš„æ•°æ®åº“ä¿¡æ¯å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¸éœ€è¦å†æ›´æ”¹ç¨‹åºä»£ç å°±å®ç°äº†æ•°æ®åº“ä¿¡æ¯çš„æ›´æ–°ã€‚</p>
</li>
</ul>
<hr>


<h2 id="Javaå¹¶å‘"><a href="#Javaå¹¶å‘" class="headerlink" title="Javaå¹¶å‘"></a>Javaå¹¶å‘</h2><ul>
<li><p>å¹¶å‘ã€å¹¶è¡Œã€ä¸²è¡Œä¹‹é—´çš„åŒºåˆ«<br>1ï¼Œä¸²è¡Œï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡<br>2ï¼Œå¹¶è¡Œ(Parallelism)ï¼šå¤šæ ¸CPUä¸‹ï¼Œå¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œ<br>3ï¼Œå¹¶å‘(Concurency)ï¼šå¤šæ ¸CPUä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹è½®æµä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªCPUã€‚ä¸¤ä¸ªä»»åŠ¡æ•´ä½“çœ‹ä¸Šå»æ˜¯åŒæ—¶æ‰§è¡Œï¼Œåœ¨åº•å±‚ï¼Œä¸¤ä¸ªä»»åŠ¡è¢«æ‹†æˆäº†å¾ˆå¤šä»½ï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œç«™åœ¨æ›´é«˜çš„åº¦çœ‹æ¥ä¸¤ä¸ªä»»åŠ¡æ˜¯åŒæ—¶åœ¨æ‰§è¡Œçš„</p>
</li>
<li><p><strong>è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«ã€‚</strong></p>
<ul>
<li>çº¿ç¨‹ä½œä¸ºæœ€å°è°ƒåº¦å•ä½ï¼Œè¿›ç¨‹ä½œä¸ºèµ„æºåˆ†é…çš„æœ€å°å•ä½ã€‚</li>
<li>è¿›ç¨‹æ˜¯æ­£åœ¨è¿è¡Œç¨‹åºçš„å®ä¾‹ï¼Œè¿›ç¨‹ä¸­åŒ…å«äº†çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸åŒçš„ä»»åŠ¡<br>  ä¸åŒçš„è¿›ç¨‹ä½¿ç”¨ä¸åŒçš„å†…å­˜ç©ºé—´ï¼Œåœ¨å½“å‰è¿›ç¨‹ä¸‹çš„æ‰€æœ‰çº¿ç¨‹å¯ä»¥å…±äº«å†…å­˜ç©ºé—´<br>  çº¿ç¨‹æ›´è½»é‡ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ä¸€èˆ¬ä¸Šè¦æ¯”è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä½</li>
</ul>
</li>
<li><p>æ€ä¹ˆç†è§£Javaå¤šçº¿ç¨‹ï¼Ÿ  <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv22973356/?spm_id_from=333.999.0.0&jump_opus=1">https://www.bilibili.com/read/cv22973356/?spm_id_from=333.999.0.0&amp;jump_opus=1</a></p>
</li>
<li><p>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›?<br>ç»§æ‰¿Threadç±»<br>å®ç°runnableæ¥å£<br>å®ç°Callableæ¥å£<br>çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹(é¡¹ç›®ä¸­ä½¿ç”¨æ–¹å¼)</p>
</li>
<li><p>runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«<br>Runnable æ¥å£runæ–¹æ³•æ²¡æœ‰è¿”å›å€¼<br>Callableæ¥å£callæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œéœ€è¦FutureTaskè·å–ç»“æœ<br>Callableæ¥å£çš„call()æ–¹æ³•å…è®¸æŠ›å‡ºå¼‚å¸¸;è€ŒRunnableæ¥å£çš„run()æ–¹æ³•çš„å¼‚å¸¸åªèƒ½åœ¨å†…éƒ¨æ¶ˆåŒ–ï¼Œä¸èƒ½ç»§ç»­ä¸ŠæŠ›</p>
</li>
<li><p>çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼Ÿ<br>Threadä¸­çš„6ä¸ªæšä¸¾Stateï¼šæ–°å»º(NEW)ã€å¯è¿è¡Œ(RUNNABLE)ã€é˜»å¡(BLOCKED)ã€ç­‰å¾…(WAITING)ã€æ—¶é—´ç­‰å¾…(TIMED_WALTING)ã€ç»ˆæ­¢(TERMINATED)</p>
</li>
<li><p>çº¿ç¨‹çŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿ</p>
<ul>
<li>åˆ›å»ºçº¿ç¨‹å¯¹è±¡æ˜¯æ–°å»ºçŠ¶æ€</li>
<li>è°ƒç”¨äº†start()æ–¹æ³•è½¬å˜ä¸ºå¯æ‰§è¡ŒçŠ¶æ€ï¼ˆè¿˜è¦è·å–åˆ°CPUæ‰§è¡Œæƒæ‰èƒ½è¿è¡Œï¼‰</li>
<li>çº¿ç¨‹è·å–åˆ°äº†CPUçš„æ‰§è¡Œæƒï¼Œæ‰§è¡Œç»“æŸæ˜¯ç»ˆæ­¢çŠ¶æ€</li>
<li>åœ¨å¯æ‰§è¡ŒçŠ¶æ€çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰è·å–CPUçš„æ‰§è¡Œæƒï¼Œå¯èƒ½ä¼šåˆ‡æ¢å…¶ä»–çŠ¶æ€<ul>
<li>å¦‚æœæ²¡æœ‰è·å–é”(synchronizedæˆ–lock)è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè·å¾—é”å†åˆ‡æ¢ä¸ºå¯æ‰§è¡ŒçŠ¶æ€</li>
<li>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†wait()æ–¹æ³•è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨notify()å”¤é†’åå¯åˆ‡æ¢ä¸ºå¯æ‰§è¡ŒçŠ¶æ€</li>
<li>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†sleep(50)æ–¹æ³•ï¼Œè¿›å…¥è®¡æ—¶ç­‰å¾…çŠ¶æ€ï¼Œåˆ°æ—¶é—´åå¯åˆ‡æ¢ä¸ºå¯æ‰§è¡ŒçŠ¶æ€  <img src="https://leo710aka.github.io/bk/job15.png" width="550" height="300" alt=""></li>
</ul>
</li>
</ul>
</li>
<li><p>Java çº¿ç¨‹å¼€å¯ã€ç»ˆæ­¢ã€åŒæ­¥çš„æ–¹å¼</p>
<ul>
<li>å¼€å¯çº¿ç¨‹ï¼š<ol>
<li>ç»§æ‰¿ Thread ç±»å¹¶é‡å†™ <code>run</code> æ–¹æ³•ï¼Œç„¶ååˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶è°ƒç”¨ <code>start</code> æ–¹æ³•å¯åŠ¨çº¿ç¨‹ã€‚</li>
<li>å®ç° Runnable æ¥å£å¹¶å®ä¾‹åŒ–ä¸€ä¸ª <code>Runnable</code> å¯¹è±¡ï¼Œç„¶åé€šè¿‡ Thread ç±»çš„æ„é€ æ–¹æ³•å°† Runnable å¯¹è±¡ä¼ é€’ç»™çº¿ç¨‹ï¼Œè°ƒç”¨ startæ–¹æ³•å¯åŠ¨ã€‚</li>
<li><code>run()</code>å’Œ <code>start()</code>æœ‰ä»€ä¹ˆåŒºåˆ«?<br>  start():ç”¨æ¥å¯åŠ¨çº¿ç¨‹ï¼Œé€šè¿‡è¯¥çº¿ç¨‹è°ƒç”¨runæ–¹æ³•æ‰§è¡Œrunæ–¹æ³•ä¸­æ‰€å®šä¹‰çš„é€»è¾‘ä»£ç ã€‚åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚<br>  run():å°è£…äº†è¦è¢«çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œå¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ï¼Œ</li>
</ol>
</li>
<li>çº¿ç¨‹ç»ˆæ­¢ï¼š<ul>
<li>ä½¿ç”¨é€€å‡ºæ ‡å¿—ï¼Œä½¿çº¿ç¨‹æ­£å¸¸é€€å‡ºï¼Œä¹Ÿå°±æ˜¯å½“runæ–¹æ³•å®Œæˆåçº¿ç¨‹ç»ˆæ­¢ï¼Ÿï¼Ÿç”¨ <code>volatile</code> æ ‡è®°å˜é‡æ§åˆ¶çº¿ç¨‹çš„æ‰§è¡ŒçŠ¶æ€</li>
<li>ä½¿ç”¨stopæ–¹æ³•å¼ºè¡Œç»ˆæ­¢(ä¸æ¨èï¼Œæ–¹æ³•å·²ä½œåºŸ)ï¼Œå¯èƒ½ä¼šå¯¼è‡´çº¿ç¨‹çŠ¶æ€ä¸ä¸€è‡´æˆ–èµ„æºæœªæ­£ç¡®é‡Šæ”¾ã€‚</li>
<li>ä½¿ç”¨interruptæ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚è¿™ç§æ–¹å¼ä¼šå‘çº¿ç¨‹å‘é€ä¸€ä¸ªä¸­æ–­ä¿¡å·ï¼Œçº¿ç¨‹å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™æ£€æŸ¥ä¸­æ–­æ ‡å¿—å¹¶åšå‡ºå“åº”ï¼Œå®‰å…¨åœ°åœæ­¢çº¿ç¨‹ã€‚<ul>
<li>æ‰“æ–­é˜»å¡çš„çº¿ç¨‹(sleepï¼Œwaitï¼Œjoin)çš„çº¿ç¨‹ï¼Œçº¿ç¨‹ä¼šæŠ›å‡ºInterruptedExceptionå¼‚å¸¸</li>
<li>æ‰“æ–­æ­£å¸¸çš„çº¿ç¨‹ï¼Œå¯ä»¥æ ¹æ®æ‰“æ–­çŠ¶æ€æ¥æ ‡è®°æ˜¯å¦é€€å‡ºçº¿ç¨‹</li>
</ul>
</li>
</ul>
</li>
<li>çº¿ç¨‹åŒæ­¥<ul>
<li>wait()ï¼š<code>Object</code> çš„æˆå‘˜æ–¹æ³•ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ï¼›wait(long)å’Œ wait() å¯ä»¥è¢« notify å”¤é†’ï¼Œwait() å¦‚æœä¸å”¤é†’å°±ä¸€ç›´ç­‰ä¸‹å»<ul>
<li>wait æ–¹æ³•çš„è°ƒç”¨å¿…é¡»å…ˆè·å– wait å¯¹è±¡çš„é”ï¼Œè€Œ sleep åˆ™æ— æ­¤é™åˆ¶</li>
<li>wait æ–¹æ³•æ‰§è¡Œåä¼šé‡Šæ”¾å¯¹è±¡é”ï¼Œå…è®¸å…¶å®ƒçº¿ç¨‹è·å¾—è¯¥å¯¹è±¡é”(æˆ‘æ”¾å¼ƒcpuï¼Œä½†ä½ ä»¬è¿˜å¯ä»¥ç”¨)</li>
</ul>
</li>
<li>sleep() ï¼š<code>Thread</code> ç±»çš„é™æ€æ–¹æ³•ï¼Œç”¨äºè®©å½“å‰çº¿ç¨‹æš‚åœæ‰§è¡Œä¸€æ®µæ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼Œç­‰å¾…æŒ‡å®šæ—¶é—´åé‡æ–°è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œä¸ä¼šåœæ­¢çº¿ç¨‹ã€‚<ul>
<li>sleep() ä¼šä½¿å½“å‰çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè®©å‡º CPU èµ„æºç»™å…¶ä»–çº¿ç¨‹ä½¿ç”¨ï¼›å¦‚æœåœ¨ synchronized ä»£ç å—ä¸­æ‰§è¡Œï¼Œå¹¶ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”(æˆ‘æ”¾å¼ƒ cpuï¼Œä½ ä»¬ä¹Ÿç”¨ä¸äº†)</li>
<li>åˆ°æ—¶é—´åè¯¥çº¿ç¨‹ä¼šé‡æ–°å˜ä¸ºå¯è¿è¡ŒçŠ¶æ€ï¼Œè¿›å…¥å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾… CPU è°ƒåº¦å™¨é‡æ–°åˆ†é… CPU æ—¶é—´ç‰‡æ¥æ‰§è¡Œï¼ˆâ€œå°±ç»ªé˜Ÿåˆ—â€æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå†…æ ¸å±‚é¢çš„è°ƒåº¦é˜Ÿåˆ—ï¼Œå’Œéå…¬å¹³é”ä¸­çš„ç­‰å¾…é˜Ÿåˆ—çš„æ¦‚å¿µæ²¡æœ‰å¤ªå¤§å…³ç³»ã€‚ã€‚ï¼‰</li>
</ul>
</li>
<li>yield() ï¼šThread ç±»çš„é™æ€æ–¹æ³•ï¼Œç”¨äºè®©å½“å‰çº¿ç¨‹è®©å‡º CPU æ—¶é—´ç‰‡ï¼Œä½¿å¾—å…¶ä»–å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œã€‚ä¸ä¼šåœæ­¢çº¿ç¨‹ï¼Œè€Œæ˜¯è®©çº¿ç¨‹é‡æ–°è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç­‰å¾…è°ƒåº¦å™¨é‡æ–°åˆ†é… CPU æ—¶é—´ç‰‡ã€‚</li>
<li>join()ï¼šè®¾ç½®å½“å‰çº¿ç¨‹ï¼Œç­‰å¾…å¦ä¸€çº¿ç¨‹ç»“æŸåè¿è¡Œ</li>
<li>notify() ï¼šæ˜¯ç”¨äºçº¿ç¨‹é—´é€šä¿¡çš„æ–¹æ³•ï¼Œå®ƒç”¨äºå”¤é†’ä¸€ä¸ªæ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„çº¿ç¨‹ã€‚ä¸ä¼šåœæ­¢çº¿ç¨‹ï¼Œè€Œæ˜¯å”¤é†’wait()çº¿ç¨‹ï¼Œä½¿å…¶ç»§ç»­æ‰§è¡Œã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>Javaå†…å­˜æ¨¡å‹ï¼Ÿ Java3y <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv24200309/?spm_id_from=333.999.0.0&jump_opus=1">https://www.bilibili.com/read/cv24200309/?spm_id_from=333.999.0.0&amp;jump_opus=1</a></p>
</li>
<li><p><strong>å¦‚ä½•ç†è§£çº¿ç¨‹ä¸å®‰å…¨ï¼Ÿ</strong><br>å¦‚æœå¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªå…±äº«æ•°æ®è¿›è¡Œè®¿é—®è€Œä¸é‡‡å–åŒæ­¥æ“ä½œçš„è¯ï¼Œé‚£ä¹ˆæ“ä½œçš„ç»“æœæ˜¯ä¸ä¸€è‡´çš„ã€‚</p>
</li>
<li><p>çº¿ç¨‹ä¸å®‰å…¨çš„æœ¬è´¨ä»€ä¹ˆ? </p>
<ul>
<li>ä¸€ä¸ªè§’åº¦ï¼šä¿éšœ <strong>å¯è§æ€§ï¼ŒåŸå­æ€§å’Œæœ‰åºæ€§</strong>ã€‚</li>
<li>å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ã€‚Javaæä¾›äº†<code>volatile</code>å…³é”®å­—æ¥ä¿è¯å¯è§æ€§ã€‚<br>  å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚ï¼ˆå¦å¤–ï¼Œé€šè¿‡<code>synchronized</code>å’Œ<code>Lock</code>ä¹Ÿèƒ½å¤Ÿä¿è¯å¯è§æ€§ï¼Œèƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å–é”ç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œå¹¶ä¸”åœ¨é‡Šæ”¾é”ä¹‹å‰ä¼šå°†å¯¹å˜é‡çš„ä¿®æ”¹åˆ·æ–°åˆ°ä¸»å­˜å½“ä¸­ã€‚å› æ­¤å¯ä»¥ä¿è¯å¯è§æ€§ã€‚ï¼‰</li>
<li>åŸå­æ€§ï¼šå³ä¸€ä¸ªæ“ä½œæˆ–è€…å¤šä¸ªæ“ä½œ è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¹¶ä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œã€‚<br>  åœ¨Javaä¸­ï¼Œå¯¹åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡çš„è¯»å–å’Œèµ‹å€¼æ“ä½œæ˜¯åŸå­æ€§æ“ä½œï¼Œå¦‚æœè¦å®ç°æ›´å¤§èŒƒå›´æ“ä½œçš„åŸå­æ€§ï¼Œå¯ä»¥é€šè¿‡<code>synchronized</code>å’Œ<code>Lock</code>æ¥å®ç°ã€‚ç”±äºsynchronizedå’ŒLockèƒ½å¤Ÿä¿è¯ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥ä»£ç å—ï¼Œé‚£ä¹ˆè‡ªç„¶å°±ä¸å­˜åœ¨åŸå­æ€§é—®é¢˜äº†ï¼Œä»è€Œä¿è¯äº†åŸå­æ€§ã€‚</li>
<li>æœ‰åºæ€§ï¼šå³ç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚<br>  é€šè¿‡<code>volatile</code>å…³é”®å­—æ¥ä¿è¯ä¸€å®šçš„â€œæœ‰åºæ€§â€ã€‚å¦å¤–å¯ä»¥é€šè¿‡synchronizedå’ŒLockæ¥ä¿è¯æœ‰åºæ€§ï¼Œå¾ˆæ˜¾ç„¶ï¼Œsynchronizedå’ŒLockä¿è¯æ¯ä¸ªæ—¶åˆ»æ˜¯æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç›¸å½“äºæ˜¯è®©çº¿ç¨‹é¡ºåºæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè‡ªç„¶å°±ä¿è¯äº†æœ‰åºæ€§ã€‚å½“ç„¶JMMæ˜¯é€šè¿‡Happens-Before è§„åˆ™æ¥ä¿è¯æœ‰åºæ€§çš„ã€‚</li>
</ul>
</li>
<li><p><strong>Javaæœ‰ä»€ä¹ˆé”ï¼Ÿ</strong></p>
<ul>
<li>ä¹è§‚é”<ul>
<li>æœ€ä¹è§‚çš„ä¼°è®¡ï¼Œä¸æ€•åˆ«çš„çº¿ç¨‹æ¥ä¿®æ”¹å…±äº«å˜é‡ï¼Œå°±ç®—æ”¹äº†ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘åƒäºç‚¹å†é‡è¯•å‘—ï¼ˆè‡ªæ—‹ï¼‰</li>
<li>CAS</li>
</ul>
</li>
<li>æ‚²è§‚é”<ul>
<li>æœ€æ‚²è§‚çš„ä¼°è®¡ï¼Œå¾—é˜²ç€å…¶å®ƒçº¿ç¨‹æ¥ä¿®æ”¹å…±äº«å˜é‡ï¼Œæˆ‘ä¸Šäº†é”ä½ ä»¬éƒ½åˆ«æƒ³æ”¹ï¼Œæˆ‘æ”¹å®Œäº†è§£å¼€é”ï¼Œä½ ä»¬æ‰æœ‰æœºä¼šã€‚</li>
<li>synchronizedï¼Œreentrantlock</li>
</ul>
</li>
<li>é”çš„é€‰å‹ï¼Ÿ<ol>
<li>synchronizedï¼šå¯ä»¥ç”¨äºå®ç°å¯¹è±¡çº§åˆ«çš„åŒæ­¥ã€‚å®ƒå¯ä»¥ä¿®é¥°æ–¹æ³•æˆ–ä»£ç å—ï¼›<br>  ä¼˜ç‚¹ï¼šç®€å•æ˜“ç”¨ï¼Œé€‚åˆç”¨äºå¯¹ä¸´ç•Œèµ„æºè¿›è¡Œç®€å•çš„åŒæ­¥ã€‚é€‚ç”¨äºç®€å•çš„åŒæ­¥éœ€æ±‚ï¼Œå¦‚å°è§„æ¨¡çš„å¹¶å‘æ§åˆ¶ï¼Œæˆ–è€…ä¸éœ€è¦å¯ä¸­æ–­é”ã€å…¬å¹³é”ç­‰é«˜çº§åŠŸèƒ½çš„åœºæ™¯ã€‚<br>  ç¼ºç‚¹ï¼šç²’åº¦è¾ƒç²—ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒä½ã€‚</li>
<li>ReentrantLockï¼šå¯é‡å…¥é”ï¼Œæä¾›æ›´åŠ çµæ´»çš„é”æœºåˆ¶ï¼Œæ”¯æŒå¯ä¸­æ–­é”ã€è¶…æ—¶é”å’Œå…¬å¹³é”ç­‰ã€‚æ‰‹åŠ¨æ§åˆ¶é”çš„è·å–å’Œé‡Šæ”¾ã€‚<br>  ä¼˜ç‚¹ï¼šçµæ´»æ€§é«˜ï¼Œæ”¯æŒå¤šç§é”ç‰¹æ€§ã€‚é€‚ç”¨äºå¤æ‚çš„å¹¶å‘æ§åˆ¶åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯éœ€è¦åˆ©ç”¨æ¡ä»¶å˜é‡ã€å…¬å¹³é”ã€å¯ä¸­æ–­é”ç­‰é«˜çº§åŠŸèƒ½æ—¶ã€‚<br>  ç¼ºç‚¹ï¼šç›¸æ¯” synchronizedï¼Œä½¿ç”¨æ–¹å¼ç¨å¤æ‚ã€‚</li>
<li>å¯¹äºä½ç«äº‰ã€å¹¶å‘æ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è‡ªæ—‹é”æˆ–è€…ä¹è§‚é”ï¼›å¯¹äºè¯»å¤šå†™å°‘çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ ReadWriteLockï¼›å¯¹äºå¤æ‚çš„åŒæ­¥éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ ReentrantLockã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p><strong>synchronizedï¼ˆåŒæ­¥é”ï¼‰</strong></p>
<ul>
<li>Synchronizedé‡‡ç”¨äº’æ–¥çš„æ–¹å¼è®©åŒä¸€æ—¶åˆ»è‡³å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æŒæœ‰ã€å¯¹è±¡é”ã€‘ï¼Œå…¶å®ƒçº¿ç¨‹å†æƒ³è·å–è¿™ä¸ªé”æ—¶å°±ä¼šé˜»å¡ä½ï¼›åªèƒ½å®ç°ä¸ºéå…¬å¹³é”ï¼›è€Œä¸”ç”±äºJavaä¸­çš„çº¿ç¨‹å’Œæ“ä½œç³»ç»ŸåŸç”Ÿçº¿ç¨‹æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œçº¿ç¨‹è¢«é˜»å¡æˆ–è€…å”¤é†’æ—¶æ—¶ä¼šä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œè¿™ç§è½¬æ¢éå¸¸æ¶ˆè€—æ€§èƒ½ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SynchronizedExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">syncMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åŒæ­¥æ–¹æ³•ä½“</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">syncBlock</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">            <span class="comment">// åŒæ­¥ä»£ç å—</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>åº•å±‚å®ç°ï¼šsynchronizedæ˜¯javaæä¾›çš„åŸå­æ€§å†…ç½®é”ï¼Œä¼šåœ¨ç¼–è¯‘ä¹‹ååœ¨åŒæ­¥çš„ä»£ç å—å‰ååŠ ä¸Šmonitorenterå’Œmonitorexitå­—èŠ‚ç æŒ‡ä»¤ï¼Œä¾èµ–æ“ä½œç³»ç»Ÿåº•å±‚äº’æ–¥é”å®ç°ã€‚ä»–çš„ä½œç”¨ä¸»è¦å°±æ˜¯å®ç°åŸå­æ€§æ“ä½œå’Œè§£å†³å…±äº«å˜é‡çš„å†…å­˜å¯è§æ€§é—®é¢˜ã€‚<ul>
<li>æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ä¼šå°è¯•è·å–å¯¹è±¡é”ï¼Œå¦‚æœå¯¹è±¡æ²¡æœ‰è¢«é”å®šæˆ–è€…å·²ç»è·å¾—äº†é”ï¼Œé”çš„è®¡æ•°å™¨+1ã€‚æ­¤æ—¶å…¶ä»–ç«äº‰é”çš„çº¿ç¨‹åˆ™ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚</li>
<li>æ‰§è¡ŒmonitorexitæŒ‡ä»¤æ—¶åˆ™ä¼šæŠŠè®¡æ•°å™¨-1ï¼Œå½“è®¡æ•°å™¨å€¼ä¸º0æ—¶ï¼Œåˆ™é”é‡Šæ”¾ï¼Œå¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹å†ç»§ç»­ç«äº‰é”ã€‚</li>
</ul>
</li>
<li>monitoræ˜¯jvmçº§åˆ«çš„å¯¹è±¡(C++å®ç°)ï¼Œçº¿ç¨‹è·å¾—é”éœ€è¦ä½¿ç”¨å¯¹è±¡(é”)å…³è”monitorï¼›å…¶å†…éƒ¨æœ‰ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ownerã€entrylistã€waitsetï¼ˆäº‹å®ä¸Šæœ‰è¿™ä¸¤ä¸ªé˜Ÿåˆ—ï¼‰<ul>
<li>owneræ˜¯å…³è”çš„è·å¾—é”çš„çº¿ç¨‹ï¼Œå¹¶ä¸”åªèƒ½å…³è”ä¸€ä¸ªçº¿ç¨‹;</li>
<li>entrylistå…³è”çš„æ˜¯å¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹ï¼Œåœ¨ownerä¸ºç©ºåçº¿ç¨‹ç«äº‰é”;</li>
<li>waitsetå…³è”çš„æ˜¯å¤„äºWaitingçŠ¶æ€çš„çº¿ç¨‹</li>
</ul>
</li>
<li>Javaä¸­çš„synchronizedæœ‰åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ä¸‰ç§å½¢å¼ï¼Œåˆ†åˆ«å¯¹åº”äº†é”åªè¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ã€ä¸åŒçº¿ç¨‹äº¤æ›¿æŒæœ‰é”ã€å¤šçº¿ç¨‹ç«äº‰é”ä¸‰ç§æƒ…å†µã€‚<ol>
<li>é‡é‡çº§é”ï¼šåº•å±‚ä½¿ç”¨çš„Monitorå®ç°ï¼Œé‡Œé¢æ¶‰åŠåˆ°äº†ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ‡æ¢ã€è¿›ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæˆæœ¬è¾ƒé«˜ï¼Œæ€§èƒ½æ¯”è¾ƒä½ã€‚ä¸€æ—¦é”å‘ç”Ÿäº†ç«äº‰ï¼Œå°±ä¼šå‡çº§ä¸ºé‡é‡çº§é”ã€‚</li>
<li>è½»é‡çº§é”ï¼šçº¿ç¨‹åŠ é”çš„æ—¶é—´æ˜¯é”™å¼€çš„(ä¹Ÿå°±æ˜¯æ²¡æœ‰ç«äº‰)ï¼Œå¯ä»¥ä½¿ç”¨è½»é‡çº§é”æ¥ä¼˜åŒ–ã€‚è½»é‡çº§ä¿®æ”¹äº†å¯¹è±¡å¤´çš„é”æ ‡å¿—ï¼Œç›¸å¯¹é‡é‡çº§é”æ€§èƒ½æå‡å¾ˆå¤šã€‚æ¯æ¬¡ä¿®æ”¹éƒ½æ˜¯CASæ“ä½œï¼Œä¿è¯åŸå­æ€§</li>
<li>åå‘é”ï¼šä¸€æ®µå¾ˆé•¿çš„æ—¶é—´å†…éƒ½åªè¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨é”ï¼Œå¯ä»¥ä½¿ç”¨äº†åå‘é”ï¼Œåœ¨ç¬¬ä¸€æ¬¡è·å¾—é”æ—¶ä¼šæœ‰ä¸€ä¸ªCASæ“ä½œï¼Œä¹‹åè¯¥çº¿ç¨‹å†è·å–é”åªéœ€è¦åˆ¤æ–­mark wordä¸­æ˜¯å¦æ˜¯è‡ªå·±çš„çº¿ç¨‹idå³å¯ï¼Œè€Œä¸æ˜¯å¼€é”€ç›¸å¯¹è¾ƒå¤§çš„CASå‘½ä»¤</li>
</ol>
</li>
<li>å®Œæ•´æ‰§è¡Œæµç¨‹ï¼š<br>  ï¼Ÿï¼Ÿå…ˆè€ƒè™‘åå‘é”ï¼Œå¦‚æœå½“å‰çº¿ç¨‹IDä¸markwordå­˜å‚¨çš„ä¸ç›¸ç­‰ï¼Œåˆ™CASå°è¯•æ›´æ¢çº¿ç¨‹IDï¼ŒCASæˆåŠŸå°±è·å–å¾—åˆ°é”äº†ï¼›CASå¤±è´¥åˆ™å‡çº§ä¸ºè½»é‡çº§é”ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯é€šè¿‡CASæ¥æŠ¢å é”èµ„æºï¼ˆåªä¸è¿‡å¤šäº†æ‹·è´Mark Wordåˆ°Lock Recordçš„è¿‡ç¨‹ï¼‰ï¼ŒæŠ¢å æˆåŠŸåˆ°é”å°±å½’å±ç»™è¯¥çº¿ç¨‹äº†ï¼Œä½†è‡ªæ—‹å¤±è´¥ä¸€å®šæ¬¡æ•°åï¼ˆç«äº‰æ¿€çƒˆï¼Ÿï¼Ÿï¼‰å‡çº§é‡é‡çº§é”ï¼›é‡é‡çº§é”é€šè¿‡monitorå¯¹è±¡ä¸­çš„é˜Ÿåˆ—å­˜å‚¨çº¿ç¨‹ï¼Œä½†çº¿ç¨‹è¿›å…¥é˜Ÿåˆ—å‰ï¼Œè¿˜æ˜¯ä¼šå…ˆå°è¯•è·å–å¾—åˆ°é”ï¼Œå¦‚æœèƒ½è·å–ä¸åˆ°æ‰è¿›å…¥çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—ä¸­</li>
</ul>
</li>
<li><p>å…·ä½“æ¥è¯´ï¼ŒSynchronized é”ä½çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>å½“ <code>Synchronized</code> å…³é”®å­—åº”ç”¨åœ¨å®ä¾‹æ–¹æ³•ä¸Šæ—¶ï¼Œå®ƒé”ä½çš„æ˜¯è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯¥å®ä¾‹çš„å¯¹è±¡é”ã€‚ä¸åŒå®ä¾‹å¯¹è±¡ä¹‹é—´çš„æ–¹æ³•è°ƒç”¨ä¸ä¼šäº’æ–¥ï¼Œåªæœ‰åŒä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ‰ä¼šäº’æ–¥ï¼Œå³åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¼šç«äº‰å¯¹è±¡é”ã€‚</li>
<li>å½“ <code>Synchronized</code> å…³é”®å­—åº”ç”¨åœ¨é™æ€æ–¹æ³•ä¸Šæ—¶ï¼Œå®ƒé”ä½çš„æ˜¯è¯¥ç±»çš„ Class å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ç±»çš„é™æ€é”ã€‚è¿™æ„å‘³ç€ä¸åŒå®ä¾‹å¯¹è±¡ä¹‹é—´çš„é™æ€æ–¹æ³•è°ƒç”¨ä¹Ÿä¼šäº’æ–¥ï¼ŒåŒä¸€ä¸ªç±»çš„ä¸åŒå®ä¾‹å¯¹è±¡çš„é™æ€æ–¹æ³•è°ƒç”¨ä¹Ÿä¼šäº’æ–¥ï¼Œå› ä¸ºå®ƒä»¬å…±äº«åŒä¸€ä¸ªç±»çš„ Class å¯¹è±¡ã€‚</li>
<li>å½“ <code>Synchronized</code> å…³é”®å­—åº”ç”¨åœ¨ä»£ç å—ä¸­æ—¶ï¼Œå®ƒé”ä½çš„æ˜¯æŒ‡å®šçš„å¯¹è±¡å®ä¾‹æˆ–è€…ç±»çš„ Class å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> (obj) &#123;</span><br><span class="line">    <span class="comment">// synchronized code block</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  è¿™é‡Œçš„ <code>obj</code> å¯ä»¥æ˜¯ä»»æ„ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹ä½¿ç”¨ç›¸åŒçš„ <code>obj</code> å¯¹è±¡è¿›è¡ŒåŒæ­¥ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´å°±ä¼šäº’æ–¥æ‰§è¡Œä»£ç å—å†…çš„ä»£ç ï¼Œå› ä¸ºå®ƒä»¬å…±äº«åŒä¸€ä¸ªå¯¹è±¡é”ã€‚å¦‚æœå°† <code>synchronized</code> å…³é”®å­—åº”ç”¨åœ¨ <code>static</code> ä»£ç å—ä¸­ï¼Œé‚£ä¹ˆå®ƒå°†é”ä½ç±»çš„ Class å¯¹è±¡ï¼ŒåŒæ ·ä¼šå¯¼è‡´åŒä¸€ä¸ªç±»çš„ä¸åŒå®ä¾‹å¯¹è±¡ä¹‹é—´äº’æ–¥æ‰§è¡Œã€‚</li>
</ul>
</li>
<li><p>JMM(Javaå†…å­˜æ¨¡å‹)</p>
<ul>
<li>å®šä¹‰äº†å…±äº«å†…å­˜ä¸­å¤šçº¿ç¨‹ç¨‹åºè¯»å†™æ“ä½œçš„è¡Œä¸ºè§„èŒƒï¼Œé€šè¿‡è¿™äº›è§„åˆ™æ¥è§„èŒƒå¯¹å†…å­˜çš„è¯»å†™æ“ä½œä»è€Œä¿è¯æŒ‡ä»¤çš„æ­£ç¡®æ€§</li>
<li>JMMæŠŠå†…å­˜åˆ†ä¸ºä¸¤å—ï¼Œä¸€å—æ˜¯ç§æœ‰çº¿ç¨‹çš„å·¥ä½œåŒºåŸŸ(å·¥ä½œå†…å­˜)ï¼Œä¸€å—æ˜¯æ‰€æœ‰çº¿ç¨‹çš„å…±äº«åŒºåŸŸ(ä¸»å†…å­˜)</li>
<li>çº¿ç¨‹è·Ÿçº¿ç¨‹ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»ï¼Œçº¿ç¨‹è·Ÿçº¿ç¨‹äº¤äº’éœ€è¦é€šè¿‡ä¸»å†…å­˜ï¼ˆåŒæ—¶åˆ†ä¸ºå…±äº«èµ„æºï¼Œæ‰€ä»¥æ²¡åŠ é”ï¼Œå…·ä½“å®ç°ä¸ºCASï¼Ÿï¼Ÿï¼Ÿï¼‰</li>
</ul>
</li>
<li><p>CASï¼ˆCompare And Swap(æ¯”è¾ƒå†äº¤æ¢)ï¼‰</p>
<ul>
<li>å®ƒä½“ç°çš„ä¸€ç§ä¹è§‚é”çš„æ€æƒ³åœ¨æ— é”çŠ¶æ€ä¸‹ä¿è¯çº¿ç¨‹æ“ä½œæ•°æ®çš„åŸå­æ€§ã€‚</li>
<li>CASä½¿ç”¨åˆ°çš„åœ°æ–¹å¾ˆå¤šï¼šAQSæ¡†æ¶ã€AtomicXXXç±»</li>
<li>åœ¨æ“ä½œå…±äº«å˜é‡çš„æ—¶å€™ä½¿ç”¨çš„è‡ªæ—‹é”ï¼Œæ•ˆç‡ä¸Šæ›´é«˜ä¸€äº›ï¼ˆä½†æ˜¯åå¤è‡ªæ—‹ä¼šå¯¼è‡´æ•ˆç‡ä¸‹é™ï¼‰</li>
<li>CASçš„åº•å±‚æ˜¯è°ƒç”¨çš„ï¼Ÿï¼Ÿï¼ŸUnsafeç±»ä¸­çš„æ–¹æ³•ï¼Œéƒ½æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œå…¶ä»–è¯­è¨€å®ç°</li>
<li>CAS å­˜åœ¨çš„é—®é¢˜å’Œå±€é™æ€§ï¼š<ol>
<li>ABA é—®é¢˜ï¼š ABA é—®é¢˜æ˜¯ CAS ä¸­å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è¯»å–æ•°æ® Aï¼Œç„¶åå¦ä¸€ä¸ªçº¿ç¨‹å°† A æ”¹å˜ä¸º Bï¼Œå†æ”¹å˜ä¸º Aï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ CAS è¿›è¡Œæ¯”è¾ƒå¹¶äº¤æ¢æ—¶ï¼Œä¼šå‘ç°å€¼ä»ç„¶ä¸º Aï¼Œè®¤ä¸ºæ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œå¯¼è‡´å¯èƒ½å‡ºç°æ„å¤–ç»“æœã€‚<br>  ä¸ºäº†è§£å†³ ABA é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·æˆ–è€…æ ‡è®°æ¥è¾…åŠ© CAS æ“ä½œï¼Œç¡®ä¿åœ¨æ¯”è¾ƒå¹¶äº¤æ¢æ—¶ï¼Œä¸ä»…æ¯”è¾ƒå€¼æ˜¯å¦ç›¸åŒï¼Œè¿˜éœ€è¦æ¯”è¾ƒç‰ˆæœ¬å·æˆ–è€…æ ‡è®°æ˜¯å¦ç›¸åŒï¼Œä»¥æ­¤æ¥å¢å¼º CAS çš„æ­£ç¡®æ€§ã€‚</li>
<li>å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§ï¼š CAS æ˜¯ä¸€ä¸ªè‡ªæ—‹æ“ä½œï¼Œå½“ç«äº‰æ¿€çƒˆæˆ–è€…çº¿ç¨‹é•¿æ—¶é—´æ— æ³•è·å–åˆ°é”æ—¶ï¼Œä¼šå¯¼è‡´è‡ªæ—‹æ—¶é—´é•¿ï¼Œæ¶ˆè€—å¤§é‡çš„ CPU èµ„æºï¼Œé™ä½ç³»ç»Ÿæ€§èƒ½ã€‚</li>
<li>åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œï¼š CAS åªèƒ½é’ˆå¯¹ä¸€ä¸ªå…±äº«å˜é‡è¿›è¡ŒåŸå­æ“ä½œï¼Œå¯¹äºå¤šä¸ªå…±äº«å˜é‡çš„å¤åˆæ“ä½œï¼Œéœ€è¦é¢å¤–çš„æ‰‹æ®µæ¥ä¿è¯åŸå­æ€§ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>volatile</p>
<ol>
<li>ä¿è¯çº¿ç¨‹é—´çš„å¯è§æ€§<br>  ç”¨ volatie ä¿®é¥°å…±äº«å˜é‡ï¼Œèƒ½å¤Ÿé˜²æ­¢ç¼–è¯‘å™¨ç­‰ä¼˜åŒ–å‘ç”Ÿï¼Œè®©ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§</li>
<li>ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº<br>  æŒ‡ä»¤é‡æ’ï¼šç”¨ volatile ä¿®é¥°å…±äº«å˜é‡ä¼šåœ¨è¯»ã€å†™å…±äº«å˜é‡æ—¶åŠ å…¥ä¸åŒçš„å±éšœé˜»æ­¢å…¶ä»–è¯»å†™æ“ä½œè¶Šè¿‡å±éšœï¼Œä»è€Œè¾¾åˆ°é˜»æ­¢é‡æ’åºçš„æ•ˆæœ</li>
</ol>
</li>
<li><p>ä»€ä¹ˆæ˜¯AQS?</p>
<ul>
<li>å¤šçº¿ç¨‹ä¸­çš„é˜Ÿåˆ—åŒæ­¥å™¨ã€‚ä¸€ç§é”æœºåˆ¶ï¼Œå®ƒæ˜¯åšä¸ºä¸€ä¸ªåŸºç¡€æ¡†æ¶ä½¿ç”¨çš„åƒReentrantLockã€Semaphoreéƒ½æ˜¯åŸºäºAQSå®ç°çš„</li>
<li>AQSå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„åŒå‘é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ’é˜Ÿçš„çº¿ç¨‹</li>
<li>åœ¨AQSå†…éƒ¨è¿˜æœ‰ä¸€ä¸ªå±æ€§stateï¼Œè¿™ä¸ªstateå°±ç›¸å½“äºæ˜¯ä¸€ä¸ªèµ„æºï¼Œé»˜è®¤æ˜¯0(æ— é”çŠ¶æ€)ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­çš„æœ‰ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹æˆåŠŸäº†stateä¸º1ï¼Œåˆ™å½“å‰çº¿ç¨‹å°±ç›¸ç­‰äºè·å–äº†èµ„æº</li>
<li>åœ¨å¯¹stateä¿®æ”¹çš„æ—¶å€™ä½¿ç”¨çš„casæ“ä½œï¼Œä¿è¯å¤šä¸ªçº¿ç¨‹ä¿®æ”¹çš„æƒ…å†µä¸‹åŸå­æ€§</li>
<li>AQSå¯ä»¥å®ç°ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ã€‚</li>
</ul>
</li>
<li><p><strong>Reentrantlockï¼ˆå¯é‡å…¥é”ï¼‰</strong></p>
<ul>
<li>ReentrantLockè¡¨ç¤ºæ”¯æŒé‡æ–°è¿›å…¥çš„é”ï¼Œè°ƒç”¨lockæ–¹æ³•è·å–äº†é”ä¹‹åï¼Œï¼ˆåŒä¸€ä¸ªçº¿ç¨‹ï¼‰å†æ¬¡è°ƒç”¨ lockï¼Œæ˜¯ä¸ä¼šå†é˜»å¡ï¼›<br>  æ”¯æŒå…¬å¹³é”å’Œéå…¬å¹³é”ï¼Œåœ¨æä¾›çš„æ„é€ å™¨çš„ä¸­æ— å‚é»˜è®¤æ˜¯éå…¬å¹³é”ï¼Œä¹Ÿå¯ä»¥ä¼ å‚è®¾ç½®ä¸ºå…¬å¹³é”  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReentrantLockExample</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>(); <span class="comment">// é»˜è®¤éå…¬å¹³é”ï¼Œtrue å¯ç”¨å…¬å¹³é”</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">lockMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å—ä¿æŠ¤çš„ä»£ç åŒº</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>åº•å±‚å®ç°ï¼šReentrantLockä¸»è¦åˆ©ç”¨CAS+AQSé˜Ÿåˆ—æ¥å®ç°<ol>
<li>çº¿ç¨‹æ¥æŠ¢é”åä½¿ç”¨casçš„æ–¹å¼ä¿®æ”¹stateçŠ¶æ€ï¼Œä¿®æ”¹çŠ¶æ€æˆåŠŸä¸º1ï¼Œåˆ™è®©exclusiveOwnerThreadå±æ€§æŒ‡å‘å½“å‰çº¿ç¨‹ï¼Œè·å–é”æˆåŠŸ</li>
<li>å‡å¦‚ä¿®æ”¹çŠ¶æ€å¤±è´¥ï¼Œåˆ™ä¼šè¿›å…¥åŒå‘é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼ŒheadæŒ‡å‘åŒå‘é˜Ÿåˆ—å¤´éƒ¨ï¼ŒtailæŒ‡å‘åŒå‘é˜Ÿåˆ—å°¾éƒ¨å½“</li>
<li>exclusiveOwnerThreadä¸ºnullçš„æ—¶å€™ï¼Œåˆ™ä¼šå”¤é†’åœ¨åŒå‘é˜Ÿåˆ—ä¸­ç­‰å¾…çš„çº¿ç¨‹</li>
<li>å…¬å¹³é”åˆ™ä½“ç°åœ¨æŒ‰ç…§å…ˆåé¡ºåºè·å–é”ï¼Œéå…¬å¹³ä½“ç°åœ¨ä¸åœ¨æ’é˜Ÿçš„çº¿ç¨‹ä¹Ÿå¯ä»¥æŠ¢é”</li>
</ol>
</li>
<li>å®Œæ•´è¿‡ç¨‹ï¼š  <img src="https://github.com/leo710aka/bk/blob/main/job21.png?raw=true" width="400" height="300" alt=""></li>
</ul>
</li>
<li><p><strong>synchronized å’Œ ReentrantLock çš„åŒºåˆ«ï¼Ÿ</strong> <a target="_blank" rel="noopener" href="https://www.bilibili.com/opus/788136901432311825?spm_id_from=333.999.0.0">https://www.bilibili.com/opus/788136901432311825?spm_id_from=333.999.0.0</a></p>
<ol>
<li>å®ç°æ–¹å¼ï¼š<br>  <code>synchronized</code> æ˜¯ Java è¯­è¨€çº§åˆ«çš„å…³é”®å­—ï¼Œç”¨äºå®ç°çº¿ç¨‹åŒæ­¥ã€‚å¯ä»¥ä¿®é¥°ä»£ç å—æˆ–æ–¹æ³•ï¼Œè‡ªåŠ¨è·å–å’Œé‡Šæ”¾é”ã€‚<br>  <code>ReentrantLock</code> æ˜¯ Java API æä¾›çš„é”å®ç°ï¼Œéœ€è¦æ˜¾å¼åœ°ä½¿ç”¨ <code>lock()</code> å’Œ <code>unlock()</code>è·å–é”å’Œé‡Šæ”¾é”ã€‚</li>
<li>é”ç²’åº¦ï¼š<br>  <code>synchronized</code> çš„é”ç²’åº¦æ¯”è¾ƒç²—ï¼Œå®ƒå¯ä»¥å¯¹æ•´ä¸ªæ–¹æ³•æˆ–ä»£ç å—è¿›è¡ŒåŒæ­¥ï¼Œä¸èƒ½çµæ´»æ§åˆ¶é”çš„ç²’åº¦ã€‚<br>  <code>ReentrantLock</code> çš„é”ç²’åº¦æ¯”è¾ƒç»†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦åœ¨ä»£ç ä¸­çµæ´»åœ°è·å–å’Œé‡Šæ”¾é”ï¼Œå¯ä»¥å®ç°æ›´ç»†ç²’åº¦çš„åŒæ­¥ã€‚</li>
<li>åŠŸèƒ½å±‚é¢ï¼š<br>  äºŒè€…å‡å±äºæ‚²è§‚é”ã€éƒ½å…·å¤‡åŸºæœ¬çš„äº’æ–¥ã€åŒæ­¥ã€é”é‡å…¥åŠŸèƒ½<br>  Lock æä¾›äº†è®¸å¤š synchronized ä¸å…·å¤‡çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å…¬å¹³é”ã€å¯æ‰“æ–­ã€å¯è¶…æ—¶ã€å¤šæ¡ä»¶å˜é‡ï¼›Lock æœ‰é€‚åˆä¸åŒåœºæ™¯çš„å®ç°ï¼Œå¦‚ ReentrantLockï¼ŒReentrantReadWriteLock(è¯»å†™é”)</li>
<li>æ€§èƒ½ï¼š<br>  åœ¨ä½ç«äº‰ã€çº¿ç¨‹æ•°é‡ä¸å¤šçš„æƒ…å†µä¸‹ï¼Œ<code>synchronized</code> çš„æ€§èƒ½å¯èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒæ˜¯ JVM å†…ç½®çš„æœºåˆ¶ï¼Œæ— éœ€é¢å¤–çš„èµ„æºæ¶ˆè€—ã€‚<br>  åœ¨é«˜ç«äº‰ã€çº¿ç¨‹æ•°é‡è¾ƒå¤šæˆ–è€…éœ€è¦æ›´ç»†ç²’åº¦æ§åˆ¶çš„æƒ…å†µä¸‹ï¼Œ<code>ReentrantLock</code> å¯ä»¥æä¾›æ›´å¥½çš„çµæ´»æ€§å’Œæ€§èƒ½ã€‚</li>
</ol>
</li>
<li><p>synchronized å’Œ violated çš„åŒºåˆ«ï¼Ÿ</p>
<ul>
<li>synchronized æ˜¯é”å®šå½“å‰å˜é‡ï¼Œåªæœ‰å½“å‰çº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹è¢«é˜»å¡ä½ã€‚</li>
<li>volatile æœ¬è´¨æ˜¯åœ¨å‘Šè¯‰jvmå½“å‰å˜é‡åœ¨å¯„å­˜å™¨ï¼ˆå·¥ä½œå†…å­˜ï¼‰ä¸­çš„å€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦ä»ä¸»å­˜ä¸­è¯»å–ï¼›<br>  ä¸€æ—¦ä¸€ä¸ªå…±äº«å˜é‡ï¼ˆç±»çš„æˆå‘˜å˜é‡ã€ç±»çš„é™æ€æˆå‘˜å˜é‡ï¼‰è¢«volatileä¿®é¥°ä¹‹åï¼Œé‚£ä¹ˆå°±å…·å¤‡äº†ä¸¤å±‚è¯­ä¹‰ï¼š<br>  1ã€ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹æŸä¸ªå˜é‡çš„æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ˜¯ç«‹å³å¯è§çš„ï¼›<br>  2ã€ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚</li>
<li>1.volatileä»…èƒ½ä½¿ç”¨åœ¨å˜é‡çº§åˆ«ï¼›synchronizedåˆ™å¯ä»¥ä½¿ç”¨åœ¨å˜é‡ã€æ–¹æ³•ã€å’Œç±»çº§åˆ«çš„</li>
<li>2.volatileä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§ï¼Œå¹¶ä¸èƒ½ä¿è¯åŸå­æ€§ï¼›synchronizedåˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’ŒåŸå­æ€§</li>
<li>3.volatileä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronizedå¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ã€‚</li>
<li>4.volatileæ ‡è®°çš„å˜é‡ä¸ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼›synchronizedæ ‡è®°çš„å˜é‡å¯ä»¥è¢«ç¼–è¯‘å™¨ä¼˜åŒ–</li>
</ul>
</li>
<li><p>å…¬å¹³é”å’Œéå…¬å¹³é”</p>
<ul>
<li>å…¬å¹³é”ï¼šæ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹æŒ‰ç…§è¯·æ±‚é”çš„é¡ºåºæ¥è·å–é”ï¼Œéµå¾ªå…ˆæ¥å…ˆå¾—çš„åŸåˆ™ã€‚å¦‚æœé”å·²è¢«å…¶ä»–çº¿ç¨‹å ç”¨ï¼Œæ–°æ¥çš„çº¿ç¨‹å°±ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚åªæœ‰å½“é˜Ÿåˆ—ä¸­çš„å‰é¢æ‰€æœ‰çº¿ç¨‹éƒ½è·å–åˆ°é”å¹¶é‡Šæ”¾åï¼Œè¯¥çº¿ç¨‹æ‰èƒ½è·å¾—é”ã€‚è¿™ç§æœºåˆ¶è™½ç„¶ä¿è¯äº†é”åˆ†é…çš„ç»å¯¹å…¬å¹³æ€§ï¼Œä½†ä¼šå¯¼è‡´æ›´å¤§çš„çº¿ç¨‹åˆ‡æ¢å¼€é”€å’Œé™ä½æ•´ä½“ååé‡ï¼Œé¢‘ç¹çš„çº¿ç¨‹è°ƒåº¦ä¼šæ¶ˆè€—å¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚<ul>
<li>ä¼˜ç‚¹ï¼š<br>  1ï¼‰ç¡®ä¿æ— é¥¥é¥¿å‘ç”Ÿï¼Œæ¯ä¸ªçº¿ç¨‹æœ€ç»ˆéƒ½å¯ä»¥è·å–åˆ°é”ã€‚<br>  2ï¼‰é€‚ç”¨äºäº‹åŠ¡å¤„ç†ç­‰å¯¹æ‰§è¡Œé¡ºåºæ•æ„Ÿçš„åœºæ™¯ã€‚</li>
<li>ç¼ºç‚¹ï¼š<br>  1ï¼‰æ•ˆç‡è¾ƒä½ï¼Œå› ä¸ºè¦ä¿è¯æŒ‰ç…§è¯·æ±‚é¡ºåºè·å¾—é”ï¼Œå¯èƒ½å¯¼è‡´çº¿ç¨‹åˆ‡æ¢å’Œç­‰å¾…çš„å¢åŠ ã€‚<br>  2ï¼‰å¯èƒ½ä¼šé€ æˆé”çš„å¹³å‡è·å–æ—¶é—´å»¶é•¿ã€‚</li>
</ul>
</li>
<li>éå…¬å¹³é”ï¼šæ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹è·å–é”çš„é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§è¯·æ±‚é”çš„é¡ºåºï¼Œå…è®¸â€æ’é˜Ÿâ€ã€‚æ–°è¯·æ±‚çš„é”å¯èƒ½ä¼šç›´æ¥è·å¾—é”ï¼Œå³ä½¿æœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨ç­‰å¾…ã€‚è¿™ç§æ–¹å¼ä¸ä¿è¯ç­‰å¾…çš„çº¿ç¨‹èƒ½å¤ŸæŒ‰ç…§è¯·æ±‚é¡ºåºè·å¾—é”ï¼Œä½†æ˜¯åœ¨å¤šæ•°æƒ…å†µä¸‹èƒ½å¤Ÿå‡å°‘å”¤é†’å’Œé˜»å¡çš„æ¬¡æ•°ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„ååé‡ã€‚<ul>
<li>ä¼˜ç‚¹ï¼š<br>  1ï¼‰æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºå‡å°‘äº†é˜Ÿåˆ—çš„è°ƒåº¦ï¼Œå¯ä»¥æ›´å¿«åœ°è·å¾—é”ï¼Œæé«˜äº†ç¨‹åºçš„å“åº”é€Ÿåº¦å’Œååé‡ã€‚<br>  2ï¼‰åœ¨éç«äº‰æˆ–ä½ç«äº‰çš„ç¯å¢ƒä¸‹ï¼Œæ€§èƒ½ä¼˜äºå…¬å¹³é”ã€‚</li>
<li>ç¼ºç‚¹ï¼š<br>  1ï¼‰å¯èƒ½ä¼šå¯¼è‡´çº¿ç¨‹é¥¥é¥¿ï¼Œå³æŸäº›çº¿ç¨‹å¯èƒ½ä¼šå¾ˆé•¿æ—¶é—´è·å–ä¸åˆ°é”ã€‚<br>  2ï¼‰åœ¨é«˜åº¦ç«äº‰çš„ç¯å¢ƒä¸‹ï¼Œçº¿ç¨‹å¯èƒ½ä¼šä¸æ–­åœ°å°è¯•è·å–é”ï¼Œä»è€Œå¢åŠ CPUçš„è´Ÿæ‹…ã€‚</li>
</ul>
</li>
<li>å¦‚æœè®©ä½ å®ç°çš„è¯ï¼Œä½ æ€ä¹ˆå®ç°å…¬å¹³å’Œéå…¬å¹³é”ï¼Ÿ<ul>
<li>å…¬å¹³é”ï¼šå¯ä»¥æŠŠç«äº‰çš„çº¿ç¨‹æ”¾åœ¨ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ä¸Šã€‚åªè¦æŒæœ‰é”çš„çº¿ç¨‹æ‰§è¡Œå®Œäº†ï¼Œå”¤é†’é˜Ÿåˆ—çš„ä¸‹ä¸€ä¸ªçº¿ç¨‹å»è·å–é”å°±å¥½äº†</li>
<li>éå…¬å¹³é”ï¼šå¯èƒ½ä¼šç»å†ä»¥ä¸‹æµç¨‹ã€ã€<ol>
<li>ç›´æ¥å°è¯•è·å–é”ï¼š å¦‚æœé”å½“å‰æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œè¯¥çº¿ç¨‹ä¼šç›´æ¥è·å–åˆ°é”å¹¶æ‰§è¡ŒåŒæ­¥ä»£ç ã€‚</li>
<li>è‡ªæ—‹ç­‰å¾…ï¼šå¦‚æœé”å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œçº¿ç¨‹å¯èƒ½ä¼šè¿›è¡Œä¸€å®šæ¬¡æ•°çš„è‡ªæ—‹ç­‰å¾…ï¼ˆåå¤å°è¯•è·å–é”ï¼‰ï¼Œè€Œä¸ç«‹å³è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œè¿™æ ·å¯ä»¥å‡å°‘çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ã€‚</li>
<li>åç«¯é˜»å¡ï¼š å¦‚æœè‡ªæ—‹ç­‰å¾…ä»ç„¶æ²¡æœ‰è·å–åˆ°é”ï¼Œå¯èƒ½ä¼šè¿›å…¥åç«¯é˜»å¡çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹ä¼šåŠ å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¹¶é˜»å¡ç­‰å¾…é”çš„é‡Šæ”¾ã€‚</li>
</ol>
</li>
</ul>
</li>
<li>ReentrantLockæ˜¯å¦‚ä½•å®ç°é”å…¬å¹³å’Œéå…¬å¹³æ€§çš„ï¼Ÿ<br>  é€šè¿‡ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹é˜Ÿåˆ—ï¼ŒæŒ‰ç…§çº¿ç¨‹çš„è¯·æ±‚é¡ºåºæ¥è·å–é”ã€‚åœ¨åˆ›å»º ReentrantLock å¯¹è±¡æ—¶ä¼ å…¥äº† <code>true</code> å‚æ•°ï¼Œåˆ™è¿™ä¸ªé”æ˜¯å…¬å¹³çš„ï¼›ä¼ å…¥äº† <code>false</code> å‚æ•°æ˜¯éå…¬å¹³é”ï¼ˆé»˜è®¤ï¼‰ã€‚</li>
<li>synchronizedå¯ä»¥å®ç°å…¬å¹³é”å’Œéå…¬å¹³é”å—ï¼Ÿ<br>  é»˜è®¤éå…¬å¹³é”ï¼Œæ— æ³•ç›´æ¥æŒ‡å®šä¸ºå…¬å¹³é”ã€‚åœ¨ synchronized ä¸­ï¼Œçº¿ç¨‹åœ¨å°è¯•è·å–é”æ—¶ä¼šç›´æ¥å»ç«äº‰é”ï¼Œè€Œä¸è€ƒè™‘å…¶ä»–ç­‰å¾…çº¿ç¨‹çš„é¡ºåºã€‚</li>
</ul>
</li>
<li><p>ConcurrentHashMapã€ã€</p>
<ol>
<li>åº•å±‚æ•°æ®ç»“æ„<br>  JDK1.7åº•å±‚é‡‡ç”¨åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨å®ç°<br>  JDK1.8 é‡‡ç”¨çš„æ•°æ®ç»“æ„è·ŸHashMap1.8çš„ç»“æ„ä¸€æ ·ï¼Œæ•°ç»„+é“¾è¡¨&#x2F;çº¢é»‘äºŒå‰æ ‘</li>
<li>åŠ é”çš„æ–¹å¼<br>  JDK1.7é‡‡ç”¨Segmentåˆ†æ®µé”ï¼Œåº•å±‚ä½¿ç”¨çš„æ˜¯ReentrantLock<br>  JDK1.8é‡‡ç”¨CASæ·»åŠ æ–°èŠ‚ç‚¹ï¼Œï¼ˆå¦‚æœå·²å­˜åœ¨èŠ‚ç‚¹ï¼‰é‡‡ç”¨synchronizedé”å®šé“¾è¡¨æˆ–çº¢é»‘äºŒå‰æ ‘çš„é¦–èŠ‚ç‚¹ï¼Œç›¸å¯¹Segmentåˆ†æ®µé”ç²’åº¦æ›´ç»†ï¼Œæ€§èƒ½æ›´å¥½</li>
</ol>
</li>
<li><p>ThreadLocalçš„åº•å±‚åŸç†</p>
<ol>
<li>Threadlocalæ˜¯javaä¸­æ‰€æä¾›çš„çº¿ç¨‹æœ¬åœ°å­˜å‚¨æœºåˆ¶ï¼Œå¯ä»¥åˆ©ç”¨è¯¥æœºåˆ¶å°†ã€èµ„æºå¯¹è±¡ã€‘æ•°æ®å­˜åœ¨æŸä¸ªçº¿ç¨‹å†…éƒ¨ï¼Œè¯¥çº¿ç¨‹å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»ã€ä»»æ„æ–¹æ³•ä¸­è·å–é¢†å­˜çš„æ•°æ®</li>
<li>Threadlocalåº•å±‚é€šè¿‡ThreadlocaMapæ¥å®ç°çš„ï¼Œæ¯ä¸ªThreadå¯¹è±¡ï¼ˆçº¿ç¨‹ï¼‰ä¸­éƒ½å­˜åœ¨ThreadlocalMapï¼Œä¿å­˜å¤šä¸ªThreadlocalå¯¹è±¡<br>  a)è°ƒç”¨ set æ–¹æ³•ï¼Œå°±æ˜¯ä»¥ ThreadLocal è‡ªå·±ä½œä¸º keyï¼Œèµ„æºå¯¹è±¡ä½œä¸º valueï¼Œæ”¾å…¥å½“å‰çº¿ç¨‹çš„ ThreadLocalMap é›†åˆä¸­<br>  b)è°ƒç”¨ get æ–¹æ³•ï¼Œå°±æ˜¯ä»¥ ThreadLocalè‡ªå·±ä½œä¸º keyï¼Œåˆ°å½“å‰çº¿ç¨‹ä¸­æŸ¥æ‰¾å…³è”çš„èµ„æºå€¼<br>  c)è°ƒç”¨ remove æ–¹æ³•ï¼Œå°±æ˜¯ä»¥ ThreadLocal è‡ªå·±ä½œä¸º keyï¼Œç§»é™¤å½“å‰çº¿ç¨‹å…³è”çš„èµ„æºå€¼</li>
<li>ThreadLocalå†…å­˜æ³„æ¼é—®é¢˜<br>  ThreadLocalMap ä¸­çš„ keyæ˜¯å¼±å¼•ç”¨ï¼Œå€¼ä¸ºå¼ºå¼•ç”¨;keyä¼šè¢«GCé‡Šæ”¾å†…å­˜ï¼Œå…³è” valueçš„å†…å­˜å¹¶ä¸ä¼šé‡Šæ”¾ã€‚å»ºè®®ä¸»åŠ¨ remove é‡Šæ”¾ keyï¼Œvalue</li>
<li>Threadlocalç»å…¸çš„åº”ç”¨åœºå°±æ˜¯è¿æ¥ç®¡ç†ï¼ˆä¸€ä¸ªçº¿ç¨‹æŒæœ‰ä¸€ä¸ªè¿æ¥ï¼Œè¯¥è¿æ¥å¯¹è±¡å¯ä»¥åœ¨ä¸åŒçš„æ–¹æ³•ä¹‹è¿›è¡Œä¼ é€’ï¼Œçº¿ç¨‹ä¹‹é—´ä¸å…±äº«åŒä¸€ä¸ªè¿æ¥ï¼‰</li>
</ol>
</li>
<li><p><strong>çº¿ç¨‹æ± </strong></p>
<ul>
<li>çº¿ç¨‹æ± æ˜¯ä¸€ç§ç”¨äºç®¡ç†å’Œå¤ç”¨çº¿ç¨‹çš„æœºåˆ¶ï¼Œå®ƒæä¾›äº†ä¸€ç§æ‰§è¡Œå¤§é‡å¼‚æ­¥ä»»åŠ¡çš„æ–¹å¼ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¤šä¸ªä»»åŠ¡ä¹‹é—´åˆç†åœ°åˆ†é…å’Œç®¡ç†ç³»ç»Ÿèµ„æºã€‚<br>  ç®¡ç†ä¸€ç³»åˆ—çº¿ç¨‹çš„èµ„æºæ± ï¼Œç”¨åˆ°äº†æ± åŒ–æŠ€æœ¯ï¼Œåƒæ•°æ®åº“è¿æ¥æ± ã€HTTP è¿æ¥æ± éƒ½æ˜¯æ± åŒ–æŠ€æœ¯çš„ä½“ç°ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚</li>
<li>ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹æ± ï¼Ÿ<br>  JVMåœ¨HotSpotçš„çº¿ç¨‹æ¨¡å‹ä¸‹ï¼ŒJavaçº¿ç¨‹ä¼šä¸€å¯¹ä¸€æ˜ å°„ä¸ºå†…æ ¸çº¿ç¨‹ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨Javaä¸­æ¯æ¬¡åˆ›å»ºä»¥åŠå›æ”¶çº¿ç¨‹éƒ½ä¼šå»å†…æ ¸åˆ›å»ºä»¥åŠå›æ”¶ï¼Œè¿™å°±æœ‰å¯èƒ½å¯¼è‡´ï¼šåˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æ‰€èŠ±è´¹çš„æ—¶é—´å’Œèµ„æºå¯èƒ½æ¯”å¤„ç†çš„ä»»åŠ¡èŠ±è´¹çš„æ—¶é—´å’Œèµ„æºè¦æ›´å¤šã€‚çº¿ç¨‹æ± çš„å‡ºç°æ˜¯ä¸ºäº†æé«˜çº¿ç¨‹çš„å¤ç”¨æ€§ä»¥åŠå›ºå®šçº¿ç¨‹çš„æ•°é‡ï¼ï¼</li>
<li>ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„<ul>
<li>é™ä½èµ„æºæ¶ˆè€—ï¼Œé€šè¿‡é‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹æ¥é™ä½åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„æ¶ˆè€—ã€‚</li>
<li>æé«˜å“åº”é€Ÿåº¦ï¼Œå› ä¸ºå½“æœ‰ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œçº¿ç¨‹å·²ç»è¢«åˆ›å»ºå®Œæ¯•ï¼Œç«‹åˆ»èƒ½æ‰§è¡Œä»»åŠ¡ã€‚</li>
<li>æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ï¼Œå¯ä»¥æ‰¹é‡ç®¡ç†çº¿ç¨‹ï¼Œå¹¶ä¸”å¯ä»¥ç›‘æ§å’Œè°ƒä¼˜ï¼Œæ ¹æ®å®é™…æƒ…å†µä¿®æ”¹å‚æ•°èƒ½å°†çº¿ç¨‹æ± æ•ˆç‡å‘æŒ¥æœ€å¤§åŒ–ã€‚ä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è®©å¤šä¸ªä¸ç›¸å…³çš„ä»»åŠ¡åŒæ—¶æ‰§è¡Œã€‚</li>
</ul>
</li>
<li>çº¿ç¨‹æ± ä¸¤ç§åˆ›å»ºæ–¹å¼<ol>
<li>é€šè¿‡ ThreadPoolExecutor æ„é€ å‡½æ•°ã€‚ï¼ˆæ¨èï¼‰</li>
<li>é€šè¿‡ Executor æ¡†æ¶çš„å·¥å…·ç±» Executors åˆ›å»ºã€‚JDK 1.5 ä¹‹åå¼•å…¥ï¼Œç›¸æ¯”äºç›´æ¥ç”¨ Thread çš„ Start æ–¹æ³•æ›´å¥½ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œæ•ˆç‡æ›´é«˜ã€‚åŒ…æ‹¬çº¿ç¨‹æ± ç®¡ç†ï¼Œè¿˜æä¾›çº¿ç¨‹å·¥å‚ã€ä»»åŠ¡é˜Ÿåˆ—å’Œæ‹’ç»ç­–ç•¥ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>ThreadPoolExecutor ç±»</p>
<ul>
<li>7ï¼Ÿå¤§å‚æ•°ï¼š<br>  corePoolSizeï¼ˆæ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼Œå³ä½¿ç©ºé—²æ—¶ä¹Ÿä¸ä¼šå›æ”¶ï¼‰ã€maximumPoolSizeï¼ˆæœ€å¤§çº¿ç¨‹æ•°é‡ï¼‰ã€keepAliveTimeï¼ˆçº¿ç¨‹ç©ºä½™æ—¶é—´ï¼šè‹¥å½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œè¾¾åˆ°ç©ºé—²æ—¶é—´åå°±ä¼šå¯¹çº¿ç¨‹è¿›è¡Œå›æ”¶ï¼‰ã€workQueueï¼ˆé˜»å¡(ä»»åŠ¡)é˜Ÿåˆ—ï¼‰ã€handlerï¼ˆä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼šæ ¸å¿ƒçº¿ç¨‹æ»¡ï¼Œä»»åŠ¡é˜Ÿåˆ—æ»¡ï¼Œæœ€å¤§çº¿ç¨‹æ•°æ»¡ï¼Œå†æœ‰ä»»åŠ¡å°±ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥ï¼‰<br>  threadFactoryï¼šçº¿ç¨‹å·¥å‚</li>
<li>ä»»åŠ¡æäº¤çš„æµç¨‹:<ol>
<li>é¦–å…ˆä¼šåˆ¤æ–­è¿è¡Œçº¿ç¨‹æ•°æ˜¯å¦å°äºcorePoolSizeï¼Œå¦‚æœå°äºï¼Œåˆ™ç›´æ¥åˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</li>
<li>å¦‚æœå¤§äºcorePoolSizeï¼Œåˆ¤æ–­workQueueé˜»å¡é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œå¦‚æœè¿˜æ²¡æ»¡ï¼Œåˆ™å°†ä»»åŠ¡æ”¾åˆ°é˜»å¡é˜Ÿåˆ—ä¸­</li>
<li>å¦‚æœworkQueueé˜»å¡é˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™åˆ¤æ–­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äºmaximumPoolSizeï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡(è¶…å‡ºæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œè¾¾åˆ°çº¿ç¨‹ç©ºä½™æ—¶é—´åå›æ”¶)</li>
<li>å¦‚æœå¤§äºmaximumPoolSizeï¼Œåˆ™æ‰§è¡Œä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼ˆå…·ä½“å°±æ˜¯ä½ è‡ªå·±å®ç°çš„handlerï¼‰  <img src="https://leo710aka.github.io/bk/job16.png" width="450" height="300" alt=""></li>
</ol>
</li>
<li>çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥é»˜è®¤æœ‰ä»¥ä¸‹ 4 ç§:<br>  1ã€AbortPolicyï¼ˆä¸­æ­¢ç­–ç•¥ï¼‰åŠŸèƒ½: ç›´æ¥æŠ›å‡ºæ‹’ç»æ‰§è¡Œçš„å¼‚å¸¸ï¼Œä¸­æ­¢ç­–ç•¥çš„æ„æ€ä¹Ÿå°±æ˜¯æ‰“æ–­å½“å‰æ‰§è¡Œæµç¨‹ã€‚<br>  2ã€CallerRunsPolicyï¼ˆè°ƒç”¨è€…è¿è¡Œç­–ç•¥ï¼‰åŠŸèƒ½ï¼šåªè¦çº¿ç¨‹æ± æ²¡æœ‰å…³é—­ï¼Œå°±ç”±æäº¤ä»»åŠ¡çš„å½“å‰çº¿ç¨‹å¤„ç†ã€‚<br>  3ã€DiscardPolicyï¼ˆä¸¢å¼ƒç­–ç•¥ï¼‰åŠŸèƒ½ï¼šç›´æ¥é™æ‚„æ‚„çš„ä¸¢å¼ƒè¿™ä¸ªä»»åŠ¡ï¼Œä¸è§¦å‘ä»»ä½•åŠ¨ä½œã€‚<br>  4ã€DiscardOldestPolicyï¼ˆå¼ƒè€ç­–ç•¥ï¼‰åŠŸèƒ½ï¼šå¦‚æœçº¿ç¨‹æ± æœªå…³é—­ï¼Œå°±å¼¹å‡ºé˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œç„¶åå°è¯•æ‰§è¡Œã€‚</li>
<li>å¦‚ä½•æŒ‡å®šçº¿ç¨‹æ•°ï¼Ÿ<br>  çº¿ç¨‹æ± æŒ‡å®šçº¿ç¨‹æ•°è¿™å—ï¼Œé¦–å…ˆè¦è€ƒé‡è‡ªå·±çš„ä¸šåŠ¡æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæ˜¯cpuå¯†é›†å‹çš„è¿˜æ˜¯ioå¯†é›†å‹çš„ã€‚<br>  å‡è®¾è¿è¡Œåº”ç”¨çš„æœºå™¨CPUæ ¸å¿ƒæ•°æ˜¯Nï¼Œé‚£cpuå¯†é›†å‹çš„å¯ä»¥å…ˆç»™åˆ°N+1ï¼Œioå¯†é›†å‹çš„å¯ä»¥ç»™åˆ°2Nå»è¯•è¯•ï¼›<br>  ä¸Šé¢è¿™ä¸ªåªæ˜¯ä¸€ä¸ªå¸¸è§çš„ç»éªŒåšæ³•ï¼Œå…·ä½“ç©¶ç«Ÿå¼€å¤šå°‘çº¿ç¨‹ï¼Œéœ€è¦å‹æµ‹æ‰èƒ½æ¯”è¾ƒå‡†ç¡®åœ°å®šä¸‹æ¥ï¼›çº¿ç¨‹ä¸æ˜¯è¯´è¶Šå¤§è¶Šå¥½ï¼Œå¤šçº¿ç¨‹æ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨CPUçš„èµ„æºï¼Œçº¿ç¨‹è¿‡å¤šçš„ä¸Šä¸‹æ–‡åˆ‡æ¢ä¹Ÿä¼šå¸¦æ¥ç³»ç»Ÿçš„å¼€é”€</li>
</ul>
</li>
<li><p>ThreadPoolExecutor çš„ç±»å‹<br><strong>FixedThreadPool</strong>ï¼šè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå›ºå®šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± ã€‚<br>SingleThreadExecutorï¼š è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚<br>CachedThreadPoolï¼š è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´çº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± ã€‚<br><strong>ScheduledThreadPool</strong>ï¼šè¯¥è¿”å›ä¸€ä¸ªç”¨æ¥åœ¨ç»™å®šçš„å»¶è¿Ÿåè¿è¡Œä»»åŠ¡æˆ–è€…å®šæœŸæ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ± ã€‚</p>
</li>
<li><p>Java<strong>æ­»é”</strong>å¦‚ä½•é¿å…?</p>
<ul>
<li>é€ æˆæ­»é”çš„å‡ ä¸ªåŸå› :<ol>
<li>ä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨</li>
<li>ä¸€ä¸ªçº¿ç¨‹åœ¨é˜»å¡ç­‰å¾…æŸä¸ªèµ„æºæ—¶ï¼Œä¸é‡Šæ”¾å·²å æœ‰èµ„æº</li>
<li>ä¸€ä¸ªçº¿ç¨‹å·²ç»è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«å¼ºè¡Œå‰¥å¤º</li>
<li>è‹¥å¹²çº¿ç¨‹å½¢æˆå¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»</li>
</ol>
</li>
<li>è¿™æ˜¯é€ æˆæ­»é”å¿…é¡»è¦è¾¾åˆ°çš„4ä¸ªæ¡ä»¶ï¼Œå¦‚æœè¦é¿å…æ­»é”ï¼Œåªéœ€ä¸æ»¡è¶³å…¶ä¸­æŸä¸€ä¸ªå³å¯ï¼Œè€Œå…¶ä¸­å‰3ä¸ªæ˜¯ä½œä¸ºé”è¦ç¬¦åˆçš„æ¡ä»¶ï¼Œæ‰€ä»¥è¦é¿å…æ­»é”å°±è¦æ‰“ç ´ç¬¬4ä¸ªæ¡ä»¶ï¼Œä¸å‡ºç°å¾ªç¯ç­‰å¾…é”çš„å…³ç³»ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­:<ol>
<li>è¦æ³¨æ„åŠ é”é¡ºåºï¼Œä¿è¯æ¯ä¸ªçº¿ç¨‹æŒ‰åŒæ ·çš„é¡ºåºè¿›è¡ŒåŠ é”ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashå€¼çš„å¤§å°æ¥ç¡®å®šåŠ é”çš„å…ˆå</li>
<li>å°½å¯èƒ½ç¼©å‡åŠ é”çš„èŒƒå›´ï¼Œç­‰åˆ°æ“ä½œå…±äº«å˜é‡çš„æ—¶å€™æ‰åŠ é”ã€‚</li>
<li>è¦æ³¨æ„åŠ é”æ—¶é™ï¼Œå¯ä»¥é’ˆå¯¹æ‰€è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´</li>
<li>è¦æ³¨æ„æ­»é“æ£€æŸ¥ï¼Œè¿™æ˜¯ä¸€ç§é¢„é˜²æœºåˆ¶ï¼Œç¡®ä¿åœ¨ç¬¬ä¸€æ—¶é—´å‘ç°æ­»é”å¹¶è¿›è¡Œè§£å†³</li>
</ol>
</li>
<li>æ­»é”è¯Šæ–­ï¼š<ul>
<li>å½“ç¨‹åºå‡ºç°äº†æ­»é”ç°è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨jdkè‡ªå¸¦çš„å·¥å…·:jpså’Œjstack</li>
<li>jps:è¾“å‡ºJVMä¸­è¿è¡Œçš„è¿›ç¨‹çŠ¶æ€ä¿¡æ¯</li>
<li>jstack:æŸ¥çœ‹javaè¿›ç¨‹å†…çº¿ç¨‹çš„å †æ ˆä¿¡æ¯ï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼Œæ£€æŸ¥æ­»é”ï¼›å¦‚æœæœ‰æ­»é”ç°è±¡ï¼Œéœ€è¦æŸ¥çœ‹å…·ä½“ä»£ç åˆ†æåä¿®å¤</li>
<li>å¯è§†åŒ–å·¥å…·jconsoleã€VisualVMä¹Ÿå¯ä»¥æ£€æŸ¥æ­»é”é—®é¢˜</li>
</ul>
</li>
</ul>
</li>
<li><p>å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ã€ã€</p>
<ol>
<li>å¤šçº¿ç¨‹ï¼šæ˜¯æŒ‡åœ¨åŒä¸€è¿›ç¨‹å†…éƒ¨åŒæ—¶æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œå…±äº«åŒä¸€ä»½å†…å­˜ç©ºé—´ï¼Œå¯ä»¥è®¿é—®å…±äº«å˜é‡ï¼Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡å’ŒåŒæ­¥ç›¸å¯¹æ¯”è¾ƒå®¹æ˜“ã€‚<br>  ä¼˜ç‚¹ï¼šçº¿ç¨‹åˆ‡æ¢å¼€é”€å°ï¼Œå…±äº«å†…å­˜ï¼Œæ•°æ®å…±äº«æ–¹ä¾¿ï¼Œé€‚åˆåœ¨å•æœºä¸Šè¿›è¡Œå¹¶å‘ç¼–ç¨‹ã€‚<br>  ç¼ºç‚¹ï¼šå…±äº«æ•°æ®å®¹æ˜“å¯¼è‡´ç«æ€æ¡ä»¶å’Œæ•°æ®å®‰å…¨é—®é¢˜ï¼Œéœ€è¦é¢å¤–çš„åŒæ­¥æœºåˆ¶æ¥ä¿æŠ¤å…±äº«èµ„æºï¼Œç¼–ç¨‹å’Œè°ƒè¯•å¤æ‚åº¦è¾ƒé«˜ã€‚</li>
<li>å¤šè¿›ç¨‹ï¼šæ˜¯æŒ‡åœ¨æ“ä½œç³»ç»Ÿä¸­åŒæ—¶æ‰§è¡Œå¤šä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œæ•°æ®éš”ç¦»æ€§è¾ƒå¥½ï¼Œéœ€è¦é€šè¿‡è¿›ç¨‹é—´é€šä¿¡æ¥è¿›è¡Œæ•°æ®ä¼ é€’å’Œå…±äº«ã€‚<br>  ä¼˜ç‚¹ï¼šæ•°æ®éš”ç¦»æ€§å¥½ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ï¼Œé€‚åˆåœ¨å¤šæœºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹è¿›è¡Œå¹¶å‘ç¼–ç¨‹ã€‚<br>  ç¼ºç‚¹ï¼šè¿›ç¨‹åˆ‡æ¢å¼€é”€å¤§ï¼Œéœ€è¦é¢å¤–çš„é€šä¿¡æœºåˆ¶æ¥ä¼ é€’æ•°æ®ï¼Œèµ„æºæ¶ˆè€—è¾ƒå¤§ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼š<br>  å¤šçº¿ç¨‹é€‚åˆåœ¨å•æœºä¸Šè¿›è¡Œå¹¶å‘ç¼–ç¨‹ï¼Œä¾‹å¦‚åœ¨è®¡ç®—å¯†é›†å‹ä»»åŠ¡æˆ–è€…I&#x2F;Oå¯†é›†å‹ä»»åŠ¡ä¸­å¯ä»¥åˆ©ç”¨å¤šçº¿ç¨‹æé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚<br>  å¤šè¿›ç¨‹é€‚åˆåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹è¿›è¡Œå¹¶å‘ç¼–ç¨‹ï¼Œä¾‹å¦‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¯ä»¥é€šè¿‡å¤šè¿›ç¨‹æ¥å®ç°ä»»åŠ¡çš„åˆ†å¸ƒå¼è®¡ç®—å’Œæ•°æ®å¤„ç†ã€‚</li>
</ol>
</li>
</ul>
<hr>

<h2 id="Java-IO"><a href="#Java-IO" class="headerlink" title="Java IO"></a>Java IO</h2><ul>
<li><p>Java ä¸­ IO æµåˆ†ä¸ºå‡ ç§?</p>
<ul>
<li>1ã€æŒ‰ç…§æµçš„æµå‘åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµï¼›</li>
<li>2ã€æŒ‰ç…§æ“ä½œå•å…ƒåˆ’åˆ†ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµï¼›</li>
<li>3ã€æŒ‰ç…§æµçš„è§’è‰²åˆ’åˆ†ä¸ºèŠ‚ç‚¹æµå’Œå¤„ç†æµã€‚</li>
<li>Java Io æµå…±æ¶‰åŠ 40 å¤šä¸ªç±»ï¼Œè¿™äº›ç±»çœ‹ä¸Šå»å¾ˆæ‚ä¹±ï¼Œä½†å®é™…ä¸Šå¾ˆæœ‰è§„åˆ™ï¼Œè€Œä¸”å½¼æ­¤ä¹‹é—´å­˜åœ¨éå¸¸ç´§å¯†çš„è”ç³»ï¼Œéƒ½æ˜¯ä»å¦‚ä¸‹ 4 ä¸ªæŠ½è±¡ç±»åŸºç±»ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ã€‚<br>  InputStream &#x2F; Reader: æ‰€æœ‰çš„è¾“å…¥æµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å…¥æµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å…¥æµã€‚<br>  OutputStream &#x2F; Writer: æ‰€æœ‰è¾“å‡ºæµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å‡ºæµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å‡ºæµã€‚</li>
<li>å­—èŠ‚æµä¸å­—ç¬¦æµçš„åŒºåˆ«<br>  ä»¥å­—èŠ‚ä¸ºå•ä½è¾“å…¥è¾“å‡ºæ•°æ®ï¼Œå­—èŠ‚æµæŒ‰ç…§8ä½ä¼ è¾“<br>  ä»¥å­—ç¬¦ä¸ºå•ä½è¾“å…¥è¾“å‡ºæ•°æ®ï¼Œå­—ç¬¦æµæŒ‰ç…§16ä½ä¼ è¾“</li>
</ul>
</li>
<li><p>å¸¸ç”¨ioç±»æœ‰é‚£äº›<br>File<br>FileInputSteamï¼ŒFileOutputStream<br>BufferInputStreamï¼ŒBufferedOutputSream<br>PrintWrite<br>FileReaderï¼ŒFileWriter<br>BufferReaderï¼ŒBufferedWriter<br>ObjectInputStreamï¼ŒObjectOutputSream<br>åœ¨æ‰€åˆ—çš„ Java I&#x2F;O ç±»ä¸­ï¼Œå¤„ç†æµé€šå¸¸æ˜¯æŒ‡å¯¹å·²æœ‰çš„æµè¿›è¡Œå°è£…ï¼Œä»¥æä¾›é¢å¤–çš„åŠŸèƒ½æˆ–æ€§èƒ½æ”¹è¿›ã€‚ä»¥ä¸‹æ˜¯å¤„ç†æµçš„ç±»ï¼š</p>
</li>
<li><p>å¤„ç†æµæœ‰å“ªäº›ï¼Ÿ</p>
<ol>
<li>FileInputStreamï¼ŒFileOutputStreamï¼šè¿™ä¸¤ä¸ªç±»æ˜¯å­—èŠ‚æµï¼Œä½†å®ƒä»¬å¸¸å¸¸ä¸å…¶ä»–å¤„ç†æµä¸€èµ·ä½¿ç”¨ï¼Œå¦‚ <code>BufferedInputStream</code> å’Œ <code>BufferedOutputStream</code>ï¼Œä»¥æä¾›ç¼“å†²åŠŸèƒ½ï¼Œæé«˜è¯»å†™æ€§èƒ½ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;example.txt&quot;</span>);</span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(fis);</span><br></pre></td></tr></table></figure></li>
<li>BufferedInputStreamï¼ŒBufferedOutputStreamï¼šæä¾›äº†ç¼“å†²åŒºåŠŸèƒ½ï¼Œå¯ä»¥å‡å°‘å¯¹åº•å±‚æµçš„ç›´æ¥è¯»å†™æ¬¡æ•°ï¼Œæé«˜æ•ˆç‡ã€‚</li>
<li>FileReaderï¼ŒFileWriterï¼šè¿™ä¸¤ä¸ªç±»æ˜¯å­—ç¬¦æµï¼Œä½†å®ƒä»¬ä¹Ÿå¯ä»¥å’Œ <code>BufferedReader</code> å’Œ <code>BufferedWriter</code> ä¸€èµ·ä½¿ç”¨ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;example.txt&quot;</span>);</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(fr);</span><br></pre></td></tr></table></figure></li>
<li>BufferedReaderï¼ŒBufferedWriterï¼šæä¾›äº†ç¼“å†²åŒºåŠŸèƒ½ï¼Œå¯ä»¥å‡å°‘å¯¹åº•å±‚å­—ç¬¦æµçš„ç›´æ¥è¯»å†™æ¬¡æ•°ï¼Œæé«˜æ•ˆç‡ã€‚</li>
<li>ObjectInputStreamï¼ŒObjectOutputStreamï¼šè¿™ä¸¤ä¸ªç±»ç”¨äºåºåˆ—åŒ–å’Œååºåˆ—åŒ–å¯¹è±¡ã€‚å®ƒä»¬å¯ä»¥ä¸å…¶ä»–æµä¸€èµ·ä½¿ç”¨ï¼Œå¦‚ <code>BufferedInputStream</code> å’Œ <code>BufferedOutputStream</code>ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;object.dat&quot;</span>);</span><br><span class="line"><span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(fos);</span><br></pre></td></tr></table></figure>
  å¤„ç†æµé€šå¸¸ç”¨äºæä¾›ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚ç¼“å†²ã€å¯¹è±¡åºåˆ—åŒ–ç­‰ã€‚å…¶ä»–ç±»ï¼ˆFileã€PrintWriterï¼‰ä¸æ˜¯å¤„ç†æµï¼Œè€Œæ˜¯ç”¨äºæ–‡ä»¶æˆ–æ–‡æœ¬è¾“å‡ºçš„ç±»ã€‚</li>
</ol>
</li>
<li><p>æ“ä½œç³»ç»Ÿçš„IO</p>
<ul>
<li>æˆ‘ä»¬è¦å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥åˆ°ç£ç›˜çš„è¯ï¼Œä¸»ä½“å¯èƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ä¸€ä¸ªJavaè¿›ç¨‹(å‡è®¾ç½‘ç»œä¼ æ¥äºŒè¿›åˆ¶æµï¼Œä¸€ä¸ªJavaè¿›ç¨‹å¯ä»¥æŠŠå®ƒå†™å…¥åˆ°ç£ç›˜)ã€‚<br>  åº”ç”¨ç¨‹åºæ˜¯è·‘åœ¨ç”¨æˆ·ç©ºé—´çš„ï¼Œå®ƒä¸å­˜åœ¨å®è´¨çš„IOè¿‡ç¨‹ï¼ŒçœŸæ­£çš„IOæ˜¯åœ¨æ“ä½œç³»ç»Ÿæ‰§è¡Œçš„ã€‚å³åº”ç”¨ç¨‹åºçš„IOæ“ä½œåˆ†ä¸ºä¸¤ç§åŠ¨ä½œ:IOè°ƒç”¨å’ŒIOæ‰§è¡Œã€‚IOè°ƒç”¨æ˜¯ç”±è¿›ç¨‹(åº”ç”¨ç¨‹åºçš„è¿è¡Œæ€)å‘èµ·ï¼Œè€ŒIOæ‰§è¡Œæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸çš„å·¥ä½œã€‚æ­¤æ—¶æ‰€è¯´çš„IOæ˜¯åº”ç”¨ç¨‹åºå¯¹æ“ä½œç³»ç»ŸIOåŠŸèƒ½çš„ä¸€æ¬¡è§¦å‘ï¼Œå³IOè°ƒç”¨ã€‚</li>
<li>æ“ä½œç³»ç»Ÿè´Ÿè´£è®¡ç®—æœºçš„èµ„æºç®¡ç†å’Œè¿›ç¨‹çš„è°ƒåº¦ã€‚æˆ‘ä»¬ç”µè„‘ä¸Šè·‘ç€çš„åº”ç”¨ç¨‹åºï¼Œå…¶å®æ˜¯éœ€è¦ç»è¿‡æ“ä½œç³»ç»Ÿï¼Œæ‰èƒ½åšä¸€äº›ç‰¹æ®Šæ“ä½œï¼Œå¦‚ç£ç›˜æ–‡ä»¶è¯»å†™ã€å†…å­˜çš„è¯»å†™ç­‰ç­‰ã€‚å› ä¸ºè¿™äº›éƒ½æ˜¯æ¯”è¾ƒå±é™©çš„æ“ä½œï¼Œä¸å¯ä»¥ç”±åº”ç”¨ç¨‹åºä¹±æ¥ï¼Œåªèƒ½äº¤ç»™åº•å±‚æ“ä½œç³»ç»Ÿæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ çš„åº”ç”¨ç¨‹åºè¦æŠŠæ•°æ®å†™å…¥ç£ç›˜ï¼Œåªèƒ½é€šè¿‡è°ƒç”¨æ“ä½œç³»ç»Ÿå¼€æ”¾å‡ºæ¥çš„APIæ¥æ“ä½œã€‚</li>
<li>ä¸€ä¸ªå®Œæ•´çš„IOè¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:<br>  åº”ç”¨ç¨‹åºè¿›ç¨‹å‘æ“ä½œç³»ç»Ÿå‘èµ·I0è°ƒç”¨è¯·æ±‚<br>  æ“ä½œç³»ç»Ÿå‡†å¤‡æ•°æ®ï¼ŒæŠŠI0å¤–éƒ¨è®¾å¤‡çš„æ•°æ®ï¼ŒåŠ è½½åˆ°å†…æ ¸ç¼“å†²åŒº<br>  æ“ä½œç³»ç»Ÿæ‹·è´æ•°æ®ï¼Œå³å°†å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®ï¼Œæ‹·è´åˆ°ç”¨æˆ·è¿›ç¨‹ç¼“å†²åŒº</li>
<li>é˜»å¡åˆ†ç±»ï¼š<br>  åŒæ­¥é˜»å¡(blocking-I0)ç®€ç§°BIO<br>  åŒæ­¥éé˜»å¡(non-blocking-10)ç®€ç§°NIO<br>  å¼‚æ­¥éé˜»å¡(asynchronous-non-blocking-10)ç®€ç§°AI0</li>
</ul>
</li>
<li><p>äº”å¤§é˜»å¡æ¨¡å‹ï¼š é˜»å¡ IO æ¨¡å‹ã€éé˜»å¡ IO æ¨¡å‹ã€å¤šè·¯å¤ç”¨ IO æ¨¡å‹ã€ä¿¡å·é©±åŠ¨ IO æ¨¡å‹ã€å¼‚æ­¥ IO æ¨¡å‹  </p>
<ul>
<li>é˜»å¡ IO æ¨¡å‹ï¼ˆå¦‚socketã€Java BIOï¼‰<br>  æœ€ä¼ ç»Ÿçš„ä¸€ç§ IO æ¨¡å‹ï¼Œå³åœ¨è¯»å†™æ•°æ®è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿé˜»å¡ç°è±¡ã€‚å½“ç”¨æˆ·çº¿ç¨‹å‘å‡º IO è¯·æ±‚ä¹‹åï¼Œå†…æ ¸ä¼šå»æŸ¥çœ‹æ•°æ®æ˜¯å¦å°±ç»ªï¼Œå¦‚æœæ²¡æœ‰å°±ç»ªå°±ä¼šç­‰å¾…æ•°æ®å°±ç»ªï¼Œè€Œç”¨æˆ·çº¿ç¨‹å°±ä¼šå¤„äºé˜»å¡çŠ¶æ€ï¼Œç”¨æˆ·çº¿ç¨‹äº¤å‡º CPUã€‚å½“æ•°æ®å°±ç»ªä¹‹åï¼Œå†…æ ¸ä¼šå°†æ•°æ®æ‹·è´åˆ°ç”¨æˆ·çº¿ç¨‹ï¼Œå¹¶è¿”å›ç»“æœç»™ç”¨æˆ·çº¿ç¨‹ï¼Œç”¨æˆ·çº¿ç¨‹æ‰è§£é™¤ block çŠ¶æ€ã€‚<br>  å…¸å‹çš„é˜»å¡ IO æ¨¡å‹çš„ä¾‹å­ä¸ºï¼š data &#x3D; socket.read(); å¦‚æœæ•°æ®æ²¡æœ‰å°±ç»ªï¼Œå°±ä¼šä¸€ç›´é˜»å¡åœ¨ read æ–¹æ³• </li>
<li>éé˜»å¡ IO æ¨¡å‹<ul>
<li>å½“ç”¨æˆ·çº¿ç¨‹å‘èµ·ä¸€ä¸ª read æ“ä½œåï¼Œå¹¶ä¸éœ€è¦ç­‰å¾…ï¼Œè€Œæ˜¯é©¬ä¸Šå°±å¾—åˆ°äº†ä¸€ä¸ªç»“æœã€‚ å¦‚æœç»“æœæ˜¯ä¸€ä¸ª error æ—¶ï¼Œå®ƒå°±çŸ¥é“æ•°æ®è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œäºæ˜¯å®ƒå¯ä»¥å†æ¬¡å‘é€ read æ“ä½œã€‚ä¸€æ—¦å†…æ ¸ä¸­çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œå¹¶ä¸”åˆå†æ¬¡æ”¶åˆ°äº†ç”¨æˆ·çº¿ç¨‹çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒé©¬ä¸Šå°±å°†æ•°æ®æ‹·è´åˆ°äº†ç”¨æˆ·çº¿ç¨‹ï¼Œç„¶åè¿”å›ã€‚<br>  æ‰€ä»¥äº‹å®ä¸Šï¼Œåœ¨éé˜»å¡ IO æ¨¡å‹ä¸­ï¼Œç”¨æˆ·çº¿ç¨‹éœ€è¦ä¸æ–­åœ°è¯¢é—®å†…æ ¸æ•°æ®æ˜¯å¦å°±ç»ªï¼Œä¹Ÿå°±è¯´éé˜»å¡ IOä¸ä¼šäº¤å‡º CPUï¼Œè€Œä¼šä¸€ç›´å ç”¨ CPUã€‚ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é—®é¢˜ï¼Œ åœ¨ while å¾ªç¯ä¸­éœ€è¦ä¸æ–­åœ°å»è¯¢é—®å†…æ ¸æ•°æ®æ˜¯å¦å°±ç»ªï¼Œè¿™æ ·ä¼šå¯¼è‡´ CPU å ç”¨ç‡éå¸¸é«˜ï¼Œå› æ­¤ä¸€èˆ¬æƒ…å†µä¸‹å¾ˆå°‘ä½¿ç”¨ while å¾ªç¯è¿™ç§æ–¹å¼æ¥è¯»å–æ•°æ®ã€‚     </li>
<li>å…¸å‹çš„éé˜»å¡ IO æ¨¡å‹ä¸€èˆ¬å¦‚ä¸‹ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">    data = socket.read();</span><br><span class="line">    <span class="keyword">if</span>(data!= error)&#123;</span><br><span class="line">        <span class="comment">//å¤„ç†æ•°æ®break;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>å¤šè·¯å¤ç”¨ I&#x2F;O æ¨¡å‹</strong><ul>
<li>å¤šè·¯å¤ç”¨ IO æ¨¡å‹æ˜¯ç›®å‰ä½¿ç”¨å¾—æ¯”è¾ƒå¤šçš„æ¨¡å‹ã€‚  Java NIO å®é™…ä¸Šå°±æ˜¯å¤šè·¯å¤ç”¨ IOã€‚</li>
<li>IOå¤ç”¨æ¨¡å‹æ ¸å¿ƒæ€è·¯ï¼šç³»ç»Ÿç»™æˆ‘ä»¬æä¾›ä¸€ç±»å‡½æ•°(å¦‚æˆ‘ä»¬è€³æ¿¡ç›®æŸ“çš„selectã€pollã€epollå‡½æ•°)ï¼Œå®ƒä»¬å¯ä»¥åŒæ—¶ç›‘æ§å¤šä¸ª fdï¼ˆæ–‡ä»¶æ ‡è¯†ç¬¦ï¼‰çš„æ“ä½œï¼Œä»»ä½•ä¸€ä¸ªè¿”å›å†…æ ¸æ•°æ®å°±ç»ªï¼Œåº”ç”¨è¿›ç¨‹å†å‘èµ· recvfrom ç³»ç»Ÿè°ƒç”¨ã€‚</li>
<li>åœ¨å¤šè·¯å¤ç”¨ IOæ¨¡å‹ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹ä¸æ–­å»è½®è¯¢å¤šä¸ª socket çš„çŠ¶æ€ï¼Œåªæœ‰å½“ socket çœŸæ­£æœ‰è¯»å†™äº‹ä»¶æ—¶ï¼Œæ‰çœŸæ­£è°ƒç”¨å®é™…çš„ IO è¯»å†™æ“ä½œã€‚å› ä¸ºåœ¨å¤šè·¯å¤ç”¨ IO æ¨¡å‹ä¸­ï¼Œåªéœ€è¦ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥ç®¡ç†å¤šä¸ªsocketï¼Œç³»ç»Ÿä¸éœ€è¦å»ºç«‹æ–°çš„è¿›ç¨‹æˆ–è€…çº¿ç¨‹ï¼Œä¹Ÿä¸å¿…ç»´æŠ¤è¿™äº›çº¿ç¨‹å’Œè¿›ç¨‹ï¼Œå¹¶ä¸”åªæœ‰åœ¨çœŸæ­£æœ‰socket è¯»å†™äº‹ä»¶è¿›è¡Œæ—¶ï¼Œæ‰ä¼šä½¿ç”¨IO èµ„æºï¼Œæ‰€ä»¥å®ƒå¤§å¤§å‡å°‘äº†èµ„æºå ç”¨ã€‚<br>  IO ä¸ºä½•æ¯”éé˜»å¡ IO æ¨¡å‹çš„æ•ˆç‡é«˜ï¼Ÿæ˜¯å› ä¸ºåœ¨éé˜»å¡ IO ä¸­ï¼Œä¸æ–­åœ°è¯¢é—® socket çŠ¶æ€æ—¶é€šè¿‡ç”¨æˆ·çº¿ç¨‹å»è¿›è¡Œçš„ï¼Œè€Œåœ¨å¤šè·¯å¤ç”¨IO ä¸­ï¼Œè½®è¯¢æ¯ä¸ª socket çŠ¶æ€æ˜¯å†…æ ¸åœ¨è¿›è¡Œçš„ï¼Œè¿™ä¸ªæ•ˆç‡è¦æ¯”ç”¨æˆ·çº¿ç¨‹è¦é«˜çš„å¤šã€‚ </li>
<li>ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œå¤šè·¯å¤ç”¨ IO æ¨¡å‹æ˜¯é€šè¿‡è½®è¯¢çš„æ–¹å¼æ¥æ£€æµ‹æ˜¯å¦æœ‰äº‹ä»¶åˆ°è¾¾ï¼Œå¹¶ä¸”å¯¹åˆ°è¾¾çš„äº‹ä»¶é€ä¸€è¿›è¡Œå“åº”ã€‚å› æ­¤å¯¹äºå¤šè·¯å¤ç”¨ IO æ¨¡å‹ï¼Œ ä¸€æ—¦äº‹ä»¶å“åº”ä½“å¾ˆå¤§ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´åç»­çš„äº‹ä»¶è¿Ÿè¿Ÿå¾—ä¸åˆ°å¤„ç†ï¼Œå¹¶ä¸”ä¼šå½±å“æ–°çš„äº‹ä»¶è½®è¯¢ã€‚   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fds = wait_files(&#123;fd1, fd2, .. fdn&#125;, ..);  <span class="comment">// å†…æ ¸è½®è¯¢å¤šä¸ªæ–‡ä»¶æ ‡è¯†ç¬¦ï¼Œè¯»å†™å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">for</span> (fd : fds) &#123;</span><br><span class="line">    read(fd, buf);</span><br><span class="line">    do_something(buf);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>ä¿¡å·é©±åŠ¨ IO æ¨¡å‹<br>  å½“ç”¨æˆ·çº¿ç¨‹å‘èµ·ä¸€ä¸ª IO è¯·æ±‚æ“ä½œï¼Œä¼šç»™å¯¹åº”çš„ socket æ³¨å†Œä¸€ä¸ªä¿¡å·å‡½æ•°ï¼Œç„¶åç”¨æˆ·çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œï¼Œå½“å†…æ ¸æ•°æ®å°±ç»ªæ—¶ä¼šå‘é€ä¸€ä¸ªä¿¡å·ç»™ç”¨æˆ·çº¿ç¨‹ï¼Œç”¨æˆ·çº¿ç¨‹æ¥æ”¶åˆ°ä¿¡å·ä¹‹åï¼Œä¾¿åœ¨ä¿¡å·å‡½æ•°ä¸­è°ƒç”¨ IO è¯»å†™æ“ä½œæ¥è¿›è¡Œå®é™…çš„ IO è¯·æ±‚æ“ä½œã€‚</li>
<li>å¼‚æ­¥ IO æ¨¡å‹<br>  å¼‚æ­¥ IO æ¨¡å‹æ‰æ˜¯æœ€ç†æƒ³çš„ IO æ¨¡å‹ï¼Œåœ¨å¼‚æ­¥ IO æ¨¡å‹ä¸­ï¼Œå½“ç”¨æˆ·çº¿ç¨‹å‘èµ· read æ“ä½œä¹‹åï¼Œç«‹åˆ»å°±å¯ä»¥å¼€å§‹å»åšå…¶å®ƒçš„äº‹ã€‚è€Œå¦ä¸€æ–¹é¢ï¼Œä»å†…æ ¸çš„è§’åº¦ï¼Œå½“å®ƒå—åˆ°ä¸€ä¸ª asynchronous read ä¹‹åï¼Œå®ƒä¼šç«‹åˆ»è¿”å›ï¼Œè¯´æ˜ read è¯·æ±‚å·²ç»æˆåŠŸå‘èµ·äº†ï¼Œå› æ­¤ä¸ä¼šå¯¹ç”¨æˆ·çº¿ç¨‹äº§ç”Ÿä»»ä½•blockã€‚ç„¶åï¼Œå†…æ ¸ä¼šç­‰å¾…æ•°æ®å‡†å¤‡å®Œæˆï¼Œç„¶åå°†æ•°æ®æ‹·è´åˆ°ç”¨æˆ·çº¿ç¨‹ï¼Œå½“è¿™ä¸€åˆ‡éƒ½å®Œæˆä¹‹åï¼Œå†…æ ¸ä¼šç»™ç”¨æˆ·çº¿ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œå‘Šè¯‰å®ƒread æ“ä½œå®Œæˆäº†ã€‚ä¹Ÿå°±è¯´ç”¨æˆ·çº¿ç¨‹å®Œå…¨ä¸éœ€è¦å®é™…çš„æ•´ä¸ª IO æ“ä½œæ˜¯å¦‚ä½•è¿›è¡Œçš„ï¼Œ åªéœ€è¦å…ˆå‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œå½“æ¥æ”¶å†…æ ¸è¿”å›çš„æˆåŠŸä¿¡å·æ—¶è¡¨ç¤º IO æ“ä½œå·²ç»å®Œæˆï¼Œå¯ä»¥ç›´æ¥å»ä½¿ç”¨æ•°æ®äº†ã€‚<br>  ä¹Ÿå°±è¯´åœ¨å¼‚æ­¥ IO æ¨¡å‹ä¸­ï¼Œ IO æ“ä½œçš„ä¸¤ä¸ªé˜¶æ®µéƒ½ä¸ä¼šé˜»å¡ç”¨æˆ·çº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªé˜¶æ®µéƒ½æ˜¯ç”±å†…æ ¸è‡ªåŠ¨å®Œæˆï¼Œç„¶åå‘é€ä¸€ä¸ªä¿¡å·å‘ŠçŸ¥ç”¨æˆ·çº¿ç¨‹æ“ä½œå·²å®Œæˆã€‚ç”¨æˆ·çº¿ç¨‹ä¸­ä¸éœ€è¦å†æ¬¡è°ƒç”¨ IO å‡½æ•°è¿›è¡Œå…·ä½“çš„è¯»å†™ã€‚è¿™ç‚¹æ˜¯å’Œä¿¡å·é©±åŠ¨æ¨¡å‹æœ‰æ‰€ä¸åŒçš„ï¼Œåœ¨ä¿¡å·é©±åŠ¨æ¨¡å‹ä¸­ï¼Œå½“ç”¨æˆ·çº¿ç¨‹æ¥æ”¶åˆ°ä¿¡å·è¡¨ç¤ºæ•°æ®å·²ç»å°±ç»ªï¼Œç„¶åéœ€è¦ç”¨æˆ·çº¿ç¨‹è°ƒç”¨ IO å‡½æ•°è¿›è¡Œå®é™…çš„è¯»å†™æ“ä½œï¼›è€Œåœ¨å¼‚æ­¥ IO æ¨¡å‹ä¸­ï¼Œæ”¶åˆ°ä¿¡å·è¡¨ç¤º IO æ“ä½œå·²ç»å®Œæˆï¼Œä¸éœ€è¦å†åœ¨ç”¨æˆ·çº¿ç¨‹ä¸­è°ƒç”¨ IO å‡½æ•°è¿›è¡Œå®é™…çš„è¯»å†™æ“ä½œã€‚ æ³¨æ„ï¼Œå¼‚æ­¥ IO æ˜¯éœ€è¦æ“ä½œç³»ç»Ÿçš„åº•å±‚æ”¯æŒï¼Œåœ¨  Java 7 ä¸­ï¼Œæä¾›äº† Asynchronous IOã€‚</li>
</ul>
</li>
<li><p>I&#x2F;Oå¤ç”¨æ¨¡å‹çš„selectã€pollã€epollå‡½æ•°</p>
<ol>
<li>selectï¼šUnix&#x2F;Linux ç³»ç»Ÿä¸­æœ€æ—©çš„ I&#x2F;O å¤ç”¨å‡½æ•°ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦é›†åˆæ¥ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€å˜åŒ–ã€‚<ul>
<li>ä½¿ç”¨ <code>fd_set</code> ç»“æ„æ¥è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œé€šè¿‡ FD_ZEROã€FD_SETã€FD_CLR ç­‰å®æ¥å¯¹æ–‡ä»¶æè¿°ç¬¦é›†åˆè¿›è¡Œæ“ä½œã€‚</li>
<li><code>select</code> å‡½æ•°ä¼šé˜»å¡ï¼Œç›´åˆ°é›†åˆä¸­ä»»æ„ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å‡†å¤‡å°±ç»ªæˆ–è¶…æ—¶ã€‚<strong>è½®è¯¢ã€ã€éå†æ–‡ä»¶æè¿°ç¬¦</strong></li>
<li>ç¼ºç‚¹æ˜¯æ”¯æŒçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æœ‰é™ï¼ˆä¸€èˆ¬ä¸º 1024ï¼‰ï¼Œä¸”æ•ˆç‡è¾ƒä½ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦å°†æ•´ä¸ªæ–‡ä»¶æè¿°ç¬¦é›†åˆä»ç”¨æˆ·ç©ºé—´æ‹·è´åˆ°å†…æ ¸ç©ºé—´ã€‚</li>
</ul>
</li>
<li>pollï¼šå¯¹ <code>select</code> å‡½æ•°çš„æ”¹è¿›ï¼ŒåŒæ ·æ˜¯é€šè¿‡ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦é›†åˆæ¥ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€å˜åŒ–ã€‚<ul>
<li>ä½¿ç”¨ <code>struct pollfd</code> ç»“æ„æ¥è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œé€šè¿‡ <code>poll</code> å‡½æ•°è¿›è¡Œç›‘è§†ã€‚</li>
<li><code>poll</code> å‡½æ•°ä¼šé˜»å¡ï¼Œç›´åˆ°é›†åˆä¸­ä»»æ„ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å‡†å¤‡å°±ç»ªæˆ–è¶…æ—¶ã€‚</li>
<li>ç¼ºç‚¹æ˜¯åŒæ ·å­˜åœ¨æ–‡ä»¶æè¿°ç¬¦æ•°é‡æœ‰é™çš„é—®é¢˜ï¼Œä¸”æ•ˆç‡ç›¸å¯¹äº <code>select</code> æå‡ä¸å¤§ã€‚</li>
</ul>
</li>
<li><strong>epoll</strong>ï¼šLinux ç‰¹æœ‰çš„ I&#x2F;O å¤ç”¨å‡½æ•°ï¼Œæ˜¯å¯¹ select å’Œ poll çš„æ”¹è¿›ï¼Œæ•ˆç‡æ›´é«˜ã€‚<ul>
<li>ä½¿ç”¨ <code>epoll_create</code> åˆ›å»ºä¸€ä¸ª epoll å®ä¾‹ï¼Œå¹¶ä½¿ç”¨ <code>epoll_ctl</code> æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤è¦ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</li>
<li><code>epoll_wait</code> å‡½æ•°ç”¨äºç­‰å¾…æ–‡ä»¶æè¿°ç¬¦é›†åˆä¸­ä»»æ„ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å‡†å¤‡å°±ç»ªæˆ–è¶…æ—¶ã€‚<strong>äº‹ä»¶é©±åŠ¨ã€ã€ç›‘å¬äº‹ä»¶å›è°ƒæœºåˆ¶ï¼šæŸä¸ªfdå°±ç»ªåï¼Œå†…æ ¸å›è°ƒæ¿€æ´»</strong></li>
<li>epoll æ”¯æŒæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘ä¸¤ç§æ¨¡å¼ï¼Œè¾¹ç¼˜è§¦å‘æ¨¡å¼åªåœ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥ç¨‹åºã€‚</li>
<li>epoll çš„ä¼˜åŠ¿åœ¨äºå®ƒå¯ä»¥ç›‘è§†å¤§é‡çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆæœ€å¤§æ•°é‡å—ç³»ç»Ÿé™åˆ¶ï¼‰ï¼Œå¹¶ä¸”ä¸éœ€è¦æ¯æ¬¡è°ƒç”¨éƒ½å°†æ–‡ä»¶æè¿°ç¬¦é›†åˆæ‹·è´åˆ°å†…æ ¸ç©ºé—´ï¼Œå› æ­¤æ•ˆç‡æ›´é«˜ã€‚</li>
</ul>
</li>
</ol>
</li>
<li><p>Java çš„ NIOï¼Ÿ </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv22750549/?spm_id_from=333.999.0.0&jump_opus=1">https://www.bilibili.com/read/cv22750549/?spm_id_from=333.999.0.0&amp;jump_opus=1</a><br>  Java NIO æ˜¯JDK 1.4 å¼€å§‹æœ‰çš„ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜é€Ÿåº¦ã€‚ä¼ ç»ŸIOæ˜¯ä¸€æ¬¡ä¸€ä¸ªå­—èŠ‚åœ°å¤„ç†æ•°æ®ï¼ŒNIOæ˜¯ä»¥å—ï¼ˆç¼“å†²åŒºï¼‰çš„å½¢å¼å¤„ç†æ•°æ®ï¼Œæ‰€ä»¥NIOçš„æ•ˆç‡è¦æ¯”IOé«˜å¾ˆå¤šã€‚æœ€ä¸»è¦çš„æ˜¯ï¼ŒNIOå¯ä»¥å®ç°éé˜»å¡ï¼Œè€Œä¼ ç»ŸIOåªèƒ½æ˜¯é˜»å¡çš„ã€‚IOçš„å®é™…åœºæ™¯æ˜¯æ–‡ä»¶IOå’Œç½‘ç»œIOï¼ŒNIOåœ¨ç½‘ç»œIOåœºæ™¯ä¸‹æå‡å°±å°¤å…¶æ˜æ˜¾äº†ã€‚<br>  åœ¨Java APIä¸­æä¾›äº†ä¸¤å¥—NIOï¼Œä¸€å¥—æ˜¯é’ˆå¯¹æ ‡å‡†è¾“å…¥è¾“å‡ºNIOï¼Œå¦ä¸€å¥—å°±æ˜¯ç½‘ç»œç¼–ç¨‹NIOã€‚</li>
<li>ï¼Ÿï¼Ÿï¼ŸNIO çš„ç¼“å†²åŒº<br>  Java IO é¢å‘æµæ„å‘³ç€æ¯æ¬¡ä»æµä¸­è¯»ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ï¼Œç›´è‡³è¯»å–æ‰€æœ‰å­—èŠ‚ï¼Œå®ƒä»¬æ²¡æœ‰è¢«ç¼“å­˜åœ¨ä»»ä½•åœ°æ–¹ã€‚æ­¤å¤–ï¼Œå®ƒä¸èƒ½å‰åç§»åŠ¨æµä¸­çš„æ•°æ®ã€‚å¦‚æœéœ€è¦å‰åç§»åŠ¨ä»æµä¸­è¯»å–çš„æ•°æ®ï¼Œ éœ€è¦å…ˆå°†å®ƒç¼“å­˜åˆ°ä¸€ä¸ªç¼“å†²åŒºã€‚ NIO çš„ç¼“å†²å¯¼å‘æ–¹æ³•ä¸åŒã€‚æ•°æ®è¯»å–åˆ°ä¸€ä¸ªå®ƒç¨åå¤„ç†çš„ç¼“å†²åŒºï¼Œéœ€è¦æ—¶å¯åœ¨ç¼“å†²åŒºä¸­å‰åç§»åŠ¨ã€‚è¿™å°±å¢åŠ äº†å¤„ç†è¿‡ç¨‹ä¸­çš„çµæ´»æ€§ã€‚ä½†æ˜¯ï¼Œè¿˜éœ€è¦æ£€æŸ¥æ˜¯å¦è¯¥ç¼“å†²åŒºä¸­åŒ…å«æ‰€æœ‰æ‚¨éœ€è¦å¤„ç†çš„æ•°æ®ã€‚è€Œä¸”ï¼Œéœ€ç¡®ä¿å½“æ›´å¤šçš„æ•°æ®è¯»å…¥ç¼“å†²åŒºæ—¶ï¼Œä¸è¦è¦†ç›–ç¼“å†²åŒºé‡Œå°šæœªå¤„ç†çš„æ•°æ®ã€‚ </li>
<li>???NIO çš„éé˜»å¡<br>  IO çš„å„ç§æµæ˜¯é˜»å¡çš„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ read() æˆ– write()æ—¶ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€äº›æ•°æ®è¢«è¯»å–ï¼Œæˆ–æ•°æ®å®Œå…¨å†™å…¥ã€‚è¯¥çº¿ç¨‹åœ¨æ­¤æœŸé—´ä¸èƒ½å†å¹²ä»»ä½•äº‹æƒ…äº†ã€‚ NIO çš„éé˜»å¡æ¨¡å¼ï¼Œä½¿ä¸€ä¸ªçº¿ç¨‹ä»æŸé€šé“å‘é€è¯·æ±‚è¯»å–æ•°æ®ï¼Œä½†æ˜¯å®ƒä»…èƒ½å¾—åˆ°ç›®å‰å¯ç”¨çš„æ•°æ®ï¼Œå¦‚æœç›®å‰æ²¡æœ‰æ•°æ®å¯ç”¨æ—¶ï¼Œå°±ä»€ä¹ˆéƒ½ä¸ä¼šè·å–ã€‚è€Œä¸æ˜¯ä¿æŒçº¿ç¨‹é˜»å¡ï¼Œæ‰€ä»¥ç›´è‡³æ•°æ®å˜çš„å¯ä»¥è¯»å–ä¹‹å‰ï¼Œè¯¥çº¿ç¨‹å¯ä»¥ç»§ç»­åšå…¶ä»–çš„äº‹æƒ…ã€‚ éé˜»å¡å†™ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚å†™å…¥ä¸€äº›æ•°æ®åˆ°æŸé€šé“ï¼Œä½†ä¸éœ€è¦ç­‰å¾…å®ƒå®Œå…¨å†™å…¥ï¼Œè¿™ä¸ªçº¿ç¨‹åŒæ—¶å¯ä»¥å»åšåˆ«çš„äº‹æƒ…ã€‚ çº¿ç¨‹é€šå¸¸å°†éé˜»å¡ IO çš„ç©ºé—²æ—¶é—´ç”¨äºåœ¨å…¶å®ƒé€šé“ä¸Šæ‰§è¡Œ IO æ“ä½œï¼Œæ‰€ä»¥ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ç°åœ¨å¯ä»¥ç®¡ç†å¤šä¸ªè¾“å…¥å’Œè¾“å‡ºé€šé“ï¼ˆchannelï¼‰ã€‚</li>
</ul>
</li>
<li><p>Channel<br>é¦–å…ˆè¯´ä¸€ä¸‹ Channelï¼Œå›½å†…å¤§å¤šç¿»è¯‘æˆâ€œé€šé“â€ã€‚ Channel å’Œ IO ä¸­çš„ Stream(æµ)æ˜¯å·®ä¸å¤šä¸€ä¸ªç­‰çº§çš„ã€‚<br>åªä¸è¿‡ Stream æ˜¯å•å‘çš„ï¼Œè­¬å¦‚ï¼šInputStream, OutputStreamï¼Œ è€Œ Channel æ˜¯åŒå‘çš„ï¼Œæ—¢å¯ä»¥ç”¨æ¥è¿›è¡Œè¯»æ“ä½œï¼Œåˆå¯ä»¥ç”¨æ¥è¿›è¡Œå†™æ“ä½œã€‚<br>NIO ä¸­çš„ Channel çš„ä¸»è¦å®ç°æœ‰ï¼š1ã€FileChannel 2ã€DatagramChannel 3ã€SocketChannel 4ã€ServerSocketChannelï¼Œåˆ†åˆ«å¯ä»¥å¯¹åº”æ–‡ä»¶ IOã€ UDP å’Œ TCPï¼ˆServer å’Œ Clientï¼‰ã€‚</p>
</li>
<li><p>Buffer<br>Bufferï¼Œç¼“å†²åŒºï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œæ˜¯ä¸€ä¸ªè¿ç»­æ•°ç»„ã€‚ Channel æä¾›ä»æ–‡ä»¶ã€ç½‘ç»œè¯»å–æ•°æ®çš„æ¸ é“ï¼Œä½†æ˜¯è¯»å–æˆ–å†™å…¥çš„æ•°æ®éƒ½å¿…é¡»ç»ç”± Bufferã€‚<br>ä¸‹å›¾æè¿°äº†ä»ä¸€ä¸ªå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œç„¶åæœåŠ¡ç«¯æ¥æ”¶æ•°æ®çš„è¿‡ç¨‹ã€‚å®¢æˆ·ç«¯å‘é€æ•°æ®æ—¶ï¼Œå¿…é¡»å…ˆå°†æ•°æ®å­˜å…¥ Buffer ä¸­ï¼Œç„¶åå°†Buffer ä¸­çš„å†…å®¹å†™å…¥é€šé“ã€‚æœåŠ¡ç«¯è¿™è¾¹æ¥æ”¶æ•°æ®å¿…é¡»é€šè¿‡ Channel å°†æ•°æ®è¯»å…¥åˆ° Buffer ä¸­ï¼Œç„¶åå†ä» Buffer ä¸­å–å‡ºæ•°æ®æ¥å¤„ç†ã€‚åœ¨ NIO ä¸­ï¼Œ Buffer æ˜¯ä¸€ä¸ªé¡¶å±‚çˆ¶ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¸¸ç”¨çš„ Buffer çš„å­ç±»æœ‰ï¼šByteBufferã€ IntBufferã€ CharBufferã€ LongBufferã€DoubleBufferã€ FloatBufferã€ShortBuffer</p>
<img src="https://leo710aka.github.io/bk/job9.png" width="750" height="300" alt="">
</li>
<li><p>???Selector<br>Selector ç±»æ˜¯ NIO çš„æ ¸å¿ƒç±»ï¼Œ Selector èƒ½å¤Ÿæ£€æµ‹å¤šä¸ªæ³¨å†Œçš„é€šé“ä¸Šæ˜¯å¦æœ‰äº‹ä»¶å‘ç”Ÿï¼Œå¦‚æœæœ‰äº‹ä»¶å‘ç”Ÿï¼Œä¾¿è·å–äº‹ä»¶ç„¶åé’ˆå¯¹æ¯ä¸ªäº‹ä»¶è¿›è¡Œç›¸åº”çš„å“åº”å¤„ç†ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªæ˜¯ç”¨ä¸€ä¸ªå•çº¿ç¨‹å°±å¯ä»¥ç®¡ç†å¤šä¸ªé€šé“ï¼Œä¹Ÿå°±æ˜¯ç®¡ç†å¤šä¸ªè¿æ¥ã€‚è¿™æ ·ä½¿å¾—åªæœ‰åœ¨è¿æ¥çœŸæ­£æœ‰è¯»å†™äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ‰ä¼šè°ƒç”¨å‡½æ•°æ¥è¿›è¡Œè¯»å†™ï¼Œå°±å¤§å¤§åœ°å‡å°‘äº†ç³»ç»Ÿå¼€é”€ï¼Œå¹¶ä¸”ä¸å¿…ä¸ºæ¯ä¸ªè¿æ¥éƒ½åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œä¸ç”¨å»ç»´æŠ¤å¤šä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸”é¿å…äº†å¤šçº¿ç¨‹ä¹‹é—´çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¯¼è‡´çš„å¼€é”€ã€‚</p>
</li>
<li><p>ï¼Ÿï¼Ÿï¼Ÿä»‹ç»ä¸€ä¸‹è‡ªå·±å¯¹ Netty çš„è®¤è¯†ã€‚<br>ç¬¬ä¸€ï¼šNetty æ˜¯ä¸€ä¸ª åŸºäº NIO æ¨¡å‹çš„é«˜æ€§èƒ½ç½‘ç»œé€šä¿¡æ¡†æ¶ï¼Œå…¶å®å¯ä»¥è®¤ä¸ºå®ƒæ˜¯å¯¹ NIO ç½‘ç»œæ¨¡å‹çš„å°è£…ï¼Œæä¾›äº†ç®€å•æ˜“ç”¨çš„ APIï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›å°è£…å¥½çš„API å¿«é€Ÿå¼€å‘è‡ªå·±çš„ç½‘ç»œç¨‹åºã€‚<br>ç¬¬äºŒï¼šNetty åœ¨ NIO çš„åŸºç¡€ä¸Šåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œæ¯”å¦‚é›¶æ‹·è´æœºåˆ¶ã€é«˜æ€§èƒ½æ— é”é˜Ÿåˆ—ã€å†…å­˜æ± ç­‰ï¼Œå› æ­¤æ€§èƒ½ä¼šæ¯” NIO æ›´é«˜ã€‚<br>ç¬¬ä¸‰ï¼šNetty å¯ä»¥æ”¯æŒå¤šç§é€šä¿¡åè®®ï¼Œå¦‚ Httpã€WebSocket ç­‰ï¼Œå¹¶ä¸”é’ˆå¯¹æ•°æ®é€šä¿¡çš„æ‹†åŒ…é»åŒ…é—®é¢˜ï¼ŒNetty å†…ç½®äº†æ‹†åŒ…ç­–ç•¥ã€‚</p>
</li>
<li><p>å¦‚ä½•è¯»å–ä¸€ä¸ªä¸çŸ¥é“ç±»å‹çš„æ–‡ä»¶Aæ•°æ®åˆ°æ–‡ä»¶Bä¸­ï¼Ÿ<br>æŒ‡å®šè¾“å…¥æ–‡ä»¶ input.txt å’Œè¾“å‡ºæ–‡ä»¶ output.txt çš„è·¯å¾„ï¼Œç„¶åä½¿ç”¨ BufferedReader å’Œ BufferedWriter æ¥è¯»å†™æ–‡ä»¶ã€‚<br>åœ¨ while å¾ªç¯ä¸­ï¼Œä½¿ç”¨ readLine() é€è¡Œè¯»å–æ–‡ä»¶ A ä¸­çš„æ•°æ®ï¼Œç„¶åå°†æ¯ä¸€è¡Œæ•°æ®å†™å…¥åˆ°æ–‡ä»¶ B ä¸­ã€‚é€šè¿‡å¼‚å¸¸å¤„ç†æ¥æ•è·å¯èƒ½å‡ºç°çš„ IO å¼‚å¸¸ã€‚<br>ä»¥ä¸Šæ˜¯é’ˆå¯¹æ–‡æœ¬æ–‡ä»¶çš„è¯»å–å’Œå†™å…¥ï¼Œå¦‚æœè¦å¤„ç†çš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„è¾“å…¥è¾“å‡ºæµå’Œå¤„ç†æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ FileInputStream å’Œ FileOutputStream æ¥å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¦‚ Apache POI æ¥å¤„ç† Excel æ–‡ä»¶ç­‰ã€‚</p>
</li>
<li><p>QPSã€TPSã€RTä»¥åŠååé‡</p>
<ol>
<li><strong>QPS :</strong> æ¯ç§’æŸ¥è¯¢æ•°ï¼Œè¡¨ç¤ºç³»ç»Ÿåœ¨ä¸€ç§’å†…å¤„ç†çš„æŸ¥è¯¢æˆ–è¯·æ±‚çš„æ•°é‡ã€‚å¯¹äºæ•°æ®åº“ã€WebæœåŠ¡å™¨ç­‰æœåŠ¡ï¼ŒQPSè¡¨ç¤ºæ¯ç§’å¤„ç†çš„æŸ¥è¯¢è¯·æ±‚æ¬¡æ•°ã€‚</li>
<li><strong>TPS:</strong> æ¯ç§’äº‹åŠ¡æ•°ï¼Œè¡¨ç¤ºç³»ç»Ÿåœ¨ä¸€ç§’å†…å¤„ç†çš„äº‹åŠ¡çš„æ•°é‡ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå’Œäº‹åŠ¡æ€§ç³»ç»Ÿä¸­ï¼ŒTPSæ˜¯ä¸€ä¸ªæ›´ä¸ºå¸¸è§çš„æŒ‡æ ‡ï¼Œç”¨äºè¡¨ç¤ºç³»ç»Ÿçš„äº‹åŠ¡å¤„ç†èƒ½åŠ›ã€‚</li>
<li><strong>KBSï¼š</strong> è¡¡é‡ç³»ç»Ÿæ¯ç§’ä¼ è¾“çš„æ•°æ®é‡ï¼Œé€šå¸¸ç”¨äºè¯„ä¼°ç½‘ç»œæˆ–å­˜å‚¨ç³»ç»Ÿçš„æ€§èƒ½ã€‚è¡¨ç¤ºæ¯ç§’ä¼ è¾“çš„æ•°æ®é‡ä¸ºåƒå­—èŠ‚ã€‚</li>
<li><strong>RT :</strong> å“åº”æ—¶é—´ï¼Œè¡¨ç¤ºç³»ç»Ÿå¤„ç†ä¸€ä¸ªè¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚é€šå¸¸ä»¥æ¯«ç§’ï¼ˆmsï¼‰ä¸ºå•ä½ã€‚è¾ƒä½çš„å“åº”æ—¶é—´é€šå¸¸è¡¨ç¤ºç³»ç»Ÿæ€§èƒ½è¾ƒå¥½ï¼Œå¯¹ç”¨æˆ·ä½“éªŒæ›´ä¸ºå‹å¥½ã€‚</li>
<li><strong>ååé‡:</strong> è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…å¤„ç†çš„æ•°æ®é‡æˆ–è¯·æ±‚æ€»æ•°ã€‚åœ¨æ€§èƒ½æµ‹è¯•ä¸­ï¼Œååé‡æ˜¯ä¸€ä¸ªç»¼åˆæŒ‡æ ‡ï¼Œå®ƒåŒæ—¶è€ƒè™‘äº†ç³»ç»Ÿçš„å¤„ç†é€Ÿåº¦å’Œå“åº”æ—¶é—´ã€‚é€šå¸¸ä»¥æ¯ç§’å¤„ç†çš„è¯·æ±‚æ•°ã€äº‹åŠ¡æ•°ã€æˆ–æ•°æ®é‡ä¸ºå•ä½ã€‚</li>
</ol>
</li>
</ul>
<hr>

<h2 id="å¤§æ•°æ®é—®é¢˜"><a href="#å¤§æ•°æ®é—®é¢˜" class="headerlink" title="å¤§æ•°æ®é—®é¢˜"></a>å¤§æ•°æ®é—®é¢˜</h2><ul>
<li><p>å¤§æ•°æ®é—®é¢˜1ï¼šå¦‚ä½•è¯»å–å†™å…¥100ä¸‡æ¡æ•°æ®ï¼Ÿ<br>æ•°æ®ä¿å­˜åœ¨Excelçš„20ä¸ªsheeté¡µä¸­ï¼Œå³æ¯ä¸€ä¸ªsheetä¸­æœ‰5ä¸‡æ¡æ•°æ®ã€‚å®ç°åœ¨3ç§’å†…å¯¼å…¥100ä¸‡æ¡æ•°æ®éœ€è¦é«˜æ•ˆåœ°å¤„ç†æ•°æ®å¯¼å…¥å’Œå¹¶å‘æ“ä½œ.<br>é€šè¿‡çº¿ç¨‹æ± åˆ›å»ºäº†20ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è´Ÿè´£å¯¼å…¥ä¸€ä¸ª sheet ä¸­çš„æ•°æ®ï¼›å…¶ä¸­æ¯ä¸ªsheetåˆåˆ›å»º5ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«å¤„ç†1ä¸‡æ¡æ•°æ®ï¼Œå°†è¿™1ä¸‡æ¡æ•°æ®æ‰¹å¤„ç†åœ°æ’å…¥åˆ°æ•°æ®åº“ä¸­ã€‚<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/list/watchlater?oid=1001335801&bvid=BV1gx4y1k7ks&spm_id_from=333.788.top_right_bar_window_view_later.content.click">https://www.bilibili.com/list/watchlater?oid=1001335801&amp;bvid=BV1gx4y1k7ks&amp;spm_id_from=333.788.top_right_bar_window_view_later.content.click</a></p>
</li>
<li><p>å¤§æ•°æ®é—®é¢˜2ï¼šå¦‚ä½•ä»åä¸‡æ¡æ•°æ®ä¸­æŒ‘é€‰æœ€ç¬¦åˆè¦æ±‚çš„åæ¡ï¼Ÿ<br>å‡è®¾æ•°æ®æ˜¯åŒ…å«å¯¹è±¡çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Java 8 çš„æµæ“ä½œå’Œæ’åºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;DataObject&gt; <span class="title function_">filterData</span><span class="params">(List&lt;DataObject&gt; dataList, <span class="type">int</span> count)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> dataList.stream()</span><br><span class="line">            .filter(<span class="comment">/* Your filtering condition */</span>) <span class="comment">// æ ¹æ®éœ€è¦æ·»åŠ è‡ªå®šä¹‰çš„æ¡ä»¶</span></span><br><span class="line">            .sorted(Comparator.comparing(<span class="comment">/* Your sorting criteria */</span>))</span><br><span class="line">            .limit(count)  <span class="comment">// æ’åºå’Œé™åˆ¶ç”¨äºé€‰æ‹©æœ€ç¬¦åˆæ¡ä»¶çš„æ•°æ®</span></span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¹å¤„ç†ï¼Œå¤šçº¿ç¨‹å¤„ç†ï¼Œæµå¤„ç†ã€‚</p>
<ol>
<li>æ‰¹å¤„ç†ï¼ˆBatch Processingï¼‰ï¼š<ul>
<li>æ‰¹å¤„ç†æ˜¯ä¸€ç§å°†ä¸€ç»„ä»»åŠ¡æŒ‰é¡ºåºæ‰¹é‡å¤„ç†çš„æ–¹å¼ï¼Œé€šå¸¸æ˜¯å°†å¤šä¸ªä½œä¸šæˆ–ä»»åŠ¡ä¸€æ¬¡æ€§æäº¤ç»™è®¡ç®—æœºç³»ç»Ÿæ‰§è¡Œï¼Œè€Œä¸éœ€è¦ç”¨æˆ·å¹²é¢„ã€‚</li>
<li>æ‰¹å¤„ç†é€šå¸¸æ˜¯æŒ‡åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ä¸­ä¾æ¬¡æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤æˆ–æ“ä½œï¼Œå¯ä»¥æ˜¯é¡ºåºæ‰§è¡Œã€å¹¶è¡Œæ‰§è¡Œã€å¾ªç¯æ‰§è¡Œç­‰ï¼Œä½†å¹¶ä¸ä¸€å®šæ˜¯å¤šçº¿ç¨‹å¤„ç†ã€‚æ¯ä¸ªå‘½ä»¤æˆ–æ“ä½œéƒ½ä¼šç­‰å¾…ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆã€‚</li>
<li>åœ¨è®¡ç®—æœºé¢†åŸŸä¸­ï¼Œæ‰¹å¤„ç†å¯ä»¥ç”¨äºè‡ªåŠ¨åŒ–æ‰§è¡Œä¸€ç³»åˆ—é‡å¤æ€§çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æ‰¹é‡å¤„ç†æ–‡ä»¶ã€æ•°æ®æ‰¹é‡å¯¼å…¥å¯¼å‡ºã€æ‰¹é‡å¤‡ä»½ç­‰ã€‚</li>
</ul>
</li>
<li>å¤šçº¿ç¨‹å¤„ç†ï¼ˆMultithreadingï¼‰ï¼š<ul>
<li>å¤šçº¿ç¨‹å¤„ç†æ˜¯æŒ‡åœ¨ä¸€ä¸ªç¨‹åºä¸­åŒæ—¶æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¯ä»¥ç‹¬ç«‹æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œå…±äº«ç›¸åŒçš„å†…å­˜ç©ºé—´ã€‚</li>
<li>å¤šçº¿ç¨‹å¤„ç†å¯ä»¥æé«˜ç¨‹åºçš„å¹¶å‘æ€§å’Œæ•ˆç‡ï¼Œå……åˆ†åˆ©ç”¨è®¡ç®—æœºçš„å¤šæ ¸å¤„ç†å™¨å’Œèµ„æºï¼Œå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œæé«˜ç¨‹åºçš„å“åº”é€Ÿåº¦å’Œå¹¶å‘èƒ½åŠ›ã€‚</li>
<li>å¤šçº¿ç¨‹å¤„ç†é€šå¸¸ç”¨äºéœ€è¦åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡æˆ–éœ€è¦å®ç°å¹¶å‘æ€§çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ç½‘ç»œæœåŠ¡å™¨ã€å›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åºã€å¤šåª’ä½“å¤„ç†ç­‰ã€‚</li>
</ul>
</li>
<li>æµå¤„ç†ï¼ˆStream Processingï¼‰ï¼š<ul>
<li>æµå¤„ç†æ˜¯ä¸€ç§è¿ç»­ä¸æ–­åœ°å¤„ç†æ•°æ®æµçš„æ–¹å¼ï¼Œé€šå¸¸æ˜¯ä»è¾“å…¥ç«¯è¯»å–æ•°æ®ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„å¤„ç†æ“ä½œï¼Œç„¶åè¾“å‡ºåˆ°è¾“å‡ºç«¯ï¼Œè€Œä¸éœ€è¦å­˜å‚¨æ•´ä¸ªæ•°æ®é›†ã€‚</li>
<li>æµå¤„ç†å¯ä»¥å®ç°å®æ—¶å¤„ç†å’Œå³æ—¶å“åº”ï¼Œèƒ½å¤Ÿå¤„ç†å¤§è§„æ¨¡çš„æ•°æ®æµï¼Œé€‚ç”¨äºå®æ—¶è®¡ç®—ã€å®æ—¶åˆ†æã€å®æ—¶ç›‘æ§ç­‰åœºæ™¯ã€‚</li>
<li>æµå¤„ç†é€šå¸¸ç”¨äºå¤„ç†å®æ—¶æ•°æ®æµï¼Œæ¯”å¦‚å®æ—¶æ—¥å¿—å¤„ç†ã€å®æ—¶äº‹ä»¶å¤„ç†ã€å®æ—¶æ•°æ®åˆ†æç­‰ã€‚å¸¸è§çš„æµå¤„ç†æ¡†æ¶åŒ…æ‹¬Apache Kafkaã€Apache Flinkç­‰ã€‚</li>
</ul>
</li>
</ol>
</li>
<li><p>å¦‚ä½•åˆ¤æ–­40äº¿ä¸ªæ•°ä¸­æŸä¸ªæ•°ä¸å­˜åœ¨?ï¼ˆå¸ƒéš†è¿‡æ»¤å™¨ï¼‰</p>
<ul>
<li>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç”¨äºå¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å¯èƒ½å­˜åœ¨äºä¸€ä¸ªé›†åˆä¸­ã€‚å®ƒçš„åŸºæœ¬åŸç†æ˜¯ä½¿ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°å°†å…ƒç´ æ˜ å°„åˆ°ä¸€ä¸ªä½æ•°ç»„ä¸­ï¼Œå½“æ£€æŸ¥ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨æ—¶ï¼Œåªéœ€æ£€æŸ¥å¯¹åº”ä½æ•°ç»„ä¸Šçš„ä½æ˜¯å¦éƒ½ä¸º1ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š<ol>
<li>åˆå§‹åŒ–ä¸€ä¸ªä½æ•°ç»„ï¼Œé•¿åº¦è¦è¶³å¤Ÿå¤§ï¼Œå¯ä»¥å®¹çº³ 40 äº¿ä¸ªæ•°çš„å“ˆå¸Œç»“æœã€‚</li>
<li>ä½¿ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°å¯¹éœ€è¦åˆ¤æ–­çš„æ•°è¿›è¡Œå“ˆå¸Œï¼Œå¾—åˆ°å¤šä¸ªå“ˆå¸Œç»“æœã€‚</li>
<li>å°†è¿™äº›å“ˆå¸Œç»“æœå¯¹åº”çš„ä½æ•°ç»„ä½ç½®è®¾ä¸º1ã€‚</li>
<li>å½“éœ€è¦åˆ¤æ–­æŸä¸ªæ•°æ˜¯å¦å­˜åœ¨æ—¶ï¼Œä½¿ç”¨åŒæ ·çš„å¤šä¸ªå“ˆå¸Œå‡½æ•°å¯¹è¯¥æ•°è¿›è¡Œå“ˆå¸Œï¼Œå¹¶æ£€æŸ¥å¯¹åº”çš„ä½æ•°ç»„ä½ç½®æ˜¯å¦éƒ½ä¸º1ã€‚</li>
<li>å¦‚æœéƒ½ä¸º1ï¼Œåˆ™è¯´æ˜è¯¥æ•°å¯èƒ½å­˜åœ¨äºé›†åˆä¸­ï¼›å¦‚æœæœ‰ä»»ä½•ä¸€ä½ä¸º0ï¼Œåˆ™è¯´æ˜è¯¥æ•°ä¸€å®šä¸å­˜åœ¨äºé›†åˆä¸­ã€‚<br>  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¸ƒéš†è¿‡æ»¤å™¨å­˜åœ¨ä¸€å®šçš„è¯¯åˆ¤ç‡ï¼Œå³æœ‰å¯èƒ½åˆ¤æ–­æŸä¸ªæ•°ä¸å­˜åœ¨äºé›†åˆä¸­ï¼Œä½†å®é™…ä¸Šå®ƒç¡®å®å­˜åœ¨ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ—¶ï¼Œéœ€è¦æƒè¡¡è¯¯åˆ¤ç‡å’Œå†…å­˜å ç”¨ç­‰å› ç´ ï¼Œé€‰æ‹©åˆé€‚çš„å‚æ•°é…ç½®ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>å¦‚ä½•åœ¨1ä¸‡ä¸ªæ•°é‡Œé¢æ‰¾åˆ°æœ€å¤§çš„100ä¸ªï¼Ÿï¼ˆå †æ’åºï¼‰</p>
<ul>
<li>ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º100çš„å°é¡¶å †ï¼ˆå †é¡¶å…ƒç´ æœ€å°ï¼‰ã€‚</li>
<li>éå†1ä¸‡ä¸ªæ•°ï¼Œå¯¹äºæ¯ä¸ªæ•°ï¼Œå¦‚æœå¤§äºå †é¡¶å…ƒç´ ï¼Œåˆ™å°†å †é¡¶å…ƒç´ æ›¿æ¢ä¸ºå½“å‰æ•°ï¼Œå¹¶è¿›è¡Œå †è°ƒæ•´ã€‚</li>
<li>éå†ç»“æŸåï¼Œå †ä¸­çš„100ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„100ä¸ªæ•°ã€‚</li>
</ul>
</li>
<li><p>è¶³çƒåœºä¸Š5ä¸‡åè§‚ä¼—å¯¹ä»–ä»¬çš„å¹´é¾„æ’åºï¼Œæ€ä¹ˆæœ€å¿«ï¼Ÿï¼ˆå¿«é€Ÿæ’åºç®—æ³•ï¼‰</p>
<ul>
<li>é€‰æ‹©ä¸€ä¸ªåŸºå‡†å…ƒç´ ï¼Œå°†å°äºåŸºå‡†çš„å…ƒç´ æ”¾åœ¨åŸºå‡†çš„å·¦è¾¹ï¼Œå¤§äºåŸºå‡†çš„å…ƒç´ æ”¾åœ¨åŸºå‡†çš„å³è¾¹ã€‚</li>
<li>é€’å½’åœ°å¯¹åŸºå‡†å·¦å³ä¸¤è¾¹çš„å­æ•°ç»„è¿›è¡Œæ’åºï¼Œç›´åˆ°æ•°ç»„æœ‰åºã€‚</li>
<li>å¦å¤–ï¼Œå¦‚æœéœ€è¦æœ€å¿«çš„æ’åºç®—æ³•ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŸºæ•°æ’åºæˆ–è®¡æ•°æ’åºã€‚è¿™ä¸¤ç§æ’åºç®—æ³•åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å¯ä»¥è¾¾åˆ°çº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼Œä½†éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼ˆä¾‹å¦‚æ•°æ®èŒƒå›´ä¸å¤§ä¸”ä¸ºæ•´æ•°ï¼‰ã€‚</li>
</ul>
</li>
<li><p>æœ‰ä¸€æ‰¹ç”¨æˆ·ï¼ˆç™¾ä¸‡æ•°é‡çº§ï¼‰çš„æ‚ä¹±è¡Œä¸ºæ•°æ®ï¼ˆåƒä¸‡æ•°é‡çº§ï¼‰æ¯ä¸€æ¡éƒ½è¦é‡æ–°æ´—æ•°ï¼Œä¸”æ´—æ•°è¿‡ç¨‹ä¸­åŒä¸€ç”¨æˆ·çš„å‰åè¡Œä¸ºæœ‰æ—¶åºæ€§ä¾èµ–å…³ç³»ï¼ˆå‰ä¸€ä¸ªè¡Œä¸ºçš„æ´—æ•°ç»“æœæ˜¯ä¸‹ä¸€ä¸ªè¡Œä¸ºè¿›è¡Œæ´—æ•°çš„å¿…è¦æ¡ä»¶ï¼‰ï¼Œå¦‚æœæ˜¯ä½ ä¼šæ€ä¹ˆè®¾è®¡æ´—æ•°æµç¨‹ï¼Ÿè¦æ±‚æ­£ç¡®ã€é«˜æ•ˆã€æŠ—é£é™©ã€ã€</p>
<ol>
<li><strong>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦</strong>: ä½¿ç”¨åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼ˆå¦‚Kafkaã€Spring Cloud Data Flowç­‰ï¼‰æ¥è°ƒåº¦æ´—æ•°ä»»åŠ¡ã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°å°†ä»»åŠ¡åˆ†å‘åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ•´ä½“å¤„ç†æ•ˆç‡ã€‚</li>
<li><strong>æ•°æ®åˆ†ç‰‡å¤„ç†</strong>: å°†ç”¨æˆ·çš„æ‚ä¹±è¡Œä¸ºæ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡åŒ…å«ä¸€éƒ¨åˆ†ç”¨æˆ·çš„æ•°æ®ã€‚ç„¶åå°†æ¯ä¸ªåˆ†ç‰‡åˆ†é…ç»™ä¸åŒçš„æ´—æ•°ä»»åŠ¡å¤„ç†ã€‚è¿™æ ·å¯ä»¥å‡å°å•ä¸ªä»»åŠ¡çš„å‹åŠ›ï¼Œæé«˜å¹¶è¡Œå¤„ç†æ•ˆç‡ã€‚</li>
<li><strong>æ´—æ•°ä»»åŠ¡è®¾è®¡</strong>: æ¯ä¸ªæ´—æ•°ä»»åŠ¡è´Ÿè´£å¤„ç†ä¸€ä¸ªç”¨æˆ·çš„è¡Œä¸ºæ•°æ®ï¼Œå¹¶ä¿è¯å‰åè¡Œä¸ºçš„æ—¶åºæ€§ä¾èµ–å…³ç³»ã€‚å¯ä»¥é‡‡ç”¨çŠ¶æ€æœºç­‰æ–¹æ³•æ¥å®ç°å¯¹æ—¶åºæ€§ä¾èµ–å…³ç³»çš„å¤„ç†ã€‚ä»»åŠ¡ä¹‹é—´å¯ä»¥é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œä¿è¯æ•°æ®çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</li>
<li><strong>ç»“æœåˆå¹¶</strong>: æ¯ä¸ªæ´—æ•°ä»»åŠ¡å¤„ç†å®Œæ•°æ®åï¼Œå°†ç»“æœå†™å…¥åˆ°ç›®æ ‡å­˜å‚¨ï¼ˆå¦‚æ•°æ®åº“ã€HDFSç­‰ï¼‰ã€‚å¦å¤–å¯ä»¥è®¾è®¡ä¸€ä¸ªç»“æœåˆå¹¶ä»»åŠ¡ï¼Œè´Ÿè´£å°†æ‰€æœ‰æ´—æ•°ä»»åŠ¡çš„ç»“æœåˆå¹¶ï¼Œå½¢æˆæœ€ç»ˆçš„æ´—æ•°ç»“æœã€‚</li>
<li><strong>ç›‘æ§å’Œå¼‚å¸¸å¤„ç†</strong>: è®¾è®¡ç›‘æ§ç³»ç»Ÿï¼Œå®æ—¶ç›‘æ§æ´—æ•°ä»»åŠ¡çš„è¿è¡Œæƒ…å†µå’Œæ•°æ®å¤„ç†è¿›åº¦ï¼ŒåŠæ—¶å‘ç°å’Œå¤„ç†å¼‚å¸¸ã€‚å¯¹äºå¤„ç†å¤±è´¥çš„æ•°æ®ï¼Œå¯é‡‡ç”¨é‡è¯•ã€è¡¥å¿ç­‰ç­–ç•¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>: é’ˆå¯¹ç™¾ä¸‡æ•°é‡çº§çš„ç”¨æˆ·å’Œåƒä¸‡æ•°é‡çº§çš„è¡Œä¸ºæ•°æ®ï¼Œéœ€è¦è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ä¼˜åŒ–æ•°æ®è¯»å–ã€å¤„ç†å’Œå†™å…¥çš„æ€§èƒ½ï¼Œä»¥åŠä»»åŠ¡è°ƒåº¦å’Œå¹¶è¡Œå¤„ç†çš„æ€§èƒ½ç­‰æ–¹é¢ã€‚</li>
<li><strong>å®¹ç¾å’Œå¤‡ä»½</strong>: è®¾è®¡å®¹ç¾å’Œå¤‡ä»½æ–¹æ¡ˆï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é‡åˆ°æ•…éšœæˆ–è€…ç¾éš¾æ—¶èƒ½å¤Ÿå¿«é€Ÿæ¢å¤ã€‚å¯ä»¥é‡‡ç”¨æ•°æ®å¤‡ä»½ã€ä¸»å¤‡åˆ‡æ¢ã€æ•°æ®åŒæ­¥ç­‰æ–¹å¼æ¥ä¿è¯ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§å’Œå¯é æ€§ã€‚</li>
</ol>
</li>
</ul>
<hr>


<h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><ul>
<li><p>Spring (Spring Framework) æ˜¯ä»€ä¹ˆï¼Ÿ<br>Spring æ˜¯ä¸ªjavaä¼ä¸šçº§åº”ç”¨çš„å¼€æºå¼€å‘æ¡†æ¶ï¼Œæ—¨åœ¨é™ä½åº”ç”¨ç¨‹åºå¼€å‘çš„å¤æ‚åº¦ã€‚å®ƒæ˜¯è½»é‡çº§ã€æ¾æ•£è€¦åˆçš„ã€‚å®ƒå…·æœ‰åˆ†å±‚ä½“ç³»ç»“æ„ï¼Œå…è®¸ç”¨æˆ·é€‰æ‹©ç»„ä»¶(é€‰æ‹©éœ€è¦çš„æ¨¡å—ï¼šCoreã€AOPã€WEBã€ã€)ã€‚å®ƒå¯ä»¥é›†æˆå…¶ä»–æ¡†æ¶ï¼Œå¦‚ Structsã€Hibernateã€EJB ç­‰ï¼Œæ‰€ä»¥åˆç§°ä¸ºæ¡†æ¶çš„æ¡†æ¶ã€‚<br>æ¡†æ¶â€”â€“ã€‹å®¹å™¨â€”â€”ã€‹ç”Ÿæ€ã€ã€</p>
</li>
<li><p>Springçš„å¯æ‰©å±•æ€§æŒ‡ï¼Ÿ<br>æ¡†æ¶æœ¬èº«çš„è®¾è®¡å’Œæ¶æ„èƒ½å¤Ÿæ–¹ä¾¿åœ°æ¥å—å’Œæ•´åˆæ–°çš„åŠŸèƒ½ã€æ¨¡å—æˆ–è€…æ‰©å±•ç‚¹ï¼ŒåŒæ—¶å…è®¸å¼€å‘è€…é€šè¿‡è‡ªå®šä¹‰å®ç°æ¥æ‰©å±•æˆ–ä¿®æ”¹æ¡†æ¶çš„è¡Œä¸ºã€‚è¿™ä¸€ç‰¹æ€§ä½¿å¾—Springæ¡†æ¶åœ¨ä¸æ–­æ¼”è¿›çš„æŠ€æœ¯ç¯å¢ƒä¸­èƒ½å¤Ÿçµæ´»åœ°é€‚åº”æ–°çš„éœ€æ±‚å’Œå˜åŒ–ã€‚å…·ä½“è€Œè¨€ï¼ŒSpringæ¡†æ¶çš„å¯æ‰©å±•æ€§ä¸»è¦è¡¨ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š<br>1ã€<strong>æ¨¡å—åŒ–è®¾è®¡ï¼š</strong> Springæ¡†æ¶é‡‡ç”¨æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå°†ä¸åŒçš„åŠŸèƒ½åˆ’åˆ†ä¸ºç‹¬ç«‹çš„æ¨¡å—ã€‚æ¯ä¸ªæ¨¡å—éƒ½æœ‰æ¸…æ™°çš„èŒè´£å’Œæ¥å£ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©æ€§åœ°é›†æˆæ‰€éœ€çš„åŠŸèƒ½ï¼Œè€Œä¸å¿…å¼•å…¥æ•´ä¸ªæ¡†æ¶ã€‚è¿™æ ·çš„è®¾è®¡ä½¿å¾—Springæ›´åŠ è½»é‡ã€å¯å®šåˆ¶ã€‚<br>2ã€<strong>æ‰©å±•ç‚¹å’Œæ¥å£ï¼š</strong> Springæ¡†æ¶æä¾›äº†è®¸å¤šæ‰©å±•ç‚¹å’Œæ¥å£ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡è‡ªå®šä¹‰å®ç°æ¥å¢åŠ æ–°çš„åŠŸèƒ½æˆ–è€…ä¿®æ”¹ç°æœ‰åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼ŒBeanPostProcessoræ¥å£å¯ä»¥ç”¨äºåœ¨Beanå®ä¾‹åŒ–å’Œåˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­å¯¹Beanè¿›è¡Œå®šåˆ¶åŒ–æ“ä½œã€‚<br>3ã€<strong>ç¬¬ä¸‰æ–¹æ•´åˆï¼š</strong> Springæ¡†æ¶æ”¯æŒä¸è®¸å¤šå…¶ä»–æ¡†æ¶å’ŒæŠ€æœ¯çš„é›†æˆï¼Œå¦‚Hibernateã€MyBatisã€Quartzç­‰ã€‚è¿™ç§é›†æˆæ€§ä½¿å¾—å¼€å‘è€…å¯ä»¥å……åˆ†åˆ©ç”¨å…¶ä»–ä¼˜ç§€æ¡†æ¶çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿæ–¹ä¾¿åœ°æ›¿æ¢æˆ–å‡çº§è¿™äº›æ¡†æ¶ã€‚<br>4ã€<strong>è‡ªå®šä¹‰æ³¨è§£å’Œæ³¨è§£é©±åŠ¨ï¼š</strong> Springæ”¯æŒè‡ªå®šä¹‰æ³¨è§£ï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æ¥å£°æ˜é…ç½®ä¿¡æ¯ã€å®šä¹‰åˆ‡é¢ç­‰ã€‚æ³¨è§£é©±åŠ¨çš„å¼€å‘æ–¹å¼ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä»¥æ›´ç®€æ´çš„æ–¹å¼å®ç°ç‰¹å®šçš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿä¸ºè‡ªå®šä¹‰æ‰©å±•æä¾›äº†ä¾¿åˆ©ã€‚<br>5ã€<strong>äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼š</strong> Springæ¡†æ¶å¼•å…¥äº†äº‹ä»¶é©±åŠ¨çš„æœºåˆ¶ï¼Œé€šè¿‡Application Eventå’ŒApplicationListeneræ¥å£ï¼Œå¼€å‘è€…å¯ä»¥å®ç°è‡ªå®šä¹‰äº‹ä»¶å’Œç›‘å¬å™¨ï¼Œä»è€Œå®ç°åœ¨æ¡†æ¶ä¸­æ·»åŠ æ–°çš„ä¸šåŠ¡é€»è¾‘æˆ–å¤„ç†é€»è¾‘ã€‚</p>
</li>
<li><p>ä½ ä»¬é¡¹ç›®ä¸­ä¸ºä»€ä¹ˆä½¿ç”¨Springæ¡†æ¶ï¼ŸSpringæ¡†æ¶çš„å¥½å¤„ï¼Œç‰¹ç‚¹ã€‚<br>è½»é‡: Spring æ˜¯è½»é‡çš„ï¼ŒåŸºæœ¬çš„ç‰ˆæœ¬å¤§çº¦2MBã€‚<br>æ§åˆ¶åè½¬: Springé€šè¿‡æ§åˆ¶åè½¬å®ç°äº†æ¾æ•£ç¨ åˆï¼Œå¯¹è±¡ä»¬ç»™å‡ºå®ƒä»¬çš„ä¾èµ–ï¼Œè€Œä¸æ˜¯åˆ›å»ºæˆ–æŸ¥æ‰¾ä¾èµ–çš„å¯¹è±¡ä»¬ã€‚<br>é¢å‘åˆ‡é¢çš„ç¼–ç¨‹(AOP): Springæ”¯æŒé¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œå¹¶ä¸”æŠŠåº”ç”¨ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åˆ†å¼€ã€‚<br>å®¹å™¨: Spring åŒ…å«å¹¶ç®¡ç†åº”ç”¨ä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®ã€‚<br>MVCæ¡†æ¶: Springçš„WEBæ¡†æ¶æ˜¯ä¸ªç²¾å¿ƒè®¾è®¡çš„æ¡†æ¶ï¼Œæ˜¯Webæ¡†æ¶çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£å“ã€‚<br>äº‹åŠ¡ç®¡ç†: Spring æä¾›ä¸€ä¸ªæŒç»­çš„äº‹åŠ¡ç®¡ç†æ¥å£ï¼Œå¯ä»¥æ‰©å±•åˆ°ä¸Šè‡³æœ¬åœ°äº‹åŠ¡ä¸‹è‡³å…¨å±€äº‹åŠ¡(JTA)ã€‚ï¼ˆç¼–ç¨‹å¼äº‹åŠ¡éš¾ï¼‰<br>å¼‚å¸¸å¤„ç†: Spring æä¾›æ–¹ä¾¿çš„APIæŠŠå…·ä½“æŠ€æœ¯ç›¸å…³çš„å¼‚å¸¸(æ¯”å¦‚ç”±JDBCï¼ŒHibernate orJDOæŠ›å‡ºçš„) è½¬åŒ–ä¸ºè‡´çš„unchecked å¼‚å¸¸ã€‚</p>
</li>
<li><p>ä½¿ç”¨ Spring æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</p>
<ol>
<li>ä½œä¸ºä¸€ä¸ªæˆç†Ÿçš„ Spring Web åº”ç”¨ç¨‹åºï¼šSpring æä¾›äº† Spring MVC æ¡†æ¶ï¼Œç”¨äºæ„å»º Web å±‚ï¼ŒåŒæ—¶æ”¯æŒé€šè¿‡ Spring Boot ç­‰å·¥å…·è½»æ¾é…ç½®å’Œå¯åŠ¨æ•´ä¸ªåº”ç”¨ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼ŒSpring è´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºçš„å„ä¸ªå±‚æ¬¡ï¼ŒåŒ…æ‹¬è¡¨ç°å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚å’Œæ•°æ®è®¿é—®å±‚ã€‚</li>
<li>ä½œä¸ºç¬¬ä¸‰æ–¹ Web æ¡†æ¶ï¼Œä½¿ç”¨ Spring Frameworks ä¸­é—´å±‚ï¼šå¯ä»¥å°† Spring ä½œä¸ºç¬¬ä¸‰æ–¹æ¡†æ¶é›†æˆåˆ°ç°æœ‰çš„ Web åº”ç”¨ç¨‹åºä¸­ï¼Œè€Œä¸å¿…å®Œå…¨é‡‡ç”¨ Spring Web åº”ç”¨ç¨‹åºçš„æ–¹å¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯èƒ½åªä½¿ç”¨ Spring çš„æŸäº›æ¨¡å—ï¼Œä¾‹å¦‚ Spring IOC å®¹å™¨ã€AOPã€äº‹åŠ¡ç®¡ç†ç­‰ï¼Œä»¥æå‡ç°æœ‰ Web åº”ç”¨ç¨‹åºçš„åŠŸèƒ½å’Œæ•ˆç‡ã€‚</li>
<li>ç”¨äºè¿œç¨‹ä½¿ç”¨ï¼šè¿™å¯èƒ½æŒ‡çš„æ˜¯å°† Spring ä½œä¸ºè¿œç¨‹æœåŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚é€šè¿‡ Spring çš„è¿œç¨‹è°ƒç”¨æ”¯æŒï¼ˆå¦‚ Spring Remoting æˆ– Spring Cloudï¼‰åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿›è¡Œè¿œç¨‹é€šä¿¡ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒSpring çš„ç‰¹æ€§å¯ä»¥ç”¨äºå®ç°è¿œç¨‹æœåŠ¡çš„æ³¨å†Œã€è°ƒç”¨å’Œç®¡ç†ã€‚</li>
<li>ä½œä¸ºä¼ä¸šçº§ Java Beanï¼Œå®ƒå¯ä»¥åŒ…è£…ç°æœ‰çš„ POJOï¼ˆPlain Old Java Objectsï¼‰ï¼šé€šè¿‡ Spring çš„ä¾èµ–æ³¨å…¥å’Œå…¶ä»–ç‰¹æ€§ï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°ç®¡ç†å’Œç»„è£…è¿™äº›å¯¹è±¡ï¼Œä½¿å…¶æ›´æ˜“äºæµ‹è¯•ã€æ‰©å±•å’Œç»´æŠ¤ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼ŒSpring èµ‹äºˆäº†è¿™äº›æ™®é€šå¯¹è±¡æ›´å¤šçš„ä¼ä¸šçº§ç‰¹æ€§ã€‚</li>
</ol>
</li>
<li><p>Spring é…ç½®æ–‡ä»¶ï¼Ÿï¼ˆâ€Spring beané…ç½®æ–‡ä»¶â€æ˜¯å…¶ä¸­çš„ä¸€ä¸ªå­é›†ï¼‰</p>
<ul>
<li>é€šå¸¸ï¼Œå½“è¯´ â€œSpring é…ç½®æ–‡ä»¶â€ æ—¶ï¼Œæ˜¯æŒ‡åŒ…å«äº†æ•´ä¸ª Spring åº”ç”¨ç¨‹åºé…ç½®ä¿¡æ¯çš„ XML æ–‡ä»¶ã€‚Spring é…ç½®æ–‡ä»¶é€šå¸¸æ˜¯ä¸€ä¸ª XML æ–‡ä»¶ï¼Œç”¨äºé…ç½® Spring å®¹å™¨çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬å®šä¹‰å’Œé…ç½® Spring ä¸­çš„å„ç§ç»„ä»¶ï¼ˆBeanï¼‰ã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«äº† Spring Bean çš„å®šä¹‰ã€ä¾èµ–å…³ç³»ã€AOP é…ç½®ã€äº‹åŠ¡ç®¡ç†ç­‰ä¿¡æ¯ã€‚</li>
<li>åœ¨ Spring çš„ XML é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>&lt;bean&gt;</code> å…ƒç´ æ¥å®šä¹‰å’Œé…ç½® Spring Bean ç±»ä¿¡æ¯ï¼Œè¿™äº›ç±»å¯ä»¥æ˜¯æ™®é€šçš„ Java ç±»ã€ä¸šåŠ¡é€»è¾‘ç±»ã€æ•°æ®è®¿é—®ç±»ç­‰ã€‚æ¯ä¸ª <code>&lt;bean&gt;</code> å…ƒç´ åŒ…å«äº†å¯¹åº”ç±»çš„ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚ç±»åã€IDã€ä½œç”¨åŸŸã€å±æ€§å€¼ç­‰ã€‚è¿™æ ·ï¼ŒSpring å®¹å™¨åœ¨å¯åŠ¨æ—¶ä¼šæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯æ¥å®ä¾‹åŒ–å’Œç®¡ç†è¿™äº›ç±»ï¼Œä½¿å¾—å®ƒä»¬æˆä¸º Spring ç®¡ç†çš„ Beanã€‚  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Spring é…ç½®æ–‡ä»¶ applicationContext.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰ä¸€ä¸ªåä¸º &quot;myBean&quot; çš„ Beanï¼Œå®ƒæ˜¯ com.example.MyBean ç±»çš„å®ä¾‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.example.MyBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®å±æ€§å€¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;propertyName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;propertyValue&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…¶ä»– Bean çš„å®šä¹‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Spring ç¨‹åºå¯åŠ¨æ­¥éª¤ã€‚</p>
<ul>
<li>è¿è¡Œä¸€ä¸ª Spring ç¨‹åºé€šå¸¸éœ€è¦è¿›è¡Œä»¥ä¸‹å‡ æ­¥é…ç½®ï¼š<ol>
<li><strong>æ·»åŠ  Spring ç›¸å…³çš„ä¾èµ–ï¼š</strong>åœ¨é¡¹ç›®çš„æ„å»ºå·¥å…·ï¼ˆå¦‚ Mavenã€Gradleï¼‰ä¸­ï¼Œæ·»åŠ  Spring ç›¸å…³çš„ä¾èµ–ï¼ŒåŒ…æ‹¬æ ¸å¿ƒå®¹å™¨ã€AOP æ¨¡å—ã€æ•°æ®è®¿é—®æ¨¡å—ã€Web æ¨¡å—ç­‰ï¼Œå…·ä½“ä¾èµ–æ ¹æ®é¡¹ç›®éœ€æ±‚è€Œå®šã€‚</li>
<li><strong>åˆ›å»º Spring é…ç½®æ–‡ä»¶ï¼š</strong>åˆ›å»ºä¸€ä¸ª XML æ–‡ä»¶ç”¨äºé…ç½® Spring å®¹å™¨ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶é€šå¸¸åŒ…å«äº†åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®šä¹‰å’Œé…ç½® Spring Beanï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥ï¼Œé…ç½®äº‹åŠ¡ç®¡ç†ç­‰ã€‚  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¤ºä¾‹ï¼šSpring é…ç½®æ–‡ä»¶ applicationContext.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;&quot;</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½® Spring Bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.example.MyBean&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>åˆå§‹åŒ– Spring å®¹å™¨ï¼š</strong>åœ¨åº”ç”¨ç¨‹åºçš„å¯åŠ¨é˜¶æ®µï¼Œé€šè¿‡åŠ è½½ Spring é…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ– Spring å®¹å™¨ã€‚å¯ä»¥ä½¿ç”¨ <code>ClassPathXmlApplicationContext</code> æˆ– <code>FileSystemXmlApplicationContext</code> ç­‰å®¹å™¨å®ç°ç±»ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šåˆå§‹åŒ– Spring å®¹å™¨</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><strong>è·å– Spring Beanï¼š</strong>é€šè¿‡ Spring å®¹å™¨è·å–å·²é…ç½®çš„ Beanã€‚é€šè¿‡å®¹å™¨çš„ <code>getBean()</code> æ–¹æ³•è·å– Bean çš„å®ä¾‹ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šè·å– Spring Bean</span></span><br><span class="line"><span class="type">MyBean</span> <span class="variable">myBean</span> <span class="operator">=</span> (MyBean) context.getBean(<span class="string">&quot;myBean&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><strong>ï¼Ÿï¼Ÿï¼Ÿè¿è¡Œåº”ç”¨ç¨‹åºï¼š</strong>ä¹Ÿå¯ä»¥é€šè¿‡æ³¨è§£ã€AOP ç­‰æ–¹å¼åˆ©ç”¨ Spring æä¾›çš„åŠŸèƒ½ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šè¿è¡Œåº”ç”¨ç¨‹åº</span></span><br><span class="line">myBean.doSomething();</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>ä½¿ç”¨ Spring Boot å¯åŠ¨ç±»æ¥è¿è¡Œç¨‹åºçš„ä¸€èˆ¬æ­¥éª¤ï¼šï¼ˆ<strong>å¯¹Springçš„é…ç½®è¿›è¡Œäº†ç®€åŒ–ï¼Œï¼Œ</strong>ï¼‰<ol>
<li><strong>æ·»åŠ  Spring Boot ä¾èµ–ï¼š</strong>åœ¨é¡¹ç›®çš„æ„å»ºå·¥å…·ä¸­ï¼ˆå¦‚ Mavenã€Gradleï¼‰ï¼Œæ·»åŠ  Spring Boot ç›¸å…³çš„ä¾èµ–ï¼ŒåŒ…æ‹¬ <code>spring-boot-starter</code> æˆ–å…¶ä»–ç‰¹å®šæ¨¡å—ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©ã€‚</li>
<li><strong>åˆ›å»º Spring Boot å¯åŠ¨ç±»ï¼š</strong>åˆ›å»ºä¸€ä¸ª Java ç±»ï¼Œé€šå¸¸å‘½åä¸º <code>Application</code> æˆ–å…¶ä»–ç±»ä¼¼çš„åå­—ï¼Œä½œä¸º Spring Boot åº”ç”¨ç¨‹åºçš„å¯åŠ¨ç±»ã€‚<code>@SpringBootApplication</code> æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…å«äº† <code>@SpringBootConfiguration</code>ã€<code>@EnableAutoConfiguration</code> å’Œ <code>@ComponentScan</code>ã€‚è¿™ä¸ªæ³¨è§£è¡¨æ˜è¿™æ˜¯ä¸€ä¸ª Spring Boot åº”ç”¨ç¨‹åºçš„å…¥å£ç±»ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šSpring Boot å¯åŠ¨ç±»</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>ç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼š</strong> åœ¨åº”ç”¨ç¨‹åºä¸­ç¼–å†™ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå¯ä»¥åˆ›å»ºå…¶ä»–çš„ Spring Beanï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼ä½¿ç”¨è¿™äº› Beanã€‚</li>
<li><strong>è¿è¡Œåº”ç”¨ç¨‹åºï¼š</strong> é€šè¿‡è¿è¡Œ Spring Boot å¯åŠ¨ç±»çš„ <code>main</code> æ–¹æ³•å¯åŠ¨åº”ç”¨ç¨‹åºã€‚è¿™ä¸ªæ–¹æ³•ä¼šå¯åŠ¨ Spring Boot å†…åµŒçš„ Tomcat æœåŠ¡å™¨ï¼Œå¹¶è‡ªåŠ¨æ‰«æå’Œé…ç½® Spring Beanã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šè¿è¡Œ Spring Boot åº”ç”¨ç¨‹åº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SpringApplication.run(Application.class, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
</li>
<li><p>â€œä¸‰å±‚æ¶æ„â€ï¼šè¡¨ç°å±‚ + ä¸šåŠ¡å±‚ + æ•°æ®è®¿é—®å±‚</p>
<ol start="0">
<li>ä¸‰å±‚æ¶æ„ï¼ˆPresentation Layerã€Business Logic Layerã€Data Access Layerï¼‰æ˜¯ä¸€ç§å¸¸è§çš„è½¯ä»¶æ¶æ„æ¨¡å¼ï¼Œç”¨äºå°†ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿåˆ’åˆ†ä¸ºä¸‰ä¸ªä¸»è¦çš„é€»è¾‘å±‚ï¼Œä»¥æé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯é‡ç”¨æ€§ã€‚Spring æ¡†æ¶æä¾›äº†å¹¿æ³›çš„æ”¯æŒï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´è½»æ¾åœ°å®ç°å’Œç®¡ç†ä¸‰å±‚æ¶æ„ã€‚</li>
<li>è¡¨ç°å±‚ï¼ˆPresentation Layerï¼‰ï¼š<br>  å®šä¹‰ï¼š ä¸»è¦è´Ÿè´£ç”¨æˆ·ç•Œé¢å’Œç”¨æˆ·äº¤äº’ï¼Œé€šå¸¸åŒ…æ‹¬ Web é¡µé¢ã€UI ç»„ä»¶ç­‰ã€‚<br>  Spring æ”¯æŒï¼š Spring æä¾›äº† Spring MVC æ¨¡å—ï¼Œç”¨äºå®ç° Web åº”ç”¨çš„è¡¨ç°å±‚ã€‚Spring MVC æä¾›äº†å¼ºå¤§çš„æ§åˆ¶å™¨ï¼ˆControllerï¼‰æœºåˆ¶ï¼Œæ”¯æŒåŸºäºæ³¨è§£çš„æ˜ å°„ã€è§†å›¾è§£æã€æ•°æ®ç»‘å®šç­‰åŠŸèƒ½ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°æ„å»ºå’Œç®¡ç† Web å±‚ã€‚</li>
<li>ä¸šåŠ¡å±‚ï¼ˆBusiness Logic Layerï¼‰ï¼š<br>  å®šä¹‰ï¼š åŒ…å«äº†åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚ã€è°ƒç”¨æ•°æ®è®¿é—®å±‚è¿›è¡Œæ•°æ®æ“ä½œï¼Œå¹¶è¿›è¡Œä¸šåŠ¡è§„åˆ™çš„å¤„ç†ã€‚<br>  Spring æ”¯æŒï¼š Spring æä¾›äº† IoCï¼ˆInversion of Controlï¼‰å®¹å™¨å’Œ AOPï¼ˆAspect-Oriented Programmingï¼‰åŠŸèƒ½ï¼Œè¿™ä¸¤è€…å…±åŒæ„æˆäº† Spring çš„æ ¸å¿ƒã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨ Spring IoC å®¹å™¨æ¥ç®¡ç†ä¸šåŠ¡å±‚çš„å¯¹è±¡ï¼Œè€Œ Spring AOP å¯ä»¥ç”¨äºå¤„ç†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œå¦‚äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—è®°å½•ç­‰ã€‚</li>
<li>æ•°æ®è®¿é—®å±‚ï¼ˆData Access Layerï¼‰ï¼š<br>  å®šä¹‰ï¼š ä¸»è¦ç”¨äºä¸æ•°æ®å­˜å‚¨äº¤äº’ï¼Œè¿›è¡Œæ•°æ®åº“è®¿é—®ã€æ•°æ®æŒä¹…åŒ–ç­‰æ“ä½œã€‚<br>  Spring æ”¯æŒï¼š Spring æä¾›äº†å¯¹æ•°æ®è®¿é—®çš„æ”¯æŒï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯ Spring çš„ JDBC æ¨¡å—å’Œ Spring çš„ ORM æ¨¡å—ã€‚Spring JDBC ç®€åŒ–äº† JDBC æ“ä½œï¼Œè€Œ Spring ORM æ”¯æŒé›†æˆå¤šç§ ORM æ¡†æ¶ï¼Œå¦‚ Hibernateã€MyBatis ç­‰ï¼Œä½¿å¾—æ•°æ®è®¿é—®å±‚çš„å¼€å‘æ›´åŠ ä¾¿æ·ã€‚</li>
</ol>
</li>
<li><p>Serviceå±‚ ä¸ºä»€ä¹ˆç”¨çš„æ˜¯æ¥å£ï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨å®ç°ç±»ï¼Ÿï¼Ÿ</p>
<ul>
<li>Service å±‚è´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ã€è°ƒç”¨æ•°æ®è®¿é—®å±‚ï¼ˆDAOï¼ŒData Access Objectï¼‰å¹¶ä¸æ§åˆ¶å™¨å±‚è¿›è¡Œäº¤äº’ã€‚ä½¿ç”¨æ¥å£è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨å®ç°ç±»å‘¢ï¼Œè¿™ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š<ol>
<li>è§£è€¦å’Œå¯æ‰©å±•æ€§ï¼šä½¿ç”¨æ¥å£å°† Service å±‚ä¸å…¶å®ç°ç±»è§£è€¦ã€‚é€šè¿‡é¢å‘æ¥å£ç¼–ç¨‹ï¼Œæ§åˆ¶å™¨ï¼ˆæˆ–å…¶ä»–ç±»ï¼‰å¯ä»¥åªä¾èµ–äºæ¥å£è€Œä¸æ˜¯å…·ä½“çš„å®ç°ç±»ã€‚è¿™æ ·ä½¿å¾—ä»£ç æ›´åŠ çµæ´»ï¼Œèƒ½å¤Ÿè½»æ¾åˆ‡æ¢ä¸åŒçš„å®ç°ç±»æˆ–è€…æ¨¡æ‹Ÿæµ‹è¯•ç”¨çš„è™šæ‹Ÿå®ç°ã€‚</li>
<li>å•ä¸€èŒè´£åŸåˆ™ï¼šæ¥å£å®šä¹‰äº† Service å±‚çš„å¥‘çº¦å’Œè¡Œä¸ºï¼Œå®ç°ç±»è´Ÿè´£å…·ä½“çš„é€»è¾‘å®ç°ã€‚è¿™ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼Œå³ä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚</li>
<li>æµ‹è¯•å’Œæ¨¡æ‹Ÿï¼šï¼Ÿï¼Ÿæ¥å£çš„ä½¿ç”¨ä½¿å¾—å•å…ƒæµ‹è¯•æ›´åŠ å®¹æ˜“ã€‚åœ¨æµ‹è¯•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿå®ç°æ¥æ›¿ä»£çœŸæ­£çš„å®ç°ç±»ï¼Œä»è€Œæ›´å¥½åœ°è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚é€šè¿‡æ¨¡æ‹Ÿï¼Œå¯ä»¥æ§åˆ¶å’ŒéªŒè¯ä¸åŒçš„è¡Œä¸ºï¼Œè€Œæ— éœ€ä¾èµ–äºåº•å±‚å®ç°ç»†èŠ‚ã€‚</li>
<li>ä¾èµ–æ³¨å…¥ï¼šï¼Ÿï¼ŸSpring å®¹å™¨èƒ½å¤Ÿé€šè¿‡ä¾èµ–æ³¨å…¥å°†æ¥å£çš„å®ç°ç±»æ³¨å…¥åˆ°éœ€è¦çš„åœ°æ–¹ï¼Œè€Œä¸éœ€è¦ç›´æ¥å…³æ³¨å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</li>
</ol>
</li>
<li>åˆ‡æ¢ä¸€ä¸ªæ¥å£ä¸‹çš„ä¸åŒçš„å®ç°ç±»æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ä¸åŒçš„å®ç°ç±»ï¼Ÿ<ol>
<li>çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼šä½¿ç”¨æ¥å£å®šä¹‰è§„èŒƒå¯ä»¥æé«˜ä»£ç çš„çµæ´»æ€§ã€‚é€šè¿‡é¢å‘æ¥å£ç¼–ç¨‹ï¼Œå¯ä»¥å°†è°ƒç”¨æ–¹ä¸å…·ä½“å®ç°ç±»è§£è€¦ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºç»´æŠ¤å’Œä¿®æ”¹ã€‚å¦‚æœåç»­éœ€è¦æ›¿æ¢å®ç°ç±»æˆ–å¼•å…¥æ–°çš„å®ç°ï¼Œåªéœ€è¦ä¿®æ”¹å®ç°ç±»çš„ç»‘å®šï¼Œè€Œä¸éœ€è¦ä¿®æ”¹è°ƒç”¨æ–¹çš„ä»£ç ã€‚</li>
<li>è§£è€¦å’Œä¾èµ–æ³¨å…¥ï¼šæ¥å£çš„ä½¿ç”¨æ”¯æŒä¾èµ–æ³¨å…¥ï¼Œä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºç®¡ç†å’Œæµ‹è¯•ã€‚ä¾èµ–æ³¨å…¥èƒ½å¤Ÿå‡å°‘ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜äº†ä»£ç çš„å¯æµ‹è¯•æ€§ï¼Œæœ‰åˆ©äºå•å…ƒæµ‹è¯•å’Œæ¨¡æ‹Ÿæµ‹è¯•ã€‚</li>
<li>æ‰©å±•æ€§å’Œé€‚åº”æ€§ï¼šä½¿ç”¨æ¥å£å’Œä¸åŒçš„å®ç°ç±»ä½¿å¾—ç³»ç»Ÿæ›´å…·æ‰©å±•æ€§ã€‚æ ¹æ®ä¸åŒçš„éœ€æ±‚å’Œåœºæ™¯ï¼Œå¯ä»¥è½»æ¾åœ°åˆ‡æ¢å®ç°ç±»ï¼Œä½¿å¾—ç³»ç»Ÿæ›´å…·é€‚åº”æ€§å’Œçµæ´»æ€§ã€‚</li>
<li>éµå¾ªè®¾è®¡åŸåˆ™ï¼šä½¿ç”¨æ¥å£éµå¾ªäº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è®¾è®¡åŸåˆ™ï¼Œå¦‚å¼€é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼‰ã€å•ä¸€èŒè´£åŸåˆ™ç­‰ã€‚è¿™ç§è®¾è®¡æ¨¡å¼ä½¿å¾—ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>@Component, @Controller, @Repositoryï¼Œ@Service æœ‰ä½•åŒºåˆ«ï¼Ÿ<br>@Component ï¼šè¿™å°†  java ç±»æ ‡è®°ä¸º beanã€‚å®ƒæ˜¯ä»»ä½• Spring ç®¡ç†ç»„ä»¶çš„é€šç”¨æ„é€ å‹ã€‚spring çš„ç»„ä»¶æ‰«ææœºåˆ¶ç°åœ¨å¯ä»¥å°†å…¶æ‹¾å–å¹¶å°†å…¶æ‹‰å…¥åº”ç”¨ç¨‹åºç¯å¢ƒä¸­ã€‚<br>@Controller ï¼šè¿™å°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC æ§åˆ¶å™¨ã€‚æ ‡æœ‰å®ƒçš„Bean ä¼šè‡ªåŠ¨å¯¼å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚<br>@Serviceï¼šæ­¤æ³¨è§£æ˜¯ç»„ä»¶æ³¨è§£çš„ç‰¹åŒ–ã€‚ä¸å¯¹ @Component æä¾›ä»»ä½•å…¶ä»–è¡Œä¸ºã€‚åœ¨æœåŠ¡å±‚ç±»ä¸­ä½¿ç”¨@Service è€Œä¸æ˜¯@Componentï¼Œå› ä¸ºå®ƒä»¥æ›´å¥½çš„æ–¹å¼æŒ‡å®šäº†æ„å›¾ã€‚<br>@Repository ï¼šè¿™ä¸ªæ³¨è§£æ˜¯å…·æœ‰ç±»ä¼¼ç”¨é€”å’ŒåŠŸèƒ½çš„ @Component æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸º DAO æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚å®ƒå°† DAO å¯¼å…¥ IoC å®¹å™¨ï¼Œå¹¶ä½¿æœªç»æ£€æŸ¥çš„å¼‚å¸¸æœ‰èµ„æ ¼è½¬æ¢ä¸º Spring DataAccessExceptionã€‚</p>
</li>
<li><p>@Autowired ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨äº†ï¼Œè€Œæ˜¯ä½¿ç”¨æ„é€ å‡½æ•°ï¼Ÿ</p>
<ol start="0">
<li><code>@Autowired</code> ä»ç„¶æ˜¯ Spring æ¡†æ¶ä¸­ç”¨äºè¿›è¡Œä¾èµ–æ³¨å…¥çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒå¯ä»¥ç”¨äºå­—æ®µã€æ„é€ å‡½æ•°å’Œæ–¹æ³•ä¸Šã€‚ç„¶è€Œï¼Œä¸€äº›å¼€å‘è€…å€¾å‘äºä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼Œè€Œä¸æ˜¯å­—æ®µæ³¨å…¥æˆ–æ–¹æ³•æ³¨å…¥ï¼Œè¿™æ˜¯å› ä¸ºæ„é€ å‡½æ•°æ³¨å…¥æœ‰ä¸€äº›ä¼˜åŠ¿ï¼š</li>
<li>æ˜¾å¼æ€§å’Œæ˜ç¡®æ€§ï¼š æ„é€ å‡½æ•°æ³¨å…¥æ›´åŠ æ˜¾å¼å’Œæ˜ç¡®ã€‚é€šè¿‡åœ¨æ„é€ å‡½æ•°å‚æ•°ä¸Šä½¿ç”¨ <code>@Autowired</code> æ³¨è§£ï¼Œä½ å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°ä¾èµ–å…³ç³»ï¼Œè€Œä¸ç”¨æ·±å…¥æŸ¥çœ‹ç±»çš„å…¶ä»–éƒ¨åˆ†ã€‚</li>
<li>ä¸å¯å˜æ€§ï¼šé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ï¼Œä½ å¯ä»¥å°†ä¾èµ–å…³ç³»å£°æ˜ä¸ºä¸å¯å˜çš„ï¼Œå³ä¸€æ—¦å¯¹è±¡è¢«åˆ›å»ºï¼Œå®ƒçš„ä¾èµ–å…³ç³»å°±ä¸èƒ½å†è¢«ä¿®æ”¹ã€‚è¿™æœ‰åŠ©äºç¡®ä¿å¯¹è±¡åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¿æŒä¸€è‡´æ€§ã€‚</li>
<li>é¿å…å¾ªç¯ä¾èµ–é—®é¢˜ï¼šä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥å¯ä»¥æœ‰æ•ˆåœ°é¿å…å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚å¦‚æœä¸¤ä¸ªç±»ç›¸äº’ä¾èµ–ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ï¼Œå®ƒä»¬å°†æ— æ³•åˆ›å»ºå¾ªç¯ä¾èµ–ã€‚</li>
<li>æµ‹è¯•æ–¹ä¾¿ï¼šæ„é€ å‡½æ•°æ³¨å…¥ä½¿å¾—åœ¨å•å…ƒæµ‹è¯•ä¸­æ›´å®¹æ˜“è¿›è¡Œæ¨¡æ‹Ÿå’Œæ³¨å…¥æµ‹è¯•æ•°æ®ã€‚</li>
</ol>
</li>
<li><p>@Autowired ä¸ @Resourceçš„åŒºåˆ«ã€‚</p>
<ul>
<li>ç›¸åŒç‚¹ï¼šéƒ½æ˜¯åšbeançš„æ³¨å…¥æ—¶ä½¿ç”¨ï¼Œéƒ½å¯ä»¥å†™åœ¨å­—æ®µå’Œsetteræ–¹æ³•ä¸Šã€‚ä¸¤è€…å¦‚æœéƒ½å†™åœ¨å­—æ®µä¸Šï¼Œå°±ä¸éœ€å†å†™setterã€‚(æ³¨:æœ€å¥½æ˜¯æ”¾åœ¨setteræ–¹æ³•ä¸Šï¼Œå› ä¸ºè¿™æ ·æ›´ç¬¦åˆé¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œé€šè¿‡setã€getå»æ“ä½œå±æ€§ï¼Œè€Œä¸æ˜¯ç›´æ¥å»æ“ä½œå±æ€§ã€‚)<ul>
<li>@Autowired å¯ä»¥æ›´å‡†ç¡®åœ°æ§åˆ¶åº”è¯¥åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚æ­¤æ³¨è§£ç”¨äºåœ¨ setter æ–¹æ³•ï¼Œæ„é€ å‡½æ•°ï¼Œå…·æœ‰ä»»æ„åç§°æˆ–å¤šä¸ªå‚æ•°çš„å±æ€§æˆ–æ–¹æ³•ä¸Šè‡ªåŠ¨è£…é…beanã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ç±»å‹é©±åŠ¨çš„æ³¨å…¥ã€‚</li>
<li>@Required åº”ç”¨äº bean å±æ€§ setter æ–¹æ³•ã€‚æ­¤æ³¨è§£ä»…æŒ‡ç¤ºå¿…é¡»åœ¨é…ç½®æ—¶ä½¿ç”¨bean å®šä¹‰ä¸­çš„æ˜¾å¼å±æ€§å€¼æˆ–ä½¿ç”¨è‡ªåŠ¨è£…é…å¡«å……å—å½±å“çš„ beanå±æ€§ã€‚å¦‚æœå°šæœªå¡«å……å—å½±å“çš„ bean å±æ€§ï¼Œåˆ™å®¹å™¨å°†æŠ›å‡º eanInitializationExceptionã€‚</li>
</ul>
</li>
<li>ä¸åŒç‚¹<ol>
<li>æºå¤´ä¸åŒï¼š<ul>
<li><code>@Autowired</code> æ˜¯ Spring æ¡†æ¶è‡ªå¸¦çš„æ³¨è§£ï¼Œå±äº Spring æ ¸å¿ƒ;</li>
<li><code>@Resource</code> æ˜¯ Java EEæä¾›çš„æ³¨è§£ï¼Œä¸ä»…è¢« Spring æ”¯æŒï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»– Java EE å®¹å™¨ä¸­ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li>æ³¨å…¥ç±»å‹ä¸åŒï¼š<ul>
<li><code>@Autowired</code>ï¼š ä¸»è¦é€šè¿‡ byType çš„æ–¹å¼è¿›è¡Œæ³¨å…¥ï¼Œå³æŒ‰ç…§å±æ€§çš„æ•°æ®ç±»å‹ä» Spring å®¹å™¨ä¸­åŒ¹é…å¹¶æ³¨å…¥ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªåŒ¹é…çš„ Beanï¼Œåˆ™å¯ä»¥é€šè¿‡ <code>@Qualifier</code> è¿›è¡Œè¿›ä¸€æ­¥æŒ‡å®šã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier(&quot;nameDao&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String nameDao;</span><br></pre></td></tr></table></figure></li>
<li><code>@Resource</code>ï¼š ä¸»è¦é€šè¿‡ byName çš„æ–¹å¼è¿›è¡Œæ³¨å…¥ï¼Œå³æŒ‰ç…§å±æ€§çš„åç§°ä» Spring å®¹å™¨ä¸­åŒ¹é…å¹¶æ³¨å…¥ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ <code>name</code> å±æ€§æŒ‡å®šè¦æ³¨å…¥çš„ Bean åç§°ã€‚ä½œç”¨ç›¸å½“äº@Autowiredï¼Œåªä¸è¿‡@AutowiredæŒ‰ç…§byTypeè‡ªåŠ¨æ³¨å…¥ã€‚ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Required</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name=name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 @Resourceè£…é…é¡ºåº:<br> â‘ å¦‚æœåŒæ—¶æŒ‡å®šäº†nameå’Œtypeï¼Œåˆ™ä»Springä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°å”¯ä¸€åŒ¹é…çš„beanè¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°åˆ™æ€å‡ºå¼‚å¸¸ã€‚<br> â‘¡å¦‚æœæŒ‡å®šäº†nameï¼Œåˆ™ä»ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾åç§°(id)åŒ¹é…çš„beanè¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚<br> â‘¢å¦‚æœæŒ‡å®šäº†typeï¼Œåˆ™ä»ä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°ç±»ä¼¼åŒ¹é…çš„å”¯ä¸€beanè¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°æˆ–æ˜¯æ‰¾åˆ°å¤šä¸ªï¼Œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br> â‘£å¦‚æœæ—¢æ²¡æœ‰æŒ‡å®šnameï¼Œåˆæ²¡æœ‰æŒ‡å®štypeï¼Œåˆ™è‡ªåŠ¨æŒ‰ç…§byNameæ–¹å¼è¿›è¡Œè£…é…;å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œåˆ™å›é€€ä¸ºä¸€ä¸ªåŸå§‹ç±»å‹è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ™è‡ªåŠ¨è£…é…ã€‚</li>
</ul>
</li>
<li>å¯é€‰æ€§ï¼š<ul>
<li><code>@Autowired</code>ï¼šé»˜è®¤å¿…é¡»æ³¨å…¥çš„ï¼Œå¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„ Beanï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä½†å¯ä»¥é€šè¿‡è®¾ç½® <code>required = false</code> æ¥å…è®¸ null å€¼ã€‚</li>
<li><code>@Resource</code>ï¼š é»˜è®¤æ˜¯å¿…é¡»æ³¨å…¥çš„ï¼Œä¸æ”¯æŒè®¾ç½®ç±»ä¼¼ <code>required</code> çš„å±æ€§ã€‚ä½†å¯ä»¥é€šè¿‡ <code>@Resource(lookup = &quot;someName&quot;)</code> æŒ‡å®š <code>lookup</code> å±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„ Beanï¼Œåˆ™ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="Spring-æ ¸å¿ƒæ¨¡å—"><a href="#Spring-æ ¸å¿ƒæ¨¡å—" class="headerlink" title="Spring æ ¸å¿ƒæ¨¡å—"></a>Spring æ ¸å¿ƒæ¨¡å—</h4><ul>
<li><p>Springä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ç»„æˆ:</p>
<ul>
<li>Core Container<ul>
<li>Spring Core: æ ¸å¿ƒç±»åº“ï¼Œæä¾›IOCæœåŠ¡;</li>
<li>Spring Beanï¼šæ„æˆç”¨æˆ·åº”ç”¨ç¨‹åºä¸»å¹²çš„å¯¹è±¡ã€‚Bean ç”± Spring IoC å®¹å™¨ç®¡ç†ã€å®ä¾‹åŒ–ã€é…ç½®ã€è£…é…å’Œç®¡ç†ã€‚Bean æ˜¯åŸºäºç”¨æˆ·æä¾›ç»™å®¹å™¨çš„é…ç½®å…ƒæ•°æ®åˆ›å»ºã€‚</li>
<li>Spring Context: æä¾›æ¡†æ¶å¼çš„Beanè®¿é—®æ–¹å¼ï¼Œä»¥åŠä¼ä¸šçº§åŠŸèƒ½ (JNDIã€å®šæ—¶ä»»åŠ¡ç­‰);</li>
</ul>
</li>
<li>Spring AOP: AOPæœåŠ¡ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹;</li>
<li>Data Access<ul>
<li>Spring DAO: å¯¹JDBCçš„æŠ½è±¡ï¼Œç®€åŒ–äº†æ•°æ®è®¿é—®å¼‚å¸¸çš„å¤„ç†:</li>
<li>Spring ORM: å¯¹ç°æœ‰çš„ORMæ¡†æ¶çš„æ”¯æŒ;</li>
</ul>
</li>
<li>Web<ul>
<li>Spring Web: æä¾›äº†åŸºæœ¬çš„é¢å‘Webçš„ç»¼åˆç‰¹æ€§ï¼Œä¾‹å¦‚å¤šæ–¹æ–‡ä»¶ä¸Šä¼ </li>
<li>Spring MVCï¼šæä¾›é¢å‘Webåº”ç”¨çš„Model-View-Controllerå®ç°ã€‚</li>
<li>Servlet</li>
<li>Socket</li>
</ul>
</li>
<li>Testï¼šè¯¥å±‚ä¸ºä½¿ç”¨ JUnit å’Œ TestNG è¿›è¡Œæµ‹è¯•æä¾›æ”¯æŒã€‚</li>
<li>å‡ ä¸ªæ‚é¡¹æ¨¡å—: Messaging â€“ è¯¥æ¨¡å—ä¸º STOMP æä¾›æ”¯æŒã€‚å®ƒè¿˜æ”¯æŒæ³¨è§£ç¼–ç¨‹æ¨¡å‹ï¼Œè¯¥æ¨¡å‹ç”¨äºä» WebSocket å®¢æˆ·ç«¯è·¯ç”±å’Œå¤„ç† STOMP æ¶ˆæ¯ã€‚Aspects â€“è¯¥æ¨¡å—ä¸ºä¸ AspectJ çš„é›†æˆæä¾›æ”¯æŒã€‚</li>
</ul>
</li>
<li><p>Spring Beanã€‚ä¸€ä¸ª Spring Bean å®šä¹‰ åŒ…å«ä»€ä¹ˆï¼Ÿ<br>Spring beans æ˜¯é‚£äº›å½¢æˆ Spring åº”ç”¨çš„ä¸»å¹²çš„ java å¯¹è±¡ã€‚å®ƒä»¬è¢« Spring IOCå®¹å™¨åˆå§‹åŒ–ï¼Œè£…é…å’Œç®¡ç†ã€‚è¿™äº› beans é€šè¿‡å®¹å™¨ä¸­é…ç½®çš„å…ƒæ•°æ®åˆ›å»ºï¼Œæ¯”å¦‚ä»¥ XML æ–‡ä»¶ä¸­ çš„å½¢å¼å®šä¹‰ã€‚Spring æ¡†æ¶å®šä¹‰çš„ beans éƒ½æ˜¯å•ä»¶beansã€‚åœ¨ bean tag ä¸­æœ‰ä¸ªå±æ€§â€singletonâ€ï¼Œå¦‚æœå®ƒè¢«èµ‹ä¸º TRUEï¼Œbean å°±æ˜¯å•ä»¶ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªprototype beanã€‚é»˜è®¤æ˜¯ TRUEï¼Œæ‰€ä»¥æ‰€æœ‰åœ¨ Spring æ¡†æ¶ä¸­çš„ beans ç¼ºçœéƒ½æ˜¯å•ä»¶ã€‚<br>ä¸€ä¸ª Spring Bean çš„å®šä¹‰åŒ…å«å®¹å™¨å¿…çŸ¥çš„æ‰€æœ‰é…ç½®å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªbeanï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¯¦æƒ…åŠå®ƒçš„ä¾èµ–ã€‚</p>
</li>
<li><p>Spring æä¾›äº†å“ªäº›é…ç½®æ–¹å¼ï¼Ÿä¸€èˆ¬æ˜¯æ€ä¹ˆå®šä¹‰Beançš„ï¼Ÿ</p>
<ul>
<li>åŸºäº xml é…ç½®<br>  bean æ‰€éœ€çš„ä¾èµ–é¡¹å’ŒæœåŠ¡åœ¨ XML æ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šã€‚è¿™äº›é…ç½®æ–‡ä»¶é€šå¸¸åŒ…å«è®¸å¤š bean å®šä¹‰å’Œç‰¹å®šäºåº”ç”¨ç¨‹åºçš„é…ç½®é€‰é¡¹ã€‚å®ƒä»¬é€šå¸¸ä»¥ bean æ ‡ç­¾å¼€å¤´ã€‚ä¾‹å¦‚ï¼š  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentbean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.edureka.firstSpring.StudentBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Edureka&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>åŸºäºæ³¨è§£é…ç½®<br>  é€šè¿‡åœ¨ç›¸å…³çš„ç±»ã€æ–¹æ³•æˆ–å­—æ®µå£°æ˜ä¸Šä½¿ç”¨æ³¨è§£ï¼Œå°† bean é…ç½®ä¸ºç»„ä»¶ç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ XML æ¥æè¿° bean è£…é…ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­æœªæ‰“å¼€æ³¨è§£è£…é…ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦åœ¨ä½¿ç”¨å®ƒä¹‹å‰åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å®ƒã€‚ä¾‹å¦‚ï¼š  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- bean definitions go here --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>???åŸºäº Java API é…ç½®<br>  Spring çš„ Java é…ç½®æ˜¯é€šè¿‡ä½¿ç”¨ @Bean å’Œ @Configuration æ¥å®ç°ã€‚<br>  1ã€ @Bean æ³¨è§£æ‰®æ¼”ä¸ å…ƒç´ ç›¸åŒçš„è§’è‰²ã€‚<br>  2ã€ @Configuration ç±»å…è®¸é€šè¿‡ç®€å•åœ°è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„å…¶ä»– @Bean æ–¹æ³•æ¥å®šä¹‰ bean é—´ä¾èµ–å…³ç³»ã€‚ ä¾‹å¦‚ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> StudentBean <span class="title function_">myStudent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StudentBean</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>ä¾èµ–æ³¨å…¥çš„æ–¹æ³•æœ‰å‡ ç§ï¼Ÿ<code>@Autowired</code>æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p>
<ol>
<li>æ„é€ å™¨æ³¨å…¥ï¼šå°†è¢«ä¾èµ–å¯¹è±¡é€šè¿‡æ„é€ å‡½æ•°çš„å‚æ•°æ³¨å…¥ç»™ä¾èµ–å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–å¯¹è±¡çš„æ—¶å€™æ³¨å…¥ã€‚<br>  ä¼˜ç‚¹:å¯¹è±¡åˆå§‹åŒ–å®Œæˆåä¾¿å¯è·å¾—å¯ä½¿ç”¨çš„å¯¹è±¡ã€‚<br>  ç¼ºç‚¹: å½“éœ€è¦æ³¨å…¥çš„å¯¹è±¡å¾ˆå¤šæ—¶ï¼Œæ„é€ å™¨å‚æ•°åˆ—è¡¨å°†ä¼šå¾ˆé•¿ï¼Œä¸å¤Ÿçµæ´»ã€‚è‹¥æœ‰å¤šç§æ³¨å…¥æ–¹å¼ï¼Œæ¯ç§æ–¹å¼åªéœ€æ³¨å…¥æŒ‡å®šå‡ ä¸ªä¾èµ–ï¼Œé‚£ä¹ˆå°±éœ€è¦æä¾›å¤šä¸ªé‡è½½çš„æ„é€ å‡½æ•°ï¼Œéº»çƒ¦ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">(MyDependency myDependency)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.myDependency = myDependency;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>setteræ–¹æ³•æ³¨å…¥ï¼šIOC Service Provideré€šè¿‡è°ƒç”¨æˆå‘˜å˜é‡æä¾›çš„setterå‡½æ•°å°†è¢«ä¾èµ–å¯¹è±¡æ³¨å…¥ç»™ä¾èµ–ç±»<br>  ä¼˜ç‚¹: çµæ´»ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°æ³¨å…¥éœ€è¦çš„å¯¹è±¡ã€‚ç”¨çš„æœ€å¤šã€‚<br>  ç¼ºç‚¹: ä¾èµ–å¯¹è±¡åˆå§‹åŒ–å®Œæˆåï¼Œç”±äºå°šæœªæ³¨å…¥è¢«ä¾èµ–å¯¹è±¡ï¼Œå› æ­¤è¿˜ä¸èƒ½ä½¿ç”¨ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMyDependency</span><span class="params">(MyDependency myDependency)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.myDependency = myDependency;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ¥å£æ³¨å…¥ï¼šä¾èµ–ç±»å¿…é¡»è¦å®ç°æŒ‡å®šçš„æ¥å£ï¼Œç„¶åå®ç°è¯¥æ¥å£ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°±æ˜¯ç”¨äºä¾èµ–æ³¨å…¥ã€‚è¯¥å‡½æ•°çš„å‚æ•°å°±æ˜¯è¦æ³¨å…¥çš„å¯¹è±¡ã€‚<br>  ä¼˜ç‚¹: æ¥å£æ³¨å…¥ä¸­ï¼Œæ¥å£çš„åå­—ã€å‡½æ•°çš„åå­—éƒ½ä¸é‡è¦ï¼Œåªè¦ä¿è¯å‡½æ•°çš„å‚æ•°æ˜¯è¦æ³¨å…¥çš„å¯¹è±¡ç±»å‹å³å¯ã€‚<br>  ç¼ºç‚¹ï¼šä¾µå…¥æ€§å¤ªå¼ºï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚PS:ä»€ä¹ˆæ˜¯ä¾µå…¥?å¦‚æœç±»Aè¦ä½¿ç”¨åˆ«äººæä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè‹¥ä¸ºäº†ä½¿ç”¨è¿™åŠŸèƒ½ï¼Œéœ€è¦åœ¨è‡ªå·±çš„ç±»ä¸­å¢åŠ é¢å¤–çš„ä»£ç ï¼Œè¿™å°±æ˜¯ä¾µå…¥æ€§ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">injectDependency</span><span class="params">(MyDependency myDependency)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> <span class="keyword">implements</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MyDependency myDependency;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">injectDependency</span><span class="params">(MyDependency myDependency)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.myDependency = myDependency;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨å»ºè®®ï¼šç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetter æ–¹æ³•å®ç°å¯é€‰ä¾èµ–ã€‚</li>
<li>ä½¿ç”¨ @Autowired æ³¨è§£å¯ä»¥å¯¹å­—æ®µè¿›è¡Œä¾èµ–æ³¨å…¥ã€‚å…·ä½“æ³¨å…¥æ–¹å¼å–å†³äºè¢«æ³¨å…¥çš„å­—æ®µçš„ç±»å‹ï¼Œå¯ä»¥æ˜¯æ„é€ å™¨æ³¨å…¥ã€setter æ–¹æ³•æ³¨å…¥ã€æ¥å£æ³¨å…¥ç­‰ã€‚</li>
</ol>
</li>
</ul>
<ul>
<li><strong>Spring IOC</strong><br>  Spring IOC è§£å†³çš„æ˜¯å¯¹è±¡ç®¡ç†å’Œå¯¹è±¡ä¾èµ–çš„é—®é¢˜ã€‚IOCå®¹å™¨å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œæˆ‘ä»¬éƒ½æŠŠè¯¥å¯¹è±¡äº¤ç»™å·¥å‚ï¼Œå·¥å‚ç®¡ç†è¿™äº›å¯¹è±¡çš„åˆ›å»ºä»¥åŠä¾èµ–å…³ç³»ï¼›éœ€è¦ç”¨å¯¹è±¡çš„æ—¶å€™ï¼Œä»å·¥å‚é‡Œè¾¹è·å–å°±å¥½äº†<ul>
<li>ã€Œæ§åˆ¶åè½¬ã€æŒ‡ï¼šæŠŠåŸæœ‰è‡ªå·±æŒæ§çš„äº‹äº¤ç»™åˆ«äººå»å¤„ç†ã€‚å®ƒæ›´å¤šçš„æ˜¯ä¸€ç§æ€æƒ³æˆ–è€…å¯ä»¥ç†è§£ä¸ºè®¾è®¡æ¨¡å¼ã€‚æ¯”å¦‚ï¼šæœ¬æ¥ç”±æˆ‘ä»¬è‡ªå·±newå‡ºæ¥çš„å¯¹è±¡ï¼Œç°åœ¨äº¤ç”±IOCå®¹å™¨ï¼ŒæŠŠå¯¹è±¡çš„æ§åˆ¶æƒäº¤ç»™å®ƒæ–¹</li>
<li>ã€Œæ³¨å…¥ä¾èµ–ã€æ˜¯ã€Œæ§åˆ¶åè½¬ã€çš„å®ç°æ–¹å¼ï¼Œå¯¹è±¡æ— éœ€è‡ªè¡Œåˆ›å»ºæˆ–è€…ç®¡ç†å®ƒçš„ä¾èµ–å…³ç³»ï¼Œä¾èµ–å…³ç³»å°†è¢«ã€Œè‡ªåŠ¨æ³¨å…¥ã€åˆ°éœ€è¦å®ƒä»¬çš„å¯¹è±¡å½“ä¸­å»</li>
<li>ç”¨ Spring IOC æœ‰ä»€ä¹ˆå¥½å¤„å—ï¼Ÿä¸»è¦åœ¨äºã€Œå°†å¯¹è±¡é›†ä¸­ç»Ÿä¸€ç®¡ç†ã€å¹¶ä¸”ã€Œé™ä½è€¦åˆåº¦ã€<br>  å¦‚æœé¡¹ç›®é‡Œçš„å¯¹è±¡éƒ½æ˜¯å°±newä¸‹å°±å®Œäº‹äº†ï¼Œæ²¡æœ‰å¤šä¸ªå®ç°ç±»ï¼Œé‚£æ²¡äº‹ï¼Œä¸ç”¨Springä¹Ÿæ²¡å•¥é—®é¢˜ã€‚ä½† Springæ ¸å¿ƒä¸ä»…ä»…IOCå•Šï¼Œé™¤äº†æŠŠå¯¹è±¡åˆ›å»ºå‡ºæ¥ï¼Œè¿˜æœ‰ä¸€æ•´å¥—çš„Beanç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ç”¨Spring IOC å¯ä»¥æ–¹ä¾¿ å•å…ƒæµ‹è¯•ã€å¯¹è±¡åˆ›å»ºå¤æ‚ã€å¯¹è±¡ä¾èµ–å¤æ‚ã€å•ä¾‹ç­‰ç­‰çš„ï¼Œä»€ä¹ˆéƒ½å¯ä»¥äº¤ç»™Spring IOC</li>
<li>åˆ—ä¸¾ IoC çš„ä¸€äº›å¥½å¤„ã€‚<br>  å®ƒå°†æœ€å°åŒ–åº”ç”¨ç¨‹åºä¸­çš„ä»£ç é‡ã€‚<br>  ???å®ƒå°†ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºæ˜“äºæµ‹è¯•ï¼Œå› ä¸ºå®ƒä¸éœ€è¦å•å…ƒæµ‹è¯•ç”¨ä¾‹ä¸­çš„ä»»ä½•å•ä¾‹æˆ– JNDI æŸ¥æ‰¾æœºåˆ¶ã€‚<br>  å®ƒä»¥æœ€å°çš„å½±å“å’Œæœ€å°‘çš„ä¾µå…¥æœºåˆ¶ä¿ƒè¿›æ¾è€¦åˆã€‚<br>  æ”¯æŒå³æ—¶çš„å®ä¾‹åŒ–å’Œå»¶è¿ŸåŠ è½½æœåŠ¡ã€‚</li>
<li>spring ä¸­æœ‰å¤šå°‘ç§ IOC å®¹å™¨ï¼Ÿ<ul>
<li>BeanFactory - BeanFactory å°±åƒä¸€ä¸ªåŒ…å« bean é›†åˆçš„å·¥å‚ç±»ã€‚å®ƒä¼šåœ¨å®¢æˆ·ç«¯è¦æ±‚æ—¶å®ä¾‹åŒ– beanã€‚</li>
<li>ApplicationContext - ApplicationContext æ¥å£æ‰©å±•äº† BeanFactory æ¥å£ã€‚å®ƒåœ¨ BeanFactory åŸºç¡€ä¸Šæä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚</li>
</ul>
</li>
<li>Spring IoC çš„å®ç°æœºåˆ¶ï¼š<strong>IoC çš„å®ç°åŸç†å°±æ˜¯å·¥å‚æ¨¡å¼åŠ åå°„æœºåˆ¶</strong>ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span> <span class="keyword">implements</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;System.out.println(<span class="string">&quot;Apple&quot;</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Orange</span> <span class="keyword">implements</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;System.out.println(<span class="string">&quot;Orange&quot;</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fruit <span class="title function_">getInstance</span><span class="params">(String ClassName)</span> &#123;</span><br><span class="line">        Fruit f=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            f=(Fruit)Class.forName(ClassName).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] a)</span> &#123;</span><br><span class="line">        Fruit f=Factory.getInstance(<span class="string">&quot;io.github.dunwu.spring.Apple&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(f!=<span class="literal">null</span>)&#123;f.eat();&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<ul>
<li><p>Iocçš„åº•å±‚å®ç°<br>1ã€å…ˆé€šè¿‡createBeanFactoryåˆ›å»ºå‡ºä¸€ä¸ªBeanå·¥å‚(DefaultListableBeanFactory)<br>2ã€å¼€å§‹å¾ªç¯åˆ›å»ºå¯¹è±¡ï¼Œå› ä¸ºå®¹å™¨ä¸­çš„beané»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ï¼Œæ‰€ä»¥ä¼˜å…ˆé€šè¿‡getBean,doGetBeanä»å®¹å™¨ä¸­æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°çš„è¯<br>3ã€é€šè¿‡createBean,doCreateBeanæ–¹æ³•ï¼Œä»¥åå°„çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯æ— å‚çš„æ„é€ æ–¹æ³•(getDeclaredConstructornewinstance)<br>4ã€è¿›è¡Œå¯¹è±¡çš„å±æ€§å¡«å……populateBean<br>5ã€è¿›è¡Œå…¶ä»–çš„åˆå§‹åŒ–æ“ä½œ(initializingBean)</p>
</li>
<li><p>ApplicationContext å’Œ BeanFactory æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>Beanfactonyæ˜¯Springä¸­éå¸¸æ ¸å¿ƒçš„ç»„ä»¶ï¼Œè¡¨ç¤ºBeanå·¥å‚ï¼Œå¯ä»¥ç”ŸæˆBeanï¼Œç»´æŠ¤Beanï¼Œè€ŒAppitcationContextç»§æ‰¿äº†Beanfactony,æ‰€ä»¥ApplicationContextæ‹¥æœ‰Beanfactonæ‰€æœ‰çš„ç‰¹ç‚¹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªBeanå·¥å‚ï¼Œä½†æ˜¯AppicationContexté™¤å¼€ç»§æ‰¿äº†Beanfactonä¹‹å¤–ï¼Œè¿˜ç»§æ‰¿äº†è¯¸å¦‚EnvronmentCapableã€Messaaesourceã€AppicationEventPubisheç­‰æ¥å£ï¼Œä»è€ŒApplicationCcontextè¿˜æœ‰è·å–ç³»ç»Ÿç¯å¢ƒå˜é‡ã€å›½é™…åŒ–ã€äº‹ä»¶å‘å¸ƒç­‰åŠŸèƒ½ï¼Œè¿™æ˜¯BeanFactoryæ‰€ä¸å…·å¤‡çš„.<br>Application contexts æä¾›ä¸€ç§æ–¹æ³•å¤„ç†æ–‡æœ¬æ¶ˆæ¯ï¼Œä¸€ä¸ªé€šå¸¸çš„åšæ³•æ˜¯åŠ è½½æ–‡ä»¶èµ„æºï¼ˆæ¯”å¦‚é•œåƒï¼‰ï¼Œå®ƒä»¬å¯ä»¥å‘æ³¨å†Œä¸ºç›‘å¬å™¨çš„ bean å‘å¸ƒäº‹ä»¶ã€‚å¦å¤–ï¼Œåœ¨å®¹å™¨æˆ–å®¹å™¨å†…çš„å¯¹è±¡ä¸Šæ‰§è¡Œçš„é‚£äº›ä¸å¾—ä¸ç”± bean å·¥å‚ä»¥ç¨‹åºåŒ–æ–¹å¼å¤„ç†çš„æ“ä½œï¼Œå¯ä»¥åœ¨Application contexts ä¸­ä»¥å£°æ˜çš„æ–¹å¼å¤„ç†ã€‚Application contexts å®ç°äº†MessageSource æ¥å£ï¼Œè¯¥æ¥å£çš„å®ç°ä»¥å¯æ’æ‹”çš„æ–¹å¼æä¾›è·å–æœ¬åœ°åŒ–æ¶ˆæ¯çš„æ–¹æ³•ã€‚  </p>
</li>
<li><p>ApplicationContext é€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆ? </p>
<ul>
<li>FileSystemXmlApplicationContextï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ª XML æ–‡ä»¶ä¸­åŠ è½½ beans çš„å®šä¹‰ï¼ŒXML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚  </li>
<li>ClassPathXmlApplicationContextï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ª XML æ–‡ä»¶ä¸­åŠ è½½ beans çš„å®šä¹‰ï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½® classpath å› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨ classpathé‡Œæ‰¾ bean é…ç½®ã€‚ </li>
<li>WebXmlApplicationContextï¼šæ­¤å®¹å™¨åŠ è½½ä¸€ä¸ª XML æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ª WEB åº”ç”¨çš„æ‰€æœ‰ beanã€‚</li>
</ul>
</li>
<li><p>Bean Factory ä¸ FactoryBean æœ‰ä»€ä¹ˆåŒºåˆ«?<br>ç›¸åŒç‚¹:éƒ½æ˜¯ç”¨æ¥åˆ›å»ºbeanå¯¹è±¡çš„<br>ä¸åŒç‚¹:ä½¿ç”¨BeanFactoryåˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¿…é¡»è¦é“å¾ªä¸¥æ ¼çš„ç”Ÿå‘½å‘¨æœŸæµç¨‹ï¼Œå¤ªå¤æ‚äº†ï¼Œï¼Œå¦‚æœæƒ³è¦ç®€å•çš„è‡ªå®šä¹‰æŸä¸ªå¯¹è±¡çš„åˆ›å»ºï¼ŒåŒæ—¶åˆ›å»ºå®Œæˆçš„å¯¹è±¡æƒ³äº¤ç»™springæ¥ç®¡ç†ï¼Œé‚£ä¹ˆå°±éœ€è¦å®ç°FactroyBeanæ¥å£äº†ï¼ˆBean Factoryæ ‡å‡†åŒ–ï¼ŒFactoryBeanä¸ªæ€§åŒ–ï¼‰<br>issingleton:æ˜¯å¦æ˜¯å•ä¾‹å¯¹è±¡ã€getObjectType:è·å–è¿”å›å¯¹è±¡çš„ç±»å‹ã€getobject:è‡ªå®šä¹‰åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹(newï¼Œåå°„ï¼ŒåŠ¨æ€ä»£ç†)</p>
</li>
<li><p>Springå®¹å™¨å¯åŠ¨æµç¨‹æ˜¯æ€æ ·çš„<br>1ï¼Œåœ¨åˆ›å»ºSpringå®¹å™¨ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨Springæ—¶:<br>2ï¼Œé¦–å…ˆä¼šè¿›è¡Œæ‰«æï¼Œæ‰«æå¾—åˆ°æ‰€æœ‰çš„BeanDefinitionå¯¹è±¡ï¼Œå¹¶å­˜åœ¨ä¸€ä¸ªMapä¸­<br>3ï¼Œç„¶åç­›é€‰å‡ºéæ‡’åŠ å¼±çš„å•ä¾‹BeanDefintonè¿›è¡Œåˆ›å»ºBeanï¼Œå¯¹äºå¤šä¾‹Beanä¸éœ€è¦åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­å»è¿›è¡Œåˆ›å»ºï¼Œå¯¹äºå¤šä¾‹Beanä¼šåœ¨æ¯æ¬¡è·å–Beanæ—¶åˆ©ç”¨BeanDeinitionå»å»º<br>4ï¼Œåˆ©ç”¨BeanDefinitionåˆ›å»ºBeanå°±æ˜¯Beançš„åˆ›å»ºç”Ÿå‘½å› æœŸï¼Œè¿™æœŸé—´åŒ…æ‹¬äº†åˆå¹¶BeanDefintionã€æ¨æ–­æ„é€ æ³•ã€å®ä¾‹åŒ–ã€å±æ€§å¡«å……ã€åˆå§‹åŒ–å‰ã€åˆå§‹åŒ–ã€åˆå§‹åŒ–åç­‰æ­¥éª¤å…¶ä¸­AOPå°±æ˜¯å‘ç”Ÿåœ¨åˆå§‹åŒ–åè¿™ä¸€æ­¥éª¤ä¸­<br>5ï¼Œå•ä¾‹Beanåˆ›å»ºå®Œäº†ä¹‹åï¼ŒSpringä¼šå‘å¸ƒä¸€ä¸ªå®¹å™¨å¯åŠ¨äº‹ä»¶<br>6ï¼ŒSpringå¯åŠ¨ç»“æŸ<br>7ï¼Œåœ¨æºç ä¸­ä¼šæ›´å¤æ‚ï¼Œæ¯”å¦‚æºç ä¸­ä¼šæä¾›ä¸€äº›æ¨¡æ¿æ–¹æ³•ï¼Œè®©å­ç±»æ¥å®ç°ï¼Œæ¯”å¦‚æºç ä¸­è¿˜æ¶‰åŠåˆ°ä¸€äº›BeanfatoyPostProcessorå’ŒBeanPostprocessorçš„æ³¨å†Œï¼ŒSpringçš„æå°±æ˜¯é€šè¿‡BenaFactoryPostProcessoræ¥å®ç°çš„ï¼Œä¾èµ–æ³¨å…¥å°±æ˜¯é€šè¿‡BeanPostProcessoræ¥å®ç°çš„8ã€‚åœ¨sprinaå¯åŠ¨è¿‡ç¨‹ä¸­è¿˜ä¼šå»å¤„ç†@Importç­‰æ³¨è§£</p>
</li>
<li><p>Spring æ”¯æŒé›†ä¸­ bean scopeï¼ˆèŒƒå›´ï¼‰ï¼Ÿ</p>
<ul>
<li>Spring bean æ”¯æŒ 5 ç§ scopeï¼š<ul>
<li>Singleton - æ¯ä¸ª Spring IoC å®¹å™¨ä»…æœ‰ä¸€ä¸ªå•å®ä¾‹ã€‚</li>
<li>Prototype - æ¯æ¬¡è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</li>
<li>Request - æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå¹¶ä¸”è¯¥ bean ä»…åœ¨å½“å‰ HTTP è¯·æ±‚å†…æœ‰æ•ˆã€‚</li>
<li>Session - æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼ŒåŒæ—¶è¯¥ bean ä»…åœ¨å½“å‰HTTP session å†…æœ‰æ•ˆã€‚</li>
<li>Global-session - ç±»ä¼¼äºæ ‡å‡†çš„ HTTP Session ä½œç”¨åŸŸï¼Œä¸è¿‡å®ƒä»…ä»…åœ¨åŸºäºportlet çš„ web åº”ç”¨ä¸­æ‰æœ‰æ„ä¹‰ã€‚<br>  ??? Portletè§„èŒƒå®šä¹‰äº†å…¨å±€ Session çš„æ¦‚å¿µï¼Œå®ƒè¢«æ‰€æœ‰æ„æˆæŸä¸ª portlet web åº”ç”¨çš„å„ç§ä¸åŒçš„ portlet æ‰€å…±äº«ã€‚åœ¨ globalsession ä½œç”¨åŸŸä¸­å®šä¹‰çš„ bean è¢«é™å®šäºå…¨å±€ portlet Sessionçš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´å†…ã€‚å¦‚æœä½ åœ¨ web ä¸­ä½¿ç”¨global session ä½œç”¨åŸŸæ¥æ ‡è¯† beanï¼Œé‚£ä¹ˆ web ä¼šè‡ªåŠ¨å½“æˆ session ç±»å‹æ¥ä½¿ç”¨ã€‚<br>  ä»…å½“ç”¨æˆ·ä½¿ç”¨æ”¯æŒ Web çš„ ApplicationContext æ—¶ï¼Œæœ€åä¸‰ä¸ªæ‰å¯ç”¨ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="https://leo710aka.github.io/bk/job4.png" width="650" height="300" alt="">

<ul>
<li><p>??å•ä¾‹Beanå’Œå•ä¾‹æ¨¡å¼ï¼Ÿä»€ä¹ˆæ˜¯ spring çš„å†…éƒ¨ beanï¼Ÿ<br>å•ä¾‹æ¨¡å¼è¡¨ç¤ºJVMä¸­æŸä¸ªç±»çš„å¯¹è±¡åªä¼šå­˜åœ¨å”¯ä¸€ä¸€ä¸ªã€‚è€Œå•ä¾‹Beanå¹¶ä¸è¡¨ç¤ºJVMä¸­åªèƒ½å­˜åœ¨å”¯ä¸€çš„æŸä¸ªç±»çš„Beanå¯¹è±¡ã€‚<br>åªæœ‰å°† bean ç”¨ä½œå¦ä¸€ä¸ª bean çš„å±æ€§æ—¶ï¼Œæ‰èƒ½å°† bean å£°æ˜ä¸ºå†…éƒ¨ beanã€‚ä¸ºäº†å®šä¹‰ beanï¼ŒSpring çš„åŸºäº XML çš„é…ç½®å…ƒæ•°æ®åœ¨ æˆ– ä¸­æä¾›äº† å…ƒç´ çš„ä½¿ç”¨ã€‚å†…éƒ¨ bean æ€»æ˜¯åŒ¿åçš„ï¼Œå®ƒä»¬æ€»æ˜¯ä½œä¸ºåŸå‹ã€‚</p>
</li>
<li><p><strong>SpringBeanç”Ÿå‘½å‘¨æœŸåŸç†ã€‚</strong></p>
<ol>
<li>å®ä¾‹åŒ–Beanï¼šåå°„çš„æ–¹å¼åˆ›å»ºå¯¹è±¡<br>  å¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚<br>  å¯¹äºApplicationContextå®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œé€šè¿‡è·å–BeanDefinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œå®ä¾‹åŒ–æ‰€æœ‰çš„beanã€‚</li>
<li>è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼špopulateBean(),å¾ªç¯ä¾èµ–çš„é—®é¢˜(ä¸‰çº§ç¼“å­˜)<br>  å®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œç´§æ¥ç€ï¼ŒSpringæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯ ä»¥åŠ é€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚</li>
<li>å¤„ç†Awareæ¥å£ï¼šæ¥ç€ï¼ŒSpringä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™Beanã€‚invokeAwareMethod(å®ŒæˆBeanName,BeanFactory,BeanClassLoaderå¯¹è±¡çš„å±æ€§è®¾ç½®ï¼‰        <ul>
<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanNameAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanName(String beanId)æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯Springé…ç½®æ–‡ä»¶ä¸­Beançš„idå€¼ï¼›</li>
<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanFactoryAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanFactory()æ–¹æ³•ï¼Œä¼ é€’çš„æ˜¯Springå·¥å‚è‡ªèº«ã€‚</li>
<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œä¼šè°ƒç”¨setApplicationContext(ApplicationContext)æ–¹æ³•ï¼Œä¼ å…¥Springä¸Šä¸‹æ–‡ï¼›</li>
</ul>
</li>
<li>BeanPostProcessorï¼šå¦‚æœæƒ³å¯¹Beanè‡ªå®šä¹‰å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è®©Beanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œé‚£å°†ä¼šè°ƒç”¨postProcessBeforeInitialization(Object obj, String s)æ–¹æ³•ã€‚<br>  ä½¿ç”¨æ¯”è¾ƒå¤šçš„æœ‰(ApplicationContextPostProcessor,è®¾ç½®ApplicationContext,Environment,ResourceLoader,EmbeddValueResolverç­‰å¯¹è±¡)</li>
<li>InitializingBean ä¸ init-methodï¼šå¦‚æœBeanåœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº† init-method å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„åˆå§‹åŒ–æ–¹æ³•ã€‚<br>  invokenitmethod(),åˆ¤æ–­æ˜¯å¦å®ç°äº†initializingBeanæ¥å£ï¼Œå¦‚æœæœ‰ï¼Œè°ƒç”¨afterPropertiessetæ–¹æ³•ï¼Œæ²¡æœ‰å°±ä¸è°ƒç”¨</li>
<li>è°ƒç”¨BeanPostProcessorçš„åç½®å¤„ç†æ–¹æ³•:è‹¥å­˜åœ¨ä¸ bean å…³è”çš„ä»»ä½• BeanPostProcessorsï¼Œåˆ™å°†è°ƒç”¨ postProcessAfterInitialization()æ–¹æ³•ã€‚<br>  springçš„aopå°±æ˜¯åœ¨æ­¤å¤„å®ç°çš„ï¼ŒAbstractAutoProxyCreatorã€‚æ³¨å†ŒDestuctionç›¸å…³çš„å›è°ƒæ¥å£:é’©å­å‡½æ•°</li>
<li>è·å–åˆ°å®Œæ•´çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡getBeançš„æ–¹å¼æ¥è¿›è¡Œå¯¹è±¡çš„è·å–</li>
<li>DisposableBeanï¼šå½“Beanä¸å†éœ€è¦æ—¶ï¼Œä¼šç»è¿‡æ¸…ç†é˜¶æ®µï¼Œå¦‚æœBeanå®ç°äº†DisposableBeanè¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨å…¶å®ç°çš„destroy()æ–¹æ³•ï¼›</li>
<li>destroy-methodï¼šæœ€åï¼Œå¦‚æœè¿™ä¸ªBeançš„Springé…ç½®ä¸­é…ç½®äº†destroy-methodå±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„é”€æ¯æ–¹æ³•</li>
</ol>
</li>
<li><p>Springä¸­Beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—<br>Springæœ¬èº«å¹¶æ²¡æœ‰é’ˆå¯¹Beanåšçº¿ç¨‹å®‰å…¨çš„å¤„ç†ï¼Œæ‰€ä»¥:<br>1ï¼Œå¦‚æœBeanæ˜¯æ— çŠ¶å¿—çš„ï¼Œé‚£ä¹ˆBeanåˆ™æ˜¯çº¿ç¨‹å®‰å…¨çš„<br>2ï¼Œå¦‚æœBeanæ˜¯æœ‰çŠ¶æ€çš„ï¼Œé‚£ä¹ˆBeanåˆ™ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„<br>å¦å¤–ï¼ŒBeanæ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨ï¼Œè·ŸBeançš„ä½œç”¨åŸŸæ²¡æœ‰å…³ç³»ï¼ŒBeançš„ä½œç”¨åŸŸåªæ˜¯è¡¨ç¤ºBeançš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´ï¼Œå¯¹äºä»»ä½•ç”Ÿå‘½å‘¨æœŸçš„Beanéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯çº¿æŒ¥å®‰å…¨çš„è¿˜å¾—çœ‹è¿™ä¸ªBeanæœ¬èº«ã€‚</p>
</li>
<li><p>Spring æ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜çš„ï¼Ÿ<br>å¦‚æœä¸¤ä¸ªæˆ–å¤šä¸ª Bean äº’ç›¸ä¹‹é—´æŒæœ‰å¯¹æ–¹çš„å¼•ç”¨å°±ä¼šå‘ç”Ÿå¾ªç¯ä¾èµ–ã€‚å¾ªç¯çš„ä¾èµ–å°†ä¼šå¯¼è‡´æ³¨å…¥æ­»å¾ªç¯ã€‚è¿™æ˜¯ Spring å‘ç”Ÿå¾ªç¯ä¾èµ–çš„åŸå› ã€‚å¾ªç¯ä¾èµ–æœ‰ä¸‰ç§å½¢æ€ï¼š<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Mc411S7B7?p=12&vd_source=ff210768dfaee27c0d74f9c8c50d7274">https://www.bilibili.com/video/BV1Mc411S7B7?p=12&amp;vd_source=ff210768dfaee27c0d74f9c8c50d7274</a><br>ã€ã€</p>
</li>
<li><p>ä¸‰çº§ç¼“å­˜çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼ŸSpring ä¸­å“ªäº›æƒ…å†µä¸‹ï¼Œä¸èƒ½è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ï¼Ÿ<br>p156<br>ã€ã€</p>
</li>
<li><p>ç¼“å­˜çš„æ”¾ç½®æ—¶é—´ã€åˆ é™¤æ—¶é—´ï¼Œï¼Œ<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Mc411S7B7?p=14&vd_source=ff210768dfaee27c0d74f9c8c50d7274">https://www.bilibili.com/video/BV1Mc411S7B7?p=14&amp;vd_source=ff210768dfaee27c0d74f9c8c50d7274</a></p>
</li>
<li><p><strong>Spring AOP</strong><br>AOP(Aspect-Oriented Programming), å³ é¢å‘åˆ‡é¢ç¼–ç¨‹, å®ƒä¸OOP( Object-Oriented Programming, é¢å‘å¯¹è±¡ç¼–ç¨‹) ç›¸è¾…ç›¸æˆ, æä¾›äº†ä¸OOP ä¸åŒçš„æŠ½è±¡è½¯ä»¶ç»“æ„çš„è§†è§’. åœ¨ OOP ä¸­, æˆ‘ä»¬ä»¥ç±»(class)ä½œä¸ºæˆ‘ä»¬çš„åŸºæœ¬å•å…ƒ, è€Œ AOP ä¸­çš„åŸºæœ¬å•å…ƒæ˜¯ Aspect(åˆ‡é¢)<br>Spring AOP è§£å†³çš„æ˜¯ã€Œé‡å¤æ€§ã€çš„éä¸šåŠ¡ä»£ç æŠ½å–çš„é—®é¢˜ã€‚æ‰€è°“ã€Œé¢å‘åˆ‡é¢ç¼–ç¨‹ã€åœ¨æˆ‘ç†è§£ä¸‹å…¶å®å°±æ˜¯åœ¨æ–¹æ³•å‰åå¢åŠ éä¸šåŠ¡ä»£ç ï¼Œå°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»(ä¾‹å¦‚äº‹åŠ¡å¤„ç†ã€æ—¥å¿—ç®¡ç†ã€æƒé™æ§åˆ¶ç­‰)å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚<br>AOP åº•å±‚çš„æŠ€æœ¯æ˜¯åŠ¨æ€ä»£ç†ï¼Œï¼Ÿï¼Ÿï¼Ÿåœ¨Springå†…å®ç°ä¾èµ–çš„æ˜¯BeanPostProcessorã€‚å¦‚æœè¦ä»£ç†çš„å¯¹è±¡å®ç°äº†æŸä¸ªæ¥å£ï¼Œé‚£ä¹ˆSpringAOPå°±ä¼šä½¿ç”¨JDKåŠ¨æ€ä»£ç†å»åˆ›å»ºä»£ç†å¯¹è±¡;è€Œå¯¹äºæ²¡æœ‰å®ç°æ¥å£çš„å¯¹è±¡ï¼Œå°±æ— æ³•ä½¿ç”¨IDKåŠ¨æ€ä»£ç†ï¼Œè½¬è€Œä½¿ç”¨CGlibåŠ¨æ€ä»£ç†ç”Ÿæˆä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å­ç±»æ¥ä½œä¸ºä»£ç†ã€‚</p>
<img src="https://leo710aka.github.io/bk/job3.png" width="550" height="300" alt="">
</li>
<li><p>AOP å¯ä»¥ç”¨äºçš„ä¸€äº›å¸¸è§åœºæ™¯ï¼š</p>
<ol>
<li><strong>æƒé™æ§åˆ¶ï¼š</strong> AOP å¯ä»¥ç”¨äºåœ¨æ–¹æ³•æ‰§è¡Œå‰æˆ–æ‰§è¡Œåæ·»åŠ æƒé™æ§åˆ¶çš„é€»è¾‘ï¼Œä¾‹å¦‚æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰è¶³å¤Ÿçš„æƒé™æ‰§è¡ŒæŸä¸ªæ“ä½œã€‚è¿™æ ·å¯ä»¥é¿å…å°†æƒé™æ£€æŸ¥é€»è¾‘æ•£å¸ƒåœ¨ä¸šåŠ¡ä»£ç çš„å„ä¸ªåœ°æ–¹ã€‚</li>
<li><strong>äº‹åŠ¡æ§åˆ¶ï¼š</strong> AOP å¯ä»¥ç”¨äºç®¡ç†äº‹åŠ¡ï¼Œä¾‹å¦‚åœ¨æ–¹æ³•æ‰§è¡Œå‰å¼€å¯äº‹åŠ¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œåæ ¹æ®æ‰§è¡Œç»“æœå†³å®šæ˜¯æäº¤äº‹åŠ¡è¿˜æ˜¯å›æ»šäº‹åŠ¡ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿äº‹åŠ¡çš„ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚</li>
<li><strong>æ—¥å¿—è®°å½•ï¼š</strong> AOP å¯ä»¥ç”¨äºæ·»åŠ æ—¥å¿—è®°å½•é€»è¾‘ï¼Œä¾‹å¦‚åœ¨æ–¹æ³•æ‰§è¡Œå‰è®°å½•æ–¹æ³•çš„è¾“å…¥å‚æ•°ï¼Œæ–¹æ³•æ‰§è¡Œåè®°å½•è¿”å›ç»“æœã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œæ—¥å¿—ç®¡ç†å’Œåˆ†æã€‚</li>
<li><strong>æ€§èƒ½ç›‘æ§ï¼š</strong> AOP å¯ä»¥ç”¨äºæ·»åŠ æ€§èƒ½ç›‘æ§é€»è¾‘ï¼Œä¾‹å¦‚åœ¨æ–¹æ³•æ‰§è¡Œå‰è®°å½•å¼€å§‹æ—¶é—´ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œåè®°å½•ç»“æŸæ—¶é—´ï¼Œè®¡ç®—æ–¹æ³•çš„æ‰§è¡Œæ—¶é—´ã€‚æ–¹ä¾¿è¿›è¡Œæ€§èƒ½åˆ†æå’Œä¼˜åŒ–ã€‚</li>
<li><strong>å¼‚å¸¸å¤„ç†ï¼š</strong> AOP å¯ä»¥ç”¨äºæ·»åŠ å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œä¾‹å¦‚æ•è·æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸å¹¶è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚è¿™æ ·å¯ä»¥å‡å°‘ä¸šåŠ¡ä»£ç ä¸­çš„å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œæé«˜ä»£ç çš„æ¸…æ™°åº¦ã€‚</li>
<li><strong>ç¼“å­˜ç®¡ç†ï¼š</strong> AOP å¯ä»¥ç”¨äºæ·»åŠ ç¼“å­˜ç®¡ç†é€»è¾‘ï¼Œä¾‹å¦‚åœ¨æ–¹æ³•æ‰§è¡Œå‰æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜å‘½ä¸­ï¼Œå¦‚æœæœ‰ç›´æ¥è¿”å›ç¼“å­˜ç»“æœï¼Œå¦åˆ™æ‰§è¡Œæ–¹æ³•å¹¶å°†ç»“æœç¼“å­˜èµ·æ¥ã€‚</li>
</ol>
</li>
<li><p>AspectJï¼ŸSpring AOPå’ŒAspectJ AOPæœ‰ä»€ä¹ˆåŒºåˆ«?</p>
<ul>
<li>AOPæ˜¯ä¸€ç§æ€æƒ³ï¼ŒAspectJæ˜¯ä¸€ç§å®ç°ã€‚SpringAOPä¸­å·²ç»é›†æˆäº†AspectJï¼ŒAspectJåº”è¯¥ç®—å¾—ä¸Šæ˜¯Javaç”Ÿæ€ç³»ç»Ÿä¸­æœ€å®Œæ•´çš„AOPæ¡†æ¶äº†ã€‚</li>
<li>SpringAOPæ˜¯å±äºè¿è¡Œæ—¶å¢å¼ºï¼Œè€ŒAspectæ˜¯ç¼–è¯‘æ—¶å¢å¼ºã€‚ SpringAOPåŸºäºä»£ç†(Proxying)ï¼Œè€ŒAspectJåŸºäºå­—èŠ‚ç æ“ä½œ(BytecodeManipulation)ã€‚<br>  SpringAOPå·²ç»é›†æˆäº†AspectJï¼ŒAspectåº”è¯¥ç®—å¾—ä¸Šæ˜¯Javaç”Ÿæ€ç³»ç»Ÿä¸­æœ€å®Œæ•´çš„AOPæ¡†æ¶äº†ã€‚Aspectç›¸æ¯”äºSpringAOPåŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œä½†æ˜¯SpringAOPç›¸å¯¹æ¥è¯´æ›´ç®€å•ã€‚<br>  å¦‚æœæˆ‘ä»¬çš„åˆ‡é¢æ¯”è¾ƒå°‘ï¼Œé‚£ä¹ˆä¸¤è€…æ€§èƒ½å·®å¼‚ä¸å¤§ã€‚ä½†æ˜¯ï¼Œå½“åˆ‡é¢å¤ªå¤šçš„è¯ï¼Œæœ€å¥½é€‰æ‹©AspectJï¼Œå®ƒæ¯”SpringAOPå¿«å¾ˆå¤šã€‚</li>
</ul>
</li>
<li><p>ä»€ä¹ˆæ˜¯ Aspectï¼ˆåˆ‡é¢ï¼‰ï¼Ÿ<br>Aspect ç”± pointcount å’Œ advice ç»„æˆ, å®ƒæ—¢åŒ…å«äº†æ¨ªåˆ‡é€»è¾‘çš„å®šä¹‰, ä¹ŸåŒ…æ‹¬äº†è¿æ¥ç‚¹çš„å®šä¹‰. Spring AOP å°±æ˜¯è´Ÿè´£å®æ–½åˆ‡é¢çš„æ¡†æ¶, å®ƒå°†åˆ‡é¢æ‰€å®šä¹‰çš„æ¨ªåˆ‡é€»è¾‘ç¼–ç»‡åˆ°åˆ‡é¢æ‰€æŒ‡å®šçš„è¿æ¥ç‚¹ä¸­. ç®€å•åœ°è®¤ä¸º, ä½¿ç”¨ @Aspect æ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢.<br>AOP çš„å·¥ä½œé‡å¿ƒåœ¨äºå¦‚ä½•å°†å¢å¼ºç¼–ç»‡ç›®æ ‡å¯¹è±¡çš„è¿æ¥ç‚¹ä¸Š, è¿™é‡ŒåŒ…å«ä¸¤ä¸ªå·¥ä½œ:<br>1ã€å¦‚ä½•é€šè¿‡ pointcut å’Œ advice å®šä½åˆ°ç‰¹å®šçš„  joinpoint ä¸Š<br>2ã€å¦‚ä½•åœ¨advice ä¸­ç¼–å†™åˆ‡é¢ä»£ç .</p>
</li>
<li><p>åœ¨SpringAOPä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯è¿æ¥ç‚¹å‘¢ï¼Ÿåˆ‡å…¥ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯é€šçŸ¥å‘¢ï¼Œæœ‰å“ªäº›ç±»å‹å‘¢?</p>
<ul>
<li>å…³æ³¨ç‚¹æ˜¯åº”ç”¨ä¸­ä¸€ä¸ªæ¨¡å—çš„è¡Œä¸ºï¼Œä¸€ä¸ªå…³æ³¨ç‚¹å¯èƒ½ä¼šè¢«å®šä¹‰æˆä¸€ä¸ªæˆ‘ä»¬æƒ³å®ç°çš„ä¸€ä¸ªåŠŸèƒ½ã€‚ </li>
<li>æ¨ªåˆ‡å…³æ³¨ç‚¹æ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œæ­¤å…³æ³¨ç‚¹æ˜¯æ•´ä¸ªåº”ç”¨éƒ½ä¼šä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¹¶å½±å“æ•´ä¸ªåº”ç”¨ï¼Œæ¯”å¦‚æ—¥å¿—ï¼Œå®‰å…¨å’Œæ•°æ®ä¼ è¾“ã€‚</li>
<li>è¿æ¥ç‚¹ä»£è¡¨ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æŸä¸ªä½ç½®ï¼Œåœ¨è¿™ä¸ªä½ç½®æˆ‘ä»¬å¯ä»¥æ’å…¥ä¸€ä¸ªAOPåˆ‡é¢ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸ªç¨‹åºæ‰§è¡ŒSpringAOPçš„ä½ç½®ã€‚</li>
<li>åˆ‡å…¥ç‚¹ï¼ˆJoinPointï¼‰æ˜¯ä¸€ä¸ªæˆ–ä¸€ç»„è¿æ¥ç‚¹ï¼Œé€šçŸ¥å°†åœ¨è¿™äº›ä½ç½®æ‰§è¡Œã€‚å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æˆ–åŒ¹é…çš„æ–¹ å¼æŒ‡æ˜åˆ‡å…¥ç‚¹ã€‚</li>
<li>é€šçŸ¥ï¼ˆAdviceï¼‰æ˜¯ä¸ªåœ¨æ–¹æ³•æ‰§è¡Œå‰æˆ–æ‰§è¡Œåè¦åšçš„åŠ¨ä½œï¼ˆç‰¹å®š JoinPoint å¤„çš„ Aspect æ‰€é‡‡å–çš„åŠ¨ä½œï¼‰ï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡SpringAOPæ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚Springåˆ‡é¢å¯ä»¥åº”ç”¨äº”ç§ç±»å‹çš„é€šçŸ¥:<ul>
<li>Beforeï¼šè¿™ç±» Advice åœ¨  joinpoint æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä½¿ç”¨@Before æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚ </li>
<li>After Returningï¼šè¿™ç±»å‹ Advice åœ¨è¿æ¥ç‚¹æ–¹æ³•æ­£å¸¸æ‰§è¡Œåæ‰§è¡Œï¼Œå¹¶ä½¿ç”¨@AfterReturning æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚ </li>
<li>After Throwingï¼šè¿™äº›ç±»å‹çš„ Advice ä»…åœ¨ joinpoint æ–¹æ³•é€šè¿‡æŠ›å‡ºå¼‚å¸¸é€€å‡ºå¹¶ä½¿ç”¨ @AfterThrowing æ ‡è®°é…ç½®æ—¶æ‰§è¡Œã€‚ </li>
<li>After (finally)ï¼š åœ¨è¿æ¥ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œæ— è®ºæ–¹æ³•é€€å‡ºæ˜¯æ­£å¸¸è¿˜æ˜¯å¼‚å¸¸è¿”å›ï¼Œå¹¶ä½¿ç”¨ @After æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚ </li>
<li>Aroundï¼šåœ¨è¿æ¥ç‚¹ä¹‹å‰å’Œä¹‹åæ‰§è¡Œï¼Œå¹¶ä½¿ç”¨@Around æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>AOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ </p>
<ul>
<li>é™æ€ä»£ç†ï¼šä½¿ç”¨ AOP æ¡†æ¶æä¾›çš„å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ç”Ÿæˆ AOP ä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿç§°ç¼–è¯‘æ—¶å¢å¼ºï¼› <ul>
<li>ç¼–è¯‘æ—¶ç¼–ç»‡ï¼ˆç‰¹æ®Šç¼–è¯‘å™¨å®ç°ï¼‰ </li>
<li>ç±»åŠ è½½æ—¶ç¼–ç»‡ï¼ˆç‰¹æ®Šçš„ç±»åŠ è½½å™¨å®ç°ï¼‰ã€‚</li>
</ul>
</li>
<li>åŠ¨æ€ä»£ç†ï¼šåœ¨è¿è¡Œæ—¶åœ¨å†…å­˜ä¸­â€œä¸´æ—¶â€ç”Ÿæˆ AOP åŠ¨æ€ä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºè¿è¡Œæ—¶å¢å¼ºã€‚  <ul>
<li>JDK åŠ¨æ€ä»£ç† </li>
<li>CGLIB</li>
</ul>
</li>
<li>Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>  Spring AOP åŸºäºåŠ¨æ€ä»£ç†æ–¹å¼å®ç°ï¼›AspectJ åŸºäºé™æ€ä»£ç†æ–¹å¼å®ç°ã€‚<br>  ï¼Ÿï¼Ÿï¼ŸSpringAOP ä»…æ”¯æŒæ–¹æ³•çº§åˆ«çš„ PointCutï¼›æä¾›äº†å®Œå…¨çš„ AOP æ”¯æŒï¼Œå®ƒè¿˜æ”¯æŒå±æ€§çº§åˆ«çš„ PointCutã€‚</li>
<li>ä»€ä¹ˆæ˜¯ç¼–ç»‡ï¼ˆWeavingï¼‰ï¼Ÿ<br>  ä¸ºäº†åˆ›å»ºä¸€ä¸ª advice å¯¹è±¡è€Œé“¾æ¥ä¸€ä¸ª aspect å’Œå…¶å®ƒåº”ç”¨ç±»å‹æˆ–å¯¹è±¡ï¼Œç§°ä¸ºç¼–ç»‡ï¼ˆWeavingï¼‰ã€‚åœ¨ Spring AOP ä¸­ï¼Œç¼–ç»‡åœ¨è¿è¡Œæ—¶æ‰§è¡Œã€‚</li>
<li>å¦‚ä½•ç†è§£ Spring ä¸­çš„ä»£ç†ï¼Ÿ<br>  ???å°† Advice åº”ç”¨äºç›®æ ‡å¯¹è±¡ååˆ›å»ºçš„å¯¹è±¡ç§°ä¸ºä»£ç†ã€‚åœ¨å®¢æˆ·ç«¯å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡æ˜¯ç›¸åŒçš„ã€‚</li>
</ul>
</li>
<li><p>??? <strong>SpringAOPçš„åº•å±‚å®ç°</strong></p>
<ul>
<li>æ€»: aopæ¦‚å¿µï¼Œåº”ç”¨åœºæ™¯ï¼Œ<strong>åŠ¨æ€ä»£ç†</strong></li>
<li>åˆ†: beançš„åˆ›å»ºè¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ªæ­¥éª¤å¯ä»¥å¯¹beanè¿›è¡Œæ‰©å±•å®ç°ï¼Œaopæœ¬èº«å°±æ˜¯IOC çš„ä¸€ä¸ªæ‰©å±•åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨BeanPostProcessorçš„åç½®å¤„ç†æ–¹æ³•ä¸­æ¥è¿›è¡Œå®ç°<br>  1ã€ä»£ç†å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹(adviceï¼Œåˆ‡é¢ï¼Œåˆ‡ç‚¹)<br>  2ã€é€šè¿‡jdkæˆ–è€…cglibçš„æ–¹å¼æ¥ç”Ÿæˆä»£ç†å¯¹è±¡<br>  3ã€åœ¨æ‰§è¡Œæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆ°ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œç›´æ¥å›æ‰¾åˆ°DynamicAdvisoredlnterceptorç±»ä¸­çš„interceptæ–¹æ³•ï¼Œä»æ­¤æ–¹æ³•å¼€å§‹æ‰§è¡Œ<br>  4ã€æ ¹æ®ä¹‹å‰å®šä¹‰å¥½çš„é€šçŸ¥æ¥ç”Ÿæˆæ‹¦æˆªå™¨é“¾<br>  5ã€ä»æ‹¦æˆªå™¨é“¾ä¸­ä¾æ¬¡è·å–æ¯ä¸€ä¸ªé€šçŸ¥å¼€å§‹è¿›è¡Œæ‰§è¡Œï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿æ‰¾åˆ°ä¸‹ä¸€ä¸ªé€šçŸ¥æ˜¯å“ªä¸ªï¼Œä¼šæœ‰ä¸€ä¸ªCglibMethodlnvocationçš„å¯¹è±¡ï¼Œæ‰¾çš„æ—¶å€™æ˜¯ä»-1çš„ä½ç½®ä¸€æ¬¡å¼€å§‹æŸ¥æ‰¾å¹¶ä¸”æ‰§è¡Œçš„ã€‚</li>
</ul>
</li>
<li><p>åœ¨å·¥ä½œä¸­å®é™…ç”¨åˆ°è¿‡AOPä¼˜åŒ–ä»£ç å—ï¼Ÿï¼Ÿï¼Ÿ<br>æœ‰çš„ã€‚å½“æ—¶æˆ‘ç”¨AOPæ¥å¯¹æˆ‘ä»¬å…¬å¸ç°æœ‰çš„ç›‘æ§å®¢æˆ·ç«¯è¿›è¡Œå°è£…<br>ä¸€ä¸ªç³»ç»Ÿç¦»ä¸å¼€ç›‘æ§ï¼Œç›‘æ§åŸºæœ¬çš„æŒ‡æ ‡æœ‰QPSã€RTã€ERRORç­‰ç­‰ã€‚å¯¹å¤–æš´éœ²çš„ç›‘æ§å®¢æˆ·ç«¯åªèƒ½åœ¨ä»£ç é‡Œå†™å¯¹åº”çš„ä¸ŠæŠ¥ä¿¡æ¯ï¼ˆçµæ´»ï¼Œä½†ä¼šä¸ä¸šåŠ¡ä»£ç æºæ‚åœ¨ä¸€èµ·ï¼‰ï¼Œäºæ˜¯æˆ‘åˆ©ç”¨æ³¨è§£+AOPçš„æ–¹å¼å°è£…äº†ä¸€æŠŠï¼Œåªè¦æ–¹æ³•&#x2F;ç±»ä¸Šå¸¦æœ‰æˆ‘è‡ªå®šä¹‰çš„æ³¨è§£ï¼›æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå°±ä¼šä¸ŠæŠ¥AQSã€RTç­‰ä¿¡æ¯<br>å®ç°äº†éä¸šåŠ¡ä»£ç ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»çš„æ•ˆæœï¼ˆï¼š</p>
</li>
<li><p>Spring DAO<br>Spring DAO ä½¿å¾—  JDBCï¼ŒHibernate æˆ– JDO è¿™æ ·çš„æ•°æ®è®¿é—®æŠ€æœ¯æ›´å®¹æ˜“ä»¥ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼å·¥ä½œã€‚è¿™ä½¿å¾—ç”¨æˆ·å®¹æ˜“åœ¨æŒä¹…æ€§æŠ€æœ¯ä¹‹é—´åˆ‡æ¢ã€‚å®ƒè¿˜å…è®¸æ‚¨åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæ— éœ€è€ƒè™‘æ•è·æ¯ç§æŠ€æœ¯ä¸åŒçš„å¼‚å¸¸ã€‚</p>
</li>
<li><p>Springäº‹åŠ¡ç®¡ç†ï¼š</p>
<ul>
<li>Springæ¡†æ¶æä¾›çš„ä¸€ç§äº‹åŠ¡ç®¡ç†æœºåˆ¶ï¼Œå®ƒç®€åŒ–äº†äº‹åŠ¡ç®¡ç†çš„æ“ä½œï¼Œå¹¶æä¾›äº†å¯¹ä¸åŒäº‹åŠ¡ç®¡ç†å™¨çš„ç»Ÿä¸€æ¥å£ã€‚ä¸¤ç§æ–¹å¼ï¼š</li>
<li>å£°æ˜å¼äº‹åŠ¡ï¼šé€šè¿‡åœ¨æ–¹æ³•ä¸Šä½¿ç”¨ @Transactional æ³¨è§£æ¥å£°æ˜äº‹åŠ¡ã€‚è¿™ç§æ–¹å¼æ›´ä¸ºå¸¸ç”¨ï¼Œå…è®¸å¼€å‘è€…å°†ç²¾åŠ›é›†ä¸­åœ¨ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œè€Œä¸éœ€è¦å…³å¿ƒäº‹åŠ¡çš„å¼€å§‹ã€æäº¤æˆ–å›æ»šã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myTransactionalMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ç¼–ç¨‹å¼äº‹åŠ¡ï¼šé€šè¿‡ç¼–å†™ä»£ç æ‰‹åŠ¨ç®¡ç†äº‹åŠ¡çš„å¼€å§‹ã€æäº¤æˆ–å›æ»šã€‚è™½ç„¶ä¸å¤ªå¸¸ç”¨ï¼Œä½†åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹å¯èƒ½ä¼šç”¨åˆ°ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> PlatformTransactionManager transactionManager;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myProgrammaticMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">DefaultTransactionDefinition</span> <span class="variable">def</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultTransactionDefinition</span>();</span><br><span class="line">    <span class="type">TransactionStatus</span> <span class="variable">status</span> <span class="operator">=</span> transactionManager.getTransaction(def);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">        transactionManager.commit(status);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        transactionManager.rollback(status);</span><br><span class="line">        <span class="keyword">throw</span> e;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Springäº‹åŠ¡æ˜¯å¦‚ä½•å›æ»šçš„ï¼Ÿ</p>
<ul>
<li>å³ï¼šSpringäº‹åŠ¡ç®¡ç†æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ<br>  è€ƒè™‘æ•°æ®åº“äº‹åŠ¡ï¼šå»ºç«‹è¿æ¥ï¼Œå¼€å¯äº‹åŠ¡-&gt;è¿›è¡Œsqlæ“ä½œ-&gt;æˆåŠŸï¼Œcommit&#x2F;å¤±è´¥ï¼Œrollbackï¼Œï¼Œå‘ç°sqlæ“ä½œå°±æ˜¯ä¸šåŠ¡é€»è¾‘ï¼Œå‰åå·¥ä½œå®Œå…¨ç±»ä¼¼AOPçš„around</li>
<li>æ€»ï¼šspringçš„äº‹åŠ¡æ˜¯ç”±aopæ¥å®ç°çš„ï¼Œé¦–å…ˆè¦ç”Ÿæˆå…·ä½“çš„ä»£ç†å¯¹è±¡ï¼Œç„¶åæŒ‰ç…§aopçš„æ•´å¥—æµç¨‹æ¥æ‰§è¡Œå…·ä½“çš„æ“ä½œé€»è¾‘ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¦é€šè¿‡é€šçŸ¥æ¥å®Œæˆæ ¸å¿ƒåŠŸèƒ½ï¼Œä½†æ˜¯äº‹åŠ¡ä¸æ˜¯é€šè¿‡é€šçŸ¥æ¥å®ç°çš„ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ª<strong>TansactionInterceptor</strong>æ¥å®ç°çš„ï¼Œç„¶åè°ƒç”¨invoke()å®ç°å…·ä½“çš„é€»è¾‘</li>
<li>ï¼Ÿï¼Ÿï¼Ÿåˆ†ï¼š<br>  1ã€å…ˆåšå‡†å¤‡å·¥ä½œï¼Œè§£æå„ä¸ªæ–¹æ³•ä¸Šäº‹åŠ¡ç›¸å…³çš„å±æ€§ï¼Œæ ¹æ®å…·ä½“çš„å±æ€§æ¥åˆ¤æ–­æ˜¯å¦å¼€å§‹æ–°äº‹åŠ¡<br>  2ã€å½“éœ€è¦å¼€å¯çš„æ—¶å€™ï¼Œè·å–æ•°æ®åº“è¿æ¥ï¼Œå…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ï¼Œå¼€èµ·äº‹åŠ¡<br>  3ã€æ‰§è¡Œå…·ä½“çš„sqlé€»è¾‘æ“ä½œ<br>  4ã€åœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ‰§è¡Œå¤±è´¥äº†ï¼Œé‚£ä¹ˆä¼šé€šè¿‡completeTransactionAterThrowingçœ‹æ¥å®Œæˆäº‹åŠ¡çš„å›æ»šæ“ä½œï¼Œå›æ»šçš„å…·ä½“é€»è¾‘æ˜¯é€šè¿‡doRollBackæ–¹æ³•æ¥å®ç°çš„ï¼Œå®ç°çš„æ—¶å€™ä¹Ÿæ˜¯è¦å…ˆè·å–è¿æ¥å¯¹è±¡ï¼Œé€šè¿‡è¿æ¥å¯¹è±¡æ¥å›æ»š<br>  5ã€å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰ä»»ä½•æ„å¤–æƒ…å†µçš„å‘ç”Ÿï¼Œé‚£ä¹ˆé€šè¿‡commitTransactionAfterReturningæ¥å®Œæˆäº‹åŠ¡çš„æäº¤æ“ä½œï¼Œæäº¤çš„å…·ä½“é€»è¾‘æ˜¯é€šè¿‡doCommitæ–¹æ³•æ¥å®ç°çš„ï¼Œå®ç°çš„æ—¶å€™ä¹Ÿæ˜¯è¦è·å–è¿æ¥ï¼Œé€šè¿‡è¿æ¥å¯¹è±¡æ¥æäº¤<br>  6ã€å½“äº‹åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åéœ€è¦æ¸…é™¤ç›¸å…³çš„äº‹åŠ¡ä¿¡æ¯cleanupTransactionlnfo<br>  å¦‚æœæƒ³è¦èŠçš„æ›´åŠ ç»†è‡´çš„è¯ï¼Œéœ€è¦çŸ¥é“Transactionlnfo,Transactionstatus,</li>
</ul>
</li>
<li><p>Springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„<br>1ï¼ŒSpringäº‹åŠ¡åº•å±‚æ˜¯åŸºäºæ•°æ®åº“äº‹åŠ¡å’ŒAOPæœºåˆ¶çš„<br>2ï¼Œé¦–å…ˆå¯¹äºä½¿ç”¨äº†@Transactionalæ³¨è§£çš„Beanï¼ŒSpringä¼šåˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ä½œä¸ºBean<br>3ï¼Œå½“è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­è¯¥æ–¹æ³•ä¸Šæ˜¯å¦åŠ äº†@Transactionalæ³¨è§£<br>4ï¼Œå¦‚æœåŠ äº†ï¼Œé‚£ä¹ˆåˆ™åˆ©ç”¨äº‹åŠ¡ç®¡ç†å™¨åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥ã€<br>5ï¼Œå¹¶ä¸”ä¿®æ”¹æ•°æ®åº“è¿æ¥çš„autocommitå±æ€§ä¸ºfalseï¼Œç¦æ­¢æ­¤è¿æ¥çš„ç™½åŠ¨æäº¤ï¼Œè¿™æ˜¯å®ç°Springäº‹åŠ¡éå¸¸é‡è¦çš„ä¸€æ­¥<br>6ï¼Œç„¶åæ‰§è¡Œå½“å‰æ–¹æ³•ï¼Œæ–¹æ³•ä¸­ä¼šæ‰§è¡Œsql<br>7ã€‚æ‰§è¡Œå®Œå½“å‰æ–¹æ³•åï¼Œå¦‚æœæ²¡æœ‰å‡ºç°å¼‚å¸¸å°±ç›´æ¥æäº¤äº‹åŠ¡<br>8ï¼Œå¦‚æœå‡ºç°äº†å¼‚å¸¸ï¼Œå¹¶ä¸”è¿™ä¸ªå¼‚å¸¸æ˜¯éœ€è¦å›æ»šçš„å°±ä¼šå›æ»šäº‹åŠ¡ï¼Œå¦åˆ™ä»ç„¶æäº¤äº‹åŠ¡<br>9ï¼ŒSpringäº‹åŠ¡çš„éš”ç¦»åœ¾åˆ«å¯¹åº”çš„å°±æ˜¯æ•°æ®åº“çš„éš”ç¦»çº§åˆ«<br>10ï¼ŒSpringäº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶æ˜¯Springäº‹åŠ¡è‡ªå·±å®ç°çš„ï¼Œä¹Ÿæ˜¯Springäº‹åŠ¡ä¸­æœ€å¤æ‚çš„<br>11ï¼ŒSpringäº‹åŠ¡çš„ä¼ æœºåˆ¶æ˜¯åŸºäºæ•°æ®åº“è¿æ¥æ¥åšçš„ï¼Œä¸€ä¸ªæ•°æ®åº“è¿æ¥ä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœä¼ æœºåˆ¶é…ç½®ä¸ºéœ€è¦æ–°å¼€ä¸€ä¸ªäº‹åŠ¡ï¼Œé‚£ä¹ˆå®é™…ä¸Šå°±æ˜¯å…ˆå»ºç«‹ä¸€ä¸ªæ•°åº“è¿æ¥ï¼Œåœ¨æ­¤æ–°æ•°æ®åº“è¿æ¥ä¸Šæ‰§è¡Œsql    </p>
</li>
<li><p>Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶<br>å¤šä¸ªäº‹åŠ¡æ–¹æ³•ç›¸äº’è°ƒç”¨æ—¶ï¼Œäº‹åŠ¡å¦‚ä½•åœ¨è¿™äº›æ³•é—´ä¼ æ‘‡ï¼Œæ–¹æ³•Aæ˜¯ä¸€ä¸ªäº‹åŠ¡çš„æ–¹æ³•ï¼Œæ–¹æ³•Aæ‰§è¡Œè¿‡ç¨‹ä¸­è°ƒç”¨äº†æ–¹æ³•Bï¼Œé‚£ä¹ˆæ–¹æ³•Bæœ‰æ— äº‹åŠ¡ä»¥åŠæ–¹æ³•Bå¯¹äº‹åŠ¡çš„è¦æ±‚ä¸åŒéƒ½ä¼šå¯¹æ–¹æ³•Açš„äº‹åŠ¡å…·ä½“æ‰§è¡Œé€ æˆå½±å“ï¼ŒåŒæ—¶æ–¹æ³•Açš„äº‹åŠ¡å¯¹æ–¹æ³•Bçš„äº‹åŠ¡æ‰§è¡Œä¹Ÿæœ‰å½±å“ï¼Œè¿™ç§å½±å“å…·ä½“æ˜¯ä»€ä¹ˆå°±ç”±ä¸¤ä¸ªæ–¹æ³•æ‰€å®šä¹‰çš„äº‹åŠ¡ä¼ æ’­ç±»å‹æ‰€å†³å®šã€‚<br>1ï¼ŒREQUIRED(Springé»˜è®¤çš„äº‹åŠ¡ä¼ æ’­ç±»å‹): å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™è‡ªå·±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¿™ä¸ªäº‹åŠ¡<br>2ï¼ŒSUPPORTS:å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ åŠ å…¥å½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹æ³•æ‰§è¡Œ<br>3ã€‚MANDATORY:å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥å½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰äº‹åŠ¡ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚<br>4ï¼ŒREQUIRES_NEW: åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå­˜åœ¨å½“å‰äº‹åŠ¡ï¼Œåˆ™æŒ‚èµ·è¯¥äº‹åŠ¡ã€‚<br>5ï¼ŒNOT_SUPPORTED: ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œå¦‚é‡Œå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŒèµ·å½“å‰äº‹åŠ¡<br>6ï¼ŒNEVER:ä¸ä½¿ç”¨äº‹åŠ¡ï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸<br>7ï¼ŒNESTED: å¦‚æœå½“å‰äº‹å­˜åœ¨ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¦åˆ™REQUIREDçš„æ“ä½œä¸€æ · (å¼€å¯ä¸€ä¸ªäº‹åŠ¡)<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Mc411S7B7?p=18&vd_source=ff210768dfaee27c0d74f9c8c50d7274">https://www.bilibili.com/video/BV1Mc411S7B7?p=18&amp;vd_source=ff210768dfaee27c0d74f9c8c50d7274</a></p>
</li>
<li><p>Springäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ?<br>springäº‹åŠ¡çš„åŸç†æ˜¯AOPï¼Œè¿›è¡Œäº†åˆ‡é¢å¢å¼ºï¼Œé‚£ä¹ˆå¤±æ•ˆçš„æ ¹æœ¬åŸå› æ˜¯è¿™ä¸ªAOPä¸èµ·ä½œç”¨äº†! å¸¸è§æƒ…å†µæœ‰å¦‚ä¸‹å‡ ç§<br>ï¼Ÿï¼Ÿ1ã€å‘ç”Ÿè‡ªè°ƒç”¨ï¼Œç±»é‡Œé¢ä½¿ç”¨thisè°ƒç”¨æœ¬ç±»çš„æ–¹æ³•(thisé€šå¸¸çœç•¥)ï¼Œæ­¤æ—¶è¿™ä¸ªthiså¯¹è±¡ä¸æ˜¯ä»£ç†ç±»ï¼Œè€Œæ˜¯UserServiceå¯¹è±¡æœ¬èº«!è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œè®©é‚£ä¸ªthiså˜æˆUserServiceçš„ä»£ç†ç±»å³å¯!<br>2ã€æ–¹æ³•ä¸æ˜¯publicçš„:@Transactional åªèƒ½ç”¨äº public çš„æ–¹æ³•ä¸Šï¼Œå¦åˆ™äº‹åŠ¡ä¸ä¼šå¤±æ•ˆï¼Œå¦‚æœè¦ç”¨åœ¨é public æ–¹æ³•ä¸Šï¼Œå¯ä»¥å¼€å¯ Aspectj ä»£ç†æ¥¼å¼<br>3ã€æ•°æ®åº“ä¸æ”¯æŒäº‹åŠ¡<br>4ã€æ²¡æœ‰è¢«springç®¡ç†<br>5ã€å¼‚å¸¸è¢«åƒæ‰ï¼Œäº‹åŠ¡ä¸ä¼šå›æ»š(æˆ–è€…æŠ›å‡ºçš„å¼‚å¸¸æ²¡æœ‰è¢«å®šä¹‰ï¼Œé»˜è®¤ä¸ºRuntimeException)</p>
</li>
<li><p><strong>Springä¸­å¸¸è§çš„è®¾è®¡æ¨¡å¼ã€‚</strong></p>
<ol>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šSpringé»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨ä¸­çš„Beanæ˜¯å•ä¾‹çš„ï¼Œå³æ¯ä¸ªå®¹å™¨ä¸­çš„Beanåªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚æœ‰åŠ©æé«˜æ€§èƒ½å’Œå‡å°‘èµ„æºæ¶ˆè€—</li>
<li>åŸå‹æ¨¡å¼ï¼šæŒ‡å®šä½œç”¨åŸŸä¸ºprototype</li>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼šSpringé€šè¿‡å·¥å‚æ¨¡å¼å®ç°äº†IOCï¼ˆInversion of Controlï¼‰å®¹å™¨ï¼Œä½¿å¾—å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†è¢«å§”æ‰˜ç»™äº†Springå®¹å™¨ã€‚ BeanFactory</li>
<li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šSpring AOPå°±æ˜¯é€šè¿‡ä»£ç†æ¨¡å¼å®ç°çš„ã€‚AOPå…è®¸å¼€å‘è€…åœ¨ä¸ä¿®æ”¹åŸå§‹ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ’å…¥å’Œæ§åˆ¶æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œå¦‚æ—¥å¿—ã€äº‹åŠ¡ç­‰ã€‚</li>
<li>è´£ä»»é“¾æ¨¡å¼ï¼šä½¿ç”¨aopæ—¶å…ˆç”Ÿæˆä¸€ä¸ªæ‹¦æˆªå™¨é“¾</li>
<li><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ï¼š åœ¨Springä¸­ï¼ŒJdbcTemplate å’Œ RedisTemplate ç­‰æ¨¡æ¿ç±»ä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå°†é€šç”¨çš„ä»»åŠ¡å®ç°åœ¨æ¨¡æ¿æ–¹æ³•ä¸­ï¼Œè€Œå°†å…·ä½“å®ç°ç•™ç»™å­ç±»ã€‚<br>  postProcessBeanFactoryï¼ŒonRefreshï¼ŒinitPropertyValue</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼ï¼šSpringçš„äº‹ä»¶æœºåˆ¶æ˜¯åŸºäºè§‚å¯Ÿè€…æ¨¡å¼çš„ã€‚é€šè¿‡å®šä¹‰äº‹ä»¶å’Œç›‘å¬å™¨ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥è®¢é˜…æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼Œä»è€Œå®ç°æ¾è€¦åˆçš„é€šä¿¡æœºåˆ¶ã€‚</li>
<li>ç­–ç•¥æ¨¡å¼ï¼šSpringçš„èµ„æºåŠ è½½ã€äº‹åŠ¡ç®¡ç†ç­‰åŠŸèƒ½ç”¨äº†ç­–ç•¥æ¨¡å¼ï¼Œé€šè¿‡å®šä¹‰ä¸€ç»„ç®—æ³•æ—åˆ†åˆ«å°è£…èµ·æ¥ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</li>
<li>é€‚é…å™¨æ¨¡å¼ï¼šSpringAOPä¸­é€šçŸ¥ï¼ˆAdviceï¼‰å°±æ˜¯ä¸€ç§é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ã€‚é€šçŸ¥åŒ…è£…äº†ä¸€ä¸ªåˆ‡é¢é€»è¾‘ï¼Œä½¿å¾—å®ƒå¯ä»¥åœ¨åˆ‡ç‚¹ï¼ˆJoin Pointï¼‰ä¸Šæ‰§è¡Œã€‚</li>
<li>è£…é¥°è€…æ¨¡å¼ï¼šBeanWrapper</li>
<li>é€‚é…å™¨æ¨¡å¼ï¼šAdapter</li>
</ol>
</li>
</ul>
<h4 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h4><ul>
<li><p>ä»€ä¹ˆæ˜¯ MVCï¼Ÿ<br>MVCæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œè§£å†³è¡¨ç°å±‚çš„é—®é¢˜ï¼›MVC æ¨¡å¼æœ‰åŠ©äºåˆ†ç¦»åº”ç”¨ç¨‹åºçš„ä¸åŒæ–¹é¢ï¼Œå¦‚è¾“å…¥é€»è¾‘ï¼Œä¸šåŠ¡é€»è¾‘å’Œ UI é€»è¾‘ï¼ŒåŒæ—¶åœ¨æ‰€æœ‰è¿™äº›å…ƒç´ ä¹‹é—´æä¾›æ¾æ•£è€¦åˆã€‚<br>Modelï¼šæ¨¡å‹(å®Œæˆä¸šåŠ¡é€»è¾‘:æœ‰javaBeanæ„æˆï¼Œservice+dao+entity)<br>Controllerï¼šæ§åˆ¶å™¨(æ¥æ”¶è¯·æ±‚-&gt;è°ƒç”¨æ¨¡å‹-&gt;æ ¹æ®ç»“æœæ´¾å‘é¡µé¢)ï¼ŒSpringMVCé€šè¿‡ä¸€å¥—æ³¨è§£,å¯ä»¥è®©æ™®é€šçš„JAVAç±»æˆä¸ºcontrloræ§åˆ¶å™¨,æ— éœ€ç»§æ‰¿Servlet<br>Viewï¼šè§†å›¾å±‚ï¼ˆå°†ç»“æœæ¸²æŸ“ï¼Œç›¸åº”ç»™å®¢æˆ·ï¼‰</p>
</li>
<li><p>Spring MVC æ¡†æ¶<br>SpringMVCæ˜¯ä¸€ä¸ªMVCçš„å¼€æºæ¡†æ¶ï¼Œæä¾› æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ æ¶æ„å’Œéšæ—¶å¯ç”¨çš„ç»„ä»¶ï¼Œç”¨äºå¼€å‘çµæ´»ä¸”æ¾æ•£è€¦åˆçš„ Web åº”ç”¨ç¨‹åºã€‚<br>SpringMVC&#x3D;struts2+springï¼ŒspringMVCå°±ç›¸å½“äºæ˜¯Struts2 åŠ ä¸Šsringçš„æ•´åˆï¼›SpringMVCæ˜¯springçš„ä¸€ä¸ªåç»­äº§å“ï¼Œå…¶å®å°±æ˜¯springåœ¨åŸæœ‰åŸºç¡€ä¸Šï¼Œåˆæä¾›äº†webåº”ç”¨çš„MVCæ¨¡å—ï¼Œå¯ä»¥ç®€å•çš„æŠŠspringMVCç†è§£ä¸ºæ˜¯springçš„ä¸€ä¸ªæ¨¡å—(ç±»ä¼¼AOPï¼ŒIOCè¿™æ ·çš„æ¨¡å—)</p>
</li>
<li><p><strong>ï¼Ÿï¼Ÿï¼ŸSpring MVC æµç¨‹</strong><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv26597569/?spm_id_from=333.999.0.0&jump_opus=1">https://www.bilibili.com/read/cv26597569/?spm_id_from=333.999.0.0&amp;jump_opus=1</a><img src="https://leo710aka.github.io/bk/job2.png" width="750" height="300" alt=""><br>1ã€å‘æœåŠ¡å™¨å‘é€ HTTP è¯·æ±‚ï¼Œè¯·æ±‚è¢«å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet æ•è·ã€‚<br>2ã€ DispatcherServlet æ ¹æ® -servlet.xml ä¸­çš„é…ç½®å¯¹è¯·æ±‚çš„ URL è¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ã€‚ç„¶åæ ¹æ®è¯¥ URIï¼Œè°ƒç”¨HandlerMappingè·å¾—è¯¥ Handler é…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ Handler å¯¹è±¡ä»¥åŠ Handler å¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥ HandlerExecutionChain å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚<br>3ã€ DispatcherServlet æ ¹æ®è·å¾—çš„ Handlerï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„HandlerAdapterã€‚ï¼ˆé™„æ³¨ï¼šå¦‚æœæˆåŠŸè·å¾— HandlerAdapter åï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„ preHandler(â€¦)æ–¹æ³•ï¼‰ã€‚<br>4ã€æå– Request ä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å…… Handler å…¥å‚ï¼Œå¼€å§‹æ‰§è¡Œ Handlerï¼ˆ Controller)ã€‚åœ¨å¡«å…… Handler çš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpring å°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š  HttpMessageConveterï¼šå°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚  Jsonã€xml ç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯ã€‚ æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚ String è½¬æ¢æˆ Integerã€Double ç­‰ã€‚ æ•°æ®æ ¹å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰ã€‚ æ•°æ®éªŒè¯ï¼šéªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ°BindingResult æˆ– Error ä¸­ã€‚<br>5ã€Handler(Controller)æ‰§è¡Œå®Œæˆåï¼Œå‘ DispatcherServlet è¿”å›ä¸€ä¸ªModelAndView å¯¹è±¡ï¼›<br>6ã€æ ¹æ®è¿”å›çš„ ModelAndViewï¼Œé€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ ViewResolverï¼ˆå¿…é¡»æ˜¯å·²ç»æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­çš„ ViewResolver)è¿”å›ç»™DispatcherServletã€‚<br>7ã€ ViewResolver ç»“åˆ Model å’Œ Viewï¼Œæ¥æ¸²æŸ“è§†å›¾ã€‚<br>8ã€è§†å›¾è´Ÿè´£å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
</li>
<li><p>SpringMVC å¸¸è§æ³¨è§£<br>@RequestMapping:ç”¨äºå¤„ç†è¯·æ±‚urlæ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œåˆ™è¡¨ç¤ºç±»ä¸­ çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚<br>@RequestBody:æ³¨è§£å®ç°æ¥æ”¶httpè¯·æ±‚çš„jsonæ•°æ®ï¼Œå°†jsonè½¬æ¢ä¸ºjavaå¯¹è±¡ã€‚<br>@ResponseBody:æ³¨è§£å®ç°å°†conreolleræ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸ºisonå¯¹è±¡å“åº”ç»™å®¢æˆ·<br>ã€ã€ã€</p>
</li>
</ul>
<hr>

<h2 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h2><ul>
<li><p>ä»€ä¹ˆæ˜¯ Spring Bootï¼Ÿ<br>éšç€æ–°åŠŸèƒ½çš„å¢åŠ ï¼Œspring å˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚å¦‚æœå¿…é¡»å¯åŠ¨ä¸€ä¸ªæ–°çš„ Spring é¡¹ç›®ï¼Œæˆ‘ä»¬å¿…é¡»æ·»åŠ æ„å»ºè·¯å¾„æˆ–æ·»åŠ Maven ä¾èµ–å…³ç³»ï¼Œé…ç½®åº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œæ·»åŠ  spring é…ç½®ï¼Œå³å¼€å§‹ä¸€ä¸ªæ–°çš„ spring é¡¹ç›®éœ€è¦å¾ˆå¤šåŠªåŠ›ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨å¿…é¡»ä»å¤´å¼€å§‹åšæ‰€æœ‰äº‹æƒ…ã€‚<br>Spring Boot æœ€é‡è¦çš„å°±æ˜¯<strong>èµ·æ­¥ä¾èµ–å’Œè‡ªåŠ¨é…ç½®ï¼š</strong> ä½¿ç”¨<code>starter</code>å¯åŠ¨å™¨èƒ½å¤Ÿè‡ªåŠ¨ä¾èµ–å…¶ä»–ç»„ä»¶ï¼Œå‡å°‘äº†Mavené…ç½®çš„ç¹çæ€§ï¼›Spring Bootæ ¹æ®å½“å‰ç±»è·¯å¾„å’ŒjaråŒ…è‡ªåŠ¨é…ç½®beanï¼Œä¾‹å¦‚ï¼Œæ·»åŠ <code>spring-boot-starter-web</code>å¯åŠ¨å™¨å³å¯æ‹¥æœ‰webåŠŸèƒ½ï¼Œæ— éœ€é¢å¤–çš„é…ç½®ã€‚å› æ­¤ï¼ŒSpring Boot å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»¥æœ€å°‘çš„å·¥ä½œé‡ï¼Œæ›´åŠ å¥å£®åœ°ä½¿ç”¨ç°æœ‰çš„ SpringåŠŸèƒ½ã€‚</p>
</li>
<li><p>ä¸ºä»€ä¹ˆè¦ç”¨SpringBootï¼Ÿ</p>
<ol>
<li><strong>ç‹¬ç«‹è¿è¡Œå’Œç®€åŒ–éƒ¨ç½²ï¼š</strong> Spring Bootå†…åµŒäº†å„ç§servletå®¹å™¨ï¼ˆå¦‚Tomcatã€Jettyã€Undertowï¼‰ï¼Œä½¿å¾—åº”ç”¨èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œï¼Œæ— éœ€æ‰“æˆwaråŒ…éƒ¨ç½²åˆ°å¤–éƒ¨å®¹å™¨ã€‚é€šè¿‡æ‰“åŒ…æˆå¯æ‰§è¡Œçš„jaråŒ…ï¼Œæ‰€æœ‰ä¾èµ–åŒ…éƒ½åœ¨ä¸€ä¸ªjaråŒ…å†…ï¼Œç®€åŒ–äº†éƒ¨ç½²å’Œè¿ç»´ã€‚</li>
<li><strong>ç®€åŒ–é…ç½®å’Œè‡ªåŠ¨é…ç½®ï¼š</strong> ä½¿ç”¨<code>starter</code>å¯åŠ¨å™¨èƒ½å¤Ÿè‡ªåŠ¨ä¾èµ–å…¶ä»–ç»„ä»¶ï¼Œå‡å°‘äº†Mavené…ç½®çš„ç¹çæ€§ã€‚Spring Bootæ ¹æ®å½“å‰ç±»è·¯å¾„å’ŒjaråŒ…è‡ªåŠ¨é…ç½®beanï¼Œä¾‹å¦‚ï¼Œæ·»åŠ <code>spring-boot-starter-web</code>å¯åŠ¨å™¨å³å¯æ‹¥æœ‰webåŠŸèƒ½ï¼Œæ— éœ€é¢å¤–çš„é…ç½®ã€‚</li>
<li>æ— ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®ï¼š Spring Bootçš„é…ç½®è¿‡ç¨‹ä¸­æ— éœ€ä»£ç ç”Ÿæˆï¼Œä¹Ÿä¸éœ€è¦XMLé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡æ¡ä»¶æ³¨è§£å®ç°è‡ªåŠ¨é…ç½®ï¼Œè¿›ä¸€æ­¥ç®€åŒ–äº†é¡¹ç›®é…ç½®ã€‚</li>
<li>åº”ç”¨ç›‘æ§å’Œå¥åº·æ£€æµ‹ï¼š Spring Bootæä¾›äº†ä¸€ç³»åˆ—ç«¯ç‚¹ç”¨äºç›‘æ§æœåŠ¡å’Œåº”ç”¨ï¼Œå®ç°å¥åº·æ£€æµ‹ç­‰åŠŸèƒ½ã€‚</li>
<li>å‡å°‘å¼€å‘ã€æµ‹è¯•æ—¶é—´å’ŒåŠªåŠ›ï¼š æä¾›å¿«é€Ÿå¯åŠ¨å¼€å‘çš„é»˜è®¤å€¼ï¼Œå‡å°‘äº†å¼€å‘å’Œæµ‹è¯•çš„æ—¶é—´å’Œå·¥ä½œé‡ã€‚</li>
<li>ä½¿ç”¨JavaConfigé¿å…XMLé…ç½®ï¼š å€¡å¯¼ä½¿ç”¨JavaConfigæ›¿ä»£XMLé…ç½®ï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚</li>
<li>æä¾›æ„è§å‘å±•æ–¹æ³•ï¼š Spring Bootæä¾›äº†ä¸€å¥—æ¨èçš„å¼€å‘æ–¹æ³•ï¼Œä½¿å¾—å›¢é˜Ÿæ›´å®¹æ˜“è¾¾æˆå…±è¯†ï¼Œæé«˜äº†ä»£ç çš„ä¸€è‡´æ€§å’Œè§„èŒƒæ€§ã€‚</li>
<li>åŸºäºç¯å¢ƒçš„é…ç½®ï¼š æ”¯æŒåŸºäºç¯å¢ƒçš„é…ç½®ï¼Œé€šè¿‡ä¼ é€’ç¯å¢ƒå‚æ•°ï¼ˆä¾‹å¦‚<code>-Dspring.profiles.active=&#123;environment&#125;</code>ï¼‰ï¼Œå¯ä»¥åœ¨ä¸åŒç¯å¢ƒä¸­çµæ´»é…ç½®åº”ç”¨ç¨‹åºã€‚</li>
</ol>
</li>
<li><p>å¦‚ä½•åˆ›å»º Spring Boot Projects ï¼Ÿ</p>
<ul>
<li>Spring Initiatlizr è®©åˆ›å»º Spring Boot é¡¹ç›®å˜çš„å¾ˆå®¹æ˜“ï¼Œé€šè¿‡ start.spring.io åˆ›å»ºã€‚</li>
<li>æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ª Maven é¡¹ç›®ä¸º Spring Boot é¡¹ç›®ï¼š<ol>
<li><strong>æ·»åŠ  Spring Boot ä¾èµ–ï¼š</strong> åœ¨ Maven é¡¹ç›®çš„ <code>pom.xml</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ  Spring Boot çš„ä¾èµ–ã€‚é€šå¸¸ï¼Œä½ å¯ä»¥æ·»åŠ  <code>spring-boot-starter</code> æˆ–å…¶ä»–ç‰¹å®šçš„ Starter ä¾èµ–ï¼Œå…·ä½“ä¾èµ–æ ¹æ®é¡¹ç›®éœ€æ±‚è€Œå®šã€‚  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Boot Starter ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…¶ä»–ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>æ·»åŠ  Spring Boot æ’ä»¶ï¼š</strong>åœ¨ <code>pom.xml</code> ä¸­æ·»åŠ  Spring Boot Maven æ’ä»¶ã€‚æ’ä»¶ç”¨äºæ‰“åŒ…å’Œè¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºã€‚  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>åˆ›å»º Spring Boot ä¸»ç±»ï¼š</strong> åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªåŒ…å« <code>main</code> æ–¹æ³•çš„ä¸»ç±»ï¼Œè¯¥ç±»ç”¨äºå¯åŠ¨ Spring Boot åº”ç”¨ç¨‹åºã€‚è¿™ä¸ªç±»é€šå¸¸è¢«æ³¨è§£ä¸º <code>@SpringBootApplication</code>ã€‚</li>
<li><strong>æ·»åŠ å…¶ä»– Spring Boot é…ç½®ï¼š</strong> æ ¹æ®é¡¹ç›®éœ€æ±‚ï¼Œé…ç½®å…¶ä»– Spring Boot ç‰¹æ€§ï¼Œå¦‚æ•°æ®æºã€JPAã€Web æ”¯æŒç­‰ã€‚å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆ<code>application.properties</code> æˆ– <code>application.yml</code>ï¼‰æˆ– Java é…ç½®ç±»è¿›è¡Œé…ç½®ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>Spring Boot çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿå®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„ï¼Ÿ<br>å¯åŠ¨ç±»ä¸Šé¢çš„æ³¨è§£æ˜¯ @SpringBootApplicationï¼Œå®ƒä¹Ÿæ˜¯ Spring Boot çš„æ ¸å¿ƒæ³¨è§£ï¼Œä¸»è¦ç»„åˆåŒ…å«äº†ä»¥ä¸‹3ä¸ªæ³¨è§£ï¼š<br>1ã€@SpringBootConfigurationï¼šç»„åˆäº† @Configuration æ³¨è§£ï¼Œå®ç°é…ç½®æ–‡ä»¶çš„åŠŸèƒ½ã€‚<br>2ã€@EnableAutoConfigurationï¼šæ‰“å¼€è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å…³é—­æŸä¸ªè‡ªåŠ¨é…ç½®çš„é€‰é¡¹ï¼Œå¦‚å…³é—­æ•°æ®æºè‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼š@SpringBootApplication(exclude &#x3D; { DataSourceAutoConfiguration.class })ã€‚<br>3ã€@ComponentScanï¼šSpringç»„ä»¶æ‰«æ</p>
</li>
<li><p>Spring Bootä¸­å¸¸ç”¨æ³¨è§£åŠå…¶åº•å±‚å®ç°</p>
<ul>
<li>@Beanæ³¨è§£:ç”¨æ¥å®šä¹‰Beanï¼Œç±»ä¼¼äºXMLä¸­çš„bean&gt;æ ‡ç­¾ï¼ŒSpringåœ¨å¯åŠ¨æ—¶ï¼Œä¼šå¯¹åŠ äº†@Beanæ³¨è§£çš„æ–¹æ³•è¿›è¡ŒæŠ˜ï¼Œå°†æ–¹æ³•çš„åå­—åšä¸ºbeanNameï¼Œå¹¶é€šè¿‡æ‰§è¡Œæ–¹æ³•å¾—åˆ°beanå¯¹è±¡</li>
<li>Beanå¤„ç†<ul>
<li>@Autowiredï¼šä¾èµ–æ³¨å…¥</li>
<li>@Componentï¼šæ³›æŒ‡ç»„ä»¶</li>
<li>@Controllerã€@Serviceã€@Repository</li>
<li>@RestController</li>
<li>@Configuration</li>
</ul>
</li>
<li>Httpè¯·æ±‚ï¼š@GetMappingã€@PostMappingã€@PutMappingã€@DeleteMapping</li>
<li>å‰åç«¯å‚æ•°ä¼ é€’ï¼š<ul>
<li>@RequestParamï¼šç”¨åœ¨æ–¹æ³•çš„å‚æ•°å‰é¢ï¼Œè·å–è¯·æ±‚ä¸­è¡¨å•ç±»å‹çš„key&#x3D;valueæ ¼å¼çš„æ•°æ®</li>
<li>@PathVariableï¼šè·¯å¾„å˜é‡ï¼Œå‚æ•°ä¸å¤§æ‹¬å·é‡Œçš„åå­—ä¸€æ ·è¦ç›¸åŒ</li>
<li>@RequestBodyï¼šè·å–è¯·æ±‚bodyä¸­çš„æ•°æ®ï¼Œå¸¸ç”¨äºæ­é…@PostMappingè¯·æ±‚æ¥æäº¤å¯¹è±¡æ•°æ®</li>
<li>@ResponseBodyï¼šè¡¨ç¤ºè¯¥æ–¹æ³•çš„è¿”å›ç»“æœç›´æ¥å†™å…¥HTTP response bodyä¸­ï¼Œæ ¼å¼ä¸ºjson</li>
</ul>
</li>
<li>è¯»å–é…ç½®<ul>
<li>@valueï¼šç›´æ¥è¯»å–å„ç§é…ç½®æºçš„å±æ€§å</li>
<li>@ConfigurationPropertiesï¼šè¯»å–é…ç½®ä¿¡æ¯å¹¶ä¸ bean ç»‘å®š</li>
<li>@PropertySourceï¼šæŒ‡å®šåŠ è½½è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶</li>
</ul>
</li>
<li>å‚æ•°æ ¡éªŒ<ul>
<li>Beanå­—æ®µéªŒè¯æ³¨è§£ï¼š@Nullã€@Min()ã€ï¼Œï¼Œï¼Ÿï¼Ÿ</li>
<li>ï¼Ÿï¼Ÿ@Validï¼šç”¨äºæ ‡æ³¨éªŒè¯å¯¹è±¡çš„çº§è”å±æ€§</li>
<li>ï¼Ÿï¼Ÿ@Validatedï¼šSpringæä¾›çš„æ³¨è§£ï¼ŒäºSpringMVCä¸€èµ·ä½¿ç”¨æ ‡æ³¨æ–¹æ³•å‚æ•°éœ€è¦æ£€æŸ¥</li>
</ul>
</li>
<li>ç»Ÿä¸€å¼‚å¸¸å¤„ç†<ul>
<li>@ControllerAdviceï¼šæ³¨è§£å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»ï¼ŒåŒ…å«@Componentæ‰€ä»¥å¯ä»¥è¢«Springæ‰«æåˆ°</li>
<li>@ExceptionHandlerï¼šæ³¨è§£å£°æ˜å¼‚å¸¸å¤„ç†æ–¹æ³•ï¼Œè¡¨ç¤ºé‡åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œå°±æ‰§è¡Œæ ‡æ³¨çš„æ–¹æ³•</li>
</ul>
</li>
<li>JPAæ•°æ®æŒä¹…åŒ–<ul>
<li>@Entityï¼šå£°æ˜æ•°æ®åº“å®ä½“ç±»</li>
<li>@Tableï¼šè®¾ç½®è¡¨æ˜</li>
<li>@ldï¼šå£°æ˜ä¸€ä¸ªå­—æ®µä¸ºä¸»é”®</li>
<li>@GeneratedValueï¼šå£°æ˜ä¸»é”®çš„ç”Ÿæˆç­–ç•¥</li>
<li>@Columnï¼šå£°æ˜å­—æ®µï¼Œç»å¸¸ç”¨äºå±æ€§åå’Œè¡¨å­—æ®µçš„æ˜ å°„</li>
<li>@Transientï¼šæŒ‡å®šä¸éœ€è¦æŒä¹…åŒ–çš„å­—æ®µ</li>
<li>@Lobï¼šå£°æ˜æŸä¸ªå­—æ®µä¸ºå¤§å­—æ®µ</li>
<li>@Enumeratedï¼šå£°æ˜æšä¸¾ç±»å‹çš„å­—æ®µ</li>
<li>@Modifyingï¼šåŠ åœ¨DAOæ–¹æ³•ä¸Šï¼Œæç¤ºæ˜¯ä¿®æ”¹æ“ä½œ</li>
<li>@Transactional<ul>
<li>ä½œç”¨äºç±»ä¸Šï¼šè¡¨ç¤ºæ‰€æœ‰è¯¥ç±»çš„public æ–¹æ³•éƒ½é…ç½®ç›¸åŒçš„äº‹åŠ¡å±æ€§ä¿¡æ¯</li>
<li>ä½œç”¨äºæ–¹æ³•ä¸Šï¼šå½“ç±»é…ç½®äº†@Transactionalï¼Œæ–¹æ³•ä¹Ÿé…ç½®äº†@Transactionalï¼Œæ–¹æ³•çš„äº‹åŠ¡ä¼šè¦†ç›–ç±»çš„äº‹åŠ¡é…ç½®ä¿¡æ¯</li>
</ul>
</li>
</ul>
</li>
<li>æµ‹è¯•å¤„ç†<ul>
<li>@ActiveProfilesï¼šå¸¸ä½œæ€äºæµ‹è¯•ç±»ä¸Šï¼Œç”¨äºå£°æ˜ç”Ÿæ•ˆçš„ Spring é…ç½®æ–‡ä»¶</li>
<li>@Testï¼šå£°æ˜ä¸€ä¸ªæ–¹æ³•ä¸ºæµ‹è¯•æ–¹æ³•</li>
<li>@Transactionalï¼šè¢«å£°æ˜çš„æµ‹è¯•æ–¹æ³•çš„æ•°æ®ä¼šå›æ»šï¼Œé¿å…æ±¡æŸ“æµ‹è¯•æ•°æ®</li>
<li>@WithMockUserï¼šSpring Security æä¾›çš„ï¼Œç”¨æ¥æ¨¡æ‹Ÿä¸€ä¸ªçœŸå®ç”¨æˆ·ï¼Œå¹¶ä¸”å¯ä»¥èµ‹äºˆæƒé™</li>
</ul>
</li>
<li>é…ç½®å¯åŠ¨<ul>
<li>@SpringBootApplicationæ³¨è§£: è¿™ä¸ªæ³¨è§£æ ‡è¯†äº†ä¸€ä¸ªSpringBootå·¥ç¨‹ï¼Œå®ƒå®é™…ä¸Šæ˜¯å¦å¤–ä¸‰ä¸ªæ³¨è§£çš„ç»„åˆ:<br>  aï¼Œ@SpringBootConfiguration: è¿™ä¸ªæ³¨è§£å®é™…å°±æ˜¯ä¸€ä¸ª@Configurationï¼Œè¡¨ç¤ºå¯åŠ¨ç±»ä¹Ÿæ˜¯ä¸€ä¸ªé…ç½®ç±»<br>  bï¼Œ@EnableAutoConfiguration:å‘Springå®¹å™¨ä¸­å¯¼å…¥äº†ä¸€Seletorï¼Œç”¨æ¥åŠ ClassPathä¸‹SpringFactotiesä¸­æ‰€å®šä¹‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå°†è¿™äº›è‡ªåŠ¨ä¸ºé…ç½®Bean<br>  cï¼Œ@ComponentScan:æ ‡è¯†æ‰«æè·¯å¾„ï¼Œå› ä¸ºèµ‹è®¤æ˜¯æ²¡æœ‰é…ç½®å®é™…æ‰«æè·¯å¾„ï¼Œæ‰€ä»¥SpringBootæ‰«æçš„è·¯å¾„æ˜¯å¯åŠ¨ç±»æ‰€åœ¨çš„å½“å‰ç›®å½•</li>
<li>@Conditional<ul>
<li>@ConditionalOnBeanï¼šé…ç½®äº†æŸä¸ªç‰¹å®šçš„Bean</li>
<li>@ConditionalOnMissingBeanï¼šæ²¡æœ‰é…ç½®ç‰¹å®šçš„Bean           </li>
<li>@ConditionalOnClassï¼šClasspathé‡Œæœ‰æŒ‡å®šçš„ç±»</li>
<li>@ConditionalOnMissingClassï¼šClasspathé‡Œæ²¡æœ‰æŒ‡å®šçš„ç±»          </li>
<li>@ConditionalOnExpressionï¼šç»™å®šçš„SpELè¡¨è¾¾å¼è®¡ç®—ç»“æœä¸ºtrue</li>
<li>@ConditionalOnJavaï¼šJavaçš„ç‰ˆæœ¬åŒ¹é…ç‰¹å®šå€¼æˆ–è€…ä¸€ä¸ªèŒƒå›´å€¼                       </li>
<li>@ConditionalonIndiï¼šå‚æ•°ä¸­ç»™å®šçš„INDIä½ç½®å¿…é¡»å­˜åœ¨ä¸€ä¸ªï¼Œå¦‚æœæ²¡æœ‰ç»™å‚æ•°ï¼Œåˆ™è¦æœ‰JNDIInitialContext            </li>
<li>@ConditionalOnPropertyï¼šæŒ‡å®šçš„é…ç½®å±æ€§è¦æœ‰ä¸€ä¸ªæ˜ç¡®çš„å€¼</li>
<li>@ConditionalOnResourceï¼šClasspathé‡Œæ²¡æœ‰æŒ‡å®šçš„èµ„æº            </li>
<li>@ConditionalOnWebApplicationï¼šè¿™æ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åº</li>
<li>@ConditionalOnNotWebApplicationï¼šè¿™ä¸æ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åº</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>ï¼Ÿï¼Ÿè¯´è¯´<strong>SpringBootè‡ªåŠ¨é…ç½®</strong>ã€‚<br>1ã€SpringBootæœ‰ç€â€œçº¦å®šå¤§äºé…ç½®â€çš„ç†å¿µï¼Œè¿™ä¸€ç†å¿µä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥ç”¨â€œSpringBootè‡ªåŠ¨é…ç½®â€æ¥è§£é‡Šã€‚<br>é€šè¿‡ Spring Bootï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå¼€å‘åŸºäº Spring ç”Ÿæ€ä¸‹çš„åº”ç”¨ç¨‹åºã€‚<br>2ã€Spring Boot çº¦å®šç”±äºé…ç½®çš„ä½“ç°æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š<br>Spring Boot Starter å¯åŠ¨ä¾èµ–ï¼Œå®ƒèƒ½å¸®æˆ‘ä»¬ç®¡ç†æ‰€æœ‰ jar åŒ…ç‰ˆæœ¬ï¼›<br>å¦‚æœå½“å‰åº”ç”¨ä¾èµ–äº† spring mvc ç›¸å…³çš„ jarï¼Œé‚£ä¹ˆ Spring Boot ä¼šè‡ªåŠ¨å†…ç½®Tomcat å®¹å™¨æ¥è¿è¡Œ web åº”ç”¨ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†å»å•ç‹¬åšåº”ç”¨éƒ¨ç½²ï¼›<br>Spring Boot çš„è‡ªåŠ¨è£…é…æœºåˆ¶çš„å®ç°ä¸­ï¼Œé€šè¿‡æ‰«æçº¦å®šè·¯å¾„ä¸‹çš„ spring.factories æ–‡ä»¶æ¥è¯†åˆ«é…ç½®ç±»ï¼Œå®ç° Bean çš„è‡ªåŠ¨è£…é…ï¼›<br>é»˜è®¤åŠ è½½çš„é…ç½®æ–‡ä»¶ application.properties ç­‰ç­‰<br>3ã€åœ¨ä½¿ç”¨SpringBootçš„æ—¶å€™ï¼Œè‚¯å®šä¼šä¾èµ–äºautoconfigureè¿™ä¹ˆä¸€ä¸ªåŒ…ï¼Œautoconfigureè¿™ä¸ªåŒ…é‡Œä¼šæœ‰ä¸€ä¸ªspring.factoriesæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å®šä¹‰äº†100+ä¸ªå…¥å£çš„é…ç½®ç±»ã€‚æ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„redisã€kafkaç­‰ç­‰è¿™æ ·å¸¸è§çš„ä¸­é—´ä»¶éƒ½é¢„ç½®äº†é…ç½®ç±»ã€‚å½“æˆ‘ä»¬åœ¨å¯åŠ¨SpringBooté¡¹ç›®çš„æ—¶å€™ï¼Œå†…éƒ¨å°±ä¼šåŠ è½½è¿™ä¸ªspring.factoriesæ–‡ä»¶ï¼Œè¿›è€Œå»åŠ è½½â€œæœ‰éœ€è¦â€çš„é…ç½®ç±»ã€‚é‚£æˆ‘ä»¬åœ¨ä½¿ç”¨ç›¸å…³ç»„ä»¶çš„æ—¶å€™ï¼Œå°±ä¼šéå¸¸çš„æ–¹ä¾¿ï¼ˆå› ä¸ºé…ç½®ç±»å·²ç»åˆå§‹åŒ–äº†ä¸€å¤§éƒ¨åˆ†é…ç½®ä¿¡æ¯ï¼‰ã€‚ä¸€èˆ¬æˆ‘ä»¬åªè¦åœ¨applicationé…ç½®æ–‡ä»¶å†™ä¸Šå¯¹åº”çš„é…ç½®ï¼Œå°±èƒ½é€šè¿‡å„ç§templateç±»ç›´æ¥æ“ä½œå¯¹åº”çš„ç»„ä»¶å•¦ã€‚<br>4ã€ä¸æ˜¯æ‰€æœ‰çš„é…ç½®ç±»éƒ½ä¼šåŠ è½½çš„ï¼Œå‡è®¾æˆ‘ä»¬æ²¡æœ‰å¼•å…¥redis-starterçš„åŒ…ï¼Œé‚£Redisçš„é…ç½®ç±»å°±ä¸ä¼šè¢«åŠ è½½ã€‚å…·ä½“Springåœ¨å®ç°çš„æ—¶å€™å°±æ˜¯ä½¿ç”¨<code>@ConditionalXXX</code>è¿›è¡Œåˆ¤æ–­çš„ã€‚æ¯”å¦‚Redisçš„é…ç½®ç±»å°±ä¼šæœ‰@ConditionalOnClass({RedisOperations.class})çš„é…ç½®ï¼Œè¯´æ˜å½“å‰ç¯å¢ƒä¸‹å¦‚æœæœ‰RedisOperations.classè¿™ä¸ªå­—èŠ‚ç ï¼Œæ‰ä¼šå»åŠ è½½Redisçš„é…ç½®ç±»ã€‚</p>
</li>
<li><p>ï¼Ÿï¼ŸSpring Boot ä¸­è‡ªåŠ¨è£…é…æœºåˆ¶çš„åŸç†ã€‚<br>è‡ªåŠ¨è£…é…ï¼Œç®€å•æ¥è¯´å°±æ˜¯è‡ªåŠ¨æŠŠç¬¬ä¸‰æ–¹ç»„ä»¶çš„ Bean è£…è½½åˆ° Spring IOC å™¨é‡Œé¢ï¼Œä¸éœ€è¦å¼€å‘äººå‘˜å†å»å†™ Bean çš„è£…é…é…ç½®ã€‚åœ¨ Spring Boot åº”ç”¨é‡Œé¢ï¼Œåªéœ€è¦åœ¨å¯åŠ¨ç±»åŠ ä¸Š <strong>@SpringBootApplication</strong> æ³¨è§£å°±å¯ä»¥å®ç°è‡ªåŠ¨è£…é…ã€‚<br>@SpringBootApplication æ˜¯ä¸€ä¸ªå¤åˆæ³¨è§£ï¼ŒçœŸæ­£å®ç°è‡ªåŠ¨è£…é…çš„æ³¨è§£æ˜¯ <strong>@EnableAutoConfiguration</strong>ã€‚è‡ªåŠ¨è£…é…çš„å®ç°ä¸»è¦ä¾é ä¸‰ä¸ªæ ¸å¿ƒå…³é”®æŠ€æœ¯ã€‚<br>1ã€å¼•å…¥ Starter å¯åŠ¨ä¾èµ–ç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªç»„ä»¶é‡Œé¢å¿…é¡»è¦åŒ…å«@Configuration é…ç½®ç±»ï¼Œåœ¨è¿™ä¸ªé…ç½®ç±»é‡Œé¢é€šè¿‡@Bean æ³¨è§£å£°æ˜éœ€è¦è£…é…åˆ° IOC å®¹å™¨çš„ Bean å¯¹è±¡ã€‚<br>2ã€è¿™ä¸ªé…ç½®ç±»æ˜¯æ”¾åœ¨ç¬¬ä¸‰æ–¹çš„ jar åŒ…é‡Œé¢ï¼Œç„¶åé€šè¿‡ SpringBoot ä¸­çš„çº¦å®šä¼˜äºé…ç½®æ€æƒ³ï¼ŒæŠŠè¿™ä¸ªé…ç½®ç±»çš„å…¨è·¯å¾„æ”¾åœ¨ classpath:&#x2F;META-INF&#x2F;spring.factories æ–‡ä»¶ä¸­ã€‚è¿™æ · SpringBoot å°±å¯ä»¥çŸ¥é“ç¬¬ä¸‰æ–¹ jar åŒ…é‡Œé¢çš„é…ç½®ç±»çš„ä½ç½®ï¼Œè¿™ä¸ªæ­¥éª¤ä¸»è¦æ˜¯ç”¨åˆ°äº† Spring é‡Œé¢çš„ SpringFactoriesLoader æ¥å®Œæˆçš„ã€‚<br>3ã€SpringBoot æ‹¿åˆ°æ‰€ç¬¬ä¸‰æ–¹ jar åŒ…é‡Œé¢å£°æ˜çš„é…ç½®ç±»ä»¥åï¼Œå†é€šè¿‡ Spring æä¾›çš„ImportSelector æ¥å£ï¼Œå®ç°å¯¹è¿™äº›é…ç½®ç±»çš„åŠ¨æ€åŠ è½½ã€‚<br>åœ¨æˆ‘çœ‹æ¥ï¼ŒSpringBoot æ˜¯çº¦å®šä¼˜äºé…ç½®è¿™ä¸€ç†å¿µä¸‹çš„äº§ç‰©ï¼Œæ‰€ä»¥åœ¨å¾ˆå¤šçš„åœ°æ–¹ï¼Œéƒ½ä¼šçœ‹åˆ°è¿™ç±»çš„æ€æƒ³ã€‚å®ƒçš„å‡ºç°ï¼Œè®©å¼€å‘äººå‘˜æ›´åŠ èšç„¦åœ¨äº†ä¸šåŠ¡ä»£ç çš„ç¼–å†™ä¸Šï¼Œè€Œä¸éœ€è¦å»å…³å¿ƒå’Œä¸šåŠ¡æ— å…³çš„é…ç½®ã€‚å…¶å®ï¼Œè‡ªåŠ¨è£…é…çš„æ€æƒ³ï¼Œåœ¨ SpringFramework3.x ç‰ˆæœ¬é‡Œé¢çš„@Enable æ³¨è§£ï¼Œå°±æœ‰äº†å®ç°çš„é›å½¢ã€‚@Enable æ³¨è§£æ˜¯æ¨¡å—é©±åŠ¨çš„æ„æ€ï¼Œæˆ‘ä»¬åªéœ€è¦å¢åŠ æŸä¸ª@Enable æ³¨è§£ï¼Œå°±è‡ªåŠ¨æ‰“å¼€æŸä¸ªåŠŸèƒ½ï¼Œè€Œä¸éœ€è¦é’ˆå¯¹è¿™ä¸ªåŠŸèƒ½å»åš Bean çš„é…ç½®ï¼Œ@Enable åº•å±‚ä¹Ÿæ˜¯å¸®æˆ‘ä»¬å»è‡ªåŠ¨å®Œæˆè¿™ä¸ªæ¨¡å—ç›¸å…³ Bean çš„æ³¨å…¥ã€‚ä»¥ä¸Šï¼Œå°±æ˜¯æˆ‘å¯¹ Spring Boot è‡ªåŠ¨è£…é…æœºåˆ¶çš„ç†è§£ã€‚</p>
</li>
<li><p>Spring Boot å±æ€§æº<br>1.å‘½ä»¤è¡Œå‚æ•°<br>2.JVMç³»ç»Ÿå±æ€§<br>3.æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡<br>4.æ‰“åŒ…åœ¨åº”ç”¨ç¨‹åºå†…çš„ application.properties æˆ–è€… application.yml æ–‡ä»¶<br>5.é€šè¿‡ @PropertySource æ ‡æ³¨çš„å±æ€§æº<br>6.é»˜è®¤å±æ€§</p>
</li>
<li><p>ä½ å¯¹SpringBoot starterçš„ç†è§£ï¼Ÿ<br>Startersæ˜¯ä»€ä¹ˆï¼šStarterså¯ä»¥ç†è§£ä¸ºå¯åŠ¨å™¨ï¼Œå®ƒåŒ…å«äº†ä¸€ç³»åˆ—å¯ä»¥é›†æˆåˆ°åº”ç”¨é‡Œé¢çš„ä¾èµ–åŒ…ï¼Œä½ å¯ä»¥ä¸€ç«™å¼é›†æˆSpringåŠå…¶ä»–æŠ€æœ¯ï¼Œè€Œä¸éœ€è¦åˆ°å¤„æ‰¾ç¤ºä¾‹ä»£ç å’Œä¾èµ–åŒ…ã€‚<br>æ¯”å¦‚ Mybatis æ¡†æ¶ä¼šéœ€è¦å¼•å…¥å„ç§çš„åŒ…æ‰èƒ½ä½¿ç”¨ï¼Œè€Œstarterå°±æ˜¯åšäº†ä¸€å±‚å°è£…ï¼ŒæŠŠç›¸å…³è¦ç”¨åˆ°çš„jaréƒ½ç»™åŒ…èµ·æ¥äº†ï¼Œå¹¶ä¸”ä¹Ÿå†™å¥½äº†å¯¹åº”çš„ç‰ˆæœ¬ã€‚è¿™æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å°±ä¸éœ€è¦å¼•å…¥ä¸€å †jaråŒ…ä¸”ç®¡ç†ç‰ˆæœ¬ç±»ä¼¼çš„é—®é¢˜äº†ã€‚<br>StartersåŒ…å«äº†è®¸å¤šé¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°çš„ä¾èµ–ï¼Œå®ƒä»¬èƒ½å¿«é€ŸæŒç»­çš„è¿è¡Œï¼Œéƒ½æ˜¯ä¸€ç³»åˆ—å¾—åˆ°æ”¯æŒçš„ç®¡ç†ä¼ é€’æ€§ä¾èµ–ã€‚</p>
</li>
<li><p>å¸¸ç”¨çš„starterã€‚<br>spring-boot-starter-web åµŒå…¥tomcatå’Œwebå¼€å‘éœ€è¦servletä¸jspæ”¯æŒ<br>spring-boot-starter-data-jpa æ•°æ®åº“æ”¯æŒ<br>spring-boot-starter-data-redis redisæ•°æ®åº“æ”¯æŒ<br>spring-boot-starter-data-solr solræ”¯æŒ<br>mybatis-spring-boot-starter ç¬¬ä¸‰æ–¹çš„mybatisé›†æˆstarter</p>
</li>
<li><p>Spring Bootæ˜¯å¦‚ä½•å¯åŠ¨Tomcatçš„<br>1ï¼Œé¦–å…ˆï¼ŒSpringBootåœ¨å¯åŠ¨æ—¶ä¼šå…ˆåˆ›å»ºä¸€ä¸ªSpringå®¹å™¨<br>2ï¼Œåœ¨åˆ›å»º Springå®¹å™¨è¿‡ç¨‹ä¸­ï¼Œä¼šåˆ©ç”¨ @ConditionalOnClass æŠ€æœ¯æ¥åˆ¤æ–­å½“å‰ classpathä¸­æ˜¯å¦å­˜åœ¨ Tomcat ä¾èµ–ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¼šç”Ÿæˆä¸€ä¸ªå¯åŠ¨ tomcat çš„Bean<br>3ï¼ŒSpring å®¹å™¨åˆ›å»ºå®Œä¹‹åï¼Œå°±ä¼šè·å–å¯åŠ¨ Tomcat çš„Beanï¼Œå¹¶åˆ›å»º Tomcat å¯¹è±¡ï¼Œå¹¶ç»‘å®šç«¯å£ç­‰ï¼Œç„¶åå¯åŠ¨ Tomcat<br>ï¼ˆ Spring Bootå†…åµŒtomcatï¼Œä¸springmvcå¯åŠ¨tomcatè¿‡ç¨‹ç›¸åï¼Ÿï¼Ÿ</p>
</li>
<li><p>ï¼Ÿï¼Ÿï¼ŸSpring Bootä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åœ¨ Spring Boot ä¸­ç¦ç”¨ Actuator ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ<br>Spring boot actuatoræ˜¯springå¯åŠ¨æ¡†æ¶ä¸­çš„é‡è¦åŠŸèƒ½ä¹‹ä¸€ã€‚Spring bootç›‘è§†å™¨å¯å¸®åŠ©æ‚¨è®¿é—®ç”Ÿäº§ç¯å¢ƒä¸­æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€ã€‚æœ‰å‡ ä¸ªæŒ‡æ ‡å¿…é¡»åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œæ£€æŸ¥å’Œç›‘æ§ã€‚å³ä½¿ä¸€äº›å¤–éƒ¨åº”ç”¨ç¨‹åºå¯èƒ½æ­£åœ¨ä½¿ç”¨è¿™äº›æœåŠ¡æ¥å‘ç›¸å…³äººå‘˜è§¦å‘è­¦æŠ¥æ¶ˆæ¯ã€‚ç›‘è§†å™¨æ¨¡å—å…¬å¼€äº†ä¸€ç»„å¯ç›´æ¥ä½œä¸ºHTTP URLè®¿é—®çš„RESTç«¯ç‚¹æ¥æ£€æŸ¥çŠ¶æ€<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ•æ„Ÿçš„ HTTP ç«¯ç‚¹éƒ½æ˜¯å®‰å…¨çš„ï¼Œåªæœ‰å…·æœ‰ ACTUATATOR è§’è‰²çš„ç”¨æˆ·æ‰èƒ½è®¿é—®å®ƒä»¬ã€‚å®‰å…¨æ€§æ˜¯ä½¿ç”¨æ ‡å‡†çš„HttpServletRequest.isUserInRole æ–¹æ³•å®æ–½çš„ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¥ç¦ç”¨å®‰å…¨æ€§ã€‚åªæœ‰åœ¨æ‰§è¡Œæœºæ„ç«¯ç‚¹åœ¨é˜²ç«å¢™åè®¿é—®æ—¶ï¼Œæ‰å»ºè®®ç¦ç”¨å®‰å…¨æ€§ã€‚</p>
</li>
<li><p>å¦‚ä½•ä½¿ç”¨Spring Bootå®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ<br>Springæä¾›äº†ä¸€ç§ä½¿ç”¨ControllerAdviceå¤„ç†å¼‚å¸¸çš„éå¸¸æœ‰ç”¨çš„æ–¹æ³•ã€‚ æˆ‘ä»¬é€šè¿‡å®ç°ä¸€ä¸ªControlerAdviceç±»ï¼Œæ¥å¤„ç†æ§åˆ¶å™¨ç±»æŠ›å‡ºçš„æ‰€æœ‰å¼‚å¸¸</p>
</li>
<li><p>SpringBoot å®ç°çƒ­éƒ¨ç½²æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ<br>ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼šSpring Loadedï¼ŒSpring-boot-devtools</p>
</li>
<li><p>å¦‚ä½•å®ç° Spring Boot åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ï¼Ÿ<br>ä¸ºäº†å®ç° Spring Boot çš„å®‰å…¨æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨ spring-boot-starter-security ä¾èµ–é¡¹ï¼Œå¹¶ä¸”å¿…é¡»æ·»åŠ å®‰å…¨é…ç½®ã€‚å®ƒåªéœ€è¦å¾ˆå°‘çš„ä»£ç ã€‚é…ç½®ç±»å°†å¿…é¡»æ‰©å±•WebSecurityConfigurerAdapter å¹¶è¦†ç›–å…¶æ–¹æ³•ã€‚</p>
</li>
<li><p>Spring Boot æ”¯æŒå“ªäº›æ—¥å¿—æ¡†æ¶ï¼Ÿæ¨èå’Œé»˜è®¤çš„æ—¥å¿—æ¡†æ¶æ˜¯å“ªä¸ªï¼Ÿ<br>Spring Boot æ”¯æŒ  Java Util Logging, Log4j2, Lockback ä½œä¸ºæ—¥å¿—æ¡†æ¶ï¼Œå¦‚æœä½ ä½¿ç”¨ Starters å¯åŠ¨å™¨ï¼ŒSpring Boot å°†ä½¿ç”¨ Logback ä½œä¸ºé»˜è®¤æ—¥å¿—æ¡†æ¶</p>
</li>
<li><p>Spring Boot 2.X æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Ÿä¸ 1.X æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>é…ç½®å˜æ›´<br>JDK ç‰ˆæœ¬å‡çº§<br>ç¬¬ä¸‰æ–¹ç±»åº“å‡çº§<br>å“åº”å¼ Spring ç¼–ç¨‹<br>æ”¯æŒHTTP&#x2F;2<br>æ”¯æŒé…ç½®å±æ€§ç»‘å®š<br>æ›´å¤šæ”¹è¿›ä¸åŠ å¼ºâ€¦</p>
</li>
<li><p>SpringBoot é›†æˆ Mybatis çš„è¿‡ç¨‹<br>æ·»åŠ mybatisçš„starter mavenä¾èµ– org.mybatis.spring.boot mybatis-spring-boot-starter 1.2.0<br>åœ¨mybatisçš„æ¥å£ä¸­ æ·»åŠ @Mapperæ³¨è§£<br>åœ¨application.ymlé…ç½®æ•°æ®æºä¿¡æ¯</p>
</li>
<li><p>å¦‚ä½•å¯¹Spring Bootåº”ç”¨è¿›è¡Œæµ‹è¯•ï¼Ÿ<br>åœ¨ä¸ºSpringåº”ç”¨ç¨‹åºè¿è¡Œé›†æˆæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æœ‰ä¸€ä¸ª ApplicationContextã€‚<br>ä¸ºäº†ç®€åŒ–æµ‹è¯•ï¼ŒSpring Bootä¸ºæµ‹è¯•æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ³¨é‡Š @SpringBootTestã€‚æ­¤æ‰¹æ³¨ä»å…¶ classes å±æ€§æŒ‡ç¤ºçš„é…ç½®ç±»åˆ›å»º ApplicationContextã€‚ å¦‚æœæœªè®¾ç½®classeså±æ€§ï¼ŒSpring Bootå°†æœç´¢ä¸»é…ç½®ç±»ã€‚æœç´¢ä»åŒ…å«æµ‹è¯•çš„åŒ…å¼€å§‹ï¼Œç›´åˆ°æ‰¾åˆ°ä½¿ç”¨@SpringBootApplicationæˆ–@SpringBootConfigurationæ³¨é‡Šçš„ç±»ã€‚<br>ï¼Ÿï¼Ÿï¼Ÿè¯·æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ JUnit 4 ï¼Œæˆ‘ä»¬å¿…é¡»ç”¨ @RunWithï¼ˆSpringRunner.classï¼‰ è£…é¥°æµ‹è¯•ç±»ã€‚</p>
</li>
<li><p>Spring Boot é¡¹ç›®ç»“æ„</p>
<ul>
<li>Spring Boot é¡¹ç›®é€šå¸¸éµå¾ªä¸€ç§çº¦å®šå¤§äºé…ç½®çš„åŸåˆ™ï¼Œå¹¶æä¾›äº†ä¸€ç§å»ºè®®çš„é¡¹ç›®ç»“æ„ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´è½»æ¾åœ°ç»„ç»‡å’Œç®¡ç†é¡¹ç›®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¸è§çš„ Spring Boot é¡¹ç›®ç»“æ„ç¤ºä¾‹ï¼š  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">my-spring-boot-project</span><br><span class="line">|-- src</span><br><span class="line">|   |-- main</span><br><span class="line">|       |-- java</span><br><span class="line">|       |   |-- com</span><br><span class="line">|       |       |-- example</span><br><span class="line">|       |           |-- MySpringBootApplication.java</span><br><span class="line">|       |           |-- controller</span><br><span class="line">|       |               |-- HomeController.java</span><br><span class="line">|       |           |-- service</span><br><span class="line">|       |               |-- MyService.java</span><br><span class="line">|       |-- resources</span><br><span class="line">|           |-- application.properties</span><br><span class="line">|       |   |-- static</span><br><span class="line">|       |   |-- templates</span><br><span class="line">|-- target</span><br><span class="line">|-- pom.xml</span><br></pre></td></tr></table></figure></li>
<li><code>src/main/java</code>: å­˜æ”¾ Java æºä»£ç ã€‚</li>
<li><code>com.example.MySpringBootApplication</code>: Spring Boot åº”ç”¨ç¨‹åºçš„ä¸»ç±»ï¼ŒåŒ…å« <code>main</code> æ–¹æ³•ï¼Œç”¨äºå¯åŠ¨åº”ç”¨ç¨‹åºã€‚</li>
<li><code>com.example.controller</code>: å­˜æ”¾æ§åˆ¶å™¨ç±»ï¼Œå¤„ç† HTTP è¯·æ±‚ã€‚</li>
<li><code>com.example.service</code>: å­˜æ”¾æœåŠ¡ç±»ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</li>
<li><code>src/main/resources</code>: å­˜æ”¾èµ„æºæ–‡ä»¶ã€‚</li>
<li><code>application.properties</code>: Spring Boot åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®å„ç§å±æ€§ã€‚</li>
<li><code>static</code>: å­˜æ”¾é™æ€èµ„æºæ–‡ä»¶ï¼Œå¦‚ CSSã€JavaScript ç­‰ã€‚</li>
<li><code>templates</code>: å­˜æ”¾æ¨¡æ¿æ–‡ä»¶ï¼Œå¦‚ Thymeleaf æ¨¡æ¿ã€‚</li>
<li><code>target</code>: Maven æ„å»ºç›®å½•ï¼ŒåŒ…å«ç¼–è¯‘åçš„ç±»æ–‡ä»¶å’Œæ„å»ºäº§ç‰©ã€‚</li>
<li><code>pom.xml</code>: Maven é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰é¡¹ç›®çš„ä¾èµ–å’Œæ„å»ºé…ç½®ã€‚</li>
</ul>
</li>
<li><p>æœ€åèŠä¸‹ä½ æ˜¯æ€ä¹ˆçœ‹è¿™å—æºç çš„ï¼Ÿï¼Ÿï¼Ÿ<br>æ€è·¯ï¼šæˆ‘å…ˆä»å¯åŠ¨ç±»å¼€å§‹ï¼Œä¼šæœ‰ä¸ª@SpringBootApplicationï¼Œåé¢ä¼šå®šä½åˆ°ä¸€ä¸ªè‡ªåŠ¨é…ç½®çš„æ³¨è§£@EnableAutoConfigurationï¼Œé‚£æœ€åå°±èƒ½çœ‹åˆ°æ³¨è§£å†…éƒ¨ä¼šå»META-INF&#x2F;spring.factoriesåŠ è½½é…ç½®ç±»</p>
</li>
</ul>
<hr>


<h2 id="SpringCloud"><a href="#SpringCloud" class="headerlink" title="SpringCloud"></a>SpringCloud</h2><ul>
<li><p>ä»€ä¹ˆæ˜¯ Spring Cloudï¼Ÿ<br>Spring cloud æµåº”ç”¨ç¨‹åºå¯åŠ¨å™¨æ˜¯åŸºäº Spring Boot çš„ Spring é›†æˆåº”ç”¨ç¨‹åºï¼Œæä¾›ä¸å¤–éƒ¨ç³»ç»Ÿçš„é›†æˆã€‚Spring cloud Taskï¼Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçŸ­æš‚çš„å¾®æœåŠ¡æ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿæ„å»ºæ‰§è¡Œæœ‰é™æ•°æ®å¤„ç†çš„åº”ç”¨ç¨‹åºã€‚ </p>
</li>
<li><p>ä½¿ç”¨ Spring Cloud æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</p>
<ol>
<li><strong>é«˜å¯ç”¨æ€§ï¼š</strong> åˆ†å¸ƒå¼æ¶æ„èƒ½å¤Ÿæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚é€šè¿‡å°†ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªæœåŠ¡å¹¶åˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œå³ä½¿æŸä¸ªèŠ‚ç‚¹æˆ–æœåŠ¡å‡ºç°æ•…éšœï¼Œæ•´ä¸ªç³»ç»Ÿä»ç„¶èƒ½å¤Ÿç»§ç»­è¿è¡Œã€‚</li>
<li><strong>æ‰©å±•æ€§ï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥æ›´å®¹æ˜“åœ°è¿›è¡Œæ¨ªå‘æ‰©å±•ã€‚é€šè¿‡å¢åŠ èŠ‚ç‚¹æˆ–æœåŠ¡ï¼Œç³»ç»Ÿå¯ä»¥æ›´å¥½åœ°å¤„ç†å¢åŠ çš„è´Ÿè½½ï¼Œæé«˜æ€§èƒ½å’Œååé‡ã€‚</li>
<li><strong>å®¹é”™æ€§ï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿèƒ½å¤Ÿé€šè¿‡å†—ä½™å’Œå¤‡ä»½æœºåˆ¶æ¥æé«˜å®¹é”™æ€§ã€‚å³ä½¿æŸä¸ªèŠ‚ç‚¹æˆ–æœåŠ¡å‡ºç°æ•…éšœï¼Œå¤‡ä»½èŠ‚ç‚¹æˆ–æœåŠ¡å¯ä»¥æ¥ç®¡å·¥ä½œï¼Œä¿è¯ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚</li>
<li><strong>çµæ´»æ€§ï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿèƒ½å¤Ÿæ›´å¥½åœ°æ”¯æŒå¼‚æ„æ€§ï¼Œå³ä¸åŒç±»å‹çš„ç¡¬ä»¶ã€æ“ä½œç³»ç»Ÿå’Œç¼–ç¨‹è¯­è¨€ã€‚è¿™ä½¿å¾—ç³»ç»Ÿæ›´åŠ çµæ´»ï¼Œèƒ½å¤Ÿé€‰æ‹©æœ€é€‚åˆç‰¹å®šä»»åŠ¡çš„æŠ€æœ¯æ ˆã€‚</li>
<li><strong>èµ„æºå…±äº«ï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥å……åˆ†åˆ©ç”¨å¤šä¸ªèŠ‚ç‚¹çš„è®¡ç®—å’Œå­˜å‚¨èµ„æºï¼Œå®ç°èµ„æºçš„å…±äº«å’Œæœ€ä¼˜åŒ–åˆ©ç”¨ã€‚</li>
<li><strong>é™ä½å•ç‚¹æ•…éšœé£é™©ï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿé€šè¿‡å°†ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼Œé™ä½äº†å•ç‚¹æ•…éšœçš„é£é™©ã€‚å³ä½¿æŸä¸ªèŠ‚ç‚¹æˆ–æœåŠ¡å‡ºç°é—®é¢˜ï¼Œå…¶ä»–éƒ¨åˆ†ä»ç„¶å¯ä»¥ç»§ç»­è¿è¡Œã€‚</li>
<li><strong>åœ°ç†åˆ†å¸ƒï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿæ”¯æŒåœ°ç†åˆ†å¸ƒï¼Œä½¿å¾—æœåŠ¡å¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„åœ°ç†ä½ç½®ï¼Œæé«˜æœåŠ¡çš„å¯ç”¨æ€§å’Œå“åº”é€Ÿåº¦ã€‚</li>
<li><strong>æé«˜æ€§èƒ½ï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥é€šè¿‡å¹¶è¡Œè®¡ç®—å’Œåˆ†å¸ƒå¼å­˜å‚¨æ¥æé«˜æ€§èƒ½ã€‚ä»»åŠ¡å¯ä»¥åŒæ—¶åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼ŒåŠ é€Ÿå¤„ç†è¿‡ç¨‹ã€‚</li>
</ol>
</li>
<li><p>ä½¿ç”¨ Spring Boot å¼€å‘åˆ†å¸ƒå¼å¾®æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹é—®é¢˜<br>1ã€ä¸åˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„å¤æ‚æ€§-è¿™ç§å¼€é”€åŒ…æ‹¬ç½‘ç»œé—®é¢˜ï¼Œå»¶è¿Ÿå¼€é”€ï¼Œå¸¦å®½é—®é¢˜ï¼Œå®‰å…¨é—®é¢˜ã€‚<br>2ã€æœåŠ¡å‘ç°-æœåŠ¡å‘ç°å·¥å…·ç®¡ç†ç¾¤é›†ä¸­çš„æµç¨‹å’ŒæœåŠ¡å¦‚ä½•æŸ¥æ‰¾å’Œäº’ç›¸äº¤è°ˆã€‚å®ƒæ¶‰åŠä¸€ä¸ªæœåŠ¡ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸­æ³¨å†ŒæœåŠ¡ï¼Œç„¶åèƒ½å¤ŸæŸ¥æ‰¾å¹¶è¿æ¥åˆ°è¯¥ç›®å½•ä¸­çš„æœåŠ¡ã€‚<br>3ã€å†—ä½™-åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å†—ä½™é—®é¢˜ã€‚<br>4ã€è´Ÿè½½å¹³è¡¡ â€“è´Ÿè½½å¹³è¡¡æ”¹å–„è·¨å¤šä¸ªè®¡ç®—èµ„æºçš„å·¥ä½œè´Ÿè·ï¼Œè¯¸å¦‚è®¡ç®—æœºï¼Œè®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾è·¯ï¼Œä¸­å¤®å¤„ç†å•å…ƒï¼Œæˆ–ç£ç›˜é©±åŠ¨å™¨çš„åˆ†å¸ƒã€‚<br>5ã€æ€§èƒ½-é—®é¢˜ ç”±äºå„ç§è¿è¥å¼€é”€å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚<br>6ã€éƒ¨ç½²å¤æ‚æ€§-Devops æŠ€èƒ½çš„è¦æ±‚ã€‚</p>
</li>
<li><p>Spring Cloud ä¸­çš„äº”å¤§ç»„ä»¶ã€‚</p>
<ol>
<li><strong>Eurekaï¼ˆæœåŠ¡æ³¨å†Œä¸å‘ç°ï¼‰ï¼š</strong> æœåŠ¡æ³¨å†Œä¸å‘ç°æ¡†æ¶ã€‚å®ƒç”¨äºç®¡ç†å„ä¸ªå¾®æœåŠ¡çš„çŠ¶æ€ï¼Œä»¥å®ç°æœåŠ¡ä¹‹é—´çš„é€šä¿¡å’Œå‘ç°ã€‚</li>
<li><strong>Ribbonï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼š</strong> Ribbon æ˜¯ä¸€ä¸ªåŸºäº HTTP å’Œ TCP çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å·¥å…·ï¼Œåœ¨æœåŠ¡æ¶ˆè´¹è€…çš„è¯·æ±‚ä¸­è‡ªåŠ¨å®ç°è´Ÿè½½å‡è¡¡ï¼Œä»è€Œåˆ†æ‘Šåˆ°å¤šä¸ªæœåŠ¡æä¾›è€…ä¸Šã€‚</li>
<li><strong>Feignï¼ˆå£°æ˜å¼æœåŠ¡è°ƒç”¨ï¼‰ï¼š</strong> Feign æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ä¼ª HTTP å®¢æˆ·ç«¯ï¼Œå®ƒä½¿å¾—ç¼–å†™ HTTP å®¢æˆ·ç«¯å˜å¾—æ›´åŠ ç®€å•ã€‚é€šè¿‡ Feignï¼Œå¼€å‘è€…åªéœ€ä½¿ç”¨æ³¨è§£æ–¹å¼å°±å¯ä»¥è½»æ¾åœ°è°ƒç”¨æœåŠ¡ï¼Œè€Œä¸ç”¨æ‰‹åŠ¨å¤„ç† HTTP è¯·æ±‚å’Œå“åº”ã€‚</li>
<li><strong>Hystrixï¼ˆç†”æ–­å™¨ï¼‰ï¼š</strong> ä¸€ç§å»¶è¿Ÿå’Œæ•…éšœå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ã€ç¬¬ä¸‰æ–¹åº“æˆ–è€…æœåŠ¡çš„ç‚¹ï¼Œé˜²æ­¢æ•…éšœè”“å»¶åˆ°æ•´ä¸ªç³»ç»Ÿï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¼¹æ€§å’Œå¯ç”¨æ€§ã€‚</li>
<li><strong>Zuulï¼ˆAPI ç½‘å…³ï¼‰ï¼š</strong> Zuul æ˜¯ Netflix æä¾›çš„ä¸€ä¸ªåŸºäº JVM è·¯ç”±å’ŒæœåŠ¡ç«¯çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œç”¨äºæ„å»ºå¾®æœåŠ¡æ¶æ„ä¸­çš„ API ç½‘å…³ï¼Œå¯¹å¤–ç»Ÿä¸€æä¾›æœåŠ¡è®¿é—®å…¥å£ï¼Œå¹¶æä¾›äº†è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­ã€å®‰å…¨ç­‰åŠŸèƒ½ã€‚</li>
</ol>
</li>
<li><p>æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸSpring Cloud å¦‚ä½•å®ç°ï¼Ÿ<br>å½“æˆ‘ä»¬å¼€å§‹ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨å±æ€§æ–‡ä»¶ä¸­è¿›è¡Œæ‰€æœ‰çš„é…ç½®ã€‚éšç€è¶Šæ¥è¶Šå¤šçš„æœåŠ¡å¼€å‘å’Œéƒ¨ç½²ï¼Œæ·»åŠ å’Œä¿®æ”¹è¿™äº›å±æ€§å˜å¾—æ›´åŠ å¤æ‚ã€‚æœ‰äº›æœåŠ¡å¯èƒ½ä¼šä¸‹é™ï¼Œè€ŒæŸäº›ä½ç½®å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æ‰‹åŠ¨æ›´æ”¹å±æ€§å¯èƒ½ä¼šäº§ç”Ÿé—®é¢˜ã€‚ Eureka æœåŠ¡æ³¨å†Œå’Œå‘ç°å¯ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹æä¾›å¸®åŠ©ã€‚ç”±äºæ‰€æœ‰æœåŠ¡éƒ½åœ¨ Eureka æœåŠ¡å™¨ä¸Šæ³¨å†Œå¹¶é€šè¿‡è°ƒç”¨ Eureka æœåŠ¡å™¨å®ŒæˆæŸ¥æ‰¾ï¼Œå› æ­¤æ— éœ€å¤„ç†æœåŠ¡åœ°ç‚¹çš„ä»»ä½•æ›´æ”¹å’Œå¤„ç†ã€‚ </p>
</li>
<li><p>è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ<br>åœ¨è®¡ç®—ä¸­ï¼Œè´Ÿè½½å¹³è¡¡å¯ä»¥æ”¹å–„è·¨è®¡ç®—æœºï¼Œè®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾æ¥ï¼Œä¸­å¤®å¤„ç†å•å…ƒæˆ–ç£ç›˜é©±åŠ¨å™¨ç­‰å¤šç§è®¡ç®—èµ„æºçš„å·¥ä½œè´Ÿè½½åˆ†å¸ƒã€‚è´Ÿè½½å¹³è¡¡æ—¨åœ¨ä¼˜åŒ–èµ„æºä½¿ç”¨ï¼Œæœ€å¤§åŒ–ååé‡ï¼Œæœ€å°åŒ–å“åº”æ—¶é—´å¹¶é¿å…ä»»ä½•å•ä¸€èµ„æºçš„è¿‡è½½ã€‚ä½¿ç”¨å¤šä¸ªç»„ä»¶è¿›è¡Œè´Ÿè½½å¹³è¡¡è€Œä¸æ˜¯å•ä¸ªç»„ä»¶å¯èƒ½ä¼šé€šè¿‡å†—ä½™æ¥æé«˜å¯é æ€§å’Œå¯ç”¨æ€§ã€‚è´Ÿè½½å¹³è¡¡é€šå¸¸æ¶‰åŠä¸“ç”¨è½¯ä»¶æˆ–ç¡¬ä»¶ï¼Œä¾‹å¦‚å¤šå±‚äº¤æ¢æœºæˆ–åŸŸåç³»ç»ŸæœåŠ¡å™¨è¿›ç¨‹ã€‚</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯ Hystrixï¼Ÿï¼Ÿï¼Ÿ<br>å®ƒå¦‚ä½•å®ç°å®¹é”™ï¼ŸHystrix æ˜¯ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œæ—¨åœ¨éš”ç¦»è¿œç¨‹ç³»ç»Ÿï¼ŒæœåŠ¡å’Œç¬¬ä¸‰æ–¹åº“çš„è®¿é—®ç‚¹ï¼Œå½“å‡ºç°æ•…éšœæ˜¯ä¸å¯é¿å…çš„æ•…éšœæ—¶ï¼Œåœæ­¢çº§è”æ•…éšœå¹¶åœ¨å¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°å¼¹æ€§ã€‚é€šå¸¸å¯¹äºä½¿ç”¨å¾®æœåŠ¡æ¶æ„å¼€å‘çš„ç³»ç»Ÿï¼Œæ¶‰åŠåˆ°è®¸å¤šå¾®æœåŠ¡ã€‚è¿™äº›å¾®æœåŠ¡å½¼æ­¤åä½œ</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯å¾®æœåŠ¡<br>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼æˆ–è€…è¯´æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå®ƒæå€¡å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºä¸€ç»„å°çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’åè°ƒã€äº’ç›¸é…åˆï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚æœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶äº’ç›¸æ²Ÿé€šï¼ˆé€šå¸¸æ˜¯åŸºäºHTTPçš„RESTful APIï¼‰,æ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç‹¬ç«‹çš„æ„å»ºåœ¨ç”Ÿäº§ç¯å¢ƒã€ç±»ç”Ÿäº§ç¯å¢ƒç­‰ã€‚<br>å¦å¤–ï¼Œåº”é¿å…ç»Ÿä¸€çš„ã€é›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ã€å·¥å…·å¯¹å…¶è¿›è¡Œæ„å»ºï¼Œå¯ä»¥æœ‰ä¸€ä¸ªéå¸¸è½»é‡çº§çš„é›†ä¸­å¼ç®¡ç†æ¥åè°ƒè¿™äº›æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€æ¥ç¼–å†™æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨ã€‚ </p>
</li>
<li><p>ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­ï¼ŸæœåŠ¡é™çº§ï¼Ÿ<br>æœåŠ¡é™çº§ç†”æ–­æœºåˆ¶æ˜¯åº”å¯¹é›ªå´©æ•ˆåº”çš„ä¸€ç§å¾®æœåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶ã€‚å½“æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨æˆ–è€…å“åº”æ—¶é—´å¤ªé•¿æ—¶ï¼Œä¼šè¿›è¡ŒæœåŠ¡é™çº§ï¼Œè¿›è€Œç†”æ–­è¯¥èŠ‚ç‚¹å¾®æœåŠ¡çš„è°ƒç”¨ï¼Œå¿«é€Ÿè¿”å›â€œé”™è¯¯â€çš„å“åº”ä¿¡æ¯ã€‚å½“æ£€æµ‹åˆ°è¯¥èŠ‚ç‚¹å¾®æœåŠ¡è°ƒç”¨å“åº”æ­£å¸¸åæ¢å¤è°ƒç”¨é“¾è·¯ã€‚åœ¨SpringCloudæ¡†æ¶é‡Œç†”æ–­æœºåˆ¶é€šè¿‡Hystrixå®ç°ï¼ŒHystrixä¼šç›‘æ§å¾®æœåŠ¡é—´è°ƒç”¨çš„çŠ¶å†µï¼Œå½“å¤±è´¥çš„è°ƒç”¨åˆ°ä¸€å®šé˜ˆå€¼ï¼Œç¼ºçœæ˜¯5ç§’å†…è°ƒç”¨20æ¬¡ï¼Œå¦‚æœå¤±è´¥ï¼Œå°±ä¼šå¯åŠ¨ç†”æ–­æœºåˆ¶ã€‚<br>æœåŠ¡é™çº§ï¼Œä¸€èˆ¬æ˜¯ä»æ•´ä½“è´Ÿè·è€ƒè™‘ã€‚å°±æ˜¯å½“æŸä¸ªæœåŠ¡ç†”æ–­ä¹‹åï¼ŒæœåŠ¡å™¨å°†ä¸å†è¢«è°ƒç”¨ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¯ä»¥è‡ªå·±å‡†å¤‡ä¸€ä¸ªæœ¬åœ°çš„fallbackå›è°ƒï¼Œè¿”å›ä¸€ä¸ªç¼ºçœå€¼ã€‚è¿™æ ·åšï¼Œè™½ç„¶æ°´å¹³ä¸‹é™ï¼Œä½†å¥½æ­¹å¯ç”¨ï¼Œæ¯”ç›´æ¥æŒ‚æ‰å¼ºã€‚</p>
</li>
<li><p>è¯´è¯´ RPC çš„å®ç°åŸç†<br>é¦–å…ˆéœ€è¦æœ‰å¤„ç†ç½‘ç»œè¿æ¥é€šè®¯çš„æ¨¡å—ï¼Œè´Ÿè´£è¿æ¥å»ºç«‹ã€ç®¡ç†å’Œæ¶ˆæ¯çš„ä¼ è¾“ã€‚å…¶æ¬¡éœ€è¦æœ‰ç¼–è§£ç çš„æ¨¡å—ï¼Œå› ä¸ºç½‘ç»œé€šè®¯éƒ½æ˜¯ä¼ è¾“çš„å­—èŠ‚ç ï¼Œéœ€è¦å°†æˆ‘ä»¬ä½¿ç”¨çš„å¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å‰©ä¸‹çš„å°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„éƒ¨åˆ†ï¼ŒæœåŠ¡å™¨ç«¯æš´éœ²è¦å¼€æ”¾çš„æœåŠ¡æ¥å£ï¼Œå®¢æˆ·è°ƒç”¨æœåŠ¡æ¥å£çš„ä¸€ä¸ªä»£ç†å®ç°ï¼Œè¿™ä¸ªä»£ç†å®ç°è´Ÿè´£æ”¶é›†æ•°æ®ã€ç¼–ç å¹¶ä¼ è¾“ç»™æœåŠ¡å™¨ç„¶åç­‰å¾…ç»“æœè¿”å›ã€‚</p>
</li>
<li><p>REST å’ŒRPCå¯¹æ¯”<br>1.RPCä¸»è¦çš„ç¼ºé™·æ˜¯æœåŠ¡æä¾›æ–¹å’Œè°ƒç”¨æ–¹å¼ä¹‹é—´çš„ä¾èµ–å¤ªå¼ºï¼Œéœ€è¦å¯¹æ¯ä¸€ä¸ªå¾®æœåŠ¡è¿›è¡Œæ¥å£çš„å®šä¹‰ï¼Œå¹¶é€šè¿‡æŒç»­ç»§æ‰¿å‘å¸ƒï¼Œä¸¥æ ¼ç‰ˆæœ¬æ§åˆ¶æ‰ä¸ä¼šå‡ºç°å†²çªã€‚<br>2.RESTæ˜¯è½»é‡çº§çš„æ¥å£ï¼ŒæœåŠ¡çš„æä¾›å’Œè°ƒç”¨ä¸å­˜åœ¨ä»£ç ä¹‹é—´çš„è€¦åˆï¼Œåªéœ€è¦ä¸€ä¸ªçº¦å®šè¿›è¡Œè§„èŒƒã€‚</p>
</li>
<li><p>å¾®æœåŠ¡çš„ä¼˜ç‚¹ç¼ºç‚¹?è¯´ä¸‹å¼€å‘é¡¹ç›®ä¸­é‡åˆ°çš„å‘?<br>ä¼˜ç‚¹:1.æ¯ä¸ªæœåŠ¡ç›´æ¥è¶³å¤Ÿå†…èšï¼Œä»£ç å®¹æ˜“ç†è§£2.å¼€å‘æ•ˆç‡é«˜ï¼Œä¸€ä¸ªæœåŠ¡åªåšä¸€ä»¶äº‹ï¼Œé€‚åˆå°å›¢é˜Ÿå¼€å‘3.æ¾è€¦åˆï¼Œæœ‰åŠŸèƒ½æ„ä¹‰çš„æœåŠ¡ã€‚4.å¯ä»¥ç”¨ä¸åŒè¯­è¨€å¼€å‘ï¼Œé¢å‘æ¥å£ç¼–ç¨‹ã€‚5.æ˜“äºç¬¬ä¸‰æ–¹é›†æˆ6.å¾®æœåŠ¡åªæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œä¸ä¼šå’ŒHTML,CSSæˆ–å…¶ä»–ç•Œé¢ç»“åˆ.7.å¯ä»¥çµæ´»æ­é…ï¼Œè¿æ¥å…¬å…±åº“&#x2F;è¿æ¥ç‹¬ç«‹åº“<br>ç¼ºç‚¹:1.åˆ†å¸ƒå¼ç³»ç»Ÿçš„è´£ä»»æ€§2.å¤šæœåŠ¡è¿ç»´éš¾åº¦åŠ å¤§ã€‚3.ç³»ç»Ÿéƒ¨ç½²ä¾èµ–ï¼ŒæœåŠ¡é—´é€šä¿¡æˆæœ¬ï¼Œæ•°æ®ä¸€è‡´æ€§ï¼Œç³»ç»Ÿé›†æˆæµ‹è¯•ï¼Œæ€§èƒ½ç›‘æ§ã€‚</p>
</li>
<li><p>Spring Cloud å’Œ Dubbo æœ‰å“ªäº›åŒºåˆ«?<br>Spring cloudæ˜¯ä¸€ä¸ªå¾®æœåŠ¡æ¡†æ¶ï¼Œæä¾›äº†å¾®æœåŠ¡é¢†åŸŸä¸­çš„å¾ˆå¤šåŠŸèƒ½ç»„ä»¶ï¼ŒDubboä»¥å¼€å§‹æ˜¯ä¸€ä¸ªRPCè°ƒç”¨æ¡†æ¶ï¼Œæ ¸å¿ƒæ˜¯è§£å†³æœåŠ¡è°ƒç”¨é—´çš„é—®é¢˜ï¼ŒSpringcloudæ˜¯ä¸€ä¸ªå¤§è€Œå…¨æ¡†æ¶ï¼ŒDubboåˆ™æ›´ä¾§é‡äºæœåŠ¡è°ƒç”¨ï¼Œæ‰€ä»¥Dubboæ‰€æä¾›çš„åŠŸèƒ½æ²¡æœ‰Springcloudå…¨é¢ï¼Œä½†Dubboçš„æœåŠ¡è°ƒç”¨æ€§èƒ½Springcloudé«˜ï¼Œä¸è¿‡å¹¶ä¸å¯¹ç«‹çš„ï¼Œæ˜¯å¯ä»¥ç»“åˆèµ·æ¥ä¸€èµ·ä½¿ç”¨çš„ã€‚</p>
</li>
<li><p>Eurekaå’Œzookeeperéƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½ï¼Œè¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«ï¼Ÿ<br>Zookeeperä¿è¯äº†CPï¼ˆCï¼šä¸€è‡´æ€§ï¼ŒPï¼šåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼ŒEurekaä¿è¯äº†APï¼ˆAï¼šé«˜å¯ç”¨ï¼‰<br>1.å½“å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢æœåŠ¡åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿æ³¨å†Œä¸­å¿ƒè¿”å›çš„æ˜¯å‡ åˆ†é’Ÿä»¥å‰çš„ä¿¡æ¯ï¼Œä½†ä¸èƒ½å®¹å¿ç›´æ¥downæ‰ä¸å¯ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡æ³¨å†ŒåŠŸèƒ½å¯¹é«˜å¯ç”¨æ€§è¦æ±‚æ¯”è¾ƒé«˜ï¼Œä½†zkä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“masterèŠ‚ç‚¹å› ä¸ºç½‘ç»œæ•…éšœä¸å…¶ä»–èŠ‚ç‚¹å¤±å»è”ç³»æ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹ä¼šé‡æ–°é€‰leaderã€‚é—®é¢˜åœ¨äºï¼Œé€‰å–leaderæ—¶é—´è¿‡é•¿ï¼Œ30 ~ 120sï¼Œä¸”é€‰å–æœŸé—´zké›†ç¾¤éƒ½ä¸å¯ç”¨ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é€‰å–æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚åœ¨äº‘éƒ¨ç½²çš„ç¯å¢ƒä¸‹ï¼Œå› ç½‘ç»œé—®é¢˜ä½¿å¾—zké›†ç¾¤å¤±å»masterèŠ‚ç‚¹æ˜¯è¾ƒå¤§æ¦‚ç‡ä¼šå‘ç”Ÿçš„äº‹ï¼Œè™½ç„¶æœåŠ¡èƒ½å¤Ÿæ¢å¤ï¼Œä½†æ˜¯æ¼«é•¿çš„é€‰å–æ—¶é—´å¯¼è‡´çš„æ³¨å†Œé•¿æœŸä¸å¯ç”¨æ˜¯ä¸èƒ½å®¹å¿çš„ã€‚<br>2.Eurekaä¿è¯äº†å¯ç”¨æ€§ï¼ŒEurekaå„ä¸ªèŠ‚ç‚¹æ˜¯å¹³ç­‰çš„ï¼Œå‡ ä¸ªèŠ‚ç‚¹æŒ‚æ‰ä¸ä¼šå½±å“æ­£å¸¸èŠ‚ç‚¹çš„å·¥ä½œï¼Œå‰©ä½™çš„èŠ‚ç‚¹ä»ç„¶å¯ä»¥æä¾›æ³¨å†Œå’ŒæŸ¥è¯¢æœåŠ¡ã€‚è€ŒEurekaçš„å®¢æˆ·ç«¯å‘æŸä¸ªEurekaæ³¨å†Œæˆ–å‘ç°æ—¶å‘ç”Ÿè¿æ¥å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œåªè¦æœ‰ä¸€å°Eurekaè¿˜åœ¨ï¼Œå°±èƒ½ä¿è¯æ³¨å†ŒæœåŠ¡å¯ç”¨ï¼Œåªæ˜¯æŸ¥åˆ°çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒEurekaè¿˜æœ‰è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚æœåœ¨15åˆ†é’Ÿå†…è¶…è¿‡85%çš„èŠ‚ç‚¹æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆEurekaå°±è®¤ä¸ºå®¢æˆ·ç«¯ä¸æ³¨å†Œä¸­å¿ƒå‘ç”Ÿäº†ç½‘ç»œæ•…éšœï¼Œæ­¤æ—¶ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š<br>â‘ ã€Eurekaä¸åœ¨ä»æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤å› ä¸ºé•¿æ—¶é—´æ²¡æœ‰æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡ã€‚<br>â‘¡ã€Eurekaä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚ï¼Œä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šï¼ˆå³ä¿è¯å½“å‰èŠ‚ç‚¹ä»ç„¶å¯ç”¨ï¼‰<br>â‘¢ã€å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰å®ä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚å› æ­¤ï¼ŒEurekaå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±å»è”ç³»çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒZookeeperé‚£æ ·ä½¿æ•´ä¸ªå¾®æœåŠ¡ç˜«ç—ª</p>
</li>
<li><p>Ribbonå’ŒFeignçš„åŒºåˆ«ï¼Ÿ<br>1.éƒ½æ˜¯è°ƒç”¨å…¶ä»–æœåŠ¡çš„ï¼Œä½†æ–¹å¼ä¸åŒã€‚<br>2.å¯åŠ¨ç±»æ³¨è§£ä¸åŒï¼ŒRibbonæ˜¯@RibbonClientï¼Œfeignçš„æ˜¯@EnableFeignClients<br>3.æœåŠ¡æŒ‡å®šçš„ä½ç½®ä¸åŒï¼ŒRibbonæ˜¯åœ¨@RibbonClientæ³¨è§£ä¸Šå£°æ˜ï¼ŒFeignåˆ™æ˜¯åœ¨å®šä¹‰æŠ½è±¡æ–¹æ³•çš„æ¥å£ä¸­ä½¿ç”¨@FeignClientå£°æ˜ã€‚<br>4.è°ƒç”¨æ–¹å¼ä¸åŒï¼ŒRibbonéœ€è¦è‡ªå·±æ„å»ºhttpè¯·æ±‚ï¼Œæ¨¡æ‹Ÿhttpè¯·æ±‚ç„¶åä½¿ç”¨RestTeTemplateå‘é€ç»™å…¶ä»–æœåŠ¡ï¼Œæ­¥éª¤ç›¸å½“ç¹çã€‚Feignéœ€è¦å°†è°ƒç”¨çš„æ–¹æ³•å®šä¹‰æˆæŠ½è±¡æ–¹æ³•å³å¯ã€‚</p>
</li>
<li><p>Spring Cloud Gateway?<br>Spring Cloud Gatewayæ˜¯Spring Cloudå®˜æ–¹æ¨å‡ºçš„ç¬¬äºŒä»£ç½‘å…³æ¡†æ¶ï¼Œå–ä»£Zuulç½‘å…³ã€‚ç½‘å…³ä½œä¸ºæµé‡çš„ï¼Œåœ¨å¾®æœåŠ¡ç³»ç»Ÿä¸­æœ‰ç€éå¸¸ä½œç”¨ï¼Œç½‘å…³å¸¸è§çš„åŠŸèƒ½æœ‰è·¯ç”±è½¬å‘ã€æƒé™æ ¡éªŒã€é™æµæ§åˆ¶ç­‰ä½œç”¨ã€‚<br>ä½¿ç”¨äº†ä¸€ä¸ªRouteLocatorBuilderçš„beanå»åˆ›å»ºè·¯ç”±ï¼Œé™¤äº†åˆ›å»ºè·¯ç”±RouteLocatorBuilderå¯ä»¥è®©ä½ æ·»åŠ å„ç§predicateså’Œfiltersï¼Œpredicatesæ–­è¨€çš„æ„æ€ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ ¹æ®å…·ä½“çš„è¯·æ±‚çš„è§„åˆ™ï¼Œç”±å…·ä½“çš„routeå»å¤„ç†ï¼Œfiltersæ˜¯å„ç§è¿‡æ»¤å™¨ï¼Œç”¨æ¥å¯¹è¯·æ±‚åšå„ç§åˆ¤æ–­å’Œä¿®æ”¹ã€‚</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯ Ribbonè´Ÿè½½å‡è¡¡ï¼Ÿ<br>1.Spring Cloud Ribbonæ˜¯åŸºäºNetflix Ribbonå®ç°çš„ä¸€å¥—å®¢æˆ·ç«¯ è´Ÿè½½å‡è¡¡çš„å·¥å…·ã€‚<br>2.Ribbonå®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—å®Œå–„çš„é…ç½®é¡¹å¦‚è¿æ¥è¶…æ—¶ï¼Œé‡è¯•ç­‰ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºLoad Balancerï¼ˆç®€ç§°LBï¼‰åé¢æ‰€æœ‰çš„æœºå™¨ï¼ŒRibbonä¼šè‡ªåŠ¨çš„å¸®åŠ©ä½ åŸºäºæŸç§è§„åˆ™ï¼ˆå¦‚ç®€å•è½®è¯¢ï¼Œéšæœºè¿æ¥ç­‰ï¼‰å»è¿æ¥è¿™äº›æœºå™¨ã€‚æˆ‘ä»¬ä¹Ÿå¾ˆå®¹æ˜“ä½¿ç”¨Ribbonå®ç°è‡ªå®šä¹‰çš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/10/12/%E9%9D%A2%E8%AF%95_Java/" data-id="cmjzvj9mj0010hgv5g8bdfdgx" data-title="é¢ é€ | Java" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-é¢è¯•_ç»„ä»¶" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/11/%E9%9D%A2%E8%AF%95_%E7%BB%84%E4%BB%B6/" class="article-date">
  <time class="dt-published" datetime="2023-10-11T03:11:00.000Z" itemprop="datePublished">2023-10-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/11/%E9%9D%A2%E8%AF%95_%E7%BB%84%E4%BB%B6/">é¢ é€ | ç»„ä»¶</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><ul>
<li><p>SQL è¯­è¨€ç±»åˆ«ã€‚</p>
<ol>
<li>DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰ï¼šDDL ç”¨äºå®šä¹‰å’Œç®¡ç†æ•°æ®åº“å¯¹è±¡ï¼ˆå¦‚è¡¨ã€ç´¢å¼•ã€è§†å›¾ç­‰ï¼‰ï¼›<br>  <code>CREATE TABLE</code>ï¼šåˆ›å»ºè¡¨ã€‚ <code>ALTER TABLE</code>ï¼šä¿®æ”¹è¡¨ç»“æ„ã€‚<code>DROP TABLE</code>ï¼šåˆ é™¤è¡¨ã€‚<code>CREATE INDEX</code>ï¼šåˆ›å»ºç´¢å¼•ã€‚</li>
<li>DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰ï¼šDML ç”¨äºå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œï¼›<br>  <code>SELECT</code>ï¼šæŸ¥è¯¢æ•°æ®ã€‚ <code>INSERT</code>ï¼šæ’å…¥æ•°æ®ã€‚ <code>UPDATE</code>ï¼šæ›´æ–°æ•°æ®ã€‚  - <code>DELETE</code>ï¼šåˆ é™¤æ•°æ®ã€‚</li>
<li>DCLï¼ˆæ•°æ®æ§åˆ¶è¯­è¨€ï¼‰ï¼šç®¡ç†æ•°æ®åº“å¯¹è±¡çš„è®¿é—®æƒé™ï¼Œ <code>GRANT</code>ï¼šæˆäºˆç”¨æˆ·è®¿é—®æƒé™ã€<code>REVOKE</code>ï¼šå›æ”¶ç”¨æˆ·è®¿é—®æƒé™ ç­‰ã€‚</li>
<li>TCLï¼ˆäº‹åŠ¡æ§åˆ¶è¯­è¨€ï¼‰ï¼šç”¨äºç®¡ç†æ•°æ®åº“çš„äº‹åŠ¡ï¼Œå¸¸ç”¨çš„å‘½ä»¤åŒ…æ‹¬ <code>COMMIT</code>ï¼šæäº¤äº‹åŠ¡ã€ <code>ROLLBACK</code>ï¼šå›æ»šäº‹åŠ¡ã€ <code>SAVEPOINT</code>ï¼šè®¾ç½®ä¿å­˜ç‚¹ï¼Œç”¨äºéƒ¨åˆ†å›æ»šã€‚</li>
</ol>
</li>
<li><p>MySQL æ•°æ®ç±»å‹</p>
<ol>
<li>æ•°å€¼ç±»å‹ï¼š<ul>
<li>æ•´æ•°ç±»å‹ï¼š<code>INT</code>ï¼ˆæ•´æ•°ï¼Œ4å­—èŠ‚ï¼‰  <code>TINYINT</code>ï¼ˆå°æ•´æ•°ï¼Œ1å­—èŠ‚ï¼‰ <code>SMALLINT</code>ï¼ˆå°æ•´æ•°ï¼Œ2å­—èŠ‚ï¼‰  <code>MEDIUMINT</code>ï¼ˆä¸­ç­‰æ•´æ•°ï¼Œ3å­—èŠ‚ï¼‰    <code>BIGINT</code>ï¼ˆå¤§æ•´æ•°ï¼Œ8å­—èŠ‚ï¼‰</li>
<li>æµ®ç‚¹æ•°ç±»å‹ï¼š<code>FLOAT</code>ï¼ˆå•ç²¾åº¦æµ®ç‚¹æ•°ï¼‰  <code>DOUBLE</code>ï¼ˆåŒç²¾åº¦æµ®ç‚¹æ•°ï¼‰</li>
<li>å®šç‚¹æ•°ç±»å‹ï¼š<code>DECIMAL</code>ï¼ˆå®šç‚¹æ•°ï¼‰</li>
</ul>
</li>
<li>æ—¥æœŸå’Œæ—¶é—´ç±»å‹ï¼š<code>DATE</code>ï¼ˆæ—¥æœŸï¼‰ï¼›<code>TIME</code>ï¼ˆæ—¶é—´ï¼‰<code>DATETIME</code>ï¼ˆæ—¥æœŸå’Œæ—¶é—´ï¼ŒåŒ…æ‹¬ç§’ï¼‰ <code>TIMESTAMP</code>ï¼ˆæ—¥æœŸå’Œæ—¶é—´ï¼ŒåŒ…æ‹¬ç§’ï¼Œé€šå¸¸ç”¨äºè®°å½•æ•°æ®çš„ä¿®æ”¹æ—¶é—´ï¼‰</li>
<li>å­—ç¬¦ä¸²ç±»å‹ï¼š<code>CHAR</code>ï¼ˆå®šé•¿å­—ç¬¦ä¸²ï¼‰ï¼› <code>VARCHAR</code>ï¼ˆå˜é•¿å­—ç¬¦ä¸²ï¼‰ï¼›<code>TEXT</code>ï¼ˆè¾ƒå°çš„æ–‡æœ¬ï¼‰ <code>MEDIUMTEXT</code>ï¼ˆä¸­ç­‰å¤§å°çš„æ–‡æœ¬ï¼‰  <code>LONGTEXT</code>ï¼ˆè¾ƒå¤§çš„æ–‡æœ¬ï¼‰<ul>
<li>CHAR å’Œ VAVARCHAR çš„åŒºåˆ«ï¼Ÿ<br> 1ã€CHAR å’Œ VAVARCHAR ç±»å‹åœ¨å­˜å‚¨å’Œæ£€ç´¢æ–¹é¢æœ‰æ‰€ä¸åŒ<br> 2ã€CHAR åˆ—é•¿åº¦å›ºå®šä¸ºåˆ›å»ºè¡¨æ—¶å£°æ˜çš„é•¿åº¦ï¼Œé•¿åº¦å€¼èŒƒå›´æ˜¯ 1 åˆ° 255 å½“ CHARå€¼è¢«å­˜å‚¨æ—¶ï¼Œå®ƒä»¬è¢«ç”¨ç©ºæ ¼å¡«å……åˆ°ç‰¹å®šé•¿åº¦ï¼Œæ£€ç´¢ CHAR å€¼æ—¶éœ€åˆ é™¤å°¾éšç©ºæ ¼ã€‚</li>
</ul>
</li>
<li>äºŒè¿›åˆ¶ç±»å‹ï¼š  <code>BINARY</code>ï¼ˆå®šé•¿äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼‰   <code>VARBINARY</code>ï¼ˆå˜é•¿äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼‰ <code>BLOB</code>ï¼ˆè¾ƒå°çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰  <code>MEDIUMBLOB</code>ï¼ˆä¸­ç­‰å¤§å°çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰ <code>LONGBLOB</code>ï¼ˆè¾ƒå¤§çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰<ul>
<li>BLOB å’Œ TEXT çš„åŒºåˆ«ã€‚<ol>
<li>å­˜å‚¨å†…å®¹ï¼š <code>BLOB</code> å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œä¸è¿›è¡Œå­—ç¬¦é›†çš„è½¬æ¢ã€‚  <code>TEXT</code> å­˜å‚¨å­—ç¬¦æ•°æ®ï¼Œä¼šæ ¹æ®å­—ç¬¦é›†è¿›è¡Œç›¸åº”è½¬æ¢</li>
<li>å¤§å°é™åˆ¶ï¼š <code>BLOB</code> å¯ä»¥å­˜å‚¨æ›´å¤§çš„äºŒè¿›åˆ¶æ•°æ®ã€‚  <code>TEXT</code> å¯ä»¥å­˜å‚¨æ›´å¤§çš„å­—ç¬¦æ•°æ®ã€‚</li>
<li>æ’åºå’Œæ¯”è¾ƒï¼š <code>BLOB</code> è¿›è¡ŒäºŒè¿›åˆ¶æ’åºå’Œæ¯”è¾ƒã€‚  <code>TEXT</code> è¿›è¡Œå­—ç¬¦é›†æ’åºå’Œæ¯”è¾ƒã€‚</li>
<li>ç”¨é€”ï¼š  <code>BLOB</code> é€‚ç”¨å­˜å‚¨å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<code>TEXT</code> é€‚ç”¨å­˜å‚¨æ–‡æœ¬æ–‡æ¡£ã€HTMLã€XML ç­‰å­—ç¬¦æ•°æ®ã€‚</li>
</ol>
</li>
</ul>
</li>
<li>å…¶ä»–ç±»å‹ï¼š <code>ENUM</code>ï¼ˆæšä¸¾ç±»å‹ï¼‰ <code>SET</code>ï¼ˆé›†åˆç±»å‹ï¼‰</li>
</ol>
</li>
<li><p>MySQL é‡Œè®°å½•è´§å¸ç”¨ä»€ä¹ˆå­—æ®µç±»å‹å¥½ï¼Ÿ</p>
<ul>
<li>åœ¨è®°å½•è´§å¸é‡‘é¢æ—¶ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨ DECIMAL ç±»å‹ã€‚DECIMAL ç±»å‹æ˜¯ä¸€ç§ç²¾ç¡®çš„å®šç‚¹æ•°ç±»å‹ï¼Œæä¾›äº†æ›´å¯é çš„ç²¾ç¡®åº¦ï¼Œç¡®ä¿ä¸ä¼šå‘ç”Ÿèˆå…¥è¯¯å·®,é€‚åˆç”¨äºå­˜å‚¨è´§å¸ç­‰éœ€è¦ç²¾ç¡®è®¡ç®—çš„æ•°å€¼ã€‚</li>
<li>é¿å…ä½¿ç”¨æµ®ç‚¹æ•°ç±»å‹ï¼ˆå¦‚ FLOAT æˆ– DOUBLEï¼‰æ¥è¡¨ç¤ºè´§å¸é‡‘é¢ï¼Œå› ä¸ºæµ®ç‚¹æ•°åœ¨è®¡ç®—ä¸­å¯èƒ½å­˜åœ¨ç²¾åº¦é—®é¢˜ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 9(precision)ä»£è¡¨å°†è¢«ç”¨äºå­˜å‚¨å€¼çš„æ€»çš„å°æ•°ä½æ•°ï¼Œè€Œ 2(scale)ä»£è¡¨å°†è¢«ç”¨äºå­˜å‚¨å°æ•°ç‚¹åçš„ä½æ•°ã€‚ </span></span><br><span class="line"><span class="comment">-- salary åˆ—ä¸­çš„å€¼çš„èŒƒå›´æ˜¯ä»-9999999.99 åˆ°9999999.99ã€‚</span></span><br><span class="line">salary <span class="type">DECIMAL</span>(<span class="number">9</span>,<span class="number">2</span>)  </span><br></pre></td></tr></table></figure></li>
<li><strong>ä¸ºè¡¨ä¸­å¾—å­—æ®µé€‰æ‹©åˆé€‚å¾—æ•°æ®ç±»å‹</strong>ï¼š<br>  å­—æ®µç±»å‹ä¼˜å…ˆçº§: æ•´å½¢&gt;date,time&gt;enum,char&gt;varchar&gt;blob,text<br>  ä¼˜å…ˆè€ƒè™‘æ•°å­—ç±»å‹ï¼Œå…¶æ¬¡æ˜¯æ—¥æœŸæˆ–è€…äºŒè¿›åˆ¶ç±»å‹ï¼Œæœ€åæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼ŒåŒçº§åˆ«çš„æ•°æ®ç±»å‹ï¼Œåº”è¯¥ä¼˜å…ˆé€‰æ‹©å ç”¨ç©ºé—´å°çš„</li>
</ul>
</li>
<li><p>MySQL ä¸­ <code>IN</code>ã€<code>EXISTS</code> å’Œ <code>LIKE</code> çš„ä½œç”¨å’Œç”¨æ³•ï¼Œå¦‚ä½•ä¼˜åŒ– <code>DISTINCT</code>ï¼Ÿ</p>
<ul>
<li><strong>IN</strong>ï¼šç”¨äºåœ¨ <code>WHERE</code> å­å¥ä¸­ç­›é€‰å‡ºç¬¦åˆæŒ‡å®šå€¼åˆ—è¡¨ä¸­ä»»ä¸€å€¼çš„æ•°æ®è¡Œã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å‡º `id` å­—æ®µå€¼ä¸º 1ã€2 æˆ– 3 çš„ç”¨æˆ·æ•°æ®è¡Œ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure></li>
<li><strong>EXISTS</strong>ï¼šç”¨äºæ£€æŸ¥å­æŸ¥è¯¢æ˜¯å¦è¿”å›ä»»ä½•è¡Œï¼Œå¦‚æœå­æŸ¥è¯¢è¿”å›è‡³å°‘ä¸€è¡Œæ•°æ®ï¼Œåˆ™ <code>EXISTS</code> è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ä¸Šè¿°ç¤ºä¾‹ä¼šæŸ¥è¯¢å‡ºè‡³å°‘æœ‰ä¸€ç¬”è®¢å•å…³è”çš„äº§å“æ•°æ®è¡Œ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products p <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> orders o <span class="keyword">WHERE</span> o.product_id <span class="operator">=</span> p.id);</span><br></pre></td></tr></table></figure></li>
<li><strong>LIKE</strong>ï¼šç”¨äºåœ¨ <code>WHERE</code> å­å¥ä¸­è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼Œé€šå¸¸é…åˆé€šé…ç¬¦ä½¿ç”¨åŒ…æ‹¬ <code>%</code>ï¼ˆåŒ¹é…ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ï¼‰å’Œ <code>_</code>ï¼ˆåŒ¹é…å•ä¸ªå­—ç¬¦ï¼‰  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ä¸Šè¿°ç¤ºä¾‹ä¼šæŸ¥è¯¢å‡ºåç§°ä»¥ &quot;apple&quot; å¼€å¤´çš„äº§å“æ•°æ®è¡Œ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;apple%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li>DISTINCT åœ¨æ‰€æœ‰åˆ—ä¸Šè½¬æ¢ä¸º GROUP BYï¼Œå¹¶ä¸ ORDER BY å­å¥ç»“åˆä½¿ç”¨ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> t1.a <span class="keyword">FROM</span> t1,t2 <span class="keyword">where</span> t1.a<span class="operator">=</span>t2.a;</span><br><span class="line"><span class="comment">-- è½¬æ¢ä¸ºç­‰æ•ˆçš„ GROUP BY æŸ¥è¯¢ï¼š</span></span><br><span class="line"><span class="keyword">SELECT</span> t1.a <span class="keyword">FROM</span> t1, t2 <span class="keyword">WHERE</span> t1.a <span class="operator">=</span> t2.a <span class="keyword">GROUP</span> <span class="keyword">BY</span> t1.a;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>ä»€ä¹ˆæ˜¯é€šç”¨ SQL å‡½æ•°ï¼Ÿ<br>1ã€CONCATAT(A, B) â€“ è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²å€¼ä»¥åˆ›å»ºå•ä¸ªå­—ç¬¦ä¸²è¾“å‡ºã€‚é€šå¸¸ç”¨äºå°†ä¸¤ä¸ªæˆ–å¤šä¸ªå­—æ®µåˆå¹¶ä¸ºä¸€ä¸ªå­—æ®µã€‚<br>2ã€FORMATAT(X, D)- æ ¼å¼åŒ–æ•°å­— X åˆ° D æœ‰æ•ˆæ•°å­—ã€‚<br>3ã€CURRDATATE(), CURRTIME()- è¿”å›å½“å‰æ—¥æœŸæˆ–æ—¶é—´ã€‚<br>4ã€NOWï¼ˆï¼‰ â€“ å°†å½“å‰æ—¥æœŸå’Œæ—¶é—´ä½œä¸ºä¸€ä¸ªå€¼è¿”å›ã€‚<br>5ã€MONTHï¼ˆï¼‰ï¼ŒDAYAYï¼ˆï¼‰ï¼ŒYEARï¼ˆï¼‰ï¼ŒWEEKï¼ˆï¼‰ï¼ŒWEEKDAYAYï¼ˆï¼‰ â€“ ä»æ—¥æœŸå€¼ä¸­æå–ç»™å®šæ•°æ®ã€‚<br>6ã€HOURï¼ˆï¼‰ï¼ŒMINUTEï¼ˆï¼‰ï¼ŒSECONDï¼ˆï¼‰ â€“ ä»æ—¶é—´å€¼ä¸­æå–ç»™å®šæ•°æ®ã€‚<br>7ã€DATATEDIFFï¼ˆAï¼ŒBï¼‰ â€“ ç¡®å®šä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å¼‚ï¼Œé€šå¸¸ç”¨äºè®¡ç®—å¹´é¾„<br>8ã€SUBTIMESï¼ˆAï¼ŒBï¼‰ â€“ ç¡®å®šä¸¤æ¬¡ä¹‹é—´çš„å·®å¼‚ã€‚<br>9ã€FROMDAYAYSï¼ˆINTï¼‰ â€“ å°†æ•´æ•°å¤©æ•°è½¬æ¢ä¸ºæ—¥æœŸå€¼</p>
</li>
<li><p><strong>ä¸€æ¡ sql çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</strong></p>
<ol>
<li>è¿æ¥å±‚ï¼šå®¢æˆ·ç«¯æ˜¯å¦ä¸mysqlè¿æ¥ã€‚</li>
<li>serverå±‚ï¼šmysql8.0å‰ä¼šåœ¨ç¼“å­˜ä¸­æŸ¥è¯¢æ˜¯å¦æ‰§è¡Œè¿‡æ­¤sqlï¼Œå‘½ä¸­åˆ™ç›´æ¥è¿”å›ï¼›8.0åå–æ¶ˆäº†è¿™ä¸ªæœºåˆ¶ã€‚</li>
<li>è¯­æ³•è§£æå™¨ï¼šå¯¹æ¥æ”¶åˆ°çš„ SQL è¯­å¥è¿›è¡Œè§£æï¼Œä»¥æ£€æŸ¥å…¶è¯­æ³•å’Œè¯­ä¹‰æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœ SQL è¯­å¥æœ‰è¯­æ³•é”™è¯¯æˆ–è¿åæ•°æ®åº“æ¨¡å¼çš„çº¦æŸï¼Œç³»ç»Ÿä¼šè¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚</li>
<li>ç¼–è¯‘ã€ä¼˜åŒ–SQL è¯­å¥ï¼šè§£æåï¼ŒDBMS å°† SQL è¯­å¥ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œçš„æŸ¥è¯¢è®¡åˆ’ explainã€‚è¿™ä¸ªè®¡åˆ’æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæè¿°äº†å¦‚ä½•ä»æ•°æ®åº“ä¸­è·å–æˆ–æ“ä½œæ•°æ®ã€‚åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒDBMS å¯èƒ½ä¼šå¯¹æŸ¥è¯¢è®¡åˆ’è¿›è¡Œä¼˜åŒ–ï¼Œä»¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚ä¼˜åŒ–è¿‡ç¨‹åŒ…æ‹¬é€‰æ‹©åˆé€‚çš„ç´¢å¼•ã€è°ƒæ•´è¿æ¥é¡ºåºç­‰ã€‚</li>
<li>æ‰§è¡Œå™¨ï¼šDBMS æ ¹æ®ä¼˜åŒ–åçš„æŸ¥è¯¢è®¡åˆ’æ‰§è¡Œ SQL è¯­å¥ï¼Œå»å­˜å‚¨å¼•æ“å±‚è¯»å–æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚è¿™åŒ…æ‹¬ä»ç£ç›˜è¯»å–æ•°æ®ï¼Œä½¿ç”¨ç´¢å¼•åŠ é€ŸæŸ¥è¯¢ï¼Œåº”ç”¨è¿‡æ»¤æ¡ä»¶ç­‰ã€‚<br>  æ‰§è¡Œå™¨æ‰§è¡Œå‰ï¼Œä¼šæ£€æŸ¥mysqlçš„innodbçš„buffer poolçš„ç¼“å­˜ï¼Œï¼Œæœªå‘½ä¸­è¦å…ˆæŸ¥dbã€‚selectç›´æ¥æŸ¥è¯¢buffer poolï¼Œdmlï¼ˆå¢åˆ æ”¹ï¼‰è¿˜è¦è®¾è®¡æ—¥å¿—ï¼Œï¼Œï¼Œ</li>
<li>å­˜å‚¨å¼•æ“ï¼šå¦‚ innodbã€myisamã€memoryéƒ½ä¼šå‘ä¸Šå±‚æä¾›æŸ¥è¯¢æ¥å£ã€‚</li>
<li><strong>è¿”å›ç»“æœï¼š</strong> æ‰§è¡Œå®Œæˆåï¼ŒDBMS å°†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚ç»“æœå¯èƒ½æ˜¯æŸ¥è¯¢çš„ç»“æœé›†ã€æ‰§è¡ŒæˆåŠŸçš„æ¶ˆæ¯ï¼Œæˆ–è€…åœ¨å‡ºç°é”™è¯¯æ—¶çš„é”™è¯¯ä¿¡æ¯ã€‚</li>
</ol>
</li>
<li><p>Mysqlå¼•æ“ å¦‚ä½•æŠŠç¡¬ç›˜ä¸Šçš„æ•°æ®æŸ¥åˆ°ï¼Ÿ</p>
<ol>
<li><strong>è§£æ SQL è¯­å¥ï¼š</strong> MySQL é¦–å…ˆè§£ææŸ¥è¯¢è¯­å¥ï¼Œæ£€æŸ¥è¯­æ³•å’Œè¯­ä¹‰ï¼Œç¡®ä¿æŸ¥è¯¢æ˜¯åˆæ³•çš„ã€‚</li>
<li><strong>æŸ¥è¯¢ä¼˜åŒ–ï¼š</strong> MySQL ä¼šå¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œç”Ÿæˆä¸€ä¸ªæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ã€‚</li>
<li><strong>æ‰§è¡ŒæŸ¥è¯¢è®¡åˆ’ï¼š</strong> MySQL æ•°æ®åº“å¼•æ“æŒ‰ç…§ä¼˜åŒ–åçš„æ‰§è¡Œè®¡åˆ’æ‰§è¡ŒæŸ¥è¯¢ã€‚è¿™æ¶‰åŠä»ç¡¬ç›˜è¯»å–æ•°æ®ã€‚</li>
<li><strong>ä½¿ç”¨ç´¢å¼•ï¼š</strong> å¦‚æœæŸ¥è¯¢ä¸­ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¹¶ä¸”ä¼˜åŒ–å™¨è®¤ä¸ºä½¿ç”¨ç´¢å¼•æ›´æœ‰æ•ˆï¼ŒMySQL å°†ä½¿ç”¨ç´¢å¼•æ¥å¿«é€Ÿå®šä½å’Œæ£€ç´¢æ•°æ®ã€‚ç´¢å¼•é€šå¸¸å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œä½†åœ¨éœ€è¦æ—¶ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚<br>  <strong>ç´¢å¼•çš„ä½¿ç”¨å‘ç”Ÿåœ¨ç£ç›˜ I&#x2F;O æ“ä½œä¹‹å‰ã€‚</strong></li>
<li><strong>è¯»å–æ•°æ®å—ï¼š</strong> å¦‚æœæ•°æ®æ²¡æœ‰åœ¨å†…å­˜ä¸­ï¼ŒMySQL æ•°æ®åº“å¼•æ“å°†ä»ç£ç›˜è¯»å–æ•°æ®å—ï¼ˆé€šå¸¸æ˜¯é¡µï¼‰åˆ°å†…å­˜ä¸­ã€‚<br>  MySQLå°†æ•°æ®ä»¥é¡µ(Page)ä¸ºå•ä½ç»„ç»‡åœ¨ç£ç›˜ä¸Šã€‚ä¸€é¡µé€šå¸¸åŒ…å«å¤šæ¡è®°å½•ï¼Œæ¯é¡µçš„å¤§å°æ˜¯å›ºå®šçš„ã€‚MySQLä»ç£ç›˜ä¸Šè¯»å–æ•´ä¸ªé¡µï¼Œè€Œä¸ä»…ä»…æ˜¯æ‰€éœ€çš„å•ä¸ªè®°å½•ã€‚è¯»ç£ç›˜æ˜¯ä¸€æ¬¡ I&#x2F;0 æ“ä½œï¼ŒMySQL ä½¿ç”¨ä¸€ç§ç§°ä¸ºé¢„è¯»çš„æŠ€æœ¯ï¼Œä¸€æ¬¡æ€§è¯»å–å¤šä¸ªç›¸é‚»çš„æ•°æ®å—ï¼Œä»¥æé«˜æ€§èƒ½ã€‚<br>  é¦–å…ˆï¼ŒMySQL å‘é€è¯»å–è¯·æ±‚åˆ°å­˜å‚¨è®¾å¤‡ï¼ˆç¡¬ç›˜ï¼‰ï¼ŒåŒ…æ‹¬è¦è¯»å–çš„æ•°æ®å—çš„ä½ç½®ä¿¡æ¯ï¼ˆä¾‹å¦‚ç£ç›˜ä¸Šçš„æ‰‡åŒºæˆ–é¡µï¼‰ä»¥åŠè¯»å–çš„æ•°é‡ã€‚ç£ç›˜æ ¹æ®è¯·æ±‚ç§»åŠ¨ç£å¤´åˆ°æŒ‡å®šçš„ä½ç½®ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºç£ç›˜å¯»é“ï¼Œå¯»é“æ—¶é—´æ˜¯ç£ç›˜ I&#x2F;O ä¸­çš„ä¸»è¦æ—¶é—´æ¶ˆè€—éƒ¨åˆ†ã€‚ä¸€æ—¦ç£å¤´åˆ°è¾¾ç›®æ ‡è½¨é“ï¼Œç£ç›˜å¼€å§‹æ—‹è½¬ï¼Œä»¥ä¾¿å°†æ‰€éœ€çš„æ•°æ®å—è½¬åˆ°ç£å¤´ä¸‹æ–¹ï¼Œç£ç›˜å¼€å§‹ä¼ è¾“æ•°æ®åˆ°å†…å­˜ä¸­ã€‚ </li>
<li><strong>ç¼“å­˜ï¼š</strong> MySQL ä½¿ç”¨ç¼“å­˜æ¥å­˜å‚¨ç»å¸¸è®¿é—®çš„æ•°æ®å—ï¼Œè¿™æ ·åœ¨åç»­æŸ¥è¯¢ä¸­å¯ä»¥æ›´å¿«åœ°è®¿é—®è¿™äº›æ•°æ®ã€‚è¿™åŒ…æ‹¬æŸ¥è¯¢ç»“æœçš„ç¼“å­˜ã€ç´¢å¼•ç¼“å­˜å’Œæ•°æ®ç¼“å­˜ç­‰ã€‚ä½¿ç”¨ä¸€ä¸ªç§°ä¸ºInnoDB Buffer Poolçš„ç¼“å­˜æ± æ¥å­˜å‚¨æ•°æ®é¡µã€‚</li>
<li><strong>è¿”å›ç»“æœï¼š</strong> å½“æŸ¥è¯¢å®Œæˆæ—¶ï¼ŒMySQL å°†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</li>
</ol>
</li>
<li><p>æ•°æ®åº“å­˜å‚¨å¼•æ“</p>
<ul>
<li>æ•°æ®åº“å­˜å‚¨å¼•æ“æ˜¯æ•°æ®åº“åº•å±‚è½¯ä»¶ç»„ç»‡ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ä½¿ç”¨æ•°æ®å¼•æ“è¿›è¡Œåˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°å’Œåˆ é™¤æ•°æ®ã€‚ä¸åŒçš„å­˜å‚¨å¼•æ“æä¾›ä¸åŒçš„å­˜å‚¨æœºåˆ¶ã€ç´¢å¼•æŠ€å·§ã€é”å®šæ°´å¹³ç­‰åŠŸèƒ½ï¼Œä½¿ç”¨ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œè¿˜å¯ä»¥ è·å¾—ç‰¹å®šçš„åŠŸèƒ½ã€‚ç°åœ¨è®¸å¤šä¸åŒçš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿéƒ½æ”¯æŒå¤šç§ä¸åŒçš„æ•°æ®å¼•æ“ã€‚<br>  å­˜å‚¨å¼•æ“ä¸»è¦æœ‰ï¼š 1. MyIsam, 2. InnoDB, 3. Memory, 4. Archive, 5. Federated</li>
<li>InnoDBï¼šåº•å±‚å­˜å‚¨ç»“æ„ä¸ºB+æ ‘ï¼Œ Bæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¯¹åº”innodbçš„ä¸€ä¸ªpageï¼Œ pageå¤§å°æ˜¯å›ºå®šçš„ï¼Œä¸€èˆ¬è®¾ä¸º 16kã€‚å…¶ä¸­éå¶å­èŠ‚ç‚¹åªæœ‰é”®å€¼ï¼Œå¶å­èŠ‚ç‚¹åŒ…å«å®Œæˆæ•°æ®ã€ã€é€‚ç”¨åœºæ™¯ï¼š<br>  1ï¼‰ç»å¸¸æ›´æ–°çš„è¡¨ï¼Œé€‚åˆå¤„ç†å¤šé‡å¹¶å‘çš„æ›´æ–°è¯·æ±‚ã€‚<br>  2ï¼‰æ”¯æŒäº‹åŠ¡ã€‚<br>  3ï¼‰å¯ä»¥ä»ç¾éš¾ä¸­æ¢å¤ï¼ˆé€šè¿‡ bin-log æ—¥å¿—ç­‰ï¼‰ã€‚<br>  4ï¼‰å¤–é”®çº¦æŸã€‚åªæœ‰ä»–æ”¯æŒå¤–é”®ã€‚<br>  5ï¼‰æ”¯æŒè‡ªåŠ¨å¢åŠ åˆ—å±æ€§ auto_incrementã€‚</li>
<li>MyIASMï¼šæ˜¯ MySQLé»˜è®¤çš„å¼•æ“ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰æä¾›å¯¹æ•°æ®åº“äº‹åŠ¡çš„æ”¯æŒï¼Œä¹Ÿä¸æ”¯æŒè¡Œçº§é”å’Œå¤–é”®ï¼Œå› æ­¤å½“ NSERT(æ’å…¥)æˆ– UPDATATE(æ›´æ–°)æ•°æ®æ—¶å³å†™æ“ä½œéœ€è¦é”å®šæ•´ä¸ªè¡¨ï¼Œæ•ˆç‡ä¾¿ä¼šä½ä¸€äº›ã€‚<br>  ISAM æ‰§è¡Œè¯»å–æ“ä½œçš„é€Ÿåº¦å¾ˆå¿«ï¼Œè€Œä¸”ä¸å ç”¨å¤§é‡çš„å†…å­˜å’Œå­˜å‚¨èµ„æºã€‚åœ¨è®¾è®¡ä¹‹åˆå°±é¢„æƒ³æ•°æ®ç»„ç»‡æˆæœ‰å›ºå®šé•¿åº¦çš„è®°å½•ï¼ŒæŒ‰é¡ºåºå­˜å‚¨çš„ã€‚ â€”ISAM æ˜¯ä¸€ç§é™æ€ç´¢å¼•ç»“æ„ã€‚ç¼ºç‚¹æ˜¯å®ƒä¸ æ”¯æŒäº‹åŠ¡å¤„ç†ã€‚</li>
<li>Memery å°±æ˜¯å°†æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ•°æ®å¤„ç†é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å®‰å…¨æ€§ä¸â¾¼ã€‚</li>
</ul>
</li>
<li><p><strong>MyISAM å’Œ InnoDB</strong> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>ï¼ˆ1ï¼‰MyISAM åªæ”¯æŒè¡¨çº§åˆ«çš„é”ç²’åº¦ï¼ŒInnoDB æ”¯æŒè¡Œçº§åˆ«çš„é”ç²’åº¦ã€‚<br>ï¼ˆ2ï¼‰MyISAM ä¸æä¾›äº‹åŠ¡æ”¯æŒã€‚InnoDB æä¾›äº‹åŠ¡æ”¯æŒï¼Œå®ç°äº† SQL æ ‡å‡†å®šä¹‰äº†å››ä¸ªéš”ç¦»çº§åˆ«ã€‚<br>ï¼ˆ3ï¼‰MyISAM ä¸æ”¯æŒå¤–é”®ï¼Œè€Œ InnoDB æ”¯æŒã€‚<br>ï¼ˆ4ï¼‰MyISAM ä¸æ”¯æŒ MVCCï¼Œè€Œ InnoDB æ”¯æŒã€‚<br>ï¼ˆ5ï¼‰è™½ç„¶ MyISAM å¼•æ“å’Œ InnoDB å¼•æ“éƒ½æ˜¯ä½¿ç”¨ B+Tree ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œä½†æ˜¯ä¸¤è€…çš„å®ç°æ–¹å¼ä¸å¤ªä¸€æ ·ã€‚<br>ï¼ˆ6ï¼‰MyISAM ä¸æ”¯æŒæ•°æ®åº“å¼‚å¸¸å´©æºƒåçš„å®‰å…¨æ¢å¤ï¼Œè€Œ InnoDB æ”¯æŒã€‚<br>ï¼ˆ7ï¼‰InnoDB çš„æ€§èƒ½æ¯” MyISAM æ›´å¼ºå¤§ã€‚</p>
</li>
<li><p>ç´¢å¼•ã€ã€<br>åœ¨ MySQL ä¸­ï¼Œç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œç”¨äºåŠ å¿«æ•°æ®åº“è¡¨ä¸­æ•°æ®çš„æ£€ç´¢é€Ÿåº¦ã€‚ç´¢å¼•åœ¨æ•°æ®åº“è¡¨ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ä¸Šåˆ›å»ºï¼Œå¯ä»¥å°†è¿™äº›åˆ—çš„å€¼å¿«é€Ÿæ˜ å°„åˆ°å®é™…æ•°æ®çš„ç‰©ç†ä½ç½®ã€‚<br>ç´¢å¼•ï¼ˆIndexï¼‰æ˜¯å¸®åŠ© MySQL é«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ã€‚ å¸¸è§çš„æŸ¥è¯¢ç®—æ³•,é¡ºåºæŸ¥æ‰¾,äºŒåˆ†æŸ¥æ‰¾,äºŒå‰æ’åºæ ‘æŸ¥æ‰¾,å“ˆå¸Œæ•£åˆ—æ³•,åˆ†å—æŸ¥æ‰¾,å¹³è¡¡å¤šè·¯æœç´¢æ ‘ B æ ‘ï¼ˆB-treeï¼‰ ï¼Œç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ç»“æ„ï¼Œå»ºç«‹ç´¢å¼•æœ‰åŠ©äºå¿«é€Ÿè·å–ä¿¡æ¯ã€‚<br>ä½ ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šç´¢å¼•å°±æ˜¯åŠ å¿«æ£€ç´¢è¡¨ä¸­æ•°æ®çš„æ–¹æ³•ã€‚æ•°æ®åº“çš„ç´¢å¼•ç±»ä¼¼äºä¹¦ç±çš„ç´¢å¼•ã€‚åœ¨ä¹¦ç±ä¸­ï¼Œç´¢å¼•å…è®¸ç”¨æˆ·ä¸å¿…ç¿»é˜…å®Œæ•´ä¸ªä¹¦å°±èƒ½è¿…é€Ÿåœ°æ‰¾åˆ°æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œç´¢å¼•ä¹Ÿå…è®¸æ•°æ®åº“ç¨‹åºè¿…é€Ÿåœ°æ‰¾åˆ°è¡¨ä¸­çš„æ•°æ®ï¼Œè€Œä¸å¿…æ‰«ææ•´ä¸ªæ•°æ®åº“ mysqlã€‚<br>ç´¢å¼•å¹¶éæ˜¯è¶Šå¤šè¶Šå¥½ï¼Œåˆ›å»ºç´¢å¼•ä¹Ÿéœ€è¦è€—è´¹èµ„æºï¼Œä¸€æ˜¯å¢åŠ äº†æ•°æ®åº“çš„å­˜å‚¨ç©ºé—´ï¼ŒäºŒæ˜¯åœ¨æ’å…¥å’Œåˆ é™¤æ—¶è¦èŠ±è´¹è¾ƒå¤šçš„æ—¶é—´ç»´æŠ¤ç´¢å¼•<br>ç´¢å¼•åŠ å¿«æ•°æ®åº“çš„æ£€ç´¢é€Ÿåº¦<br>ç´¢å¼•é™ä½äº†æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ç­‰ç»´æŠ¤ä»»åŠ¡çš„é€Ÿåº¦<br>å”¯ä¸€ç´¢å¼•å¯ä»¥ç¡®ä¿æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§<br>é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ä½¿ç”¨ä¼˜åŒ–éšè—å™¨ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½<br>ç´¢å¼•éœ€è¦å ç‰©ç†å’Œæ•°æ®ç©ºé—´</p>
</li>
<li><p>ç´¢å¼•æœ‰å“ªäº›ç§ç±»ã€‚</p>
<ul>
<li>ä»æ•°æ®ç»“æ„ç»´åº¦è¿›â¾åˆ†ç±»:<br>  B+æ ‘ç´¢å¼•:æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å¶â¼¦èŠ‚ç‚¹ï¼Œå¤æ‚åº¦ä¸ºO(logn)ï¼Œé€‚åˆèŒƒå›´æŸ¥è¯¢ã€‚<br>  å“ˆå¸Œç´¢å¼•:é€‚åˆç­‰å€¼æŸ¥è¯¢ï¼Œæ£€ç´¢æ•ˆç‡â¾¼ï¼Œâ¼€æ¬¡åˆ°ä½<br>  å…¨â½‚ç´¢å¼•: MyISAM å’Œ InnoDB ä¸­éƒ½â½€æŒä½¿â½¤å…¨â½‚ç´¢å¼•ï¼Œâ¼€èˆ¬åœ¨â½‚æœ¬ç±»å‹charï¼Œtextï¼Œvarchar ç±»å‹ä¸Šåˆ›å»º<br>  R-Tree ç´¢å¼•:â½¤æ¥å¯¹ GIS æ•°æ®ç±»å‹åˆ›å»º SPATIAL ç´¢å¼•</li>
<li>ä»ç‰©ç†å­˜å‚¨ç»´åº¦è¿›â¾åˆ†ç±»:<br>  èšé›†ç´¢å¼•:æ•°æ®å­˜å‚¨ä¸ç´¢å¼•â¼€èµ·å­˜æ”¾ï¼Œå¶â¼¦èŠ‚ç‚¹ä¼šå­˜å‚¨â¼€æ•´â¾è®°å½•ï¼Œæ‰¾åˆ°ç´¢å¼•ä¹Ÿå°±æ‰¾åˆ°äº†æ•°æ®ã€‚<br>  â¾®èšé›†ç´¢å¼•:æ•°æ®å­˜å‚¨ä¸ç´¢å¼•åˆ†å¼€å­˜æ”¾ï¼Œå¶â¼¦èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œå­˜å‚¨çš„æ˜¯æ•°æ®â¾åœ°å€ã€‚</li>
<li>ä»é€»è¾‘ç»´åº¦è¿›â¾åˆ†ç±»:<br>  ä¸»é”®ç´¢å¼•:â¼€ç§ç‰¹æ®Šçš„å”¯â¼€ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ã€‚<br>  æ™®é€šç´¢å¼•:MySQLä¸­åŸºæœ¬ç´¢å¼•ç±»å‹ï¼Œå…è®¸ç©ºå€¼å’Œé‡å¤å€¼<br>  è”åˆç´¢å¼•:å¤šä¸ªå­—æ®µåˆ›å»ºçš„ç´¢å¼•ï¼Œä½¿â½¤æ—¶éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™<br>  å”¯â¼€ç´¢å¼•:ç´¢å¼•åˆ—ä¸­çš„å€¼å¿…é¡»æ˜¯å”¯â¼€çš„ï¼Œä½†æ˜¯å…è®¸ä¸ºç©ºå€¼<br>  ç©ºé—´ç´¢å¼•:MySQL5.7ä¹‹åâ½€æŒç©ºé—´ç´¢å¼•ï¼Œåœ¨ç©ºé—´ç´¢å¼•è¿™â½…â¾¯éµå¾ªOpenGISâ¼ä½•æ•°æ®æ¨¡</li>
</ul>
</li>
<li><p>ä¸»é”®ï¼Ÿèšé›†ç´¢å¼•ï¼Œéèšé›†ç´¢å¼•ï¼Ÿ</p>
<ul>
<li>ä¸»é”®ï¼šä¸»é”®æ˜¯ä¸€ç§ç”¨äºå”¯ä¸€æ ‡è¯†è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®çš„åˆ—æˆ–åˆ—ç»„åˆã€‚ä¸»é”®åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ä¸”ä¸ä¸ºç©ºï¼ˆNULLï¼‰ã€‚åœ¨InnoDBä¸­ï¼Œä¸»é”®ç´¢å¼•æ˜¯è¡¨çš„ç‰©ç†æ’åºé¡ºåºï¼Œå®ƒæ˜¯è¡¨çš„èšé›†ç´¢å¼•ã€‚å¦‚æœè¡¨æ²¡æœ‰æ˜¾å¼å®šä¹‰ä¸»é”®ï¼ŒInnoDBä¼šé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å”¯ä¸€éç©ºç´¢å¼•æ¥å……å½“ä¸»é”®ç´¢å¼•ã€‚</li>
<li>èšé›†ç´¢å¼•ï¼šåœ¨MySQLä¸­ï¼Œèšé›†ç´¢å¼•å†³å®šäº†æ•°æ®åœ¨ç£ç›˜ä¸Šçš„ç‰©ç†å­˜å‚¨é¡ºåºï¼Œå³æ•°æ®çš„å­˜å‚¨é¡ºåºä¸ç´¢å¼•é¡ºåºä¸€è‡´ã€‚åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸»é”®ç´¢å¼•å°±æ˜¯ä¸€ä¸ªèšé›†ç´¢å¼•ã€‚å¦‚æœè¡¨æ²¡æœ‰æ˜¾å¼å®šä¹‰ä¸»é”®ï¼Œåˆ™InnoDBä¼šé€‰æ‹©ä¸€ä¸ªå”¯ä¸€éç©ºçš„ç´¢å¼•æ¥å……å½“èšé›†ç´¢å¼•ã€‚</li>
<li>éèšé›†ç´¢å¼•ï¼šéèšé›†ç´¢å¼•åœ¨ç£ç›˜ä¸Šç»´æŠ¤ç´¢å¼•é”®å’Œå¯¹åº”æ•°æ®è¡Œçš„å¼•ç”¨ï¼Œç´¢å¼•é”®çš„é¡ºåºä¸å®é™…æ•°æ®è¡Œçš„ç‰©ç†å­˜å‚¨é¡ºåºæ— å…³ã€‚åœ¨MySQLä¸­ï¼Œé™¤äº†InnoDBå­˜å‚¨å¼•æ“çš„èšé›†ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰ï¼Œå…¶ä»–ç´¢å¼•éƒ½æ˜¯éèšé›†ç´¢å¼•ï¼Œä¾‹å¦‚æ™®é€šç´¢å¼•æˆ–å”¯ä¸€ç´¢å¼•ã€‚</li>
</ul>
</li>
<li><p>InnoDB å»ºè®®ä¸ºå¤§éƒ¨åˆ†è¡¨ä½¿ç”¨é»˜è®¤çš„è‡ªå¢ä¸»é”®çš„ä¸»è¦åŸå› </p>
<ol>
<li><strong>èšç°‡ç´¢å¼•ï¼š</strong> InnoDB è¡¨çš„ä¸»é”®æ˜¯èšç°‡ç´¢å¼•ï¼ˆClustered Indexï¼‰ï¼Œè¿™æ„å‘³ç€æ•°æ®è¡Œçš„ç‰©ç†é¡ºåºä¸èšç°‡ç´¢å¼•çš„é¡ºåºä¸€è‡´ã€‚ä½¿ç”¨è‡ªå¢ä¸»é”®ä½œä¸ºèšç°‡ç´¢å¼•å¯ä»¥ç¡®ä¿æ–°æ’å…¥çš„æ•°æ®æŒ‰é¡ºåºæ·»åŠ åˆ°è¡¨çš„æœ«å°¾ï¼Œå‡å°‘æ•°æ®é¡µçš„åˆ†è£‚å’Œç¢ç‰‡ï¼Œæé«˜æ•°æ®çš„é¡ºåºæ€§ã€‚</li>
<li><strong>æ’å…¥æ€§èƒ½ï¼š</strong> è‡ªå¢ä¸»é”®çš„é¡ºåºæ€§æœ‰åŠ©äºæé«˜æ’å…¥æ€§èƒ½ã€‚å› ä¸ºæ•°æ®è¡ŒæŒ‰ä¸»é”®çš„é¡ºåºæ’å…¥ï¼Œæ–°çš„æ•°æ®è¡Œå¾€å¾€ç›´æ¥æ·»åŠ åˆ°è¡¨æœ«å°¾ï¼Œè€Œä¸ä¼šå¯¼è‡´é¡µé¢çš„åˆ†è£‚å’Œæ•°æ®çš„é‡æ–°æ’åºã€‚</li>
<li><strong>æŸ¥è¯¢æ€§èƒ½ï¼š</strong> ä½¿ç”¨è‡ªå¢ä¸»é”®ä½œä¸ºèšç°‡ç´¢å¼•å¯ä»¥æé«˜èŒƒå›´æŸ¥è¯¢å’Œæ’åºæŸ¥è¯¢çš„æ€§èƒ½ï¼Œå› ä¸ºç›¸å…³æ•°æ®åœ¨ç‰©ç†ä¸Šæ˜¯ç›¸é‚»å­˜å‚¨çš„ã€‚</li>
<li><strong>å‡å°‘ç´¢å¼•å¤§å°ï¼š</strong> è‡ªå¢ä¸»é”®é€šå¸¸æ˜¯æ•´æ•°ï¼Œå ç”¨çš„ç©ºé—´ç›¸å¯¹è¾ƒå°ã€‚ç›¸æ¯”äºä½¿ç”¨å…¶ä»–ç±»å‹çš„ä¸»é”®ï¼Œè¿™å¯ä»¥å‡å°‘éèšç°‡ç´¢å¼•çš„å¤§å°ï¼Œæé«˜ç¼“å­˜çš„æ•ˆç‡ï¼Œå‡å°‘ç£ç›˜ I&#x2F;Oã€‚</li>
<li><strong>å‡å°‘ç¢ç‰‡ï¼š</strong> è‡ªå¢ä¸»é”®çš„æ’å…¥é¡ºåºæœ‰åŠ©äºå‡å°‘æ•°æ®é¡µçš„åˆ†è£‚å’Œç¢ç‰‡ï¼Œå‡å°äº†è¡¨çš„ç»´æŠ¤æˆæœ¬ã€‚</li>
</ol>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™éœ€è¦åˆ›å»ºç´¢å¼•ï¼Ÿ<br>è¡¨çš„ä¸»å…³é”®å­—ï¼šâ¾ƒåŠ¨å»ºâ½´å”¯â¼€ç´¢å¼•<br>ç›´æ¥æ¡ä»¶æŸ¥è¯¢çš„å­—æ®µï¼šç»å¸¸â½¤äºWHEREæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µï¼Œè¿™æ ·èƒ½å¤Ÿæâ¾¼æ•´ä¸ªè¡¨çš„æŸ¥è¯¢é€Ÿåº¦<br>æŸ¥è¯¢ä¸­ä¸å…¶å®ƒè¡¨å…³è”çš„å­—æ®µï¼šä¾‹å¦‚å­—æ®µå»ºâ½´äº†å¤–é”®å…³ç³»<br>æŸ¥è¯¢ä¸­æ’åºçš„å­—æ®µï¼šæ’åºçš„å­—æ®µå¦‚æœé€šè¿‡ç´¢å¼•å»è®¿é—®å°†â¼¤â¼¤æâ¾¼æ’åºé€Ÿåº¦<br>å”¯â¼€æ€§çº¦æŸåˆ—ï¼š å¦‚æœæŸåˆ—å…·æœ‰å”¯â¼€æ€§çº¦æŸï¼Œé‚£ä¹ˆä¸ºäº†ç¡®ä¿æ•°æ®çš„å”¯â¼€æ€§ï¼Œå¯ä»¥åœ¨è¿™äº›åˆ—ä¸Šåˆ›å»ºå”¯â¼€ç´¢å¼•ã€‚<br>â¼¤è¡¨ä¸­çš„å…³é”®åˆ—ï¼š åœ¨â¼¤è¡¨ä¸­ï¼Œå¦‚æœæŸ¥è¯¢çš„æ•ˆç‡å˜å¾—å¾ˆä½ï¼Œå¯ä»¥è€ƒè™‘åœ¨å…³é”®åˆ—ä¸Šåˆ›å»ºç´¢å¼•ã€‚</p>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Ÿ<br>â¼©è¡¨ï¼š å¯¹â¼©è¡¨åˆ›å»ºç´¢å¼•å¯èƒ½ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œå› ä¸ºåœ¨â¼©æ•°æ®é›†ä¸­æ‰«ææ•´ä¸ªè¡¨å¯èƒ½â½ä½¿â½¤ç´¢å¼•æ›´å¿«ã€‚<br>é¢‘ç¹çš„æ’â¼Šã€æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼š ç´¢å¼•çš„ç»´æŠ¤æˆæœ¬ä¼šéšç€æ•°æ®çš„æ’â¼Šã€æ›´æ–°å’Œåˆ é™¤æ“ä½œâ½½å¢åŠ ã€‚å¦‚æœè¡¨ç»å¸¸è¢«ä¿®æ”¹ï¼Œè¿‡å¤šçš„ç´¢å¼•å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚<br>æ•°æ®é‡å¤ä¸”åˆ†å¸ƒå¹³å‡çš„è¡¨å­—æ®µï¼šå‡å¦‚â¼€ä¸ªè¡¨æœ‰10ä¸‡â¾è®°å½•ï¼Œæ€§åˆ«åªæœ‰ç”·å’Œâ¼¥ä¸¤ç§å€¼ï¼Œä¸”æ¯ä¸ªå€¼çš„åˆ†å¸ƒæ¦‚ç‡â¼¤çº¦ä¸º50%ï¼Œé‚£ä¹ˆå¯¹è¿™ç§å­—æ®µå»ºç´¢å¼•â¼€èˆ¬ä¸ä¼šæâ¾¼æ•°æ®åº“çš„æŸ¥è¯¢é€Ÿåº¦ã€‚<br>å¾ˆå°‘è¢«æŸ¥è¯¢çš„åˆ—ï¼š å¦‚æœæŸåˆ—å¾ˆå°‘è¢«â½¤äºæŸ¥è¯¢æ¡ä»¶ï¼Œé‚£ä¹ˆä¸ºå®ƒåˆ›å»ºç´¢å¼•å¯èƒ½æ²¡æœ‰æ˜æ˜¾çš„æ€§èƒ½æå‡ã€‚<br>æŸ¥è¯¢ç»“æœæ€»â¾æ•°è¾ƒå°‘çš„è¡¨ï¼š å¦‚æœæŸ¥è¯¢çš„ç»“æœé›†æ€»â¾æ•°å¾ˆå°‘ï¼Œä½¿â½¤ç´¢å¼•å¯èƒ½ä¸ä¼šæœ‰å¤ªâ¼¤çš„æ€§èƒ½æå‡ã€‚</p>
</li>
<li><p>å¸¸è§ç´¢å¼•åŸåˆ™</p>
<ol>
<li>é€‰æ‹©å”¯ä¸€æ€§ç´¢å¼•ï¼Œå”¯ä¸€æ€§ç´¢å¼•çš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥æ›´å¿«é€Ÿçš„é€šè¿‡è¯¥ç´¢å¼•æ¥ç¡®å®šæŸæ¡è®°å½•ã€‚</li>
<li>ä¸ºç»å¸¸éœ€è¦æ’åºã€åˆ†ç»„å’Œè”åˆæ“ä½œçš„å­—æ®µå»ºç«‹ç´¢å¼•ã€‚</li>
<li>ä¸ºå¸¸ç”¨ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µå»ºç«‹ç´¢å¼•ã€‚</li>
<li>é™åˆ¶ç´¢å¼•çš„æ•°ç›®ï¼šè¶Šå¤šçš„ç´¢å¼•ï¼Œä¼šä½¿æ›´æ–°è¡¨å˜å¾—å¾ˆæµªè´¹æ—¶é—´ã€‚å°½é‡ä½¿ç”¨æ•°æ®é‡å°‘çš„ç´¢å¼•</li>
<li>å¦‚æœç´¢å¼•çš„å€¼å¾ˆé•¿ï¼Œé‚£ä¹ˆæŸ¥è¯¢çš„é€Ÿåº¦ä¼šå—åˆ°å½±å“ã€‚å°½é‡ä½¿ç”¨å‰ç¼€æ¥ç´¢å¼•</li>
<li>å¦‚æœç´¢å¼•å­—æ®µçš„å€¼å¾ˆé•¿ï¼Œæœ€å¥½ä½¿ç”¨å€¼çš„å‰ç¼€æ¥ç´¢å¼•ã€‚</li>
<li>åˆ é™¤ä¸å†ä½¿ç”¨æˆ–è€…å¾ˆå°‘ä½¿ç”¨çš„ç´¢å¼•</li>
<li>æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œéå¸¸é‡è¦çš„åŸåˆ™ã€‚</li>
<li>å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•åŒºåˆ†åº¦çš„å…¬å¼æ˜¯è¡¨ç¤ºå­—æ®µä¸é‡å¤çš„æ¯”ä¾‹</li>
<li>ç´¢å¼•åˆ—ä¸èƒ½å‚ä¸è®¡ç®—ï¼Œä¿æŒåˆ—â€œå¹²å‡€â€ï¼šå¸¦å‡½æ•°çš„æŸ¥è¯¢ä¸å‚ä¸ç´¢å¼•ã€‚</li>
<li>å°½é‡çš„æ‰©å±•ç´¢å¼•ï¼Œä¸è¦æ–°å»ºç´¢å¼•</li>
</ol>
</li>
<li><p>æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™</p>
<ul>
<li>åœ¨ä½¿ç”¨å¤åˆç´¢å¼•ï¼ˆcomposite indexï¼‰æ—¶ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨äº†ç´¢å¼•çš„ç¬¬ä¸€ä¸ªåˆ—ä½œä¸ºæ¡ä»¶ï¼Œé‚£ä¹ˆæ•°æ®åº“å¯ä»¥åˆ©ç”¨è¿™ä¸ªç´¢å¼•æ¥åŠ é€ŸæŸ¥è¯¢ï¼›ä½†å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­åªä½¿ç”¨äº†ç´¢å¼•çš„å‰å‡ ä¸ªåˆ—ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„ç¬¬ä¸€ä¸ªåˆ—ä½œä¸ºæ¡ä»¶ï¼Œé‚£ä¹ˆæ•°æ®åº“æ— æ³•åˆ©ç”¨è¿™ä¸ªç´¢å¼•æ¥åŠ é€ŸæŸ¥è¯¢ã€‚</li>
<li>å…·ä½“æ¥è¯´ï¼Œå‡è®¾æœ‰ä¸€ä¸ªå¤åˆç´¢å¼• <code>(col1, col2, col3)</code>ï¼Œè¿™ä¸ªç´¢å¼•æŒ‰ç…§ <code>col1</code>ã€<code>col2</code>ã€<code>col3</code> çš„é¡ºåºæ’åˆ—ã€‚æ ¹æ®æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œä»¥ä¸‹æƒ…å†µé€‚ç”¨ï¼š<br>  1.å½“æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«äº†ç´¢å¼•çš„ç¬¬ä¸€ä¸ªåˆ— <code>col1</code> æ—¶ï¼Œæ•°æ®åº“å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥åŠ é€ŸæŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼š  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> col1 <span class="operator">=</span> <span class="string">&#x27;value&#x27;</span>;</span><br></pre></td></tr></table></figure>
  2.å½“æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«äº†ç´¢å¼•çš„å‰å‡ ä¸ªåˆ— <code>col1</code>ã€<code>col2</code> æ—¶ï¼Œæ•°æ®åº“ä¹Ÿå¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥åŠ é€ŸæŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼š  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> col1 <span class="operator">=</span> <span class="string">&#x27;value1&#x27;</span> <span class="keyword">AND</span> col2 <span class="operator">=</span> <span class="string">&#x27;value2&#x27;</span>;</span><br></pre></td></tr></table></figure>
  3.å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«äº†ç´¢å¼•çš„æ‰€æœ‰åˆ— <code>col1</code>ã€<code>col2</code>ã€<code>col3</code> å¹¶ä¸”æŒ‰ç…§ç´¢å¼•çš„é¡ºåºå‡ºç°ï¼Œé‚£ä¹ˆå¯ä»¥è§¦å‘ç´¢å¼•ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> col1 <span class="operator">=</span> <span class="string">&#x27;value1&#x27;</span> <span class="keyword">AND</span> col2 <span class="operator">=</span> <span class="string">&#x27;value2&#x27;</span> <span class="keyword">AND</span> col3 <span class="operator">=</span> <span class="string">&#x27;value3&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li>ä½†æ˜¯ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­åªä½¿ç”¨äº†ç´¢å¼•çš„åå‡ ä¸ªåˆ—ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„ç¬¬ä¸€ä¸ªåˆ—ä½œä¸ºæ¡ä»¶ï¼Œåˆ™æ— æ³•åˆ©ç”¨è¿™ä¸ªç´¢å¼•åŠ é€ŸæŸ¥è¯¢ã€‚å¦‚ï¼š  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> col2 <span class="operator">=</span> <span class="string">&#x27;value2&#x27;</span> <span class="keyword">AND</span> col3 <span class="operator">=</span> <span class="string">&#x27;value3&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>è¦†ç›–ç´¢å¼•ï¼Ÿå›è¡¨æŸ¥è¯¢ï¼Ÿ</p>
<ul>
<li>è¦†ç›–ç´¢å¼•æ˜¯æŒ‡ä¸€ä¸ªæŸ¥è¯¢è¯­å¥æ‰€éœ€çš„æ•°æ®å¯ä»¥ä»ç´¢å¼•ä¸­ç›´æ¥è·å–ï¼Œè€Œæ— éœ€è®¿é—®è¡¨æ ¼ä¸­çš„å®é™…æ•°æ®è¡Œã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç´¢å¼•â€œè¦†ç›–â€äº†æŸ¥è¯¢çš„æ‰€æœ‰éœ€è¦çš„åˆ—ã€‚è¦†ç›–ç´¢å¼•çš„ä¼˜åŠ¿åœ¨äºå¯ä»¥å‡å°‘ç£ç›˜ I&#x2F;O å’Œå†…å­˜çš„æ¶ˆè€—ï¼Œå› ä¸ºä¸éœ€è¦é¢å¤–çš„è¡¨æ ¼è®¿é—®ã€‚</li>
<li>å›è¡¨æŸ¥è¯¢æŒ‡çš„æ˜¯åœ¨ä½¿ç”¨ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç´¢å¼•å®šä½åˆ°ä¸»é”®ï¼Œç„¶åå†æ ¹æ®ä¸»é”®çš„å€¼å»è¡¨ä¸­æ£€ç´¢æ•°æ®çš„è¿‡ç¨‹ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰æ— æ³•æ»¡è¶³æŸ¥è¯¢éœ€æ±‚æ—¶ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> products (</span><br><span class="line">    product_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    product_name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    price <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">    quantity <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- ä¸º product_name åˆ—åˆ›å»ºç´¢å¼• idx_product_name</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_product_name <span class="keyword">ON</span> products (product_name);</span><br><span class="line"><span class="comment">-- å‡è®¾æˆ‘ä»¬æœ‰ä¸€æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products (product_id, product_name, price, quantity) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Laptop&#x27;</span>, <span class="number">999.99</span>, <span class="number">50</span>);</span><br><span class="line"><span class="comment">-- ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æŸ¥è¯¢ï¼š</span></span><br><span class="line"><span class="keyword">SELECT</span> product_name, price <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> product_name <span class="operator">=</span> <span class="string">&#x27;Laptop&#x27;</span>;</span><br><span class="line"><span class="comment">-- ä»ç´¢å¼•ä¸­è·å–çš„åˆ— product_nameï¼Œä½† price åˆ—ä¸åœ¨æŸ¥è¯¢çš„åˆ—ä¸­ï¼ŒMySQL å°†æ‰§è¡Œå›è¡¨æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">-- MySQL é¦–å…ˆä½¿ç”¨ç´¢å¼• idx_product_name æ‰¾åˆ°åŒ¹é… Laptop çš„è¡Œï¼Œè·å–åˆ°å¯¹åº”çš„ product_id(ä¸»é”®)ï¼Œç„¶åæ ¹æ® product_id åˆ°è¡¨æ ¼ä¸­æ£€ç´¢å®Œæ•´çš„è¡Œæ•°æ®ä»¥è·å– price å€¼</span></span><br><span class="line"><span class="comment">-- è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›é¿å…å›è¡¨æŸ¥è¯¢ï¼Œå¯ä»¥è€ƒè™‘åˆ›å»ºä¸€ä¸ªè¦†ç›–ç´¢å¼•ï¼Œå°†æŸ¥è¯¢è¯­å¥ä¸­éœ€è¦çš„æ‰€æœ‰åˆ—éƒ½åŒ…å«åœ¨ç´¢å¼•ä¸­ï¼Œä¾¿æ— éœ€æ‰§è¡Œé¢å¤–çš„å›è¡¨æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_product_name_covering <span class="keyword">ON</span> products (product_name, price);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>B+ Tree(InnoDB)ç´¢å¼•</strong></p>
<ul>
<li>æ•°æ®åˆ†å—å­˜å‚¨ï¼Œæ¯ä¸€å—ç§°ä¸ºä¸€é¡µã€‚æ‰€æœ‰çš„å€¼éƒ½æ˜¯æŒ‰é¡ºåºå­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªå¶å­åˆ°æ ¹çš„è·ç¦»ç›¸åŒã€‚</li>
<li>éå¶èŠ‚ç‚¹å­˜å‚¨æ•°æ®çš„è¾¹ç•Œï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨æŒ‡å‘æ•°æ®è¡Œçš„æŒ‡é’ˆã€‚é€šè¿‡è¾¹ç•Œç¼©å°æ•°æ®çš„èŒƒå›´ï¼Œä»è€Œé¿å…å…¨è¡¨æ‰«æï¼ŒåŠ å¿«äº†æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚</li>
<li>B+ æ ‘ç´¢å¼•æ˜¯ä¸€ç§ç´¢å¼•ç»“æ„ï¼Œé€šå¸¸ç”¨äºæ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ä½œä¸ºæ•°æ®çš„ç´¢å¼•æ–¹å¼ã€‚å®ƒå¯ä»¥ç”¨ä½œèšé›†ç´¢å¼•æˆ–éèšé›†ç´¢å¼•ï¼Œå¹¶ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„ä¸»é”®ç´¢å¼•ã€‚åœ¨æ•°æ®åº“ä¸­ï¼ŒB+æ ‘ç´¢å¼•åœ¨ä¸åŒå­˜å‚¨å¼•æ“ä¸‹ï¼Œä¾‹å¦‚åœ¨InnoDBä¸­ä½œä¸ºä¸»é”®ç´¢å¼•ï¼ˆèšé›†ç´¢å¼•ï¼‰ä½¿ç”¨ï¼Œæˆ–ä½œä¸ºå…¶ä»–ç´¢å¼•ï¼ˆéèšé›†ç´¢å¼•ï¼‰çš„å®ç°ã€‚  <img src="https://leo710aka.github.io/bk/job5.png" width="550" height="300" alt=""></li>
</ul>
</li>
<li><p>Bæ ‘ ä¸ B+æ ‘ çš„åŒºåˆ«</p>
<ul>
<li>Bæ ‘ï¼šèŠ‚ç‚¹ä»å°åˆ°å¤§æ’åºï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯å­˜å¤šä¸ªå…ƒç´ </li>
<li>B+æ ‘ï¼šæ‹¥æœ‰Bæ ‘çš„ç‰¹ç‚¹ï¼Œå¶å­ç»“ç‚¹é—´æœ‰æŒ‡é’ˆï¼Œå¶å­ç»“ç‚¹å­˜å‚¨äº†æ‰€æœ‰çš„å…ƒç´ </li>
<li>Bæ ‘å’ŒB+æ ‘ï¼Œä¸€èˆ¬éƒ½æ˜¯åº”ç”¨åœ¨æ–‡ä»¶ç³»ç»Ÿå’Œæ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œç”¨æ¥å‡å°‘ç£ç›˜IOå¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚<br>  ä»¥Mysqlä¸­çš„InnoDBä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬é€šè¿‡selectè¯­å¥å»æŸ¥è¯¢ä¸€æ¡æ•°æ®æ—¶ï¼ŒInnoDBéœ€è¦ä»ç£ç›˜ä¸Šå»è¯»å–æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæ¶‰åŠåˆ°ç£ç›˜IOä»¥åŠç£ç›˜çš„éšæœºIOï¼ˆå¦‚å›¾æ‰€ç¤ºï¼‰æˆ‘ä»¬çŸ¥é“ç£ç›˜IOçš„æ€§èƒ½æ˜¯ç‰¹åˆ«ä½çš„ï¼Œç‰¹åˆ«æ˜¯éšæœºç£ç›˜IOã€‚å› ä¸ºï¼Œç£ç›˜IOçš„å·¥ä½œåŸç†æ˜¯ï¼Œé¦–å…ˆç³»ç»Ÿä¼šæŠŠæ•°æ®é€»è¾‘åœ°å€ä¼ ç»™ç£ç›˜ï¼Œç£ç›˜æ§åˆ¶ç”µè·¯æŒ‰ç…§å¯»å€é€»è¾‘æŠŠé€»è¾‘åœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç¡®å®šè¦è¯»å–çš„æ•°æ®åœ¨å“ªä¸ªç£é“ï¼Œå“ªä¸ªæ‰‡åŒºã€‚ä¸ºäº†è¯»å–è¿™ä¸ªæ‰‡åŒºçš„æ•°æ®ï¼Œéœ€è¦æŠŠç£å¤´æ”¾åœ¨è¿™ä¸ªæ‰‡åŒºçš„ä¸Šé¢ï¼Œä¸ºäº†å®ç°è¿™ä¸€ä¸ªç‚¹ï¼Œç£ç›˜ä¼šä¸æ–­æ—‹è½¬ï¼ŒæŠŠç›®æ ‡æ‰‡åŒºæ—‹è½¬åˆ°ç£å¤´ä¸‹é¢ï¼Œä½¿å¾—ç£å¤´æ‰¾åˆ°å¯¹åº”çš„ç£é“ï¼Œè¿™é‡Œæ¶‰åŠåˆ°å¯»é“äº‹ä»¶ä»¥åŠæ—‹è½¬æ—¶é—´<br>  å¾ˆæ˜æ˜¾ï¼Œç£ç›˜IOè¿™ä¸ªè¿‡ç¨‹çš„æ€§èƒ½å¼€é”€æ˜¯éå¸¸å¤§çš„ï¼Œç‰¹åˆ«æ˜¯æŸ¥è¯¢çš„æ•°æ®é‡æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ã€‚æ‰€ä»¥åœ¨InnoDBä¸­ï¼Œå¹²è„†å¯¹å­˜å‚¨åœ¨ç£ç›˜å—ä¸Šçš„æ•°æ®å»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼Œç„¶åæŠŠç´¢å¼•æ•°æ®ä»¥åŠç´¢å¼•åˆ—å¯¹åº”çš„ç£ç›˜åœ°å€ï¼Œä»¥B+æ ‘çš„æ–¹å¼æ¥å­˜å‚¨ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬éœ€è¦æŸ¥è¯¢ç›®æ ‡æ•°æ®çš„æ—¶å€™ï¼Œæ ¹æ®ç´¢å¼•ä»B+æ ‘ä¸­æŸ¥æ‰¾ç›®æ ‡æ•°æ®å³å¯ï¼Œç”±äºB+æ ‘åˆ†è·¯è¾ƒå¤šï¼Œæ‰€ä»¥åªéœ€è¦è¾ƒå°‘æ¬¡æ•°çš„ç£ç›˜IOå°±èƒ½æŸ¥æ‰¾åˆ°ã€‚</li>
</ul>
</li>
<li><p>ä¸ºä»€ä¹ˆ MySQL çš„ç´¢å¼•è¦ä½¿ç”¨ B+ æ ‘è€Œä¸æ˜¯å…¶å®ƒæ ‘å½¢ç»“æ„ï¼Ÿ</p>
<ul>
<li>B æ ‘æ˜¯ä¸€ç§å¤šè·¯å¹³è¡¡æ ‘ï¼Œç”¨è¿™ç§å­˜å‚¨ç»“æ„æ¥å­˜å‚¨å¤§é‡æ•°æ®ï¼Œå®ƒçš„æ•´ä¸ªé«˜åº¦ä¼šç›¸æ¯”äºŒå‰æ ‘æ¥è¯´ï¼Œä¼šçŸ®å¾ˆå¤šã€‚<br>  è€Œå¯¹äºæ•°æ®åº“æ¥è¯´ï¼Œæ‰€æœ‰çš„æ•°æ®å¿…ç„¶éƒ½æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ï¼Œè€Œç£ç›˜ IO çš„æ•ˆç‡å®é™…ä¸Šæ˜¯å¾ˆä½çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨éšæœºç£ç›˜ IO çš„æƒ…å†µä¸‹æ•ˆç‡æ›´ä½ã€‚æ‰€ä»¥æ ‘çš„é«˜åº¦èƒ½å¤Ÿå†³å®šç£ç›˜ IO çš„æ¬¡æ•°ï¼Œç£ç›˜ IO æ¬¡æ•°è¶Šå°‘ï¼Œå¯¹äºæ€§èƒ½çš„æå‡å°±è¶Šå¤§ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé‡‡ç”¨ B æ ‘ä½œä¸ºç´¢å¼•å­˜å‚¨ç»“æ„çš„åŸå› ã€‚  <img src="https://leo710aka.github.io/bk/job7.png" width="550" height="300" alt=""></li>
<li>å¯¹äº B æ ‘ï¼Œä¸ç®¡å¶å­èŠ‚ç‚¹è¿˜æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œéƒ½ä¼šä¿å­˜æ•°æ®ï¼Œè¿™æ ·å¯¼è‡´åœ¨éå¶å­èŠ‚ç‚¹ä¸­èƒ½ä¿å­˜çš„æŒ‡é’ˆæ•°é‡å˜å°‘ï¼ˆæœ‰äº›èµ„æ–™ä¹Ÿç§°ä¸ºæ‰‡å‡ºï¼‰ï¼ŒæŒ‡é’ˆå°‘çš„æƒ…å†µä¸‹è¦ä¿å­˜å¤§é‡æ•°æ®ï¼Œåªèƒ½å¢åŠ æ ‘çš„é«˜åº¦ï¼Œå¯¼è‡´ IO æ“ä½œå˜å¤šï¼ŒæŸ¥è¯¢æ€§èƒ½å˜ä½ã€‚åœ¨ Mysql çš„ InnoDB å­˜å‚¨å¼•æ“é‡Œé¢ç”¨äº†ä¸€ç§å¢å¼ºçš„ B æ ‘ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ B+æ ‘æ¥ä½œä¸ºç´¢å¼•å’Œæ•°æ®çš„å­˜å‚¨ç»“æ„ã€‚  <img src="https://leo710aka.github.io/bk/job8.png" width="600" height="300" alt=""></li>
<li>ä½¿ç”¨ B+æ ‘æ¥å®ç°ç´¢å¼•çš„åŸå› ï¼Œæˆ‘è®¤ä¸ºæœ‰å‡ ä¸ªæ–¹é¢ã€‚<ol>
<li>B+æ ‘éå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥æ¯ä¸€å±‚èƒ½å¤Ÿå­˜å‚¨çš„ç´¢å¼•æ•°é‡ä¼šå¢åŠ ï¼Œæ„å‘³ç€ B+æ ‘åœ¨å±‚é«˜ç›¸åŒçš„æƒ…å†µä¸‹å­˜å‚¨çš„æ•°æ®é‡è¦æ¯” B æ ‘è¦å¤šï¼Œä½¿å¾—ç£ç›˜ IO æ¬¡æ•°æ›´å°‘ã€‚</li>
<li>åœ¨ Mysql é‡Œé¢ï¼ŒèŒƒå›´æŸ¥è¯¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ“ä½œï¼Œè€Œ B+æ ‘çš„æ‰€æœ‰å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹çš„æ•°æ®ä½¿ç”¨äº†åŒå‘é“¾è¡¨æ¥å…³è”ï¼Œæ‰€ä»¥åœ¨æŸ¥è¯¢çš„æ—¶å€™åªéœ€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹è¿›è¡Œéå†å°±è¡Œï¼Œè€Œ B æ ‘éœ€è¦è·å–æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ‰€ä»¥ B+æ ‘åœ¨èŒƒå›´æŸ¥è¯¢ä¸Šæ•ˆç‡æ›´é«˜ã€‚</li>
<li>åœ¨æ•°æ®æ£€ç´¢æ–¹é¢ï¼Œç”±äºæ‰€æœ‰çš„æ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥ B+æ ‘çš„ IO æ¬¡æ•°ä¼šæ›´åŠ ç¨³å®šä¸€äº›ã€‚</li>
<li>å¶å­èŠ‚ç‚¹å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼Œæ‰€ä»¥ B+æ ‘çš„å…¨å±€æ‰«æèƒ½åŠ›æ›´å¼ºä¸€äº›ï¼Œå®ƒåªéœ€è¦æ‰«æå¶å­èŠ‚ç‚¹ã€‚ä½†æ˜¯ B æ ‘éœ€è¦éå†æ•´ä¸ªæ ‘ã€‚<br>  å¦å¤–ï¼ŒåŸºäº B+æ ‘è¿™æ ·ä¸€ç§ç»“æ„ï¼Œå¦‚æœé‡‡ç”¨è‡ªå¢çš„æ•´å‹æ•°æ®ä½œä¸ºä¸»é”®ï¼Œè¿˜èƒ½æ›´å¥½çš„é¿å…å¢åŠ æ•°æ®çš„æ—¶å€™ï¼Œå¸¦æ¥å¶å­èŠ‚ç‚¹åˆ†è£‚å¯¼è‡´çš„å¤§é‡è¿ç®—çš„é—®é¢˜ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>ä¸ºä»€ä¹ˆé€‰æ‹© B+Tree è€Œä¸æ˜¯çº¢é»‘æ ‘ï¼Ÿ</p>
<ul>
<li>çº¢é»‘æ ‘ç­‰å¹³è¡¡æ ‘ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ç´¢å¼•,ä½†æ˜¯æ–‡ä»¶ç³»ç»ŸåŠæ•°æ®åº“ç³»ç»Ÿ,æ™®éé‡‡ç”¨ B+ Treeä½œä¸ºç´¢å¼•ç»“æ„è¿™æ˜¯å› ä¸ºå…¶è®¿é—®ç£ç›˜æ•°æ®æœ‰æ›´é«˜çš„æ€§èƒ½ã€‚æˆ‘ä¸»è¦ä»ä¸¤ä¸ªç‚¹æ¥å›ç­”</li>
<li>ç¬¬ä¸€ç‚¹ï¼šå¯¹äºä¸€ä¸ªæ•°æ®åº“æ¥è¯´ å­˜å‚¨çš„æ•°æ®é‡ä¼šæ¯”è¾ƒå¤šï¼Œå¯¼è‡´ç´¢å¼•ä¹Ÿå¾ˆå¤§ å› æ­¤éœ€è¦å°†ç´¢å¼•å­˜å‚¨åœ¨ç£ç›˜ï¼Œä½†æ˜¯ç£ç›˜çš„ IO æ“ä½œåˆéå¸¸è€—ï¼Œæ‰€ä»¥æé«˜ç´¢å¼•æ•ˆç‡çš„å…³é”®åœ¨äºå‡å°‘ç£ç›˜ IO çš„æ¬¡æ•°ã€‚ç›¸åŒèŠ‚ç‚¹ä¸ªæ•° çš„ B+Tree çš„é«˜åº¦æ›´å°ï¼Œæ ‘çš„é«˜åº¦åŸºæœ¬å†³å®šäº†ç£ç›˜çš„ IO æ¬¡æ•° ï¼Œæ‰€ä»¥ä½¿ç”¨ B+Tree æ€§èƒ½è¦é«˜å¾ˆå¤š</li>
<li>ç¬¬äºŒç‚¹ï¼šB+Tree æœ‰ä¸ªç‰¹ç‚¹æ˜¯ç›¸é‚»çš„æ•°æ®åœ¨ç‰©ç†ä¸Šä¹Ÿæ˜¯ç›¸é‚»çš„ï¼Œå› ä¸º B+Tree çš„ node çš„å¤§å°è®¾ä¸ºä¸€ä¸ªé¡µï¼Œè€Œä¸€ä¸ªèŠ‚ç‚¹ä¸Šå­˜æœ‰å¤šä¸ªç›¸é‚»çš„å…³é”®å­—å’Œåˆ†æ”¯ä¿¡æ¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡ IOå°±èƒ½å®Œå…¨è½½å…¥ï¼Œç›¸å½“äºä¸€æ¬¡ IO è½½å…¥äº†å¤šä¸ªç›¸é‚»çš„å…³é”®å­—å’Œåˆ†æ”¯ï¼Œè€Œçº¢é»‘æ ‘ä¸å…·æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œçº¢é»‘æ ‘ä¸­å¤§å°ç›¸é‚»çš„æ•°æ®ï¼Œåœ¨ç‰©ç†ç»“æ„ä¸Šå¯èƒ½è·ç¦»ç›¸å·®å¾ˆå¤§ã€‚ç”±äºç¨‹åºçš„å±€éƒ¨æ€§åŸç†ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç´¢å¼•ä¸­é‡‡ç”¨äº†é¢„åŠ è½½çš„æŠ€æœ¯ï¼Œæ¯æ¬¡ç£ç›˜è®¿é—®çš„æ—¶å€™é™¤äº†å°†è®¿é—®åˆ°çš„é¡µåŠ è½½åˆ°ç£ç›˜ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŸºäºå±€éƒ¨æ€§åŸç†åŠ è½½ï¼Œå‡ é¡µç›¸é‚»çš„æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œè€Œè¿™ä¸ªåŠ è½½æ˜¯ä¸éœ€è¦æ¶ˆè€—å¤šä½™ç£ç›˜ IO æ—¶é—´çš„ã€‚<br>  å› æ­¤ åŸºäºå±€éƒ¨æ€§åŸç†ï¼Œä»¥åŠ B+Tree å­˜å‚¨ç»“æ„ç‰©ç†ä¸Šçš„ç‰¹æ€§ï¼Œæ‰€ä»¥ B+Tree çš„ç´¢å¼•æ€§èƒ½æ¯”çº¢é»‘æ ‘è¦å¥½å¾ˆå¤šã€‚</li>
</ul>
</li>
<li><p>åœ¨æ•°æ®åº“çš„è¡¨ä¸Šå»ºç«‹äº† <code>(time DESC, name DESC)</code> çš„å¤åˆç´¢å¼•ï¼Œä»€ä¹ˆæƒ…å†µä¸‹å¤±æ•ˆ&#x2F;ç”Ÿæ•ˆï¼Ÿ</p>
<ol>
<li><strong>ç´¢å¼•ç”Ÿæ•ˆçš„æƒ…å†µï¼š</strong><ul>
<li><strong>æŸ¥è¯¢æ¡ä»¶æ¶‰åŠåˆ°ä¸¤ä¸ªå­—æ®µï¼š</strong> å½“æŸ¥è¯¢æ¡ä»¶æ¶‰åŠåˆ°ç´¢å¼•çš„ä¸¤ä¸ªå­—æ®µæ—¶ï¼Œå¤åˆç´¢å¼•å¯ä»¥ç”Ÿæ•ˆã€‚ä¾‹å¦‚ï¼šæŸ¥è¯¢æ¡ä»¶åŒ…æ‹¬äº† <code>time</code> å’Œ <code>name</code>ï¼Œè€Œä¸”ä¸ç´¢å¼•çš„é¡ºåºä¸€è‡´ï¼Œå› æ­¤è¯¥å¤åˆç´¢å¼•å¯ä»¥è¢«æœ‰æ•ˆåˆ©ç”¨ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> <span class="type">time</span> <span class="operator">&gt;</span> <span class="string">&#x27;2022-01-01&#x27;</span> <span class="keyword">AND</span> name <span class="operator">=</span> <span class="string">&#x27;John&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
<li><strong>æŸ¥è¯¢æ¡ä»¶åªæ¶‰åŠåˆ°éƒ¨åˆ†å­—æ®µï¼š</strong> å½“æŸ¥è¯¢æ¡ä»¶åªæ¶‰åŠåˆ°ç´¢å¼•çš„ä¸€éƒ¨åˆ†å­—æ®µæ—¶ï¼Œä¹Ÿå¯èƒ½ä¼šä½¿ç”¨åˆ°è¯¥å¤åˆç´¢å¼•ã€‚ä¾‹å¦‚ï¼šæŸ¥è¯¢æ¡ä»¶åªåŒ…å«äº† <code>time</code> å­—æ®µï¼Œä½†ç”±äº <code>time</code> æ˜¯ç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œæ‰€ä»¥è¯¥ç´¢å¼•å¯èƒ½ä»ç„¶ç”Ÿæ•ˆã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> <span class="type">time</span> <span class="operator">&gt;</span> <span class="string">&#x27;2022-01-01&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>ç´¢å¼•ä¸ç”Ÿæ•ˆçš„æƒ…å†µï¼š</strong><ul>
<li><strong>æŸ¥è¯¢æ¡ä»¶æ²¡æœ‰ä½¿ç”¨åˆ°ç´¢å¼•çš„å‰ç¼€ï¼š</strong> å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­æ²¡æœ‰ä½¿ç”¨åˆ°ç´¢å¼•çš„å‰ç¼€å­—æ®µï¼Œé‚£ä¹ˆå¤åˆç´¢å¼•å¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼šæŸ¥è¯¢æ¡ä»¶åªåŒ…å«äº† <code>name</code> å­—æ®µï¼Œæ²¡ç”¨åˆ° <code>time</code> å­—æ®µï¼Œå› æ­¤ <code>(time DESC, name DESC)</code> è¿™ä¸ªå¤åˆç´¢å¼•å¯èƒ½ä¸è¢«ä½¿ç”¨  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;John&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
<li><strong>æŸ¥è¯¢æ¡ä»¶çš„é¡ºåºä¸ç¬¦åˆç´¢å¼•çš„é¡ºåºï¼š</strong> å¤åˆç´¢å¼•çš„é¡ºåºå¾ˆé‡è¦ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶çš„é¡ºåºä¸ç´¢å¼•çš„é¡ºåºä¸ä¸€è‡´ï¼Œç´¢å¼•å¯èƒ½æ— æ³•è¢«æœ‰æ•ˆåˆ©ç”¨ã€‚ä¾‹å¦‚ï¼šè™½ç„¶åŒ…å«äº†ç´¢å¼•çš„ä¸¤ä¸ªå­—æ®µï¼Œä½†æŸ¥è¯¢æ¡ä»¶çš„é¡ºåºä¸ç´¢å¼•çš„é¡ºåºä¸ä¸€è‡´ï¼Œå› æ­¤ç´¢å¼•å¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;John&#x27;</span> <span class="keyword">AND</span> <span class="type">time</span> <span class="operator">&gt;</span> <span class="string">&#x27;2022-01-01&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
<li><p>MySQL ç´¢å¼•å¤±æ•ˆçš„å‡ ç§æƒ…å†µ</p>
<ol>
<li>OR è¯­å¥å‰åæ²¡æœ‰åŒæ—¶ä½¿ç”¨ç´¢å¼•ã€‚è¦æƒ³ä½¿ç”¨orï¼Œåˆæƒ³è®©ç´¢å¼•ç”Ÿæ•ˆï¼Œåªèƒ½å°†oræ¡ä»¶ä¸­çš„æ¯ä¸ªåˆ—éƒ½åŠ ä¸Šç´¢å¼•ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="operator">!</span><span class="comment">-- ç”Ÿæ•ˆçš„æƒ…å†µ --&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> <span class="type">time</span> <span class="operator">&gt;</span> <span class="string">&#x27;2022-01-01&#x27;</span> <span class="keyword">OR</span> name <span class="operator">=</span> <span class="string">&#x27;John&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">!</span><span class="comment">-- ä¸ç”Ÿæ•ˆçš„æƒ…å†µ --&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> <span class="type">time</span> <span class="operator">&gt;</span> <span class="string">&#x27;2022-01-01&#x27;</span> <span class="keyword">OR</span> other_column <span class="operator">=</span> <span class="string">&#x27;some_value&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
<li>å¤åˆç´¢å¼•æœªç”¨å·¦åˆ—å­—æ®µã€‚å¯¹äºå¤åˆç´¢å¼•ï¼Œå¦‚æœä¸ä½¿ç”¨å‰åˆ—ï¼Œåç»­åˆ—ä¹Ÿå°†æ— æ³•ä½¿ç”¨ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;John&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
<li>likeä»¥%å¼€å¤´ï¼›æ¨¡ç³ŠåŒ¹é…  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;%John&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
<li>éœ€è¦ç±»å‹è½¬æ¢ã€‚å­˜åœ¨ç´¢å¼•åˆ—çš„æ•°æ®ç±»å‹éšå½¢è½¬æ¢ï¼Œåˆ™ç”¨ä¸ä¸Šç´¢å¼•ã€‚ <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> <span class="built_in">CAST</span>(<span class="type">time</span> <span class="keyword">AS</span> <span class="type">VARCHAR</span>) <span class="operator">=</span> <span class="string">&#x27;2022-01-01&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
<li>whereä¸­ç´¢å¼•åˆ—æœ‰æ•°å­¦è¿ç®—ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> <span class="type">time</span> <span class="operator">*</span> <span class="number">2</span> <span class="operator">=</span> <span class="string">&#x27;2022-01-01&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
<li>whereä¸­ç´¢å¼•åˆ—ä½¿ç”¨äº†å‡½æ•°ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(<span class="type">time</span>) <span class="operator">=</span> <span class="number">2022</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">time</span> <span class="keyword">DESC</span>, name <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li>
<li>å¦‚æœmysqlè§‰å¾—å…¨è¡¨æ‰«ææ›´å¿«æ—¶ï¼ˆæ•°æ®å°‘ï¼‰ã€‚</li>
</ol>
</li>
<li><p>è”åˆç´¢å¼•ï¼ˆComposite Indexï¼‰</p>
<ul>
<li>ä¹Ÿç§°ä¸ºå¤åˆç´¢å¼•ï¼Œæ˜¯æŒ‡åŒæ—¶åŒ…å«å¤šä¸ªåˆ—çš„ç´¢å¼•ï¼Œå®ƒå¯ä»¥æ›´åŠ ç²¾ç¡®åœ°å®šä½æ•°æ®ï¼Œæé«˜æŸ¥è¯¢çš„æ•ˆç‡ã€‚<br>  é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè¡¨ä¸­å¯èƒ½å­˜åœ¨å¤šä¸ªéœ€è¦ç»å¸¸ç”¨äºæŸ¥è¯¢çš„åˆ—ï¼Œä½¿ç”¨è”åˆç´¢å¼•å¯ä»¥å°†è¿™äº›åˆ—ç»„åˆèµ·æ¥ï¼Œå»ºç«‹ä¸€ä¸ªå¤åˆç´¢å¼•ã€‚åœ¨æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶åŒæ—¶åŒ…å«è”åˆç´¢å¼•ä¸­çš„å¤šä¸ªåˆ—ï¼Œæ•°æ®åº“å¯ä»¥ç›´æ¥ä½¿ç”¨ç´¢å¼•å®šä½åˆ°ç¬¦åˆæ¡ä»¶çš„è¡Œï¼Œé¿å…äº†å…¨è¡¨æ‰«æï¼Œæé«˜äº†æŸ¥è¯¢æ•ˆç‡ã€‚<br>  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨è”åˆç´¢å¼•æ—¶ï¼Œéœ€è¦è€ƒè™‘ç´¢å¼•çš„é¡ºåºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥å°†æœ€å¸¸ç”¨äºæŸ¥è¯¢çš„å­—æ®µæ”¾åœ¨ç´¢å¼•çš„å‰é¢ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°åˆ©ç”¨ç´¢å¼•ã€‚å¦å¤–ï¼Œè”åˆç´¢å¼•ä¹Ÿå­˜åœ¨ä¸€äº›é™åˆ¶ã€‚ç”±äºç´¢å¼•æ˜¯æŒ‰ç…§ç´¢å¼•åˆ—çš„é¡ºåºå»ºç«‹çš„ï¼Œå› æ­¤åªæœ‰åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«ç´¢å¼•çš„æœ€å·¦ä¾§çš„åˆ—æ—¶ï¼ŒMySQL æ‰èƒ½åˆ©ç”¨è¿™ä¸ªç´¢å¼•ã€‚å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«çš„åˆ—ä¸æ˜¯ç´¢å¼•çš„æœ€å·¦ä¾§åˆ—ï¼Œé‚£ä¹ˆ MySQL å°±æ— æ³•ä½¿ç”¨è¿™ä¸ªç´¢å¼•ã€‚<br>  æ­¤å¤–ï¼Œç”±äºè”åˆç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ï¼Œå› æ­¤å…¶ç»´æŠ¤æˆæœ¬ä¹Ÿç›¸å¯¹è¾ƒé«˜ã€‚å¦‚æœç»å¸¸æ›´æ–°å…¶ä¸­ä¸€ä¸ªåˆ—çš„å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•çš„é‡å»ºï¼Œå½±å“æ•°æ®åº“çš„æ€§èƒ½ã€‚å› æ­¤ï¼Œåœ¨å»ºç«‹è”åˆç´¢å¼•æ—¶ï¼Œåº”è¯¥æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œæƒè¡¡åˆ©å¼Šï¼Œé¿å…æ»¥ç”¨ã€‚</li>
<li>å¦‚ä½•ä½¿ç”¨è”åˆç´¢å¼•ï¼Ÿ<br>  1ã€è”åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŒ¹é…æŒ‡çš„æ˜¯whereæ¡ä»¶ä¸€å®šè¦æœ‰è”åˆç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µ<br>  2ã€æ˜¯å¦èµ°è”åˆç´¢å¼•ä¸whereæ¡ä»¶çš„é¡ºåºæ— å…³ï¼Œåªä¸å­—æ®µæœ‰å…³</li>
<li>è”åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™<br>  æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™æŒ‡çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨è”åˆç´¢å¼•æ—¶ï¼ŒMySQL ä¼šæ ¹æ®è”åˆç´¢å¼•ä¸­çš„å­—æ®µé¡ºåºï¼Œä»å·¦åˆ°å³ä¾æ¬¡åˆ°æŸ¥è¯¢æ¡ä»¶ä¸­å»åŒ¹é…ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­å­˜åœ¨ä¸è”åˆç´¢å¼•ä¸­æœ€å·¦ä¾§å­—æ®µç›¸åŒ¹é…çš„å­—æ®µï¼Œåˆ™å°±ä¼šä½¿ç”¨è¯¥å­—æ®µè¿‡æ»¤ä¸€æ‰¹æ•°æ®ï¼Œç›´è‡³è”åˆç´¢å¼•ä¸­å…¨éƒ¨å­—æ®µåŒ¹é…å®Œæˆï¼Œæˆ–è€…åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚ &gt;ã€&lt;ï¼‰æ‰ä¼šåœæ­¢åŒ¹é…ã€‚å¯¹äº &gt;&#x3D;ã€&lt;&#x3D;ã€BETWEENã€like å‰ç¼€åŒ¹é…çš„èŒƒå›´æŸ¥è¯¢ï¼Œå¹¶ä¸ä¼šåœæ­¢åŒ¹é…ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è”åˆç´¢å¼•æ—¶ï¼Œå¯ä»¥å°†åŒºåˆ†åº¦é«˜çš„å­—æ®µæ”¾åœ¨æœ€å·¦è¾¹ï¼Œè¿™ä¹Ÿå¯ä»¥è¿‡æ»¤æ›´å¤šæ•°æ®ã€‚</li>
<li>è”åˆç´¢å¼•çš„ä½œç”¨ï¼Ÿ<br>  1ã€å‡å°‘ioæ“ä½œçš„å¼€é”€å’Œç£ç›˜ç©ºé—´çš„å¼€é”€ï¼›<br>  2ã€æå‡æ€§èƒ½ã€‚ç´¢å¼•åˆ—è¶Šå¤šï¼Œé€šè¿‡ç´¢å¼•ç­›é€‰å‡ºçš„æ•°æ®è¶Šå°‘ã€‚<br>  3ã€è¦†ç›–ç´¢å¼•ã€‚ç›´æ¥é€šè¿‡éå†ç´¢å¼•å–å¾—æ•°æ®ï¼Œæ— éœ€å›è¡¨ã€‚<br>  æé«˜æŸ¥è¯¢æ•ˆç‡ï¼šè”åˆç´¢å¼•å¯ä»¥åŠ é€Ÿå¯¹å¤šåˆ—æ•°æ®çš„æŸ¥è¯¢ï¼Œå¯¹äºè”åˆç´¢å¼•ä¸­åŒ…å«çš„åˆ—ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨å®ƒä»¬è¿›è¡Œç­›é€‰ï¼Œå‡å°‘äº†æŸ¥è¯¢çš„æ•°æ®é‡ï¼Œæé«˜äº†æŸ¥è¯¢æ•ˆç‡ã€‚<br>  å‡å°‘ç£ç›˜IOï¼šè”åˆç´¢å¼•å¯ä»¥å°†å¤šä¸ªåˆ—çš„æ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œå‡å°‘äº†éœ€è¦è¯»å–çš„ç£ç›˜å—æ•°ï¼Œä»è€Œé™ä½äº†IOçš„å¼€é”€ã€‚<br>  ä¼˜åŒ–æ’åºæ“ä½œï¼šå¦‚æœæŸ¥è¯¢éœ€è¦æŒ‰ç…§è”åˆç´¢å¼•ä¸­çš„å¤šä¸ªåˆ—è¿›è¡Œæ’åºï¼Œè”åˆç´¢å¼•å¯ä»¥é¿å…å¯¹å¤šä¸ªç‹¬ç«‹ç´¢å¼•çš„æ’åºæ“ä½œï¼Œä»è€Œæé«˜æ’åºæ“ä½œçš„æ•ˆç‡</li>
</ul>
</li>
<li><p><strong>MySQL æœ€å·¦å‰ç¼€ç´¢å¼•çš„åº•å±‚åŸç†</strong>ã€ã€<br>æ¶‰åŠåˆ° B-Tree ç´¢å¼•ç»“æ„ä»¥åŠ MySQL çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ã€‚<br>B-Tree ç´¢å¼•æ˜¯ä¸€ç§å¸¸è§çš„ç´¢å¼•ç»“æ„ï¼Œç”¨äºå¿«é€Ÿæ£€ç´¢æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚åœ¨ B-Tree ç´¢å¼•ä¸­ï¼Œæ•°æ®æŒ‰ç…§é”®å€¼æœ‰åºå­˜å‚¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«å¤šä¸ªé”®å€¼å’Œå¯¹åº”çš„æŒ‡é’ˆã€‚MySQL ä½¿ç”¨ B-Tree ç´¢å¼•æ¥å®ç°å„ç§ç´¢å¼•ç±»å‹ï¼ŒåŒ…æ‹¬æœ€å·¦å‰ç¼€ç´¢å¼•ã€‚<br>å½“ä½ åˆ›å»ºä¸€ä¸ªå¤šåˆ—ç´¢å¼•æ—¶ï¼ŒMySQL å®é™…ä¸Šä¼šåˆ›å»ºä¸€ä¸ªæŒ‰ç…§æŒ‡å®šåˆ—é¡ºåºå»ºç«‹çš„ B-Tree ç´¢å¼•ã€‚è¿™ä¸ªç´¢å¼•ä¼šæŒ‰ç…§æŒ‡å®šçš„åˆ—å€¼é¡ºåºå­˜å‚¨æ•°æ®ï¼Œå› æ­¤åœ¨æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶åªæ¶‰åŠåˆ°ç´¢å¼•çš„æœ€å·¦å‰ç¼€åˆ—ï¼ŒMySQL å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªç´¢å¼•æ¥åŠ é€ŸæŸ¥è¯¢ã€‚<br>ï¼Ÿï¼Ÿï¼Ÿ</p>
</li>
<li><p>ç®€å•æè¿° MySQL ä¸­ï¼Œç´¢å¼•ï¼Œä¸»é”®ï¼Œå”¯ä¸€ç´¢å¼•ï¼Œè”åˆç´¢å¼•çš„åŒºåˆ«ï¼Œå¯¹æ•°æ®åº“çš„æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“ï¼Ÿï¼ˆä»è¯»å†™ä¸¤æ–¹é¢ï¼‰<br>ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶(InnoDB æ•°æ®è¡¨ä¸Šçš„ç´¢å¼•æ˜¯è¡¨ç©ºé—´çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†)ï¼Œå®ƒä»¬åŒ…å«ç€å¯¹æ•°æ®è¡¨é‡Œæ‰€æœ‰è®°å½•çš„å¼•ç”¨æŒ‡é’ˆã€‚<br>æ™®é€šç´¢å¼•(ç”±å…³é”®å­— KEY æˆ– INDEX å®šä¹‰çš„ç´¢å¼•)çš„å”¯ä¸€ä»»åŠ¡æ˜¯åŠ å¿«å¯¹æ•°æ®çš„è®¿é—®é€Ÿåº¦ã€‚ç´¢å¼•å¯ä»¥æå¤§çš„æé«˜æ•°æ®çš„æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†æ˜¯ä¼šé™ä½æ’å…¥ã€åˆ é™¤ã€æ›´æ–°è¡¨çš„é€Ÿåº¦ï¼Œå› ä¸ºåœ¨æ‰§è¡Œè¿™äº›å†™æ“ä½œæ—¶è¿˜è¦æ“ä½œç´¢å¼•æ–‡ä»¶ã€‚æ™®é€šç´¢å¼•å…è®¸è¢«ç´¢å¼•çš„æ•°æ®åˆ—åŒ…å«é‡å¤çš„å€¼ã€‚<br>å¦‚æœèƒ½ç¡®å®šæŸä¸ªæ•°æ®åˆ—å°†åªåŒ…å«å½¼æ­¤å„ä¸ç›¸åŒçš„å€¼ï¼Œåœ¨ä¸ºè¿™ä¸ªæ•°æ®åˆ—åˆ›å»ºç´¢å¼•çš„æ—¶å€™å°±åº”è¯¥ç”¨å…³é”®å­— UNIQUE æŠŠå®ƒå®šä¹‰ä¸ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚å”¯ä¸€ç´¢å¼•å¯ä»¥ä¿è¯æ•°æ®è®°å½•çš„å”¯ä¸€æ€§ã€‚<br>ä¸»é”®ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œåœ¨ä¸€å¼ è¡¨ä¸­åªèƒ½å®šä¹‰ä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€æ¡è®°å½•ï¼Œä½¿ç”¨å…³é”®å­— PRIMARY KEY æ¥åˆ›å»ºã€‚<br>ç´¢å¼•å¯ä»¥è¦†ç›–å¤šä¸ªæ•°æ®åˆ—ï¼Œå¦‚åƒ INDEX(columnA, columnB)ç´¢å¼•ï¼Œè¿™å°±æ˜¯è”åˆç´¢å¼•ã€‚</p>
</li>
<li><p><code>EXPLAIN</code> æ‰§è¡Œè®¡åˆ’</p>
<ul>
<li>é€šè¿‡åˆ†æ EXPLAIN è¿”å›çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¯ä»¥äº†è§£æŸ¥è¯¢çš„ä¼˜åŒ–æƒ…å†µï¼Œå¦‚æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ã€æ˜¯å¦è¿›è¡Œäº†å…¨è¡¨æ‰«æç­‰ã€‚å¯¹äºéœ€è¦ä¼˜åŒ–çš„æŸ¥è¯¢ï¼Œå¯ä»¥æ ¹æ®æ‰§è¡Œè®¡åˆ’è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚æ·»åŠ é€‚å½“çš„ç´¢å¼•ã€è°ƒæ•´æŸ¥è¯¢è¯­å¥ç­‰ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> customers <span class="keyword">WHERE</span> city <span class="operator">=</span> <span class="string">&#x27;New York&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li>æ‰§è¡Œè®¡åˆ’ä¸­çš„ä¿¡æ¯é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š<ul>
<li>idï¼šæŸ¥è¯¢æ­¥éª¤çš„æ ‡è¯†ç¬¦ã€‚</li>
<li>select_typeï¼šæŸ¥è¯¢ç±»å‹ï¼Œå¦‚ SIMPLEã€PRIMARYã€SUBQUERY ç­‰ã€‚</li>
<li>tableï¼šæŸ¥è¯¢æ¶‰åŠçš„è¡¨ã€‚</li>
<li>typeï¼šè®¿é—®ç±»å‹ï¼Œå¦‚ ALLã€INDEXã€RANGE ç­‰ï¼Œè¡¨ç¤ºæ•°æ®åº“å¦‚ä½•è®¿é—®è¡¨ä¸­çš„æ•°æ®ã€‚</li>
<li>possible_keysï¼šå¯èƒ½ç”¨åˆ°çš„ç´¢å¼•ã€‚</li>
<li>keyï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ã€‚</li>
<li>rowsï¼šä¼°è®¡çš„è¿”å›è¡Œæ•°ã€‚</li>
<li>Extraï¼šå…¶ä»–ä¿¡æ¯ï¼Œå¦‚ä½¿ç”¨äº†ä¸´æ—¶è¡¨ã€ä½¿ç”¨äº†æ–‡ä»¶æ’åºç­‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>SQL ä¼˜åŒ–ï¼Ÿ</p>
<ul>
<li>ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ã€ã€<ol>
<li><strong>é€‰æ‹©éœ€è¦çš„åˆ—è€Œä¸æ˜¯ä½¿ç”¨ <code>SELECT *</code>ï¼š</strong></li>
<li><strong>å‡å°‘å­æŸ¥è¯¢ï¼Œä½¿ç”¨å…³è”æŸ¥è¯¢ï¼š</strong>   å°½é‡ä½¿ç”¨å…³è”æŸ¥è¯¢ï¼ˆLEFT JOINã€RIGHT JOINã€INNER JOINï¼‰æ›¿ä»£å­æŸ¥è¯¢ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ä½¿ç”¨ JOIN æ“ä½œæ¥ä»£æ›¿æ‰‹åŠ¨åˆ›å»ºçš„ä¸´æ—¶è¡¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li><strong>é¿å…ä½¿ç”¨ IN æˆ– NOT INï¼Œä½¿ç”¨ EXISTS æˆ–å…³è”æŸ¥è¯¢ï¼š</strong> ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li><strong>ä½¿ç”¨ UNION æˆ– UNION ALL ä»£æ›¿ OR æŸ¥è¯¢ï¼š</strong> ç‰¹åˆ«æ˜¯å½“ç¡®å®šæ²¡æœ‰é‡å¤æ•°æ®æ—¶ï¼Œä½¿ç”¨ UNION ALL æ›´ä¸ºæ•ˆç‡ã€‚</li>
<li><strong>é€‰æ‹©åˆé€‚çš„å­—æ®µå±æ€§ï¼š</strong> å°½å¯èƒ½å‡å°‘å®šä¹‰å­—æ®µå®½åº¦ï¼Œè®¾ç½®åˆé€‚çš„æ•°æ®ç±»å‹ã€‚å°½é‡æŠŠå­—æ®µè®¾ç½® NOT NULLï¼Œä¾‹å¦‚â€™çœä»½â€™ã€â€™æ€§åˆ«â€™æœ€å¥½é€‚ç”¨ ENUM</li>
</ol>
</li>
<li>åŸºäºç´¢å¼•æŸ¥è¯¢ã€ã€<ol>
<li>ä¸ºå¸¸ç”¨çš„æŸ¥è¯¢æ¡ä»¶å’Œè¿æ¥æ¡ä»¶åˆ›å»ºç´¢å¼•ï¼Œä»¥åŠ é€ŸæŸ¥è¯¢é€Ÿåº¦ã€‚ç¡®ä¿æ•°æ®åº“å¼•æ“èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ç´¢å¼•ã€‚</li>
<li><strong>é¿å…å¯¹ç´¢å¼•åˆ—è¿›è¡Œå‡½æ•°æˆ–è¿ç®—ï¼š</strong>  å°½é‡é¿å…åœ¨ç´¢å¼•åˆ—ä¸Šä½¿ç”¨å‡½æ•°æˆ–è¿ç®—ï¼Œä»¥ç¡®ä¿ç´¢å¼•çš„æœ‰æ•ˆä½¿ç”¨ã€‚</li>
<li><strong>WHERE å­å¥ä¸­çš„ LIKE ä½¿ç”¨ % æ”¾åœ¨å³è¾¹ï¼š</strong>   åœ¨ä½¿ç”¨ LIKE æ“ä½œæ—¶ï¼Œå°½é‡å°† % æ”¾åœ¨å³è¾¹ï¼Œä»¥ä¾¿ç´¢å¼•çš„æœ‰æ•ˆä½¿ç”¨ã€‚</li>
<li><strong>å°½é‡ä½¿ç”¨ SQL è¯­å¥ç”¨åˆ°çš„ç´¢å¼•å®Œæˆæ’åºï¼š</strong>  é¿å…ä½¿ç”¨æ–‡ä»¶æ’åºçš„æ–¹å¼ã€‚</li>
<li><strong>é¿å…åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨ !&#x3D; æˆ– &lt;&gt; æ“ä½œç¬¦ï¼š</strong>  ä»¥å…å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚</li>
<li><strong>é¿å…åœ¨ WHERE å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ NULL å€¼åˆ¤æ–­ï¼š</strong>å¯ä»¥è®¾ç½®é»˜è®¤å€¼æˆ–ä½¿ç”¨å…¶ä»–æ–¹å¼ï¼Œä»¥å…å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚å¦‚ï¼š select id from t where num is null å¯ä»¥åœ¨numä¸Šè®¾ç½®é»˜è®¤å€¼0ï¼Œç¡®ä¿è¡¨ä¸­numåˆ—æ²¡æœ‰nullå€¼ï¼Œç„¶åè¿™æ ·æŸ¥è¯¢ï¼šselect id from t where num&#x3D;0</li>
</ol>
</li>
<li>æ•°æ®åº“äº‹åŠ¡ã€ã€<ol>
<li><strong>äº‹åŠ¡å¤„ç†å’Œé”å®šè¡¨ä¼˜åŒ–ï¼š</strong>    åˆç†ä½¿ç”¨äº‹åŠ¡å¤„ç†ï¼Œé¿å…é”å®šè¡¨çš„æƒ…å†µï¼Œä»¥æé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>MySQL ä¼˜åŒ–ï¼Ÿ</p>
<ul>
<li>ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿå±‚é¢çš„ä¼˜åŒ–<br>  ç¡¬ä»¶å±‚é¢æ¥è¯´ï¼Œå½±å“ Mysql æ€§èƒ½çš„å› ç´ æœ‰ï¼ŒCPUã€å¯ç”¨å†…å­˜å¤§å°ã€ç£ç›˜è¯»å†™é€Ÿåº¦ã€ç½‘ç»œå¸¦å®½ä»æ“ä½œç³»å±‚é¢æ¥è¯´ï¼Œåº”ç”¨æ–‡ä»¶å¥æŸ„æ•°ã€æ“ä½œç³»ç»Ÿç½‘ç»œçš„é…ç½®éƒ½ä¼šå½±å“åˆ° Mysql æ€§èƒ½ã€‚è¿™éƒ¨åˆ†çš„ä¼˜åŒ–ä¸€èˆ¬ç”± DBA æˆ–è€…è¿ç»´å·¥ç¨‹å¸ˆå»å®Œæˆã€‚åœ¨ç¡¬ä»¶åŸºç¡€èµ„æºçš„ä¼˜åŒ–ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹åº”è¯¥å…³æ³¨æœåŠ¡æœ¬èº«æ‰¿è½½çš„ä½“é‡ï¼Œç„¶åæå‡ºåˆç†çš„æŒ‡æ ‡è¦æ±‚ï¼Œé¿å…å‡ºç°èµ„æºæµªè´¹ï¼</li>
<li>æ¶æ„è®¾è®¡å±‚é¢çš„ä¼˜åŒ–<br>  MySQL æ˜¯ä¸€ä¸ªç£ç›˜ IO è®¿é—®é‡éå¸¸é¢‘ç¹çš„å…³ç³»å‹æ•°æ®åº“ï¼Œåœ¨é«˜å¹¶å‘å’Œé«˜æ€§èƒ½çš„åœºæ™¯ä¸­æ‰¿å—å·¨å¤§çš„å¹¶å‘å‹åŠ›ï¼Œ<br>  1ã€æ­å»º Mysql ä¸»ä»é›†ç¾¤ï¼Œå•ä¸ª Mysql æœåŠ¡å®¹æ˜“å•ç‚¹æ•…éšœï¼Œä¸€æ—¦æœåŠ¡å™¨å®•æœºï¼Œå°†ä¼šå¯¼è‡´ä¾èµ– Mysql æ•°æ®åº“çš„åº”ç”¨å…¨éƒ¨æ— æ³•å“åº”ã€‚ ä¸»ä»é›†ç¾¤æˆ–è€…ä¸»ä¸»é›†ç¾¤å¯ä»¥ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨æ€§ã€‚<br>  2ã€è¯»å†™åˆ†ç¦»è®¾è®¡ï¼Œåœ¨è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸­ï¼Œé€šè¿‡è¯»å†™åˆ†ç¦»çš„æ–¹æ¡ˆï¼Œå¯ä»¥é¿å…è¯»å†™å†²çªå¯¼è‡´çš„æ€§èƒ½å½±å“ï¼Ÿï¼Ÿ<br>  3ã€å¼•å…¥åˆ†åº“åˆ†è¡¨æœºåˆ¶ï¼Œé€šè¿‡åˆ†åº“å¯ä»¥é™ä½å•ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹çš„ IO å‹åŠ›ï¼Œé€šè¿‡åˆ†è¡¨çš„æ–¹å¼å¯ä»¥é™ä½å•è¡¨æ•°æ®é‡ï¼Œä»è€Œæå‡ sql æŸ¥è¯¢çš„æ•ˆç‡ã€‚<br>  4ã€é’ˆå¯¹çƒ­ç‚¹æ•°æ®ï¼Œå¯ä»¥å¼•å…¥æ›´ä¸ºé«˜æ•ˆçš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œæ¯”å¦‚ Redisã€MongoDB ç­‰ï¼Œä»–ä»¬å¯ä»¥å¾ˆå¥½çš„ç¼“è§£ Mysql çš„è®¿é—®å‹åŠ›ï¼ŒåŒæ—¶è¿˜èƒ½æå‡æ•°æ®æ£€ç´¢æ€§èƒ½ã€‚</li>
<li>MySQL ç¨‹åºé…ç½®ä¼˜åŒ–<br>  å¯¹äº Mysql æ•°æ®åº“æœ¬èº«çš„ä¼˜åŒ–ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ Mysql ä¸­çš„é…ç½®æ–‡ä»¶ my.cnf æ¥å®Œæˆçš„ï¼Œæ¯”å¦‚ã€‚<br>  Mysql5.7 ç‰ˆæœ¬é»˜è®¤çš„æœ€å¤§è¿æ¥æ•°æ˜¯ 151 ä¸ªï¼Œè¿™ä¸ªå€¼å¯ä»¥åœ¨ my.cnf ä¸­ä¿®æ”¹ã€‚binlog æ—¥å¿—ï¼Œé»˜è®¤æ˜¯ä¸å¼€å¯ã€‚ç¼“å­˜æ±  bufferpoll çš„é»˜è®¤å¤§å°é…ç½®ç­‰ã€‚<br>  ç”±äºè¿™äº›é…ç½®ä¸€èˆ¬éƒ½å’Œç”¨æˆ·å®‰è£…çš„ç¡¬ä»¶ç¯å¢ƒä»¥åŠä½¿ç”¨åœºæ™¯æœ‰å…³ç³»ï¼Œå› æ­¤è¿™äº›é…ç½®å®˜æ–¹åªä¼šæä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå…·ä½“æƒ…å†µè¿˜å¾—ç”±ä½¿ç”¨è€…æ¥ä¿®æ”¹ã€‚<br>  å…³äºé…ç½®é¡¹çš„ä¿®æ”¹ï¼Œéœ€è¦å…³æ³¨ä¸¤ä¸ªæ–¹é¢ã€‚1. é…ç½®çš„ä½œç”¨åŸŸï¼Œåˆ†ä¸ºä¼šè¯çº§åˆ«å’Œå…¨å±€ï¼›2. æ˜¯å¦æ”¯æŒ çƒ­åŠ è½½<br>  å› æ­¤ï¼Œé’ˆå¯¹è¿™ä¸¤ä¸ªç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼š1. å…¨å±€å‚æ•°çš„è®¾å®šå¯¹äºå·²ç»å­˜åœ¨çš„ä¼šè¯æ— æ³•ç”Ÿæ•ˆ; 2. ä¼šè¯å‚æ•°çš„è®¾å®šéšç€ä¼šè¯çš„é”€æ¯è€Œå¤±æ•ˆ; 3. å…¨å±€ç±»çš„ç»Ÿä¸€é…ç½®å»ºè®®é…ç½®åœ¨é»˜è®¤é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦åˆ™é‡å¯æœåŠ¡ä¼šå¯¼è‡´é…ç½®å¤±æ•ˆ</li>
<li>è¡¨ç»“æ„å’Œç´¢å¼•çš„ä¼˜åŒ–<br>  ä¸»è¦å¯ä»¥ä¸‹é¢è¿™äº›æ–¹é¢å»ä¼˜åŒ–åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»ã€ä¸ºå­—æ®µé€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹ã€é€‚å½“çš„åèŒƒå¼è®¾è®¡ï¼Œé€‚å½“å†—ä½™è®¾è®¡ã€ä¸ºæŸ¥è¯¢æ“ä½œåˆ›å»ºå¿…è¦çš„ç´¢å¼•ä½†æ˜¯è¦é¿å…ç´¢å¼•æ»¥ç”¨ã€å°½å¯èƒ½ä½¿ç”¨ Not Nullã€‚</li>
<li>ï¼Ÿï¼Ÿï¼Ÿ SQL ä¼˜åŒ–<br>  ç¬¬ä¸€ã€æ…¢ SQL çš„å®šä½å’Œæ’æŸ¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æ…¢æŸ¥è¯¢æ—¥å¿—å’Œæ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æå·¥å…·å¾—åˆ°æœ‰é—®é¢˜çš„ SQL åˆ—è¡¨ã€‚<br>  ç¬¬äºŒã€æ‰§è¡Œè®¡åˆ’åˆ†æé’ˆå¯¹æ…¢ SQLï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…³é”®å­— explain æ¥æŸ¥çœ‹å½“å‰ sql çš„æ‰§è¡Œè®¡åˆ’.å¯ä»¥é‡ç‚¹å…³æ³¨type key rows filterd ç­‰å­—æ®µ ï¼Œä»è€Œå®šä½è¯¥ SQL æ‰§è¡Œæ…¢çš„æ ¹æœ¬åŸå› ã€‚å†æœ‰çš„æ”¾çŸ¢çš„è¿›è¡Œä¼˜åŒ–<br>  ç¬¬ä¸‰ã€ä½¿ç”¨ show profile å·¥å…·Show Profile æ˜¯ MySQL æä¾›çš„å¯ä»¥ç”¨æ¥åˆ†æå½“å‰ä¼šè¯ä¸­ï¼ŒSQL è¯­å¥èµ„æºæ¶ˆè€—æƒ…å†µçš„å·¥å…·ï¼Œå¯ç”¨äº SQL è°ƒä¼˜çš„æµ‹é‡ã€‚åœ¨å½“å‰ä¼šè¯ä¸­.é»˜è®¤æƒ…å†µä¸‹å¤„äº show profile æ˜¯å…³é—­çŠ¶æ€ï¼Œæ‰“å¼€ä¹‹åä¿å­˜æœ€è¿‘ 15 æ¬¡çš„è¿è¡Œç»“æœã€‚é’ˆå¯¹è¿è¡Œæ…¢çš„ SQLï¼Œé€šè¿‡ profile å·¥å…·è¿›è¡Œè¯¦ç»†åˆ†æ.å¯ä»¥å¾—åˆ° SQL æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€æœ‰çš„èµ„æºå¼€é”€æƒ…å†µ. å¦‚ IO å¼€é”€,CPU å¼€é”€,å†…å­˜å¼€é”€ç­‰.</li>
</ul>
</li>
<li><p>ä»€ä¹ˆæ˜¯å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥ã€å…¨è¿æ¥ï¼Ÿ<br>å†…è”æ¥ï¼ˆInner Joinï¼‰ï¼šåŒ¹é…2å¼ è¡¨ä¸­ç›¸å…³è”çš„è®°å½•ã€‚<br>å·¦å¤–è”æ¥ï¼ˆLeft Outer Joinï¼‰ï¼šé™¤äº†åŒ¹é…2å¼ è¡¨ä¸­ç›¸å…³è”çš„è®°å½•ï¼Œè¿˜ä¼šåŒ¹é…å·¦è¡¨ä¸­å‰©ä½™çš„è®°å½•ï¼Œå³è¡¨ä¸­æœªåŒ¹é…åˆ°çš„å­—æ®µç”¨NULLè¡¨ç¤ºã€‚<br>å³å¤–è”æ¥ï¼ˆRight Outer Joinï¼‰ï¼šé™¤äº†åŒ¹é…2å¼ è¡¨ä¸­ç›¸å…³è”çš„è®°å½•ï¼Œè¿˜ä¼šåŒ¹é…å³è¡¨ä¸­å‰©ä½™çš„è®°å½•ï¼Œå·¦è¡¨æœªåŒ¹é…åˆ°çš„å­—æ®µç”¨NULLè¡¨ç¤ºã€‚<br>å…¨è¿æ¥ï¼ˆFull Join æˆ– Full Outer Joinï¼‰ï¼šåœ¨ä½¿ç”¨å…¨è¿æ¥æ—¶ï¼Œæ— è®ºå·¦è¡¨å’Œå³è¡¨æ˜¯å¦å­˜åœ¨åŒ¹é…ï¼Œéƒ½ä¼šè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰çš„è¡Œï¼Œå¹¶åœ¨æ²¡æœ‰åŒ¹é…çš„è¡Œå¤„å¡«å…… NULL å€¼ã€‚</p>
</li>
<li><p>dropã€deleteä¸truncateçš„åŒºåˆ«<br>SQLä¸­çš„dropã€deleteã€truncateéƒ½è¡¨ç¤ºåˆ é™¤ï¼Œä½†æ˜¯ä¸‰è€…æœ‰ä¸€äº›å·®åˆ«<br>delete å’Œ truncate åªåˆ é™¤è¡¨çš„æ•°æ®ä¸åˆ é™¤è¡¨çš„ç»“æ„é€Ÿåº¦,ä¸€èˆ¬æ¥è¯´: drop&gt; truncate &gt;delete<br>delete è¯­å¥æ˜¯ <strong>dml</strong>,è¿™ä¸ªæ“ä½œä¼šæ”¾åˆ°rollback segementä¸­ï¼Œäº‹åŠ¡æäº¤ä¹‹åæ‰ç”Ÿæ•ˆï¼›å¦‚æœæœ‰ç›¸åº”çš„trigger,æ‰§è¡Œçš„æ—¶å€™å°†è¢«è§¦å‘.<br>truncate,dropæ˜¯ <strong>ddl</strong>, æ“ä½œç«‹å³ç”Ÿæ•ˆï¼ŒåŸæ•°æ®ä¸æ”¾åˆ°rollbacksegmentä¸­,ä¸èƒ½å›æ»š. æ“ä½œä¸è§¦å‘trigger</p>
</li>
<li><p>éƒ¨åˆ†ä¾èµ–å’Œä¼ é€’ä¾èµ–ã€‚</p>
<ol>
<li><strong>éƒ¨åˆ†ä¾èµ–ï¼š</strong>å‘ç”Ÿåœ¨ä¸€ä¸ªè¡¨çš„ä¸»é”®ï¼ˆPrimary Keyï¼‰ä¸­åŒ…å«äº†å¤šä¸ªå­—æ®µï¼Œä½†æ˜¯å…¶ä¸­çš„æŸäº›å­—æ®µå¹¶ä¸å®Œå…¨ä¾èµ–äºä¸»é”®çš„æ‰€æœ‰éƒ¨åˆ†ã€‚ç®€è¨€ä¹‹ï¼ŒæŸä¸ªéä¸»é”®å­—æ®µåªä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚<br>  ä¸¾ä¾‹ï¼šè€ƒè™‘ä¸€ä¸ªè®¢å•è¡¨ï¼Œä¸»é”®æ˜¯è®¢å•å·å’Œå•†å“ç¼–å·ï¼ˆOrderID, ProductIDï¼‰ï¼Œå¦‚æœè®¢å•è¡¨ä¸­è¿˜æœ‰å•†å“åç§°ï¼ˆProductNameï¼‰ï¼Œè€Œå•†å“åç§°ä»…ä¾èµ–äºå•†å“ç¼–å·è€Œä¸ä¾èµ–äºè®¢å•å·ï¼Œé‚£ä¹ˆå•†å“åç§°å¯¹äºè®¢å•è¡¨æ¥è¯´å°±æ˜¯ä¸€ä¸ªéƒ¨åˆ†ä¾èµ–ã€‚</li>
<li><strong>ä¼ é€’ä¾èµ–ï¼š</strong>å‘ç”Ÿåœ¨ä¸€ä¸ªéä¸»é”®å­—æ®µä¾èµ–äºå…¶ä»–éä¸»é”®å­—æ®µï¼Œè€Œè¿™äº›å…¶ä»–éä¸»é”®å­—æ®µåˆä¾èµ–äºä¸»é”®ã€‚ç®€è¨€ä¹‹ï¼ŒæŸä¸ªéä¸»é”®å­—æ®µä¾èµ–äºå…¶ä»–éä¸»é”®å­—æ®µï¼Œè€Œè¿™äº›å…¶ä»–å­—æ®µä¾èµ–äºä¸»é”®ã€‚<br>  ä¸¾ä¾‹ï¼šè€ƒè™‘å‘˜å·¥è¡¨ï¼Œä¸»é”®æ˜¯å‘˜å·¥ç¼–å·(EmployeeID)ï¼Œè¡¨ä¸­åŒ…å«äº†éƒ¨é—¨ç¼–å·(DepartmentIDï¼‰)å’Œéƒ¨é—¨åç§°(DepartmentName)ã€‚å¦‚æœéƒ¨é—¨åç§°ä¾èµ–äºéƒ¨é—¨ç¼–å·ï¼Œè€Œéƒ¨é—¨ç¼–å·åˆä¾èµ–äºå‘˜å·¥ç¼–å·ï¼Œé‚£ä¹ˆéƒ¨é—¨åç§°å¯¹äºå‘˜å·¥è¡¨æ¥è¯´å°±æ˜¯ä¸€ä¸ªä¼ é€’ä¾èµ–ã€‚</li>
</ol>
</li>
<li><p>èŒƒå¼ï¼šè§£å†³éƒ¨åˆ†ä¾èµ–å’Œä¼ é€’ä¾èµ–çš„ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡æ•°æ®åº“èŒƒå¼åŒ–ï¼Œé€šå¸¸æ˜¯å°†è¡¨æ‹†åˆ†æˆæ›´å°çš„è¡¨ã€‚</p>
<ul>
<li>èŒƒå¼ç†è®ºæ˜¯ä¸ºäº†è§£å†³å››ç§å¼‚å¸¸ã€‚ä¸ç¬¦åˆèŒƒå¼çš„å…³ç³»ï¼ˆè¡¨çš„å±æ€§çš„ç»„åˆï¼‰ï¼Œä¼šäº§ç”Ÿå¾ˆå¤šå¼‚å¸¸ï¼š1ã€å†—ä½™æ•°æ®ã€‚2ã€ä¿®æ”¹å¼‚å¸¸: ä¿®æ”¹äº†ä¸€ä¸ªè®°å½•ä¸­çš„ä¿¡æ¯ï¼Œä½†æ˜¯å¦ä¸€ä¸ªè®°å½•ä¸­ç›¸åŒçš„ä¿¡æ¯å´æ²¡æœ‰è¢«ä¿®æ”¹ã€‚3ã€åˆ é™¤å¼‚å¸¸: åˆ é™¤ä¸€ä¸ªä¿¡æ¯ï¼Œé‚£ä¹ˆä¹Ÿä¼šä¸¢å¤±å…¶å®ƒä¿¡æ¯ã€‚4ã€æ’å…¥å¼‚å¸¸: ä¾‹å¦‚æƒ³è¦æ’å…¥ä¸€ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼Œå¦‚æœè¿™ä¸ªå­¦ç”Ÿè¿˜æ²¡é€‰è¯¾ï¼Œé‚£ä¹ˆå°±æ— æ³•æ’å…¥ã€‚</li>
<li>é«˜çº§åˆ«èŒƒå¼çš„ä¾èµ–äºä½çº§åˆ«çš„èŒƒå¼ï¼Œ1NF æ˜¯æœ€ä½çº§åˆ«çš„èŒƒå¼ã€‚<ol>
<li>ç¬¬ä¸€èŒƒå¼ (1NF)ï¼šå±æ€§ä¸å¯åˆ†ã€‚</li>
<li>ç¬¬äºŒèŒƒå¼ (2NF)ï¼šæ¯ä¸ªéä¸»å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºé”®ç ã€‚å¯ä»¥é€šè¿‡åˆ†è§£æ¥æ»¡è¶³ã€‚ï¼ˆä¸€å¼ è¡¨åˆ†è§£æˆå¤šå¼ è¡¨ï¼‰</li>
<li>ç¬¬ä¸‰èŒƒå¼ (3NF)ï¼šéä¸»å±æ€§ä¸ä¼ é€’å‡½æ•°ä¾èµ–äºé”®ç ã€‚å¯ä»¥è¿›è¡Œåˆ†è§£ã€‚</li>
</ol>
</li>
<li>å¦‚ä½•é€šä¿—åœ°ç†è§£ä¸‰ä¸ªèŒƒå¼ï¼Ÿ<br>  ç¬¬ä¸€èŒƒå¼ï¼š1NF æ˜¯å¯¹å±æ€§çš„åŸå­æ€§çº¦æŸï¼Œè¦æ±‚å±æ€§å…·æœ‰åŸå­æ€§ï¼Œä¸å¯å†åˆ†è§£ï¼›<br>  ç¬¬äºŒèŒƒå¼ï¼š2NF æ˜¯å¯¹è®°å½•çš„æƒŸä¸€æ€§çº¦æŸï¼Œè¦æ±‚è®°å½•æœ‰æƒŸä¸€æ ‡è¯†ï¼Œå³å®ä½“çš„æƒŸä¸€æ€§ï¼›<br>  ç¬¬ä¸‰èŒƒå¼ï¼š3NF æ˜¯å¯¹å­—æ®µå†—ä½™æ€§çš„çº¦æŸï¼Œå³ä»»ä½•å­—æ®µä¸èƒ½ç”±å…¶ä»–å­—æ®µæ´¾ç”Ÿå‡ºæ¥ï¼Œå®ƒè¦æ±‚å­—æ®µæ²¡æœ‰å†—ä½™ã€‚</li>
</ul>
</li>
<li><p>ä»€ä¹ˆæ˜¯åŸºæœ¬è¡¨ï¼Ÿä»€ä¹ˆæ˜¯<strong>è§†å›¾</strong>ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ<br>åŸºæœ¬è¡¨æ˜¯æœ¬èº«ç‹¬ç«‹å­˜åœ¨çš„è¡¨ï¼Œåœ¨ SQL ä¸­ä¸€ä¸ªå…³ç³»å°±å¯¹åº”ä¸€ä¸ªè¡¨ã€‚<br>è§†å›¾æœ¬èº«ä¸ç‹¬ç«‹å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ˜¯ä¸€ç§è™šæ‹Ÿçš„è¡¨ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ã€‚å¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢ï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œè§†å›¾æ˜¯ä»ä¸€ä¸ªæˆ–å‡ ä¸ªåŸºæœ¬è¡¨å¯¼å‡ºçš„è¡¨ï¼Œè§†å›¾é€šå¸¸æ˜¯æœ‰ä¸€ä¸ªè¡¨æˆ–è€…å¤šä¸ªè¡¨çš„è¡Œæˆ–åˆ—çš„å­é›†ã€‚å¯¹è§†å›¾çš„ä¿®æ”¹ä¸å½±å“åŸºæœ¬è¡¨ã€‚å®ƒä½¿å¾—æˆ‘ä»¬è·å–æ•°æ®æ›´å®¹æ˜“ï¼Œç›¸æ¯”å¤šè¡¨æŸ¥è¯¢ã€‚<br>æ¸¸æ ‡ï¼šæ˜¯å¯¹æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†ä½œä¸ºä¸€ä¸ªå•å…ƒæ¥æœ‰æ•ˆçš„å¤„ç†ã€‚æ¸¸æ ‡å¯ä»¥å®šåœ¨è¯¥å•å…ƒä¸­çš„ç‰¹å®šè¡Œï¼Œä»ç»“æœé›†çš„å½“å‰è¡Œæ£€ç´¢ä¸€è¡Œæˆ–å¤šè¡Œã€‚å¯ä»¥å¯¹ç»“æœé›†å½“å‰è¡Œåšä¿®æ”¹ã€‚ä¸€èˆ¬ä¸ä½¿ç”¨æ¸¸æ ‡ï¼Œä½†æ˜¯éœ€è¦é€æ¡å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œæ¸¸æ ‡æ˜¾å¾—ååˆ†é‡è¦ã€‚</p>
</li>
<li><p>äº‹åŠ¡ã€ã€</p>
<ul>
<li>äº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯ä¸€ç»„æ•°æ®åº“æ“ä½œï¼Œå®ƒä»¬å½¢æˆä¸€ä¸ªé€»è¾‘å·¥ä½œå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šã€‚äº‹åŠ¡çš„ç›®çš„æ˜¯ä¿è¯æ•°æ®åº“çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ï¼Œç¡®ä¿åœ¨å¤šä¸ªæ“ä½œä¸­è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œä¸ä¼šç•™ä¸‹ä¸­é—´çŠ¶æ€ã€‚</li>
<li>äº‹åŠ¡çš„ç‰¹æ€§ï¼šé€šå¸¸è¢«ç§°ä¸º <strong>ACID</strong> ç‰¹æ€§<ul>
<li><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong> äº‹åŠ¡æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ“ä½œã€‚äº‹åŠ¡çš„å„æ­¥æ“ä½œæ˜¯ä¸å¯åˆ†çš„ï¼ˆåŸå­çš„ï¼‰ï¼›è¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚</li>
<li><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong>å½“äº‹åŠ¡å®Œæˆæ—¶ï¼Œæ•°æ®å¿…é¡»å¤„äºä¸€è‡´çŠ¶æ€ã€‚</li>
<li><strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong> å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„æ‰€æœ‰å¹¶å‘äº‹åŠ¡æ˜¯å½¼æ­¤éš”ç¦»çš„ï¼Œ è¿™è¡¨æ˜äº‹åŠ¡å¿…é¡»æ˜¯ç‹¬ç«‹çš„ï¼Œå®ƒä¸åº”ä»¥ä»»ä½•æ–¹å¼ä¾èµ–äºæˆ–å½±å“å…¶ä»–äº‹åŠ¡ã€‚</li>
<li><strong>æ°¸ä¹…æ€§ï¼ˆDurabilityï¼‰</strong> äº‹åŠ¡å®Œæˆåï¼Œå®ƒå¯¹æ•°æ®åº“çš„ä¿®æ”¹è¢«æ°¸ä¹…ä¿æŒï¼Œäº‹åŠ¡æ—¥å¿—èƒ½å¤Ÿä¿æŒäº‹åŠ¡çš„æ°¸ä¹…æ€§</li>
</ul>
</li>
<li>äº‹åŠ¡çš„éš”ç¦»æ€§<ul>
<li>å¹¶å‘å¼‚å¸¸ï¼šç¬¬ä¸€ç±»ä¸¢å¤±æ›´æ–°ã€ç¬¬äºŒç±»ä¸¢å¤±æ›´æ–°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</li>
<li>éš”ç¦»çº§åˆ«ï¼šRead Uncommittedã€Read Conmittedã€Repeatable Readã€Serializable</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜?</strong><br>  åœ¨å…¸å‹çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œï¼Œç»å¸¸ä¼šæ“ä½œç›¸åŒçš„æ•°æ®æ¥å®Œæˆå„è‡ªçš„ä»»åŠ¡ï¼ˆå¤šä¸ªç”¨æˆ·å¯¹åŒä¸€æ•°æ®è¿›è¡Œæ“ä½œï¼‰ã€‚å¹¶å‘è™½ç„¶æ˜¯å¿…é¡»çš„ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹çš„é—®é¢˜ã€‚</p>
<ul>
<li>è„è¯»ï¼ˆDirty readï¼‰: å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®å¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¿™ä¸ªæ•°æ®æ˜¯è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°çš„è¿™ä¸ªæ•°æ®æ˜¯â€œè„æ•°æ®â€ï¼Œä¾æ®â€œè„æ•°æ®â€æ‰€åšçš„æ“ä½œå¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ã€‚</li>
<li>ä¸¢å¤±ä¿®æ”¹ï¼ˆLost to modifyï¼‰: æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡è¯»å–ä¸€ä¸ªæ•°æ®æ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¯¥æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­ä¿®æ”¹äº†è¿™ä¸ªæ•°æ®åï¼Œç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹äº†è¿™ä¸ªæ•°æ®ã€‚è¿™æ ·ç¬¬ä¸€ä¸ªäº‹åŠ¡å†…çš„ä¿®æ”¹ç»“æœå°±è¢«ä¸¢å¤±ï¼Œå› æ­¤ç§°ä¸ºä¸¢å¤±ä¿®ã€‚ ä¾‹å¦‚ï¼šäº‹åŠ¡1è¯»å–æŸè¡¨ä¸­çš„æ•°æ®A&#x3D;20ï¼Œäº‹åŠ¡2ä¹Ÿè¯»å–A&#x3D;20ï¼Œäº‹åŠ¡1ä¿®æ”¹A&#x3D;A-1ï¼Œäº‹åŠ¡2ä¹Ÿä¿®æ”¹A&#x3D;A-1ï¼Œæœ€ç»ˆç»“æœA&#x3D;19ï¼Œäº‹åŠ¡1çš„ä¿®æ”¹è¢«ä¸¢å¤±ã€‚</li>
<li>ä¸å¯é‡å¤è¯»ï¼ˆUnrepeatablereadï¼‰: æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»åŒä¸€æ•°æ®ã€‚åœ¨è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰ç»“æŸæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¯¥æ•°æ®ã€‚é‚£ä¹ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­çš„ä¸¤æ¬¡è¯»æ•°æ®ä¹‹é—´ï¼Œç”±äºç¬¬äºŒä¸ªäº‹åŠ¡çš„ä¿®æ”¹å¯¼è‡´ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡è¯»å–çš„æ•°æ®å¯èƒ½ä¸å¤ªä¸€æ ·ã€‚è¿™å°±å‘ç”Ÿäº†åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡è¯»åˆ°çš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„æƒ…å†µï¼Œå› æ­¤ç§°ä¸ºä¸å¯é‡å¤è¯»ã€‚</li>
<li>å¹»è¯»ï¼ˆPhantom readï¼‰: å¹»è¯»ä¸ä¸å¯é‡å¤è¯»ç±»ä¼¼ã€‚å®ƒå‘ç”Ÿåœ¨ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰è¯»å–äº†å‡ è¡Œæ•°æ®ï¼Œæ¥ç€å¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡ï¼ˆT2ï¼‰æ’å…¥äº†ä¸€äº›æ•°æ®æ—¶ã€‚åœ¨éšåçš„æŸ¥è¯¢ä¸­ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰å°±ä¼šå‘ç°å¤šäº†ä¸€äº›åŸæœ¬ä¸å­˜åœ¨çš„è®°å½•ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œæ‰€ä»¥ç§°ä¸ºå¹»è¯»ã€‚ä¸å¯é‡å¤è¯»å’Œå¹»è¯»åŒºåˆ«ï¼šä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹æ¯”å¦‚å¤šæ¬¡è¯»å–ä¸€æ¡è®°å½•å‘ç°å…¶ä¸­æŸäº›åˆ—çš„å€¼è¢«ä¿®æ”¹ï¼Œå¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢æˆ–è€…åˆ é™¤æ¯”å¦‚å¤šæ¬¡è¯»å–ä¸€æ¡è®°å½•å‘ç°è®°å½•å¢å¤šæˆ–å‡å°‘äº†</li>
</ul>
</li>
<li><p>SQL æ ‡å‡†å®šä¹‰çš„<strong>å››ä¸ªäº‹åŠ¡éš”ç¦»çº§åˆ«æœ‰å“ªäº›?</strong></p>
<ul>
<li>READ-UNCOMMITTED(è¯»å–æœªæäº¤)ï¼š æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œå¯èƒ½å¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ã€‚</li>
<li>READ-COMMITTED(è¯»å–å·²æäº¤)ï¼š å…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œå¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»å¯èƒ½å‘ç”Ÿã€‚ </li>
<li><strong>REPEATATATABLE-READ(å¯é‡å¤è¯»)<strong>ï¼š å¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡è‡ªå·±æ‰€ä¿®æ”¹ï¼Œå¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»å¯èƒ½å‘ç”Ÿï¼ˆç‰¹ç‚¹æƒ…å†µä¸‹ï¼‰ã€ã€</strong>InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ ã€å¯é‡å¤è¯»ã€‘</strong>ã€‚</li>
<li>SERIALIZABLE(å¯ä¸²è¡ŒåŒ–)ï¼šæœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä»ACIDçš„éš”ç¦»çº§åˆ«ã€‚æ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§ç”Ÿå¹²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»</li>
</ul>
</li>
<li><p>MySQLçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»ã€ã€</p>
<ul>
<li>MySQL ä¸­çš„äº‹åŠ¡éš”ç¦»çº§åˆ«é€šè¿‡ä¸åŒç±»å‹çš„é”ï¼ˆå…±äº«é”ã€æ’å®ƒé”ç­‰ï¼‰ä»¥åŠé”çš„ç²’åº¦ï¼ˆè¡Œçº§é”ã€è¡¨çº§é”ç­‰ï¼‰æ¥å®ç°å¯¹äº‹åŠ¡çš„éš”ç¦»ï¼Œä¿è¯äº†äº‹åŠ¡åœ¨å¹¶å‘ç¯å¢ƒä¸‹çš„æ­£ç¡®æ‰§è¡Œã€‚é€‰æ‹©åˆé€‚çš„äº‹åŠ¡éš”ç¦»çº§åˆ«éœ€è¦æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚å’Œæ€§èƒ½è¦æ±‚è¿›è¡Œæƒè¡¡ã€‚<ol>
<li><strong>è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰</strong>ï¼šä¸æ¶‰åŠé”çš„æœºåˆ¶ï¼Œå…è®¸äº‹åŠ¡è¯»å–å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œå¯èƒ½ä¼šå‡ºç°è„è¯»ã€‚</li>
<li><strong>è¯»æäº¤ï¼ˆRead Committedï¼‰</strong>ï¼šä½¿ç”¨å…±äº«é”ï¼ˆShared Locksï¼‰å’Œç¬æ—¶çš„æ’ä»–é”ï¼ˆExclusive Locksï¼‰æ¥å®ç°ï¼›<ul>
<li>å½“ä¸€ä¸ªäº‹åŠ¡è¯»å–æ•°æ®æ—¶ï¼Œä¼šå¯¹æ•°æ®è¿›è¡Œå…±äº«é”å®šï¼Œè¿™æ ·å…¶ä»–äº‹åŠ¡å¯ä»¥è¯»å–ç›¸åŒçš„æ•°æ®ï¼Œä½†ä¸èƒ½ä¿®æ”¹ã€‚</li>
<li>å½“ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¼šå¯¹æ•°æ®è¿›è¡Œæ’ä»–é”å®šï¼Œè¿™æ ·å…¶ä»–äº‹åŠ¡ä¸èƒ½è¯»å–ä¹Ÿä¸èƒ½ä¿®æ”¹ç›¸åŒçš„æ•°æ®ï¼Œç›´åˆ°è¯¥äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</li>
</ul>
</li>
<li><strong>å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰</strong>ï¼šä½¿ç”¨å…±äº«é”ï¼ˆShared Locksï¼‰å’ŒæŒä¹…çš„æ’ä»–é”ï¼ˆExclusive Locksï¼‰æ¥å®ç°ï¼›<ul>
<li>å½“ä¸€ä¸ªäº‹åŠ¡è¯»å–æ•°æ®æ—¶ï¼Œä¼šå¯¹æ•°æ®è¿›è¡Œå…±äº«é”å®šï¼Œè¿™æ ·å…¶ä»–äº‹åŠ¡å¯ä»¥è¯»å–ç›¸åŒçš„æ•°æ®ï¼Œä½†ä¸èƒ½ä¿®æ”¹ã€‚</li>
<li>å½“ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¼šå¯¹æ•°æ®è¿›è¡ŒæŒä¹…çš„æ’ä»–é”å®šï¼Œç›´åˆ°è¯¥äº‹åŠ¡æäº¤æˆ–å›æ»šï¼Œå…¶ä»–äº‹åŠ¡éƒ½ä¸èƒ½è¯»å–æˆ–ä¿®æ”¹ç›¸åŒçš„æ•°æ®ã€‚</li>
</ul>
</li>
<li><strong>ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</strong>ï¼š<ul>
<li>MySQL ä¼šå¯¹è¯»å–çš„æ•°æ®è¡Œå’Œå†™å…¥çš„æ•°æ®è¡Œéƒ½è¿›è¡Œï¼ˆè¡Œçº§ï¼‰æ’å®ƒé”ï¼Œç¡®ä¿äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œé¿å…äº†å¹»è¯»çš„é—®é¢˜ã€‚ <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- å¯¹æŸä¸ªæ•°æ®è¿›è¡Œè¯»å–æ—¶ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•å¯¹è¯¥æ•°æ®è¿›è¡Œå†™å…¥æˆ–è€…è¯»å–çš„æ“ä½œï¼Œç›´åˆ°è¯¥äº‹åŠ¡å®Œæˆè¯»å–æ“ä½œ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> <span class="keyword">condition</span> <span class="keyword">FOR</span> <span class="keyword">UPDATE</span>;</span><br><span class="line"><span class="comment">-- åœ¨è¿™é‡Œè¿›è¡Œè¯»å–å’Œå¤„ç†æ“ä½œ</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
<li>éš”ç¦»çº§åˆ«è¶Šä½ï¼Œé”æœºåˆ¶è¶Šä¸ä¸¥æ ¼ï¼Œäº‹åŠ¡è¯·æ±‚çš„é”è¶Šå°‘ï¼Œå¹¶å‘æ€§è¶Šé«˜ï¼Œæ€§èƒ½å¼€é”€ä¹Ÿè¶Šå°</li>
<li>InnoDB é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯REPEATATATABLE-READï¼ˆå¯é‡è¯»ï¼‰ï¼Œåœ¨ åˆ†å¸ƒå¼äº‹åŠ¡ çš„æƒ…å†µä¸‹ä¸€èˆ¬ä¼šç”¨åˆ° SERIALIZABLE(å¯ä¸²è¡ŒåŒ–) éš”ç¦»çº§åˆ«ã€‚</li>
</ul>
</li>
<li><p>MySQL æ”¯æŒäº‹åŠ¡å—ï¼Ÿ<br>åœ¨ç¼ºçœæ¨¡å¼ä¸‹ï¼ŒMySQL æ˜¯ autocommit æ¨¡å¼çš„ï¼Œæ‰€æœ‰çš„æ•°æ®åº“æ›´æ–°æ“ä½œéƒ½ä¼šå³æ—¶æäº¤ï¼Œæ‰€ä»¥ MySQL é»˜è®¤ä¸æ”¯æŒäº‹åŠ¡ã€‚<br>ä½†æ˜¯å¦‚æœä½ çš„ MySQL è¡¨ç±»å‹æ˜¯ä½¿ç”¨ InnoDB TaTables æˆ– BDB tables çš„è¯ï¼Œä½ çš„MySQL å°±å¯ä»¥ä½¿ç”¨äº‹åŠ¡å¤„ç†,åœ¨éautocommit æ¨¡å¼ä¸‹ï¼Œä½ å¿…é¡»ä½¿ç”¨ COMMIT æ¥æäº¤ä½ çš„æ›´æ”¹ï¼Œæˆ–è€…ç”¨ ROLLBACKæ¥å›æ»šä½ çš„æ›´æ”¹ã€‚</p>
</li>
<li><p>ï¼Ÿï¼Ÿï¼ŸInnodbæ˜¯å¦‚ä½•å®ç°äº‹åŠ¡çš„<br>Innodbé€šè¿‡BufferPoolï¼ŒLogBufferï¼ŒRedo Logï¼ŒundoLogæ¥å®ç°äº‹åŠ¡ï¼Œä»¥ä¸€ä¸ªupdateè¯­å¥ä¸ºä¾‹:<br>1.Innodbåœ¨æ”¶åˆ°ä¸€ä¸ªupdateè¯­å¥åï¼Œä¼šå…ˆæ ¹æ®æ¡ä»¶æ‰¾åˆ°æ•°æ®æ‰€åœ¨çš„é¡µï¼Œå¹¶å°†è¯¥é¡µç¼“å­˜åœ¨BufferPoolä¸­<br>2.æ‰§è¡Œupdateè¯­å¥ï¼Œä¿®æ”¹BufferPoolä¸­çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ä¸­çš„æ•°æ®<br>3.é’ˆå¯¹updateè¯­å¥ç”Ÿæˆä¸€ä¸ªRedo Logå¯¹è±¡ï¼Œå¹¶å­˜å…¥LogBufferä¸­<br>4.é’ˆå¯¹updateè¯­å¥ç”Ÿæˆundologæ—¥å¿—ï¼Œç”¨äºäº‹åŠ¡å›æ»š<br>5.å¦‚æœäº‹åŠ¡æäº¤ï¼Œé‚£ä¹ˆåˆ™æŠŠRedo Logå¯¹è±¡è¿›è¡ŒæŒä¹…åŒ–ï¼Œåç»­è¿˜æœ‰å…¶ä»–æœºåˆ¶å°†BufferPoolä¸­æ‰€ä¿®æ”¹çš„æ•°æ®é¡µæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­<br>6.å¦‚æœäº‹åŠ¡å›æ»šï¼Œåˆ™åˆ©ç”¨undologæ—¥å¿—è¿›è¡Œå›æ»š</p>
</li>
<li><p>innoDB å¦‚ä½•è§£å†³å¹»è¯»ï¼Ÿ<br>1ã€Mysql æœ‰å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå…¶ä¸­ InnoDB åœ¨ RRï¼ˆå¯é‡å¤è¯»ï¼‰çš„éš”ç¦»çº§åˆ«ä¸‹ï¼Œè§£å†³äº†å¹»è¯»çš„é—®é¢˜ï¼ˆåœ¨ç‰¹å®šçš„æƒ…å†µä¸‹ä¼šå‡ºç°å¹»è¯»çš„é—®é¢˜ã€‚å…·ä½“ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°å¹»è¯»å‘¢ï¼Ÿï¼Ÿï¼Ÿ<br>2ã€å¹»è¯»æ˜¯æŒ‡åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå‰åä¸¤æ¬¡æŸ¥è¯¢ç›¸åŒçš„èŒƒå›´æ—¶ï¼Œå¾—åˆ°çš„ç»“æœä¸ä¸€è‡´<br>3ã€InnoDB å¼•å…¥äº†é—´éš™é”å’Œ next-key Lock æœºåˆ¶æ¥è§£å†³å¹»è¯»é—®é¢˜ï¼Ÿï¼Ÿ</p>
</li>
<li><p>MySQL å•è¡¨ä¸ºä»€ä¹ˆä¸è¦è¶…è¿‡ 2åƒä¸‡æ¡ æ—¶æœ€ä¼˜ï¼Ÿ</p>
<ul>
<li>æŸ¥è¯¢æ€§èƒ½ï¼šéšç€æ•°æ®é‡çš„å¢åŠ ï¼ŒæŸ¥è¯¢å¯èƒ½å˜å¾—æ›´æ…¢ï¼Œç‰¹åˆ«æ˜¯åœ¨æ²¡æœ‰åˆé€‚ç´¢å¼•æ”¯æŒçš„æƒ…å†µä¸‹ã€‚å¤§è¡¨éœ€è¦æ›´å¤šçš„è®¡ç®—èµ„æºå’Œæ—¶é—´æ¥å¤„ç†æŸ¥è¯¢ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li>
<li>ç´¢å¼•å’Œç¼“å­˜ï¼šç»´æŠ¤å¤§è¡¨çš„ç´¢å¼•å’Œç¼“å­˜å¯èƒ½ä¼šå˜å¾—æ›´åŠ å›°éš¾ã€‚ç´¢å¼•çš„å¤§å°éšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ ï¼Œè¿™å¯èƒ½å¯¼è‡´ç´¢å¼•æ‰«æå˜æ…¢ï¼ŒåŒæ—¶ä¹Ÿä¼šå¢åŠ å¯¹å†…å­˜çš„éœ€æ±‚ã€‚<br>  1ã€ä¸€ä¸ªé«˜åº¦ä¸º 3 çš„ B+ æ ‘å¯ä»¥å­˜æ”¾ï¼š 1170X1170X16&#x3D;21902400 æ¡è¿™æ ·çš„è®°å½•,å³2åƒä¸‡å¤šäº›ï¼Œé€šè¿‡ä¸»é”®æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œåªéœ€è¦3æ¬¡ç£ç›˜IOè®¿é—®ï¼Œå½“è¶…å‡º2åƒä¸‡æ¡æ—¶ï¼Œç´¢å¼•æ ‘é«˜åº¦ä¸º4ã€‚<br>  2ã€mysqléƒ½æœ‰ç¼“å­˜ï¼Œæ ‘é«˜åº¦ä¸º3æ—¶ï¼Œç¬¬ä¸€å±‚å’Œç¬¬äºŒå±‚çš„æ•°æ®éƒ½åœ¨ç¼“å­˜ï¼Œé«˜åº¦ä¸º3æŸ¥è¯¢æ•ˆç‡å¾ˆå¿«ï¼Œä½†æ˜¯è¶…è¿‡é«˜åº¦4æ—¶ï¼ŒæŸ¥è¯¢æ•ˆç‡å°±æ€¥é€Ÿä¸‹é™äº†ã€‚</li>
<li>é”å’Œå¹¶å‘ï¼šåœ¨æ‰§è¡Œæ›´æ–°æˆ–åˆ é™¤æ“ä½œæ—¶ï¼Œæ•°æ®åº“å¯èƒ½éœ€è¦å¯¹è¡¨è¿›è¡Œé”å®šï¼Œä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚å¤§è¡¨çš„é”å®šå¯èƒ½ä¼šé˜»å¡å…¶ä»–æ“ä½œï¼Œå½±å“å¹¶å‘æ€§èƒ½ã€‚</li>
</ul>
</li>
<li><p>åˆ†è¡¨ã€ã€</p>
<ul>
<li>åˆ†è¡¨æ˜¯ä¸€ç§åº”å¯¹å¤§è¡¨æ•°æ®é‡çš„å¸¸è§æ–¹æ³•ã€‚é€šè¿‡å°†å¤§è¡¨æ‹†åˆ†ä¸ºå¤šä¸ªå°è¡¨ï¼ˆåˆ†åŒºï¼‰ï¼Œå¯ä»¥å‡è½»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„è´Ÿæ‹…ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½å’Œç®¡ç†æ•ˆç‡ã€‚åˆ†è¡¨å¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘æˆ–ç‰¹å®šçš„åˆ—å€¼è¿›è¡Œæ‹†åˆ†ï¼Œä¾‹å¦‚æŒ‰æ—¶é—´èŒƒå›´ã€åœ°ç†åŒºåŸŸç­‰æ–¹å¼è¿›è¡Œåˆ†åŒºã€‚</li>
<li>åœ¨è€ƒè™‘åˆ†è¡¨ä¹‹å‰ï¼Œå»ºè®®è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š<br>  ä¼˜åŒ–æŸ¥è¯¢å’Œç´¢å¼•ï¼šç¡®ä¿æ•°æ®åº“è¡¨æœ‰é€‚å½“çš„ç´¢å¼•æ¥æ”¯æŒå¸¸è§çš„æŸ¥è¯¢ï¼Œå¹¶ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ä»¥æé«˜æ€§èƒ½ã€‚<br>  é™å®šæ•°æ®çš„èŒƒå›´ï¼šåŠ¡å¿…ç¦æ­¢ä¸å¸¦ä»»ä½•é™åˆ¶æ•°æ®èŒƒå›´æ¡ä»¶çš„æŸ¥è¯¢è¯­å¥ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬å½“ç”¨æˆ·åœ¨æŸ¥è¯¢è®¢å•å†å²çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶åœ¨ä¸€ä¸ªæœˆçš„èŒƒå›´å†…ï¼›<br>  ï¼Ÿï¼Ÿï¼Ÿè¯»&#x2F;å†™åˆ†ç¦»ï¼šç»å…¸çš„æ•°æ®åº“æ‹†åˆ†æ–¹æ¡ˆï¼Œä¸»åº“è´Ÿè´£å†™ï¼Œä»åº“è´Ÿè´£è¯»ï¼›<br>  å‚ç›´å’Œæ°´å¹³åˆ†å‰²ï¼šè€ƒè™‘å°†å¤§è¡¨è¿›è¡Œå‚ç›´åˆ‡åˆ†ï¼ˆæŒ‰åˆ—æ‹†åˆ†ï¼‰æˆ–æ°´å¹³åˆ‡åˆ†ï¼ˆæŒ‰è¡Œæ‹†åˆ†ï¼‰ä»¥å‡å°‘å•ä¸ªè¡¨çš„æ•°æ®é‡ã€‚<br>  ä½¿ç”¨åˆ†åŒºï¼šé’ˆå¯¹æ•°æ®åº“æ”¯æŒçš„åˆ†åŒºåŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘æ ¹æ®ç‰¹å®šçš„æ ‡å‡†å°†è¡¨åˆ†æˆå¤šä¸ªé€»è¾‘åˆ†åŒºã€‚<br>  æ•°æ®åº“ä¼˜åŒ–ï¼šå®šæœŸæ¸…ç†æ— ç”¨æ•°æ®ã€é‡æ–°æ„å»ºç´¢å¼•ã€ä¼˜åŒ–æ•°æ®åº“é…ç½®ç­‰ï¼Œä»¥æé«˜æ•°æ®åº“çš„æ•´ä½“æ€§èƒ½ã€‚</li>
</ul>
</li>
<li><p>åˆ†åº“åˆ†è¡¨ä¹‹å,id ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿï¼Ÿï¼Ÿ<br>å› ä¸ºè¦æ˜¯åˆ†æˆå¤šä¸ªè¡¨ä¹‹åï¼Œæ¯ä¸ªè¡¨éƒ½æ˜¯ä» 1 å¼€å§‹ç´¯åŠ ï¼Œè¿™æ ·æ˜¯ä¸å¯¹çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ id æ¥æ”¯æŒã€‚ç”Ÿæˆå…¨å±€ id æœ‰ä¸‹é¢è¿™å‡ ç§æ–¹å¼ï¼š<br>UUIDï¼šä¸é€‚åˆä½œä¸ºä¸»é”®ï¼Œå› ä¸ºå¤ªé•¿äº†å¹¶ä¸”æ— åºä¸å¯è¯»ï¼ŒæŸ¥è¯¢æ•ˆç‡ä½ã€‚æ¯”è¾ƒé€‚åˆç”¨äºç”Ÿæˆå”¯ä¸€çš„åå­—çš„æ ‡ç¤ºæ¯”å¦‚æ–‡ä»¶çš„åå­—ã€‚<br>æ•°æ®åº“è‡ªå¢ id : ä¸¤å°æ•°æ®åº“åˆ†åˆ«è®¾ç½®ä¸åŒæ­¥é•¿ï¼Œç”Ÿæˆä¸é‡å¤IDçš„ç­–ç•¥æ¥å®ç°é«˜å¯ç”¨ã€‚è¿™ç§æ–¹å¼ç”Ÿæˆçš„ id æœ‰åºï¼Œä½†æ˜¯éœ€è¦ç‹¬ç«‹éƒ¨ç½²æ•°æ®åº“å®ä¾‹ï¼Œæˆæœ¬é«˜ï¼Œè¿˜ä¼šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚<br>åˆ©ç”¨ redis ç”Ÿæˆ id : æ€§èƒ½æ¯”è¾ƒå¥½ï¼Œçµæ´»æ–¹ä¾¿ï¼Œä¸ä¾èµ–äºæ•°æ®åº“ã€‚ä½†æ˜¯ï¼Œå¼•å…¥äº†æ–°çš„ç»„ä»¶é€ æˆç³»ç»Ÿæ›´åŠ å¤æ‚ï¼Œå¯ç”¨æ€§é™ä½ï¼Œç¼–ç æ›´åŠ å¤æ‚ï¼Œå¢åŠ äº†ç³»ç»Ÿæˆæœ¬ã€‚</p>
</li>
</ul>
<h3 id="Mysqlé”ã€ã€"><a href="#Mysqlé”ã€ã€" class="headerlink" title="Mysqlé”ã€ã€"></a>Mysqlé”ã€ã€</h3><ul>
<li><p>ä»€ä¹ˆæ˜¯é”ï¼Ÿ<br>ç­”ï¼šæ•°æ®åº“æ˜¯ä¸€ä¸ªå¤šç”¨æˆ·ä½¿ç”¨çš„å…±äº«èµ„æºã€‚å½“å¤šä¸ªç”¨æˆ·å¹¶å‘åœ°å­˜å–æ•°æ®æ—¶ï¼Œåœ¨æ•°æ®åº“ä¸­å°±ä¼šäº§ç”Ÿå¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜å–åŒä¸€æ•°æ®çš„æƒ…å†µã€‚è‹¥å¯¹å¹¶å‘æ“ä½œä¸åŠ æ§åˆ¶å°±å¯èƒ½ä¼šè¯»å–å’Œå­˜å‚¨ä¸æ­£ç¡®çš„æ•°æ®ï¼Œç ´åæ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚åŠ é”æ˜¯å®ç°æ•°æ®åº“å¹¶å‘æ§åˆ¶çš„ä¸€ä¸ªéå¸¸é‡è¦çš„æŠ€æœ¯ã€‚å½“äº‹åŠ¡åœ¨å¯¹æŸä¸ªæ•°æ®å¯¹è±¡è¿›è¡Œæ“ä½œå‰ï¼Œå…ˆå‘ç³»ç»Ÿå‘å‡ºè¯·æ±‚ï¼Œå¯¹å…¶åŠ é”ã€‚åŠ é”åäº‹åŠ¡å°±å¯¹è¯¥æ•°æ®å¯¹è±¡æœ‰äº†ä¸€å®šçš„æ§åˆ¶ï¼Œåœ¨è¯¥äº‹åŠ¡é‡Šæ”¾é”ä¹‹å‰ï¼Œå…¶ä»–çš„äº‹åŠ¡ä¸èƒ½å¯¹æ­¤æ•°æ®å¯¹è±¡è¿›è¡Œæ›´æ–°æ“ä½œã€‚</p>
</li>
<li><p><strong>é”çš„ç±»å‹</strong>ï¼ˆæŒ‰ç±»å‹ï¼‰</p>
<ul>
<li>æ‚²è§‚é”ï¼šæ‚²è§‚é”å°±æ˜¯åœ¨è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œä¸ºäº†ä¸è®©åˆ«äººä¿®æ”¹è‡ªå·±è¯»å–çš„æ•°æ®ï¼Œå°±ä¼šå…ˆå¯¹è‡ªå·±è¯»å–çš„æ•°æ®åŠ é”ï¼Œåªæœ‰è‡ªå·±æŠŠæ•°æ®è¯»å®Œäº†ï¼Œæ‰å…è®¸åˆ«äººä¿®æ”¹é‚£éƒ¨åˆ†æ•°æ®ï¼Œæˆ–è€…åè¿‡æ¥è¯´ï¼Œå°±æ˜¯è‡ªå·±ä¿®æ”¹æŸæ¡æ•°æ®çš„æ—¶å€™ï¼Œä¸å…è®¸åˆ«äººè¯»å–è¯¥æ•°æ®ï¼Œåªæœ‰çš„æ•´ä¸ªäº‹åŠ¡æäº¤äº†ï¼Œæ‰é‡Šæ”¾è‡ªå·±åŠ ä¸Šçš„é”ï¼Œå…è®¸å…¶ä»–ç”¨æˆ·è®¿é—®é‚£éƒ¨åˆ†æ•°æ®ã€‚<ul>
<li>æ‚²è§‚é”æ‰€è¯´çš„åŠ â€œé”â€ï¼Œå…¶å®åˆ†ä¸ºå‡ ç§é”ï¼Œåˆ†åˆ«æ˜¯ï¼š æ’å®ƒé”ï¼ˆå†™é”ï¼‰å’Œå…±äº«é”ï¼ˆè¯»é”ï¼‰ ã€‚</li>
</ul>
</li>
<li>ä¹è§‚é”ï¼šä¹è§‚é”è®¤ä¸ºä¸€ä¸ªç”¨æˆ·è¯»æ•°æ®çš„æ—¶å€™ï¼Œåˆ«äººä¸ä¼šå»å†™è‡ªå·±æ‰€è¯»çš„æ•°æ®ï¼›æ‚²è§‚é”å°±åˆšå¥½ç›¸åï¼Œè§‰å¾—è‡ªå·±è¯»æ•°æ®åº“çš„æ—¶å€™ï¼Œåˆ«äººå¯èƒ½åˆšå¥½åœ¨å†™è‡ªå·±åˆšè¯»çš„æ•°æ®ï¼Œå…¶å®å°±æ˜¯æŒä¸€ç§æ¯”è¾ƒä¿å®ˆçš„æ€åº¦ï¼›<ul>
<li>æ—¶é—´æˆ³ï¼šæ—¶é—´æˆ³å°±æ˜¯ä¸åŠ é”ï¼Œé€šè¿‡æ—¶é—´æˆ³æ¥æ§åˆ¶å¹¶å‘å‡ºç°çš„é—®é¢˜ã€‚åœ¨æ•°æ®åº“è¡¨ä¸­å•ç‹¬åŠ ä¸€åˆ—æ—¶é—´æˆ³ï¼Œæ¯”å¦‚â€œTimeStampâ€ï¼Œ æ¯æ¬¡è¯»å‡ºæ¥çš„æ—¶å€™ï¼ŒæŠŠè¯¥å­—æ®µä¹Ÿè¯»å‡ºæ¥ï¼Œå½“å†™å›å»çš„æ—¶å€™ï¼ŒæŠŠè¯¥å­—æ®µåŠ 1ï¼Œæäº¤ä¹‹å‰ ï¼Œè·Ÿæ•°æ®åº“çš„è¯¥å­—æ®µæ¯”è¾ƒä¸€æ¬¡ï¼Œå¦‚æœæ¯”æ•°æ®åº“çš„å€¼å¤§çš„è¯ï¼Œå°±å…è®¸ä¿å­˜ï¼Œå¦åˆ™ä¸å…è®¸ä¿å­˜ï¼Œè¿™ç§å¤„ç†æ–¹æ³•è™½ç„¶ä¸ä½¿ç”¨æ•°æ®åº“ç³»ç»Ÿæä¾›çš„é”æœºåˆ¶ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å¯ä»¥å¤§å¤§æé«˜æ•°æ®åº“å¤„ç†çš„å¹¶å‘é‡</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>é”çš„ç±»å‹</strong>ï¼ˆæŒ‰ç²’åº¦ï¼‰</p>
<ol>
<li>å…¨å±€é”ï¼šé”å®šæ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨ï¼ˆæ•°æ®å¤‡ä»½ï¼‰</li>
<li>è¡¨çº§é”ï¼šå¯¹å½“å‰æ“ä½œçš„æ•´å¼ è¡¨åŠ é”ï¼Œå®ƒå®ç°ç®€å•ï¼Œå¼€é”€å°ã€åŠ é”å¿«ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡é«˜ã€å¹¶å‘åº¦ä½ï¼Œä¸ä¼šå‡ºç°æ­»é”ï¼›è¢«å¤§éƒ¨åˆ† MySQL å¼•æ“æ”¯æŒã€‚æœ€å¸¸ä½¿ç”¨çš„ MYISAM ä¸ INNODB éƒ½æ”¯æŒè¡¨çº§é”å®šã€‚è¡¨çº§é”å®šåˆ†ä¸ºè¡¨å…±äº«è¯»é”ï¼ˆå…±äº«é”ï¼‰ä¸è¡¨ç‹¬å å†™é”ï¼ˆæ’ä»–é”ï¼‰ã€‚        <ul>
<li>è¡¨é”ï¼šé”ä½æ•´å¼ è¡¨ï¼Œç²’åº¦è¾ƒå¤§</li>
<li>å…ƒæ•°æ®é”ï¼šé˜²æ­¢ DML å’Œ DDL å†²çª</li>
<li>æ„å‘é”ï¼šé¿å…åŠ é”æ˜¯ä¸€è¡Œä¸€è¡ŒæŸ¥çœ‹è¡Œé”åŠ é”æƒ…å†µï¼Œè§£å†³ä¸Šè¿°ä½æ•ˆçš„é—®é¢˜<ul>
<li>æ„å‘å…±äº«é” (IS): è¡¨çº§ï¼Œå‡†å¤‡åŠ å…±äº«é”</li>
<li>æ„å‘æ’ä»–é” (Ix) : è¡¨çº§ï¼Œå‡†å¤‡åŠ æ’ä»–é”</li>
</ul>
</li>
</ul>
</li>
<li>è¡Œçº§é”ï¼šå¼€é”€å¤§ã€åŠ é”æ…¢ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ã€å¹¶å‘åº¦é«˜ï¼Œä¼šå‡ºç°æ­»é”<ul>
<li>è¡Œçº§é”æ˜¯ä¸€ç§æ’ä»–é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡ä¿®æ”¹æ­¤è¡Œï¼›åœ¨ä½¿ç”¨ä»¥ä¸‹è¯­å¥æ—¶ï¼Œ Oracle ä¼šè‡ªåŠ¨åº”ç”¨è¡Œçº§é”ï¼š<ol>
<li>INSERTã€ UPDATATEã€ DELETEã€ SELECT â€¦ FOR UPDATATE [OF columns] [WAWAIT n | NOWAWAIT];</li>
<li>SELECT â€¦ FOR UPDATATE è¯­å¥å…è®¸ç”¨æˆ·ä¸€æ¬¡é”å®šå¤šæ¡è®°å½•è¿›è¡Œæ›´æ–°</li>
<li>ä½¿ç”¨ COMMIT æˆ– ROLLBACK è¯­å¥é‡Šæ”¾é”ã€‚</li>
</ol>
</li>
<li>å…±äº«é” (s) : è¡Œçº§ï¼Œè¯»å–ä¸€è¡Œ</li>
<li>æ’ä»–é” (x) : è¡Œçº§ï¼Œæ›´æ–°ä¸€è¡Œ</li>
<li>é—´éš™é” (NK) : è¡Œçº§ï¼Œä½¿ç”¨èŒƒå›´æ¡ä»¶æ—¶</li>
</ul>
</li>
</ol>
</li>
<li><p>åŠ é”ã€ã€</p>
<ul>
<li>å¯¹èŒƒå›´å†…ä¸å­˜åœ¨çš„è®°å½•åŠ é”ã€‚ä¸€æ˜¯ä¸ºäº†é˜²æ­¢å¹»è¯»ï¼ŒäºŒæ˜¯ä¸ºäº†æ»¡è¶³æ¢å¤å’Œå¤åˆ¶çš„éœ€è¦</li>
<li>å¢åŠ è¡Œçº§é”ä¹‹å‰ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™è¡¨åŠ æ„å‘é”</li>
<li>æ‰§è¡ŒDMLè¯­å¥ï¼ˆupdateã€deleteå’Œinsertï¼‰æ—¶ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ•°æ®åŠ æ’ä»–é”</li>
<li>æ‰§è¡ŒDQLè¯­å¥æ—¶ï¼š<ul>
<li>é€šå¸¸æƒ…å†µä¸‹ï¼Œå•çº¯çš„selectä¸ä¼šåŠ é”ï¼Œå› ä¸ºInnoDBé»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼Œä½¿ç”¨MVCCæ¥é¿å…åŠ é”</li>
<li>å…±äº«é” (s) :SELECT â€¦ FROM â€¦ WHERE â€¦ LOCK IN SHARE MODE</li>
<li>æ’ä»–é” (x) :SELECT â€¦ FROM â€¦ WHERE â€¦ FOR UPDATE;</li>
<li>é—´éš™é” (NK) : ä¸Šè¿°sQé‡‡ç”¨èŒƒå›´æ¡ä»¶æ—¶ï¼ŒInnoDBå¯¹ä¸å­˜åœ¨çš„è®°å½•è‡ªåŠ¨å¢åŠ é—´éš™é”</li>
</ul>
</li>
</ul>
</li>
<li><p>æ•°æ®åº“å¹¶å‘ç­–ç•¥<br>å¹¶å‘æ§åˆ¶ä¸€èˆ¬é‡‡ç”¨ä¸‰ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ä¹è§‚é”å’Œæ‚²è§‚é”ä»¥åŠæ—¶é—´æˆ³ã€‚</p>
</li>
<li><p>ï¼Ÿï¼Ÿï¼Ÿé”çš„ä¼˜åŒ–ç­–ç•¥<br>1ã€è¯»å†™åˆ†ç¦»<br>2ã€åˆ†æ®µåŠ é”<br>3ã€å‡å°‘é”æŒæœ‰çš„æ—¶é—´<br>4.å¤šä¸ªçº¿ç¨‹å°½é‡ä»¥ç›¸åŒçš„é¡ºåºå»è·å–èµ„æºä¸èƒ½å°†é”çš„ç²’åº¦è¿‡äºç»†åŒ–ï¼Œä¸ç„¶å¯èƒ½ä¼šå‡ºç°çº¿ç¨‹çš„åŠ é”å’Œé‡Šæ”¾æ¬¡æ•°è¿‡å¤šï¼Œåè€Œæ•ˆç‡ä¸å¦‚ä¸€æ¬¡åŠ ä¸€æŠŠå¤§é”ã€‚</p>
</li>
<li><p>å­˜å‚¨è¿‡ç¨‹ã€‚ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿç”¨ä»€ä¹ˆæ¥è°ƒç”¨ï¼Ÿ<br>ä¸€ç»„ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„ SQL è¯­å¥é›†ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç»è¿‡ç¬¬ä¸€æ¬¡ç¼–è¯‘åå†æ¬¡è°ƒç”¨ä¸éœ€è¦å†æ¬¡ç¼–è¯‘ï¼Œç”¨æˆ·é€šè¿‡æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„åå­—å¹¶ç»™å‡ºå‚æ•°ï¼ˆå¦‚æœè¯¥å­˜å‚¨è¿‡ç¨‹å¸¦æœ‰å‚æ•°ï¼‰æ¥æ‰§è¡Œå®ƒã€‚å¦‚æœæŸæ¬¡æ“ä½œéœ€è¦æ‰§è¡Œå¤šæ¬¡ SQLï¼Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”å•çº¯ SQL è¯­å¥æ‰§è¡Œè¦å¿«ã€‚å­˜å‚¨è¿‡ç¨‹æ˜¯æ•°æ®åº“ä¸­çš„ä¸€ä¸ªé‡è¦å¯¹è±¡ã€‚</p>
</li>
<li><p>å­˜å‚¨è¿‡ç¨‹ä¼˜åŒ–æ€è·¯</p>
<ol>
<li>å°½é‡åˆ©ç”¨ä¸€äº› sql è¯­å¥æ¥æ›¿ä»£ä¸€äº›å°å¾ªç¯ï¼Œä¾‹å¦‚èšåˆå‡½æ•°ï¼Œæ±‚å¹³å‡å‡½æ•°ç­‰ã€‚</li>
<li>ä¸­é—´ç»“æœå­˜æ”¾äºä¸´æ—¶è¡¨ï¼ŒåŠ ç´¢å¼•ã€‚</li>
<li>å°‘ç”¨æ¸¸æ ‡ã€‚sql æ˜¯ä¸ªé›†åˆè¯­è¨€ï¼Œå¯¹äºé›†åˆè¿ç®—å…·æœ‰è¾ƒé«˜æ€§èƒ½ã€‚è€Œ cursors æ˜¯è¿‡ç¨‹è¿ç®—ã€‚æ¯”å¦‚å¯¹ä¸€ä¸ª 100 ä¸‡è¡Œçš„æ•°æ®è¿›è¡ŒæŸ¥è¯¢ã€‚æ¸¸æ ‡éœ€è¦è¯»è¡¨ 100 ä¸‡æ¬¡ï¼Œè€Œä¸ä½¿ç”¨æ¸¸æ ‡åˆ™åªéœ€è¦å°‘é‡å‡ æ¬¡è¯»å–ã€‚</li>
<li>äº‹åŠ¡è¶ŠçŸ­è¶Šå¥½ã€‚ sqlserver æ”¯æŒå¹¶å‘æ“ä½œã€‚å¦‚æœäº‹åŠ¡è¿‡å¤šè¿‡é•¿ï¼Œæˆ–è€…éš”ç¦»çº§åˆ«è¿‡é«˜ï¼Œéƒ½ä¼šé€ æˆå¹¶å‘æ“ä½œçš„é˜»å¡ï¼Œæ­»é”ã€‚å¯¼è‡´æŸ¥è¯¢ææ…¢ï¼Œcpu å ç”¨ç‡æåœ°ã€‚</li>
<li>ä½¿ç”¨ try-catch å¤„ç†é”™è¯¯å¼‚å¸¸ã€‚6. æŸ¥æ‰¾è¯­å¥å°½é‡ä¸è¦æ”¾åœ¨å¾ªç¯å†…</li>
</ol>
</li>
<li><p>SQL æ³¨å…¥ã€ã€</p>
<ul>
<li>äº§ç”Ÿçš„åŸå› ï¼šç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­ä¸æ³¨æ„è§„èŒƒä¹¦å†™ sql è¯­å¥å’Œå¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè¿‡æ»¤ï¼Œå¯¼è‡´å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡å…¨å±€å˜é‡ POST å’Œ GET æäº¤ä¸€äº› sql è¯­å¥æ­£å¸¸æ‰§è¡Œã€‚</li>
<li>ç±»å‹ï¼š1ã€æ¶æ„æ‹¼æ¥æŸ¥è¯¢ 2ã€åˆ©ç”¨æ³¨é‡Šæ‰§è¡Œéæ³•å‘½ä»¤ 3ã€ä¼ å…¥éæ³•å‚æ•° 4ã€æ·»åŠ é¢å¤–æ¡ä»¶</li>
<li>å¦‚ä½•é¿å… SQL æ³¨å…¥ï¼Ÿ<br>  1ã€è¿‡æ»¤è¾“å…¥å†…å®¹ï¼Œæ ¡éªŒå­—ç¬¦ä¸²ï¼šåœ¨æ•°æ®æäº¤åˆ°æ•°æ®åº“ä¹‹å‰ï¼Œå°±æŠŠç”¨æˆ·è¾“å…¥ä¸­çš„ä¸åˆæ³•å­—ç¬¦å‰”é™¤æ‰ã€‚<br>  2ã€å‚æ•°åŒ–æŸ¥è¯¢ï¼šå‚æ•°åŒ–æŸ¥è¯¢ç›®å‰è¢«è§†ä½œæ˜¯é¢„é˜² SQL æ³¨å…¥æ”»å‡»æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚æŒ‡åœ¨è®¾è®¡ä¸æ•°æ®åº“è¿æ¥å¹¶è®¿é—®æ•°æ®æ—¶ï¼Œåœ¨éœ€è¦å¡«å…¥æ•°å€¼æˆ–æ•°æ®çš„åœ°æ–¹ï¼Œä½¿ç”¨å‚æ•°ï¼ˆParameterï¼‰æ¥ç»™å€¼ã€‚</li>
</ul>
</li>
<li><p>MVCC æœºåˆ¶ã€ã€ï¼Ÿï¼Ÿï¼Ÿ</p>
<ul>
<li>MVCCï¼ˆMulti-Version Concurrency Controlï¼‰å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œâ½¤äºç®¡ç†å¤šä¸ªäº‹åŠ¡åŒæ—¶è®¿é—®å’Œä¿®æ”¹æ•°æ®åº“çš„æ•°æ®ï¼Œâ½½ä¸ä¼šå¯¼è‡´æ•°æ®ä¸â¼€è‡´æˆ–å†²çªã€‚MVCCçš„æ ¸â¼¼æ€æƒ³æ˜¯æ¯ä¸ªäº‹åŠ¡åœ¨æ•°æ®åº“ä¸­çœ‹åˆ°çš„æ•°æ®ç‰ˆæœ¬æ˜¯äº‹åŠ¡å¼€å§‹æ—¶çš„â¼€ä¸ªå¿«ç…§ï¼Œâ½½ä¸æ˜¯å®é™…çš„æœ€æ–°ç‰ˆæœ¬ã€‚è¿™ä½¿å¾—å¤šä¸ªäº‹åŠ¡å¯ä»¥å¹¶å‘æ‰§â¾ï¼Œâ½½ä¸ä¼šäº’ç›¸â¼²æ‰°ã€‚<br>  MySQLçš„éš”ç¦»æ€§å¯ä»¥é€šè¿‡é”å’ŒMVCCæ¥å®ç°ï¼ŒMVCCé€‚åˆåœ¨â¼€äº›é”æ€§èƒ½è¾ƒä¸ºå·®çš„æƒ…å†µä¸‹ä½¿â½¤ï¼Œæâ¾¼æ•ˆç‡ã€‚</li>
<li>å¦‚ä½•å®ç°ï¼šæ¯â¼€ä¸ª UndoLog â½‡å¿—ä¸­éƒ½æœ‰â¼€ä¸ª roll_pointer ï¼ˆå›æ»šæŒ‡é’ˆï¼‰â½¤äºæŒ‡å‘ä¸Šâ¼€ä¸ªç‰ˆæœ¬çš„ Undo Log ã€‚è¿™æ ·å¯¹äºæ¯â¼€æ¡è®°å½•å°±ä¼šæ„æˆâ¼€ä¸ªç‰ˆæœ¬é“¾ï¼Œâ½¤äºè®°å½•æ‰€æœ‰çš„ä¿®æ”¹ï¼Œæ¯â¼€æ¬¡è¿›â¾æ–°çš„ä¿®æ”¹åï¼Œæ–°çš„ Undo Log ä¼šæ”¾åœ¨ç‰ˆæœ¬é“¾çš„å¤´éƒ¨ã€‚</li>
<li>åœ¨æˆ‘ä»¬è¿›â¾æŸ¥è¯¢çš„æ—¶å€™åº”è¯¥æŸ¥è¯¢å“ªä¸ªç‰ˆæœ¬å‘¢ï¼Ÿè¿™æ—¶å€™å°±å¯ä»¥é€šè¿‡ ReadView æ¥å®ç°ã€‚åœ¨äº‹åŠ¡SELECTæŸ¥è¯¢æ•°æ®æ—¶ï¼Œå°±ä¼šæ„é€ â¼€ä¸ª ReadView ï¼Œå®ƒåŒ…å«äº†ç‰ˆæœ¬é“¾çš„ç»Ÿè®¡ä¿¡æ¯ï¼š<br>  m_ids å½“å‰æ´»è·ƒçš„æ‰€æœ‰äº‹åŠ¡idï¼ˆæ‰€æœ‰æœªæäº¤çš„äº‹åŠ¡ï¼‰<br>  min_trx_id ç‰ˆæœ¬é“¾å°¾çš„id<br>  max_trx_id ä¸‹â¼€ä¸ªå°†è¦åˆ†é…çš„äº‹åŠ¡idï¼ˆç‰ˆæœ¬é“¾å¤´äº‹åŠ¡id+1ï¼‰<br>  creator_trx_id åˆ›å»ºè¿™ä¸ªReadViewçš„äº‹åŠ¡çš„id æŸ¥è¯¢è§„åˆ™ï¼š<br>  è¯¥ç‰ˆæœ¬æ˜¯å¦ä¸ºå½“å‰äº‹åŠ¡åˆ›å»ºï¼ˆè¯»å–â¾ƒâ¼°ä¿®æ”¹çš„æ•°æ®ï¼‰ï¼Œå¦‚æœæ˜¯å°±è¿”å›ï¼Œå¦åˆ™è¿›â¼Šä¸‹â¼€ä¸ªåˆ¤æ–­<br>  è¯¥ç‰ˆæœ¬çš„äº‹åŠ¡idæ˜¯å¦â¼©äºmin_trx_idï¼ˆåœ¨ReadViewåˆ›å»ºä¹‹å‰ï¼Œæ•°æ®å·²ç»æäº¤ï¼‰ï¼Œå¯ä»¥ç›´æ¥è®¿é—®<br>  è¯¥ç‰ˆæœ¬çš„äº‹åŠ¡idæ˜¯å¦â¼¤äºmax_trx_idï¼ˆåœ¨ReadViewåˆ›å»ºåï¼Œè¯¥ç‰ˆæœ¬æ‰å¼€å¯ï¼‰ï¼Œä¸èƒ½è¢«è®¿é—®<br>  è¯¥ç‰ˆæœ¬äº‹åŠ¡idåœ¨[min_trx_id, max_trx_id]ä¹‹é—´ï¼Œåˆ™åˆ¤æ–­å½“å‰ç‰ˆæœ¬äº‹åŠ¡idæ˜¯å¦åœ¨m_idsä¸­ï¼Œå¦‚æœä¸åœ¨ï¼Œè¯´æ˜äº‹åŠ¡å·²ç»æäº¤å¯ä»¥è®¿é—®ï¼Œå¦åˆ™ä¸èƒ½è®¿é—®ã€‚</li>
<li>å¯¹ MVCC çš„ç†è§£ã€‚<ul>
<li>å¯¹äº MVCC çš„ç†è§£ï¼Œæˆ‘è§‰å¾—å¯ä»¥å…ˆä»æ•°æ®åº“çš„ä¸‰ç§å¹¶å‘åœºæ™¯è¯´èµ·ï¼š<br>  ç¬¬ä¸€ç§ï¼šè¯»è¯»å°±æ˜¯çº¿ç¨‹ A ä¸çº¿ç¨‹ B åŒæ—¶åœ¨è¿›è¡Œè¯»æ“ä½œï¼Œè¿™ç§æƒ…å†µä¸‹ä¸ä¼šå‡ºç°ä»»ä½•å¹¶å‘é—®é¢˜ã€‚<br>  ç¬¬äºŒç§ï¼šè¯»å†™å°±æ˜¯çº¿ç¨‹ A ä¸çº¿ç¨‹ B åœ¨åŒä¸€æ—¶åˆ»åˆ†åˆ«è¿›è¡Œè¯»å’Œå†™æ“ä½œã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®é€ æˆä»¥ä¸‹é—®é¢˜ï¼šäº‹ç‰©éš”ç¦»æ€§é—®é¢˜ï¼Œå‡ºç°è„è¯»ï¼Œå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»çš„é—®é¢˜<br>  ç¬¬ä¸‰ç§ï¼šå†™å†™å°±æ˜¯çº¿ç¨‹ A ä¸çº¿ç¨‹ B åŒæ—¶è¿›è¡Œå†™æ“ä½œã€‚è¿™ç§æƒ…å†µä¸‹å¯èƒ½ä¼šå­˜åœ¨æ•°æ®æ›´æ–°ä¸¢å¤±çš„é—®é¢˜ã€‚è€Œ MVCC å°±æ˜¯ä¸ºäº†è§£å†³äº‹åŠ¡æ“ä½œä¸­å¹¶å‘å®‰å…¨æ€§é—®é¢˜çš„æ— é”å¹¶å‘æ§åˆ¶æŠ€æœ¯å…¨ç§°ä¸ºMulti-Version Concurrency Control ï¼Œä¹Ÿå°±æ˜¯å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚å®ƒæ˜¯é€šè¿‡æ•°æ®åº“è®°å½•ä¸­çš„éšå¼å­—æ®µï¼Œundo æ—¥å¿— ï¼ŒRead View æ¥å®ç°çš„ã€‚</li>
<li>MVCC ä¸»è¦è§£å†³äº†ä¸‰ä¸ªé—®é¢˜<br>  ç¬¬ä¸€ä¸ªï¼šé€šè¿‡ MVCC å¯ä»¥è§£å†³è¯»å†™å¹¶å‘é˜»å¡é—®é¢˜ä»è€Œæå‡æ•°æ®å¹¶å‘å¤„ç†èƒ½åŠ›<br>  ç¬¬äºŒä¸ªï¼šMVCC é‡‡ç”¨äº†ä¹è§‚é”çš„æ–¹å¼å®ç°ï¼Œé™ä½äº†æ­»é”çš„æ¦‚ç‡<br>  ç¬¬ä¸‰ä¸ªï¼šè§£å†³äº†ä¸€è‡´æ€§è¯»çš„é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯äº‹åŠ¡å¯åŠ¨æ—¶æ ¹æ®æŸä¸ªæ¡ä»¶è¯»å–åˆ°çš„æ•°æ®ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ—¶ï¼Œå†æ¬¡æ‰§è¡Œç›¸åŒæ¡ä»¶ï¼Œè¿˜æ˜¯è¯»åˆ°åŒä¸€ä»½æ•°æ®ï¼Œä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚è€Œæˆ‘ä»¬åœ¨ä½¿ç”¨ MVCC æ—¶ä¸€èˆ¬ä¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥é€‰æ‹©ç»„åˆæ­é…ä¹è§‚é”æˆ–æ‚²è§‚é”ã€‚è¿™ä¸¤ä¸ªç»„åˆä¸­ï¼ŒMVCC ç”¨æ¥è§£å†³è¯»å†™å†²çªï¼Œä¹è§‚é”æˆ–è€…æ‚²è§‚é”è§£å†³å†™å†™å†²çªä»è€Œæœ€å¤§ç¨‹åº¦çš„æé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ã€‚ä»¥ä¸Šå°±æ˜¯æˆ‘çš„å¯¹ MVCC çš„ç†è§£ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>Mysqlæ—¥å¿—</p>
<ul>
<li>binlog(å½’æ¡£â½‡å¿—) æ˜¯ Server å±‚â½£æˆçš„â½‡å¿—ï¼Œä¸»è¦â½¤äºæ•°æ®å¤‡ä»½ï¼ˆå®•æœºåçš„æ¢å¤å·¥ä½œï¼‰å’Œä¸»ä»å¤åˆ¶, è§£å†³æ•°æ®åº“å’Œç¼“å­˜ä¹‹é—´ä¸€è‡´æ€§å¯ä»¥ç”¨canalï¼Ÿï¼Ÿç»„ä»¶å»ç›‘å¬binlog</li>
<li>redolog æ˜¯ Innodb ç‰©ç†â½‡å¿—ï¼Œè®°å½•äº†æŸä¸ªæ•°æ®â»šåšäº†ä»€ä¹ˆä¿®æ”¹ï¼Œæ¯å½“æ‰§â¾â¼€ä¸ªäº‹åŠ¡å°±ä¼šäº§â½£â¼€æ¡æˆ–è€…å¤šæ¡ç‰©ç†â½‡å¿—ã€‚<br>  å¦‚æœå‘é€å®•æœºï¼Œå¯¹è¯»å–åˆ°å†…å­˜ä¸­çš„bufferpoolä¸­çš„æ•°æ®æ²¡æœ‰åŒæ­¥åˆ°ç¡¬ç›˜mysqlä¸­ï¼Œä½¿ç”¨redologæ¥åŒæ­¥ï¼Œä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li>
<li>undolog æ˜¯ Innodb é€»è¾‘â½‡å¿—ï¼Œç”¨äºè®°å½•æ•°æ®ä¿®æ”¹å‰çš„ä¿¡æ¯ï¼ˆè®°å½•å¯¹æ•°æ®åº“æ“ä½œçš„é€†æ“ä½œï¼Œäº‹åŠ¡å›æ»šæ—¶é€†æ“ä½œæ¢å¤åŸæ•°æ®ï¼‰æ¯”å¦‚æˆ‘ä»¬åˆ é™¤ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨undologæ—¥å¿—æ–‡ä»¶ä¸­æ–°å¢ä¸€æ¡deleteè¯­å¥ï¼› å®ç°äº†äº‹åŠ¡ä¸­çš„åŸâ¼¦æ€§ï¼Œä¸»è¦â½¤äºäº‹åŠ¡å›æ»šå’ŒMVCCã€‚</li>
<li>relaylog ä¸­ç»§â½‡å¿—ï¼Œâ½¤äºä¸»ä»å¤åˆ¶åœºæ™¯ä¸‹ï¼Œ slave é€šè¿‡ioçº¿ç¨‹æ‹·â»‰masterçš„ binlog åæœ¬åœ°â½£æˆçš„â½‡å¿—</li>
</ul>
</li>
<li><p>å½“MySQLçš„æ—¥å¿—ç©ºé—´ä¸è¶³æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹å½±å“ï¼š</p>
<ol>
<li>å†™å…¥æ“ä½œï¼š æ—¥å¿—ï¼ˆä¾‹å¦‚äºŒè¿›åˆ¶æ—¥å¿—å’Œäº‹åŠ¡æ—¥å¿—ï¼‰æ˜¯ç”¨æ¥è®°å½•æ•°æ®åº“çš„å†™å…¥æ“ä½œçš„ï¼Œå¦‚æœæ—¥å¿—ç©ºé—´ä¸è¶³ï¼Œæ•°æ®åº“å¯èƒ½æ— æ³•æ­£å¸¸å†™å…¥äº‹åŠ¡æ—¥å¿—ï¼Œå¯¼è‡´äº‹åŠ¡æ— æ³•æäº¤ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´å†™å…¥æ“ä½œè¢«é˜»å¡æˆ–å¤±è´¥ã€‚</li>
<li>æŸ¥è¯¢æ“ä½œï¼š æŸ¥è¯¢æ“ä½œé€šå¸¸ä¸ç›´æ¥å—åˆ°æ—¥å¿—ç©ºé—´ä¸è¶³çš„å½±å“ã€‚ç„¶è€Œï¼Œå¦‚æœå†™å…¥æ“ä½œå› ä¸ºæ—¥å¿—ç©ºé—´ä¸è¶³è€Œå—é˜»ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸ¥è¯¢æ“ä½œå› ä¸ºç­‰å¾…äº‹åŠ¡å®Œæˆè€Œå˜æ…¢ã€‚</li>
<li>å¤‡ä»½æ“ä½œï¼š å¤‡ä»½é€šå¸¸ä¼šæ¶‰åŠåˆ°æ•°æ®åº“çš„æ—¥å¿—æ–‡ä»¶ã€‚å¦‚æœæ—¥å¿—ç©ºé—´ä¸è¶³ï¼Œå¯èƒ½ä¼šå½±å“å¤‡ä»½çš„æ­£å¸¸æ‰§è¡Œã€‚å¤‡ä»½é€šå¸¸éœ€è¦ç¡®ä¿æ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œè€Œäº‹åŠ¡æ—¥å¿—åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ˜¯è‡³å…³é‡è¦çš„ã€‚</li>
</ol>
</li>
<li><p>MySQL æ•°æ®åº“ä½œå‘å¸ƒç³»ç»Ÿçš„å­˜å‚¨ï¼Œä¸€å¤©äº”ä¸‡æ¡ä»¥ä¸Šçš„å¢é‡ï¼Œé¢„è®¡è¿ç»´ä¸‰å¹´ï¼Œæ€ä¹ˆä¼˜åŒ–ï¼Ÿ<br>1ã€è®¾è®¡è‰¯å¥½çš„æ•°æ®åº“ç»“æ„ï¼Œå…è®¸éƒ¨åˆ†æ•°æ®å†—ä½™ï¼Œå°½é‡é¿å… join æŸ¥è¯¢ï¼Œæé«˜æ•ˆç‡ã€‚<br>2ã€é€‰æ‹©åˆé€‚çš„è¡¨å­—æ®µæ•°æ®ç±»å‹å’Œå­˜å‚¨å¼•æ“ï¼Œé€‚å½“çš„æ·»åŠ ç´¢å¼•ã€‚<br>3ã€MySQL åº“ä¸»ä»è¯»å†™åˆ†ç¦»ã€‚<br>4ã€æ‰¾è§„å¾‹åˆ†è¡¨ï¼Œå‡å°‘å•è¡¨ä¸­çš„æ•°æ®é‡æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚<br>5ã€æ·»åŠ ç¼“å­˜æœºåˆ¶ï¼Œæ¯”å¦‚ memcachedï¼Œapc ç­‰ã€‚<br>6ã€ä¸ç»å¸¸æ”¹åŠ¨çš„é¡µé¢ï¼Œç”Ÿæˆé™æ€é¡µé¢ã€‚<br>7ã€ä¹¦å†™é«˜æ•ˆç‡çš„ SQLã€‚æ¯”å¦‚ SELECT * FROM TATABEL æ”¹ä¸º SELECT field_1,field_2, field_3 FROM TATABLE.</p>
</li>
<li><p>æ•°æ®åº“å¦‚ä½•å¤„ç†å¤§æ•°æ®é‡ï¼Ÿ</p>
<ul>
<li>åˆ†åŒºï¼šä¸€ä»½æ•°æ®æ–‡ä»¶æ‹†åˆ†å¤šä¸ªç£ç›˜æ–‡ä»¶å­˜å‚¨ï¼Œéš”ç¦»æ•°æ®è®¿é—®ã€‚ç›¸å½“äºåšäº†è´Ÿè½½å‡è¡¡ã€‚</li>
<li>æ°´å¹³åˆ†åº“&#x2F;è¡¨ï¼Œå„ä¸ªåº“å’Œè¡¨çš„ç»“æ„ä¸€æ¨¡ä¸€æ ·ã€‚<br>  å‚ç›´åˆ†åº“&#x2F;è¡¨ï¼Œå„ä¸ªåº“å’Œè¡¨çš„ç»“æ„ä¸ä¸€æ ·ã€‚</li>
<li>è¯»å†™åˆ†ç¦»ï¼šä¸»æœºè´Ÿè´£å†™ï¼Œä»æœºè´Ÿè´£è¯»ã€‚</li>
</ul>
</li>
<li><p>MySQLä¸»ä»ã€ã€</p>
<ul>
<li>ä¸»æ˜¯ä¸»åº“çš„æ„æ€ï¼Œä»æ˜¯ä»åº“çš„æ„æ€ã€‚æ•°æ®åº“ä¸»åº“å¯¹å¤–æä¾›è¯»å†™çš„æ“ä½œï¼Œä»åº“å¯¹å¤–æä¾›è¯»çš„æ“ä½œã€‚</li>
<li>æ•°æ®åº“ä¸ºä»€ä¹ˆéœ€è¦ä¸»ä»æ¶æ„å‘¢?<ul>
<li>é«˜å¯ç”¨ï¼Œå®æ—¶ç¾å¤‡ï¼Œç”¨äºæ•…éšœåˆ‡æ¢ã€‚æ¯”å¦‚ä¸»åº“æŒ‚äº†ï¼Œå¯ä»¥åˆ‡ä»åº“ã€‚</li>
<li>è¯»å†™åˆ†ç¦»ï¼Œæä¾›æŸ¥è¯¢æœåŠ¡ï¼Œå‡å°‘ä¸»åº“å‹åŠ›ï¼Œæå‡æ€§èƒ½</li>
<li>å¤‡ä»½æ•°æ®ï¼Œé¿å…å½±å“ä¸šåŠ¡ã€‚</li>
</ul>
</li>
<li>ä¸»ä»å¤åˆ¶åŸç†ï¼Œç®€è¨€ä¹‹ï¼Œåˆ†ä¸‰æ­¥æ›²è¿›è¡Œ:<ul>
<li>ä¸»æ•°æ®åº“æœ‰ä¸ª <code>bin 1og</code> äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œçºªå½•äº†æ‰€æœ‰å¢åˆ æ”¹ sQLè¯­å¥ã€‚(binlogçº¿ç¨‹)</li>
<li>ä»æ•°æ®åº“æŠŠä¸»æ•°æ®åº“çš„ <code>bin 1og</code> æ–‡ä»¶çš„ sQL è¯­å¥å¤åˆ¶åˆ°è‡ªå·±çš„ä¸­ç»§æ—¥å¿— <code>relay 1og</code> (ioçº¿ç¨‹)</li>
<li>ä»æ•°æ®åº“çš„ <code>relay 1og</code> é‡åšæ—¥å¿—æ–‡ä»¶ï¼Œå†æ‰§è¡Œä¸€æ¬¡è¿™äº›sqlè¯­å¥ã€‚(Sqlæ‰§è¡Œçº¿ç¨‹)</li>
</ul>
</li>
<li>æ€ä¹ˆä¿è¯ä¸»ä»ä¸€è‡´ï¼Ÿ<br>  æˆ‘ä»¬å­¦ä¹ æ•°æ®åº“çš„ä¸»ä»å¤åˆ¶åŸç†åï¼Œäº†è§£åˆ°ä»åº“æ‹¿åˆ°å¹¶æ‰§è¡Œä¸»åº“çš„binlogæ—¥å¿—ï¼Œå°±å¯ä»¥ä¿æŒæ•°æ®ä¸ä¸»åº“ä¸€è‡´äº†ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢?å“ªäº›æƒ…å†µä¼šå¯¼è‡´ä¸ä¸€è‡´å‘¢?<ul>
<li>1 é•¿é“¾æ¥<br>  ä¸»åº“å’Œä»åº“åœ¨åŒæ­¥æ•°æ®çš„è¿‡ç¨‹ä¸­æ–­æ€ä¹ˆåŠå‘¢ï¼Œæ•°æ®ä¸å°±ä¼šä¸¢å¤±äº†å˜›ã€‚å› æ­¤ä¸»åº“ä¸ä»åº“ä¹‹é—´ç»´æŒäº†ä¸€ä¸ªé•¿é“¾æ¥ï¼Œä¸»åº“å†…éƒ¨æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸“é—¨æœåŠ¡äºä»åº“çš„è¿™ä¸ªé•¿é“¾æ¥çš„ã€‚</li>
<li>2 bintogæ ¼å¼<br>  binlog æ—¥å¿—æœ‰ä¸‰ç§æ ¼å¼ï¼Œåˆ†åˆ«æ˜¯statementï¼Œrowå’Œmixedã€‚<br>  å¦‚æœæ˜¯ statement æ ¼å¼ï¼Œbinlogè®°å½•çš„æ˜¯SQLçš„åŸæ–‡ï¼Œå¦‚æœä¸»åº“å’Œä»åº“é€‰çš„ç´¢å¼•ä¸ä¸€è‡´ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸»åº“ä¸ä¸€è‡´ã€‚<br>  å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå¯ä»¥æŠŠbinlogæ ¼å¼ä¿®æ”¹ä¸º rowã€‚row æ ¼å¼çš„ binlog æ—¥å¿—ï¼Œè®°å½•çš„ä¸æ˜¯SQLåŸæ–‡ï¼Œè€Œæ˜¯ä¸¤ä¸ª event:Table_map å’Œ Delete_rows ã€‚Table_map eventè¯´æ˜è¦æ“ä½œçš„è¡¨ï¼ŒDelete_rows eventç”¨äºå®šä¹‰è¦åˆ é™¤çš„è¡Œä¸º:è®°å½•åˆ é™¤çš„å…·ä½“è¡Œæ•°ã€‚row æ ¼å¼çš„binlogè®°å½•çš„å°±æ˜¯è¦åˆ é™¤çš„ä¸»é”®IDä¿¡æ¯,å› æ­¤ä¸ä¼šå‡ºç°ä¸»ä»ä¸ä¸€è‡´çš„é—®é¢˜ã€‚<br>  ä½†æ˜¯å¦‚æœSQLåˆ é™¤10ä¸‡è¡Œæ•°æ®ï¼Œä½¿ç”¨rowæ ¼å¼å°±ä¼šå¾ˆå ç©ºé—´çš„ï¼Œ10ä¸‡æ¡æ•°æ®éƒ½åœ¨binlogé‡Œé¢å†™binlogçš„æ—¶å€™ä¹Ÿå¾ˆè€—I0ã€‚ä½†æ˜¯ statement æ ¼å¼çš„binlogå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œå› æ­¤è®¾è®¡MySQLçš„å¤§å”æƒ³äº†ä¸€ä¸ªæŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œ mixed æ ¼å¼çš„binlogã€‚æ‰€è°“çš„mixedæ ¼å¼å…¶å®å°±æ˜¯ row å’Œstatement æ ¼å¼æ··åˆä½¿ç”¨ï¼Œå½“MySQLåˆ¤æ–­å¯èƒ½æ•°æ®ä¸ä¸€è‡´æ—¶ï¼Œå°±ç”¨row æ ¼å¼ï¼Œå¦åˆ™ä½¿ç”¨å°±ç”¨statement æ ¼å¼ã€‚</li>
</ul>
</li>
<li>ä¸»ä»å»¶è¿Ÿã€ã€</li>
<li>é«˜å¯ç”¨æ–¹æ¡ˆ<ul>
<li>åŒæœºä¸»å¤‡ï¼šä¸¤å°æœºå™¨Aå’ŒBï¼ŒAä¸ºä¸»åº“ï¼Œè´Ÿè´£è¯»å†™ï¼ŒBä¸ºå¤‡åº“ï¼Œåªå¤‡ä»½æ•°æ®ã€‚å¦‚æœAåº“å‘ç”Ÿæ•…éšœï¼ŒBåº“æˆä¸ºä¸»åº“è´Ÿè´£è¯»å†™ã€‚ä¿®å¤æ•…éšœåï¼ŒAæˆä¸ºå¤‡åº“ï¼Œä¸»åº“BåŒæ­¥æ•°æ®åˆ°å¤‡åº“A</li>
<li>ä¸€ä¸»ä¸€ä»ï¼šä¸¤å°æœºå™¨Aå’ŒBï¼ŒAä¸ºä¸»åº“ï¼Œè´Ÿè´£è¯»å†™ï¼ŒBä¸ºä»åº“ï¼Œè´Ÿè´£è¯»æ•°æ®ã€‚å¦‚æœAåº“å‘ç”Ÿæ•…éšœï¼ŒBåº“æˆä¸ºä¸»åº“è´Ÿè´£è¯»å†™ã€‚ä¿®å¤æ•…éšœåï¼ŒAæˆä¸ºä»åº“ï¼Œä¸»åº“BåŒæ­¥æ•°æ®åˆ°ä»åº“A</li>
<li>ä¸€ä¸»å¤šä»ï¼šå¤šä¸ªä»åº“æ”¯æŒè¯»ï¼Œåˆ†æ‹…äº†ä¸»åº“çš„å‹åŠ›ï¼Œæ˜æ˜¾æå‡äº†è¯»çš„å¹¶å‘åº¦ã€‚ä½†åªæœ‰å°ä¸»æœºå†™ï¼Œå› æ­¤å†™çš„å¹¶å‘åº¦ä¸é«˜</li>
<li>MariaDBåŒæ­¥å¤šä¸»æœºï¼šæœ‰ä»£ç†å±‚å®ç°è´Ÿè½½å‡è¡¡ï¼Œå¤šä¸ªæ•°æ®åº“å¯ä»¥åŒæ—¶è¿›è¡Œè¯»å†™æ“ä½œï¼›å„ä¸ªæ•°æ®åº“ä¹‹é—´å¯ä»¥é€šè¿‡ Galera Replication æ–¹æ³•è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œæ¯ä¸ªåº“ç†è®ºä¸Šæ•°æ®æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚æ•°æ®åº“ä¸æ”¯æŒè¿‡å¤§ã€‚</li>
<li>æ•°æ®åº“ä¸­é—´ä»¶ï¼šmycatåˆ†ç‰‡å­˜å‚¨ï¼Œæ¯ä¸ªåˆ†ç‰‡é…ç½®ä¸€ä¸»å¤šä»çš„é›†ç¾¤ã€‚ä¼˜ç‚¹:è§£å†³é«˜å¹¶å‘é«˜æ•°æ®é‡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼›ç¼ºç‚¹:ç»´æŠ¤æˆæœ¬æ¯”è¾ƒå¤§ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>

<h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><ul>
<li><p>ä»€ä¹ˆæ˜¯ Mybatisï¼Ÿ<br>1ã€Mybatis æ˜¯ä¸€ä¸ªå¼€æºçš„<strong>JavaæŒä¹…å±‚æ¡†æ¶</strong>ï¼ŒåŠ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒå†…éƒ¨å°è£…äº†  JDBCï¼Œå¼€å‘æ—¶åªéœ€è¦å…³æ³¨ SQL è¯­å¥æœ¬èº«ï¼Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»å¤„ç†åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»ºstatement ç­‰ç¹æ‚çš„è¿‡ç¨‹ã€‚ç¨‹åºå‘˜ç›´æ¥ç¼–å†™åŸç”Ÿæ€ sqlï¼Œå¯ä»¥ä¸¥æ ¼æ§åˆ¶ sql æ‰§è¡Œæ€§èƒ½ï¼Œçµæ´»åº¦é«˜ã€‚ï¼ˆJDBCï¼ˆJava Database Connectivityï¼‰æ˜¯ Java è¯­è¨€ç”¨äºä¸å…³ç³»å‹æ•°æ®åº“è¿›è¡Œäº¤äº’çš„ä¸€ç§æ ‡å‡†æ¥å£ã€‚JDBC æä¾›äº†ä¸€ç»„ Java APIï¼Œå…è®¸å¼€å‘è€…é€šè¿‡ Java ä»£ç æ¥æ‰§è¡Œ SQL æŸ¥è¯¢ã€æ›´æ–°æ•°æ®åº“ã€ä»¥åŠå¤„ç†æ•°æ®åº“äº‹åŠ¡ç­‰æ“ä½œã€‚ï¼‰<br>2ã€MyBatis å¯ä»¥ä½¿ç”¨ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°† POJO æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ï¼Œé¿å…äº†å‡ ä¹æ‰€æœ‰çš„  JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚<br>3ã€é€šè¿‡ xml æ–‡ä»¶æˆ–æ³¨è§£çš„æ–¹å¼å°†è¦æ‰§è¡Œçš„å„ç§ statement é…ç½®èµ·æ¥ï¼Œå¹¶é€šè¿‡ java å¯¹è±¡å’Œ statement ä¸­ sql çš„åŠ¨æ€å‚æ•°è¿›è¡Œæ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„ sql è¯­å¥ï¼Œæœ€åç”± mybatis æ¡†æ¶æ‰§è¡Œ sql å¹¶å°†ç»“æœæ˜ å°„ä¸º  java å¯¹è±¡å¹¶è¿”å›ã€‚ï¼ˆä»æ‰§è¡Œ sql åˆ°è¿”å› result çš„è¿‡ç¨‹ï¼‰ã€‚</p>
</li>
<li><p>ORMï¼ŒDAOï¼ŒæŒä¹…å±‚ï¼Ÿ<br>ORM å’Œ DAO æ˜¯æŒä¹…å±‚çš„å®ç°æ–¹å¼ï¼ŒORM å’Œ DAO é€šå¸¸ä¸€èµ·ååŒå·¥ä½œï¼Œä»¥å®ç°æ•°æ®çš„æŒä¹…åŒ–å’Œè®¿é—®ã€‚æŒä¹…å±‚åŒ…æ‹¬äº†ä½¿ç”¨ ORM æ¡†æ¶è¿›è¡Œå¯¹è±¡å’Œæ•°æ®åº“æ˜ å°„çš„æ–¹å¼ï¼Œä»¥åŠä½¿ç”¨ DAO è®¾è®¡æ¨¡å¼å°è£…æ•°æ®è®¿é—®æ“ä½œçš„æ–¹å¼ã€‚DAO æä¾›äº†æ•°æ®è®¿é—®çš„é€šç”¨æ¥å£ï¼Œä¸šåŠ¡é€»è¾‘å±‚é€šè¿‡ DAO æ¥è¿›è¡Œæ•°æ®è®¿é—®ï¼Œä»è€Œå®ç°äº†æŒä¹…å±‚çš„è§£è€¦ã€‚</p>
</li>
<li><p>ä¸€èˆ¬ JDBC æ‰§è¡Œ SQL æŸ¥è¯¢æˆ–æ›´æ–°æ“ä½œçš„æµç¨‹æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. åŠ è½½æ•°æ®åº“é©±åŠ¨</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>); </span><br><span class="line"><span class="comment">//2. å»ºç«‹æ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/xx&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;password&quot;</span>);</span><br><span class="line"><span class="comment">//3. åˆ›å»º Statement æˆ– PreparedStatement å¯¹è±¡</span></span><br><span class="line"><span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line"><span class="comment">//4. æ‰§è¡Œ SQL è¯­å¥</span></span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(<span class="string">&quot;SELECT * FROM yy&quot;</span>);</span><br><span class="line"><span class="comment">//5. å¤„ç†ç»“æœé›†ï¼ˆå¦‚æœæœ‰ï¼‰</span></span><br><span class="line"><span class="keyword">while</span> (resultSet.next()) &#123; <span class="comment">// å¤„ç†æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//6. å…³é—­èµ„æºï¼šæ–¹æ³•å…³é—­ ResultSetã€Statement å’Œ Connection å¯¹è±¡ï¼Œé‡Šæ”¾æ•°æ®åº“è¿æ¥å’Œèµ„æºã€‚</span></span><br><span class="line">resultSet.close();</span><br><span class="line">statement.close();</span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure>
</li>
<li><p>Mybatisæ‰§è¡Œæµç¨‹<img src="https://leo710aka.github.io/bk/job13.png" width="750" height="300" alt=""></p>
</li>
</ul>
<ol>
<li>åŠ è½½é…ç½®æ–‡ä»¶ï¼šMyBatis é¦–å…ˆä¼šåŠ è½½é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ XML æ ¼å¼çš„ï¼‰ï¼Œè¯¥é…ç½®æ–‡ä»¶åŒ…å«äº†æ•°æ®æºä¿¡æ¯ã€SQL æ˜ å°„æ–‡ä»¶çš„ä½ç½®ã€å…¨å±€é…ç½®ç­‰ã€‚</li>
<li>è§£æé…ç½®æ–‡ä»¶ï¼šMyBatis ä¼šè§£æåŠ è½½çš„é…ç½®æ–‡ä»¶ï¼Œå°†é…ç½®ä¿¡æ¯å­˜å‚¨åœ¨ç›¸åº”çš„é…ç½®å¯¹è±¡ä¸­ï¼Œæ¯”å¦‚æ•°æ®æºå¯¹è±¡ã€å…¨å±€é…ç½®å¯¹è±¡ã€SQL æ˜ å°„é…ç½®å¯¹è±¡ç­‰ã€‚</li>
<li>åˆ›å»º SqlSessionFactoryï¼šæ ¹æ®è§£æå¾—åˆ°çš„é…ç½®ä¿¡æ¯ï¼ŒMyBatis åˆ›å»ºä¸€ä¸ª SqlSessionFactory å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å·¥å‚ç±»ï¼Œç”¨äºåˆ›å»º SqlSession å¯¹è±¡ã€‚</li>
<li>åˆ›å»º SqlSessionï¼šé€šè¿‡ SqlSessionFactory åˆ›å»º SqlSession å¯¹è±¡ï¼ŒSqlSession æä¾›äº†æ‰§è¡Œ SQL æ“ä½œçš„æ–¹æ³•ï¼Œæ¯”å¦‚æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°ç­‰ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰è‡ªå·±çš„ SqlSession å®ä¾‹ï¼ŒSqlSession ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤é€šå¸¸åœ¨æ–¹æ³•å†…éƒ¨åˆ›å»ºå’Œå…³é—­ã€‚</li>
<li>è§£æ Mapper æ–‡ä»¶ï¼šåœ¨æ‰§è¡Œ SQL æ“ä½œä¹‹å‰ï¼ŒMyBatis ä¼šè§£æ Mapper æ–‡ä»¶ï¼ŒMapper æ–‡ä»¶ä¸­å®šä¹‰äº† SQL è¯­å¥çš„æ˜ å°„å…³ç³»ï¼ŒåŒ…æ‹¬ SQL è¯­å¥ã€å‚æ•°æ˜ å°„ã€ç»“æœæ˜ å°„ç­‰ã€‚</li>
<li>æ‰§è¡Œ SQL æ“ä½œï¼šé€šè¿‡ SqlSession æ‰§è¡Œ SQL æ“ä½œï¼ŒMyBatis æä¾›äº†å¤šç§æ–¹æ³•æ¥æ‰§è¡Œ SQLï¼Œæ¯”å¦‚ selectOneã€selectListã€insertã€updateã€delete ç­‰ã€‚</li>
<li>æ˜ å°„ç»“æœï¼šæ‰§è¡Œ SQL æ“ä½œåï¼ŒMyBatis å°†ç»“æœæ˜ å°„ä¸º Java å¯¹è±¡ï¼Œæ ¹æ® Mapper æ–‡ä»¶ä¸­çš„é…ç½®å°†æŸ¥è¯¢ç»“æœæ˜ å°„ä¸º Java å¯¹è±¡ï¼Œå¹¶è¿”å›ç»™è°ƒç”¨è€…ã€‚</li>
<li>å…³é—­èµ„æºï¼šåœ¨å®Œæˆæ‰€æœ‰æ“ä½œåï¼Œéœ€è¦å…³é—­ SqlSessionï¼Œé‡Šæ”¾æ•°æ®åº“è¿æ¥å’Œå…¶ä»–èµ„æºï¼Œä»¥é¿å…èµ„æºæ³„éœ²å’Œæ€§èƒ½é—®é¢˜ã€‚</li>
</ol>
<ul>
<li><p>Mybatisçš„ä¼˜ç¼ºç‚¹ï¼Œé€‚ç”¨åœºåˆã€‚</p>
<ul>
<li>ä¼˜ç‚¹:<br>  1.åŸºäº SQL ç¼–ç¨‹ï¼Œç›¸å½“çµæ´»ï¼Œä¸ä¼šå¯¹åº”ç”¨ç¨‹åºæˆ–è€…æ•°æ®åº“çš„ç°æœ‰è®¾è®¡æˆä»»ä½•å½±å“ï¼ŒSQL å†™åœ¨ XML é‡Œï¼Œè§£é™¤ sql ä¸ç¨‹åºä»£ç çš„è€¦åˆï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†ï¼›æä¾›XMLæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€ SQL è¯­å¥ï¼Œå¹¶å¯é‡ç”¨ã€‚<br>  2.ä¸ JDBC ç›¸æ¯”ï¼Œå‡å°‘äº† 50%ä»¥ä¸Šçš„ä»£ç é‡ï¼Œæ¶ˆé™¤äº†JDBC å¤§é‡å‡ ä½™çš„ä»£ç ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¼€å…³è¿æ¥;<br>  3.å¾ˆå¥½çš„ä¸å„ç§æ•°æ®åº“å…¼å®¹(å› ä¸º Myatis ä½¿ç”¨JDBC æ¥è¿æ¥æ•°æ®åº“ï¼Œæ‰€ä»¥åªè¦ JDBC æ”¯æŒçš„æ•°æ®åº“ MyBatis éƒ½æ”¯æŒ)ã€‚<br>  4.èƒ½å¤Ÿä¸Spring å¾ˆå¥½çš„é›†æˆ;<br>  5.æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ ORM å­—æ®µå…³ç³»æ˜ å°„;æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„ä»¶ç»´æŠ¤ã€‚</li>
<li>ç¼ºç‚¹:<br>  1.SQL è¯­å¥çš„ç¼–å†™å·¥ä½œé‡è¾ƒå¤§ï¼Œå°¤å…¶å½“å­—æ®µå¤šã€å…³è”è¡¨å¤šæ—¶ï¼Œå¯¹å¼€å‘äººå‘˜ç¼–å†™SQL è¯­å¥çš„åŠŸåº•æœ‰ä¸€å®šè¦æ±‚.<br>  2.SQL è¯­å¥ä¾èµ–äºæ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“ç§»æ¤æ€§å·®ï¼Œä¸èƒ½éšæ„æ›´æ¢æ•°æ®åº“ã€‚</li>
<li>MyBatis æ¡†æ¶é€‚ç”¨åœºåˆ<br>  1ã€MyBatis ä¸“æ³¨äº SQL æœ¬èº«ï¼Œæ˜¯ä¸€ä¸ªè¶³å¤Ÿçµæ´»çš„ DAO å±‚è§£å†³æ–¹æ¡ˆã€‚<br>  2ã€å¯¹æ€§èƒ½çš„è¦æ±‚å¾ˆé«˜ï¼Œæˆ–è€…éœ€æ±‚å˜åŒ–è¾ƒå¤šçš„é¡¹ç›®ï¼Œå¦‚äº’è”ç½‘é¡¹ç›®ï¼ŒMyBatis å°†æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</li>
</ul>
</li>
<li><p><strong>#{} ä¸ ${} çš„åŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>ä¸¤ç§å ä½ç¬¦ï¼Œéƒ½æ˜¯å®ç°åŠ¨æ€sqlçš„æ–¹å¼ï¼Œå¯ä»¥æŠŠå‚æ•°ä¼ é€’åˆ°xmlä¸­ï¼Œæ‰§è¡Œæ“ä½œå‰ï¼Œmybatisä¼šå¯¹è¿™ä¸¤ä¸ªå ä½ç¬¦è¿›è¡ŒåŠ¨æ€è§£æ<ol>
<li><code>#&#123;&#125;</code>ï¼ˆé¢„ç¼–è¯‘ï¼‰ï¼š<code>#&#123;&#125;</code> æ˜¯ MyBatis çš„é¢„å¤„ç†è¯­æ³•ï¼Œä¼šåœ¨ SQL ä¸­ä½¿ç”¨å ä½ç¬¦ <code>?</code> çš„å½¢å¼ï¼Œé€šè¿‡é¢„ç¼–è¯‘çš„æ–¹å¼æ¥å¤„ç†å‚æ•°ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ã€‚ä½¿ç”¨ <code>#&#123;&#125;</code> æ—¶ï¼ŒMyBatis ä¼šå°†ä¼ å…¥çš„å‚æ•°å€¼è½¬ä¹‰å¹¶è¿›è¡Œé¢„ç¼–è¯‘ï¼ŒåŒæ—¶ä¼šæ ¹æ®å‚æ•°çš„ç±»å‹å†³å®šä½¿ç”¨ä¸åŒçš„ JDBC ç±»å‹ã€‚è¿™ç§æ–¹å¼å¯ä»¥ç¡®ä¿ SQL çš„å®‰å…¨æ€§ã€‚</li>
<li><code>$&#123;&#125;</code>ï¼ˆæ‹¼æ¥å­—ç¬¦ä¸²ï¼‰ï¼š<code>$&#123;&#125;</code> æ˜¯ MyBatis çš„å­—ç¬¦ä¸²æ›¿æ¢è¯­æ³•ï¼Œä¼šç›´æ¥å°†ä¼ å…¥çš„å‚æ•°å€¼ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ‹¼æ¥åˆ° SQL è¯­å¥ä¸­ã€‚ä½¿ç”¨ <code>$&#123;&#125;</code> æ—¶ï¼Œéœ€è¦æ³¨æ„æ½œåœ¨çš„ SQL æ³¨å…¥é£é™©ï¼Œå› ä¸ºå‚æ•°å€¼ä¼šç›´æ¥æ›¿æ¢åˆ° SQL è¯­å¥ä¸­ï¼Œä¸ä¼šè¿›è¡Œé¢„ç¼–è¯‘ã€‚</li>
</ol>
</li>
<li>#{} é€‚ç”¨äºå‚æ•°å€¼ï¼Œé˜²æ­¢ SQL æ³¨å…¥ï¼Œç”¨äºé¢„ç¼–è¯‘ã€‚${} é€‚ç”¨äºéå‚æ•°å€¼ï¼Œç›´æ¥å°†å‚æ•°å€¼æ‹¼æ¥åˆ° SQL è¯­å¥ä¸­ã€‚</li>
<li>åœ¨å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨ #{} æ¥å¤„ç†å‚æ•°ï¼Œä»¥ä¿éšœ SQL çš„å®‰å…¨æ€§ã€‚${} çš„ä½¿ç”¨åº”è°¨æ…ï¼Œå°½é‡é¿å…ç›´æ¥å°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ç”¨äº <code>$&#123;&#125;</code> å½¢å¼çš„å‚æ•°ã€‚</li>
</ul>
</li>
<li><p>å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·ï¼Œæ€ä¹ˆåŠ ï¼Ÿ</p>
<ol>
<li>ä½¿ç”¨æ³¨è§£æ˜ å°„ï¼šORM æ¡†æ¶ï¼ˆå¦‚ Hibernateï¼‰æä¾›äº†æ³¨è§£ï¼ˆå¦‚ @Columnï¼‰æ¥æ˜ å°„å®ä½“ç±»å±æ€§å’Œæ•°æ®åº“è¡¨å­—æ®µä¹‹é—´çš„å…³ç³»ã€‚<br>  å¯ä»¥åœ¨å®ä½“ç±»çš„å±æ€§ä¸Šä½¿ç”¨æ³¨è§£ï¼ŒæŒ‡å®šå±æ€§ä¸è¡¨å­—æ®µçš„æ˜ å°„å…³ç³»  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;my_table&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEntity</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;column_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// other fields and methods</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  ä¼˜ç‚¹ï¼šçµæ´»ï¼Œå¯ä»¥é€šè¿‡æ³¨è§£ç›´æ¥åœ¨å®ä½“ç±»ä¸­å®šä¹‰æ˜ å°„å…³ç³»ï¼Œä¸éœ€è¦ä¿®æ”¹æ•°æ®åº“è¡¨ç»“æ„ã€‚<br>  ç¼ºç‚¹ï¼šå¦‚æœæ•°æ®åº“è¡¨ç»“æ„å·²ç»å­˜åœ¨ï¼Œéœ€è¦åœ¨å®ä½“ç±»ä¸­æ·»åŠ æ³¨è§£è¿›è¡Œæ˜ å°„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»£ç ä¸­å‡ºç°å¤§é‡æ³¨è§£ã€‚</li>
<li>é€šè¿‡åœ¨æŸ¥è¯¢çš„ sql è¯­å¥ä¸­å®šä¹‰å­—æ®µåçš„åˆ«åï¼Œè®©å­—æ®µåçš„åˆ«åå’Œå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="keyword">select</span> id<span class="operator">=</span>â€selectorderâ€ parametertype<span class="operator">=</span>â€<span class="type">int</span>â€ resultetype<span class="operator">=</span>â€me.gacl.domain.orderâ€<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> order_id id, order_no orderno ,order_price price form orders <span class="keyword">where</span> order_id<span class="operator">=</span>#&#123;id&#125;;</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">select</span><span class="operator">&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>é€šè¿‡ resultMap æ˜ å°„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åçš„ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="keyword">select</span> id<span class="operator">=</span>&quot;getOrder&quot; parameterType<span class="operator">=</span>&quot;int&quot; resultMap<span class="operator">=</span>&quot;orderresultmap&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> orders <span class="keyword">where</span> order_id<span class="operator">=</span>#&#123;id&#125;</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">select</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span>resultMap type<span class="operator">=</span>â€me.gacl.domain.orderâ€ id<span class="operator">=</span>â€orderresultmapâ€<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">!</span>â€“ç”¨ id å±æ€§æ¥æ˜ å°„ä¸»é”®å­—æ®µâ€“<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>id property<span class="operator">=</span>â€idâ€ <span class="keyword">column</span><span class="operator">=</span>â€order_idâ€<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">!</span>â€“ç”¨ <span class="keyword">result</span> å±æ€§æ¥æ˜ å°„éä¸»é”®å­—æ®µï¼Œproperty ä¸ºå®ä½“ç±»å±æ€§åï¼Œ<span class="keyword">column</span>ä¸ºæ•°æ®è¡¨ä¸­çš„å±æ€§â€“<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property <span class="operator">=</span> â€œordernoâ€ <span class="keyword">column</span> <span class="operator">=</span>â€order_noâ€<span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span><span class="keyword">result</span> property<span class="operator">=</span>â€priceâ€ <span class="keyword">column</span><span class="operator">=</span>â€order_priceâ€ <span class="operator">/</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>reslutMap<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
  ä¼˜ç‚¹ï¼šå°†æ˜ å°„å…³ç³»ä»ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½¿å¾—é…ç½®æ›´åŠ çµæ´»ã€‚<br>  ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–çš„é…ç½®æ–‡ä»¶ï¼Œå¢åŠ äº†ç»´æŠ¤æˆæœ¬ã€‚</li>
</ol>
</li>
<li><p>???é€šå¸¸ä¸€ä¸ª Xml æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª Dao æ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ª Dao æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ<br>Dao æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼ŸDao æ¥å£å³ Mapper æ¥å£ã€‚æ¥å£çš„å…¨é™åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­çš„ namespace çš„å€¼ï¼›æ¥å£çš„æ–¹æ³•åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­ Mapper çš„ Statementçš„ id å€¼ï¼›æ¥å£æ–¹æ³•å†…çš„å‚æ•°ï¼Œå°±æ˜¯ä¼ é€’ç»™ sql çš„å‚æ•°ã€‚Mapper æ¥å£æ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ï¼Œæ¥å£å…¨é™å+æ–¹æ³•åæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œå¯å”¯ä¸€å®šä½ä¸€ä¸ª MapperStatementã€‚åœ¨ Mybatis ä¸­ï¼Œæ¯ä¸€ä¸ª<br>ï¼Œï¼Œã€ã€</p>
</li>
<li><p>Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>å»¶è¿ŸåŠ è½½çš„æ„æ€æ˜¯ï¼šå°±æ˜¯åœ¨éœ€è¦ç”¨åˆ°æ•°æ®æ—¶æ‰è¿›è¡ŒåŠ è½½ï¼Œä¸éœ€è¦ç”¨åˆ°æ•°æ®æ—¶å°±ä¸åŠ è½½æ•°æ®ã€‚Mybatisæ”¯æŒä¸€å¯¹ä¸€å…³è”å¯¹è±¡å’Œä¸€å¯¹å¤šå…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½<br>  åœ¨Mybatisé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨å»¶è¿ŸåŠ è½½lazyLoadingEnabled&#x3D;truelfalseï¼Œé»˜è®¤æ˜¯å…³é—­çš„</li>
<li>å»¶è¿ŸåŠ è½½çš„åº•å±‚åŸç†<br>  1.ä½¿ç”¨ CGLIB åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡<br>  2.å½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨invokeæ–¹æ³•ï¼Œå‘ç°ç›®æ ‡æ–¹æ³•æ˜¯nullå€¼ï¼Œæ‰§è¡ŒsqlæŸ¥è¯¢<br>  3.è·å–æ•°æ®ä»¥åï¼Œè°ƒç”¨setæ–¹æ³•è®¾ç½®å±æ€§å€¼ï¼Œå†ç»§ç»­æŸ¥è¯¢ç›®æ ‡æ–¹æ³•ï¼Œå°±æœ‰å€¼äº†</li>
</ul>
</li>
<li><p>Mybatis çš„ä¸€çº§ã€äºŒçº§ç¼“å­˜</p>
<ul>
<li>ä¸€çº§ç¼“å­˜: åŸºäº PerpetualCache çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Sessionï¼Œå½“ Session flush æˆ– close ä¹‹åï¼Œè¯¥ Session ä¸­çš„æ‰€æœ‰ Cache å°±å°†æ¸…ç©ºï¼Œé»˜è®¤æ‰“å¼€ä¸€çº§ç¼“å­˜ã€‚</li>
<li>äºŒçº§ç¼“å­˜ä¸ä¸€çº§ç¼“å­˜å…¶æœºåˆ¶ç›¸åŒï¼Œé»˜è®¤ä¹Ÿæ˜¯é‡‡ç”¨ PerpetualCacheï¼ŒHashMapå­˜å‚¨ï¼Œä¸åŒåœ¨äºå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Mapper(Namespace)ï¼Œå¹¶ä¸”å¯è‡ªå®šä¹‰å­˜å‚¨æºï¼Œå¦‚ Ehcacheã€‚é»˜è®¤ä¸æ‰“å¼€äºŒçº§ç¼“å­˜ï¼Œè¦å¼€å¯äºŒçº§ç¼“å­˜ï¼Œä½¿ç”¨äºŒçº§ç¼“å­˜å±æ€§ç±»éœ€è¦å®ç° Serializable åºåˆ—åŒ–æ¥å£(å¯ç”¨æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€),å¯åœ¨å®ƒçš„æ˜ å°„æ–‡ä»¶ä¸­é…ç½® ï¼› </li>
<li>å¯¹äºç¼“å­˜æ•°æ®æ›´æ–°æœºåˆ¶ï¼Œå½“æŸä¸€ä¸ªä½œç”¨åŸŸ(ä¸€çº§ç¼“å­˜ Session&#x2F;äºŒçº§ç¼“å­˜Namespaces)çš„è¿›è¡Œäº† C&#x2F;U&#x2F;D æ“ä½œåï¼Œé»˜è®¤è¯¥ä½œç”¨åŸŸä¸‹æ‰€æœ‰ select ä¸­çš„ç¼“å­˜å°†è¢« clearã€‚</li>
</ul>
</li>
<li><p>Mybatisæ˜¯æ€ä¹ˆåˆ†é¡µçš„ï¼Ÿ</p>
<ul>
<li>é€»è¾‘åˆ†é¡µï¼šå…ˆæŸ¥å‡ºæ•°æ®ï¼Œå¦‚ä½•è‡ªå·±ç¼–å†™é€»è¾‘å®ç°åˆ†é¡µï¼›</li>
<li>ç‰©ç†åˆ†é¡µï¼šä½¿ç”¨mysqlæä¾›çš„åˆ†é¡µå…³é”®è¯limit</li>
<li>Mybatisæä¾›äº† 3 ç§åˆ†é¡µæ–¹å¼ï¼š<ol>
<li>mybatis mapperé…ç½®æ–‡ä»¶å†™åˆ†é¡µsqlï¼Œç›´æ¥åœ¨selectè¯­å¥é‡Œé¢åŠ limit</li>
<li>ï¼Ÿï¼Ÿä½¿ç”¨mybatisæä¾›çš„RowBoundså¯¹è±¡ï¼Œå®ç°å†…å­˜çº§çš„åˆ†é¡µ</li>
<li>ï¼Ÿï¼ŸåŸºäºmybatisä¸­çš„Interceptoræ‹¦æˆªå™¨ï¼Œåœ¨selectè¯­å¥æ‰§è¡Œä¹‹å‰åŠ¨æ€æ‹¼æ¥åˆ†é¡µå…³é”®å­—</li>
</ol>
</li>
</ul>
</li>
<li><p>åƒä¸‡çº§æ•°æ®é‡ï¼Œåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ã€ã€<br>ä¸è¦ select * from Table limit 90000, 10<br>è€Œå…ˆ select id from Table limit 90000, 10ï¼Œå†æ ¹æ® select * from Table where id &#x3D; id</p>
</li>
</ul>
<hr>


<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><ul>
<li><p>ä»€ä¹ˆæ˜¯ Redis?</p>
<ul>
<li>Redis æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆ BSD åè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ key-value æ•°æ®åº“ã€‚ Redisæ˜¯ä¸€ç§NoSQLã€‚<br>  NoSQLï¼ˆNot Only SQLï¼‰æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨å’Œæ£€ç´¢éç»“æ„åŒ–æˆ–åŠç»“æ„åŒ–æ•°æ®çš„æ•°æ®åº“ç³»ç»Ÿï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š<br>  1ã€é”®å€¼å­˜å‚¨æ•°æ®åº“ï¼ˆKey-Value Storesï¼‰åŒ…æ‹¬Redisã€Amazon DynamoDBå’ŒRiakã€‚<br>  2ã€æ–‡æ¡£å‹æ•°æ®åº“ï¼šå­˜å‚¨çš„æ˜¯ç±»ä¼¼äºJSONæˆ–XMLæ ¼å¼çš„æ–‡æ¡£ï¼Œå¯ä»¥ä½¿ç”¨é”®æ¥æ£€ç´¢ã€‚ç¤ºä¾‹åŒ…æ‹¬MongoDBå’ŒCouchbaseã€‚<br>  3ã€å›¾å½¢æ•°æ®åº“ï¼šä»¥å›¾å½¢ç»“æ„å­˜å‚¨æ•°æ®ï¼Œç”¨äºå¤„ç†å¤æ‚çš„å…³ç³»å’Œè¿æ¥ã€‚ç¤ºä¾‹åŒ…æ‹¬Neo4jå’ŒAmazon Neptuneã€‚<br>  4ã€æœç´¢å¼•æ“ï¼šæœç´¢å¼•æ“å…è®¸ç”¨æˆ·é€šè¿‡å…³é”®å­—æœç´¢æ–‡æœ¬æ•°æ®ã€‚ç¤ºä¾‹åŒ…æ‹¬Elasticsearchå’ŒApache Solrã€‚</li>
<li>Redis ä¸å…¶ä»– key-value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š<br>  Redis æ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚<br>  Redis ä¸ä»…ä»…æ”¯æŒç®€å•çš„ key-value ç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾› listï¼Œsetï¼Œzsetï¼Œhash ç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚<br>  Redis æ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³ master-slave æ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li>
<li>Redis ä¼˜åŠ¿<br>  æ€§èƒ½æé«˜ï¼›Redis èƒ½è¯»çš„é€Ÿåº¦æ˜¯ 110000 æ¬¡&#x2F;s,å†™çš„é€Ÿåº¦æ˜¯ 81000 æ¬¡&#x2F;s ã€‚<br>  ä¸°å¯Œçš„æ•°æ®ç±»å‹,Redis æ”¯æŒäºŒè¿›åˆ¶æ¡ˆä¾‹çš„ Strings, Lists, Hashes,Sets åŠOrdered Sets æ•°æ®ç±»å‹æ“ä½œã€‚<br>  åŸå­:Redis çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ„æ€å°±æ˜¯è¦ä¹ˆæˆåŠŸæ‰§è¡Œè¦ä¹ˆå¤±è´¥å®Œå…¨ä¸æ‰§è¡Œã€‚é€šè¿‡ MULTI å’Œ EXECæŒ‡ä»¤åŒ…èµ·æ¥ã€‚<br>  ä¸°å¯Œçš„ç‰¹æ€§ â€“ Redis è¿˜æ”¯æŒ publish&#x2F;subscribe, é€šçŸ¥, key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚</li>
</ul>
</li>
<li><p>ä¸ºä»€ä¹ˆè¦ç”¨Redisï¼Ÿ<br>æ— è®ºRedisã€MySQLã€HDFSã€HBaseéƒ½æ˜¯å­˜å‚¨æ•°æ®çš„åœ°æ–¹ï¼Œå› ä¸ºè®¾è®¡ç†å¿µçš„ä¸åŒï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ä¸åŒçš„åº”ç”¨åœºæ™¯ä½¿ç”¨ä¸åŒçš„å­˜å‚¨ã€‚åƒRedisä¸€èˆ¬æˆ‘ä»¬ä¼šæŠŠå®ƒç”¨ä½œäºç¼“å­˜ï¼ˆå½“ç„¶ï¼Œæ—¥å¸¸æœ‰çš„åº”ç”¨åœºæ™¯æ¯”è¾ƒç®€å•ï¼Œç”¨ä¸ªHashMapä¹Ÿèƒ½è§£å†³å¾ˆå¤šçš„é—®é¢˜äº†<br>1ã€é«˜æ€§èƒ½ï¼šé¦–å…ˆï¼Œå®ƒæ˜¯çº¯å†…å­˜æ“ä½œï¼Œå†…å­˜æœ¬èº«å°±å¾ˆå¿«ã€‚å…¶æ¬¡ï¼Œå®ƒæ˜¯å•çº¿ç¨‹çš„ï¼ŒRedisæœåŠ¡å™¨æ ¸å¿ƒæ˜¯åŸºäºéé˜»å¡çš„IOå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œå•çº¿ç¨‹é¿å…äº†å¤šçº¿ç¨‹çš„é¢‘ç¹ä¸Šä¸‹æ–‡åˆ‡æ¢é—®é¢˜<br>2ã€é«˜å¯é ï¼šä¸»ä»å¤åˆ¶ï¼Œå“¨å…µæœºåˆ¶<br>3ã€é«˜æ‹“å±•ï¼šæ•°æ®å‘ç‰‡ï¼Œè´Ÿè½½å‡è¡¡</p>
</li>
<li><p><strong>Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ</strong></p>
<ol>
<li>Redis çš„å¤§éƒ¨åˆ†æ“ä½œéƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œå¹¶ä¸”é‡‡ç”¨äº†é«˜æ•ˆçš„æ•°æ®ç»“æ„(å‹ç¼©è¡¨ã€è·³è·ƒè¡¨ç­‰æ–¹å¼é™ä½äº†æ—¶é—´å¤æ‚è¯»ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¸åŒæ—¶é—´å¤æ‚åº¦çš„æ•°æ®ç±»å‹)ï¼Œå› æ­¤ Redis ç“¶é¢ˆå¯èƒ½æ˜¯æœºå™¨çš„å†…å­˜æˆ–è€…ç½‘ç»œå¸¦å®½ï¼Œè€Œå¹¶é CPUï¼Œæ—¢ç„¶ CPU ä¸æ˜¯ç“¶é¢ˆï¼Œé‚£ä¹ˆè‡ªç„¶å°±é‡‡ç”¨å•çº¿ç¨‹çš„è§£å†³æ–¹æ¡ˆäº†;</li>
<li>Redis é‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹å¯ä»¥é¿å…äº†å¤šçº¿ç¨‹ä¹‹é—´çš„ç«äº‰ï¼Œçœå»äº†å¤šçº¿ç¨‹åˆ‡æ¢çš„æ—¶é—´å’Œæ€§èƒ½ä¸Šçš„å¼€é”€ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šå¯¼è‡´æ­»é”é—®é¢˜ï¼›</li>
<li>Redis é‡‡ç”¨äº† I&#x2F;0 å¤šè·¯å¤ç”¨æœºåˆ¶å¤„ç†å¤§é‡çš„å®¢æˆ·ç«¯ Socket è¯·æ±‚ï¼ŒI0 å¤šè·¯å¤ç”¨æœºåˆ¶æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªI0æµï¼Œå°±æ˜¯æˆ‘ä»¬ç»å¸¸å¬åˆ°çš„ select&#x2F;epoll æœºåˆ¶ã€‚ç®€å•æ¥è¯´ï¼Œåœ¨ Redis åªè¿è¡Œå•çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œè¯¥æœºåˆ¶å…è®¸å†…æ ¸ä¸­ï¼ŒåŒæ—¶å­˜åœ¨å¤šä¸ªç›‘å¬ Socket å’Œå·²è¿æ¥ Socket.å†…æ ¸ä¼šä¸€ç›´ç›‘å¬è¿™äº› Socket ä¸Šçš„è¿æ¥è¯·æ±‚æˆ–æ•°æ®è¯·æ±‚ã€‚ä¸€æ—¦æœ‰è¯·æ±‚åˆ°è¾¾ï¼Œå°±ä¼šäº¤ç»™ Redisçº¿ç¨‹å¤„ç†ï¼Œè¿™å°±å®ç°äº†ä¸€ä¸ª Redis çº¿ç¨‹å¤„ç†å¤šä¸ª IO æµçš„æ•ˆæœã€‚</li>
<li>Redisæ”¯æŒä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€å“ˆå¸Œã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆç­‰ï¼Œæ¯ç§æ•°æ®ç»“æ„éƒ½é’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯è¿›è¡Œäº†ä¼˜åŒ–ï¼Œèƒ½å¤Ÿæ›´é«˜æ•ˆåœ°å¤„ç†å„ç§æ•°æ®æ“ä½œã€‚</li>
</ol>
</li>
<li><p>Redis æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹çš„ï¼Ÿ<br>Redis æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹çš„ï¼Œredis åˆ©ç”¨é˜Ÿåˆ—æŠ€æœ¯å°†å¹¶å‘è®¿é—®å˜ä¸ºä¸²è¡Œè®¿é—®ï¼Œæ¶ˆé™¤äº†ä¼ ç»Ÿæ•°æ®åº“ä¸²è¡Œæ§åˆ¶çš„å¼€é”€ã€‚ </p>
</li>
<li><p>Redisç½‘ç»œå¤šè·¯I&#x2F;Oå¤ç”¨ï¼Ÿï¼Ÿ</p>
<ul>
<li>å¤šè·¯å¤ç”¨æ˜¯ä¸€ç§æé«˜ I&#x2F;O æ•ˆç‡çš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ I&#x2F;O äº‹ä»¶ï¼Œå¹¶ä¸”åœ¨æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ç«‹å³é€šçŸ¥åº”ç”¨ç¨‹åºï¼Œä»è€Œé¿å…äº†è½®è¯¢çš„å¼€é”€ã€‚åœ¨ Redis ä¸­ï¼Œç½‘ç»œ I&#x2F;O å¤šè·¯å¤ç”¨ä¸»è¦æ¶‰åŠåˆ°å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´çš„é€šä¿¡ï¼Œä½¿ç”¨ç±»ä¼¼ epoll çš„äº‹ä»¶é©±åŠ¨æœºåˆ¶æ¥å¤„ç†ç½‘ç»œ I&#x2F;O å¤šè·¯å¤ç”¨ï¼Œé€šè¿‡ç›‘å¬å¥—æ¥å­—ä¸Šçš„äº‹ä»¶å¹¶é‡‡ç”¨éé˜»å¡ I&#x2F;O æ¨¡å¼ï¼Œå®ç°äº†é«˜æ•ˆçš„ç½‘ç»œé€šä¿¡å’Œå¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</li>
</ul>
<ol>
<li><strong>äº‹ä»¶é©±åŠ¨æ¨¡å‹</strong>ï¼š<ul>
<li>Redis ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹æ¥å¤„ç†ç½‘ç»œ I&#x2F;Oï¼Œé€šè¿‡ç›‘å¬å¥—æ¥å­—ä¸Šçš„è¯»å†™äº‹ä»¶ï¼Œå®ç°å¼‚æ­¥çš„ç½‘ç»œé€šä¿¡ã€‚</li>
<li>åœ¨å®¢æˆ·ç«¯è¿æ¥åˆ° Redis æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†è¯¥å®¢æˆ·ç«¯çš„å¥—æ¥å­—åŠ å…¥åˆ°äº‹ä»¶é©±åŠ¨å™¨ä¸­è¿›è¡Œç›‘å¬ã€‚</li>
</ul>
</li>
<li><strong>epoll æœºåˆ¶</strong>ï¼š<ul>
<li>åœ¨ Linux ç³»ç»Ÿä¸­ï¼ŒRedis ä½¿ç”¨ epoll ä½œä¸ºç½‘ç»œ I&#x2F;O å¤šè·¯å¤ç”¨çš„å®ç°æœºåˆ¶ä¹‹ä¸€ã€‚</li>
<li>epoll æ˜¯ä¸€ç§é«˜æ•ˆçš„ I&#x2F;O å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œå¯ä»¥åŒæ—¶ç›‘æ§å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ I&#x2F;O äº‹ä»¶ï¼Œå¹¶å°†æœ‰äº‹ä»¶å‘ç”Ÿçš„æ–‡ä»¶æè¿°ç¬¦è¿”å›ç»™åº”ç”¨ç¨‹åºå¤„ç†ã€‚</li>
<li>Redis ä½¿ç”¨ epoll_wait å‡½æ•°æ¥ç­‰å¾…å¥—æ¥å­—ä¸Šçš„äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶å‘ç”Ÿæ—¶å¤„ç†å¯¹åº”çš„ç½‘ç»œ I&#x2F;O æ“ä½œã€‚</li>
</ul>
</li>
<li><strong>éé˜»å¡ I&#x2F;O</strong>ï¼š<ul>
<li>Redis ä½¿ç”¨äº†éé˜»å¡ I&#x2F;O æ¨¡å¼æ¥å¤„ç†å¥—æ¥å­—çš„è¯»å†™æ“ä½œï¼Œè¿™æ ·å¯ä»¥é¿å…åœ¨ç­‰å¾…æ•°æ®åˆ°è¾¾æ—¶çº¿ç¨‹è¢«é˜»å¡ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</li>
<li>å½“å®¢æˆ·ç«¯å‘é€æ•°æ®ç»™ Redis æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°½å¯èƒ½åœ°è¯»å–æ•°æ®ï¼Œè€Œä¸æ˜¯ç­‰å¾…æ•°æ®å…¨éƒ¨åˆ°è¾¾å†è¿›è¡Œå¤„ç†ã€‚</li>
</ul>
</li>
<li><strong>äº‹ä»¶å¾ªç¯</strong>ï¼š<ul>
<li>Redis çš„æœåŠ¡å™¨ä¸»å¾ªç¯æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨çš„å¾ªç¯ï¼Œä¸æ–­åœ°ç›‘å¬å®¢æˆ·ç«¯å¥—æ¥å­—ä¸Šçš„äº‹ä»¶å¹¶å¤„ç†ã€‚</li>
<li>å½“æœ‰æ–°çš„è¿æ¥è¯·æ±‚ã€æ•°æ®åˆ°è¾¾ã€è¿æ¥æ–­å¼€ç­‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒæœåŠ¡å™¨ä¼šç›¸åº”åœ°è°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•°æ¥å¤„ç†è¿™äº›äº‹ä»¶ã€‚</li>
</ul>
</li>
</ol>
</li>
<li><p>Redis å¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Ÿ<br>(1) Master æœ€å¥½ä¸è¦åšä»»ä½•æŒä¹…åŒ–å·¥ä½œï¼Œå¦‚ RDB å†…å­˜å¿«ç…§å’Œ AOF æ—¥å¿—æ–‡ä»¶<br>(2) å¦‚æœæ•°æ®æ¯”è¾ƒé‡è¦ï¼ŒæŸä¸ª Slave å¼€å¯ AOF å¤‡ä»½æ•°æ®ï¼Œç­–ç•¥è®¾ç½®ä¸ºæ¯ç§’åŒæ­¥ä¸€æ¬¡<br>(3) ä¸ºäº†ä¸»ä»å¤åˆ¶çš„é€Ÿåº¦å’Œè¿æ¥çš„ç¨³å®šæ€§ï¼Œ Master å’Œ Slave æœ€å¥½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…<br>(4) å°½é‡é¿å…åœ¨å‹åŠ›å¾ˆå¤§çš„ä¸»åº“ä¸Šå¢åŠ ä»åº“<br>(5) ä¸»ä»å¤åˆ¶ä¸è¦ç”¨å›¾çŠ¶ç»“æ„ï¼Œç”¨å•å‘é“¾è¡¨ç»“æ„æ›´ä¸ºç¨³å®šï¼Œå³ï¼š Master &lt;- Slave1 &lt;- Slave2 &lt;-Slave3â€¦</p>
</li>
<li><p>Redisçš„æ•™æ®ç»“æ„æœ‰ï¼Ÿ</p>
<table>
<thead>
<tr>
<th>æ•°æ®ç±»å‹</th>
<th>key</th>
<th>string</th>
<th>hash</th>
<th>list</th>
<th>set</th>
<th>sorted set</th>
<th>bitmap</th>
<th>hyperloglog</th>
</tr>
</thead>
<tbody><tr>
<td>æœ€å¤§å­˜å‚¨æ•°æ®é‡</td>
<td>512M</td>
<td>512M</td>
<td>2^32 - 1</td>
<td>2^32 - 1</td>
<td>2^32 -1</td>
<td></td>
<td>512M</td>
<td>12K</td>
</tr>
</tbody></table>
</li>
<li><p>Redisæ•°æ®ç»“æ„åˆ†åˆ«æœ‰å“ªäº›å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼Ÿ</p>
<ol>
<li>å­—ç¬¦ä¸²ï¼šå¯ä»¥ç”¨æ¥åšæœ€ç®€å•çš„æ•°æ®ï¼Œå¯ä»¥é¢‚å­˜æŸä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥å­˜æŸä¸ªjsonæ ¼å¼çš„å­—ç¬¦å®¡ï¼ŒRedisåˆ†å¸ƒå¼çš„å®ç°å°±åˆ©ç”¨äº†è¿™ç§æ•°æ®ç»“æ„ï¼Œè¿˜åŒ…æ‹¬å¯ä»¥å®ç°è®¡æ•°å™¨ã€Sessionå…±äº«ã€åˆ†å¸ƒå¼ID</li>
<li>å“ˆå¸Œè¡¨ï¼šå¯ä»¥ç”¨æ¥å­˜å‚¨ä¸€äº›key-valueå¯¹ï¼Œæ›´é€‚åˆç”¨æ¥å­˜å‚¨å¯¹è±¡ï¼Œç»Ÿè®¡ç±»æ•°æ®ï¼Œè´­ç‰©è½¦</li>
<li>åˆ—è¡¨ï¼šRedisçš„åˆ—è¡¨é€šè¿‡å‘½ä»¤çš„ç»„åˆï¼Œæ—¢å¯ä»¥å½“åšæ ˆï¼Œä¹Ÿå¯ä»¥å½“åšé˜Ÿåˆ—æ¥ä½¿ç”¨ï¼Œå¯ä»¥ç”¨æ¥ç¼“å­˜ç±»ä¼¼å¾®ä¿¡å…¬ä¼—å·ã€å¾®åšç­‰æ¶ˆæ¯æµæ•™æ®ï¼Œæ–‡ç« åˆ—è¡¨ï¼Œæ¶ˆæ¯é˜Ÿåˆ—</li>
<li>é›†åˆï¼šå’Œåˆ—è¡¨ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œä½†æ˜¯ä¸èƒ½é‡å¤ï¼Œé›†åˆå¯ä»¥è¿›è¡Œäº¤é›†ã€å¹¶é›†ã€å·®é›†æŸä½œï¼Œä»è€Œå¯ä»¥å®ç°ç±»ä¼¼ï¼Œæˆ‘å’ŒæŸäººå…±åŒå…³æ³¨çš„äººã€æœ‹å‹ç”»ç‚¹èµç­‰åŠŸèƒ½</li>
<li>æœ‰åºé›†åˆï¼šé›†åˆæ˜¯æ— åºçš„ï¼Œæœ‰åºé›†åˆå¯ä»¥è®¾ç½®é¡ºåºï¼Œå¯ä»¥ç”¨æ¥å®ç°æ’è¡Œæ¦œåŠŸèƒ½ï¼ŒæŒ‰æ—¶é—´æ’­æ”¾é‡ç‚¹å‡»</li>
</ol>
</li>
<li><p>Redis ä¸­ String çš„åº•å±‚å®ç°ã€ã€</p>
<ul>
<li>Redisåº•å±‚æ˜¯Cå®ç°çš„ï¼ŒRedisä¸­Stringæ˜¯ä¸€ç§åŠ¨æ€å­—ç¬¦ä¸²ç±»å‹ï¼Œå®ƒçš„åº•å±‚å®ç°å°±æ˜¯ SDSã€‚æ¯ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼ˆstring objectï¼‰éƒ½æœ‰å¯¹åº”çš„ SDS ç»“æ„ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</li>
<li>SDS æ˜¯ Redis è‡ªå·±å®ç°çš„å­—ç¬¦ä¸²æŠ½è±¡æ•°æ®ç»“æ„ï¼Œå½“ Redis æ‰§è¡Œå­—ç¬¦ä¸²æ“ä½œå¦‚ SETã€GETã€APPEND ç­‰æ“ä½œï¼Œå®é™…ä¸Šæ˜¯å¯¹ SDS ç»“æ„è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬ä¿®æ”¹é•¿åº¦ã€æ‰©å±•ç©ºé—´ã€æ‹·è´æ•°æ®ç­‰æ“ä½œã€‚ç›¸è¾ƒäº C è¯­è¨€çš„åŸç”Ÿå­—ç¬¦ä¸²ï¼ŒSDS å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š<ol>
<li><strong>O(1) å¤æ‚åº¦çš„é•¿åº¦è®¡ç®—</strong>ï¼šSDS ä¸éœ€è¦æ¯æ¬¡è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ï¼Œå› ä¸ºå®ƒåœ¨ç»“æ„ä¸­è®°å½•äº†å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå› æ­¤è·å–å­—ç¬¦ä¸²é•¿åº¦çš„æ“ä½œæ˜¯ O(1) å¤æ‚åº¦çš„ã€‚</li>
<li><strong>ç©ºé—´é¢„åˆ†é…</strong>ï¼šSDS åœ¨ç©ºé—´åˆ†é…æ—¶ä¼šé¢„ç•™é¢å¤–çš„ç©ºé—´ï¼Œä»¥å‡å°‘å­—ç¬¦ä¸²å¢é•¿æ—¶é¢‘ç¹åœ°é‡æ–°åˆ†é…å†…å­˜çš„æ¬¡æ•°ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li>
<li><strong>ä¿®æ”¹æ“ä½œçš„é«˜æ•ˆæ€§</strong>ï¼šSDS é€šè¿‡è®°å½•å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹å­—ç¬¦ä¸²å†…å®¹ï¼Œè€Œæ— éœ€åƒ C è¯­è¨€åŸç”Ÿå­—ç¬¦ä¸²é‚£æ ·ï¼Œé‡æ–°è®¡ç®—é•¿åº¦å’Œåˆ†é…å†…å­˜ã€‚</li>
</ol>
</li>
<li>SDS çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sdshdr</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> len;        <span class="comment">// å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line">    <span class="type">int</span> <span class="built_in">free</span>;       <span class="comment">// æœªä½¿ç”¨ç©ºé—´é•¿åº¦</span></span><br><span class="line">    <span class="type">char</span> buf[];     <span class="comment">// å­—ç¬¦ä¸²æ•°æ®</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Zsetåº•å±‚å®ç°</p>
<ul>
<li>å‹ç¼©åˆ—è¡¨ï¼šæ™®é€šæ•°ç»„+åˆ—è¡¨é•¿åº¦+å°¾éƒ¨åç§»é‡+åˆ—è¡¨å…ƒç´ ä¸ªæ•°+åˆ—è¡¨ç»“æŸæ ‡è¯†ï¼Œå¯¹äºéé¦–å°¾èŠ‚ç‚¹ä»ç„¶ä½¿ç”¨éå†é€ä¸ªæŸ¥è¯¢</li>
<li>è·³è¡¨ï¼šæ ¹æ®æœ‰åºåˆ—è¡¨å…ƒç´ å€¼ï¼ŒåŠ å¤šçº§ç´¢å¼•ä»¥å¿«é€ŸæŸ¥æ‰¾ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)ï¼ˆç›¸å½“äºäºŒåˆ†æŸ¥æ‰¾ï¼‰</li>
<li>ä»€ä¹ˆæ—¶å€™é‡‡ç”¨è·³è¡¨å‘¢ï¼Ÿ<br>  1.æœ‰åºé›†åˆä¿å­˜çš„å…ƒç´ æ•°é‡å°äº128ä¸ª<br>  2.æœ‰åºé›†åˆä¿å­˜çš„æ‰€æœ‰å…ƒç´ çš„é•¿åº¦å°äº 64å­—èŠ‚</li>
<li>zsetä¸ºä»€ä¹ˆç”¨è·³è¡¨è€Œä¸ç”¨äºŒå‰æ ‘æˆ–è€…çº¢é»‘æ ‘å‘¢ï¼Ÿ<br>  çº¢é»‘æ ‘ä¸æ”¯æŒèŒƒå›´æŸ¥æ‰¾ï¼Œä¸”æ„é€ èµ·æ¥æ¯”è·³è¡¨å¤æ‚</li>
</ul>
</li>
<li><p>Redisä¸ºä»€ä¹ˆä¸ç”¨b+æ ‘ï¼ŸMySQLä¸ºä»€ä¹ˆä¸ç”¨è·³è¡¨ï¼Ÿ<br>è¿™ä¸ªé—®é¢˜åœ¨äº Redisæ˜¯ç›´æ¥æ“ä½œå†…å­˜çš„å¹¶ä¸éœ€è¦ç£ç›˜ioï¼Œè·³è¡¨æ˜æ˜¾æ˜¯æ›´å¿«æ›´ç®€å•çš„æ–¹å¼ï¼›è€ŒMySQLéœ€è¦å»è¯»å–ioï¼Œæ‰€ä»¥mysqlè¦ä½¿ç”¨b+æ ‘çš„æ–¹å¼å‡å°‘ç£ç›˜io</p>
</li>
<li><p>Redis åº”ç”¨åœºæ™¯ã€‚</p>
<ol>
<li>ç¼“å­˜å±‚ã€‚é˜²æ­¢æ‰€æœ‰çš„è¯·æ±‚æ‰“åˆ°DBï¼Œåšè¿‡å¤šçš„IO</li>
<li>åˆ†å¸ƒå¼é”ã€‚æ­£å¸¸çš„ Threadlocal æ˜¯å•è¿›ç¨‹JVMå†…çš„ä¸€ä¸ªé”ï¼Œä¸èƒ½å¯¹æ‰€æœ‰çš„æœåŠ¡èµ·åˆ°åŒæ­¥çš„æ•ˆæœï¼Œæ‰€æœ‰ç”¨redisæŠ½è±¡å‡ºæ¥åšä¸€ä¸ªé›†ç¾¤ï¼Œè¿™ç§åˆ†å¸ƒå¼é”æ˜¯å…¨å±€å¯è§çš„</li>
<li>ä½œæ¶ˆæ¯é˜Ÿåˆ—ã€‚rediså‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼ï¼Œç±»ä¼¼ä¸æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>
</ol>
</li>
<li><p>å¦‚ä½•ä½¿ç”¨ Redis åšå¼‚æ­¥é˜Ÿåˆ—ä¹ˆï¼Ÿï¼Ÿï¼Ÿ<br>ä¸€èˆ¬ä½¿ç”¨ list ç»“æ„ä½œä¸ºé˜Ÿåˆ—ï¼Œrpushç”Ÿäº§æ¶ˆæ¯ï¼Œlpopæ¶ˆè´¹æ¶ˆæ¯ã€‚å½“ lpopæ²¡æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œè¦é€‚å½“ sleepä¸€ä¼šå†é‡è¯•ã€‚<br>å¯ä¸å¯ä»¥ä¸ç”¨ sleep å‘¢ï¼Ÿ list è¿˜æœ‰ä¸ªæŒ‡ä»¤å« blpopï¼Œåœ¨æ²¡æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œå®ƒä¼šé˜»å¡ä½ç›´åˆ°æ¶ˆæ¯åˆ°æ¥ã€‚<br>èƒ½ä¸èƒ½ç”Ÿäº§ä¸€æ¬¡æ¶ˆè´¹å¤šæ¬¡å‘¢ï¼Ÿä½¿ç”¨ pub&#x2F;sub ä¸»é¢˜è®¢é˜…è€…æ¨¡å¼ï¼Œå¯ä»¥å®ç° 1:N çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚<br>pub&#x2F;sub æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿåœ¨æ¶ˆè´¹è€…ä¸‹çº¿çš„æƒ…å†µä¸‹ï¼Œç”Ÿäº§çš„æ¶ˆæ¯ä¼šä¸¢å¤±ï¼Œå¾—ä½¿ç”¨ä¸“ä¸šçš„æ¶ˆæ¯é˜Ÿåˆ—å¦‚ RabbitMQç­‰ã€‚<br>redis å¦‚ä½•å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Ÿä½¿ç”¨sortedsetï¼Œæ‹¿æ—¶é—´æˆ³ä½œä¸ºscoreï¼Œæ¶ˆæ¯å†…å®¹ä½œä¸º key è°ƒç”¨ zadd æ¥ç”Ÿäº§æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ç”¨ zrangebyscore æŒ‡ä»¤è·å– N ç§’å‰çš„æ•°æ®è½®è¯¢å¤„ç†ã€‚</p>
</li>
<li><p>RedisæŒä¹…åŒ–ã€‚</p>
<ul>
<li>Redisæ˜¯åŸºäºå†…å­˜çš„ï¼Œå‡è®¾ä¸åšä»»ä½•æ“ä½œï¼Œåªè¦RedisæœåŠ¡å™¨é‡å¯ï¼ˆæˆ–è€…ä¸­é€”æ•…éšœæŒ‚æ‰äº†ï¼‰é‚£å†…å­˜çš„æ•°æ®å°±ä¼šæ²¡æ‰ã€‚æ‰€ä»¥Redisæä¾›äº†æŒä¹…åŒ–æœºåˆ¶ç»™æˆ‘ä»¬ç”¨ï¼Œåˆ†åˆ«æ˜¯RDBå’ŒAOFã€‚é€šè¿‡æŒä¹…åŒ–æœºåˆ¶æŠŠå†…å­˜ä¸­çš„æ•°æ®åŒæ­¥åˆ°ç¡¬ç›˜æ–‡ä»¶æ¥ä¿è¯æ•°æ®æŒä¹…åŒ–ã€‚å½“Redisé‡å¯åé€šè¿‡æŠŠç¡¬ç›˜æ–‡ä»¶é‡æ–°åŠ è½½åˆ°å†…å­˜ï¼Œå°±èƒ½è¾¾åˆ°æ¢å¤æ•°æ®çš„ç›®çš„ã€‚</li>
<li>RDBï¼šRedisé»˜è®¤çš„æŒä¹…åŒ–æ–¹å¼ã€‚æ ¹æ®æˆ‘ä»¬è‡ªå·±é…ç½®çš„æ—¶é—´æˆ–è€…æ‰‹åŠ¨å»æ‰§è¡ŒBGSAVEæˆ–SAVEå‘½ä»¤ï¼ŒRediså°±ä¼šå»ï¼ˆforkä¸€ä¸ªå­è¿›ç¨‹æ¥ï¼‰ç”ŸæˆRDBæ–‡ä»¶ã€‚<br>  RDBæ˜¯æŒ‰ç…§ä¸€å®šçš„æ—¶é—´å‘¨æœŸç­–ç•¥æŠŠå†…å­˜çš„æ•°æ®ä»¥å¿«ç…§çš„å½¢å¼ä¿å­˜åˆ°ç¡¬ç›˜çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒRediså¯ä»¥é€šè¿‡è¿™ä¸ªæ–‡ä»¶åœ¨å¯åŠ¨çš„æ—¶å€™æ¥è¿˜åŸæˆ‘ä»¬çš„æ•°æ®ã€‚å³Snapshotå¿«ç…§å­˜å‚¨ï¼Œå¯¹åº”äº§ç”Ÿçš„æ•°æ®æ–‡ä»¶ä¸ºdump.rdbï¼Œé€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„saveå‚æ•°æ¥å®šä¹‰å¿«ç…§çš„å‘¨æœŸã€‚ï¼ˆ å¿«ç…§å¯ä»¥æ˜¯å…¶æ‰€è¡¨ç¤ºçš„æ•°æ®çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°æ®çš„ä¸€ä¸ªå¤åˆ¶å“ã€‚ï¼‰</li>
<li>AOFï¼šRedisä¼šå°†æ¯ä¸€ä¸ªæ”¶åˆ°çš„å†™å‘½ä»¤éƒ½é€šè¿‡Writeå‡½æ•°è¿½åŠ åˆ°æ–‡ä»¶æœ€åï¼Œç±»ä¼¼äºMySQLçš„binlogã€‚å½“Redisé‡å¯æ˜¯ä¼šé€šè¿‡é‡æ–°æ‰§è¡Œæ–‡ä»¶ä¸­ä¿å­˜çš„å†™å‘½ä»¤æ¥åœ¨å†…å­˜ä¸­é‡å»ºæ•´ä¸ªæ•°æ®åº“çš„å†…å®¹ã€‚å½“ä¸¤ç§æ–¹å¼åŒæ—¶å¼€å¯æ—¶ï¼Œæ•°æ®æ¢å¤Redisä¼šä¼˜å…ˆé€‰æ‹©AOFæ¢å¤ã€‚<br>  <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv28294981/?spm_id_from=333.999.0.0&jump_opus=1">https://www.bilibili.com/read/cv28294981/?spm_id_from=333.999.0.0&amp;jump_opus=1</a></li>
</ul>
</li>
<li><p>ç¼“å­˜é›ªå´©ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€</p>
<ol>
<li>ç¼“å­˜ç©¿é€<ul>
<li>ç¼“å­˜ç©¿é€æ˜¯æŒ‡ç”¨æˆ·æŸ¥è¯¢æ•°æ®ï¼Œåœ¨æ•°æ®åº“æ²¡æœ‰ï¼Œè‡ªç„¶åœ¨ç¼“å­˜ä¸­ä¹Ÿä¸ä¼šæœ‰ã€‚è¿™æ ·å°±å¯¼è‡´ç”¨æˆ·æŸ¥è¯¢çš„æ—¶å€™ï¼Œåœ¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°ï¼Œæ¯æ¬¡éƒ½è¦å»æ•°æ®åº“å†æŸ¥è¯¢ä¸€éï¼Œç„¶åè¿”å›ç©ºï¼ˆç›¸å½“äºè¿›è¡Œäº†ä¸¤æ¬¡æ— ç”¨çš„æŸ¥è¯¢ï¼‰ã€‚è¿™æ ·è¯·æ±‚å°±ç»•è¿‡ç¼“å­˜ç›´æ¥æŸ¥æ•°æ®åº“ï¼Œè¿™ä¹Ÿæ˜¯ç»å¸¸æçš„ç¼“å­˜å‘½ä¸­ç‡é—®é¢˜ã€‚</li>
<li>è§£å†³åŠæ³•ï¼š<ul>
<li>1ã€æœ€å¸¸è§çš„åˆ™æ˜¯é‡‡ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢«è¿™ä¸ªbitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚</li>
<li>2ã€å¦å¤–ä¹Ÿæœ‰ä¸€ä¸ªæ›´ä¸ºç®€å•ç²—æš´çš„æ–¹æ³•ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©ºï¼ˆä¸ç®¡æ˜¯æ•°æ®ä¸å­˜åœ¨ï¼Œè¿˜æ˜¯ç³»ç»Ÿæ•…éšœï¼‰ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼Œä½†å®ƒçš„è¿‡æœŸæ—¶é—´ä¼šå¾ˆçŸ­ï¼Œæœ€é•¿ä¸è¶…è¿‡äº”åˆ†é’Ÿã€‚é€šè¿‡è¿™ä¸ªç›´æ¥è®¾ç½®çš„é»˜è®¤å€¼å­˜æ”¾åˆ°ç¼“å­˜ï¼Œè¿™æ ·ç¬¬äºŒæ¬¡åˆ°ç¼“å†²ä¸­è·å–å°±æœ‰å€¼äº†ï¼Œè€Œä¸ä¼šç»§ç»­è®¿é—®æ•°æ®åº“ã€‚</li>
<li><strong>5TBçš„ç¡¬ç›˜ä¸Šæ”¾æ»¡äº†æ•°æ®ï¼Œè¯·å†™ä¸€ä¸ªç®—æ³•å°†è¿™äº›æ•°æ®è¿›è¡Œæ’é‡ã€‚å¦‚æœè¿™äº›æ•°æ®æ˜¯ä¸€äº›32bitå¤§å°çš„æ•°æ®è¯¥å¦‚ä½•è§£å†³ï¼Ÿå¦‚æœæ˜¯64bitçš„å‘¢ï¼Ÿ</strong><br>  å¯¹äºç©ºé—´çš„åˆ©ç”¨åˆ°è¾¾äº†ä¸€ç§æè‡´ï¼Œé‚£å°±æ˜¯Bitmapå’Œå¸ƒéš†è¿‡æ»¤å™¨(Bloom Filter)ã€‚</li>
</ul>
</li>
<li><strong>Bitmapï¼šå…¸å‹çš„å°±æ˜¯å“ˆå¸Œè¡¨</strong>ï¼›ç¼ºç‚¹æ˜¯ï¼ŒBitmapå¯¹äºæ¯ä¸ªå…ƒç´ åªèƒ½è®°å½•1bitä¿¡æ¯ï¼Œå¦‚æœè¿˜æƒ³å®Œæˆé¢å¤–çš„åŠŸèƒ½ï¼Œææ€•åªèƒ½é ç‰ºç‰²æ›´å¤šçš„ç©ºé—´ã€æ—¶é—´æ¥å®Œæˆäº† </li>
<li><strong>å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆæ¨èï¼‰ï¼š</strong>å°±æ˜¯å¼•å…¥äº† k(k&gt;1) ä¸ªç›¸äº’ç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°ï¼Œä¿è¯åœ¨ç»™å®šçš„ç©ºé—´ã€è¯¯åˆ¤ç‡ä¸‹ï¼Œå®Œæˆå…ƒç´ åˆ¤é‡çš„è¿‡ç¨‹ã€‚<br> å®ƒçš„ä¼˜ç‚¹æ˜¯ç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½è¿œè¿œè¶…è¿‡ä¸€èˆ¬çš„ç®—æ³•ï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„è¯¯è¯†åˆ«ç‡å’Œåˆ é™¤å›°éš¾ã€‚Bloom-Filterç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯åˆ©ç”¨å¤šä¸ªä¸åŒçš„Hashå‡½æ•°æ¥è§£å†³â€œå†²çªâ€ã€‚Hashå­˜åœ¨ä¸€ä¸ªå†²çªï¼ˆç¢°æ’ï¼‰çš„é—®é¢˜ï¼Œç”¨åŒä¸€ä¸ªHashå¾—åˆ°çš„ä¸¤ä¸ªURLçš„å€¼æœ‰å¯èƒ½ç›¸åŒã€‚ä¸ºäº†å‡å°‘å†²çªï¼Œæˆ‘ä»¬å¯ä»¥å¤šå¼•å…¥å‡ ä¸ªHashï¼Œå¦‚æœé€šè¿‡å…¶ä¸­çš„ä¸€ä¸ªHashå€¼æˆ‘ä»¬å¾—å‡ºæŸå…ƒç´ ä¸åœ¨é›†åˆä¸­ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ è‚¯å®šä¸åœ¨é›†åˆä¸­ã€‚åªæœ‰åœ¨æ‰€æœ‰çš„Hashå‡½æ•°å‘Šè¯‰æˆ‘ä»¬è¯¥å…ƒç´ åœ¨é›†åˆä¸­æ—¶ï¼Œæ‰èƒ½ç¡®å®šè¯¥å…ƒç´ å­˜åœ¨äºé›†åˆä¸­ã€‚è¿™ä¾¿æ˜¯Bloom-Filterçš„åŸºæœ¬æ€æƒ³ã€‚Bloom-Filterä¸€èˆ¬ç”¨äºåœ¨å¤§æ•°æ®é‡çš„é›†åˆä¸­åˆ¤å®šæŸå…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚</li>
</ul>
</li>
<li>ç¼“å­˜å‡»ç©¿<ul>
<li>åœºæ™¯ï¼šä¸€ä»½çƒ­ç‚¹æ•°æ®ï¼Œå®ƒçš„è®¿é—®é‡éå¸¸å¤§ã€‚åœ¨å…¶ç¼“å­˜å¤±æ•ˆç¬é—´ï¼Œå¤§é‡è¯·æ±‚ç›´è¾¾å­˜å‚¨å±‚ï¼Œå¯¼è‡´æœåŠ¡å´©æºƒ</li>
<li>è§£å†³æ–¹æ¡ˆï¼š<br> 1ã€åˆ†å¸ƒå¼é”ï¼šå¯¹æ•°æ®çš„è®¿é—®åŠ äº’æ–¥é”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥æ•°æ®æ—¶ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…è¿™ä¸ªçº¿ç¨‹è®¿é—®è¿‡åï¼Œç¼“å­˜ä¸­çš„æ•°æ®å°†è¢«é‡å»ºï¼Œå±Šæ—¶å…¶ä»–çº¿ç¨‹å°±å¯ä»¥ç›´æ¥ä»ç¼“å­˜å–å€¼.<br> 2ã€æ°¸ä¸è¿‡æœŸï¼šä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ä¸Šè¿°é—®é¢˜ï¼Œè¿™æ˜¯â€œç‰©ç†â€ä¸Šçš„ä¸è¿‡æœŸã€‚ä¸ºæ¯ä¸ªvalueè®¾ç½®é€»è¾‘è¿‡æœŸæ—¶é—´ï¼Œå½“å‘ç°è¯¥å€¼é€»è¾‘è¿‡æœŸæ—¶ï¼Œä½¿ç”¨å•ç‹¬çš„çº¿ç¨‹é‡å»ºç¼“å­˜.</li>
</ul>
</li>
<li>ç¼“å­˜é›ªå´© <ul>
<li>æˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼šç”±äºåŸæœ‰ç¼“å­˜å¤±æ•ˆï¼Œæ–°ç¼“å­˜æœªåˆ°æœŸé—´(ä¾‹å¦‚ï¼šæˆ‘ä»¬è®¾ç½®ç¼“å­˜æ—¶é‡‡ç”¨äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œåœ¨åŒä¸€æ—¶åˆ»å‡ºç°å¤§é¢ç§¯çš„ç¼“å­˜è¿‡æœŸ)ï¼Œæ‰€æœ‰åŸæœ¬åº”è¯¥è®¿é—®ç¼“å­˜çš„è¯·æ±‚éƒ½å»æŸ¥è¯¢æ•°æ®åº“äº†ï¼Œè€Œå¯¹æ•°æ®åº“CPUå’Œå†…å­˜é€ æˆå·¨å¤§å‹åŠ›ï¼Œä¸¥é‡çš„ä¼šé€ æˆæ•°æ®åº“å®•æœºã€‚ä»è€Œå½¢æˆä¸€ç³»åˆ—è¿é”ååº”ï¼Œé€ æˆæ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚</li>
<li>è§£å†³åŠæ³•ï¼š<br> 1ã€åŠ é”ï¼šå¤§å¤šæ•°ç³»ç»Ÿè®¾è®¡è€…è€ƒè™‘ç”¨åŠ é”ï¼ˆæœ€å¤šçš„ï¼‰æˆ–è€…é˜Ÿåˆ—çš„æ–¹å¼ä¿è¯æ¥ä¿è¯ä¸ä¼šæœ‰å¤§é‡çš„çº¿ç¨‹å¯¹æ•°æ®åº“ä¸€æ¬¡æ€§è¿›è¡Œè¯»å†™ï¼Œä»è€Œé¿å…å¤±æ•ˆæ—¶å¤§é‡çš„å¹¶å‘è¯·æ±‚è½åˆ°åº•å±‚å­˜å‚¨ç³»ç»Ÿä¸Šã€‚<br> 2ã€è®¾ç½®éšæœºå€¼ï¼šå°†ç¼“å­˜å¤±æ•ˆæ—¶é—´åˆ†æ•£å¼€ã€‚</li>
</ul>
</li>
</ol>
</li>
<li><p>ï¼Ÿï¼Ÿï¼Ÿåˆ†å¸ƒå¼é”ã€ã€</p>
<ul>
<li>åœºæ™¯ï¼šä¿®æ”¹æ—¶ï¼Œç»å¸¸éœ€è¦å…ˆå°†æ•°æ®è¯»å–åˆ°å†…å­˜ï¼Œåœ¨å†…å­˜ä¸­ä¿®æ”¹åå†å­˜å›å»ã€‚åœ¨åˆ†å¸ƒå¼åº”ç”¨ä¸­ï¼Œå¯èƒ½å¤šä¸ªè¿›ç¨‹åŒæ—¶æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œè€Œè¯»å–å’Œä¿®æ”¹éåŸå­æ“ä½œï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿå†²çªã€‚å¢åŠ åˆ†å¸ƒå¼é”ï¼Œå¯ä»¥è§£å†³æ­¤ç±»é—®é¢˜.</li>
<li>åŸºæœ¬åŸç†ï¼š<ol>
<li>åŒæ­¥é”ï¼šåœ¨å¤šä¸ªçº¿ç¨‹éƒ½èƒ½è®¿é—®åˆ°çš„åœ°æ–¹ï¼Œåšä¸€ä¸ªæ ‡è®°ï¼Œæ ‡è¯†è¯¥æ•°æ®çš„è®¿é—®æƒé™ã€‚</li>
<li>åˆ†å¸ƒå¼é”ï¼šåœ¨å¤šä¸ªè¿›ç¨‹ï¼Ÿï¼Ÿï¼Ÿéƒ½èƒ½è®¿é—®åˆ°çš„åœ°æ–¹ï¼Œåšä¸€ä¸ªæ ‡è®°ï¼Œæ ‡è¯†è¯¥æ•°æ®çš„è®¿é—®æƒé™</li>
</ol>
</li>
<li>å®ç°æ–¹å¼ï¼š1ã€åŸºäºæ•°æ®åº“å®ç°åˆ†å¸ƒå¼é” 2ã€åŸºäºRediså®ç°åˆ†å¸ƒå¼é” 3ã€åŸºäºzookeeperå®ç°åˆ†å¸ƒå¼é”<br>  å…·ä½“åšæ³•ï¼šï¼Ÿï¼Ÿï¼Ÿ    å…ˆæ‹¿ setnx æ¥äº‰æŠ¢é”ï¼ŒæŠ¢åˆ°ä¹‹åï¼Œå†ç”¨ expire ç»™é”åŠ ä¸€ä¸ªè¿‡æœŸæ—¶é—´é˜²æ­¢é”å¿˜è®°äº†é‡Šæ”¾ã€‚</li>
<li>åˆ†å¸ƒå¼é”å®ç°ï¼Ÿï¼Ÿï¼Ÿ<br>  å®ç°åˆ†å¸ƒå¼é”å¯ä»¥é€šè¿‡æ•°æ®åº“ redis zookeeperã€‚<br>  redis setnxæ˜¯æœ€ç®€å•çš„ä¸€ç§ã€‚å¯ä»¥æ»¡è¶³åŸºæœ¬ä½¿ç”¨ä½†æœ‰äº›ç‰¹æ€§å’Œåœºæ™¯æ²¡æ³•æ»¡è¶³ æ¯”å¦‚ä¸å¯é‡å…¥ ä¸å¯é‡è¯•  é”è¿‡æœŸåˆ é™¤çš„ä¸€äº›é—®é¢˜ã€‚redissonæ˜¯åœ¨redisåŸºç¡€ä¸Šä¹Ÿå®ç°äº†åˆ†å¸ƒå¼é”ï¼Œè§£å†³äº†è¿™å‡ ä¸ªé—®é¢˜å°±æ˜¯redissoné‡Œé¢çš„å¯é‡å…¥é”ï¼Œæ¯”å¦‚è§£å†³ä¸å¯é‡å…¥ç”¨çš„æ˜¯hashç»“æ„è§£å†³ã€‚è§£å†³ä¸å¯é‡è¯•åŸºäºredisçš„å‘å¸ƒè®¢é˜…ã€‚è§£å†³é”è¿‡æœŸåˆ é™¤åŸºäºè‡ªå·±å®ç°çš„ä¸€ä¸ªçœ‹é—¨ç‹—æœºåˆ¶ã€‚ä½†æ˜¯redissonè¿™æŠŠå¯é‡å…¥é”è¿˜æœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ä¸»ä»æ—¶å®•æœºçš„é—®é¢˜ï¼Œredissoné‡Œé¢åˆå¯ä»¥é€šè¿‡æœ‰è”é”å•Š çº¢é”å•Šè§£å†³ã€‚ä¸è¿‡setnxåŸºæœ¬ä¸Šå¯ä»¥åº”ç”¨äºåˆ†å¸ƒå¼é”äº†ï¼Œæœ‰ä¸€äº›ä¸šåŠ¡ä¸Šéœ€è¦æ»¡è¶³ä¸€äº›é”çš„éœ€æ±‚çš„æ—¶å€™å¯ä»¥è€ƒè™‘æ›´å¤æ‚çš„å®ç°<br>  æ”¯ä»˜å®ä¸€é¢ï¼šå¦‚ä½•åŸºäºRediså®ç°åˆ†å¸ƒå¼é”ï¼Ÿï¼Ÿï¼Ÿ<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/y8kAflIenRpa4zIwCP_8iA">https://mp.weixin.qq.com/s/y8kAflIenRpa4zIwCP_8iA</a></li>
</ul>
</li>
<li><p>ç¼“å­˜é¢„çƒ­ã€ç¼“å­˜æ›´æ–°ã€ç¼“å­˜é™çº§</p>
<ol>
<li>ç¼“å­˜é¢„çƒ­<br>  ç³»ç»Ÿä¸Šçº¿åï¼Œå°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚è¿™æ ·å°±å¯ä»¥é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ï¼ç”¨æˆ·ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ï¼<br>  è§£å†³æ€è·¯ï¼š1ã€ç›´æ¥å†™ä¸ªç¼“å­˜åˆ·æ–°é¡µé¢ï¼Œä¸Šçº¿æ—¶æ‰‹å·¥æ“ä½œä¸‹ï¼›2ã€æ•°æ®é‡ä¸å¤§ï¼Œå¯ä»¥åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨è¿›è¡ŒåŠ è½½ï¼›3ã€å®šæ—¶åˆ·æ–°ç¼“å­˜</li>
<li>ç¼“å­˜æ›´æ–°<br>  é™¤äº†ç¼“å­˜æœåŠ¡å™¨è‡ªå¸¦çš„ç¼“å­˜å¤±æ•ˆç­–ç•¥ä¹‹å¤–ï¼ˆRedisé»˜è®¤çš„æœ‰6ä¸­ç­–ç•¥å¯ä¾›é€‰æ‹©ï¼‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰çš„ç¼“å­˜æ·˜æ±°ï¼Œå¸¸è§çš„ç­–ç•¥æœ‰ä¸¤ç§ï¼š<br>  ï¼ˆ1ï¼‰å®šæ—¶å»æ¸…ç†è¿‡æœŸçš„ç¼“å­˜ï¼›<br>  ï¼ˆ2ï¼‰å½“æœ‰ç”¨æˆ·è¯·æ±‚è¿‡æ¥æ—¶ï¼Œå†åˆ¤æ–­è¿™ä¸ªè¯·æ±‚æ‰€ç”¨åˆ°çš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸçš„è¯å°±å»åº•å±‚ç³»ç»Ÿå¾—åˆ°æ–°æ•°æ®å¹¶æ›´æ–°ç¼“å­˜ã€‚<br>  ä¸¤è€…å„æœ‰ä¼˜åŠ£ï¼Œç¬¬ä¸€ç§çš„ç¼ºç‚¹æ˜¯ç»´æŠ¤å¤§é‡ç¼“å­˜çš„keyæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œç¬¬äºŒç§çš„ç¼ºç‚¹å°±æ˜¯æ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¿‡æ¥éƒ½è¦åˆ¤æ–­ç¼“å­˜å¤±æ•ˆï¼Œé€»è¾‘ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼å…·ä½“ç”¨å“ªç§æ–¹æ¡ˆï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„åº”ç”¨åœºæ™¯æ¥æƒè¡¡</li>
<li>ï¼Ÿï¼Ÿç¼“å­˜é™çº§<br>  å½“è®¿é—®é‡å‰§å¢ã€æœåŠ¡å‡ºç°é—®é¢˜ï¼ˆå¦‚å“åº”æ—¶é—´æ…¢æˆ–ä¸å“åº”ï¼‰æˆ–éæ ¸å¿ƒæœåŠ¡å½±å“åˆ°æ ¸å¿ƒæµç¨‹çš„æ€§èƒ½æ—¶ï¼Œä»ç„¶éœ€è¦ä¿è¯æœåŠ¡è¿˜æ˜¯å¯ç”¨çš„ï¼Œå³ä½¿æ˜¯æœ‰æŸæœåŠ¡ã€‚ç³»ç»Ÿå¯ä»¥æ ¹æ®ä¸€äº›å…³é”®æ•°æ®è¿›è¡Œè‡ªåŠ¨é™çº§ï¼Œä¹Ÿå¯ä»¥é…ç½®å¼€å…³å®ç°äººå·¥é™çº§ã€‚<br>  é™çº§çš„æœ€ç»ˆç›®çš„æ˜¯ä¿è¯æ ¸å¿ƒæœåŠ¡å¯ç”¨ï¼Œå³ä½¿æ˜¯æœ‰æŸçš„ã€‚è€Œä¸”æœ‰äº›æœåŠ¡æ˜¯æ— æ³•é™çº§çš„ï¼ˆå¦‚åŠ å…¥è´­ç‰©è½¦ã€ç»“ç®—ï¼‰ã€‚ä»¥å‚è€ƒæ—¥å¿—çº§åˆ«è®¾ç½®é¢„æ¡ˆï¼š<br>  ï¼ˆ1ï¼‰ä¸€èˆ¬ï¼šæ¯”å¦‚æœ‰äº›æœåŠ¡å¶å°”å› ä¸ºç½‘ç»œæŠ–åŠ¨æˆ–è€…æœåŠ¡æ­£åœ¨ä¸Šçº¿è€Œè¶…æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨é™çº§ï¼›<br>  ï¼ˆ2ï¼‰è­¦å‘Šï¼šæœ‰äº›æœåŠ¡åœ¨ä¸€æ®µæ—¶é—´å†…æˆåŠŸç‡æœ‰æ³¢åŠ¨ï¼ˆå¦‚åœ¨95~100%ä¹‹é—´ï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨é™çº§æˆ–äººå·¥é™çº§ï¼Œå¹¶å‘é€å‘Šè­¦ï¼›<br>  ï¼ˆ3ï¼‰é”™è¯¯ï¼šæ¯”å¦‚å¯ç”¨ç‡ä½äº90%ï¼Œæˆ–è€…æ•°æ®åº“è¿æ¥æ± è¢«æ‰“çˆ†äº†ï¼Œæˆ–è€…è®¿é—®é‡çªç„¶çŒ›å¢åˆ°ç³»ç»Ÿèƒ½æ‰¿å—çš„æœ€å¤§é˜€å€¼ï¼Œæ­¤æ—¶å¯ä»¥æ ¹æ®æƒ…å†µè‡ªåŠ¨é™çº§æˆ–è€…äººå·¥é™çº§ï¼›<br>  ï¼ˆ4ï¼‰ä¸¥é‡é”™è¯¯ï¼šæ¯”å¦‚å› ä¸ºç‰¹æ®ŠåŸå› æ•°æ®é”™è¯¯äº†ï¼Œæ­¤æ—¶éœ€è¦ç´§æ€¥äººå·¥é™çº§ã€‚æœåŠ¡é™çº§çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢RedisæœåŠ¡æ•…éšœï¼Œå¯¼è‡´æ•°æ®åº“è·Ÿç€ä¸€èµ·å‘ç”Ÿé›ªå´©é—®é¢˜ã€‚å› æ­¤ï¼Œå¯¹äºä¸é‡è¦çš„ç¼“å­˜æ•°æ®ï¼Œå¯ä»¥é‡‡å–æœåŠ¡é™çº§ç­–ç•¥ï¼Œä¾‹å¦‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åšæ³•å°±æ˜¯ï¼ŒRediså‡ºç°é—®é¢˜ï¼Œä¸å»æ•°æ®åº“æŸ¥è¯¢ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›é»˜è®¤å€¼ç»™ç”¨æˆ·</li>
</ol>
</li>
<li><p>çƒ­ç‚¹æ•°æ®å’Œå†·æ•°æ®ï¼Ÿ<br><strong>æ•°æ®æ›´æ–°å‰è‡³å°‘è¯»å–ä¸¤æ¬¡</strong>ï¼Œç¼“å­˜æ‰æœ‰æ„ä¹‰ã€‚å¯¹äºçƒ­ç‚¹æ•°æ®ï¼Œæ¯”å¦‚ç”Ÿæ—¥ç¥ç¦æ¨¡å—ä¸­å½“å¤©çš„å¯¿æ˜Ÿåˆ—è¡¨ï¼Œç¼“å­˜ä»¥åå¯èƒ½è¯»å–æ•°åä¸‡æ¬¡ï¼ŒåŒæ—¶ä¿¡æ¯ä¿®æ”¹é¢‘ç‡ä¸é«˜ã€‚è¿™ä¸ªæ˜¯æœ€åŸºæœ¬çš„ç­–ç•¥ï¼Œè‹¥ç¼“å­˜è¿˜æ²¡æœ‰èµ·ä½œç”¨å°±å¤±æ•ˆå°±æ²¡æœ‰å¤ªå¤§ä»·å€¼äº†ã€‚<br>é‚£å­˜ä¸å­˜åœ¨ï¼Œä¿®æ”¹é¢‘ç‡å¾ˆé«˜ï¼Œä½†æ˜¯åˆä¸å¾—ä¸è€ƒè™‘ç¼“å­˜çš„åœºæ™¯å‘¢ï¼Ÿæœ‰ï¼æ¯”å¦‚ï¼Œè¿™ä¸ªè¯»å–æ¥å£å¯¹æ•°æ®åº“çš„å‹åŠ›å¾ˆå¤§ï¼Œä½†æ˜¯åˆæ˜¯çƒ­ç‚¹æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦è€ƒè™‘é€šè¿‡ç¼“å­˜æ‰‹æ®µï¼Œå‡å°‘æ•°æ®åº“çš„å‹åŠ›ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„æŸåŠ©æ‰‹äº§å“çš„ï¼Œç‚¹èµæ•°ï¼Œæ”¶è—æ•°ï¼Œåˆ†äº«æ•°ç­‰æ˜¯éå¸¸å…¸å‹çš„çƒ­ç‚¹æ•°æ®ï¼Œä½†æ˜¯åˆä¸æ–­å˜åŒ–ï¼Œæ­¤æ—¶å°±éœ€è¦å°†æ•°æ®åŒæ­¥ä¿å­˜åˆ°Redisç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›</p>
</li>
<li><p>è¿‡æœŸç­–ç•¥ã€‚</p>
<ul>
<li>Redisä¼šæŠŠè®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyæ”¾å…¥ä¸€ä¸ªç‹¬ç«‹çš„å­—å…¸é‡Œï¼Œè¿‡æœŸæ—¶å¹¶ä¸ä¼šç«‹åˆ»åˆ é™¤ï¼Œé€šè¿‡å¦‚ä¸‹ä¸¤ç§ç­–ç•¥æ¥åˆ é™¤è¿‡æœŸçš„key:<br>  1ã€æƒ°æ€§åˆ é™¤ï¼šå®¢æˆ·ç«¯è®¿é—®æŸä¸ªkeyæ—¶ï¼ŒRedisä¼šæ£€æŸ¥è¯¥keyæ˜¯å¦è¿‡æœŸï¼Œè‹¥è¿‡æœŸåˆ™åˆ é™¤ã€‚(é—®é¢˜: æœ‰äº›é”®å€¼å¯¹å¯èƒ½å·²è¿‡æœŸ,ä½†æ˜¯ç”±äºæ²¡æœ‰å†è¢«è®¿é—®,å¯¼è‡´æœªè¢«åˆ é™¤,å› è€Œå ç”¨å†…å­˜)ã€‚<br>  2ã€å®šæœŸæ‰«æï¼šRedisé»˜è®¤æ¯ç§’æ‰§è¡Œ10æ¬¡è¿‡æœŸæ‰«æ (é…ç½®hzé€‰é¡¹) ï¼Œæ‰«æç­–ç•¥å¦‚ä¸‹ (1). ä»è¿‡æœŸå­—å…¸ä¸­éšæœºé€‰æ‹©20ä¸ªkey; (2)åˆ é™¤è¿™20ä¸ªkeyä¸­å·²è¿‡æœŸçš„key; (3)å¦‚æœè¿‡æœŸçš„keyçš„æ¯”ä¾‹è¶…è¿‡25%ï¼Œåˆ™é‡å¤æ­¥éª¤(1)</li>
<li><strong>ä¸ºä»€ä¹ˆä¸ç”¨å®šæ—¶åˆ é™¤ç­–ç•¥?</strong><br>  å®šæ—¶åˆ é™¤,ç”¨ä¸€ä¸ªå®šæ—¶å™¨æ¥è´Ÿè´£ç›‘è§†key,è¿‡æœŸåˆ™è‡ªåŠ¨åˆ é™¤ã€‚è™½ç„¶å†…å­˜åŠæ—¶é‡Šæ”¾ï¼Œä½†æ˜¯ååˆ†æ¶ˆè€—CPUèµ„æºã€‚åœ¨å¤§å¹¶å‘è¯·æ±‚ä¸‹ï¼ŒCPUè¦å°†æ—¶é—´åº”ç”¨åœ¨å¤„ç†è¯·æ±‚ï¼Œè€Œä¸æ˜¯åˆ é™¤key,å› æ­¤æ²¡æœ‰é‡‡ç”¨è¿™ä¸€ç­–ç•¥.</li>
<li><strong>å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢?</strong><br>  å®šæœŸåˆ é™¤ï¼Œredisé»˜è®¤æ¯ä¸ª100msæ£€æŸ¥ï¼Œæ˜¯å¦æœ‰è¿‡æœŸçš„key,æœ‰è¿‡æœŸkeyåˆ™åˆ é™¤ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œredisä¸æ˜¯æ¯ä¸ª100mså°†æ‰€æœ‰çš„keyæ£€æŸ¥ä¸€æ¬¡ï¼Œè€Œæ˜¯éšæœºæŠ½å–è¿›è¡Œæ£€æŸ¥(å¦‚æœæ¯éš”100ms,å…¨éƒ¨keyè¿›è¡Œæ£€æŸ¥ï¼Œrediså²‚ä¸æ˜¯å¡æ­»)ã€‚å› æ­¤ï¼Œå¦‚æœåªé‡‡ç”¨å®šæœŸåˆ é™¤ç­–ç•¥ï¼Œä¼šå¯¼è‡´å¾ˆå¤škeyåˆ°æ—¶é—´æ²¡æœ‰åˆ é™¤ã€‚äºæ˜¯ï¼Œæƒ°æ€§åˆ é™¤æ´¾ä¸Šç”¨åœºã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä½ è·å–æŸä¸ªkeyçš„æ—¶å€™ï¼Œredisä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œè¿™ä¸ªkeyå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´é‚£ä¹ˆæ˜¯å¦è¿‡æœŸäº†ï¼Ÿå¦‚æœè¿‡æœŸäº†æ­¤æ—¶å°±ä¼šåˆ é™¤ã€‚</li>
<li><strong>é‡‡ç”¨å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤å°±æ²¡å…¶ä»–é—®é¢˜äº†ä¹ˆ?</strong><br>  ä¸æ˜¯çš„ï¼Œå¦‚æœå®šæœŸåˆ é™¤æ²¡åˆ é™¤keyã€‚ç„¶åä½ ä¹Ÿæ²¡å³æ—¶å»è¯·æ±‚keyï¼Œä¹Ÿå°±æ˜¯è¯´æƒ°æ€§åˆ é™¤ä¹Ÿæ²¡ç”Ÿæ•ˆã€‚è¿™æ ·ï¼Œredisçš„å†…å­˜ä¼šè¶Šæ¥è¶Šé«˜ã€‚é‚£ä¹ˆå°±åº”è¯¥é‡‡ç”¨å†…å­˜æ·˜æ±°æœºåˆ¶ã€‚åœ¨redis.confä¸­æœ‰ä¸€è¡Œé…ç½®</li>
</ul>
</li>
<li><p>æ·˜æ±°ç­–ç•¥ã€‚<br>å½“Rediså ç”¨å†…å­˜è¶…å‡ºæœ€å¤§é™åˆ¶(maxmemory)æ—¶ï¼Œå¯é‡‡ç”¨å¦‚ä¸‹ç­–ç•¥(maxmemory-policy)æ·˜æ±°ä¸€äº›æ•°æ®ä»¥è…¾å‡ºç©ºé—´ç»§ç»­æä¾›è¯»å†™æœåŠ¡:<br>noevictionï¼šå¯¹å¯èƒ½å¯¼è‡´å¢å¤§å†…å­˜çš„å‘½ä»¤è¿”å›é”™è¯¯ (å¤§å¤šæ•°å†™å‘½ä»¤ï¼ŒDELé™¤å¤–)<br>volatile-ttlï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ï¼Œé€‰æ‹©å‰©ä½™å¯¿å‘½(TTI) æœ€çŸ­çš„keyï¼Œå°†å…¶æ·˜æ±°<br>volatile-lruï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„kevä¸­ï¼Œé€‰æ‹©æœ€å°‘ä½¿ç”¨çš„kev (LRu) ï¼Œå°†å…¶æ·˜æ±°:<br>volatile-randomï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ï¼Œéšæœºé€‰æ‹©ä¸€äº›keyï¼Œå°†å…¶æ·˜æ±°;<br>allkeys-lruï¼šåœ¨æ‰€æœ‰çš„keä¸­ï¼Œé€‰æ‹©æœ€å°‘ä½¿ç”¨çš„key (LRu) ï¼Œå°†å…¶æ·˜æ±°<br>allkeys-randomï¼šåœ¨æ‰€æœ‰çš„keyä¸­ï¼Œéšæœºé€‰æ‹©ä¸€äº›keyï¼Œå°†å…¶æ·˜æ±°<br>(è¿™é‡Œå…¶å®è¿˜æœ‰volatile-lfuã€allkeys-lfuï¼Œæ‰€è°“&#x3D;&#x3D;LFUç®—æ³•&#x3D;&#x3D;ï¼Œå°±æ˜¯å…ˆè€ƒè™‘é”®å€¼å¯¹è®¿é—®çš„æ¬¡æ•°ï¼Œä¼˜å…ˆæ·˜æ±°è®¿é—®æ¬¡æ•°å°‘çš„é”®å€¼å¯¹ï¼Œå¯¹äºè®¿é—®æ¬¡æ•°ç›¸åŒçš„é”®å€¼å¯¹ï¼Œå†é€‰æ‹©æœ€è¿‘ä¹…æœªè¢«è®¿é—®çš„é”®å€¼å¯¹è¿›è¡Œæ·˜æ±°(ä¹Ÿå°±æ˜¯LRUç®—æ³•))<br>LRUç®—æ³•ï¼šç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œç”¨äºé¡ºåºå­˜å‚¨è¢«è®¿é—®è¿‡çš„keyã€‚åœ¨è®¿é—®æ•°æ®æ—¶ï¼Œæœ€æ–°è®¿é—®è¿‡çš„kevå°†è¢«ç§»åŠ¨åˆ°è¡¨å¤´, å³æœ€è¿‘è®¿é—®çš„keyåœ¨è¡¨å¤´ï¼Œæœ€å°‘è®¿é—®çš„keyåœ¨è¡¨å°¾ã€‚</p>
</li>
<li><p>ï¼Ÿï¼ŸRedisäº‹åŠ¡ã€‚<br>Redisäº‹åŠ¡åŠŸèƒ½æ˜¯é€šè¿‡ MULTIã€EXECã€DISCARD å’Œ WAWATATCH å››ä¸ªåŸè¯­å®ç°çš„<br>Redisä¼šå°†ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤åºåˆ—åŒ–ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚<br>1.redis ä¸æ”¯æŒå›æ»šã€‚åœ¨äº‹åŠ¡å¤±è´¥æ—¶ä¸è¿›è¡Œå›æ»šï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä½™ä¸‹çš„å‘½ä»¤ï¼Œæ‰€ä»¥ Redis çš„å†…éƒ¨å¯ä»¥ä¿æŒç®€å•ä¸”å¿«é€Ÿã€‚<br>2.å¦‚æœåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­çš„å‘½ä»¤å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œï¼›<br>3.å¦‚æœåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­å‡ºç°è¿è¡Œé”™è¯¯ï¼Œé‚£ä¹ˆæ­£ç¡®çš„å‘½ä»¤ä¼šè¢«æ‰§è¡Œã€‚<br>1ï¼‰MULTIå‘½ä»¤ç”¨äºå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå®ƒæ€»æ˜¯è¿”å›OKã€‚ MULTIæ‰§è¡Œä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘æœåŠ¡å™¨å‘é€ä»»æ„å¤šæ¡å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¸ä¼šç«‹å³è¢«æ‰§è¡Œï¼Œè€Œæ˜¯è¢«æ”¾åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå½“EXECå‘½ä»¤è¢«è°ƒç”¨æ—¶ï¼Œæ‰€æœ‰é˜Ÿåˆ—ä¸­çš„å‘½ä»¤æ‰ä¼šè¢«æ‰§è¡Œã€‚<br>2ï¼‰EXECï¼šæ‰§è¡Œæ‰€æœ‰äº‹åŠ¡å—å†…çš„å‘½ä»¤ã€‚è¿”å›äº‹åŠ¡å—å†…æ‰€æœ‰å‘½ä»¤çš„è¿”å›å€¼ï¼ŒæŒ‰å‘½ä»¤æ‰§è¡Œçš„å…ˆåé¡ºåºæ’åˆ—ã€‚å½“æ“ä½œè¢«æ‰“æ–­æ—¶ï¼Œè¿”å›ç©ºå€¼ nil ã€‚<br>3ï¼‰é€šè¿‡è°ƒç”¨DISCARDï¼Œå®¢æˆ·ç«¯å¯ä»¥æ¸…ç©ºäº‹åŠ¡é˜Ÿåˆ—ï¼Œå¹¶æ”¾å¼ƒæ‰§è¡Œäº‹åŠ¡ï¼Œ å¹¶ä¸”å®¢æˆ·ç«¯ä¼šä»äº‹åŠ¡çŠ¶æ€ä¸­é€€å‡ºã€‚<br>4ï¼‰WAWATATCH å‘½ä»¤å¯ä»¥ä¸º Redis äº‹åŠ¡æä¾› check-and-set ï¼ˆCASï¼‰è¡Œä¸ºã€‚ å¯ä»¥ç›‘æ§ä¸€ä¸ªæˆ–å¤šä¸ªé”®ï¼Œä¸€æ—¦å…¶ä¸­æœ‰ä¸€ä¸ªé”®è¢«ä¿®æ”¹ï¼ˆæˆ–åˆ é™¤ï¼‰ï¼Œä¹‹åçš„äº‹åŠ¡å°±ä¸ä¼šæ‰§è¡Œï¼Œç›‘æ§ä¸€ç›´æŒç»­åˆ°EXECå‘½ä»¤</p>
</li>
<li><p>ä¸ºä»€ä¹ˆRedisçš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œæ€ä¹ˆä¿è¯åŸå­æ€§çš„ï¼Ÿ<br>å¯¹äºRedisè€Œè¨€ï¼Œå‘½ä»¤çš„åŸå­æ€§æŒ‡çš„æ˜¯ï¼šä¸€ä¸ªæ“ä½œçš„ä¸å¯ä»¥å†åˆ†ï¼Œæ“ä½œè¦ä¹ˆæ‰§è¡Œï¼Œè¦ä¹ˆä¸æ‰§è¡Œã€‚<br>Redisçš„æ“ä½œä¹‹æ‰€ä»¥æ˜¯åŸå­æ€§çš„ï¼Œæ˜¯å› ä¸ºRedisæ˜¯å•çº¿ç¨‹çš„ã€‚Redisæœ¬èº«æä¾›çš„æ‰€æœ‰APIéƒ½æ˜¯åŸå­æ“ä½œï¼ŒRedisä¸­çš„äº‹åŠ¡å…¶å®æ˜¯è¦ä¿è¯æ‰¹é‡æ“ä½œçš„åŸå­æ€§ã€‚<br>å¤šä¸ªå‘½ä»¤åœ¨å¹¶å‘ä¸­ä¹Ÿæ˜¯åŸå­æ€§çš„å—ï¼Ÿä¸ä¸€å®šï¼Œå°†getå’Œsetæ”¹æˆå•å‘½ä»¤æ“ä½œï¼Œï¼Ÿï¼Ÿï¼Ÿincr ã€‚ä½¿ç”¨Redisçš„äº‹åŠ¡ï¼Œæˆ–è€…ä½¿ç”¨Redis+Lua&#x3D;&#x3D;çš„æ–¹å¼å®ç°ã€‚</p>
</li>
<li><p>Redis çš„åŒæ­¥æœºåˆ¶äº†è§£ä¹ˆï¼Ÿ<br>Redis å¯ä»¥ä½¿ç”¨ä¸»ä»åŒæ­¥ï¼Œä»ä»åŒæ­¥ã€‚ç¬¬ä¸€æ¬¡åŒæ­¥æ—¶ï¼Œä¸»èŠ‚ç‚¹åšä¸€æ¬¡ bgsaveï¼Œå¹¶åŒæ—¶å°†åç»­ä¿®æ”¹æ“ä½œè®°å½•åˆ°å†…å­˜ bufferï¼Œå¾…å®Œæˆåå°† rdbæ–‡ä»¶å…¨é‡åŒæ­¥åˆ°å¤åˆ¶èŠ‚ç‚¹ï¼Œå¤åˆ¶èŠ‚ç‚¹æ¥å—å®Œæˆåå°† rdb é•œåƒåŠ è½½åˆ°å†…å­˜ã€‚åŠ è½½å®Œæˆåï¼Œå†é€šçŸ¥ä¸»èŠ‚ç‚¹å°†æœŸé—´ä¿®æ”¹çš„æ“ä½œè®°å½•åŒæ­¥åˆ°å¤åˆ¶èŠ‚ç‚¹è¿›è¡Œé‡æ”¾å°±å®Œæˆäº†åŒæ­¥è¿‡ç¨‹ã€‚ </p>
</li>
<li><p>Redis å¤šèŠ‚ç‚¹éƒ¨ç½²ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ã€‚</p>
<ol>
<li>ä¸»ä»å¤åˆ¶ï¼ˆMaster-Slave Replicationï¼‰ï¼šä¸»ä»å¤åˆ¶æ˜¯ Redis çš„åŸºæœ¬é«˜å¯ç”¨æ€§æ¶æ„ã€‚ä¸€ä¸ª Redis ä¸»èŠ‚ç‚¹å¯ä»¥æ‹¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£å†™æ“ä½œå’ŒåŒæ­¥æ•°æ®åˆ°ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹è´Ÿè´£å¤åˆ¶ä¸»èŠ‚ç‚¹çš„æ•°æ®ã€‚å½“ä¸»èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œå®ç°æ•…éšœåˆ‡æ¢ã€‚</li>
<li>å“¨å…µæ¨¡å¼ï¼ˆRedis Sentinelï¼‰ï¼šRedis Sentinel æ˜¯ç”¨äºç›‘æ§ Redis å®ä¾‹å¹¶æ”¯æŒè‡ªåŠ¨æ•…éšœè½¬ç§»çš„ç»„ä»¶ã€‚å®ƒå¯ä»¥ç›‘æ§å¤šä¸ª Redis ä¸»ä»å¤åˆ¶é›†ç¾¤ï¼Œå½“ä¸»èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨å°†ä¸€ä¸ªä»èŠ‚ç‚¹æ™‹å‡ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚å“¨å…µæ¨¡å¼æä¾›äº†æ›´å¼ºå¤§çš„æ•…éšœæ£€æµ‹å’Œè‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½ã€‚</li>
<li>é›†ç¾¤æ¨¡å¼ï¼ˆRedis Clusterï¼‰ï¼šRedis Cluster æ˜¯ Redis æä¾›çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆï¼Œç”¨äºåœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´åˆ†ç‰‡å­˜å‚¨æ•°æ®ã€‚Redis Cluster å°†æ•°æ®åˆ†æˆå¤šä¸ªæ§½ï¼ˆslotï¼‰ï¼Œæ¯ä¸ªæ§½å¯ä»¥åˆ†é…ç»™é›†ç¾¤ä¸­çš„ä¸åŒèŠ‚ç‚¹ã€‚å®ƒæ”¯æŒæ¨ªå‘æ‰©å±•ã€é«˜å¯ç”¨æ€§å’Œè‡ªåŠ¨æ•°æ®åˆ†ç‰‡ã€‚å½“é›†ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶å’Œé‡æ–°åˆ†ç‰‡æ¥ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚</li>
<li>ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆï¼šé™¤äº† Redis å®˜æ–¹æä¾›çš„æ–¹æ¡ˆå¤–ï¼Œè¿˜æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆå¯ä»¥ç”¨äºæ„å»º Redis çš„å¤šèŠ‚ç‚¹éƒ¨ç½²ï¼Œæ¯”å¦‚ä¸€äº›ä»£ç†è½¯ä»¶æˆ–è€…ä¸­é—´ä»¶ï¼Œå®ƒä»¬æä¾›äº†æ›´å¤šé«˜çº§åŠŸèƒ½ï¼Œæ¯”å¦‚è‡ªåŠ¨è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ç­‰ã€‚</li>
</ol>
</li>
<li><p>Redis é›†ç¾¤</p>
<ul>
<li>1ã€ä¸»ä»å¤åˆ¶ï¼šRedis é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹é€šå¸¸éƒ½æœ‰ä¸»èŠ‚ç‚¹å’Œè‹¥å¹²ä¸ªä»èŠ‚ç‚¹ã€‚ä¸»èŠ‚ç‚¹è´Ÿè´£å¤„ç†å†™æ“ä½œå’Œéƒ¨åˆ†è¯»æ“ä½œï¼Œè€Œä»èŠ‚ç‚¹è´Ÿè´£å¤åˆ¶ä¸»èŠ‚ç‚¹çš„æ•°æ®ï¼Œç”¨äºè¯»æ“ä½œå’Œæ•…éšœæ¢å¤ã€‚ä¸»ä»å¤åˆ¶å¯ä»¥æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œå®¹é”™èƒ½åŠ›ã€‚Redis Sentinal ç€çœ¼äºé«˜å¯ç”¨ï¼Œåœ¨ master å®•æœºæ—¶ä¼šè‡ªåŠ¨å°† slave æå‡ä¸ºmasterï¼Œç»§ç»­æä¾›æœåŠ¡ã€‚</li>
<li>2ã€æ•°æ®åˆ†ç‰‡ï¼šRedis é›†ç¾¤é€šè¿‡åˆ†ç‰‡æœºåˆ¶å°†æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†æ•°æ®çš„å­˜å‚¨å’Œå¤„ç†ã€‚è¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›å’Œæ•°æ®å­˜å‚¨å®¹é‡ã€‚Redis Cluster ç€çœ¼äºæ‰©å±•æ€§ï¼Œåœ¨å•ä¸ª redis å†…å­˜ä¸è¶³æ—¶ï¼Œä½¿ç”¨ Cluster è¿›è¡Œåˆ†ç‰‡å­˜å‚¨ã€‚</li>
<li>3ã€æ•°æ®åŒæ­¥ï¼šåœ¨ Redis é›†ç¾¤ä¸­ï¼Œæ•°æ®åŒæ­¥æ˜¯ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„å…³é”®ã€‚ä¸»èŠ‚ç‚¹å°†å†™æ“ä½œåŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼Œç¡®ä¿æ•°æ®åœ¨å„ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„åŒæ­¥ã€‚åœ¨è¯»æ“ä½œæ—¶ï¼Œå¯ä»¥ä»ä¸»èŠ‚ç‚¹æˆ–è€…ä»èŠ‚ç‚¹è¯»å–æ•°æ®ï¼Œä½†è¦æ³¨æ„å¯èƒ½å­˜åœ¨æ•°æ®çš„å»¶è¿Ÿå’Œä¸ä¸€è‡´æ€§ã€‚</li>
<li>Redis é›†ç¾¤çš„ä¸»ä»å¤åˆ¶æ¨¡å‹æ˜¯æ€æ ·çš„ï¼Ÿ<br>  ä¸ºäº†ä½¿åœ¨éƒ¨åˆ†èŠ‚ç‚¹å¤±è´¥æˆ–è€…å¤§éƒ¨åˆ†èŠ‚ç‚¹æ— æ³•é€šä¿¡çš„æƒ…å†µä¸‹é›†ç¾¤ä»ç„¶å¯ç”¨ï¼Œæ‰€ä»¥é›†ç¾¤ä½¿ç”¨äº†ä¸»ä»å¤åˆ¶æ¨¡å‹,æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰ N-1 ä¸ªå¤åˆ¶å“. </li>
<li>åœºæ™¯ï¼šæŸ¥è¯¢ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹æ•°æ®ä¸ºä»€ä¹ˆèŠ±äº†5ç§’ï¼Ÿ<br>  Redis é›†ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹ç½‘ç»œè¿æ¥ä¸ç¨³å®šæˆ–è€…ç½‘ç»œå»¶è¿Ÿè¾ƒé«˜ï¼Œæˆ–è€…æŸä¸ªèŠ‚ç‚¹æ•°æ®è´Ÿè½½è¾ƒé«˜ã€‚<br>  å¦‚æœæŸ¥è¯¢çš„æ•°æ®æ­£å¥½ä½äº Redis é›†ç¾¤ä¸­çš„æŸä¸ªåˆ†ç‰‡ï¼Œè€Œè¯¥åˆ†ç‰‡çš„ä¸»èŠ‚ç‚¹æˆ–è€…ä»èŠ‚ç‚¹è´Ÿè½½è¾ƒé«˜æˆ–è€…ç½‘ç»œå»¶è¿Ÿè¾ƒé«˜ï¼Œä¼šå¯¼è‡´æŸ¥è¯¢æ—¶é—´å˜é•¿ã€‚</li>
<li>Redis é›†ç¾¤ä¼šæœ‰å†™æ“ä½œä¸¢å¤±å—ï¼š Redis å¹¶ä¸èƒ½ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œå®é™…ä¸­é›†ç¾¤åœ¨ç‰¹å®šçš„æ¡ä»¶ä¸‹å¯èƒ½ä¼šä¸¢å¤±å†™æ“ä½œã€‚</li>
<li>é›†ç¾¤ä¹‹é—´æ˜¯å¦‚ä½•å¤åˆ¶çš„ï¼šå¼‚æ­¥å¤åˆ¶ </li>
<li>é›†ç¾¤æœ€å¤§èŠ‚ç‚¹ä¸ªæ•°æ˜¯å¤šå°‘ï¼š 6384 ä¸ª </li>
<li>é›†ç¾¤å¦‚ä½•é€‰æ‹©æ•°æ®åº“ï¼šRedis é›†ç¾¤ç›®å‰æ— æ³•åšæ•°æ®åº“é€‰æ‹©ï¼Œé»˜è®¤åœ¨ 0 æ•°æ®åº“ã€‚</li>
</ul>
</li>
<li><p>Redis å’Œ Mysql å¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´ï¼Ÿ<br>1ã€å…ˆæ›´æ–° Mysqlï¼Œå†æ›´æ–° Redisï¼Œå¦‚æœæ›´æ–° Rediså¤±è´¥ï¼Œå¯èƒ½ä»ç„¶ä¸ä¸€è‡´<br>2ã€å…ˆåˆ é™¤ Redisç¼“å­˜æ•°æ®ï¼Œå†æ›´æ–° MySqlï¼Œå†æ¬¡æŸ¥è¯¢çš„æ—¶å€™åœ¨å°†æ•°æ®æ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œè¿™ç§æ–¹æ¡ˆèƒ½è§£å†³æ–¹æ¡ˆ1çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨é«˜å¹¶å‘ä¸‹æ€§èƒ½è¾ƒä½ï¼Œè€Œä¸”ä»ç„¶ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼šæ¯”å¦‚çº¿ç¨‹1åˆ é™¤äº†Redisç¼“å­˜æ•°æ®ï¼Œæ­£åœ¨æ›´æ–° MySqlï¼Œæ­¤æ—¶å¦å¤–ä¸€ä¸ªæŸ¥è¯¢å†æŸ¥è¯¢ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠ MySqlä¸­è€æ•°æ®åˆæŸ¥åˆ° Redisä¸­<br>3ã€<strong>å»¶æ—¶åŒåˆ ï¼Œ</strong>æ­¥èšæ˜¯ï¼šå…ˆåˆ é™¤ Rediså­˜æ•°ï¼Œå†æ›´æ–° MySqlï¼Œå»¶è¿Ÿå‡ ç™¾æ¯«ç§’é™¤ Rediså­˜æ•°æ®ï¼Œè¿™æ ·å°±ç®—åœ¨æ›´æ–° MySqlæ—¶ï¼Œæœ‰å…¶ä»–çº¿ç¨‹è¯»äº†Mysqlï¼ŒæŠŠè€æ•°æ®è¯»åˆ°äº† Redisä¸­ï¼Œé‚£ä¹ˆä¹Ÿä¼šè¢«åˆ¶é™¤æ‰ï¼Œä»è€ŒæŠŠæ•°æ®ä¿æŒä¸€è‡´<br>4ã€å¦‚æœéœ€è¦åœ¨æç«¯æƒ…å†µä¸‹ä»ç„¶ä¿è¯ Redis å’Œ Mysql çš„æ•°æ®ä¸€è‡´æ€§ï¼Œå°±åªèƒ½é‡‡ç”¨æœ€<strong>ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ</strong>ã€‚æ¯”å¦‚åŸºäº RocketMQ çš„å¯é æ€§æ¶ˆæ¯é€šä¿¡ï¼Œæ¥å®ç°æœ€ç»ˆä¸€è‡´æ€§ï¼šæŠŠï¼ˆæ›´æ–°redisï¼‰å¤±è´¥çš„è¯·æ±‚å†™å…¥MQäº‹åŠ¡æ¶ˆæ¯ï¼Œç„¶åå¼‚æ­¥é‡è¯•ï¼Œç¡®ä¿æˆåŠŸã€‚è¿˜å¯ä»¥ç›´æ¥é€šè¿‡ Canal ç»„ä»¶ï¼Œç›‘æ§ Mysql ä¸­ binlog çš„æ—¥å¿—ï¼ŒæŠŠæ›´æ–°åçš„æ•°æ®åŒæ­¥åˆ° Redis é‡Œé¢ã€‚ï¼Ÿï¼Ÿ</p>
</li>
</ul>
<hr>

<h2 id="æ¶ˆæ¯é˜Ÿåˆ—"><a href="#æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—"></a>æ¶ˆæ¯é˜Ÿåˆ—</h2><ul>
<li><p>æ¶ˆæ¯é˜Ÿåˆ— mq</p>
<ul>
<li>æ¶ˆæ¯é˜Ÿåˆ— Message Queueï¼Œç®€ç§° MQã€‚æ˜¯ä¸€ç§åº”ç”¨é—´çš„é€šä¿¡æ–¹å¼ï¼Œä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆã€‚<ul>
<li>ç”Ÿäº§è€…ï¼šProducerï¼Œæ¶ˆæ¯çš„äº§ç”Ÿè€…ä¸è°ƒç”¨ç«¯ï¼Œä¸»è¦è´Ÿè´£æ¶ˆæ¯æ‰€æ‰¿è½½çš„ä¸šåŠ¡ä¿¡æ¯çš„å®ä¾‹åŒ–ï¼Œæ˜¯ä¸€ä¸ªé˜Ÿåˆ—çš„å‘èµ·æ–¹</li>
<li>ä»£ç†ï¼šBrokerï¼Œä¸»è¦çš„å¤„ç†å•å…ƒï¼Œè´Ÿè´£æ¶ˆæ¯çš„å­˜å‚¨ã€æŠ•é€’ã€åŠå„ç§é˜Ÿåˆ—é™„åŠ åŠŸèƒ½çš„å®ç°ï¼Œæ˜¯æ¶ˆæ¯é˜Ÿåˆ—æœ€æ ¸å¿ƒçš„ç»„æˆéƒ¨åˆ†</li>
<li>æ¶ˆè´¹è€…ï¼šConsumerï¼Œä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„ç»ˆç«¯ï¼Œä¹Ÿæ˜¯æ¶ˆæ¯çš„è°ƒç”¨ç«¯ï¼Œå…·ä½“æ˜¯æ ¹æ®æ¶ˆæ¯æ‰¿è½½çš„ä¿¡æ¯ï¼Œå¤„ç†å„ç§ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
</li>
<li>mqç†è§£<ul>
<li>æ¶ˆæ¯è·¯ç”±<ul>
<li>è·¯ç”±å™¨çš„ç±»å‹å’Œç»‘å®šè§„åˆ™</li>
</ul>
</li>
<li>æ¶ˆæ¯ä¸ä¸¢å¤±<ul>
<li>æ¶ˆæ¯ç¡®è®¤æœºåˆ¶<ul>
<li>é…ç½®åˆé€‚çš„æ¶ˆæ¯TTL</li>
<li>å¤‡ä»½é˜Ÿåˆ—</li>
</ul>
</li>
</ul>
</li>
<li>æ¶ˆæ¯æ¶ˆè´¹<ul>
<li>é¡ºåºæ¶ˆè´¹<ul>
<li>æ¶ˆæ¯ä¼˜å…ˆçº§</li>
<li>å•çº¿ç¨‹æ¶ˆè´¹</li>
</ul>
</li>
<li>é‡å¤æ¶ˆè´¹<ul>
<li>durableå‚æ•°ï¼štrue</li>
<li>deliveryModeå‚æ•°ï¼š1ä¸ºéæŒä¹…ï¼Œ2ä¸ºæŒä¹…åŒ–</li>
</ul>
</li>
</ul>
</li>
<li>æ¶ˆæ¯æŒä¹…åŒ–</li>
</ul>
</li>
<li>mqåº”ç”¨<ul>
<li>å¼‚æ­¥å¤„ç†</li>
<li>åº”ç”¨è§£è€¦</li>
<li>æµé‡å‰Šå³°<ul>
<li>é™é€Ÿ</li>
<li>æ­»æ€§é˜Ÿåˆ—</li>
<li>æ¶ˆæ¯ä¼˜å…ˆçº§</li>
<li>å…¬å¹³åˆ†å‘</li>
<li>é™æµ</li>
<li>å»¶è¿Ÿé˜Ÿåˆ—</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>æ¶ˆæ¯é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯è¾ƒå¤šï¼Œå¸¸ç”¨çš„å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š</p>
<ul>
<li><strong>å¼‚æ­¥å¤„ç†ï¼š</strong>ä¸»è¦åº”ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚ä¸ä¸¥æ ¼çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šç”¨æˆ·æ³¨å†Œå‘é€éªŒè¯ç ã€ä¸‹å•é€šçŸ¥ã€å‘é€ä¼˜æƒ åˆ¸ç­‰ç­‰ã€‚æœåŠ¡æ–¹åªéœ€è¦æŠŠåå•†å¥½çš„æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå‰©ä¸‹çš„ç”±æ¶ˆè´¹æ¶ˆæ¯çš„æœåŠ¡å»å¤„ç†ï¼Œä¸ç”¨ç­‰å¾…æ¶ˆè´¹æœåŠ¡è¿”å›ç»“æœã€‚</li>
<li><strong>åº”ç”¨è§£è€¦ï¼š</strong>å¯ä»¥çœ‹ä½œæ˜¯æŠŠç›¸å…³ä½†è€¦åˆåº¦ä¸é«˜çš„ç³»ç»Ÿè”ç³»èµ·æ¥ã€‚æ¯”å¦‚è®¢å•ç³»ç»Ÿä¸ WMSã€EHR ç³»ç»Ÿï¼Œæœ‰å…³è”ä½†ä¸å“ªä¹ˆç´§å¯†ï¼Œæ¯ä¸ªç³»ç»Ÿä¹‹é—´åªéœ€è¦æŠŠçº¦å®šçš„æ¶ˆæ¯å‘é€åˆ° MQï¼Œå¦å¤–çš„ç³»ç»Ÿå»æ¶ˆè´¹å³å¯ã€‚è§£å†³äº†å„ä¸ªç³»ç»Ÿå¯ä»¥é‡‡ç”¨ä¸åŒçš„æ¶æ„ã€è¯­è¨€æ¥å®ç°ï¼Œä»è€Œå¤§å¤§å¢åŠ äº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚</li>
<li><strong>æµé‡å‰Šå³°ï¼š</strong>ä¸€èˆ¬åº”ç”¨åœ¨å¤§æµé‡å…¥å£ä¸”çŸ­æ—¶é—´å†…ä¸šåŠ¡éœ€æ±‚å¤„ç†ä¸å®Œçš„æœåŠ¡ä¸­å¿ƒï¼Œä¸ºäº†æƒè¡¡é«˜å¯ç”¨ï¼ŒæŠŠå¤§é‡çš„å¹¶è¡Œä»»åŠ¡å‘é€åˆ° MQ ä¸­ï¼Œä¾æ® MQ çš„å­˜å‚¨åŠåˆ†å‘åŠŸèƒ½ï¼Œå¹³ç¨³çš„å¤„ç†åç»­çš„ä¸šåŠ¡ï¼Œèµ·åˆ°ä¸€ä¸ªå¤§æµé‡ç¼“å†²çš„ä½œç”¨ã€‚</li>
</ul>
</li>
<li><p>å¦‚ä½•è¿›è¡Œæ¶ˆæ¯é˜Ÿåˆ—é€‰å‹?</p>
<ul>
<li>Kafkaï¼šæ—¥å¿—åˆ†æã€å¤§æ•°æ®é‡‡é›†<ul>
<li>ä¸€ç§é«˜ååé‡ã€åˆ†å¸ƒå¼ã€åŸºäºå‘å¸ƒ&#x2F;è®¢é˜…çš„æ¶ˆæ¯ç³»ç»Ÿï¼Œæœ€åˆç”± LinkedIn å…¬å¸å¼€å‘ï¼Œä½¿ç”¨Scala è¯­è¨€ç¼–å†™ï¼Œç›®å‰æ˜¯ Apache çš„å¼€æºé¡¹ç›®ã€‚</li>
<li>ä¼˜ç‚¹: å„åé‡éå¸¸å¤§ï¼Œæ€§èƒ½éå¸¸å¥½ï¼Œé›†ç¾¤é«˜å¯ç”¨ã€‚</li>
<li>ç¼ºç‚¹:ä¼šä¸¢æ•°æ®ï¼ŒåŠŸèƒ½æ¯”è¾ƒå•ä¸€</li>
</ul>
</li>
<li>RabbitMQï¼šå°è§„æ¨¡åœºæ™¯<ul>
<li>æ˜¯ä»€ä¹ˆï¼šé‡‡ç”¨ AMQP é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®çš„ä¸€ç§æ¶ˆæ¯é˜Ÿåˆ—æŠ€æœ¯,æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æ¶ˆè´¹å¹¶ä¸éœ€è¦ç¡®ä¿æä¾›æ–¹å­˜åœ¨,å®ç°äº†æœåŠ¡ä¹‹é—´çš„é«˜åº¦è§£è€¦</li>
<li>ä¼˜ç‚¹: æ¶ˆæ¯å¯é æ€§é«˜ï¼ŒåŠŸèƒ½å…¨é¢ã€‚</li>
<li>ç¼ºç‚¹:ååé‡æ¯”è¾ƒä½ï¼Œæ¶ˆæ¯ç§¯ç´¯ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚erlangè¯­è¨€ä¸å¥½å®šåˆ¶.</li>
</ul>
</li>
<li>RocketMQï¼šå‡ ä¹æ˜¯å…¨åœºæ™¯<ul>
<li>ä¼˜ç‚¹:é«˜ååã€é«˜æ€§èƒ½ã€é«˜å¯ç”¨ï¼ŒåŠŸèƒ½éå¸¸å…¨é¢ã€‚</li>
<li>ç¼ºç‚¹:å¼€æºç‰ˆåŠŸèƒ½ä¸å¦‚äº‘ä¸Šå•†ä¸šç‰ˆã€‚å®˜æ–¹æ–‡æ¡£å’Œå‘¨è¾¹ç”Ÿæ€è¿˜ä¸å¤Ÿæˆç†Ÿã€‚å®¢æˆ·ç«¯åªæ”¯æŒjavaã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h2><ul>
<li><p>kafka <a target="_blank" rel="noopener" href="https://www.yuque.com/itwanger/gykdzg/ngd5g3glaxii4h6g">https://www.yuque.com/itwanger/gykdzg/ngd5g3glaxii4h6g</a> udd1</p>
</li>
<li><p>Kafka ä¼˜ç¼ºç‚¹ï¼Ÿ</p>
<ul>
<li>ä¼˜ç‚¹<br>  é«˜æ€§èƒ½ã€é«˜ååé‡ã€ä½å»¶è¿Ÿ:Kafka ç”Ÿäº§å’Œæ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦éƒ½è¾¾åˆ°æ¯ç§’10ä¸‡çº§é«˜å¯ç”¨:æ‰€æœ‰æ¶ˆæ¯æŒä¹…åŒ–å­˜å‚¨åˆ°ç£ç›˜ï¼Œå¹¶æ”¯æŒæ•°æ®å¤‡ä»½é˜²æ­¢æ•°æ®ä¸¢å¤±<br>  é«˜å¹¶å‘:æ”¯æŒæ•°åƒä¸ªå®¢æˆ·ç«¯åŒæ—¶è¯»å†™<br>  å®¹é”™æ€§:å…è®¸é›†ç¾¤ä¸­èŠ‚ç‚¹å¤±è´¥(è‹¥å‰¯æœ¬æ•°é‡ä¸ºnï¼Œåˆ™å…è®¸ n-1 ä¸ªèŠ‚ç‚¹å¤±è´¥)<br>  é«˜æ‰©å±•æ€§:Kafka é›†ç¾¤æ”¯æŒçƒ­ä¼¸ç¼©ï¼Œæ— é¡»åœæœº</li>
<li>ç¼ºç‚¹<br>  æ²¡æœ‰å®Œæ•´çš„ç›‘æ§å·¥å…·é›†<br>  ä¸æ”¯æŒé€šé…ç¬¦ä¸»é¢˜é€‰æ‹©</li>
</ul>
</li>
<li><p>kafka æ¶æ„ï¼Ÿ</p>
<ul>
<li>Kafka å°†æ¶ˆæ¯ä»¥ topic ä¸ºå•ä½è¿›è¡Œå½’çº³ï¼Œå‘å¸ƒæ¶ˆæ¯çš„ç¨‹åºç§°ä¸º Producerï¼Œæ¶ˆè´¹æ¶ˆæ¯çš„ç¨‹åºç§°ä¸º Consumerã€‚å®ƒæ˜¯ä»¥é›†ç¾¤çš„æ–¹å¼è¿è¡Œï¼Œå¯ä»¥ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡ç»„æˆï¼Œæ¯ä¸ªæœåŠ¡å«åšä¸€ä¸ª Brokerï¼ŒProducer é€šè¿‡ç½‘ç»œå°†æ¶ˆæ¯å‘é€åˆ° kafka é›†ç¾¤ï¼Œé›†ç¾¤å‘æ¶ˆè´¹è€…æä¾›æ¶ˆæ¯ï¼Œbroker åœ¨ä¸­é—´èµ·åˆ°ä¸€ä¸ªä»£ç†ä¿å­˜æ¶ˆæ¯çš„ä¸­è½¬ç«™ã€‚</li>
<li>kafka ç»„æˆï¼š<ol>
<li>Producerï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œå‘å¸ƒæ¶ˆæ¯åˆ°Kafkaé›†ç¾¤çš„ç»ˆç«¯æˆ–æœåŠ¡</li>
<li>Brokerï¼š<strong>ä¸€ä¸ª Kafka èŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ª Brokerï¼Œå¤šä¸ªBrokerå¯ç»„æˆä¸€ä¸ªKafka é›†ç¾¤</strong><br>  å¦‚æœæŸä¸ª Topic ä¸‹æœ‰nä¸ªPartition ä¸”é›†ç¾¤æœ‰nä¸ªBrokerï¼Œé‚£ä¹ˆæ¯ä¸ª Brokerä¼šå­˜å‚¨è¯¥ Topic ä¸‹çš„ä¸€ä¸ª Partition<br>  å¦‚æœæŸä¸ª Topic ä¸‹æœ‰nä¸ªPartition ä¸”é›†ç¾¤ä¸­æœ‰ m+nä¸ªBrokerï¼Œé‚£ä¹ˆåªæœ‰nä¸ªBrokerä¼šå­˜å‚¨è¯¥Topicä¸‹çš„ä¸€ä¸ªPartition<br>  å¦‚æœæŸä¸ª Topic ä¸‹æœ‰nä¸ªPartition ä¸”é›†ç¾¤ä¸­çš„Brokeræ•°é‡å°äº nï¼Œé‚£ä¹ˆä¸€ä¸ª Broker ä¼šå­˜å‚¨è¯¥ Topic ä¸‹çš„ä¸€æˆ–å¤šä¸ª Partitionï¼Œè¿™ç§æƒ…å†µå°½é‡é¿å…ï¼Œä¼šå¯¼è‡´é›†ç¾¤æ•°æ®ä¸å‡è¡¡</li>
<li>Topicï¼šé€»è¾‘æ¦‚å¿µï¼Œæ¶ˆæ¯ä¸»é¢˜ï¼Œæ¯æ¡å‘å¸ƒåˆ°Kafkaé›†ç¾¤çš„æ¶ˆæ¯éƒ½ä¼šå½’é›†äºæ­¤ï¼Œ<strong>Kafkaæ˜¯é¢å‘Topic çš„</strong></li>
<li>Partitionï¼šæ˜¯Topicåœ¨ç‰©ç†ä¸Šçš„åˆ†åŒºï¼Œä»Partitionæ¶ˆè´¹ä¿¡æ¯ã€‚ä¸€ä¸ªTopicå¯ä»¥åˆ†ä¸ºå¤šä¸ªPartitionï¼Œæ¯ä¸ªPartitionæ˜¯ä¸€ä¸ªæœ‰åºçš„ä¸å¯å˜çš„è®°å½•åºåˆ—ã€‚å•ä¸€ä¸»é¢˜ä¸­çš„åˆ†åŒºæœ‰åºï¼Œä½†æ— æ³•ä¿è¯ä¸»é¢˜ä¸­æ‰€æœ‰åˆ†åŒºçš„æ¶ˆæ¯æœ‰åºã€‚</li>
<li>Consumerï¼šä»Kafkaé›†ç¾¤ä¸­æ¶ˆè´¹æ¶ˆæ¯çš„ç»ˆç«¯æˆ–æœåŠ¡</li>
<li>Consumer Groupï¼šæ¯ä¸ªConsumeréƒ½å±äºä¸€ä¸ªConsumer Groupï¼Œæ¯æ¡æ¶ˆæ¯åªèƒ½è¢«Consumer Groupä¸­çš„ä¸€ä¸ªConsumeræ¶ˆè´¹ï¼Œä½†å¯ä»¥è¢«å¤šä¸ªConsumer Groupæ¶ˆè´¹ã€‚</li>
<li>Zookeeperï¼šKafka é€šè¿‡Zookeeperæ¥å­˜å‚¨é›†ç¾¤ä¸­çš„ meta æ¶ˆæ¯ï¼ˆ0.9ç‰ˆæœ¬åï¼Œå°†æ¶ˆæ¯åç§»é‡offsetå­˜å‚¨æœ¬åœ°ï¼‰  <img src="https://github.com/leo710aka/bk/blob/main/job14.png?raw=true" width="550" height="300" alt=""></li>
</ol>
</li>
</ul>
</li>
<li><p>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ª Broker æ˜¯å¦è¿˜æœ‰æ•ˆ<br>1.Brokerå¿…é¡»å¯ä»¥ç»´æŠ¤å’ŒZooKeeperçš„è¿æ¥ï¼ŒZookeeperé€šè¿‡å¿ƒè·³æœºåˆ¶æ£€æŸ¥æ¯ä¸ªç»“ç‚¹çš„è¿æ¥<br>2.å¦‚æœBrokeræ˜¯ä¸ªFollowerï¼Œå®ƒå¿…é¡»èƒ½åŠæ—¶åŒæ­¥Leaderçš„å†™æ“ä½œï¼Œå»¶æ—¶ä¸èƒ½å¤ªä¹…ã€‚</p>
</li>
<li><p>kafkaåˆ†åŒºï¼Œpartition</p>
<ul>
<li>åˆ†åŒºçš„æ¦‚å¿µ<br>  ä¸»é¢˜æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œè¿˜å¯ä»¥ç»†åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼Œä¸€ä¸ªåˆ†åŒºåªå±äºå•ä¸ªä¸»é¢˜ï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿä¼šæŠŠåˆ†åŒºç§°ä¸ºä¸»é¢˜åˆ†åŒº(Topic-Partition)ã€‚åŒä¸€ä¸»é¢˜ä¸‹çš„ä¸åŒåˆ†åŒºåŒ…å«çš„æ¶ˆæ¯æ˜¯ä¸åŒçš„ï¼Œåˆ†åŒºåœ¨å­˜å‚¨å±‚é¢å¯ä»¥çœ‹åšä¸€ä¸ªå¯è¿½åŠ çš„ æ—¥å¿—æ–‡ä»¶ ï¼Œæ¶ˆæ¯åœ¨è¢«è¿½åŠ åˆ°åˆ†åŒºæ—¥å¿—æ–‡ä»¶çš„æ—¶å€™éƒ½ä¼šåˆ†é…ä¸€ä¸ªç‰¹å®šçš„åç§»é‡(offset)ã€‚</li>
<li>offsetï¼šæ˜¯æ¶ˆæ¯åœ¨åˆ†åŒºä¸­çš„å”¯ä¸€æ ‡è¯†ï¼Œè¡¨ç¤ºåœ¨åˆ†åŒºä¸­æ¶ˆè´¹åˆ°æ¶ˆæ¯çš„ä½ç½®ï¼›<br>  kafka é€šè¿‡å®ƒæ¥ä¿è¯æ¶ˆæ¯åœ¨åˆ†åŒºå†…çš„é¡ºåºæ€§ï¼Œä¸è¿‡ offset å¹¶ä¸è·¨è¶Šåˆ†åŒºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œkafkaä¿è¯çš„æ˜¯åˆ†åŒºæœ‰åºè€Œä¸æ˜¯ä¸»é¢˜æœ‰åºã€‚</li>
<li>åœ¨åˆ†åŒºä¸­åˆå¼•å…¥äº†å¤šå‰¯æœ¬(replica)çš„æ¦‚å¿µï¼Œé€šè¿‡å¢åŠ å‰¯æœ¬æ•°é‡å¯ä»¥æé«˜å®¹ç¾èƒ½åŠ›ã€‚åŒä¸€åˆ†åŒºçš„ä¸åŒå‰¯æœ¬ä¸­ä¿å­˜çš„æ˜¯ç›¸åŒçš„æ¶ˆæ¯ã€‚å‰¯æœ¬ä¹‹é—´æ˜¯ä¸€ä¸»å¤šä»çš„å…³ç³»ï¼Œå…¶ä¸­ä¸»å‰¯æœ¬è´Ÿè´£è¯»å†™ï¼Œä»å‰¯æœ¬åªè´Ÿè´£æ¶ˆæ¯åŒæ­¥ã€‚å‰¯æœ¬å¤„äºä¸åŒçš„brokerä¸­ï¼Œå½“ä¸»å‰¯æœ¬å‡ºç°å¼‚å¸¸ï¼Œä¾¿ä¼šåœ¨ä»å‰¯æœ¬ä¸­æå‡ä¸€ä¸ªä¸ºä¸»å‰¯æœ¬ã€‚</li>
<li>Kafka ä¸­åˆ†åŒºçš„åŸåˆ™ï¼Ÿï¼Ÿï¼Ÿ<br>  1.æŒ‡æ˜Partitionçš„æƒ…å†µä¸‹ï¼Œç›´æ¥å°†æŒ‡æ˜çš„å€¼ä½œä¸ºPartitionå€¼<br>  2.æ²¡æœ‰æŒ‡æ˜Partitionå€¼ä½†æœ‰ key çš„æƒ…å†µä¸‹ï¼Œå°† key çš„ Hash å€¼ä¸ topicçš„Partitionå€¼è¿›è¡Œå–ä½™å¾—åˆ°Partitionå€¼<br>  3.æ—¢æ²¡æœ‰Partitionå€¼åˆæ²¡æœ‰ key å€¼çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶éšæœºç”Ÿæˆä¸€ä¸ªæ•´æ•°(åé¢æ¯æ¬¡è°ƒç”¨åœ¨è¿™ä¸ªæ•´æ•°ä¸Šè‡ªå¢)ï¼Œå°†è¿™ä¸ªå€¼ä¸Topicå¯ç”¨çš„Partitionæ€»æ•°å–ä½™å¾—åˆ°Parittionå€¼ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„round-robin ç®—æ³•</li>
<li>Kafka ä¸ºä»€ä¹ˆè¦æŠŠæ¶ˆæ¯åˆ†åŒº<br>  1.æ–¹ä¾¿åœ¨é›†ç¾¤ä¸­æ‰©å±•ï¼Œæ¯ä¸ª Partition å¯ç”¨é€šè¿‡è°ƒæ•´ä»¥é€‚åº”å®ƒæ‰€åœ¨çš„æœºå™¨ï¼Œè€Œä¸€ä¸ªTopicåˆå¯ä»¥æœ‰å¤šä¸ªPartitionç»„æˆï¼Œå› æ­¤æ•´ä¸ªé›†ç¾¤å°±å¯ä»¥é€‚åº”ä»»æ„å¤§å°çš„æ•°æ®äº†<br>  2.å¯ä»¥æé«˜å¹¶å‘ï¼Œå› ä¸ºå¯ä»¥ä»¥Partitionä¸ºå•ä½è¿›è¡Œè¯»å†™</li>
</ul>
</li>
<li><p>kafka æ¶ˆè´¹æ¨¡å¼</p>
<ol>
<li><strong>å‘å¸ƒ-è®¢é˜…æ¨¡å¼</strong>ï¼š<ul>
<li>åœ¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼ä¸­ï¼Œæ¶ˆæ¯è¢«å‘é€åˆ°ä¸€ä¸ªä¸»é¢˜ï¼ˆTopicï¼‰ï¼Œè€Œæ¯ä¸ªæ¶ˆè´¹è€…éƒ½å¯ä»¥ç‹¬ç«‹åœ°è®¢é˜…è¿™ä¸ªä¸»é¢˜å¹¶æ¥æ”¶æ¶ˆæ¯ã€‚</li>
<li>Push æ¨¡å¼ï¼šä¸€ç§ä¸»åŠ¨æ¨é€çš„æ–¹å¼ï¼Œå³æ¶ˆæ¯ç”Ÿäº§è€…ï¼ˆPublisherï¼‰å°†æ¶ˆæ¯ç›´æ¥æ¨é€ç»™æ„Ÿå…´è¶£çš„è®¢é˜…è€…ï¼ˆSubscriberï¼‰ã€‚<br> è¿™ç§æ¨¡å¼ä¸‹ï¼Œè®¢é˜…è€…æ— éœ€ä¸»åŠ¨æ‹‰å–æ¶ˆæ¯ï¼Œè€Œæ˜¯ç­‰å¾…æ¶ˆæ¯è¢«æ¨é€è¿‡æ¥ã€‚å› æ­¤ï¼Œæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶æ˜¯å¼‚æ­¥çš„ã€‚</li>
<li>Pull æ¨¡å¼ï¼šä¸€ç§è¢«åŠ¨è·å–çš„æ–¹å¼ï¼Œå³è®¢é˜…è€…éœ€è¦ä¸»åŠ¨å‘æ¶ˆæ¯æœåŠ¡å™¨è¯·æ±‚æ¶ˆæ¯ï¼Œç„¶åæ¶ˆæ¯æœåŠ¡å™¨æ‰ä¼šå°†æ¶ˆæ¯å‘é€ç»™è®¢é˜…è€…ã€‚<br> åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œè®¢é˜…è€…éœ€è¦å‘¨æœŸæ€§åœ°æˆ–è€…æ ¹æ®éœ€è¦å‘èµ·æ‹‰å–æ¶ˆæ¯çš„è¯·æ±‚ï¼Œæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶æ˜¯åŒæ­¥çš„ã€‚</li>
</ul>
</li>
<li><strong>æ¶ˆè´¹è€…ç»„æ¨¡å¼</strong>ï¼š<ul>
<li>åœ¨æ¶ˆè´¹è€…ç»„æ¨¡å¼ä¸­ï¼Œå¤šä¸ªæ¶ˆè´¹è€…è¢«ç»„ç»‡æˆä¸€ä¸ªæ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ†åŒºï¼ˆPartitionï¼‰åªèƒ½è¢«åŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„ä¸­çš„ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†ã€‚</li>
<li>å½“ä¸€ä¸ªæ–°çš„æ¶ˆè´¹è€…åŠ å…¥æ¶ˆè´¹è€…ç»„æ—¶ï¼Œå®ƒä¼šè´Ÿè´£æ¶ˆè´¹æœªè¢«åˆ†é…çš„åˆ†åŒºã€‚</li>
<li>è¿™ç§æ¨¡å¼å¯ä»¥å®ç°æ¶ˆæ¯çš„è´Ÿè½½å‡è¡¡å’Œæ°´å¹³æ‰©å±•ï¼Œé€‚åˆäºå¤„ç†å¤§é‡æ¶ˆæ¯çš„æƒ…å†µã€‚</li>
</ul>
</li>
</ol>
</li>
<li><p>Kafkaæ˜¯å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±</p>
<ul>
<li>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°Brockerä¸¢å¤±<br>  è®¾ç½®å¼‚æ­¥å‘é€ï¼Œå‘é€å¤±è´¥ä½¿ç”¨å›è°ƒè¿›è¡Œè®°å½•æˆ–é‡å‘ï¼›å¤±è´¥é‡è¯•ï¼Œå‚æ•°é…ç½®ï¼Œå¯ä»¥è®¾ç½®é‡è¯•æ¬¡æ•°</li>
<li>æ¶ˆæ¯åœ¨Brockerä¸­å­˜å‚¨ä¸¢å¤±<br>  å‘é€ç¡®è®¤è®¾ç½®acks&#x3D;allï¼Œè®©æ‰€æœ‰çš„å‰¯æœ¬éƒ½å‚ä¸ä¿å­˜æ•°æ®åç¡®è®¤ï¼ˆè®¾ç½®acks&#x3D;1æ—¶ï¼Œåªè¦leaderèŠ‚ç‚¹æ”¶åˆ°æ¶ˆæ¯ï¼Œç”Ÿäº§è€…å°±ä¼šæ”¶åˆ°ä¸€ä¸ªæ¥è‡ªæœåŠ¡å™¨çš„æˆåŠŸå“åº”ï¼‰</li>
<li>ï¼ˆå‘é€åˆ°Brokerä¹‹åï¼Œèµ°çš„æ˜¯æ“ä½œç³»ç»Ÿç¼“å­˜ï¼Œåœ¨å¼‚æ­¥åˆ·ç›˜ï¼ˆä¿å­˜åˆ°ç¡¬ç›˜ï¼‰è¿™ä¸ªè¿‡ç¨‹è¿˜æœ‰å¯èƒ½ä¸¢å¤±ï¼‰</li>
<li>æ¶ˆè´¹è€…ä»Brockeræ¥æ”¶æ¶ˆæ¯ä¸¢å¤±<br>  å…³é—­è‡ªåŠ¨æäº¤åç§»é‡ï¼Œå¼€å¯æ‰‹åŠ¨æäº¤åç§»é‡ï¼›æäº¤æ–¹å¼ï¼Œæœ€å¥½æ˜¯åŒæ­¥+å¼‚æ­¥æäº¤</li>
</ul>
</li>
<li><p>kafka æ¶ˆè´¹é‡å¤æ•°æ®ï¼Ÿ</p>
<ul>
<li>åŸå› ï¼š<br>  1ã€æœåŠ¡å®•æœºï¼Œ5ç§’é’Ÿå†…æ²¡æœ‰æäº¤offerset;<br>  2ã€5åˆ†é’Ÿå†…æ²¡æ¶ˆè´¹å®Œpartitionæ•°æ®ï¼Œè§¦å‘reblance</li>
<li>è§£å†³ï¼š<br>  1ã€å…³é—­è‡ªåŠ¨æäº¤åç§»é‡ï¼Œå¼€å¯æ‰‹åŠ¨æäº¤åç§»é‡æäº¤æ–¹å¼ï¼Œæœ€å¥½æ˜¯åŒæ­¥+å¼‚æ­¥æäº¤ï¼Œ<br>  2ã€æå‡æ¶ˆè´¹ç«¯æ€§èƒ½é¿å…è§¦å‘balanceï¼šå¼‚æ­¥æ¶ˆè´¹ã€æŒ‘æˆ˜æ¶ˆè´¹æ—¶é•¿ã€å‡å°‘ä¸€æ¬¡æ€§ä»brokeræ‹‰å–çš„æ¶ˆæ¯æ¡æ•°<br>  3ã€å¹‚ç­‰æ–¹æ¡ˆï¼šå¯¹æ¶ˆè´¹çš„æ¶ˆæ¯ç”Ÿæˆmd5å­˜åˆ°redisï¼Œå†å­˜å…¥æ—¶æ¯”å¯¹</li>
</ul>
</li>
<li><p>Kafa ä¸­å¦‚ä½•ä¿è¯é¡ºåºæ¶ˆè´¹</p>
<ul>
<li>é—®é¢˜åŸå› ï¼š<br>  ä¸€ä¸ªtopicçš„æ•°æ®å¯èƒ½å­˜å‚¨åœ¨ä¸åŒçš„åˆ†åŒºPartition ä¸­ï¼ŒKafka çš„æ¶ˆè´¹å•å…ƒæ˜¯ Partitionï¼ŒåŒä¸€ä¸ª Partition ä½¿ç”¨ offset ä½œä¸ºå”¯ä¸€æ ‡è¯†ä¿è¯é¡ºåºæ€§ã€‚ä½†è¿™åªæ˜¯ä¿è¯äº†åœ¨Partition å†…éƒ¨çš„é¡ºåºæ€§è€Œä¸æ˜¯ Topic ä¸­çš„é¡ºåºï¼Œå¦‚æœæ¶ˆè´¹è€…å…³è”äº†å¤šä¸ªåˆ†åŒºï¼Œä¸èƒ½ä¿è¯é¡ºåºæ€§ã€‚</li>
<li>è§£å†³æ–¹æ³•ï¼šï¼ˆæ™®é€šæƒ…å†µä¸‹ï¼‰åªéœ€è¦æŠŠç›¸åŒuserld&#x2F;orderldå‘é€åˆ°ç›¸åŒçš„partitionï¼Œå› ä¸ºä¸€ä¸ªpartitionç”±ï¼ˆä¸€ä¸ªæ¶ˆè´¹è€…ç»„çš„ï¼‰ä¸€ä¸ªConsumeræ¶ˆè´¹<ul>
<li>å‘é€æ¶ˆæ¯æ—¶æŒ‡å®šåˆ†åŒºå·</li>
<li>å‘é€æ¶ˆæ¯æ—¶æŒ‰ç…§ç›¸åŒçš„ä¸šåŠ¡è®¾ç½®ç›¸åŒçš„key</li>
</ul>
</li>
</ul>
</li>
<li><p>kafkaé«˜å¯ç”¨ï¼Ÿ</p>
<ul>
<li>å¯ä»¥ä»ä¸¤ä¸ªå±‚é¢å›ç­”ï¼Œç¬¬ä¸€ä¸ªæ˜¯é›†ç¾¤ï¼Œç¬¬äºŒä¸ªæ˜¯å¤åˆ¶æœºåˆ¶é›†ç¾¤:<ul>
<li>ä¸€ä¸ªkafkaé›†ç¾¤ç”±å¤šä¸ªbrokerå®ä¾‹ç»„æˆï¼Œå³ä½¿æŸä¸€å°å®•æœºï¼Œä¹Ÿä¸è€½è¯¯å…¶ä»–brokerç»§ç»­å¯¹å¤–æä¾›æœåŠ¡å¤åˆ¶æœºåˆ¶:</li>
<li>ä¸€ä¸ªtopicæœ‰å¤šä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œæœ‰ä¸€ä¸ªleaderï¼Œå…¶ä½™çš„æ˜¯followerï¼Œå‰¯æœ¬å­˜å‚¨åœ¨ä¸åŒçš„brokerä¸­æ‰€æœ‰çš„åˆ†åŒºå‰¯æœ¬çš„å†…å®¹æ˜¯éƒ½æ˜¯ç›¸åŒçš„ï¼Œå¦‚æœleaderå‘ç”Ÿæ•…éšœæ—¶ï¼Œä¼šè‡ªåŠ¨å°†å…¶ä¸­ä¸€ä¸ªfolloweræå‡ä¸ºleaderï¼Œä¿è¯äº†ç³»ç»Ÿçš„å®¹é”™æ€§ã€é«˜å¯ç”¨æ€§</li>
</ul>
</li>
<li>ISR(in-syncreplica)æœºåˆ¶ï¼šéœ€è¦åŒæ­¥å¤åˆ¶ä¿å­˜çš„folower<br>  åˆ†åŒºå‰¯æœ¬åˆ†ä¸ºäº†ä¸¤ç±»ï¼Œä¸€ä¸ªæ˜¯ISRï¼Œä¸leaderå‰¯æœ¬åŒæ­¥ä¿å­˜æ•°æ®ï¼Œå¦å¤–ä¸€ä¸ªæ™®é€šçš„å‰¯æœ¬ï¼Œæ˜¯å¼‚æ­¥åŒæ­¥æ•°æ®ï¼Œå½“leaderæŒ‚æ‰ä¹‹åï¼Œä¼šä¼˜å…ˆä»ISRå‰¯æœ¬åˆ—è¡¨ä¸­é€‰å–ä¸€ä¸ªä½œä¸ºleader</li>
</ul>
</li>
<li><p>kafka å¦‚ä½•å®ç°é«˜æ€§èƒ½ï¼Ÿ</p>
<ul>
<li>æ¶ˆæ¯åˆ†åŒº:ä¸å—å•å°æœåŠ¡å™¨çš„é™åˆ¶ï¼Œå¯ä»¥ä¸å—é™çš„å¤„ç†æ›´å¤šçš„æ•°æ®ï¼›æˆ‘ä»¬å¾€ä¸€ä¸ªTopicå‘é€æ¶ˆæ¯æˆ–è€…è¯»å–æ¶ˆæ¯æ—¶ï¼Œå®é™…å†…éƒ¨æ˜¯å¤šä¸ªPartitionåœ¨å¹¶è¡Œå¤„ç†</li>
<li>é¡ºåºè¯»å†™:ç£ç›˜é¡ºåºè¯»å†™ï¼Œæå‡è¯»å†™æ•ˆç‡</li>
<li>é¡µç¼“å­˜:æŠŠç£ç›˜ä¸­çš„æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼ŒæŠŠå¯¹ç£ç›˜çš„è®¿é—®å˜ä¸ºå¯¹å†…å­˜çš„è®¿é—®</li>
<li>é›¶æ‹·è´:å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢åŠæ•°æ®æ‹·è´ï¼Ÿï¼Ÿåœ¨è¯»å†™æ•°æ®ä¸­ä¹Ÿå‡å°‘CPUæ‹·è´æ–‡ä»¶çš„æ¬¡æ•°</li>
<li>æ¶ˆæ¯å‹ç¼©:å‡å°‘ç£ç›˜I0å’Œç½‘ç»œI0</li>
<li>åˆ†æ‰¹å‘é€:å°†æ¶ˆæ¯æ‰“åŒ…æ‰¹é‡å‘é€ï¼Œå‡å°‘ç½‘ç»œå¼€é”€</li>
</ul>
</li>
<li><p>kafkaæ¶ˆæ¯ç§¯å‹é—®é¢˜</p>
<ul>
<li>æ¶ˆæ¯ç§¯å‹æ ¹æœ¬åŸå› æ˜¯ï¼šç”Ÿäº§è€…çš„ç”Ÿäº§é€Ÿåº¦ï¼Œå¤§äºæ¶ˆè´¹è€…çš„æ¶ˆè´¹é€Ÿåº¦ã€‚consumerè¿˜æ¥ä¸åŠä»PageCacheä¸­æ¶ˆè´¹æ¶ˆæ¯ï¼Œproducerå°±å·²ç»ç”Ÿäº§æ¶ˆæ¯æŠŠå®¹é‡å å®Œäº†ï¼Œåªèƒ½æŠŠPageCacheä¸­çš„æ¶ˆæ¯ä¿å­˜åˆ°ç¡¬ç›˜ä¸­ï¼Œconsumerè¦åˆ°ç¡¬ç›˜ä¸­å–å‡ºæœªæ¶ˆè´¹çš„æ¶ˆæ¯ã€ã€</li>
<li>é‡åˆ°æ¶ˆæ¯ç§¯å‹é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ’æŸ¥ï¼Œæ˜¯ä¸æ˜¯æœ‰bugäº§ç”Ÿäº†ã€‚å¦‚æœä¸æ˜¯bugï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹æ¶ˆè´¹çš„é€»è¾‘ï¼Œæ¯”å¦‚ä¹‹å‰æ˜¯ä¸€æ¡ä¸€æ¡æ¶ˆæ¯æ¶ˆè´¹å¤„ç†çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®è®¤æ˜¯ä¸æ˜¯å¯ä»¥ä¼˜ä¸ºæ‰¹é‡å¤„ç†æ¶ˆæ¯ã€‚å¦‚æœè¿˜æ˜¯æ…¢ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æ°´å¹³æ‰©å®¹ï¼Œå¢åŠ Topicçš„é˜Ÿåˆ—æ•°ï¼Œå’Œæ¶ˆè´¹ç»„æœºå™¨çš„æ•°é‡ï¼Œæå‡æ•´ä½“æ¶ˆè´¹èƒ½åŠ›ã€‚</li>
<li>å¦‚æœæ˜¯bugå¯¼è‡´å‡ ç™¾ä¸‡æ¶ˆæ¯æŒç»­ç§¯å‹å‡ å°æ—¶ï¼Œéœ€è¦è§£å†³bugï¼Œä¸´æ—¶ç´§æ€¥æ‰©å®¹ï¼Œå¤§æ¦‚æ€è·¯å¦‚ä¸‹:<ol>
<li>å…ˆä¿®å¤consumeræ¶ˆè´¹è€…çš„é—®é¢˜ï¼Œä»¥ç¡®ä¿å…¶æ¢å¤æ¶ˆè´¹é€Ÿåº¦ï¼Œç„¶åå°†ç°æœ‰consumer éƒ½åœæ‰ã€‚</li>
<li>æ–°å»ºä¸€ä¸ª topic:partition æ˜¯åŸæ¥çš„ 10 å€ï¼Œä¸´æ—¶å»ºç«‹å¥½åŸå…ˆ10å€çš„queue æ•°é‡ã€‚</li>
<li>ç„¶åå†™ä¸€ä¸ªä¸´æ—¶çš„åˆ†å‘æ•°æ®çš„ consumer ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºéƒ¨ç½²ä¸Šå»æ¶ˆè´¹ç§¯å‹çš„æ•°æ®ï¼Œæ¶ˆè´¹ä¹‹åä¸åšè€—æ—¶çš„å¤„ç†ï¼Œç›´æ¥å‡åŒ€è½®è¯¢å†™å…¥ä¸´æ—¶å»ºç«‹å¥½çš„10å€æ•°é‡çš„queueã€‚</li>
<li>æ¥ç€ä¸´æ—¶å¾ç”¨ 10å€çš„æœºå™¨æ¥éƒ¨ç½² consumerï¼Œæ¯ä¸€æ‰¹ consumer æ¶ˆè´¹ä¸€ä¸ªä¸´æ—¶ queue çš„æ•°æ®ã€‚è¿™ç§åšæ³•ç›¸å½“äºæ˜¯ä¸´æ—¶å°† queke èµ„æºå’Œ consumer èµ„æºæ‰©å¤§ 10å€ï¼Œä»¥æ­£å¸¸çš„ 10å€é€Ÿåº¦æ¥æ¶ˆè´¹æ•°æ®ã€‚</li>
<li>ç­‰å¿«é€Ÿæ¶ˆè´¹å®Œç§¯å‹æ•°æ®ä¹‹åï¼Œå¾—æ¢å¤åŸå…ˆéƒ¨ç½²çš„æ¶æ„ï¼Œé‡æ–°ç”¨åŸå…ˆçš„ consumer æœºå™¨æ¥æ¶ˆè´¹æ¶ˆæ¯ã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr>

<h2 id="ç½‘-ç»œ"><a href="#ç½‘-ç»œ" class="headerlink" title="ç½‘ ç»œ"></a>ç½‘ ç»œ</h2><ul>
<li><p>è®¡ç®—æœºç½‘ç»œï¼š<a target="_blank" rel="noopener" href="https://leo710aka.github.io/2022/02/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">https://leo710aka.github.io/2022/02/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</a></p>
</li>
<li><p>æµè§ˆå™¨å‘å‡ºä¸€ä¸ªè¯·æ±‚åˆ°æ”¶åˆ°å“åº”ç»å†äº†å“ªäº›æ­¥éª¤?<br>1ï¼Œæµè§ˆå™¨è§£æç”¨æˆ·è¾“å…¥çš„URLï¼Œç”Ÿæˆä¸€ä¸ªHTTPæ ¼å¼çš„è¯·æ±‚<br>2ï¼Œå…ˆæ ¹æ®URLåŸŸåä»æœ¬åœ°hostsæ–‡ä»¶æŸ¥æ‰¾æ˜¯å¦æœ‰æ˜ å°„IPï¼Œå¦‚æœæ²¡æœ‰å°±å°†åŸŸåå‘é€ç»™ç”µè„‘æ‰€é…ç½®çš„DNSè¿›è¡ŒåŸŸåè§£æï¼Œå¾—åˆ°IPåœ°å€<br>3ï¼Œæµè§ˆå™¨é€šè¿‡æ“ä½œç³»ç»Ÿå°†è¯·æ±‚é€šè¿‡å››å±‚ç½‘ç»œåè®®å‘é€å‡ºå»<br>4ï¼Œé€”ä¸­å¯èƒ½ä¼šç»è¿‡å„ç§è·¯ç”±å™¨ã€äº¤æ¢æœºï¼Œæœ€ç»ˆåˆ°è¾¾æœåŠ¡å™¨<br>5ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œæ ¹æ®è¯·æ±‚æ‰€æŒ‡å®šçš„ç«¯å£ï¼Œå°†è¯·æ±‚ä¼ é€’ç»™ç»‘å®šäº†è¯¥ç«¯å£çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚8080è¢«tomcatå ç”¨äº†<br>6ï¼Œtomcatæ¥æ”¶åˆ°è¯·æ±‚æ•°æ®åï¼ŒæŒ‰ç…§httpåè®®çš„æ ¼å¼è¿›è¡Œè§£æï¼Œè§£æå¾—åˆ°æ‰€è¦è®¿é—®çš„servlet<br>7ï¼Œç„¶åservletæ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå¦‚æœæ˜¯pringMVCä¸­çš„DispatcherServetï¼Œé‚£ä¹ˆåˆ™ä¼šæ‰¾åˆ°å¯¹åº”çš„Controllerä¸­çš„æ–¹æ³•ï¼Œå¹¶æ‰§è¡Œè¯¥æ–¹æ³•å¾—åˆ°ç»“æœ<br>8ï¼ŒTomcatå¾—åˆ°å“åº”ç»“æœåå°è£…æˆHTTPå“åº”çš„æ ¼å¼ï¼Œå¹¶å†æ¬¡é€šè¿‡ç½‘ç»œå‘é€ç»™æµè§ˆå™¨æ‰€åœ¨çš„æœåŠ¡å™¨<br>9ï¼Œæµè§ˆå™¨æ‰€åœ¨çš„æœåŠ¡å™¨æ‹¿åˆ°ç»“æœåå†ä¼ é€’ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨åˆ™è´Ÿè´£è§£æå¹¶æ´æŸ“</p>
</li>
<li><p>ä»‹ç» TCP&#x2F;IP æ¨¡å‹ã€‚</p>
<ol>
<li><strong>é“¾è·¯å±‚ï¼ˆLink Layerï¼‰ï¼š</strong>è´Ÿè´£ç‰©ç†ä»‹è´¨ä¸Šçš„æ•°æ®ä¼ è¾“ï¼Œå¤„ç†ç¡¬ä»¶ç›¸å…³çš„é—®é¢˜ã€‚ä¸»è¦åŒ…æ‹¬ç½‘ç»œé©±åŠ¨ã€æ¥å£å¡ã€ç‰©ç†ä»‹è´¨ç­‰ã€‚ä½œç”¨ï¼šå®ç°åŸå§‹æ¯”ç‰¹æµçš„ä¼ è¾“ï¼Œé€šè¿‡ç‰©ç†é“¾è·¯è¿›è¡Œç›´æ¥é€šä¿¡ã€‚</li>
<li><strong>ç½‘ç»œå±‚ï¼ˆInternet Layerï¼‰ï¼š</strong>æä¾›æ•°æ®åŒ…åœ¨ä¸åŒç½‘ç»œä¹‹é—´çš„ä¼ è¾“å’Œè·¯ç”±ã€‚ä¸»è¦åŒ…æ‹¬IPã€ICMPç­‰ã€‚ä½œç”¨ï¼šå®ç°ä¸åŒç½‘ç»œä¹‹é—´çš„é€šä¿¡ï¼Œå¤„ç†æ•°æ®åŒ…çš„å¯»å€å’Œè·¯ç”±é—®é¢˜ã€‚</li>
<li><strong>ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ï¼š</strong>æä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡ï¼Œå¤„ç†æ•°æ®æµæ§åˆ¶ã€å·®é”™æ ¡éªŒå’Œæ¢å¤ç­‰é—®é¢˜ã€‚ä¸»è¦åŒ…æ‹¬TCPå’ŒUDPã€‚ä½œç”¨ï¼šç¡®ä¿æ•°æ®çš„å¯é ä¼ è¾“ï¼Œå¤„ç†æ•°æ®çš„åˆ†æ®µã€æ’åºå’Œé‡ç»„ã€‚</li>
<li><strong>åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰ï¼š</strong> æä¾›ç½‘ç»œæœåŠ¡å’Œåº”ç”¨è½¯ä»¶ä¹‹é—´çš„æ¥å£ã€‚åŒ…æ‹¬å„ç§åº”ç”¨å±‚åè®®ï¼Œå¦‚HTTPã€FTPã€SMTPç­‰ã€‚ä½œç”¨ï¼šä¸ºç”¨æˆ·æä¾›ç½‘ç»œæœåŠ¡ï¼Œæ”¯æŒå„ç§åº”ç”¨è½¯ä»¶çš„è¿è¡Œã€‚</li>
</ol>
</li>
<li><p>OSIä¸ƒå±‚æ¨¡å‹ä»åº•å±‚åˆ°é¡¶å±‚åˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li><strong>ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰ï¼š</strong> å®šä¹‰ç‰©ç†è®¾å¤‡å’Œä¼ è¾“åª’ä½“çš„è§„èŒƒï¼Œå¦‚ç”µç¼†ã€å…‰çº¤ã€ç½‘å¡ç­‰ã€‚</li>
<li><strong>æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰ï¼š</strong> æä¾›å¯é çš„ç‚¹å¯¹ç‚¹é€šä¿¡ï¼Œå¤„ç†ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®é“¾è·¯é”™è¯¯å’Œæµæ§åˆ¶ã€‚</li>
<li><strong>ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰ï¼š</strong> è´Ÿè´£åœ¨æ•´ä¸ªç½‘ç»œä¸­æ‰¾åˆ°æ•°æ®çš„æœ€ä½³è·¯å¾„ï¼Œå¤„ç†ä¸åŒç½‘ç»œä¸Šçš„è·¯ç”±å’Œè½¬å‘ã€‚</li>
<li><strong>ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ï¼š</strong> æä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡ï¼Œè´Ÿè´£æ•°æ®çš„å¯é ä¼ è¾“ï¼Œå¤„ç†æµé‡æ§åˆ¶å’Œå·®é”™æ¢å¤ã€‚</li>
<li><strong>ä¼šè¯å±‚ï¼ˆSession Layerï¼‰ï¼š</strong> ç®¡ç†ç”¨æˆ·ä¼šè¯å’Œæ•°æ®äº¤æ¢ï¼Œæä¾›å¯¹è¯æ§åˆ¶å’Œç®¡ç†ã€‚</li>
<li><strong>è¡¨ç¤ºå±‚ï¼ˆPresentation Layerï¼‰ï¼š</strong> è´Ÿè´£æ•°æ®æ ¼å¼çš„è½¬æ¢ã€åŠ å¯†å’Œå‹ç¼©ï¼Œç¡®ä¿ä¸€ä¸ªç³»ç»Ÿçš„åº”ç”¨å±‚èƒ½ç†è§£å¦ä¸€ä¸ªç³»ç»Ÿçš„æ•°æ®ã€‚</li>
<li><strong>åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰ï¼š</strong> æä¾›ç”¨æˆ·æ¥å£å’Œç½‘ç»œæœåŠ¡ï¼Œæ˜¯ç”¨æˆ·ç›´æ¥ä¸ç½‘ç»œäº¤äº’çš„åœ°æ–¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¼ è¾“ã€ç”µå­é‚®ä»¶ã€è¿œç¨‹ç™»å½•ç­‰ã€‚</li>
</ol>
</li>
<li><p>HTTPè¯·æ±‚å¸¸â»…çš„çŠ¶æ€ç å’Œå­—æ®µ</p>
<ul>
<li>å¸¸è§çš„HTTPçŠ¶æ€ç ï¼š<br>  <strong>1xxï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰ï¼š</strong>  100 Continueï¼šç»§ç»­ã€‚å®¢æˆ·ç«¯åº”ç»§ç»­å…¶è¯·æ±‚ã€‚<br>  <strong>2xxï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰ï¼š</strong>  200 OKï¼šè¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äºGETå’ŒPOSTè¯·æ±‚ã€‚ 201 Createdï¼šå·²åˆ›å»ºã€‚æˆåŠŸè¯·æ±‚å¹¶åˆ›å»ºäº†æ–°çš„èµ„æºã€‚  204 No Contentï¼šæ— å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†è¯·æ±‚ï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚<br>  <strong>3xxï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰ï¼š</strong>  301 Moved Permanentlyï¼šæ°¸ä¹…é‡å®šå‘ã€‚è¯·æ±‚çš„èµ„æºå·²è¢«æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ 302 Foundï¼šä¸´æ—¶é‡å®šå‘ã€‚è¯·æ±‚çš„èµ„æºä¸´æ—¶ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚<br>  <strong>4xxï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ï¼š</strong>  400 Bad Requestï¼šè¯·æ±‚æ— æ•ˆã€‚æœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚çš„è¯­æ³•ã€‚401 Unauthorizedï¼šæœªæˆæƒã€‚éœ€è¦èº«ä»½éªŒè¯æˆ–æƒé™ä¸è¶³ã€‚ 403 Forbiddenï¼šç¦æ­¢è®¿é—®ã€‚æœåŠ¡å™¨ç†è§£è¯·æ±‚ï¼Œä½†æ‹’ç»æ‰§è¡Œã€‚ 404 Not Foundï¼šè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚<br>  <strong>5xxï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰ï¼š</strong>  500 Internal Server Errorï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚é€šç”¨é”™è¯¯æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨é‡åˆ°æ„å¤–çš„æƒ…å†µã€‚  502 Bad Gatewayï¼šç½‘å…³é”™è¯¯ã€‚æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚ 503 Service Unavailableï¼šæœåŠ¡ä¸å¯ç”¨ã€‚æœåŠ¡å™¨ç›®å‰æ— æ³•å¤„ç†è¯·æ±‚ã€‚</li>
<li>å¸¸è§çš„HTTPå­—æ®µï¼š<ol>
<li><strong>é€šç”¨å­—æ®µï¼š</strong> Cache-Controlï¼šæ§åˆ¶ç¼“å­˜è¡Œä¸ºã€‚ Connectionï¼šæ§åˆ¶æ˜¯å¦ä¿æŒè¿æ¥ã€‚Dateï¼šè¡¨ç¤ºæ¶ˆæ¯åˆ›å»ºæ—¶é—´ã€‚</li>
<li><strong>è¯·æ±‚å­—æ®µï¼š</strong>  Hostï¼šæŒ‡å®šè¢«è¯·æ±‚èµ„æºçš„ä¸»æœºåå’Œç«¯å£å·ã€‚User-Agentï¼šè¡¨ç¤ºå®¢æˆ·ç«¯ä¿¡æ¯ã€‚</li>
<li><strong>å“åº”å­—æ®µï¼š</strong>  Serverï¼šè¡¨ç¤ºæœåŠ¡å™¨ä¿¡æ¯ã€‚ Content-Typeï¼šæŒ‡å®šå“åº”å†…å®¹çš„MIMEç±»å‹ã€‚Content-Lengthï¼šå“åº”å†…å®¹é•¿åº¦ã€‚</li>
<li><strong>å®ä½“å­—æ®µï¼š</strong>ETagï¼šç”¨äºæ£€æµ‹èµ„æºæ˜¯å¦å‘ç”Ÿæ”¹å˜ã€‚ Last-Modifiedï¼šè¡¨ç¤ºèµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>HTTPä¸­çš„ä¸»è¦æ–¹æ³•åŠå…¶ä½œç”¨ï¼š</p>
<ol>
<li>GETï¼šä»æœåŠ¡å™¨è·å–èµ„æºã€‚GET æ–¹æ³•è¯·æ±‚æŒ‡å®šçš„èµ„æºï¼Œå¹¶è¿”å›å“åº”ä¸»ä½“ã€‚å®ƒåªç”¨äºæ£€ç´¢æ•°æ®ï¼Œè€Œä¸ä¼šä¿®æ”¹æœåŠ¡å™¨çŠ¶æ€ã€‚</li>
<li>POSTï¼šå‘æœåŠ¡å™¨æäº¤æ•°æ®ã€‚POST æ–¹æ³•ç”¨äºå‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºæ–°èµ„æºã€æäº¤è¡¨å•æ•°æ®ã€ä¸Šä¼ æ–‡ä»¶ç­‰æ“ä½œã€‚</li>
<li>PUTï¼šå‘æœåŠ¡å™¨å­˜å‚¨èµ„æºã€‚PUT æ–¹æ³•ç”¨äºå‘æœåŠ¡å™¨ä¸Šä¼ æˆ–æ›´æ–°æŒ‡å®šçš„èµ„æºï¼Œé€šå¸¸ç”¨äºæ›´æ–°ç°æœ‰èµ„æºçš„å†…å®¹ã€‚</li>
<li>DELETEï¼šä»æœåŠ¡å™¨åˆ é™¤èµ„æºã€‚DELETE æ–¹æ³•ç”¨äºè¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„èµ„æºã€‚</li>
<li>PATCHï¼šå¯¹èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ã€‚PATCH æ–¹æ³•ç”¨äºå¯¹ç°æœ‰èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ï¼Œåªæ›´æ–°éƒ¨åˆ†å†…å®¹è€Œä¸æ˜¯æ•´ä¸ªèµ„æºã€‚</li>
<li>HEADï¼šè·å–èµ„æºçš„å…ƒæ•°æ®ã€‚HEAD æ–¹æ³•ç±»ä¼¼äº GET æ–¹æ³•ï¼Œä½†åªè¿”å›èµ„æºçš„å¤´éƒ¨ä¿¡æ¯è€Œä¸è¿”å›å“åº”ä¸»ä½“ï¼Œé€šå¸¸ç”¨äºè·å–èµ„æºçš„å…ƒæ•°æ®ï¼Œå¦‚å¤§å°ã€ç±»å‹ç­‰ã€‚</li>
<li>OPTIONSï¼šè·å–æœåŠ¡å™¨æ”¯æŒçš„æ–¹æ³•ã€‚OPTIONS æ–¹æ³•ç”¨äºè¯·æ±‚æœåŠ¡å™¨åˆ—å‡ºå¯¹æŒ‡å®šèµ„æºæ”¯æŒçš„ HTTP æ–¹æ³•åˆ—è¡¨ï¼Œä»¥åŠå…¶ä»–ä¸€äº›å…ƒæ•°æ®ä¿¡æ¯ã€‚</li>
<li>TRACEï¼šè¿½è¸ªè¯·æ±‚çš„ä¼ è¾“è·¯å¾„ã€‚TRACE æ–¹æ³•ç”¨äºæµ‹è¯•å‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚åœ¨å…¶ä¼ è¾“è·¯å¾„ä¸Šçš„å˜åŒ–ï¼Œé€šå¸¸ç”¨äºè¯Šæ–­å’Œè°ƒè¯•ã€‚</li>
<li>CONNECTï¼šä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹ä»£ç†è¿æ¥ã€‚CONNECT æ–¹æ³•ç”¨äºå»ºç«‹å®¢æˆ·ç«¯ä¸ç›®æ ‡æœåŠ¡å™¨ä¹‹é—´çš„ä»£ç†è¿æ¥ï¼Œé€šå¸¸ç”¨äºå»ºç«‹å®‰å…¨çš„TLS&#x2F;SSLè¿æ¥ã€‚</li>
</ol>
</li>
<li><p>HTTP1.0 å’Œ HTTP1.1 çš„åŒºåˆ«ï¼Ÿ</p>
<ol>
<li>â»“è¿æ¥<br>  HTTP1.1 â½€æŒâ»“è¿æ¥ï¼Œæ¯â¼€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œé»˜è®¤å¼€å¯ Connection:Keep-Aliveï¼›<br>  HTTP1.0 é»˜è®¤ä¸ºçŸ­è¿æ¥ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºâ½´â¼€ä¸ªTCPè¿æ¥ã€‚</li>
<li>ç¼“å­˜<br>  HTTP1.0 ä¸»è¦ä½¿â½¤ If-Modified-Since&#x2F;Expires æ¥åšä¸ºç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†<br>  HTTP1.1 åˆ™å¼•â¼Šäº†æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥ï¼Œå¦‚ Entity tag &#x2F; If-None-Match ç­‰æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´æ¥æ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚</li>
<li>ç®¡é“åŒ–ï¼šåŸºäº HTTP1.1 çš„â»“è¿æ¥ï¼Œä½¿å¾—è¯·æ±‚ç®¡çº¿åŒ–æˆä¸ºå¯èƒ½ã€‚ç®¡çº¿åŒ–ä½¿å¾—è¯·æ±‚èƒ½å¤Ÿâ€œå¹¶â¾â€ä¼ è¾“ï¼Œä½†æ˜¯å“åº”å¿…é¡»æŒ‰ç…§è¯·æ±‚å‘å‡ºçš„é¡ºåºä¾æ¬¡è¿”å›ï¼Œæ€§èƒ½åœ¨â¼€å®šç¨‹åº¦ä¸Šå¾—åˆ°æ”¹å–„</li>
<li>å¢åŠ Hostå­—æ®µï¼š ä½¿å¾—â¼€ä¸ªæœåŠ¡å™¨èƒ½å¤Ÿâ½¤æ¥åˆ›å»ºå¤šä¸ª Web ç«™ç‚¹ã€‚</li>
<li>çŠ¶æ€ç ï¼š æ–°å¢äº†24ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç </li>
<li>å¸¦å®½ä¼˜åŒ–<br>  HTTP1.0 ä¸­ï¼Œå­˜åœ¨â¼€äº›æµªè´¹å¸¦å®½çš„ç°è±¡ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯åªæ˜¯éœ€è¦æŸä¸ªå¯¹è±¡çš„â¼€éƒ¨åˆ†ï¼Œâ½½æœåŠ¡å™¨å´å°†æ•´ä¸ªå¯¹è±¡é€è¿‡æ¥äº†ï¼Œå¹¶ä¸”ä¸â½€æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½<br>  HTTP1.1 åˆ™åœ¨è¯·æ±‚å¤´å¼•â¼Šäº† range å¤´åŸŸï¼Œå®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œå³è¿”å›ç æ˜¯ 206ï¼ˆPartial Contentï¼‰</li>
</ol>
</li>
<li><p>HTTP2.0 ä¸ HTTP1.1 çš„åŒºåˆ«ï¼Ÿ</p>
<ol>
<li>â¼†è¿›åˆ¶åˆ†å¸§ï¼šåœ¨åº”â½¤å±‚ ï¼ˆHTTP&#x2F;2.0ï¼‰ å’Œä¼ è¾“å±‚ï¼ˆTCP or UDPï¼‰ ä¹‹é—´å¢åŠ â¼€ä¸ªâ¼†è¿›åˆ¶åˆ†å¸§å±‚ï¼Œä»â½½çªç ´ HTTP1.1 çš„æ€§èƒ½é™åˆ¶ï¼Œæ”¹è¿›ä¼ è¾“æ€§èƒ½ï¼Œå®ç°ä½å»¶è¿Ÿå’Œâ¾¼ååé‡ã€‚</li>
<li>å¤šè·¯å¤â½¤ï¼ˆMultiPlexingï¼‰ï¼šå…è®¸åŒæ—¶é€šè¿‡å•â¼€çš„ HTTP&#x2F;2 è¿æ¥å‘èµ·å¤šé‡çš„è¯·æ±‚-å“åº”æ¶ˆæ¯ï¼Œè¿™ä¸ªå¼ºâ¼¤çš„åŠŸèƒ½åˆ™æ˜¯åŸºäºâ€œâ¼†è¿›åˆ¶åˆ†å¸§â€çš„ç‰¹æ€§ã€‚</li>
<li>â¾¸éƒ¨å‹ç¼©ï¼š HTTP1.1 ä¸â½€æŒ header æ•°æ®çš„å‹ç¼©ï¼ŒHTTP&#x2F;2.0 ä½¿â½¤ HPACK ç®—æ³•å¯¹ header  çš„æ•°æ®è¿›â¾å‹ç¼©ï¼Œè¿™æ ·æ•°æ®ä½“ç§¯â¼©äº†ï¼Œåœ¨â½¹ç»œä¸Šä¼ è¾“å°±ä¼šæ›´å¿«ã€‚â¾¼æ•ˆçš„å‹ç¼©ç®—æ³•å¯ä»¥å¾ˆâ¼¤çš„å‹ç¼© heeader ï¼Œå‡å°‘å‘é€åŒ…çš„æ•°é‡ä»â½½é™ä½å»¶è¿Ÿã€‚</li>
<li>æœåŠ¡ç«¯æ¨é€ï¼ˆserver pushï¼‰ï¼š åœ¨ HTTP&#x2F;2 ä¸­ï¼ŒæœåŠ¡å™¨å¯ä»¥å¯¹å®¢æˆ·ç«¯çš„â¼€ä¸ªè¯·æ±‚å‘é€å¤šä¸ªå“åº”ï¼Œå³æœåŠ¡å™¨å¯ä»¥é¢å¤–çš„å‘å®¢æˆ·ç«¯æ¨é€èµ„æºï¼Œâ½½â½†éœ€å®¢æˆ·ç«¯æ˜ç¡®çš„è¯·æ±‚ã€‚</li>
</ol>
</li>
<li><p>??<strong>HTTPSçš„â¼¯ä½œåŸç†ï¼Ÿ(httpsæ˜¯æ€ä¹ˆå»ºâ½´è¿æ¥çš„)</strong></p>
<ol>
<li>â¾¸å…ˆï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚æŠ¥â½‚ï¼Œè¯·æ±‚ä¸æœåŠ¡ç«¯å»ºâ½´è¿æ¥ã€‚</li>
<li>æœåŠ¡ç«¯äº§â½£â¼€å¯¹å…¬ç§é’¥ï¼Œç„¶åå°†â¾ƒâ¼°çš„å…¬é’¥å‘é€ç»™CAæœºæ„ï¼ŒCAæœºæ„ä¹Ÿæœ‰â¼€å¯¹å…¬ç§é’¥ï¼Œç„¶åCAæœºæ„ä½¿â½¤â¾ƒâ¼°çš„ç§é’¥å°†æœåŠ¡ç«¯å‘é€è¿‡æ¥çš„å…¬é’¥è¿›â¾åŠ å¯†ï¼Œäº§â½£â¼€ä¸ªCAæ•°å­—è¯ä¹¦ã€‚</li>
<li>æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå°†CAæœºæ„â½£æˆçš„æ•°å­—è¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>å®¢æˆ·ç«¯å°†æœåŠ¡ç«¯å‘é€è¿‡æ¥çš„æ•°å­—è¯ä¹¦è¿›â¾è§£æ(å› ä¸ºæµè§ˆå™¨äº§å•†è·ŸCAæœºæ„æœ‰åˆä½œï¼Œæ‰€ä»¥æµè§ˆå™¨ä¸­å·²ç»ä¿å­˜äº†â¼¤éƒ¨åˆ†CAæœºæ„çš„å¯†é’¥ï¼Œâ½¤äºå¯¹æœåŠ¡ç«¯å‘é€è¿‡æ¥çš„æ•°å­—è¯ä¹¦è¿›â¾è§£å¯†)ï¼ŒéªŒè¯è¿™ä¸ªæ•°å­—è¯ä¹¦æ˜¯å¦åˆæ³•ï¼Œå¦‚æœä¸åˆæ³•ï¼Œä¼šå‘é€â¼€ä¸ªè­¦å‘Šã€‚å¦‚æœåˆæ³•ï¼Œå–å‡ºæœåŠ¡ç«¯â½£æˆçš„å…¬é’¥ã€‚</li>
<li>å®¢æˆ·ç«¯å–å‡ºå…¬é’¥å¹¶â½£æˆâ¼€ä¸ªéšæœºç keyï¼ˆå…¶å®å°±æ˜¯å¯¹ç§°åŠ å¯†ä¸­çš„å¯†é’¥ï¼‰</li>
<li>å®¢æˆ·ç«¯å°†åŠ å¯†åçš„éšæœºç keyå‘é€ç»™æœåŠ¡ç«¯ï¼Œä½œä¸ºæ¥ä¸‹æ¥çš„å¯¹ç§°åŠ å¯†çš„å¯†é’¥</li>
<li>æœåŠ¡ç«¯æ¥æ”¶åˆ°éšæœºç keyåï¼Œä½¿â½¤â¾ƒâ¼°çš„ç§é’¥å¯¹å®ƒè¿›â¾è§£å¯†ï¼Œç„¶åè·å¾—åˆ°éšæœºç keyã€‚</li>
<li>æœåŠ¡ç«¯ä½¿â½¤éšæœºç keyå¯¹ä¼ è¾“çš„æ•°æ®è¿›â¾åŠ å¯†ï¼Œåœ¨ä¼ è¾“åŠ å¯†åçš„å†…å®¹ç»™å®¢æˆ·ç«¯</li>
<li>å®¢æˆ·ç«¯ä½¿â½¤â¾ƒâ¼°â½£æˆçš„éšæœºç keyè§£å¯†æœåŠ¡ç«¯å‘é€è¿‡æ¥çš„æ•°æ®ï¼Œä¹‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šè¿‡å¯¹ç§°åŠ å¯†ä¼ è¾“æ•°æ®ï¼Œéšæœºç Keyä½œä¸ºä¼ è¾“çš„å¯†é’¥ã€‚</li>
</ol>
</li>
<li><p><strong>HTTPSä¸HTTPçš„åŒºåˆ«</strong><br>HTTP æ˜¯æ˜â½‚ä¼ è¾“ï¼Œâ½½ HTTPS é€šè¿‡ SSL\TLS è¿›â¾äº†åŠ å¯†<br>HTTP çš„ç«¯â¼å·æ˜¯ 80ï¼ŒHTTPS æ˜¯ 443<br>HTTPS éœ€è¦åˆ° CA ç”³è¯·è¯ä¹¦<br>HTTP çš„è¿æ¥ç®€å•ï¼Œæ˜¯â½†çŠ¶æ€çš„ï¼›HTTPS åè®®æ˜¯ç”± SSL+HTTP åè®®æ„å»ºçš„å¯è¿›â¾åŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„å®‰å…¨çš„â½¹ç»œåè®®ã€‚</p>
</li>
<li><p>å¸¸â»…çš„è¯·æ±‚â½…å¼ï¼ŸGET å’Œ POST è¯·æ±‚çš„åŒºåˆ«ï¼Ÿ</p>
<ol>
<li>ä½œâ½¤ä¸åŒï¼š GETâ½¤äºä»æœåŠ¡ç«¯è·å–èµ„æºï¼ŒPOSTâ¼€èˆ¬â½¤æ¥å‘æœåŠ¡å™¨ç«¯æäº¤æ•°æ®</li>
<li>å‚æ•°ä¼ é€’â½…å¼ä¸åŒï¼š GETè¯·æ±‚çš„å‚æ•°â¼€èˆ¬å†™åœ¨URLä¸­ï¼Œä¸”åªæ¥å—ASCIIå­—ç¬¦ï¼›POSTè¯·æ±‚å‚æ•°â¼€èˆ¬æ”¾åœ¨è¯·æ±‚ä½“ä¸­ï¼Œå¯¹äºæ•°æ®ç±»å‹ä¹Ÿæ²¡æœ‰é™åˆ¶</li>
<li>å®‰å…¨æ€§ä¸åŒï¼š å› ä¸ºå‚æ•°ä¼ é€’â½…å¼çš„ä¸åŒï¼Œæ‰€ä»¥ä¸¤è€…å®‰å…¨æ€§ä¸åŒï¼ŒGETè¯·æ±‚çš„å‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸­ï¼Œæ‰€ä»¥æ›´ä¸å®‰å…¨ï¼Œä¸èƒ½â½¤æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li>
<li>å‚æ•°â»“åº¦é™åˆ¶ä¸åŒ<br>  GETä¼ é€çš„æ•°æ®é‡è¾ƒâ¼©ï¼Œä¸èƒ½â¼¤äº2KBã€‚POSTä¼ é€çš„æ•°æ®é‡è¾ƒâ¼¤ï¼Œâ¼€èˆ¬è¢«é»˜è®¤ä¸ºä¸å—é™åˆ¶ã€‚<br>  HTTP åè®®æ²¡æœ‰ Body å’Œ URL çš„â»“åº¦é™åˆ¶ï¼Œå¯¹ URL é™åˆ¶çš„â¼¤å¤šæ˜¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„åŸå› ã€‚</li>
<li>ç¼–ç â½…å¼ä¸åŒ<br>  GET è¯·æ±‚åªèƒ½è¿›â¾ URL ç¼–ç ï¼ˆapplication&#x2F;x-www-form-urlencodedï¼‰<br>  POST â½€æŒå¤šç§ç¼–ç â½…å¼ï¼ˆapplication&#x2F;x-www-form-urlencoded æˆ– multipart&#x2F;form-dataã€‚ä¸ºâ¼†è¿›åˆ¶æ•°æ®ä½¿â½¤å¤šç§ç¼–ç ã€‚ï¼‰</li>
<li>ç¼“å­˜æœºåˆ¶ä¸åŒ<br>  GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œâ½½ POST ä¸ä¼šï¼Œé™¤â¾®â¼¿åŠ¨è®¾ç½®ã€‚<br>  GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•â¾¥ï¼Œâ½½ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚<br>  GET äº§â½£çš„ URL åœ°å€å¯ä»¥è¢« ä¿å­˜ä¸ºä¹¦ç­¾ï¼Œâ½½ POST ä¸å¯ä»¥ã€‚<br>  GET åœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯â½†å®³çš„ï¼Œâ½½ POST ä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li>
<li>æ—¶é—´æ¶ˆè€—ä¸åŒ<br>  GET äº§â½£â¼€ä¸ª TCP æ•°æ®åŒ…ï¼›POST äº§â½£ä¸¤ä¸ª TCP æ•°æ®åŒ…ã€‚<br>  å¯¹äº GET â½…å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠ header å’Œ data â¼€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº” 200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›â½½å¯¹äº POSTï¼Œæµè§ˆå™¨å…ˆå‘é€ Headerï¼ŒæœåŠ¡å™¨å“åº” 100 continueï¼Œæµè§ˆå™¨å†å‘é€ dataï¼ŒæœåŠ¡å™¨å“åº” 200 okï¼ˆè¿”å›æ•°æ®ï¼‰</li>
<li>å¹‚ç­‰ï¼šæ„æ€æ˜¯å¤šæ¬¡æ‰§â¾ç›¸åŒçš„æ“ä½œï¼Œç»“æœéƒ½æ˜¯ã€Œç›¸åŒã€çš„ã€‚<br>  GET â½…æ³•å°±æ˜¯å®‰å…¨ä¸”å¹‚ç­‰çš„ï¼Œå› ä¸ºå®ƒæ˜¯ã€Œåªè¯»ã€æ“ä½œï¼Œâ½†è®ºæ“ä½œå¤šå°‘æ¬¡ï¼ŒæœåŠ¡å™¨ä¸Šçš„æ•°æ®éƒ½æ˜¯å®‰å…¨çš„ï¼Œä¸”æ¯æ¬¡çš„ç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚<br>  POST å› ä¸ºæ˜¯ã€Œæ–°å¢æˆ–æäº¤æ•°æ®ã€çš„æ“ä½œï¼Œä¼šä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œæ‰€ä»¥æ˜¯ä¸å®‰å…¨çš„ï¼Œä¸”å¤šæ¬¡æäº¤æ•°æ®å°±ä¼šåˆ›å»ºå¤šä¸ªèµ„æºï¼Œæ‰€ä»¥ä¸æ˜¯å¹‚ç­‰çš„ã€‚</li>
</ol>
</li>
<li><p>ï¼Ÿï¼Ÿä»€ä¹ˆæ˜¯å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜</p>
<ul>
<li>ç¼“å­˜å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼š<br>  å‡å°‘ä¸å¿…è¦çš„â½¹ç»œä¼ è¾“ï¼ŒèŠ‚çº¦å¸¦å®½<br>  æ›´å¿«çš„åŠ è½½â»šâ¾¯<br>  å‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼Œé¿å…æœåŠ¡è¿‡è½½çš„æƒ…å†µå‡ºç°</li>
<li>å¼ºç¼“å­˜ï¼šæµè§ˆå™¨åˆ¤æ–­è¯·æ±‚çš„â½¬æ ‡èµ„æºæ˜¯å¦æœ‰æ•ˆå‘½ä¸­å¼ºç¼“å­˜ï¼Œå¦‚æœå‘½ä¸­ï¼Œåˆ™å¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¯»å–â½¬æ ‡èµ„æºï¼Œâ½†éœ€ä¸æœåŠ¡å™¨åšä»»ä½•é€šè®¯ã€‚<ul>
<li>Expireså¼ºç¼“å­˜ ï¼šè®¾ç½®â¼€ä¸ªå¼ºç¼“å­˜æ—¶é—´ï¼Œæ­¤æ—¶é—´èŒƒå›´å†…ï¼Œä»å†…å­˜ä¸­è¯»å–ç¼“å­˜å¹¶è¿”å›ï¼Œå› ä¸º Expires åˆ¤æ–­å¼ºç¼“å­˜è¿‡æœŸçš„æœºåˆ¶æ˜¯è·å–æœ¬åœ°æ—¶é—´æˆ³ï¼Œä¸ä¹‹å‰æ‹¿åˆ°çš„èµ„æºâ½‚ä»¶ä¸­çš„Expireså­—æ®µçš„æ—¶é—´åšâ½è¾ƒã€‚æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦å¯¹æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚è¿™â¾¥æœ‰â¼€ä¸ªå·¨â¼¤çš„æ¼æ´ï¼šâ€œå¦‚æœæˆ‘æœ¬åœ°æ—¶é—´ä¸å‡†å’‹åŠï¼Ÿâ€æ‰€ä»¥â½¬å‰å·²ç»è¢«åºŸå¼ƒäº†ã€‚</li>
<li>Cache-Controlå¼ºç¼“å­˜ ï¼š http1.1 ä¸­å¢åŠ è¯¥å­—æ®µï¼Œåªè¦åœ¨èµ„æºçš„å“åº”å¤´ä¸Šå†™ä¸Šéœ€è¦ç¼“ å­˜å¤šä¹…å°±å¥½äº†ï¼Œå•ä½æ˜¯ç§’ã€‚ Cache-Control:max-age&#x3D;N , æœ‰max-ageã€s-maxageã€     no-cacheã€no-storeã€privateã€publicè¿™å…­ä¸ªå±æ€§ã€‚<br>  max-ageå†³å®šå®¢æˆ·ç«¯èµ„æºè¢«ç¼“å­˜å¤šä¹…ã€‚    s-maxageå†³å®šä»£ç†æœåŠ¡å™¨ç¼“å­˜çš„æ—¶â»“ã€‚    no-cacheè¡¨ç¤ºæ˜¯å¼ºåˆ¶è¿›â¾åå•†ç¼“å­˜ã€‚    no-storeæ˜¯è¡¨ç¤ºç¦â½Œä»»ä½•ç¼“å­˜ç­–ç•¥ã€‚    publicè¡¨ç¤ºèµ„æºæ—¢å¯ä»¥è¢«æµè§ˆå™¨ç¼“å­˜ä¹Ÿå¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ã€‚    privateè¡¨ç¤ºèµ„æºåªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜ï¼Œé»˜è®¤ä¸ºprivate</li>
</ul>
</li>
<li>åŸºäº last-modified çš„åå•†ç¼“å­˜<br>  â¾¸å…ˆéœ€è¦åœ¨æœåŠ¡å™¨ç«¯è¯»å‡ºâ½‚ä»¶ä¿®æ”¹æ—¶é—´ï¼Œå°†è¯»å‡ºæ¥çš„ä¿®æ”¹æ—¶é—´èµ‹ç»™å“åº”å¤´çš„last-modifiedå­—æ®µã€‚æœ€åè®¾ç½®Cache-control:no-cacheï¼Œå½“å®¢æˆ·ç«¯è¯»å–åˆ°last-modifiedçš„æ—¶å€™ï¼Œä¼šåœ¨ä¸‹æ¬¡çš„è¯·æ±‚æ ‡å¤´ä¸­æºå¸¦â¼€ä¸ªå­—æ®µ:If-ModifiedSinceï¼Œâ½½è¿™ä¸ªè¯·æ±‚å¤´ä¸­çš„If-Modified-Sinceå°±æ˜¯æœåŠ¡å™¨ç¬¬â¼€æ¬¡ä¿®æ”¹æ—¶å€™ç»™ä»–çš„æ—¶é—´ã€‚ä¹‹åæ¯æ¬¡å¯¹è¯¥èµ„æºçš„è¯·æ±‚ï¼Œéƒ½ä¼šå¸¦ä¸ŠIf-Modified-Sinceè¿™ä¸ªå­—æ®µï¼Œâ½½æœåŠ¡ç«¯å°±éœ€è¦æ‹¿åˆ°è¿™ä¸ªæ—¶é—´å¹¶å†æ¬¡è¯»å–è¯¥èµ„æºçš„ä¿®æ”¹æ—¶é—´ï¼Œè®©ä»–ä»¬ä¸¤ä¸ªåšâ¼€ä¸ªâ½å¯¹æ¥å†³å®šæ˜¯è¯»å–ç¼“å­˜è¿˜æ˜¯è¿”å›æ–°çš„èµ„æºã€‚<br>  ç¼ºç‚¹ï¼š<br>  å› ä¸ºæ˜¯æ›´å…·â½‚ä»¶ä¿®æ”¹æ—¶é—´æ¥åˆ¤æ–­çš„ï¼Œæ‰€ä»¥ï¼Œåœ¨â½‚ä»¶å†…å®¹æœ¬èº«ä¸ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œä¾ç„¶æœ‰å¯èƒ½æ›´æ–°â½‚ä»¶ä¿®æ”¹æ—¶é—´ï¼ˆâ½å¦‚ä¿®æ”¹â½‚ä»¶åå†æ”¹å›æ¥ï¼‰ï¼Œè¿™æ ·ï¼Œå°±æœ‰å¯èƒ½â½‚ä»¶å†…å®¹æ˜æ˜æ²¡æœ‰ä¿®æ”¹ï¼Œä½†æ˜¯ç¼“å­˜ä¾ç„¶å¤±æ•ˆäº†ã€‚å½“â½‚ä»¶åœ¨æçŸ­æ—¶é—´å†…å®Œæˆä¿®æ”¹çš„æ—¶å€™ï¼ˆâ½å¦‚â¼ç™¾æ¯«ç§’ï¼‰ã€‚å› ä¸ºâ½‚ä»¶ä¿®æ”¹æ—¶é—´è®°å½•çš„æœ€â¼©å•ä½æ˜¯ç§’ï¼Œæ‰€ä»¥ï¼Œå¦‚æœâ½‚ä»¶åœ¨â¼ç™¾æ¯«ç§’å†…å®Œæˆä¿®æ”¹çš„è¯ï¼Œâ½‚ä»¶ä¿®æ”¹æ—¶é—´ä¸ä¼šæ”¹å˜ï¼Œè¿™æ ·ï¼Œå³ä½¿â½‚ä»¶å†…å®¹ä¿®æ”¹äº†ï¼Œä¾ç„¶ä¸ä¼šè¿”å›æ–°çš„â½‚ä»¶ã€‚</li>
<li>åŸºäº ETag çš„åå•†ç¼“å­˜ï¼š<br>  å°†åŸå…ˆåå•†ç¼“å­˜çš„â½è¾ƒæ—¶é—´æˆ³çš„å½¢å¼ä¿®æ”¹æˆäº†â½è¾ƒâ½‚ä»¶æŒ‡çº¹ï¼ˆæ ¹    æ®â½‚ä»¶å†…å®¹è®¡ç®—å‡ºçš„å”¯â¼€å“ˆå¸Œå€¼ï¼‰ã€‚ç¬¬â¼€æ¬¡è¯·æ±‚æŸèµ„æºçš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯è¯»å–â½‚ä»¶å¹¶è®¡ç®—å‡ºâ½‚ä»¶æŒ‡çº¹ï¼Œå°†â½‚ä»¶æŒ‡çº¹æ”¾åœ¨å“åº”å¤´çš„ Etagå­—æ®µä¸­è·Ÿèµ„æºâ¼€èµ·è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ç¬¬â¼†æ¬¡è¯·æ±‚æŸèµ„æºçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯â¾ƒåŠ¨ä»ç¼“å­˜ä¸­è¯»å–å‡ºä¸Šâ¼€æ¬¡æœåŠ¡ç«¯è¿”å›çš„ETagä¹Ÿå°±æ˜¯â½‚ä»¶æŒ‡çº¹ã€‚å¹¶èµ‹ç»™è¯·æ±‚å¤´çš„if-None-Matchå­—æ®µï¼Œè®©ä¸Šâ¼€æ¬¡çš„â½‚ä»¶æŒ‡çº¹è·Ÿéšè¯·æ±‚â¼€èµ·å›åˆ°æœåŠ¡ç«¯ã€‚<br>  æœåŠ¡ç«¯æ‹¿åˆ°è¯·æ±‚å¤´ä¸­çš„if-None-Matchå­—æ®µå€¼ï¼ˆä¹Ÿå°±æ˜¯ä¸Šâ¼€æ¬¡çš„â½‚ä»¶æŒ‡çº¹ï¼‰ï¼Œå¹¶å†æ¬¡è¯»å–â½¬æ ‡èµ„æºå¹¶â½£æˆâ½‚ä»¶æŒ‡çº¹ï¼Œä¸¤ä¸ªæŒ‡çº¹åšå¯¹â½ã€‚å¦‚æœä¸¤ä¸ªâ½‚ä»¶æŒ‡çº¹å®Œå…¨å»åˆï¼Œè¯´æ˜â½‚ä»¶æ²¡æœ‰è¢«æ”¹å˜ï¼Œåˆ™ç›´æ¥è¿”å›304çŠ¶æ€ç å’Œâ¼€ä¸ªç©ºçš„å“åº”ä½“å¹¶returnã€‚å¦‚æœä¸¤ä¸ªâ½‚ä»¶æŒ‡çº¹ä¸å»åˆï¼Œåˆ™è¯´æ˜â½‚ä»¶è¢«æ›´æ”¹ï¼Œé‚£ä¹ˆå°†æ–°çš„â½‚ä»¶æŒ‡çº¹é‡æ–°å­˜å‚¨åˆ°å“åº”å¤´çš„ETagä¸­å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚<br>  ç¼ºç‚¹ï¼š<br>  ETagéœ€è¦è®¡ç®—â½‚ä»¶æŒ‡çº¹è¿™æ ·æ„å‘³ç€ï¼ŒæœåŠ¡ç«¯éœ€è¦æ›´å¤šçš„è®¡ç®—å¼€é”€ã€‚ã€‚å¦‚æœâ½‚ä»¶å°ºâ¼¨â¼¤ï¼Œæ•°é‡å¤šï¼Œå¹¶ä¸”è®¡ç®—é¢‘ç¹ï¼Œé‚£ä¹ˆETagçš„è®¡ç®—å°±ä¼šå½±å“æœåŠ¡å™¨çš„æ€§èƒ½ã€‚æ˜¾ç„¶ï¼ŒETagåœ¨è¿™æ ·çš„åœºæ™¯ä¸‹å°±ä¸æ˜¯å¾ˆé€‚åˆã€‚ETagæœ‰å¼ºéªŒè¯å’Œå¼±éªŒè¯ï¼Œæ‰€è°“å°†å¼ºéªŒè¯ï¼ŒETagâ½£æˆçš„å“ˆå¸Œç æ·±â¼Šåˆ°æ¯ä¸ªå­—èŠ‚ã€‚å“ªæ€•â½‚ä»¶ä¸­åªæœ‰â¼€ä¸ªå­—èŠ‚æ”¹å˜äº†ï¼Œä¹Ÿä¼šâ½£æˆä¸åŒçš„å“ˆå¸Œå€¼ï¼Œå®ƒå¯ä»¥ä¿è¯â½‚ä»¶å†…å®¹ç»å¯¹çš„ä¸å˜ã€‚ä½†æ˜¯ï¼Œå¼ºéªŒè¯â¾®å¸¸æ¶ˆè€—è®¡ç®—é‡ã€‚ETagè¿˜æœ‰â¼€ä¸ªå¼±éªŒè¯ï¼Œå¼±éªŒè¯æ˜¯æå–â½‚ä»¶çš„éƒ¨åˆ†å±æ€§æ¥â½£æˆå“ˆå¸Œå€¼ã€‚å› ä¸ºä¸å¿…ç²¾ç¡®åˆ°æ¯ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä»–çš„æ•´ä½“é€Ÿåº¦ä¼šâ½å¼ºéªŒè¯å¿«ï¼Œä½†æ˜¯å‡†ç¡®ç‡ä¸â¾¼ã€‚ä¼šé™ä½åå•†ç¼“å­˜çš„æœ‰æ•ˆæ€§ã€‚</li>
<li>æœ‰å“ˆå¸Œå€¼çš„â½‚ä»¶è®¾ç½®å¼ºç¼“å­˜å³å¯ã€‚æ²¡æœ‰å“ˆå¸Œå€¼çš„â½‚ä»¶ï¼ˆâ½å¦‚index.htmlï¼‰è®¾ç½®åå•†ç¼“å­˜ã€‚</li>
</ul>
</li>
<li><p>DNSã€ã€</p>
<ul>
<li>DNSï¼ˆDomain Name Systemï¼‰åŸŸåç®¡ç†ç³»ç»Ÿï¼Œæ˜¯å½“â½¤æˆ·ä½¿â½¤æµè§ˆå™¨è®¿é—®â½¹å€ä¹‹åï¼Œä½¿â½¤çš„ç¬¬â¼€ä¸ªé‡è¦åè®®ã€‚DNS è¦è§£å†³çš„æ˜¯åŸŸåå’Œ IP åœ°å€çš„æ˜ å°„é—®é¢˜ã€‚</li>
<li>æŸ¥è¯¢è¿‡ç¨‹ï¼š<ol>
<li>â¾¸å…ˆâ½¤æˆ·åœ¨æµè§ˆå™¨è¾“â¼ŠURLåœ°å€åï¼Œä¼šå…ˆæŸ¥è¯¢æµè§ˆå™¨ç¼“å­˜æ˜¯å¦æœ‰è¯¥åŸŸåå¯¹åº”çš„IPåœ°å€ã€‚</li>
<li>å¦‚æœæµè§ˆå™¨ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œä¼šå»è®¡ç®—æœºæœ¬åœ°çš„Hostâ½‚ä»¶ä¸­æŸ¥è¯¢æ˜¯å¦æœ‰å¯¹åº”çš„ç¼“å­˜ã€‚</li>
<li>å¦‚æœHostâ½‚ä»¶ä¸­ä¹Ÿæ²¡æœ‰åˆ™ä¼šå‘æœ¬åœ°çš„DNSè§£æå™¨ï¼ˆé€šå¸¸ç”±ä½ çš„äº’è”â½¹æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰æä¾›ï¼‰å‘é€â¼€ä¸ªDNSæŸ¥è¯¢è¯·æ±‚ã€‚</li>
<li>å¦‚æœæœ¬åœ°DNSè§£æå™¨æ²¡æœ‰ç¼“å­˜è¯¥åŸŸåçš„è§£æè®°å½•ï¼Œå®ƒä¼šå‘æ ¹DNSæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚ã€‚æ ¹DNSæœåŠ¡å™¨å¹¶ä¸è´Ÿè´£è§£æåŸŸåï¼Œä½†å®ƒèƒ½å‘Šè¯‰æœ¬åœ°DNSè§£æå™¨åº”è¯¥å‘å“ªä¸ªé¡¶çº§åŸŸï¼ˆ.com&#x2F;.net&#x2F;.orgï¼‰çš„DNSæœåŠ¡å™¨ç»§ç»­æŸ¥è¯¢ã€‚</li>
<li>æœ¬åœ°DNSè§£æå™¨æ¥ç€å‘æŒ‡å®šçš„é¡¶çº§åŸŸDNSæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚ã€‚é¡¶çº§åŸŸDNSæœåŠ¡å™¨ä¹Ÿä¸è´Ÿè´£å…·ä½“çš„åŸŸåè§£æï¼Œä½†å®ƒèƒ½å‘Šè¯‰æœ¬åœ°DNSè§£æå™¨åº”è¯¥å‰å¾€å“ªä¸ªæƒå¨DNSæœåŠ¡å™¨æŸ¥è¯¢ä¸‹â¼€æ­¥çš„ä¿¡æ¯ã€‚</li>
<li>æœ¬åœ°DNSè§£æå™¨æœ€åå‘æƒå¨DNSæœåŠ¡å™¨å‘é€æŸ¥è¯¢è¯·æ±‚ã€‚ æƒå¨DNSæœåŠ¡å™¨æ˜¯è´Ÿè´£å­˜å‚¨ç‰¹å®šåŸŸåå’ŒIPåœ°å€æ˜ å°„çš„æœåŠ¡å™¨ã€‚å½“æƒå¨DNSæœåŠ¡å™¨æ”¶åˆ°æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾â€example.comâ€åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™æœ¬åœ°DNSè§£æå™¨ã€‚</li>
<li>æœ¬åœ°DNSè§£æå™¨å°†æ”¶åˆ°çš„IPåœ°å€è¿”å›ç»™æµè§ˆå™¨ï¼Œå¹¶ä¸”è¿˜ä¼šå°†åŸŸåè§£æç»“æœç¼“å­˜åœ¨æœ¬åœ°ï¼Œä»¥ä¾¿ä¸‹æ¬¡è®¿é—®æ—¶æ›´å¿«åœ°å“åº”</li>
</ol>
</li>
</ul>
</li>
<li><p>HTTPå¤šä¸ªTCPè¿æ¥æ€ä¹ˆå®ç°ï¼Ÿï¼Ÿï¼Ÿ<br>å¤šä¸ªtcpè¿æ¥æ˜¯é æŸäº›æœåŠ¡å™¨å¯¹ Connection: keep-alive çš„ Header è¿›â¾äº†â½€æŒã€‚ç®€â½½â¾”ä¹‹ï¼Œå®Œæˆè¿™ä¸ª HTTP è¯·æ±‚ä¹‹åï¼Œä¸è¦æ–­å¼€ HTTP è¯·æ±‚ä½¿â½¤çš„ TCP è¿æ¥ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯è¿æ¥å¯ä»¥è¢«é‡æ–°ä½¿â½¤ï¼Œä¹‹åå‘é€ HTTP è¯·æ±‚çš„æ—¶å€™ä¸éœ€è¦é‡æ–°å»ºâ½´ TCP è¿æ¥ï¼Œä»¥åŠå¦‚æœç»´æŒè¿æ¥ï¼Œé‚£ä¹ˆ SSL çš„å¼€é”€ä¹Ÿå¯ä»¥é¿å…</p>
</li>
<li><p>TCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</p>
<ul>
<li>åœ¨å»ºç«‹TCPè¿æ¥æ—¶ï¼Œéœ€è¦é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹ï¼Œè¿‡ç¨‹æ˜¯:<br>  1ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªSYN<br>  2ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°SYNåï¼Œç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªSYN_ACK<br>  3ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°SYN_ACKåï¼Œå†ç»™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªACK</li>
<li>åœ¨æ–­å¼€TCPè¿æ¥æ—¶ï¼Œéœ€è¦é€šè¿‡å››æ¬¡æŒ¥æ‰‹æ¥æ–­å¼€ï¼Œè¿‡ç¨‹æ˜¯<br>  1ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€FIN<br>  2ï¼ŒæœåŠ¡ç«¯æ¥æ”¶FINåï¼Œå‘å®¢æˆ·ç‡ƒå‘é€ACKï¼Œè¡¨ç¤ºæˆ‘æ¥æ”¶åˆ°äº†æ–­å¼€è¿æ¥çš„è¯·æ±‚ï¼Œå®¢æˆ·ç«¯ä½ å¯ä»¥ä¸å‘æ•°æ®äº†ï¼Œä¸è¿‡æœåŠ¡ç«¯è¿™è¾¹å¯èƒ½è¿˜æœ‰æ•°æ®æ­£åœ¨å¤„ç†<br>  3ï¼ŒæœåŠ¡ç«¯å¤„ç†å®Œæ‰€æœ‰æ•°æ®åï¼Œå‘å®¢æˆ·ç«¯å‘é€FINï¼Œè¡¨ç¤ºæœåŠ¡ç«¯ç°åœ¨å¯ä»¥æ–­å¼€è¿æ¥<br>  4ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„FINï¼Œå‘æœåŠ¡ç«¯å‘é€ACKï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯ä¹Ÿä¼šæ–­å¼€è¿æ¥äº†</li>
</ul>
</li>
<li><p><strong>ä¸‰æ¬¡æ¡â¼¿çš„è¿‡ç¨‹ï¼Œä»¥åŠä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡ï¼Œâ½½ä¸æ˜¯å››æ¬¡ï¼Œä¸¤æ¬¡ï¼Ÿ</strong></p>
<ul>
<li>ä¸‰æ¬¡æ¡â¼¿çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š<ol>
<li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ SYN æŠ¥â½‚ã€åˆå§‹åŒ–åºåˆ—å· ISNï¼ˆseq&#x3D;xï¼‰ï¼Œç„¶åå®¢æˆ·ç«¯è¿›â¼Š SYN_SEND çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ã€‚</li>
<li>æœåŠ¡ç«¯å‘é€ ACK ç¡®è®¤æœåŠ¡ç«¯çš„ SYN æŠ¥â½‚ (ack&#x3D;x+1) åŒæ—¶å‘å‡ºâ¼€ä¸ª SYN æŠ¥â½‚ï¼Œå¸¦ä¸Šâ¾ƒâ¼°çš„åˆå§‹åŒ–åºåˆ—å· ï¼ˆseq&#x3D;y ï¼‰ï¼Œç„¶åæœåŠ¡ç«¯è¿›â¼Š SYN_RECV çŠ¶æ€ã€‚</li>
<li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯çš„ SYNã€ACK æŠ¥â½‚ï¼ŒACKç¡®è®¤æœåŠ¡ç«¯çš„ SYNC æŠ¥â½‚ ï¼ˆACK&#x3D;y+1ï¼‰ ï¼Œç„¶åå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½è¿›â¼Š ESTABLISHED çŠ¶æ€ï¼Œå®Œæˆ TCP ä¸‰æ¬¡æ¡â¼¿</li>
</ol>
</li>
<li>ä¸ºä»€ä¹ˆä¸æ˜¯å››æ¬¡æ¡â¼¿ï¼Ÿ ä¸ºä»€ä¹ˆä¸èƒ½ä¸¤æ¬¡æ¡â¼¿ï¼Ÿ<br>  å› ä¸ºä¸‰æ¬¡æ¡â¼¿æ‰èƒ½ä¿è¯åŒâ½…å…·æœ‰æ¥æ”¶å’Œå‘é€çš„èƒ½â¼’ã€‚ ä¸¤æ¬¡æ¡â¼¿å¯èƒ½å¯¼è‡´èµ„æºçš„æµªè´¹ï¼Œç”±äºæ²¡æœ‰ç¬¬ä¸‰æ¬¡æ¡â¼¿ï¼ŒæœåŠ¡ç«¯å°±â½†æ³•ç¡®è®¤å®¢æˆ·ç«¯æ˜¯å¦æ”¶åˆ°äº†â¾ƒâ¼°çš„å›å¤ï¼Œæ‰€ä»¥æ¯æ”¶åˆ°â¼€ä¸ª SYN ï¼ŒæœåŠ¡å™¨éƒ½ä¼šä¸»åŠ¨å»å»ºâ½´â¼€ä¸ªè¿æ¥, â½½å››æ¬¡æ¡â¼¿å¯ä»¥ä¼˜åŒ–ä¸ºä¸‰æ¬¡ã€‚</li>
</ul>
</li>
<li><p><strong>å››æ¬¡æŒ¥â¼¿çš„è¿‡ç¨‹ï¼Œä»¥åŠä¸ºä»€ä¹ˆæ˜¯å››æ¬¡ï¼Ÿ</strong></p>
<ul>
<li>å››æ¬¡æŒ¥â¼¿çš„è¿‡ç¨‹ï¼š<ol>
<li>å®¢æˆ·ç«¯å‘é€â¼€ä¸ª FIN æŠ¥â½‚ç»™æœåŠ¡ç«¯ï¼Œè¡¨ç¤ºâ¾ƒâ¼°è¦æ–­å¼€æ•°æ®ä¼ é€ï¼ŒæŠ¥â½‚ä¸­ä¼šæŒ‡å®šâ¼€ä¸ªåºåˆ—å· (seq&#x3D;x) ã€‚ç„¶å,å®¢æˆ·ç«¯è¿›â¼Š FIN-WAIT-1 çŠ¶æ€ã€‚</li>
<li>æœåŠ¡ç«¯æ”¶åˆ° FIN æŠ¥â½‚åï¼Œå›å¤ ACK æŠ¥â½‚ç»™å®¢æˆ·ç«¯ï¼Œä¸”æŠŠå®¢æˆ·ç«¯çš„åºåˆ—å·å€¼ +1 ï¼Œä½œä¸ºACK + 1 æŠ¥â½‚çš„åºåˆ—å· (seq&#x3D;x+1) ç„¶åï¼ŒæœåŠ¡ç«¯è¿›â¼Š CLOSE-WAIT (seq&#x3D;x+1) çŠ¶æ€ï¼Œå®¢æˆ·ç«¯è¿›â¼Š FIN-WAIT-2 çŠ¶æ€ã€‚</li>
<li>æœåŠ¡ç«¯ä¹Ÿè¦æ–­å¼€è¿æ¥æ—¶ï¼Œå‘é€ FIN æŠ¥â½‚ç»™å®¢æˆ·ç«¯ï¼Œä¸”æŒ‡å®šâ¼€ä¸ªåºåˆ—å· (seq&#x3D;y+1) ï¼ŒéšåæœåŠ¡ç«¯è¿›â¼Š LAST-ACK çŠ¶æ€ã€‚</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ° FIN æŠ¥â½‚åï¼Œå‘å‡º ACK æŠ¥â½‚è¿›â¾åº”ç­”ï¼Œå¹¶æŠŠæœåŠ¡ç«¯çš„åºåˆ—å·å€¼ +1 ä½œä¸º ACK æŠ¥â½‚åºåˆ—å· (seq&#x3D;y+2) ã€‚æ­¤æ—¶å®¢æˆ·ç«¯è¿›â¼Š TIME-WAIT çŠ¶æ€ã€‚æœåŠ¡ç«¯åœ¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ ACK æŠ¥â½‚åè¿›â¼Š CLOSE çŠ¶æ€ã€‚å¦‚æœå®¢æˆ·ç«¯ç­‰å¾… 2MSL æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œæ‰å…³é—­è¿æ¥</li>
</ol>
</li>
<li>ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥â¼¿ï¼Ÿ<br>  TCP æ˜¯å…¨åŒâ¼¯é€šä¿¡ï¼Œå¯ä»¥åŒå‘ä¼ è¾“æ•°æ®ã€‚ä»»ä½•â¼€â½…éƒ½å¯ä»¥åœ¨æ•°æ®ä¼ é€ç»“æŸåå‘å‡ºè¿æ¥é‡Šæ”¾çš„é€šçŸ¥ï¼Œå¾…å¯¹â½…ç¡®è®¤åè¿›â¼ŠåŠå…³é—­çŠ¶æ€ã€‚ å½“å¦â¼€â½…ä¹Ÿæ²¡æœ‰æ•°æ®å†å‘é€çš„æ—¶å€™ï¼Œåˆ™å‘å‡ºè¿æ¥é‡Šæ”¾é€šçŸ¥ï¼Œå¯¹â½…ç¡®è®¤åæ‰ä¼šå®Œå…¨å…³é—­äº† TCP è¿æ¥ã€‚ æ€»ç»“ï¼šä¸¤æ¬¡æ¡â¼¿å¯ä»¥é‡Šæ”¾â¼€ç«¯åˆ°å¦â¼€ç«¯çš„ TCP è¿æ¥ï¼Œå®Œå…¨é‡Šæ”¾è¿æ¥â¼€å…±éœ€è¦å››æ¬¡æ¡â¼¿</li>
<li>ä¸ºä»€ä¹ˆä¼šæœ‰ <code>TIME_WAIT</code> çŠ¶æ€ï¼Ÿå‘ç”Ÿåœ¨å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯ï¼Ÿ<ol>
<li>ç¡®ä¿æ•°æ®å¯é ä¼ è¾“ï¼šåœ¨å››æ¬¡æŒ¥æ‰‹ä¸­ï¼Œæœ€åä¸€æ¬¡æŒ¥æ‰‹ç”±æœåŠ¡ç«¯å‘é€ <code>FIN</code> æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œè¡¨ç¤ºæœåŠ¡ç«¯å·²ç»å…³é—­äº†è¿æ¥ã€‚æ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥ <code>TIME_WAIT</code> çŠ¶æ€ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆé€šå¸¸æ˜¯2å€çš„æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´ï¼ˆMSLï¼‰ï¼‰ï¼Œç¡®ä¿æœåŠ¡ç«¯æ¥æ”¶åˆ°æœ€åä¸€ä¸ª <code>ACK</code> æŠ¥æ–‡ï¼Œä»¥ä¿è¯æ•°æ®çš„å¯é ä¼ è¾“ã€‚</li>
<li>å¤„ç†å¯èƒ½çš„é‡ä¼ æ•°æ®åŒ…ï¼šåœ¨ç½‘ç»œä¸­å¯èƒ½ä¼šå‡ºç°ä¸€äº›å»¶è¿Ÿåˆ°è¾¾çš„æ•°æ®åŒ…æˆ–è€…æœåŠ¡ç«¯æœªæ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤æŠ¥æ–‡çš„æƒ…å†µã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨æ”¶åˆ°æœåŠ¡ç«¯çš„ <code>FIN</code> æŠ¥æ–‡åç›´æ¥å…³é—­è¿æ¥è€Œä¸è¿›å…¥ <code>TIME_WAIT</code> çŠ¶æ€ï¼Œé‚£ä¹ˆå¦‚æœæœåŠ¡ç«¯åœ¨å…³é—­è¿æ¥åçš„ä¸€æ®µæ—¶é—´å†…é‡ä¼ äº† <code>FIN</code> æŠ¥æ–‡ï¼Œå®¢æˆ·ç«¯å°±æ— æ³•æ­£ç¡®å¤„ç†è¿™ä¸ªé‡ä¼ çš„ <code>FIN</code> æŠ¥æ–‡ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿æ¥å¼‚å¸¸ã€‚<br> <code>TIME_WAIT</code> çŠ¶æ€ä¸€èˆ¬åœ¨å®¢æˆ·ç«¯è®¾ç½®ã€‚è¿™æ˜¯å› ä¸ºåœ¨ TCP åè®®ä¸­ï¼Œå®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¿æ¥å¹¶ä¸»åŠ¨å…³é—­è¿æ¥çš„æƒ…å†µæ¯”è¾ƒå¸¸è§ï¼Œå› æ­¤å®¢æˆ·ç«¯éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ç¡®ä¿è¿æ¥å…³é—­çš„å¯é æ€§ã€‚æœåŠ¡ç«¯åœ¨å…³é—­è¿æ¥åä¼šç›´æ¥è¿›å…¥ <code>CLOSED</code> çŠ¶æ€ï¼Œä¸éœ€è¦ç­‰å¾…ï¼Œå› ä¸ºæœåŠ¡ç«¯å·²ç»æ²¡æœ‰å‘é€æ•°æ®çš„éœ€æ±‚ï¼Œåªéœ€ç­‰å¾…å®¢æˆ·ç«¯çš„æœ€åä¸€ä¸ª <code>ACK</code> ç¡®è®¤å³å¯ã€‚é€šå¸¸ï¼Œæ“ä½œç³»ç»Ÿä¼šå¯¹ <code>TIME_WAIT</code> çŠ¶æ€çš„æŒç»­æ—¶é—´è¿›è¡Œé…ç½®ï¼Œä»¥ä¾¿åˆç†åˆ©ç”¨ç³»ç»Ÿèµ„æºå¹¶ç¡®ä¿è¿æ¥å…³é—­çš„å¯é æ€§ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>TCPä¸UDPçš„æ¦‚å¿µï¼Œç‰¹ç‚¹ï¼ŒåŒºåˆ«å’Œå¯¹åº”çš„ä½¿â½¤åœºæ™¯ï¼Ÿ</p>
<ul>
<li>TCPä¸UDPçš„æ¦‚å¿µ<br>  TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯â¼€ç§â¾¯å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚<br>  UDPï¼ˆâ½¤æˆ·æ•°æ®æŠ¥åè®®ï¼‰ä¸ºåº”â½¤ç¨‹åºæä¾›äº†â¼€ç§â½†éœ€å»ºâ½´è¿æ¥å°±å¯ä»¥å‘é€å°è£…çš„IPæ•°æ®åŒ…çš„â½…æ³•ã€‚</li>
<li>ç‰¹ç‚¹<br>  TCPï¼šâ¾¯å‘è¿æ¥ï¼Œä¼ è¾“å¯é ï¼Œä¼ è¾“å½¢å¼ä¸ºå­—èŠ‚æµï¼Œä¼ è¾“æ•ˆç‡æ…¢ï¼Œæ‰€éœ€èµ„æºå¤šã€‚<br>  UDPï¼šâ½†è¿æ¥ã€ä¼ è¾“ä¸å¯é ã€ä¼ è¾“å½¢å¼ä¸ºæ•°æ®æŠ¥â½‚æ®µï¼Œä¼ è¾“æ•ˆç‡å¿«ï¼Œæ‰€éœ€èµ„æºå°‘ã€‚</li>
<li>åŒºåˆ«<ol>
<li>è¿æ¥ï¼šTCP æ˜¯â¾¯å‘è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œä¼ è¾“æ•°æ®å‰å…ˆè¦å»ºâ½´è¿æ¥ã€‚UDP æ˜¯ä¸éœ€è¦è¿æ¥ï¼Œå³åˆ»ä¼ è¾“æ•°æ®ã€‚</li>
<li>æœåŠ¡å¯¹è±¡ï¼šTCP æ˜¯â¼€å¯¹â¼€çš„ä¸¤ç‚¹æœåŠ¡ï¼Œå³â¼€æ¡è¿æ¥åªæœ‰ä¸¤ä¸ªç«¯ç‚¹ã€‚UDP â½€æŒâ¼€å¯¹â¼€ã€â¼€å¯¹å¤šã€å¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡</li>
<li>æ˜¯å¦æœ‰çŠ¶æ€ï¼šTCP ä¼ è¾“æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå®ƒä¼šå»è®°å½•â¾ƒâ¼°å‘é€æ¶ˆæ¯çš„çŠ¶æ€â½å¦‚æ¶ˆæ¯æ˜¯å¦å‘é€äº†ã€æ˜¯å¦è¢«æ¥æ”¶äº†ç­‰ç­‰ï¼Œâ½½ UDP æ˜¯â½†çŠ¶æ€çš„ã€‚</li>
<li>å¯é æ€§ï¼šTCPå¯é äº¤ä»˜æ•°æ®ï¼Œæ•°æ®å¯ä»¥â½†å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€æŒ‰éœ€åˆ°è¾¾ã€‚UDPå°½æœ€â¼¤åŠªâ¼’ï¼Œä¸ä¿è¯å¯é äº¤ä»˜æ•°æ®ã€‚<br>  TCPåœ¨ä¼ é€’æ•°æ®ä¹‹å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡â¼¿æ¥å»ºâ½´è¿æ¥ï¼›åœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—â¼ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚UDPæ•°æ®ä¼ é€’ä¸éœ€è¦ç»™å‡ºä»»ä½•ç¡®è®¤ï¼Œä¸”ä¸ä¿è¯æ•°æ®ä¸ä¸¢å¤±åŠåˆ°è¾¾é¡ºåºï¼›æ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå³ä½¿â½¹ç»œâ¾®å¸¸æ‹¥å µäº†ï¼Œä¹Ÿä¸ä¼šå½±å“ UDP çš„å‘é€é€Ÿç‡ã€‚</li>
<li>â¾¸éƒ¨å¼€é”€ï¼šTCP â¾¸éƒ¨â»“åº¦è¾ƒâ»“ï¼Œä¼šæœ‰â¼€å®šçš„å¼€é”€ï¼Œâ¾¸éƒ¨åœ¨æ²¡æœ‰ä½¿â½¤ã€Œé€‰é¡¹ã€å­—æ®µæ—¶æ˜¯ 20 ä¸ªå­—èŠ‚ï¼Œå¦‚æœä½¿â½¤äº†ã€Œé€‰é¡¹ã€å­—æ®µåˆ™ä¼šå˜â»“çš„ (20 ~ 60å­—èŠ‚)ã€‚UDP â¾¸éƒ¨åªæœ‰ 8 ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸”æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¼€é”€è¾ƒâ¼©ã€‚</li>
<li>ä¼ è¾“â½…å¼ï¼šTCP æ˜¯â¾¯å‘å­—èŠ‚æµçš„ï¼ŒUDP â¾¯å‘æŠ¥â½‚ã€‚TCP æ˜¯æµå¼ä¼ è¾“ï¼Œæ²¡æœ‰è¾¹ç•Œï¼Œä½†ä¿è¯é¡ºåºå’Œå¯é ã€‚UDP æ˜¯â¼€ä¸ªåŒ…â¼€ä¸ªåŒ…çš„å‘é€ï¼Œæ˜¯æœ‰è¾¹ç•Œçš„ï¼Œä½†å¯èƒ½ä¸¢åŒ…å’Œä¹±åºã€‚</li>
<li>ä¼ è¾“æ•ˆç‡ï¼šç”±äºTCP ä¼ è¾“çš„æ—¶å€™å¤šäº†è¿æ¥ã€ç¡®è®¤é‡ä¼ ç­‰æœºåˆ¶ï¼Œæ‰€ä»¥TCP çš„ä¼ è¾“æ•ˆç‡è¦â½UDP ä½ã€‚</li>
<li>åˆ†â½šä¸åŒï¼š<ul>
<li>TCP çš„æ•°æ®â¼¤â¼©å¦‚æœâ¼¤äº MSS â¼¤â¼©ï¼Œåˆ™ä¼šåœ¨ä¼ è¾“å±‚è¿›â¾åˆ†â½šï¼Œâ½¬æ ‡ä¸»æœºæ”¶åˆ°åï¼Œä¹ŸåŒæ ·åœ¨ä¼ è¾“å±‚ç»„è£… TCP æ•°æ®åŒ…ï¼Œå¦‚æœä¸­é€”ä¸¢å¤±äº†â¼€ä¸ªåˆ†â½šï¼Œåªéœ€è¦ä¼ è¾“ä¸¢å¤±çš„è¿™ä¸ªåˆ†â½šã€‚</li>
<li>UDP çš„æ•°æ®â¼¤â¼©å¦‚æœâ¼¤äº MTU â¼¤â¼©ï¼Œåˆ™ä¼šåœ¨ IP å±‚è¿›â¾åˆ†â½šï¼Œâ½¬æ ‡ä¸»æœºæ”¶åˆ°åï¼Œåœ¨ IP å±‚ç»„è£…å®Œæ•°æ®ï¼Œæ¥ç€å†ä¼ ç»™ä¼ è¾“å±‚ï¼Œä½†æ˜¯å¦‚æœä¸­é€”ä¸¢äº†â¼€ä¸ªåˆ†â½šï¼Œåœ¨å®ç°å¯é ä¼ è¾“çš„ UDP æ—¶åˆ™å°±éœ€è¦é‡ä¼ æ‰€æœ‰çš„æ•°æ®åŒ…ï¼Œè¿™æ ·ä¼ è¾“æ•ˆç‡â¾®å¸¸å·®ï¼Œæ‰€ä»¥é€šå¸¸ UDP çš„æŠ¥â½‚åº”è¯¥â¼©äº MTUã€‚</li>
</ul>
</li>
</ol>
</li>
<li>å¯¹åº”çš„ä½¿â½¤åœºæ™¯<br>  TCPå¸¸â½¤äºè¦æ±‚é€šä¿¡æ•°æ®å¯é åœºæ™¯ï¼ˆå¦‚â½¹â»šæµè§ˆã€â½‚ä»¶ä¼ è¾“ã€é‚®ä»¶ä¼ è¾“ã€è¿œç¨‹ç™»å½•ã€æ•°æ®åº“æ“ä½œç­‰ï¼‰ã€‚<br>  UDPå¸¸â½¤äºè¦æ±‚é€šä¿¡é€Ÿåº¦â¾¼åœºæ™¯ï¼ˆå¦‚åŸŸåè½¬æ¢ã€è§†é¢‘ç›´æ’­ã€å®æ—¶æ¸¸æˆç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li><p>TCP çš„ Keepalive å’Œ HTTP çš„ Keep-Alive æ˜¯â¼€ä¸ªä¸œâ»„å—ï¼Ÿ</p>
<ul>
<li>HTTP çš„ Keep-Aliveï¼Œæ˜¯ç”±åº”â½¤å±‚ï¼ˆâ½¤æˆ·æ€ï¼‰ å®ç°çš„ï¼Œç§°ä¸º HTTP â»“è¿æ¥ï¼›<br>  æ¯æ¬¡è¯·æ±‚éƒ½è¦ç»å†è¿™æ ·çš„è¿‡ç¨‹ï¼šå»ºâ½´ TCP -&gt; è¯·æ±‚èµ„æº -&gt; å“åº”èµ„æº -&gt; é‡Šæ”¾è¿æ¥ï¼Œè¿™å°±æ˜¯HTTPçŸ­è¿æ¥ï¼Œä½†æ˜¯è¿™æ ·æ¯æ¬¡å»ºâ½´è¿æ¥éƒ½åªèƒ½è¯·æ±‚â¼€æ¬¡èµ„æºï¼Œæ‰€ä»¥HTTP çš„ Keep-Aliveå®ç°äº†ä½¿â½¤åŒâ¼€ä¸ª TCP è¿æ¥æ¥å‘é€å’Œæ¥æ”¶å¤šä¸ª HTTP è¯·æ±‚&#x2F;åº”ç­”ï¼Œé¿å…äº†è¿æ¥å»ºâ½´å’Œé‡Šæ”¾çš„å¼€é”€ï¼Œå°±å°±æ˜¯ HTTP â»“è¿æ¥ã€‚</li>
<li>TCP çš„ Keepaliveï¼Œæ˜¯ç”± TCP å±‚ï¼ˆå†…æ ¸æ€ï¼‰ å®ç°çš„ï¼Œç§°ä¸º TCP ä¿æ´»æœºåˆ¶ï¼›é€šä¿—åœ°è¯´ï¼Œå°±æ˜¯TCPæœ‰â¼€ä¸ªå®šæ—¶ä»»åŠ¡åšå€’è®¡æ—¶ï¼Œè¶…æ—¶åä¼šè§¦å‘ä»»åŠ¡ï¼Œå†…å®¹æ˜¯å‘é€â¼€ä¸ªæ¢æµ‹æŠ¥â½‚ç»™å¯¹ç«¯ï¼Œâ½¤æ¥åˆ¤æ–­å¯¹ç«¯æ˜¯å¦å­˜æ´»ã€‚</li>
</ul>
</li>
<li><p>TCPè¿æ¥å¦‚ä½•ç¡®ä¿å¯é æ€§ï¼Ÿ</p>
<ol>
<li>æ•°æ®å—â¼¤â¼©æ§åˆ¶ï¼š åº”â½¤æ•°æ®è¢«åˆ†å‰²æˆTCPè®¤ä¸ºæœ€åˆé€‚å‘é€çš„æ•°æ®å—ï¼Œå†ä¼ è¾“ç»™â½¹ç»œå±‚ï¼Œæ•°æ®å—è¢«ç§°ä¸ºæŠ¥â½‚æ®µæˆ–æ®µã€‚</li>
<li>åºåˆ—å·ï¼šTCPç»™æ¯ä¸ªæ•°æ®åŒ…æŒ‡å®šåºåˆ—å·ï¼Œæ¥æ”¶â½…æ ¹æ®åºåˆ—å·å¯¹æ•°æ®åŒ…è¿›â¾æ’åºï¼Œå¹¶æ ¹æ®åºåˆ—å·å¯¹æ•°æ®åŒ…å»é‡ã€‚</li>
<li>æ ¡éªŒå’Œï¼šTCPå°†ä¿æŒå®ƒâ¾¸éƒ¨å’Œæ•°æ®çš„æ ¡éªŒå’Œã€‚è¿™æ˜¯â¼€ä¸ªç«¯åˆ°ç«¯çš„æ£€éªŒå’Œï¼Œâ½¬çš„æ˜¯æ£€æµ‹æ•°æ®åœ¨ä¼ è¾“ä¸­çš„ä»»ä½•å˜åŒ–ã€‚è‹¥æ”¶åˆ°æŠ¥â½‚çš„æ£€éªŒå’Œæœ‰å·®é”™ï¼ŒTCPå°†ä¸¢å¼ƒè¿™ä¸ªæŠ¥â½‚æ®µå’Œä¸ç¡®è®¤æ”¶åˆ°æ­¤æŠ¥â½‚æ®µã€‚</li>
<li>æµé‡æ§åˆ¶ï¼š TCPè¿æ¥çš„æ¯â¼€â½…éƒ½æœ‰å›ºå®šâ¼¤â¼©çš„ç¼“å†²ç©ºé—´ï¼ŒTCPçš„æ¥æ”¶ç«¯åªå…è®¸å‘é€ç«¯å‘é€æ¥æ”¶ç«¯ç¼“å†²åŒºèƒ½æ¥çº³çš„æ•°æ®ã€‚å½“æ¥æ”¶â½…æ¥ä¸åŠå¤„ç†å‘é€â½…çš„æ•°æ®ï¼Œèƒ½æç¤ºå‘é€â½…é™ä½å‘é€çš„é€Ÿç‡ï¼Œé˜²â½ŒåŒ…ä¸¢å¤±ã€‚TCPåˆ©â½¤æ»‘åŠ¨çª—â¼å®ç°æµé‡æ§åˆ¶ã€‚</li>
<li>æ‹¥å¡æ§åˆ¶ï¼š å½“â½¹ç»œæ‹¥å¡æ—¶ï¼Œå‡å°‘æ•°æ®çš„å‘é€ã€‚</li>
<li>ç¡®è®¤åº”ç­”ï¼š é€šè¿‡ ARQ åè®®å®ç°ã€‚åŸºæœ¬åŸç†æ˜¯æ¯å‘å®Œâ¼€ä¸ªåˆ†ç»„å°±åœâ½Œå‘é€ï¼Œç­‰å¾…å¯¹â½…ç¡®è®¤ã€‚å¦‚æœæ²¡æ”¶åˆ°ç¡®è®¤ï¼Œä¼šé‡å‘æ•°æ®åŒ…ï¼Œç›´åˆ°ç¡®è®¤åå†å‘ä¸‹â¼€ä¸ªåˆ†ç»„ã€‚</li>
<li>è¶…æ—¶é‡ä¼ ï¼š å½“TCPå‘å‡ºâ¼€ä¸ªæ•°æ®æ®µåï¼Œå®ƒå¯åŠ¨â¼€ä¸ªå®šæ—¶å™¨ï¼Œç­‰å¾…â½¬çš„ç«¯ç¡®è®¤æ”¶åˆ°è¿™ä¸ªæŠ¥â½‚æ®µã€‚å¦‚æœä¸èƒ½åŠæ—¶æ”¶åˆ°â¼€ä¸ªç¡®è®¤ï¼Œå°†é‡å‘è¿™ä¸ªæŠ¥â½‚æ®µã€‚</li>
</ol>
</li>
<li><p>æ—¢ç„¶æåˆ°äº†æ‹¥å¡æ§åˆ¶ï¼Œé‚£ä½ èƒ½è¯´è¯´è¯´æ‹¥å¡æ§åˆ¶æ˜¯æ€ä¹ˆå®ç°çš„å˜›<br>  æ‹¥å¡æ§åˆ¶ç®—æ³•ä¸»è¦æœ‰ä»¥ä¸‹â¼ç§ï¼š</p>
<ol>
<li>æ…¢å¯åŠ¨ï¼š  åœ¨è¿æ¥åˆšå¼€å§‹æ—¶ï¼Œå‘é€â½…ä¼šé€æ¸å¢åŠ å‘é€çª—â¼â¼¤â¼©ï¼Œä»â½½ä»¥æŒ‡æ•°å¢â»“çš„é€Ÿåº¦å¢åŠ å‘é€çš„æ•°æ®é‡ã€‚</li>
<li>æ‹¥å¡é¿å…ï¼š â¼€æ—¦æ…¢å¯åŠ¨é˜¶æ®µè¿‡å»ï¼Œå‘é€â½…è¿›â¼Šæ‹¥å¡é¿å…é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå‘é€â½…é€æ¸å¢åŠ å‘é€çª—â¼çš„â¼¤â¼©ï¼Œä½†å¢åŠ é€Ÿç‡è¾ƒæ…¢ï¼Œé¿å…è¿‡å¿«å¢åŠ å¯¼è‡´â½¹ç»œæ‹¥å¡ã€‚</li>
<li>è¶…æ—¶é‡ä¼ ï¼š å¦‚æœå‘é€â½…åœ¨è¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°ç¡®è®¤ï¼Œå®ƒä¼šè®¤ä¸ºæ•°æ®åŒ…ä¸¢å¤±ï¼Œå¹¶é‡ä¼ è¿™äº›æ•°æ®åŒ…ã€‚è¿™æ˜¯æ‹¥å¡æ§åˆ¶çš„æœ€åâ¼¿æ®µï¼Œâ½¤äºæ£€æµ‹å’Œå¤„ç†â½¹ç»œä¸­çš„ä¸¢åŒ…æˆ–æ‹¥å¡æƒ…å†µã€‚å½“â½¹ç»œå‡ºç°æ‹¥å¡ï¼Œä¹Ÿå°±æ˜¯ä¼šå‘â½£æ•°æ®åŒ…é‡ä¼ </li>
<li>å¿«é€Ÿé‡ä¼ ï¼ˆFast Retransmitï¼‰å’Œå¿«é€Ÿæ¢å¤ï¼ˆFast Recoveryï¼‰ï¼š å½“å‘é€â½…å‘é€çš„æ•°æ®åŒ…ä¸¢å¤±æˆ–â½¹ç»œå‡ºç°æ‹¥å¡æ—¶ï¼Œæ¥æ”¶â½…ä¼šå‘é€é‡å¤ç¡®è®¤ï¼ˆduplicate ACKï¼‰é€šçŸ¥ å‘é€â½…æœ‰æ•°æ®åŒ…ä¸¢å¤±ã€‚å½“å‘é€â½…æ”¶åˆ°â¼€å®šæ•°é‡çš„é‡å¤ç¡®è®¤æ—¶ï¼Œå®ƒä¼šâ½´å³é‡ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…ï¼Œâ½½ä¸æ˜¯ç­‰å¾…è¶…æ—¶ã€‚è¿™æ ·å¯ä»¥å‡å°‘â½¹ç»œçš„æ‹¥å¡ç¨‹åº¦ã€‚</li>
<li>æ‹¥å¡çª—â¼è°ƒæ•´ï¼š   å‘é€â½…æ ¹æ®â½¹ç»œçš„æ‹¥å¡ç¨‹åº¦åŠ¨æ€è°ƒæ•´å‘é€çª—â¼çš„â¼¤â¼©ï¼Œé€šè¿‡ç›‘æµ‹â½¹ç»œå»¶è¿Ÿå’Œä¸¢åŒ…æƒ…å†µæ¥ç¡®å®šåˆé€‚çš„å‘é€é€Ÿç‡ï¼Œä»¥é¿å…â½¹ç»œæ‹¥å¡ã€‚</li>
</ol>
</li>
<li><p>TCP ä¼ é€æ•°æ®çš„è¿‡ç¨‹ã€ã€</p>
<ol>
<li>å»ºç«‹è¿æ¥ï¼šåœ¨ TCP é€šä¿¡å¼€å§‹å‰ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹éœ€è¦é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬å‘é€æ–¹å‘é€ SYN æŠ¥æ–‡æ®µç»™æ¥æ”¶æ–¹ï¼Œæ¥æ”¶æ–¹å›å¤ SYN+ACK æŠ¥æ–‡æ®µç»™å‘é€æ–¹ï¼Œæœ€åå‘é€æ–¹å‘é€ ACK æŠ¥æ–‡æ®µç»™æ¥æ”¶æ–¹ï¼Œå»ºç«‹èµ·åŒå‘çš„é€šä¿¡è¿æ¥ã€‚</li>
<li>æ•°æ®åˆ†å‰²ï¼šå‘é€æ–¹å°†åº”ç”¨å±‚çš„æ•°æ®æµåˆ†å‰²æˆé€‚å½“å¤§å°çš„æ•°æ®å—ï¼Œæ¯ä¸ªæ•°æ®å—ç§°ä¸ºä¸€ä¸ªæŠ¥æ–‡æ®µï¼ˆSegmentï¼‰ï¼Œæ¯ä¸ªæŠ¥æ–‡æ®µéƒ½å¸¦æœ‰åºåˆ—å·ï¼Œç”¨äºæ ‡è¯†æ•°æ®çš„é¡ºåºã€‚ï¼ˆTCP åŸºäºå­—èŠ‚æµä¼ è¾“ï¼Œè¿™ç§å­—èŠ‚æµä¼ è¾“çš„æ–¹å¼æ˜¯åœ¨ TCP åè®®çš„æŠ½è±¡å±‚é¢ä¸Šå®ç°çš„ï¼Œå®é™…ä¼ è¾“æ—¶ï¼ŒTCP ä½¿ç”¨æŠ¥æ–‡æ®µä½œä¸ºä¼ è¾“å•ä½æ¥ä¿è¯æ•°æ®çš„å¯é ä¼ è¾“ã€‚ï¼‰</li>
<li>å‘é€æ•°æ®ï¼šå‘é€æ–¹æ ¹æ® TCP çš„æ»‘åŠ¨çª—å£æœºåˆ¶å’Œæ‹¥å¡æ§åˆ¶ç®—æ³•ï¼Œå°†æŠ¥æ–‡æ®µå‘é€ç»™æ¥æ”¶æ–¹ã€‚å‘é€æ–¹æ ¹æ®æ¥æ”¶æ–¹çš„ç¡®è®¤æƒ…å†µå’Œç½‘ç»œæƒ…å†µåŠ¨æ€è°ƒæ•´å‘é€é€Ÿç‡å’Œçª—å£å¤§å°ï¼Œç¡®ä¿æ•°æ®çš„å¯é ä¼ è¾“å’Œç½‘ç»œçš„ç¨³å®šæ€§ã€‚</li>
<li>æ¥æ”¶æ•°æ®ï¼šæ¥æ”¶æ–¹æ¥æ”¶åˆ°æŠ¥æ–‡æ®µåï¼Œä¼šè¿›è¡Œç¡®è®¤ï¼Œå³å‘é€ ACK æŠ¥æ–‡æ®µç»™å‘é€æ–¹ï¼Œç¡®è®¤æ¥æ”¶åˆ°çš„æ•°æ®ã€‚å¦‚æœæœ‰ä¸¢å¤±æˆ–æŸåçš„æ•°æ®ï¼Œæ¥æ”¶æ–¹ä¼šè¦æ±‚å‘é€æ–¹é‡æ–°å‘é€æ•°æ®ã€‚</li>
<li>æ•°æ®é‡ç»„ï¼šæ¥æ”¶æ–¹æ ¹æ®æŠ¥æ–‡æ®µçš„åºåˆ—å·å’Œæ•°æ®éƒ¨åˆ†å°†æ•°æ®é‡ç»„æˆå®Œæ•´çš„æ•°æ®æµï¼Œç„¶åäº¤ç»™åº”ç”¨å±‚è¿›è¡Œå¤„ç†ã€‚</li>
<li>è¿æ¥å…³é—­ï¼šå½“æ•°æ®ä¼ è¾“å®Œæˆåï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¼šé€šè¿‡å››æ¬¡æŒ¥æ‰‹çš„æ–¹å¼å…³é—­è¿æ¥ã€‚å‘é€æ–¹å‘é€ FIN æŠ¥æ–‡æ®µç»™æ¥æ”¶æ–¹ï¼Œè¡¨ç¤ºä¸å†å‘é€æ•°æ®ï¼›æ¥æ”¶æ–¹å›å¤ ACK æŠ¥æ–‡æ®µç¡®è®¤ï¼Œå¹¶å‘é€ FIN æŠ¥æ–‡æ®µç»™å‘é€æ–¹ï¼›å‘é€æ–¹å†æ¬¡å‘é€ ACK æŠ¥æ–‡æ®µç»™æ¥æ”¶æ–¹ï¼Œå®Œæˆè¿æ¥å…³é—­ã€‚</li>
</ol>
</li>
<li><p>Cookie å’Œ Session æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<ul>
<li>éƒ½â½¤äºç®¡ç†â½¤æˆ·çš„çŠ¶æ€å’Œèº«ä»½, Cookie é€šè¿‡åœ¨å®¢æˆ·ç«¯è®°å½•ä¿¡æ¯ç¡®å®šâ½¤æˆ·èº«ä»½ï¼Œ Session åœ¨æœåŠ¡å™¨ç«¯è®°å½•ä¿¡æ¯ç¡®å®šâ½¤æˆ·èº«ä»½ã€‚</li>
<li>Cookieï¼šæ˜¯å­˜å‚¨åœ¨â½¤æˆ·æµè§ˆå™¨ä¸­çš„â¼©å‹â½‚æœ¬â½‚ä»¶ï¼Œâ¼€èˆ¬ä¸ºâ¼ KBï¼Œâ½¤äºåœ¨â½¤æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ•°æ®ã€‚é€šå¸¸ï¼ŒæœåŠ¡å™¨ä¼šå°†â¼€ä¸ªæˆ–å¤šä¸ª Cookie å‘é€åˆ°â½¤æˆ·æµè§ˆå™¨ï¼Œç„¶åæµè§ˆå™¨å°†è¿™äº› Cookie å­˜å‚¨åœ¨æœ¬åœ°ã€‚<br>  æœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°æ¥â¾ƒå®¢æˆ·ç«¯æµè§ˆå™¨çš„è¯·æ±‚ä¹‹åï¼Œå°±èƒ½å¤Ÿé€šè¿‡åˆ†æå­˜æ”¾äºè¯·æ±‚å¤´çš„Cookieå¾—åˆ°å®¢æˆ·ç«¯ç‰¹æœ‰çš„ä¿¡æ¯ï¼Œä»â½½åŠ¨æ€â½£æˆä¸è¯¥å®¢æˆ·ç«¯ç›¸å¯¹åº”çš„å†…å®¹ã€‚</li>
<li>Sessionï¼šå®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä»¥æŸç§å½¢å¼è®°å½•åœ¨æœåŠ¡å™¨ä¸Šã€‚è¿™å°±æ˜¯ Sessionï¼Œä¸»è¦â½¤äºç»´æŠ¤â½¤æˆ·ç™»å½•çŠ¶æ€ã€å­˜å‚¨â½¤æˆ·çš„ä¸´æ—¶æ•°æ®å’Œä¸Šä¸‹â½‚ä¿¡æ¯ç­‰ã€‚å­˜å‚¨å®¹é‡è¾ƒâ¼¤ï¼Œé€šå¸¸æ²¡æœ‰å›ºå®šé™åˆ¶ï¼Œå–å†³äºæœåŠ¡å™¨çš„é…ç½®å’Œèµ„æºã€‚</li>
<li>å®‰å…¨æ€§ï¼šç”±äº Cookie å­˜å‚¨åœ¨â½¤æˆ·æµè§ˆå™¨ä¸­ï¼Œå› æ­¤å¯ä»¥è¢«â½¤æˆ·è¯»å–å’Œç¯¡æ”¹ã€‚ç›¸â½ä¹‹ä¸‹ï¼ŒSession æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œæ›´éš¾è¢«â½¤æˆ·è®¿é—®å’Œä¿®æ”¹ã€‚</li>
<li>ä¼ è¾“â½…å¼ï¼šCookie åœ¨æ¯æ¬¡ HTTP è¯·æ±‚ä¸­éƒ½ä¼šè¢«â¾ƒåŠ¨å‘é€åˆ°æœåŠ¡å™¨ï¼Œâ½½ Session ID é€šå¸¸é€šè¿‡ Cookie æˆ– URL å‚æ•°ä¼ é€’ã€‚</li>
</ul>
</li>
<li><p>WEB è´Ÿè½½å‡è¡¡æ–¹æ¡ˆã€‚<br>æ˜¯é€šè¿‡åˆç†åˆ†é…ç½‘ç»œæµé‡ï¼Œå°†è¯·æ±‚å‡åŒ€åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€å¯ç”¨æ€§å’Œå¯ä¼¸ç¼©æ€§ã€‚<br>1ã€ç¡¬ä»¶è´Ÿè½½å‡è¡¡ï¼šé€šå¸¸æ˜¯ä¸“é—¨è®¾è®¡ç”¨äºå¤„ç†è´Ÿè½½å‡è¡¡ä»»åŠ¡çš„è®¾å¤‡ã€‚è¿™äº›è®¾å¤‡å¯ä»¥ä½äºç½‘ç»œæµé‡çš„å‰ç«¯ï¼Œæ ¹æ®é¢„å®šä¹‰çš„ç®—æ³•å’Œç­–ç•¥å°†è¯·æ±‚åˆ†å‘ç»™åç«¯çš„å¤šä¸ªæœåŠ¡å™¨ã€‚ç¡¬ä»¶è´Ÿè½½å‡è¡¡çš„ä¼˜åŠ¿åœ¨äºå®ƒå¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘è¿æ¥ï¼ŒåŒæ—¶æä¾›é«˜æ€§èƒ½å’Œä½å»¶è¿Ÿã€‚<strong>æ€§èƒ½ä¼˜è¶Šï¼š</strong> ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨é€šå¸¸å…·æœ‰é«˜æ€§èƒ½çš„ç¡¬ä»¶å¤„ç†èƒ½åŠ›ï¼Œèƒ½å¤Ÿåº”å¯¹å¤§é‡è¯·æ±‚ã€‚<strong>ä¸°å¯Œçš„ç®—æ³•ï¼š</strong> æ”¯æŒå¤šç§è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå¦‚è½®è¯¢ã€åŠ æƒè½®è¯¢ã€æœ€å°è¿æ¥æ•°ç­‰ã€‚<strong>é«˜å¯ç”¨æ€§ï¼š</strong> æ”¯æŒå†—ä½™é…ç½®ï¼Œä»¥ç¡®ä¿è´Ÿè½½å‡è¡¡è®¾å¤‡æœ¬èº«çš„é«˜å¯ç”¨æ€§ã€‚<br>2ã€è½¯ä»¶è´Ÿè½½å‡è¡¡ï¼šé€šå¸¸æ˜¯é€šè¿‡åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œç‰¹å®šçš„è´Ÿè½½å‡è¡¡è½¯ä»¶æ¥å®ç°çš„ï¼Œè¿™äº›è½¯ä»¶å¯ä»¥åœ¨æ™®é€šæœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨äº‘ç¯å¢ƒä¸­ã€‚è½¯ä»¶è´Ÿè½½å‡è¡¡å™¨é€šå¸¸æä¾›ä¸€ç³»åˆ—é…ç½®é€‰é¡¹ï¼Œä»¥ä¾¿æ ¹æ®ç‰¹å®šéœ€æ±‚è¿›è¡Œå®šåˆ¶ã€‚<br>3ã€DNSè´Ÿè½½å‡è¡¡ï¼šå¯ä»¥å°†åŸŸåæ˜ å°„åˆ°å¤šä¸ªIPåœ°å€ï¼Œå®ç°æµé‡çš„åˆ†å‘ã€‚DNSè´Ÿè½½å‡è¡¡çš„ä¼˜ç‚¹åœ¨äºå…¶ç®€å•æ€§å’Œä½æˆæœ¬ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­å¯èƒ½ä¼šå—åˆ°DNSç¼“å­˜çš„å½±å“ï¼Œå¯¼è‡´æµé‡åˆ†å‘ä¸å‡åŒ€ã€‚<br>4ã€ç½‘ç»œè´Ÿè½½å‡è¡¡ï¼šé€šè¿‡ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚äº¤æ¢æœºã€è·¯ç”±å™¨ï¼‰è¿›è¡Œæµé‡åˆ†å‘ã€‚è¿™ç§æ–¹å¼é€šå¸¸æ¶‰åŠæ›´åº•å±‚çš„ç½‘ç»œé…ç½®ï¼Œå¯ä»¥åœ¨ä¸åŒå±‚æ¬¡ä¸Šå®ç°è´Ÿè½½å‡è¡¡ã€‚<br>é€‚ç”¨äºéœ€è¦å¤„ç†å¤§è§„æ¨¡æµé‡çš„åœºæ™¯ã€‚é…ç½®å’Œç®¡ç†è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦æ·±å…¥ç†è§£ç½‘ç»œç»“æ„ã€‚</p>
</li>
<li><p>192.168.1.0 åˆ†æˆ 4 ä¸ªå­ç½‘ï¼Œå­ç½‘æ©ç æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>å­ç½‘æ©ç ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒå¿…é¡»ç»“åˆIPåœ°å€ä¸€èµ·ä½¿ç”¨ã€‚IPåœ°å€æˆ‘ä»¬éƒ½çŸ¥é“æ˜¯è®¡ç®—æœºåœ¨ç½‘ç»œå†…çš„å”¯ä¸€æ ‡è¯†ï¼Œè€Œå­ç½‘æ©ç é¡¾åæ€ä¹‰æ˜¯ç”¨äºåˆ’åˆ†å­ç½‘çš„<br>  å­ç½‘æ©ç åªæœ‰ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯å°†æŸä¸ªIPåœ°å€åˆ’åˆ†æˆç½‘ç»œåœ°å€å’Œä¸»æœºåœ°å€ä¸¤éƒ¨åˆ†ã€‚å­ç½‘æ©ç æ˜¯ä¸€ä¸ª32ä½åœ°å€ï¼Œç”¨äºå±è”½IPåœ°å€çš„ä¸€éƒ¨åˆ†ä»¥åŒºåˆ«ç½‘ç»œæ ‡è¯†å’Œä¸»æœºæ ‡è¯†ï¼Œå¹¶è¯´æ˜è¯¥IPåœ°å€æ˜¯åœ¨å±€åŸŸç½‘ä¸Šï¼Œè¿˜æ˜¯åœ¨è¿œç¨‹ç½‘ä¸Šã€‚</li>
<li>é»˜è®¤çš„å­ç½‘æ©ç 255.255.255.0ï¼šå°†è¯¥å­ç½‘æ©ç çš„äºŒè¿›åˆ¶ç”±24ä¸ª1å’Œ8ä¸ª0ç»„æˆï¼Œ8ä¸ª0è¡¨ç¤ºè¯¥å­ç½‘æ©ç åˆ’åˆ†å‡ºçš„å­ç½‘å®¹é‡ä¸º256ï¼ˆ2çš„8æ¬¡æ–¹ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´192.168.1.0-255éƒ½åœ¨åŒä¸€ä¸ªå­ç½‘ä¸­ï¼Œè¿™256ä¸ªåœ°å€ä¸­å¯ç”¨åœ°å€åªæœ‰254ä¸ªï¼Œå› ä¸ºè§„å®šæ¯ä¸ªå­ç½‘çš„ç¬¬ä¸€ä¸ªIPåœ°å€ä¸ºç½‘æ®µåœ°å€ï¼Œæœ€åä¸€ä¸ªIPåœ°å€ä¸ºå¹¿æ’­åœ°å€ï¼Œéƒ½ä¸å¯ç”¨ã€‚</li>
<li>æŸä¸ªå°å‹å…¬å¸æœ‰å››ä¸ªéƒ¨é—¨ï¼Œæ¯ä¸ªéƒ¨é—¨å„40å°è®¡ç®—æœºæ¥å…¥å…¬å¸å±€åŸŸç½‘äº¤æ¢æœºï¼Œå¦‚æœè¦åœ¨192.168.1.0ç½‘æ®µä¸ºæ¯ä¸ªéƒ¨é—¨åˆ’åˆ†å­ç½‘ï¼Œå­ç½‘æ©ç åº”è¯¥æ€ä¹ˆè®¾ç½®ï¼Œæ¯ä¸ªå­ç½‘çš„åœ°å€èŒƒå›´åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ<ul>
<li>192.168.1.0ç½‘æ®µå…±256ä¸ªåœ°å€ï¼Œåˆ’åˆ†4ä¸ªå­ç½‘ï¼Œæ¯ä¸ªå­ç½‘éœ€è¦64ä¸ªåœ°å€ï¼›64æ˜¯2çš„6æ¬¡æ–¹ï¼Œå­ç½‘æ©ç åº”è¯¥ä»¥6ä¸ª0ç»“å°¾ï¼Œå‰©ä¸‹çš„ç”¨1è¡¥é½ï¼Œç”±26ä¸ª1å’Œ6ä¸ª0ç»„æˆï¼Œè½¬æ¢æˆåè¿›åˆ¶æ˜¯255.255.255.192ï¼›</li>
<li>æ¯ä¸ªå­ç½‘å…±64ä¸ªIPåœ°å€ï¼Œæå¤´å»å°¾åå¯ç”¨åœ°å€åªæœ‰62ä¸ªï¼Œç¬¬1ä¸ªå­ç½‘çš„å¯ç”¨IPåœ°å€èŒƒå›´æ˜¯ï¼š192.168.1.1-62ï¼Œç¬¬2ä¸ªå­ç½‘å¯ç”¨IPåœ°å€èŒƒå›´æ˜¯192.168.1.65-126ï¼Œç¬¬3ä¸ªå­ç½‘çš„å¯ç”¨IPåœ°å€èŒƒå›´æ˜¯ï¼š192.168.1.129-190ï¼Œç¬¬4ä¸ªå­ç½‘å¯ç”¨IPåœ°å€èŒƒå›´æ˜¯192.168.1.193-254ï¼›</li>
<li>å„éƒ¨é—¨è®¡ç®—æœºæŒ‰ç…§ä¸Šé¢å„å­ç½‘çš„IPåœ°å€èŒƒå›´è¿›è¡Œè®¾ç½®ï¼Œæ‰€æœ‰è®¡ç®—æœºçš„å­ç½‘æ©ç éƒ½å¿…é¡»è®¾ç½®ä¸º255.255.255.192ï¼Œè®¾ç½®å®Œæ¯•åå„éƒ¨é—¨å†…çš„è®¡ç®—æœºèƒ½æ­£å¸¸è”ç½‘ï¼Œä¸åŒéƒ¨é—¨é—´çš„è®¡ç®—æœºæ— æ³•ç›´æ¥è”é€šã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>

<h2 id="æ“-ä½œ-ç³»-ç»Ÿ"><a href="#æ“-ä½œ-ç³»-ç»Ÿ" class="headerlink" title="æ“ ä½œ ç³» ç»Ÿ"></a>æ“ ä½œ ç³» ç»Ÿ</h2><ul>
<li><p>è¿›ç¨‹ä¸çº¿ç¨‹ï¼Ÿ</p>
<ul>
<li>è¿›ç¨‹æ˜¯ç¨‹åºçš„æ‰§è¡Œå®ä¾‹ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´å’Œç³»ç»Ÿèµ„æºï¼Œæ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚æ˜¯ç³»ç»Ÿè¿›â¾èµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚</li>
<li>çº¿ç¨‹ Thread æ˜¯è¿›ç¨‹å†…çš„ç‹¬ç«‹æ‰§è¡Œå•å…ƒï¼Œå…±äº«ç›¸åŒçš„å†…å­˜ç©ºé—´å’Œèµ„æºï¼Œæ˜¯è¿›ç¨‹çš„å­æ‰§è¡Œå•å…ƒã€‚æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›â¾è¿ç®—è°ƒåº¦çš„æœ€â¼©å•ä½ã€‚<br>  çº¿ç¨‹â¼€ä¸ªè¿›ç¨‹â¾„å°‘æœ‰â¼€ä¸ªçº¿ç¨‹ï¼Œâ¼€ä¸ªè¿›ç¨‹å¯ä»¥è¿â¾å¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å…±äº«åŒâ¼€å—å†…å­˜ã€‚</li>
<li>èµ„æºå¼€é”€ï¼š<br>  è¿›ç¨‹ï¼šç”±äºæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬â½´çš„å†…å­˜ç©ºé—´ï¼Œåˆ›å»ºå’Œé”€æ¯è¿›ç¨‹çš„å¼€é”€è¾ƒâ¼¤ã€‚è¿›ç¨‹é—´åˆ‡æ¢éœ€è¦ä¿å­˜å’Œæ¢å¤æ•´ä¸ªè¿›ç¨‹çš„çŠ¶æ€ï¼Œå› æ­¤ä¸Šä¸‹â½‚åˆ‡æ¢çš„å¼€é”€è¾ƒâ¾¼ã€‚<br>  çº¿ç¨‹ï¼šçº¿ç¨‹å…±äº«ç›¸åŒçš„å†…å­˜ç©ºé—´ï¼Œåˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€è¾ƒâ¼©ã€‚çº¿ç¨‹é—´åˆ‡æ¢åªéœ€è¦ä¿å­˜å’Œæ¢å¤å°‘é‡çš„çº¿ç¨‹ä¸Šä¸‹â½‚ï¼Œå› æ­¤ä¸Šä¸‹â½‚åˆ‡æ¢çš„å¼€é”€è¾ƒâ¼©ã€‚</li>
<li>ï¼Ÿï¼Ÿé€šä¿¡ä¸åŒæ­¥ï¼š<br>  è¿›ç¨‹ï¼šç”±äºè¿›ç¨‹é—´ç›¸äº’éš”ç¦»ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡éœ€è¦ä½¿â½¤â¼€äº›ç‰¹æ®Šæœºåˆ¶ï¼Œå¦‚ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«    å†…å­˜ç­‰ã€‚<br>  çº¿ç¨‹ï¼šç”±äºçº¿ç¨‹å…±äº«ç›¸åŒçš„å†…å­˜ç©ºé—´ï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥ç›´æ¥è®¿é—®å…±äº«æ•°æ®ï¼Œçº¿ç¨‹é—´é€šä¿¡æ›´åŠ â½…ä¾¿ã€‚</li>
<li>å®‰å…¨æ€§ï¼š<br>  è¿›ç¨‹ï¼šç”±äºè¿›ç¨‹é—´ç›¸äº’éš”ç¦»ï¼Œâ¼€ä¸ªè¿›ç¨‹çš„å´©æºƒä¸ä¼šç›´æ¥å½±å“å…¶ä»–è¿›ç¨‹çš„ç¨³å®šæ€§ã€‚<br>  çº¿ç¨‹ï¼šç”±äºçº¿ç¨‹å…±äº«ç›¸åŒçš„å†…å­˜ç©ºé—´ï¼Œâ¼€ä¸ªçº¿ç¨‹çš„é”™è¯¯å¯èƒ½ä¼šå½±å“æ•´ä¸ªè¿›ç¨‹çš„ç¨³å®šæ€§ã€‚</li>
</ul>
</li>
<li><p>ä¸ºä»€ä¹ˆè¿›ç¨‹åˆ‡æ¢æ¯”çº¿ç¨‹åˆ‡æ¢å¼€é”€å¤§ï¼Ÿ</p>
<ol>
<li><strong>åœ°å€ç©ºé—´åˆ‡æ¢ï¼š</strong> è¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œè¿›ç¨‹åˆ‡æ¢æ—¶éœ€è¦åˆ‡æ¢åœ°å€ç©ºé—´ï¼ŒåŒ…æ‹¬è™šæ‹Ÿå†…å­˜ã€é¡µè¡¨ç­‰ï¼Œè€Œçº¿ç¨‹ä¹‹é—´å…±äº«åœ°å€ç©ºé—´ï¼Œçº¿ç¨‹åˆ‡æ¢æ—¶ä¸éœ€è¦è¿™ç§å¼€é”€ã€‚</li>
<li><strong>èµ„æºåˆ‡æ¢ï¼š</strong> è¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„èµ„æºï¼Œå¦‚æ–‡ä»¶æè¿°ç¬¦ã€å †æ ˆã€å…¨å±€å˜é‡ç­‰ï¼Œè¿›ç¨‹åˆ‡æ¢æ—¶éœ€è¦ä¿å­˜å’Œæ¢å¤è¿™äº›èµ„æºï¼Œè€Œçº¿ç¨‹ä¹‹é—´å…±äº«èµ„æºï¼Œçº¿ç¨‹åˆ‡æ¢æ—¶å¼€é”€è¾ƒå°ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼š</strong> è¿›ç¨‹åˆ‡æ¢æ—¶éœ€è¦ä¿å­˜å’Œæ¢å¤æ›´å¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰ã€å¯„å­˜å™¨ã€æ ˆæŒ‡é’ˆç­‰ï¼Œè€Œçº¿ç¨‹åˆ‡æ¢æ—¶åªéœ€ä¿å­˜å’Œæ¢å¤éƒ¨åˆ†ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li>
<li><strong>ç³»ç»Ÿè°ƒç”¨å¼€é”€ï¼š</strong> è¿›ç¨‹åˆ‡æ¢æ—¶å¯èƒ½éœ€è¦è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚åˆ‡æ¢åˆ°å†…æ ¸æ€ã€æ›´æ–°è¿›ç¨‹çŠ¶æ€ç­‰ï¼Œè€Œçº¿ç¨‹åˆ‡æ¢æ—¶å¯ä»¥åœ¨ç”¨æˆ·æ€å®Œæˆã€‚</li>
<li><strong>åŒæ­¥å’Œé€šä¿¡å¼€é”€ï¼š</strong> è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡å’ŒåŒæ­¥éœ€è¦é¢å¤–çš„å¼€é”€ï¼Œå¦‚ä¿¡å·é‡ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼Œè€Œçº¿ç¨‹ä¹‹é—´å¯ä»¥é€šè¿‡å…±äº«å†…å­˜ç­‰æ›´é«˜æ•ˆçš„æ–¹å¼è¿›è¡Œé€šä¿¡å’ŒåŒæ­¥ã€‚</li>
</ol>
</li>
<li><p>è¿›ç¨‹è°ƒåº¦ç®—æ³•ä½ äº†è§£å¤šå°‘ï¼Ÿ<br>  è¿›ç¨‹è°ƒåº¦ç®—æ³•æ˜¯æ“ä½œç³»ç»Ÿä¸­â½¤æ¥ç®¡ç†å’Œè°ƒåº¦è¿›ç¨‹ï¼ˆä¹Ÿç§°ä¸ºä»»åŠ¡æˆ–ä½œä¸šï¼‰æ‰§â¾çš„â½…æ³•ã€‚è¿™äº›ç®—æ³•å†³å®šäº†åœ¨å¤šä»»åŠ¡ç¯å¢ƒä¸‹ï¼Œå¦‚ä½•ä¸ºå„ä¸ªè¿›ç¨‹åˆ†é… CPU æ—¶é—´ï¼Œä»¥å®ç°å…¬å¹³æ€§ã€â¾¼ååé‡ã€ä½å»¶è¿Ÿç­‰ä¸åŒçš„è°ƒåº¦â½¬æ ‡ã€‚</p>
<ol>
<li>å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼š æŒ‰ç…§è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºè¿›â¾è°ƒåº¦ï¼Œå³æœ€æ—©åˆ°è¾¾çš„è¿›ç¨‹å…ˆæ‰§â¾ï¼Œç›´åˆ°å®Œæˆæˆ–é˜»å¡ã€‚</li>
<li>æœ€çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š    ä¼˜å…ˆé€‰æ‹©è¿â¾æ—¶é—´æœ€çŸ­çš„è¿›ç¨‹æ¥è¿â¾</li>
<li>â¾¼å“åº”â½ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š    ç»¼åˆè€ƒè™‘ç­‰å¾…æ—¶é—´å’ŒæœåŠ¡æ—¶é—´çš„â½ç‡ï¼Œé€‰æ‹©å…·æœ‰æœ€â¾¼å“åº”â½çš„è¿›ç¨‹æ¥æ‰§â¾</li>
<li>æ—¶é—´â½šè½®è½¬è°ƒåº¦ç®—æ³•ï¼š    å°† CPU æ—¶é—´åˆ’åˆ†ä¸ºæ—¶é—´â½šï¼ˆæ—¶é—´é‡ï¼‰ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨â¼€ä¸ªæ—¶é—´â½šå†…è¿â¾ï¼Œç„¶ååˆ‡æ¢åˆ°ä¸‹â¼€ä¸ªè¿›ç¨‹ã€‚</li>
<li>æœ€â¾¼ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼š    ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…â¼€ä¸ªä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§è¾ƒâ¾¼çš„è¿›ç¨‹å…ˆæ‰§â¾ã€‚è¿™å¯èƒ½å¯¼è‡´ä½ä¼˜å…ˆçº§è¿›ç¨‹â»“æ—¶é—´ç­‰å¾…ï¼Œ    å¯èƒ½å¼•å‘é¥¥é¥¿é—®é¢˜ã€‚</li>
<li>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼š    å°†è¿›ç¨‹åˆ’åˆ†ä¸ºå¤šä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—å…·æœ‰ä¸åŒçš„ä¼˜å…ˆçº§ï¼Œè¿›ç¨‹åœ¨é˜Ÿåˆ—ä¹‹é—´ç§»åŠ¨ã€‚å…·æœ‰æ›´â¾¼ä¼˜å…ˆçº§çš„ é˜Ÿåˆ—çš„è¿›ç¨‹ä¼šæ›´æ—©æ‰§â¾ï¼Œâ½½â»“æ—¶é—´ç­‰å¾…çš„è¿›ç¨‹ä¼šè¢«æå‡åˆ°æ›´â¾¼ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚</li>
<li>æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆï¼š    æ¯æ¬¡é€‰æ‹©å‰©ä½™æ‰§â¾æ—¶é—´æœ€çŸ­çš„è¿›ç¨‹æ¥æ‰§â¾ã€‚</li>
<li>æœ€â¼¤ååé‡è°ƒåº¦ï¼š    æ—¨åœ¨æœ€â¼¤åŒ–å•ä½æ—¶é—´å†…å®Œæˆçš„è¿›ç¨‹æ•°é‡</li>
</ol>
</li>
<li><p>è¿›ç¨‹é—´é€šä¿¡<br>  è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼ŒåŒ…æ‹¬ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡ã€å…±äº«å†…å­˜ç­‰ã€‚è¿™äº›æœºåˆ¶å…è®¸ä¸åŒè¿›ç¨‹ä¹‹é—´äº¤æ¢æ•°æ®å’ŒåŒæ­¥æ“ä½œã€‚</p>
<ol>
<li>ç®¡é“ï¼šæ˜¯â¼€ç§åŠåŒâ¼¯çš„é€šä¿¡â½…å¼ï¼Œæ•°æ®åªèƒ½å•å‘æµåŠ¨â½½ä¸”åªèƒ½åœ¨å…·æœ‰â½—â¼¦è¿›ç¨‹å…³ç³»çš„è¿›ç¨‹é—´ä½¿â½¤ã€‚</li>
<li>å‘½åç®¡é“ï¼š ä¹Ÿæ˜¯åŠåŒâ¼¯çš„é€šä¿¡â½…å¼ï¼Œä½†æ˜¯å®ƒå…è®¸â½†äº²ç¼˜å…³ç³»è¿›ç¨‹é—´çš„é€šä¿¡ã€‚</li>
<li>ä¿¡å·é‡ï¼šæ˜¯â¼€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥â½¤æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®ï¼Œå¸¸ä½œä¸ºâ¼€ç§é”æœºåˆ¶ï¼Œé˜²â½ŒæŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æºã€‚å› æ­¤ä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒâ¼€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥â¼¿æ®µã€‚</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå­˜æ”¾åœ¨å†…æ ¸ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘ã€ç®¡é“åªèƒ½æ‰¿è½½â½†æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºâ¼¤â¼©å—é™ç­‰ç¼ºç‚¹ã€‚</li>
<li>ä¿¡å·ï¼šâ½¤äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘â½£ï¼Œä»â½½è¿«ä½¿è¿›ç¨‹æ‰§â¾ä¿¡å·å¤„ç†ç¨‹åºã€‚</li>
<li>å…±äº«å†…å­˜ï¼šå°±æ˜¯æ˜ å°„â¼€æ®µèƒ½è¢«å…¶ä»–è¿›ç¨‹æ‰€è®¿é—®çš„å†…å­˜ï¼Œè¿™æ®µå…±äº«å†…å­˜ç”±â¼€ä¸ªè¿›ç¨‹åˆ›å»ºï¼Œä½†å¤šä¸ªè¿›ç¨‹éƒ½å¯ä»¥è®¿é—®ã€‚å…±äº«å†…å­˜æ˜¯æœ€å¿«çš„è¿›ç¨‹é€šä¿¡â½…å¼ï¼Œå®ƒæ˜¯é’ˆå¯¹å…¶ä»–è¿›ç¨‹é—´é€šä¿¡â½…å¼è¿â¾æ•ˆç‡ä½â½½ä¸“â»”è®¾è®¡çš„ã€‚å®ƒå¾€å¾€ä¸å…¶ä»–é€šä¿¡æœºåˆ¶ï¼Œâ½å¦‚ä¿¡å·é‡é…åˆä½¿â½¤ï¼Œæ¥å®ç°è¿›ç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡ã€‚</li>
<li>Socket å¥—æ¥å­—ï¼šæ˜¯â½€æŒTCP&#x2F;IP çš„â½¹ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œä¸»è¦â½¤äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡â½¹ç»œè¿›â¾é€šä¿¡</li>
</ol>
</li>
<li><p>ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿå¦‚ä½•é¿å…æ­»é”ï¼Ÿ<br>æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹åœ¨äº‰å¤ºç³»ç»Ÿèµ„æºæ—¶ï¼Œç”±äºäº’ç›¸ç­‰å¾…å¯¹â½…é‡Šæ”¾èµ„æºâ½½â½†æ³•ç»§ç»­æ‰§â¾çš„çŠ¶æ€ã€‚æ­»é”åªæœ‰åŒæ—¶æ»¡â¾œä»¥ä¸‹å››ä¸ªæ¡ä»¶æ‰ä¼šå‘â½£ï¼š<br>1ã€äº’æ–¥æ¡ä»¶ï¼šâ¼€ä¸ªè¿›ç¨‹å â½¤äº†æŸä¸ªèµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹â½†æ³•åŒæ—¶å â½¤è¯¥èµ„æºã€‚<br>2ã€è¯·æ±‚ä¿æŒæ¡ä»¶ï¼šâ¼€ä¸ªçº¿ç¨‹å› ä¸ºè¯·æ±‚èµ„æºâ½½é˜»å¡çš„æ—¶å€™ï¼Œä¸ä¼šé‡Šæ”¾â¾ƒâ¼°çš„èµ„æºã€‚<br>3ã€ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šèµ„æºä¸èƒ½è¢«å¼ºåˆ¶æ€§åœ°ä»â¼€ä¸ªè¿›ç¨‹ä¸­å‰¥å¤ºï¼Œåªèƒ½ç”±æŒæœ‰è€…â¾ƒæ„¿é‡Šæ”¾ã€‚<br>4ã€ç¯è·¯ç­‰å¾…æ¡ä»¶ï¼šå¤šä¸ªè¿›ç¨‹ä¹‹é—´å½¢æˆâ¼€ä¸ªå¾ªç¯ç­‰å¾…èµ„æºçš„é“¾ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä¸‹â¼€ä¸ªè¿›ç¨‹æ‰€å æœ‰çš„èµ„æºã€‚<br>åªéœ€è¦ç ´åä¸Šâ¾¯â¼€ä¸ªæ¡ä»¶å°±å¯ä»¥ç ´åæ­»é”ã€‚<br>ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šâ¼€æ¬¡æ€§ç”³è¯·æ‰€æœ‰çš„èµ„æºã€‚<br>ç ´åä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šå â½¤éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›â¼€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºã€‚<br>ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šé æŒ‰åºç”³è¯·èµ„æºæ¥é¢„é˜²ã€‚è®©æ‰€æœ‰è¿›ç¨‹æŒ‰ç…§ç›¸åŒçš„é¡ºåºè¯·æ±‚èµ„æºï¼Œé‡Šæ”¾èµ„æºåˆ™ååºé‡Šæ”¾ã€‚</p>
</li>
<li><p>å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹åŒºåˆ«ï¼š</p>
<ul>
<li>å¤šè¿›ç¨‹æ˜¯åœ¨ä¸åŒçš„åœ°å€ç©ºé—´ä¸­æ‰§è¡Œï¼Œç›¸äº’ç‹¬ç«‹ï¼Œé€šä¿¡ç›¸å¯¹å¤æ‚ï¼Œä½†æ›´ç¨³å®šã€‚</li>
<li>å¤šçº¿ç¨‹å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œé€šä¿¡æ›´æ–¹ä¾¿ï¼Œä½†éœ€è¦è€ƒè™‘åŒæ­¥å’Œç«æ€æ¡ä»¶ï¼Œå¯èƒ½å¯¼è‡´ä¸ç¨³å®šæ€§ã€‚</li>
</ul>
</li>
<li><p>è§£é‡Šâ¼€ä¸‹â½¤æˆ·æ€å’Œæ ¸â¼¼æ€<br>â½¤æˆ·æ€ User Mode å’Œæ ¸â¼¼æ€ Kernel Mode ï¼Œæ˜¯æ“ä½œç³»ç»Ÿä¸­ä¸¤ç§ä¸åŒçš„æ‰§â¾æ¨¡å¼ï¼Œâ½¤äºæ§åˆ¶è¿›ç¨‹æˆ–ç¨‹åºå¯¹è®¡ç®—æœºç¡¬ä»¶èµ„æºçš„è®¿é—®æƒé™å’Œæ“ä½œèŒƒå›´ã€‚<br>â½¤æˆ·æ€ï¼šè¿›ç¨‹æˆ–ç¨‹åºåªèƒ½è®¿é—®å—é™çš„èµ„æºå’Œæ‰§â¾å—é™çš„æŒ‡ä»¤é›†ï¼Œä¸èƒ½ç›´æ¥è®¿é—®æ“ä½œç³»ç»Ÿçš„æ ¸â¼¼éƒ¨åˆ†ï¼Œä¹Ÿä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºï¼Œâ½¤æˆ·æ€ä¸‹çš„ CPU ä¸å…è®¸ç‹¬å ï¼Œä¹Ÿå°±æ˜¯è¯´ CPU èƒ½å¤Ÿè¢«å…¶ä»–ç¨‹åºè·å–ã€‚<br>æ ¸â¼¼æ€ï¼šæ ¸â¼¼æ€æ˜¯æ“ä½œç³»ç»Ÿçš„ç‰¹æƒçº§åˆ«ï¼Œå…è®¸è¿›ç¨‹æˆ–ç¨‹åºæ‰§â¾ç‰¹æƒæŒ‡ä»¤å’Œè®¿é—®æ“ä½œç³»ç»Ÿçš„æ ¸â¼¼éƒ¨åˆ†ã€‚åœ¨æ ¸â¼¼æ€ä¸‹ï¼Œè¿›ç¨‹å¯ä»¥ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºï¼Œæ‰§â¾ç³»ç»Ÿè°ƒâ½¤ï¼Œç®¡ç†å†…å­˜ã€â½‚ä»¶ç³»ç»Ÿç­‰æ“ä½œã€‚å¤„äºå†…æ ¸æ€çš„ CPU å¯ä»¥ä»â¼€ä¸ªç¨‹åºåˆ‡æ¢åˆ°å¦å¤–â¼€ä¸ªç¨‹åºï¼Œå¹¶ä¸”å â½¤ CPU ä¸ä¼šå‘â½£æŠ¢å æƒ…å†µï¼Œâ¼€èˆ¬å¤„äºç‰¹æƒçº§ 0 çš„çŠ¶æ€æˆ‘ä»¬ç§°ä¹‹ä¸ºå†…æ ¸æ€</p>
</li>
<li><p>ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ã€‚<br>æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼ˆSystem Callï¼‰å®ç°çš„ã€‚ä¸‹é¢æ˜¯å¤§è‡´çš„æ­¥éª¤ï¼š<br>1ã€<strong>è§¦å‘ç³»ç»Ÿè°ƒç”¨ï¼š</strong> å½“ç”¨æˆ·ç¨‹åºéœ€è¦æ‰§è¡Œä¸€äº›ç‰¹æƒæ“ä½œï¼ˆä¾‹å¦‚æ–‡ä»¶æ“ä½œã€ç½‘ç»œè®¿é—®ã€å†…å­˜åˆ†é…ç­‰ï¼‰ï¼Œéœ€è¦è¯·æ±‚æ“ä½œç³»ç»Ÿçš„å¸®åŠ©ã€‚ç”¨æˆ·ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨æŒ‡ä»¤è§¦å‘è¿™ä¸€è¯·æ±‚ã€‚åœ¨ x86 æ¶æ„ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ <code>int 0x80</code> æˆ– <code>syscall</code> æŒ‡ä»¤æ¥è§¦å‘ç³»ç»Ÿè°ƒç”¨ã€‚<br>2ã€<strong>åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼š</strong> å½“å‘ç”Ÿç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œå¤„ç†å™¨ä¼šç”±ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ã€‚è¿™ä¸ªåˆ‡æ¢çš„è¿‡ç¨‹ä¸­ï¼Œå¤„ç†å™¨çš„ç‰¹æƒçº§åˆ«ä¼šæå‡ï¼Œä»è€Œå…è®¸æ“ä½œç³»ç»Ÿæ‰§è¡Œä¸€äº›å—ä¿æŠ¤çš„æŒ‡ä»¤ã€‚<br>3ã€<strong>ç³»ç»Ÿè°ƒç”¨å¤„ç†ï¼š</strong> æ“ä½œç³»ç»Ÿçš„å†…æ ¸æ¥æ”¶åˆ°ç³»ç»Ÿè°ƒç”¨è¯·æ±‚åï¼Œä¼šæ ¹æ®è¯·æ±‚çš„ç±»å‹æ‰§è¡Œç›¸åº”çš„ç³»ç»Ÿè°ƒç”¨æœåŠ¡ä¾‹ç¨‹ã€‚è¿™äº›æœåŠ¡ä¾‹ç¨‹è´Ÿè´£å®Œæˆç”¨æˆ·ç¨‹åºè¯·æ±‚çš„æ“ä½œï¼Œå¯èƒ½æ¶‰åŠåˆ°å†…æ ¸ä¸­çš„æ•°æ®ç»“æ„å’Œç¡¬ä»¶èµ„æºã€‚<br>4ã€<strong>è¿”å›ç”¨æˆ·æ€ï¼š</strong> å®Œæˆç³»ç»Ÿè°ƒç”¨æœåŠ¡ä¾‹ç¨‹åï¼Œæ“ä½œç³»ç»Ÿå°†æ§åˆ¶æƒè¿”å›ç»™ç”¨æˆ·ç¨‹åºï¼ŒåŒæ—¶é™ä½å¤„ç†å™¨çš„ç‰¹æƒçº§åˆ«ï¼Œå°†å…¶åˆ‡æ¢å›ç”¨æˆ·æ€ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šå°†ç³»ç»Ÿè°ƒç”¨çš„ç»“æœè¿”å›ç»™ç”¨æˆ·ç¨‹åºã€‚</p>
</li>
<li><p>è§£é‡Šâ¼€ä¸‹è¿›ç¨‹åŒæ­¥å’Œäº’æ–¥ï¼Œä»¥åŠè§£å†³æ–¹æ³•</p>
<ul>
<li>è¿›ç¨‹åŒæ­¥æ˜¯æŒ‡å¤šä¸ªå¹¶å‘æ‰§â¾çš„è¿›ç¨‹ä¹‹é—´åè°ƒå’Œç®¡ç†å®ƒä»¬çš„æ‰§â¾é¡ºåºï¼Œä»¥ç¡®ä¿å®ƒä»¬æŒ‰ç…§â¼€å®šçš„é¡ºåºæˆ–æ—¶é—´é—´éš”æ‰§â¾ã€‚â½å¦‚è¯´ï¼Œä½ æƒ³è¦å’Œä½ çš„é˜Ÿå‹â¼€èµ·å®Œæˆâ¼€ä¸ªå‰¯æœ¬ï¼Œä½ ä»¬éœ€è¦ç›¸äº’é…åˆï¼Œæœ‰æ—¶å€™ç­‰å¾…å¯¹â½…çš„ä¿¡å·æˆ–è€…æ¶ˆæ¯ï¼Œæœ‰æ—¶å€™æŒ‰ç…§å¯¹â½…çš„è¦æ±‚æ‰§â¾æŸäº›åŠ¨ä½œï¼Œè¿™å°±æ˜¯è¿›ç¨‹åŒæ­¥ã€‚</li>
<li>äº’æ–¥æŒ‡çš„æ˜¯åœ¨æŸâ¼€æ—¶åˆ»åªå…è®¸â¼€ä¸ªè¿›ç¨‹è®¿é—®æŸä¸ªå…±äº«èµ„æºã€‚å½“â¼€ä¸ªè¿›ç¨‹æ­£åœ¨ä½¿â½¤å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¸èƒ½åŒæ—¶è®¿é—®è¯¥èµ„æºã€‚â½å¦‚è¯´ï¼Œä½ æƒ³è¦ä½¿â½¤â¼€ä¸ªç¥­å›æ¥ç¥ˆæ„¿ï¼Œä½†æ˜¯è¿™ä¸ªç¥­å›â¼€æ¬¡åªèƒ½è¢«â¼€ä¸ªâ¼ˆä½¿â½¤ï¼Œå¦‚æœæœ‰å…¶ä»–â¼ˆä¹Ÿæƒ³è¦ä½¿â½¤ï¼Œä»–ä»¬å°±å¿…é¡»ç­‰å¾…ä½ ä½¿â½¤å®Œæ¯•åå†å»ä½¿â½¤ï¼Œè¿™å°±æ˜¯è¿›ç¨‹äº’æ–¥ã€‚</li>
<li>è§£å†³è¿›ç¨‹åŒæ­¥å’Œäº’æ–¥çš„é—®é¢˜æœ‰å¾ˆå¤šç§â½…æ³•ï¼Œå…¶ä¸­â¼€ç§å¸¸â»…çš„â½…æ³•æ˜¯ä½¿â½¤ä¿¡å·é‡å’Œ PV æ“ä½œã€‚ä¿¡å·é‡æ˜¯â¼€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œå®ƒè¡¨ç¤ºç³»ç»Ÿä¸­æŸç§èµ„æºçš„æ•°é‡æˆ–è€…çŠ¶æ€ã€‚PV æ“ä½œæ˜¯â¼€ç§å¯¹ä¿¡å·é‡è¿›â¾å¢åŠ æˆ–è€…å‡å°‘çš„æ“ä½œï¼Œå®ƒä»¬å¯ä»¥â½¤æ¥æ§åˆ¶è¿›ç¨‹ä¹‹é—´çš„åŒæ­¥æˆ–è€…äº’æ–¥ã€‚</li>
<li>ä¸¾ä¸ªä¾‹â¼¦ï¼Œå‡è®¾æœ‰â¼€ä¸ªä¿¡å·é‡ s è¡¨ç¤ºâ¼€ä¸ªç¥­å›æ˜¯å¦å¯â½¤ï¼Œåˆå§‹å€¼ä¸º 1ã€‚å¦‚æœ s çš„å€¼ä¸º 1ï¼Œè¡¨ç¤ºç¥­å›ç©ºé—²ï¼›å¦‚æœ s çš„å€¼ä¸º 0ï¼Œè¡¨ç¤ºç¥­å›è¢«å â½¤ï¼›å¦‚æœ s çš„å€¼ä¸º -1ï¼Œè¡¨ç¤ºæœ‰â¼€ä¸ªâ¼ˆåœ¨ç­‰å¾…ä½¿â½¤ç¥­å›ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥â½¤ PV æ“ä½œæ¥å®ç°å¯¹ç¥­å›çš„äº’æ–¥è®¿é—®ï¼š<br>  å¦‚æœä½ æƒ³è¦ä½¿â½¤ç¥­å›ï¼Œä½ å°±æ‰§â¾ P(s) æ“ä½œï¼Œå°† s çš„å€¼å‡ 1ã€‚å¦‚æœç»“æœä¸º 0 æˆ–è€…æ­£æ•°ï¼Œè¡¨ç¤ºä½ å¯ä»¥ä½¿â½¤ç¥­å›ï¼›å¦‚æœç»“æœä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºæœ‰â¼ˆåœ¨ä½¿â½¤ç¥­å›ï¼Œä½ å°±å¿…é¡»ç­‰å¾…ã€‚<br>  å¦‚æœä½ ä½¿â½¤å®Œäº†ç¥­å›ï¼Œä½ å°±æ‰§â¾ V(s) æ“ä½œï¼Œå°† s çš„å€¼åŠ  1ã€‚å¦‚æœç»“æœä¸ºæ­£æ•°æˆ–è€… 0 ï¼Œè¡¨ç¤ºæ²¡æœ‰â¼ˆåœ¨ç­‰å¾…ä½¿â½¤ç¥­å›ï¼›ç»“æœä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºæœ‰â¼ˆåœ¨ç­‰å¾…ä½¿â½¤ç¥­å›ï¼Œä½ å°±éœ€è¦å”¤é†’ä»–ä»¬ä¸­çš„â¼€ä¸ªã€‚<br>  è¿™æ ·å°±å¯ä»¥ä¿è¯æ¯æ¬¡åªæœ‰â¼€ä¸ªâ¼ˆèƒ½å¤Ÿä½¿â½¤ç¥­å›ï¼Œå®ç°äº†è¿›ç¨‹äº’æ–¥ã€‚</li>
<li>é™¤æ­¤ä¹‹å¤–ï¼Œä¸‹â¾¯çš„â½…æ³•ä¹Ÿå¯ä»¥è§£å†³è¿›ç¨‹åŒæ­¥å’Œäº’æ–¥é—®é¢˜ï¼š<br>  ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰ï¼š å°†å¯èƒ½å¼•å‘äº’æ–¥é—®é¢˜çš„ä»£ç æ®µç§°ä¸ºä¸´ç•ŒåŒºã€‚ä¸ºäº†å®ç°äº’æ–¥ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨è¿›â¼Šä¸´ç•ŒåŒºå‰å¿…é¡»è·å–â¼€ä¸ªé”ï¼Œé€€å‡ºä¸´ç•ŒåŒºåé‡Šæ”¾è¯¥é”ã€‚è¿™ç¡®ä¿åŒâ¼€æ—¶é—´åªæœ‰â¼€ä¸ªè¿›ç¨‹å¯ä»¥è¿›â¼Šä¸´ç•ŒåŒºã€‚<br>  äº’æ–¥é”ï¼ˆMutexï¼‰ï¼š äº’æ–¥é”æ˜¯â¼€ç§åŒæ­¥æœºåˆ¶ï¼Œâ½¤äºå®ç°äº’æ–¥ã€‚æ¯ä¸ªå…±äº«èµ„æºéƒ½å…³è”â¼€ä¸ªäº’æ–¥é”ï¼Œè¿›ç¨‹åœ¨è®¿é—®è¯¥èµ„æºå‰éœ€è¦å…ˆè·å–äº’æ–¥é”ï¼Œä½¿â½¤å®Œåé‡Šæ”¾é”ã€‚åªæœ‰è·å¾—é”çš„è¿›ç¨‹æ‰èƒ½è®¿é—®å…±äº«èµ„æºã€‚<br>  æ¡ä»¶å˜é‡ï¼ˆCondition Variableï¼‰ï¼š æ¡ä»¶å˜é‡â½¤äºåœ¨è¿›ç¨‹ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œä»¥ä¾¿å®ƒä»¬åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ç­‰å¾…æˆ–å”¤é†’ã€‚é€šå¸¸ä¸äº’æ–¥é”â¼€èµ·ä½¿â½¤ï¼Œä»¥ç¡®ä¿ç­‰å¾…å’Œå”¤é†’çš„æ“ä½œåœ¨æ­£ç¡®çš„æ—¶æœºæ‰§â¾</li>
</ul>
</li>
<li><p>ä»€ä¹ˆæ˜¯ä¸­æ®µå’Œå¼‚å¸¸ï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<ul>
<li>ä¸­æ–­å’Œå¼‚å¸¸æ˜¯ä¸¤ç§ä¸åŒçš„äº‹ä»¶ï¼Œå®ƒä»¬éƒ½ä¼šå¯¼è‡´CPUæš‚åœå½“å‰çš„ç¨‹åºæ‰§â¾ï¼Œè½¬â½½å»æ‰§â¾â¼€ä¸ªç‰¹å®šçš„å¤„ç†ç¨‹åºã€‚</li>
<li>ä¸­æ–­å’Œå¼‚å¸¸çš„åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹â¼ç‚¹ï¼š<br>  ä¸­æ–­æ˜¯ç”±å¤–éƒ¨è®¾å¤‡æˆ–å…¶ä»–å¤„ç†å™¨äº§â½£çš„ï¼Œå®ƒä»¬é€šå¸¸æ˜¯å¼‚æ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å‘â½£ï¼Œä¸å½“å‰æ‰§â¾çš„æŒ‡ä»¤â½†å…³ã€‚ä¾‹å¦‚ï¼Œé”®ç›˜è¾“â¼Šã€â¿æ ‡ç§»åŠ¨ã€â½¹ç»œæ•°æ®åˆ°è¾¾ç­‰éƒ½ä¼šäº§â½£ä¸­æ–­ä¿¡å·ï¼Œé€šçŸ¥CPUå»å¤„ç†è¿™äº›äº‹ä»¶ã€‚<br>  å¼‚å¸¸æ˜¯ç”±CPUå†…éƒ¨äº§â½£çš„ï¼Œå®ƒä»¬é€šå¸¸æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬åªä¼šåœ¨æ‰§â¾æŸäº›æŒ‡ä»¤æ—¶å‘â½£ï¼Œä¸ å½“å‰æ‰§â¾çš„æŒ‡ä»¤æœ‰å…³ã€‚ä¾‹å¦‚ï¼Œé™¤æ³•è¿ç®—æ—¶é™¤æ•°ä¸ºé›¶ã€è®¿é—®â¾®æ³•å†…å­˜åœ°å€ã€æ‰§â¾â¾®æ³•æŒ‡ä»¤ç­‰éƒ½ä¼šäº§â½£å¼‚å¸¸ä¿¡å·ï¼Œé€šçŸ¥CPUå»å¤„ç†è¿™äº›é”™è¯¯æˆ–æ•…éšœã€‚<br>  ä¸­æ–­å¯ä»¥è¢«å±è”½æˆ–ç¦â½Œï¼Œè¿™æ„å‘³ç€CPUå¯ä»¥é€šè¿‡è®¾ç½®æŸäº›æ ‡å¿—ä½æˆ–å¯„å­˜å™¨æ¥å¿½ç•¥æˆ–å»¶è¿Ÿå“åº”æŸäº›ä¸­æ–­ä¿¡å·ã€‚è¿™æ ·å¯ä»¥é¿å…ä¸­æ–­è¿‡äºé¢‘ç¹æˆ–â¼²æ‰°é‡è¦çš„ä»»åŠ¡ã€‚<br>  å¼‚å¸¸ä¸èƒ½è¢«å±è”½æˆ–ç¦â½Œï¼Œè¿™æ„å‘³ç€CPUå¿…é¡»â½´å³å“åº”å¼‚å¸¸ä¿¡å·ï¼Œå¹¶è¿›â¾ç›¸åº”çš„å¤„ç†ã€‚è¿™æ ·å¯ä»¥ä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§å’Œç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li>
</ul>
</li>
<li><p>ä»‹ç»â¼€ä¸‹â¼ç§å…¸å‹çš„é”</p>
<ul>
<li>ä¸¤ä¸ªåŸºç¡€çš„é”ï¼š<br>  äº’æ–¥é”ï¼šäº’æ–¥é”æ˜¯â¼€ç§æœ€å¸¸â»…çš„é”ç±»å‹ï¼Œâ½¤äºå®ç°äº’æ–¥è®¿é—®å…±äº«èµ„æºã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰â¼€ä¸ªçº¿ç¨‹å¯ä»¥æŒæœ‰äº’æ–¥é”ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ç›´åˆ°é”è¢«é‡Šæ”¾ã€‚è¿™ç¡®ä¿äº†åŒâ¼€æ—¶é—´åªæœ‰â¼€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®è¢«ä¿æŠ¤çš„èµ„æºã€‚<br>  â¾ƒæ—‹é”ï¼šâ¾ƒæ—‹é”æ˜¯â¼€ç§åŸºäºå¿™ç­‰å¾…çš„é”ï¼Œå³çº¿ç¨‹åœ¨å°è¯•è·å–é”æ—¶ä¼šä¸æ–­è½®è¯¢ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ã€‚</li>
<li>å…¶ä»–çš„é”éƒ½æ˜¯åŸºäºè¿™ä¸¤ä¸ªé”çš„<br>  è¯»å†™é”ï¼šå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å…±äº«èµ„æºï¼Œåªå…è®¸â¼€ä¸ªçº¿ç¨‹è¿›â¾å†™æ“ä½œã€‚åˆ†ä¸ºè¯»ï¼ˆå…±äº«ï¼‰å’Œå†™ï¼ˆæ’ä»–ï¼‰ä¸¤ç§çŠ¶æ€ã€‚<br>  æ‚²è§‚é”ï¼šè®¤ä¸ºå¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹å…±äº«èµ„æºçš„æ¦‚ç‡â½è¾ƒâ¾¼ï¼Œæ‰€ä»¥è®¿é—®å…±äº«èµ„æºæ—¶å€™è¦ä¸Šé”<br>  ä¹è§‚é”ï¼šå…ˆä¸ç®¡ï¼Œä¿®æ”¹äº†å…±äº«èµ„æºå†è¯´ï¼Œå¦‚æœå‡ºç°åŒæ—¶ä¿®æ”¹çš„æƒ…å†µï¼Œå†æ”¾å¼ƒæœ¬æ¬¡æ“ä½œã€‚</li>
</ul>
</li>
<li><p>ä½ çŸ¥é“çš„çº¿ç¨‹åŒæ­¥çš„â½…å¼æœ‰å“ªäº›ï¼Ÿ<br>  çº¿ç¨‹åŒæ­¥æœºåˆ¶æ˜¯æŒ‡åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†ä¿è¯çº¿ç¨‹ä¹‹é—´çš„äº’ä¸â¼²æ‰°ï¼Œâ½½é‡‡â½¤çš„â¼€ç§æœºåˆ¶ã€‚å¸¸â»…çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶æœ‰ä»¥ä¸‹â¼ç§ï¼š</p>
<ol>
<li>äº’æ–¥é”ï¼šäº’æ–¥é”æ˜¯æœ€å¸¸â»…çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶ã€‚å®ƒå…è®¸åªæœ‰â¼€ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®è¢«ä¿æŠ¤çš„ä¸´ç•ŒåŒºï¼ˆå…±äº«èµ„æºï¼‰</li>
<li>æ¡ä»¶å˜é‡ï¼šæ¡ä»¶å˜é‡â½¤äºçº¿ç¨‹é—´é€šä¿¡ï¼Œå…è®¸â¼€ä¸ªçº¿ç¨‹ç­‰å¾…æŸä¸ªæ¡ä»¶æ»¡â¾œï¼Œâ½½å…¶ä»–çº¿ç¨‹å¯ä»¥å‘å‡ºä¿¡å·é€šçŸ¥ç­‰å¾…çº¿ç¨‹ã€‚é€šå¸¸ä¸äº’æ–¥é”â¼€èµ·ä½¿â½¤ã€‚</li>
<li>è¯»å†™é”ï¼š è¯»å†™é”å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å–å…±äº«èµ„æºï¼Œä½†åªå…è®¸â¼€ä¸ªçº¿ç¨‹å†™â¼Šèµ„æºã€‚</li>
<li>ä¿¡å·é‡ï¼šâ½¤äºæ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›â¾è®¿é—®çš„â¼¯å…·</li>
</ol>
</li>
<li><p>ä»€ä¹ˆæ˜¯å†…å­˜åˆ†æ®µå’Œåˆ†â»šï¼Ÿä½œâ½¤æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>å†…å­˜åˆ†æ®µæ˜¯å°†â¼€ä¸ªç¨‹åºçš„å†…å­˜ç©ºé—´åˆ†ä¸ºä¸åŒçš„é€»è¾‘æ®µ segments ï¼Œæ¯ä¸ªæ®µä»£è¡¨ç¨‹åºçš„â¼€ä¸ªåŠŸèƒ½æ¨¡å—æˆ–æ•°æ®ç±»å‹ï¼Œå¦‚ä»£ç æ®µã€æ•°æ®æ®µã€å †æ ˆæ®µç­‰ã€‚æ¯ä¸ªæ®µéƒ½æœ‰å…¶â¾ƒâ¼°çš„â¼¤â¼©å’Œæƒé™ã€‚</li>
<li>å†…å­˜åˆ†â»šæ˜¯æŠŠæ•´ä¸ªè™šæ‹Ÿå’Œç‰©ç†å†…å­˜ç©ºé—´åˆ†æˆå›ºå®šâ¼¤â¼©çš„â»š(å¦‚4KB)ã€‚è¿™æ ·â¼€ä¸ªè¿ç»­å¹¶ä¸”å°ºâ¼¨å›ºå®šçš„å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å«â»š Page</li>
<li>ä½œâ½¤ï¼š<ol>
<li>é€»è¾‘éš”ç¦»ï¼š å†…å­˜åˆ†æ®µå’Œåˆ†â»šéƒ½å®ç°äº†ç¨‹åºçš„é€»è¾‘éš”ç¦»ï¼Œä½¿ä¸åŒçš„åŠŸèƒ½æ¨¡å—æˆ–æ•°æ®ç±»å‹èƒ½å¤Ÿè¢«å•ç‹¬ç®¡ç†å’Œä¿æŠ¤ï¼Œæâ¾¼äº†ç¨‹åºçš„å¯é æ€§å’Œå®‰å…¨æ€§ã€‚</li>
<li>å†…å­˜ä¿æŠ¤ï¼š é€šè¿‡å°†ä¸åŒçš„æ®µæˆ–â»šâ¾¯è®¾ç½®ä¸ºåªè¯»ã€å¯è¯»å†™ã€ä¸å¯æ‰§â¾ç­‰æƒé™ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥ç¡®ä¿ç¨‹åºä¸ä¼šè¶Šç•Œè®¿é—®æˆ–ä¿®æ”¹å…¶ä»–æ®µçš„å†…å®¹ï¼Œä»â½½æâ¾¼äº†ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li>
<li>è™šæ‹Ÿå†…å­˜ï¼š åˆ†æ®µå’Œåˆ†â»šéƒ½æœ‰åŠ©äºå®ç°è™šæ‹Ÿå†…å­˜çš„æ¦‚å¿µï¼Œå…è®¸åº”â½¤ç¨‹åºè®¤ä¸ºå®ƒä»¬åœ¨ä½¿â½¤çš„æ˜¯â¼€ä¸ªâ½å®é™…ç‰©ç†å†…å­˜æ›´â¼¤çš„å†…å­˜ç©ºé—´ã€‚</li>
<li>å†…å­˜å…±äº«ï¼š é€šè¿‡åˆ†â»šï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å®ç°å†…å­˜â»šâ¾¯çš„å…±äº«ï¼Œä»â½½èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥å…±äº«ç›¸åŒçš„ä»£ç æˆ–æ•°æ®â»šâ¾¯ã€‚</li>
<li>å†…å­˜ç®¡ç†ï¼š åˆ†â»šæ›´åŠ çµæ´»ï¼Œå…è®¸æ“ä½œç³»ç»Ÿå°†ä¸åŒè¿›ç¨‹çš„â»šâ¾¯åˆ†æ•£å­˜æ”¾åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œä»â½½æâ¾¼å†…å­˜åˆ©â½¤ç‡ã€‚åˆ†æ®µåˆ™æ›´é€‚â½¤äºç®¡ç†ä¸åŒçš„é€»è¾‘æ¨¡å—ã€‚</li>
</ol>
</li>
<li>åˆ†æ®µä¸åˆ†â»šçš„åŒºåˆ«<br>  åˆ†â»šå¯¹â½¤æˆ·ä¸å¯â»…ï¼Œåˆ†æ®µå¯¹â½¤æˆ·å¯â»…<br>  åˆ†â»šçš„åœ°å€ç©ºé—´æ˜¯â¼€ç»´çš„ï¼Œåˆ†æ®µçš„åœ°å€ç©ºé—´æ˜¯â¼†ç»´çš„<br>  åˆ†â»šï¼ˆå•çº§â»šè¡¨ï¼‰ã€åˆ†æ®µè®¿é—®â¼€ä¸ªé€»è¾‘åœ°å€éƒ½éœ€è¦ä¸¤æ¬¡è®¿å­˜ï¼Œåˆ†æ®µå­˜å‚¨ä¸­å¯ä»¥å¼•â¼Šå¿«è¡¨æœºåˆ¶<br>  åˆ†æ®µæ›´å®¹æ˜“å®ç°ä¿¡æ¯çš„å…±äº«å’Œä¿æŠ¤ï¼ˆçº¯ä»£ç æˆ–å¯é‡â¼Šä»£ç å¯ä»¥å…±äº«ï¼‰</li>
<li>åˆ†æ®µä¸åˆ†â»šä¼˜ç¼ºç‚¹ï¼š<br>  åˆ†â»šç®¡ç†ï¼š å†…å­˜ç©ºé—´åˆ©â½¤ç‡â¾¼ï¼Œä¸ä¼šäº§â½£å¤–éƒ¨ç¢â½šï¼Œåªä¼šæœ‰å°‘é‡çš„â»šå†…ç¢â½šã€‚ä½†æ˜¯ä¸â½…ä¾¿æŒ‰ç…§é€»è¾‘æ¨¡å—å®ç°ä¿¡æ¯çš„å…±äº«å’Œä¿æŠ¤ ã€‚<br>  åˆ†æ®µç®¡ç†ï¼š å¾ˆâ½…ä¾¿æŒ‰ç…§é€»è¾‘æ¨¡å—å®ç°ä¿¡æ¯çš„å…±äº«å’Œä¿æŠ¤ã€‚ä½†æ˜¯å¦‚æœæ®µâ»“è¿‡â¼¤ï¼Œä¸ºå…¶åˆ†é…å¾ˆâ¼¤çš„è¿ç»­ç©ºé—´ä¼šå¾ˆä¸â½…ä¾¿ï¼Œæ®µå¼ç®¡ç†ä¼šäº§â½£å¤–éƒ¨ç¢â½š</li>
</ul>
</li>
<li><p>è§£é‡Šâ¼€ä¸‹â»šâ¾¯ç½®æ¢ç®—æ³•ï¼Œä¾‹å¦‚LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿â½¤ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ç­‰</p>
<ul>
<li>å‡è®¾ä½ çš„â¼¿æœºå†…å­˜æœ‰é™ï¼Œåªèƒ½åŒæ—¶è¿â¾å››ä¸ªåŸç¥çš„â»†â¾Šã€‚å½“ä½ æƒ³åˆ‡æ¢åˆ°â¼€ä¸ªæ–°çš„â»†â¾Šæ—¶ï¼Œä½ éœ€è¦ä»å†…å­˜ä¸­æ¢å‡ºâ¼€ä¸ªæ—§çš„â»†â¾Šï¼Œä»¥ä¾¿ä¸ºæ–°çš„â»†â¾Šè…¾å‡ºç©ºé—´ã€‚ä¸åŒçš„â»šâ¾¯ç½®æ¢ç®—æ³•å°±ç›¸å½“äºä¸åŒçš„åˆ‡æ¢ç­–ç•¥ï¼Œä¾‹å¦‚ï¼š<br>  LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿â½¤ï¼‰ç®—æ³•ï¼šæ¯æ¬¡é€‰æ‹©æœ€â»“æ—¶é—´æ²¡æœ‰è¢«ä½¿â½¤çš„â»†â¾Šè¿›â¾åˆ‡æ¢ã€‚è¿™ç§ç­–ç•¥åŸºäºä½ å¯¹â»†â¾Šçš„å–œå¥½ï¼Œè®¤ä¸ºæœ€è¿‘è¢«ä½¿â½¤è¿‡çš„â»†â¾Šå¾ˆå¯èƒ½è¿˜ä¼šè¢«ä½¿â½¤ï¼Œâ½½æœ€ä¹…æœªè¢«ä½¿â½¤çš„â»†â¾Šå¾ˆå¯èƒ½ä¸ä¼šå† è¢«ä½¿â½¤ã€‚ LRUç®—æ³•å¯ä»¥æœ‰æ•ˆåœ°å‡å°‘åˆ‡æ¢æ¬¡æ•°ï¼Œä½†æ˜¯å®ç°èµ·æ¥â½è¾ƒå¤æ‚ï¼Œéœ€è¦è®°å½•æ¯ä¸ªâ»†â¾Šçš„ä½¿â½¤æ—¶é—´æˆ–è€…ç»´æŠ¤â¼€ä¸ªä½¿â½¤é¡ºåºçš„åˆ—è¡¨ã€‚<br>  FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ç®—æ³•ï¼šæ¯æ¬¡é€‰æ‹©æœ€æ—©è¿›â¼Šå†…å­˜çš„â»†â¾Šè¿›â¾åˆ‡æ¢ã€‚è¿™ç§ç­–ç•¥å¾ˆç®€å•ï¼Œåªéœ€è¦ç»´æŠ¤â¼€ä¸ªâ»†â¾Šé˜Ÿåˆ—ï¼Œæ¯æ¬¡æ·˜æ±°é˜Ÿâ¾¸çš„â»†â¾Šï¼Œç„¶åæŠŠæ–°çš„â»†â¾ŠåŠ â¼Šé˜Ÿå°¾ã€‚ä½†æ˜¯FIFOç®—æ³•å¯èƒ½ä¼šæ·˜æ±°â¼€äº›ç»å¸¸è¢«ä½¿â½¤çš„â»†â¾Šï¼Œå¯¼è‡´åˆ‡æ¢æ¬¡æ•°å¢åŠ ã€‚â½½ä¸”FIFOç®—æ³•æœ‰å¯èƒ½å‡ºç°â»‰æ‹‰è¿ªå¼‚å¸¸ï¼ˆBelady anomalyï¼‰ï¼Œå³å½“åˆ†é…ç»™å†…å­˜çš„ç©ºé—´å¢åŠ æ—¶ï¼Œåˆ‡æ¢æ¬¡æ•°åâ½½å¢åŠ </li>
<li>å¸¸â»…â»šâ¾¯ç½®æ¢ç®—æ³•æœ‰æœ€ä½³ç½®æ¢ç®—æ³•ï¼ˆOPTï¼‰ã€å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ã€æœ€è¿‘æœ€ä¹…æœªä½¿â½¤ç®—æ³•ï¼ˆLRUï¼‰ã€æ—¶é’Ÿç®—æ³•ï¼ˆClockï¼‰<ol>
<li>æœ€ä½³ç½®æ¢ç®—æ³•: è¯¥ç®—æ³•æ ¹æ®æœªæ¥çš„â»šâ¾¯è®¿é—®æƒ…å†µï¼Œé€‰æ‹©æœ€â»“æ—¶é—´å†…ä¸ä¼šè¢«è®¿é—®åˆ°çš„â»šâ¾¯è¿›â¾ç½®æ¢ã€‚é‚£ä¹ˆå°±æœ‰â¼€ä¸ªé—®é¢˜äº†ï¼Œæœªæ¥è¦è®¿é—®ä»€ä¹ˆâ»šâ¾¯ï¼Œæ“ä½œç³»ç»Ÿæ€ä¹ˆçŸ¥é“çš„å‘¢?æ“ä½œç³»ç»Ÿå½“ç„¶ä¸ä¼šçŸ¥é“ï¼Œæ‰€ä»¥è¿™ç§ç®—æ³•åªæ˜¯â¼€ç§ç†æƒ³æƒ…å†µä¸‹çš„ç½®æ¢ç®—æ³•ï¼Œé€šå¸¸æ˜¯â½†æ³•å®ç°çš„ã€‚</li>
<li>å…ˆè¿›å…ˆå‡ºç®—æ³•ï¼šä¹Ÿå°±æ˜¯æœ€å…ˆè¿›â¼Šå†…å­˜çš„â»šâ¾¯æœ€å…ˆè¢«ç½®æ¢å‡ºå»ã€‚è¿™ä¸ªç®—æ³•â½è¾ƒç®€å•æ˜äº†ï¼Œå°±ä¸è¿‡å¤š        è§£é‡Šäº†ã€‚ä½†æ˜¯å…ˆè¿›å…ˆå‡ºç®—æ³•ä¼šå­˜åœ¨â¼€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯Beladyé—®é¢˜ï¼Œå³éšç€åˆ†é…ç»™è¿›ç¨‹çš„ç©ºé—²â»šâ¾¯æ•°        å¢åŠ ï¼Œç¼ºâ»šçš„æƒ…æ¬¡åâ½½ä¹Ÿä¼šå¢åŠ ã€‚ è¿™å’Œæˆ‘ä»¬å¸¸è¯†æ˜¯ç›¸æ‚–çš„ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸è®¤ä¸ºå¦‚æœâ¼€ä¸ªè¿›ç¨‹ç»å¸¸        å‘â½£ç¼ºâ»šï¼Œé‚£ä¹ˆå°±åº”è¯¥åº”è¯¥ä¸ºä»–å¤šåˆ†é…â¼€ç‚¹å†…å­˜ã€‚ç„¶â½½ä½¿â½¤FIFOç®—æ³•æ—¶ï¼Œåâ½½å¯èƒ½å¯¼è‡´æ›´å¤šç¼ºâ»š        æƒ…å†µå‡ºç°ã€‚è¿™å°±æ˜¯Beladyé—®é¢˜ï¼ŒBeladyé—®é¢˜åªä¼šåœ¨ä½¿â½¤FIFOç®—æ³•æ—¶å‡ºç°ã€‚</li>
<li>æœ€è¿‘æœ€ä¹…æœªä½¿â½¤ç®—æ³•ï¼šLRUç®—æ³•åŸºäºâ»šâ¾¯çš„ä½¿â½¤å†å²ï¼Œé€šè¿‡é€‰æ‹©æœ€â»“æ—¶é—´æœªè¢«ä½¿â½¤çš„â»šâ¾¯è¿›â¾ç½®        æ¢ã€‚LRUç®—æ³•çš„æ ¸â¼¼æ€æƒ³æ˜¯ï¼Œæœ€è¿‘è¢«è®¿é—®çš„â»šâ¾¯å¯èƒ½åœ¨æœªæ¥è¢«å†æ¬¡è®¿é—®ï¼Œâ½½æœ€â»“æ—¶é—´æœªè¢«è®¿é—®çš„        â»šâ¾¯å¯èƒ½æ˜¯æœ€ä¸å¸¸â½¤çš„ï¼Œå› æ­¤å°†å…¶ç½®æ¢å‡ºå»å¯ä»¥è…¾å‡ºç©ºé—´ç»™æ–°çš„â»šâ¾¯ã€‚LRUç®—æ³•é€šå¸¸æ˜¯ä½¿â½¤â¼€ä¸ª        æ•°æ®ç»“æ„å»ç»´æŠ¤â»šâ¾¯çš„ä½¿â½¤å†å²ï¼Œç»´æŠ¤ä½¿â½¤å†å²å°±æ˜¯é€šè¿‡è®¿é—®å­—æ®µå®ç°çš„ã€‚è®¿é—®å­—æ®µçš„ä½æ•°å’Œæ“        ä½œç³»ç»Ÿåˆ†é…ç»™è¯¥è¿›ç¨‹çš„â»šâ¾¯æ•°æœ‰å…³ï¼Œâ½å¦‚åˆ†é…4ä¸ªâ»šâ¾¯ï¼Œè®¿é—®å­—æ®µå°±æ˜¯2ä½ï¼Œ16ä¸ªâ»šâ¾¯ï¼Œè®¿é—®å­—æ®µ        å°±æ˜¯4ä½ï¼Œä¾æ¬¡ç±»æ¨ã€‚å¦‚æ­¤ï¼Œæ¯â¼€ä¸ªâ»šâ¾¯çš„è®¿é—®å­—æ®µéƒ½å¯ä»¥ä¸åŒï¼Œé€šè¿‡è®¿é—®å­—æ®µçš„ä¸åŒï¼Œæˆ‘ä»¬å°±        å¯ä»¥åˆ¤æ–­â»šâ¾¯çš„ä½¿â½¤å†å²ã€‚</li>
<li>æ—¶é’Ÿç®—æ³•ï¼šClockç®—æ³•åŸºäºâ¼€ä¸ªç¯å½¢é“¾è¡¨æˆ–è€…å¾ªç¯é˜Ÿåˆ—æ•°æ®ç»“æ„æ¥ç®¡ç†â»šâ¾¯çš„è®¿é—®æƒ…å†µï¼Œâ½¤äºé€‰        æ‹©è¢«ç½®æ¢çš„â»šâ¾¯ã€‚Clockç®—æ³•çš„æ ¸â¼¼æ€æƒ³æ˜¯é€šè¿‡ä½¿â½¤â¼€ä¸ªæŒ‡é’ˆ(ç§°ä¸ºæ—¶é’ŸæŒ‡é’ˆ)åœ¨ç¯å½¢é“¾è¡¨ä¸Šéå†ï¼Œ        æ£€æŸ¥â»šâ¾¯æ˜¯å¦è¢«è®¿é—®è¿‡ã€‚è¿™ä¸ªè®¿é—®è¿‡åŒæ ·éœ€è¦æˆ‘ä»¬ä¸Šâ¾¯è¯´åˆ°çš„è®¿é—®å­—æ®µæ¥è¡¨ç¤ºï¼Œæ­¤æ—¶è®¿é—®å­—æ®µåª        æœ‰â¼€ä½ã€‚æ¯ä¸ªâ»šâ¾¯éƒ½ä¸â¼€ä¸ªè®¿é—®ä½ç›¸å…³è”ï¼Œæ ‡è®°è¯¥â»šâ¾¯æ˜¯å¦è¢«è®¿é—®è¿‡ã€‚        å½“éœ€è¦è¿›â¾â»šâ¾¯ç½®æ¢æ—¶ï¼ŒClockç®—æ³•ä»æ—¶é’ŸæŒ‡é’ˆçš„ä½ç½®å¼€å§‹éå†ç¯å½¢é“¾è¡¨ã€‚ å¦‚æœå½“å‰â»šâ¾¯çš„è®¿é—®        ä½ä¸º0ï¼Œè¡¨ç¤ºè¯¥â»šâ¾¯æœ€ä¹…æœªè¢«è®¿é—®ï¼Œå¯ä»¥é€‰æ‹©è¿›â¾ç½®æ¢ã€‚å°†è®¿é—®ä½è®¾ç½®ä¸º1ï¼Œç»§ç»­éå†ä¸‹â¼€ä¸ªâ»š        â¾¯ã€‚ å¦‚æœå½“å‰â»šâ¾¯çš„è®¿é—®ä½ä¸º1ï¼Œè¡¨ç¤ºè¯¥â»šâ¾¯æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œå®ƒä»ç„¶å¤„äºæ´»è·ƒçŠ¶æ€ã€‚å°†è®¿é—®ä½è®¾        ç½®ä¸º0ï¼Œå¹¶ç»§ç»­éå†ä¸‹â¼€ä¸ªâ»šâ¾¯å¦‚æœéå†è¿‡ç¨‹ä¸­æ‰¾åˆ°â¼€ä¸ªè®¿é—®ä½ä¸º0çš„â»šâ¾¯ï¼Œé‚£ä¹ˆé€‰æ‹©è¯¥â»šâ¾¯è¿›â¾        ç½®æ¢ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p>CPU é£™é«˜ç³»ç»Ÿååº”æ…¢æ€ä¹ˆæ’æŸ¥ï¼Ÿ<br>CPU æ˜¯æ•´ä¸ªç”µè„‘çš„æ ¸å¿ƒè®¡ç®—èµ„æºï¼Œå¯¹äºä¸€ä¸ªåº”ç”¨è¿›ç¨‹æ¥è¯´ï¼ŒCPU çš„æœ€å°æ‰§è¡Œå•å…ƒæ˜¯çº¿ç¨‹ã€‚å¯¼è‡´ CPU é£™é«˜çš„åŸå› æœ‰å‡ ä¸ªæ–¹é¢ï¼š<br>1ã€CPU ä¸Šä¸‹æ–‡åˆ‡æ¢è¿‡å¤šï¼Œå¯¹äº CPU æ¥è¯´ï¼ŒåŒä¸€æ—¶åˆ»ä¸‹æ¯ä¸ª CPU æ ¸å¿ƒåªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹è¦æ‰§è¡Œï¼ŒCPU åªèƒ½é€šè¿‡ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ–¹å¼æ¥æ‰§è¡Œä¸åŒçš„çº¿ç¨‹ã€‚è¾ƒå¤šçš„ä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šå æ®å¤§é‡ CPU èµ„æºï¼Œä»è€Œä½¿å¾— cpu æ— æ³•å»æ‰§è¡Œç”¨æˆ·è¿›ç¨‹ä¸­çš„æŒ‡ä»¤ï¼Œå¯¼è‡´å“åº”é€Ÿåº¦ä¸‹é™ã€‚åœ¨ Java ä¸­ï¼Œæ–‡ä»¶ IOã€ç½‘ç»œ IOã€é”ç­‰å¾…ã€çº¿ç¨‹é˜»å¡ç­‰æ“ä½œéƒ½ä¼šé€ æˆçº¿ç¨‹é˜»å¡ä»è€Œè§¦å‘ä¸Šä¸‹æ–‡åˆ‡æ¢<br>2ã€CPU èµ„æºè¿‡åº¦æ¶ˆè€—ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¨‹åºä¸­åˆ›å»ºäº†å¤§é‡çš„çº¿ç¨‹ï¼Œæˆ–è€…æœ‰çº¿ç¨‹ä¸€ç›´å ç”¨CPU èµ„æºæ— æ³•è¢«é‡Šæ”¾ï¼Œæ¯”å¦‚æ­»å¾ªç¯ï¼CPU åˆ©ç”¨ç‡è¿‡é«˜ä¹‹åï¼Œå¯¼è‡´åº”ç”¨ä¸­çš„çº¿ç¨‹æ— æ³•è·å¾— CPU çš„è°ƒåº¦ï¼Œä»è€Œå½±å“ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡<br>3ã€æ—¢ç„¶æ˜¯è¿™ä¸¤ä¸ªé—®é¢˜å¯¼è‡´çš„ CPU åˆ©ç”¨ç‡è¾ƒé«˜ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ top å‘½ä»¤ï¼Œæ‰¾åˆ° CPUåˆ©ç”¨ç‡è¾ƒé«˜çš„è¿›ç¨‹ï¼Œå†é€šè¿‡ Shift+H æ‰¾åˆ°è¿›ç¨‹ä¸­ CPU æ¶ˆè€—è¿‡é«˜çš„çº¿ç¨‹ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š<br>CPU åˆ©ç”¨ç‡è¿‡é«˜çš„çº¿ç¨‹ä¸€ç›´æ˜¯åŒä¸€ä¸ªï¼Œè¯´æ˜ç¨‹åºä¸­å­˜åœ¨çº¿ç¨‹é•¿æœŸå ç”¨ CPU æ²¡æœ‰é‡Šæ”¾çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µç›´æ¥é€šè¿‡jstack è·å¾—çº¿ç¨‹çš„ Dump æ—¥å¿—ï¼Œå®šä½åˆ°çº¿ç¨‹æ—¥å¿—åå°±å¯ä»¥æ‰¾åˆ°é—®é¢˜çš„ä»£ç ã€‚<br>CPU åˆ©ç”¨ç‡è¿‡é«˜çš„çº¿ç¨‹ id ä¸æ–­å˜åŒ–ï¼Œè¯´æ˜çº¿ç¨‹åˆ›å»ºè¿‡å¤šï¼Œéœ€è¦æŒ‘é€‰å‡ ä¸ªçº¿ç¨‹idé€šè¿‡ jstack å»çº¿ç¨‹ dump æ—¥å¿—ä¸­æ’æŸ¥ã€‚<br>4ã€æœ€åæœ‰å¯èƒ½å®šä½çš„ç»“æœæ˜¯ç¨‹åºæ­£å¸¸ï¼Œåªæ˜¯åœ¨ CPU é£™é«˜çš„é‚£ä¸€åˆ»ï¼Œç”¨æˆ·è®¿é—®é‡è¾ƒå¤§ï¼Œå¯¼è‡´ç³»ç»Ÿèµ„æºä¸å¤Ÿã€‚</p>
</li>
</ul>
<hr>

<h2 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h2><ul>
<li><p>åˆ†å¸ƒå¼ã€SOAã€å¾®æœåŠ¡ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»å’ŒåŒºåˆ«?<br>1ï¼Œåˆ†å¸ƒå¼æ¶æ„æ˜¯æŒ‡å°†å•ä½“æ¶æ„ä¸­çš„å„ä¸ªéƒ¨åˆ†æ‹†åˆ†ï¼Œç„¶åéƒ¨ç½²ä¸åŒçš„æœºå™¨æˆ–è¿›ç¨‹ä¸­å»ï¼ŒSOAå’Œå¾®æœåŠ¡éƒ½æ˜¯åˆ†å¸ƒå¼æ¶æ„çš„<br>2ï¼ŒSOA æ˜¯ä¸€ç§é¢å‘æœåŠ¡çš„æ¶æ„ï¼Œç³»ç»Ÿçš„æ‰€æœ‰æœåŠ¡éƒ½æ³¨å†Œåœ¨æ€»çº¿ä¸Šï¼Œå½“è°ƒç”¨æœåŠ¡æ—¶ï¼Œä»æ€»çº¿ä¸ŠæŸ¥æ‰¾æœåŠ¡ä¿¡æ¯ï¼Œç„¶åè°ƒç”¨<br>3ï¼Œå¾®æœåŠ¡æ˜¯ä¸€ç§æ›´å½»åº•çš„é¢å‘æœåŠ¡çš„æ¶æ„ï¼Œå°†ç³»ç»Ÿä¸­å„ä¸ªåŠŸèƒ½ä¸ªä½“æŠ½æˆä¸€ä¸ªä¸ªå°çš„åº”ç”¨ç¨‹åºï¼ŒåŸºæœ¬ä¿æŒä¸€ä¸ªåº”ç”¨å¯¹åº”çš„ä¸€ä¸ªæœåŠ¡çš„æ¶æ„</p>
</li>
<li><p>å¾®æœåŠ¡æ¶æ„ï¼Ÿ<br>å¾®æœåŠ¡æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ¶æ„é£æ ¼ï¼Œç”¨äºæ„å»ºå¤æ‚åº”ç”¨ç¨‹åºã€‚å®ƒå°†å¤§å‹åº”ç”¨ç¨‹åºæ‹†åˆ†æˆä¸€ç³»åˆ—è¾ƒå°ã€ç‹¬ç«‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ä¸“æ³¨äºå®Œæˆç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ã€‚è¿™äº›æœåŠ¡ä¹‹é—´é€šè¿‡è½»é‡çº§çš„é€šä¿¡æœºåˆ¶ï¼ˆé€šå¸¸æ˜¯åŸºäº HTTP æˆ– RPCï¼‰è¿›è¡Œäº¤äº’ï¼Œå¯ä»¥ç‹¬ç«‹éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†ã€‚</p>
</li>
<li><p>å¾®æœåŠ¡çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>å•ä¸€è´£ä»»ï¼šæ¯ä¸ªå¾®æœåŠ¡ä¸“æ³¨äºæ‰§è¡Œä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„ä¸šåŠ¡åŠŸèƒ½ã€‚è¿™ä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥æ›´å®¹æ˜“åœ°ç†è§£å’Œç»´æŠ¤æœåŠ¡ã€‚</li>
<li>æ¾è€¦åˆï¼šå¾®æœåŠ¡ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œå®ƒä»¬å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ã€æŠ€æœ¯å †æ ˆå’Œæ•°æ®å­˜å‚¨ã€‚è¿™ç§æ¾è€¦åˆä½¿å¾—å¼€å‘å›¢é˜Ÿèƒ½å¤Ÿç‹¬ç«‹åœ°å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²å„ä¸ªæœåŠ¡ã€‚</li>
<li>ç‹¬ç«‹éƒ¨ç½²ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥ç‹¬ç«‹åœ°éƒ¨ç½²ï¼Œè¿™æ„å‘³ç€å½“å¯¹ä¸€ä¸ªæœåŠ¡è¿›è¡Œæ›´æ”¹æ—¶ï¼Œä¸éœ€è¦é‡æ–°éƒ¨ç½²æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚è¿™æé«˜äº†å¼€å‘å’Œå‘å¸ƒçš„é€Ÿåº¦ï¼Œå¹¶å…è®¸å¿«é€Ÿè¿­ä»£å’Œçµæ´»æ€§ã€‚</li>
<li>å¼¹æ€§æ‰©å±•ï¼šç”±äºæ¯ä¸ªå¾®æœåŠ¡æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¯¹å®ƒä»¬è¿›è¡Œç‹¬ç«‹çš„æ‰©å±•ã€‚è¿™ä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†é«˜è´Ÿè½½æƒ…å†µï¼Œå¹¶å…·æœ‰æ›´å¥½çš„å¯ä¼¸ç¼©æ€§ã€‚</li>
<li>æœ‰é™ä¸Šä¸‹æ–‡ï¼šæ¯ä¸ªå¾®æœåŠ¡ç»´æŠ¤è‡ªå·±çš„æ•°æ®å­˜å‚¨ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥ä½¿ç”¨ä¸åŒç±»å‹çš„æ•°æ®åº“æˆ–å­˜å‚¨æŠ€æœ¯ã€‚è¿™ç§éš”ç¦»æœ‰åŠ©äºå‡å°‘æ•´ä¸ªç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶æé«˜å¯é æ€§ã€‚</li>
</ul>
</li>
<li><p>å¾®æœåŠ¡æ¶æ„ä¹Ÿå­˜åœ¨ä¸€äº›æŒ‘æˆ˜å’Œç¼ºç‚¹ï¼š</p>
<ul>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿå¤æ‚æ€§ï¼šå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡æ˜¯åˆ†å¸ƒå¼çš„ï¼Œéœ€è¦å¤„ç†æœåŠ¡é—´é€šä¿¡ã€æ•°æ®ä¸€è‡´æ€§ã€é”™è¯¯å¤„ç†ç­‰é—®é¢˜ã€‚è¿™å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œéœ€è¦æ›´å¤šçš„è®¾è®¡å’Œç®¡ç†å·¥ä½œã€‚</li>
<li>æœåŠ¡é—´é€šä¿¡å¼€é”€ï¼šç”±äºå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡é€šè¿‡ç½‘ç»œé€šä¿¡è¿›è¡Œäº¤äº’ï¼Œä¼šå¢åŠ ä¸€å®šçš„å»¶è¿Ÿå’Œå¼€é”€ã€‚æ­¤å¤–ï¼Œéœ€è¦å®ç°é€‚å½“çš„é€šä¿¡æœºåˆ¶å’Œåè®®æ¥ç¡®ä¿å¯é æ€§å’Œæ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li>è¿ç»´å¤æ‚æ€§ï¼šå¾®æœåŠ¡æ¶æ„ä¸­æ¶‰åŠå¤šä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½éœ€è¦ç‹¬ç«‹è¿›è¡Œç›‘æ§ã€æ—¥å¿—è®°å½•å’Œæ•…éšœæ’é™¤ã€‚è¿™å¢åŠ äº†è¿ç»´çš„å¤æ‚æ€§ï¼Œéœ€è¦é€‚å½“çš„å·¥å…·å’Œè‡ªåŠ¨åŒ–æ¥ç®¡ç†å’Œç›‘æ§æœåŠ¡ã€‚</li>
<li>æ•°æ®ä¸€è‡´æ€§ï¼šç”±äºæ¯ä¸ªå¾®æœåŠ¡ç»´æŠ¤è‡ªå·±çš„æ•°æ®å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§å˜å¾—æ›´åŠ å›°éš¾ã€‚åœ¨è·¨å¤šä¸ªæœåŠ¡çš„ä¸šåŠ¡æ“ä½œä¸­ï¼Œéœ€è¦é‡‡å–é€‚å½“çš„ç­–ç•¥å’ŒæŠ€æœ¯æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</li>
</ul>
</li>
<li><p>CAPï¼Ÿ</p>
<ul>
<li>CAP ç†è®ºæŒ‡å‡ºï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ— æ³•åŒæ—¶æ»¡è¶³ä¸‰ä¸ªæ ¸å¿ƒå±æ€§ï¼šä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰å’Œåˆ†åŒºå®¹å¿æ€§ï¼ˆPartition Toleranceï¼‰ï¼Œåªèƒ½é€‰æ‹©å…¶ä¸­çš„ä¸¤ä¸ªã€‚<ul>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¸Šï¼Œå¯¹äºæŸä¸ªæ“ä½œçš„ç»“æœåº”è¯¥æ˜¯ä¸€è‡´çš„ã€‚æ¢å¥è¯è¯´ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œäº†æ›´æ–°æ“ä½œåï¼Œå…¶ä»–èŠ‚ç‚¹åº”è¯¥èƒ½å¤Ÿè¯»å–åˆ°æ›´æ–°åçš„å€¼ã€‚è¿™æ„å‘³ç€æ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çœ‹åˆ°çš„æ•°æ®éƒ½æ˜¯ç›¸åŒçš„ã€‚</li>
<li><strong>å¯ç”¨æ€§</strong>ï¼šç³»ç»Ÿåœ¨é¢å¯¹ç”¨æˆ·è¯·æ±‚æ—¶ï¼Œåº”è¯¥ä¿è¯èƒ½å¤Ÿè¿›è¡Œå“åº”ï¼Œå³ç³»ç»Ÿä¿æŒå¯ç”¨çŠ¶æ€ã€‚å³ä½¿éƒ¨åˆ†èŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œç³»ç»Ÿä»ç„¶èƒ½å¤Ÿç»§ç»­æä¾›æœåŠ¡ã€‚</li>
<li><strong>åˆ†åŒºå®¹å¿æ€§</strong>ï¼šç³»ç»Ÿèƒ½å¤Ÿåœ¨é¢å¯¹ç½‘ç»œåˆ†åŒºæˆ–è€…èŠ‚ç‚¹ä¹‹é—´é€šä¿¡å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œä»ç„¶èƒ½å¤Ÿç»§ç»­è¿è¡Œã€‚å³ä½¿ç³»ç»Ÿä¸­çš„æŸäº›èŠ‚ç‚¹ä¹‹é—´æ— æ³•è¿›è¡Œé€šä¿¡ï¼Œæ•´ä¸ªç³»ç»Ÿä»ç„¶å¯ä»¥ç»§ç»­å·¥ä½œã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>Dubboçš„æ¶æ„è®¾è®¡æ˜¯æ€æ ·çš„?<br>Dubbo ä¸­çš„æ¶æ„è®¾è®¡æ˜¯éå¸¸ä¼˜ç§€çš„ï¼Œåˆ†ä¸ºäº†å¾ˆå¤šå±‚æ¬¡ï¼Œå¹¶ä¸”æ¯å±‚éƒ½æ˜¯å¯ä»¥æ‰©å±•çš„ï¼Œæ¯”å¦‚:<br>1.ProxyæœåŠ¡ä»£ç†å±‚ï¼Œæ”¯æŒJDKåŠ¨æ€ä»£ç†ã€javassistç­‰ä»£ç†æœºåˆ¶<br>2.Registryæ³¨å†Œä¸­å¿ƒå±‚ï¼Œæ”¯æŒZookeeperã€Redisç­‰ä½œä¸ºæ³¨å†Œä¸­å¿ƒ<br>3.Protocolè¿œç¨‹è°ƒç”¨å±‚ï¼Œæ”¯æŒDubboã€Httpç­‰è°ƒç”¨åè®®<br>4.Transportç½‘ç»œä¼ è¾“å±‚ï¼Œæ”¯æŒnettyã€minaç­‰ç½‘ç»œä¼ è¾“æ¡†æ¶<br>5ï¼ŒSerializeæ•°æ®åºåˆ—åŒ–å±‚ï¼Œæ”¯æŒJSONã€Hessianç­‰åºåˆ—åŒ–æœºåˆ¶</p>
</li>
<li><p>Dubbo ä¸ Spring Cloud çš„åŒºåˆ«ã€‚<br>Dubbo æ˜¯ SOA æ—¶ä»£çš„äº§ç‰©ï¼Œå®ƒçš„å…³æ³¨ç‚¹ä¸»è¦åœ¨äºæœåŠ¡çš„è°ƒç”¨ï¼Œæµé‡åˆ†å‘ã€æµé‡ç›‘æ§å’Œç†”æ–­ã€‚è€Œ Spring Cloud è¯ç”Ÿäºå¾®æœåŠ¡æ¶æ„æ—¶ä»£ï¼Œè€ƒè™‘çš„æ˜¯å¾®æœåŠ¡æ²»ç†çš„æ–¹æ–¹é¢é¢ï¼Œå¦å¤–ç”±äºä¾æ‰˜äº† Spirngã€Spirng Boot çš„ä¼˜åŠ¿ä¹‹ä¸Šï¼Œä¸¤ä¸ªæ¡†æ¶åœ¨å¼€å§‹ç›®æ ‡å°±ä¸ä¸€è‡´ï¼ŒDubbo å®šä½æœåŠ¡æ²»ç†ã€Spirng Cloud æ˜¯ä¸€ä¸ªç”Ÿæ€ã€‚<br>ä¸¤è€…æœ€å¤§çš„åŒºåˆ«æ˜¯ Dubbo åº•å±‚æ˜¯ä½¿ç”¨ Netty è¿™æ ·çš„ NIO æ¡†æ¶ï¼Œæ˜¯åŸºäº TCP åè®®ä¼ è¾“çš„ï¼Œé…åˆä»¥ Hession åºåˆ—åŒ–å®Œæˆ RPC é€šä¿¡ã€‚è€Œ SpringCloud æ˜¯åŸºäº Http åè®®+Rest æ¥å£è°ƒç”¨è¿œç¨‹è¿‡ç¨‹çš„é€šä¿¡ï¼Œç›¸å¯¹æ¥è¯´ï¼ŒHttp è¯·æ±‚ä¼šæœ‰æ›´å¤§çš„æŠ¥æ–‡ï¼Œå çš„å¸¦å®½ä¹Ÿä¼šæ›´å¤šã€‚ä½†æ˜¯ REST ç›¸æ¯” RPC æ›´ä¸ºçµæ´»ï¼ŒæœåŠ¡æä¾›æ–¹å’Œè°ƒç”¨æ–¹çš„ä¾èµ–åªä¾é ä¸€çº¸å¥‘çº¦ï¼Œä¸å­˜åœ¨ä»£ç çº§åˆ«çš„å¼ºä¾èµ–ã€‚</p>
</li>
<li><p>å…³äºâ€œä½ å¯¹ Spring Cloud çš„ç†è§£â€<br>Spring Cloud æ˜¯ä¸€å¥—åˆ†å¸ƒå¼å¾®æœåŠ¡çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒæä¾›äº†å¿«é€Ÿæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„å¸¸ç”¨çš„ä¸€äº›ç»„ä»¶æ¯”å¦‚è¯´é…ç½®ç®¡ç†ã€æœåŠ¡çš„æ³¨å†Œä¸å‘ç°ã€æœåŠ¡è°ƒç”¨çš„è´Ÿè½½å‡è¡¡ã€èµ„æºéš”ç¦»ã€ç†”æ–­é™çº§ç­‰ç­‰ï¼›ä¸è¿‡ Spring Cloud åªæ˜¯ Spring å®˜æ–¹æä¾›çš„ä¸€å¥—å¾®æœåŠ¡æ ‡å‡†å®šä¹‰ï¼Œè€ŒçœŸæ­£çš„å®ç°ç›®å‰æœ‰ä¸¤å¥—ä½“ç³»ç”¨çš„æ¯”è¾ƒå¤šã€‚<br>Spring Cloud Alibaba æ˜¯åŸºäºé˜¿é‡Œå·´å·´å¼€æºç»„ä»¶é›†æˆçš„ä¸€å¥—å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ï¼š1. Dubboâ€”â€”â€”â€”æ¶ˆæ¯é€šè®¯ 2. Nacosâ€”â€”â€”â€”æœåŠ¡æ³¨å†Œä¸å‘ç° 3.Seataâ€”â€”â€”â€”äº‹åŠ¡éš”ç¦» 4. Sentinelâ€”â€”â€”â€”ç†”æ–­é™çº§<br>æœ‰äº† Spring Cloud è¿™æ ·çš„æŠ€æœ¯ç”Ÿæ€ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨è½åœ°å¾®æœåŠ¡æ¶æ„æ—¶ã€‚ä¸ç”¨å»è€ƒè™‘ç¬¬ä¸‰æ–¹æŠ€æœ¯é›†æˆå¸¦æ¥é¢å¤–æˆæœ¬ï¼Œåªè¦é€šè¿‡é…ç½®ç»„ä»¶æ¥å®Œæˆæ¶æ„ä¸‹çš„æŠ€æœ¯é—®é¢˜ï¼Œä»è€Œå¯ä»¥è®©æˆ‘ä»¬æ›´åŠ ä¾§é‡æ€§èƒ½æ–¹é¢</p>
</li>
<li><p>å¼„æ‡‚ RPCã€‚<br>  å¸¸è§çš„è¿œç¨‹é€šä¿¡æ–¹å¼ï¼Œæœ‰åŸºäº REST æ¶æ„çš„ HTTP åè®®ã€ä»¥åŠ RPC æ¡†æ¶ã€‚</p>
<ol>
<li>ä»€ä¹ˆæ˜¯è¿œç¨‹è°ƒç”¨<br>  è¿œç¨‹è°ƒç”¨æ˜¯æŒ‡è·¨è¿›ç¨‹çš„åŠŸèƒ½è°ƒç”¨ï¼Œè·¨è¿›ç¨‹å¯ä»¥ç†è§£æˆä¸€ä¸ªè®¡ç®—æœºèŠ‚ç‚¹çš„å¤šä¸ªè¿›ç¨‹ï¼Œæˆ–è€…å¤šä¸ªè®¡ç®—æœºèŠ‚ç‚¹çš„å¤šä¸ªè¿›ç¨‹</li>
<li>ä»€ä¹ˆæ˜¯ RPC<br>  å…¨ç§°ä¸º Remote Procedure Callï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå®ƒæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œä»è¿œç¨‹è®¡ç®—æœºç¨‹æœºç¨‹åºä¸Šè¯·æ±‚æœåŠ¡ï¼Œè€Œä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œæŠ€æœ¯çš„åè®®ï¼Œå‡¡æ˜¯ç¬¦åˆè¯¥åè®®çš„æ¡†æ¶ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç§°å®ƒä¸º RPC æ¡†æ¶ã€‚å…³äº RPC åè®®ï¼Œé€šä¿—æ¥è®²å°±æ˜¯ï¼ŒA è®¡ç®—æœºæä¾›ä¸€ä¸ªæœåŠ¡ï¼ŒB è®¡ç®—æœºå¯ä»¥åƒè°ƒç”¨æœ¬åœ°æœåŠ¡é‚£æ ·è°ƒç”¨ A è®¡ç®—æœºçš„æœåŠ¡ã€‚è¦å®ç° RPCï¼Œéœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“æ•°æ®ï¼Œå¹¶å¯¹è°ƒç”¨çš„è¿‡ç¨‹è¿›è¡Œå°è£…ã€‚ç°åœ¨æ¯”è¾ƒæµè¡Œçš„ RPC æ¡†æ¶ï¼Œéƒ½ä¼šé‡‡ç”¨ TCP ä½œä¸ºåº•å±‚ä¼ è¾“åè®®ã€‚RPC å¼ºè°ƒçš„æ˜¯è¿‡ç¨‹è°ƒç”¨ï¼Œè°ƒç”¨çš„è¿‡ç¨‹å¯¹ç”¨æˆ·è€Œè¨€æ˜¯æ˜¯é€æ˜çš„ï¼Œç”¨æˆ·ä¸éœ€è¦å…³å¿ƒè°ƒç”¨çš„ç»†èŠ‚ï¼Œå¯ä»¥åƒè°ƒç”¨æœ¬åœ°æœåŠ¡ä¸€æ ·è°ƒç”¨è¿œç¨‹æœåŠ¡ã€‚</li>
<li>RPC çš„è¿ç”¨åœºæ™¯å’Œä¼˜åŠ¿<br>  åˆ†å¸ƒå¼æ¶æ„çš„æ ¸å¿ƒï¼Œå°±æ˜¯åˆ©ç”¨å¤šä¸ªæ™®é€šè®¡ç®—æœºèŠ‚ç‚¹ï¼Œç»„æˆä¸€ä¸ªåºå¤§è€Œå¤æ‚çš„è®¡ç®—ç½‘ç»œï¼Œæä¾›é«˜æ€§èƒ½ä»¥åŠé«˜å¹¶å‘çš„èƒ½åŠ›æ”¯æ’‘ã€‚åœ¨åˆ†å¸ƒå¼æ¶æ„ä¸­ï¼ŒåŸæœ¬çš„å•ä½“åº”ç”¨è¢«æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡åˆ†éƒ¨åœ¨è®¡ç®—æœºç½‘ç»œä¸Šï¼Œè¿™äº›æœåŠ¡å¿…ç„¶éœ€è¦é€šè¿‡ç½‘ç»œè¿›è¡Œæ•°æ®äº¤äº’ã€‚è€Œ RPC æ¡†æ¶å°±æ˜¯è§£å†³åœ¨åˆ†å¸ƒå¼æ¶æ„ä¸­çš„å„ä¸ªä¸šåŠ¡æœåŠ¡å½¼æ­¤çš„ç½‘ç»œé€šä¿¡é—®é¢˜ã€‚<br>  ä¸€èˆ¬æ¥è¯´ï¼ŒRPC æœåŠ¡ä¸»è¦æ˜¯é’ˆå¯¹å¤§å‹çš„ä¼ä¸šï¼Œä¹Ÿå°±è¯´å½“æˆ‘ä»¬ä¸šåŠ¡å¤æ‚åº¦ä»¥åŠç”¨æˆ·é‡éƒ½æ¯”è¾ƒé«˜æ—¶ï¼Œéœ€è¦è§£è€¦æœåŠ¡ï¼Œæ‰©å±•æ€§å¼ºã€éƒ¨ç½²çµæ´»ä¸€èˆ¬å¸‚é¢ä¸Šå¼€æºçš„ PRC æ¡†æ¶ï¼Œé™¤äº†æä¾›åŸºç¡€çš„è¿œç¨‹é€šä¿¡åŠŸèƒ½ä»¥å¤–ï¼Œè¿˜ä¼šåœ¨æ€§èƒ½æ¶ˆè€—ã€ä¼ è¾“æ•ˆç‡ã€æœåŠ¡æ²»ç†ç­‰æ–¹é¢åšå¾ˆå¤šçš„è®¾è®¡ï¼Œæ¯”å¦‚é˜¿é‡Œå¼€æºçš„ RPC æ¡†æ¶ Dubboã€‚</li>
</ol>
</li>
<li><p>è´Ÿè½½å‡è¡¡çš„å®ç°ç®—æ³•</p>
<ul>
<li>è´Ÿè½½å‡è¡¡æ˜¯æŒ‡å°†ç½‘ç»œæµé‡æˆ–å·¥ä½œè´Ÿè½½åˆ†é…åˆ°å¤šä¸ªæœåŠ¡å™¨æˆ–è®¡ç®—èµ„æºä¸Šï¼Œä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€å¯é æ€§å’Œå¯æ‰©å±•æ€§ã€‚åœ¨å®ç°è´Ÿè½½å‡è¡¡æ—¶ï¼Œé€šå¸¸ä¼šé‡‡ç”¨ä»¥ä¸‹ç®—æ³•ï¼š<ul>
<li>è½®è¯¢ï¼ˆRound Robinï¼‰ï¼šæŒ‰ç…§è½®è¯¢çš„æ–¹å¼ä¾æ¬¡å°†è¯·æ±‚åˆ†å‘ç»™åç«¯æœåŠ¡å™¨ã€‚æ¯ä¸ªè¯·æ±‚æŒ‰ç…§é¡ºåºä¾æ¬¡åˆ†é…ç»™ä¸åŒçš„æœåŠ¡å™¨ï¼Œå¾ªç¯å¾€å¤ã€‚è¿™ç§ç®—æ³•ç®€å•ä¸”å‡è¡¡ï¼Œé€‚ç”¨äºæœåŠ¡å™¨æ€§èƒ½ç›¸ä¼¼ä¸”æ— çŠ¶æ€çš„æƒ…å†µã€‚</li>
<li>æœ€å°‘è¿æ¥ï¼ˆLeast Connectionï¼‰ï¼šæ ¹æ®å½“å‰è¿æ¥æ•°é€‰æ‹©è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨æ¥å¤„ç†æ–°çš„è¯·æ±‚ã€‚è¿™ç§ç®—æ³•å¯ä»¥æœ‰æ•ˆåœ°å°†è´Ÿè½½å‡è¡¡åˆ°è¿æ¥æ•°è¾ƒå°‘çš„æœåŠ¡å™¨ä¸Šï¼Œä»¥ä¿æŒå„æœåŠ¡å™¨çš„è´Ÿè½½ç›¸å¯¹å‡è¡¡ã€‚</li>
<li>IPå“ˆå¸Œï¼ˆIP Hashï¼‰ï¼šæ ¹æ®å®¢æˆ·ç«¯çš„ IP åœ°å€è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œå°†åŒä¸€ä¸ª IP åœ°å€çš„è¯·æ±‚å‘é€åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½å‘é€åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œé€‚ç”¨äºéœ€è¦ä¿æŒä¼šè¯ä¸€è‡´æ€§çš„åœºæ™¯ã€‚<br>  åŠ æƒè½®è¯¢ï¼ˆWeighted Round Robinï¼‰ï¼šç»™æ¯ä¸ªæœåŠ¡å™¨åˆ†é…ä¸€ä¸ªæƒé‡å€¼ï¼Œæ ¹æ®æƒé‡å€¼çš„æ¯”ä¾‹æ¥åˆ†é…è¯·æ±‚ã€‚å…·æœ‰è¾ƒé«˜æƒé‡çš„æœåŠ¡å™¨ä¼šæ¥æ”¶åˆ°æ›´å¤šçš„è¯·æ±‚ï¼Œé€‚ç”¨äºæœåŠ¡å™¨æ€§èƒ½ä¸å‡è¡¡çš„æƒ…å†µã€‚</li>
<li>åŠ æƒæœ€å°‘è¿æ¥ï¼ˆWeighted Least Connectionï¼‰ï¼šæ ¹æ®æœåŠ¡å™¨çš„å½“å‰è¿æ¥æ•°å’Œæƒé‡å€¼æ¥é€‰æ‹©æœåŠ¡å™¨ã€‚è¿æ¥æ•°è¶Šå°‘ä¸”æƒé‡å€¼è¶Šé«˜çš„æœåŠ¡å™¨ä¼šè¢«ä¼˜å…ˆé€‰æ‹©ã€‚</li>
<li>éšæœºï¼ˆRandomï¼‰ï¼šéšæœºé€‰æ‹©ä¸€ä¸ªåç«¯æœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚ã€‚è¿™ç§ç®—æ³•ç®€å•ä¸”å‡è¡¡ï¼Œä½†æ— æ³•ä¿è¯æ¯ä¸ªæœåŠ¡å™¨çš„è´Ÿè½½ä¸€è‡´ã€‚</li>
<li>å“åº”æ—¶é—´åŠ æƒï¼ˆResponse Time Weightedï¼‰ï¼šæ ¹æ®æœåŠ¡å™¨çš„å¹³å‡å“åº”æ—¶é—´æˆ–å¤„ç†æ—¶é—´æ¥åˆ†é…è¯·æ±‚ã€‚å“åº”æ—¶é—´è¾ƒçŸ­çš„æœåŠ¡å™¨ä¼šå¾—åˆ°æ›´å¤šçš„è¯·æ±‚ï¼Œä»¥æé«˜ç³»ç»Ÿæ•´ä½“çš„å“åº”é€Ÿåº¦ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>åˆ†å¸ƒå¼äº‹åŠ¡çš„åŸç†<br>åˆ†å¸ƒå¼äº‹åŠ¡æ˜¯æŒ‡äº‹åŠ¡çš„å‚ä¸è€…ã€æ”¯æŒäº‹åŠ¡çš„æœåŠ¡å™¨ã€èµ„æºæœåŠ¡å™¨ä»¥åŠäº‹åŠ¡ç®¡ç†å™¨åˆ†åˆ«ä½äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸åŒèŠ‚ç‚¹ä¹‹ä¸Šã€‚æ¯”å¦‚å¤§å‹çš„ç”µå•†ç³»ç»Ÿä¸­çš„ä¸‹å•åœºæ™¯ï¼Œä¼šæ¶‰åŠåˆ°æ‰£åº“å­˜ã€ä¼˜æƒ ä¿ƒé”€è®¡ç®—ã€è®¢å• ID ç”Ÿæˆã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåº“å­˜ã€ä¿ƒé”€ã€ä¸»é”®ç”Ÿæˆç­–ç•¥éƒ½ä½äºä¸åŒçš„æœåŠ¡å™¨å’Œæ•°æ®åº“è¡¨ä¸­ã€‚ä¸‹å•æ¥å£çš„æˆåŠŸä¸å¦ï¼Œä¸ä»…å–å†³äºæœ¬åœ°èŠ‚ç‚¹çš„æ•°æ®åº“æ“ä½œï¼Œè€Œä¸”è¿˜ä¾èµ–ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„ç»“æœï¼Œè¿™æ—¶å€™åˆ†å€™åˆ†å¸ƒå¼äº‹åŠ¡å°±ä¿è¯è¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚<br>å› æ­¤ï¼Œæœ¬è´¨ä¸Šæ¥è¯´ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯ä¸ºäº†ä¿è¯ä¸åŒæ•°æ®åº“çš„æ•°æ®ä¸€è‡´æ€§ã€‚åŸºäº CAP å®šç†å¯ä»¥çŸ¥é“ï¼Œå¯¹äºä¸Šè¿°æƒ…å†µäº§ç”Ÿçš„åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œæˆ‘ä»¬è¦ä¹ˆé‡‡ç”¨å¼ºä¸€è‡´æ€§æ–¹æ¡ˆã€è¦ä¹ˆé‡‡ç”¨å¼±ä¸€è‡´æ€§æ–¹æ¡ˆã€‚<br>ï¼Ÿï¼Ÿ</p>
</li>
<li><p>å®ç°åˆ†å¸ƒå¼é”çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œä½ è®¤ä¸º Zookeeperå’Œ Redis å“ªç§æ›´å¥½ï¼Ÿ<br>ä¸¤ç§æ–¹æ¡ˆéƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼š<br>å¯¹äº redis çš„åˆ†å¸ƒå¼é”è€Œè¨€ï¼Œå®ƒæœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š å®ƒè·å–é”çš„æ–¹å¼ç®€å•ç²—æš´ï¼Œå¦‚æœè·å–ä¸åˆ°é”ï¼Œä¼šä¸æ–­å°è¯•è·å–é”ï¼Œæ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ã€‚ Redis æ˜¯ AP æ¨¡å‹ï¼Œåœ¨é›†ç¾¤æ¨¡å¼ä¸­ç”±äºæ•°æ®çš„ä¸€è‡´æ€§ä¼šå¯¼è‡´é”å‡ºç°é—®é¢˜ï¼Œå³ä¾¿ä½¿ç”¨Redlock ç®—æ³•æ¥å®ç°ï¼Œåœ¨æŸäº›å¤æ‚åœºæ™¯ä¸‹ï¼Œä¹Ÿæ— æ³•ä¿è¯å…¶å®ç° 100%çš„å¯é æ€§ã€‚ä¸è¿‡åœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨ Redis å®ç°åˆ†å¸ƒå¼é”è¿˜æ˜¯æ¯”è¾ƒå¸¸è§ï¼Œè€Œä¸”å¤§éƒ¨åˆ†åœºæƒ…å†µä¸‹ä¸ä¼šé‡åˆ°â€æç«¯å¤æ‚çš„åœºæ™¯â€œï¼Œæ›´é‡è¦çš„æ˜¯ Redis æ€§èƒ½å¾ˆé«˜ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸­æ¯”è¾ƒåˆé€‚ã€‚<br>å¯¹äº zk åˆ†å¸ƒå¼é”è€Œè¨€:  zookeeper å¤©ç”Ÿè®¾è®¡å®šä½å°±æ˜¯åˆ†å¸ƒå¼åè°ƒï¼Œå¼ºä¸€è‡´æ€§ã€‚é”çš„æ¨¡å‹å¥å£®ã€ç®€å•æ˜“ç”¨ã€é€‚åˆåšåˆ†å¸ƒå¼é”ã€‚ å¦‚æœè·å–ä¸åˆ°é”ï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨å°±å¯ä»¥äº†ï¼Œä¸ç”¨ä¸€ç›´è½®è¯¢ï¼Œæ€§èƒ½æ¶ˆè€—è¾ƒå°ã€‚å¦‚æœè¦åœ¨ä¸¤è€…ä¹‹é—´åšé€‰æ‹©ï¼Œå°±æˆ‘ä¸ªäººè€Œè¨€çš„è¯ï¼Œæ¯”è¾ƒæ¨å´‡ ZK å®ç°çš„é”ï¼Œå› ä¸ºå¯¹äºåˆ†å¸ƒå¼é”è€Œè¨€ï¼Œå®ƒåº”è¯¥ç¬¦åˆ CP æ¨¡å‹ï¼Œä½†æ˜¯ Redis æ˜¯ AP æ¨¡å‹ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªç‚¹ä¸Šï¼ŒZookeeperä¼šæ›´åŠ åˆé€‚ã€‚</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯Dockerï¼Ÿæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ<br>ï¼Ÿ</p>
</li>
<li><p>Docker æ ¸å¿ƒç»„ä»¶ã€‚</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯ Kubernetesï¼Ÿ<br>è¿‘äº›å¹´ï¼Œéšç€ Docker ä¸å¾®æœåŠ¡çš„æ™®åŠï¼ŒK8s ä¹Ÿä¹˜ç€è¿™ä¸¤è‚¡ä¸œé£ï¼Œè¿…é€Ÿè¹¿çº¢èµ·æ¥ã€‚ä½œä¸ºæœ€ç«çš„å®¹å™¨ç¼–æ’å·¥å…·ä¹‹ä¸€ï¼Œå®ƒçš„å¾ˆå¤šæ€æƒ³è®¾è®¡éƒ½å¥‘åˆäº†å¾®æœåŠ¡å’Œäº‘åŸç”Ÿåº”ç”¨çš„è®¾è®¡æ³•åˆ™ã€‚ä¹Ÿæ­£å› å¦‚æ­¤ï¼Œè¶Šæ¥è¶Šå¤šçš„å…¬å¸å¼€å§‹ä½¿ç”¨èµ· k8sã€‚K8s å…¨ç§° Kubernetesï¼Œ8 æ˜¯ä¸­é—´ 8 ä¸ªå­—æ¯çš„ç®€ç§°ã€‚ä½œä¸ºä¸€ç§å®¹å™¨è‡ªåŠ¨éƒ¨ç½²ã€æ‰©å®¹ä»¥åŠç®¡ç†çš„æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£å…¶æ˜¯ä¸€ç§å®¹å™¨ç¼–æ’æŠ€æœ¯ã€‚å‰èº«æ˜¯ Borg ç³»ç»Ÿï¼Œåœ¨è°·æ­Œå†…éƒ¨å·²ç»æœ‰äº†åå¤šå¹´çš„ä½¿ç”¨ç»éªŒã€‚<br>ï¼Œã€ã€</p>
</li>
<li><p>è´Ÿè½½å‡è¡¡çš„è¯ç”ŸèƒŒæ™¯<br>åœ¨äº’è”ç½‘å‘å±•æ—©æœŸï¼Œç”±äºç”¨æˆ·é‡è¾ƒå°‘ã€ä¸šåŠ¡éœ€æ±‚ä¹Ÿæ¯”è¾ƒç®€å•ã€‚å¯¹äºè½¯ä»¶åº”ç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€å°é«˜é…çš„æœåŠ¡å™¨å³å¯å®Œæˆä¸šåŠ¡çš„æ”¯æ’‘ï¼Œè¿™æ ·çš„è½¯ä»¶æ¶æ„ç§°ä¸ºå•ä½“æ¶æ„<br>éšç€ç”¨æˆ·é‡çš„å¢åŠ ï¼ŒæœåŠ¡å™¨çš„è¯·æµé‡ä¹Ÿéšä¹‹å¢åŠ ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å•ä½“æ¶æ„ä¼šäº§ç”Ÿä¸¤ä¸ªé—®é¢˜ã€‚<br>1.è½¯ä»¶çš„æ€§èƒ½é€æ­¥ä¸‹é™ï¼Œè®¿é—®å»¶è¿Ÿè¶Šæ¥è¶Šé«˜<br>2.å®¹æ˜“å‡ºç°å•ç‚¹æ•…éšœ<br>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†é›†ç¾¤åŒ–éƒ¨ç½²çš„æ¶æ„ï¼Œä¹Ÿå°±æ˜¯æŠŠä¸€ä¸ªè½¯ä»¶åº”ç”¨åŒæ—¶éƒ¨ç½²åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šã€‚å¼•å…¥äº†è´Ÿè½½å‡è¡¡çš„è®¾è®¡ï¼Œç®€å•æ¥è¯´ï¼Œè´Ÿè½½å‡è¡¡æœºåˆ¶çš„æ ¸å¿ƒç›®çš„æ˜¯è®©å®¢æˆ·ç«¯çš„è¯·æ±‚åˆç†å‡åŒ€çš„åˆ†å‘åˆ°å¤šå°ç›®æ ‡æœåŠ¡å™¨ï¼Œç”±äºè¯·æ±‚è¢«å¤šä¸ªèŠ‚ç‚¹åˆ†å‘ï¼Œä½¿å¾—æœåŠ¡ç«¯çš„æ€§èƒ½å¾—åˆ°æœ‰æ•ˆçš„æå‡ã€‚</p>
</li>
<li><p>å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡å‘¢ï¼Ÿ<br>1ã€åŸºäº DNS å®ç°è´Ÿè½½å‡è¡¡ï¼šå®ç°æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åœ¨ DNSæœåŠ¡å™¨ä¸Šé’ˆå¯¹æŸä¸ªåŸŸååšå¤šä¸ª IP æ˜ å°„å³å¯ã€‚<br>2ã€åŸºäºç¡¬ä»¶å®ç°è´Ÿè½½å‡è¡¡<br>3ã€åŸºäºè½¯ä»¶å®ç°è´Ÿè½½å‡è¡¡</p>
</li>
<li><p>è´Ÿè½½å‡è¡¡çš„å¸¸ç”¨ç®—æ³•<br>æ‰€è°“è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå°±æ˜¯å†³å®šå½“å‰å®¢æˆ·ç«¯è¯·æ±‚åŒ¹é…åˆ°ç›®æ ‡æœåŠ¡å™¨é›†ç¾¤ä¸­çš„å…·ä½“å“ªä¸ªèŠ‚ç‚¹ã€‚å¸¸è§çš„è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰ï¼š<br>1ã€è½®è®­ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªæœåŠ¡å™¨æŒ‰ç…§é¡ºåºè½®è®­è¿”å›ï¼Œè¿™æ ·æ¯ä¸ªæœåŠ¡å™¨éƒ½èƒ½è·å¾—ç›¸åŒçš„è¯·æ±‚æ¬¡æ•°<br>2ã€éšæœºï¼Œæ ¹æ®éšæœºç®—æ³•è·å¾—ä¸€ä¸ªç›®æ ‡æœåŠ¡åœ°å€ï¼Œç”±äºè¯¥ç®—æ³•å…·å¤‡éšæœºæ€§ï¼Œå› æ­¤æ¯ä¸ªæœåŠ¡å™¨è·å¾—çš„è¯·æ±‚æ•°é‡ä¸ä¸€å®šå‡ç­‰ã€‚<br>3ã€ä¸€è‡´æ€§ hashï¼Œä¹Ÿå°±æ˜¯å¯¹äºå…·æœ‰ç›¸åŒ hash ç çš„è¯·æ±‚ï¼Œæ°¸è¿œå‘é€åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚<br>4ã€æœ€å°è¿æ¥æ•°ï¼Œæ ¹æ®ç›®æ ‡æœåŠ¡å™¨çš„è¯·æ±‚æ•°é‡æ¥å†³å®šè¯·æ±‚åˆ†å‘çš„æƒé‡ï¼Œä¹Ÿå°±æ˜¯ç›®æ ‡æœåŠ¡é›†ç¾¤ä¸­ï¼Œè¯·æ±‚æ›´å°‘çš„èŠ‚ç‚¹å°†ä¼šè·å¾—æ›´å¤šçš„è¯·æ±‚ã€‚è¿™æ˜¯è´Ÿè½½å‡è¡¡ä¸­æ¯”è¾ƒå¥½çš„ç­–ç•¥ï¼ŒçœŸæ­£èƒ½å¤Ÿå®ç°ç›®æ ‡æœåŠ¡å™¨çš„è¯·æ±‚å‡è¡¡ã€‚</p>
</li>
</ul>
<hr>

<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><ul>
<li><p>ç»å¯¹è·¯å¾„ç”¨ä»€ä¹ˆç¬¦å·è¡¨ç¤ºï¼Ÿå½“å‰ç›®å½•ã€ä¸Šå±‚ç›®å½•ç”¨ä»€ä¹ˆè¡¨ç¤ºï¼Ÿä¸»ç›®å½•ç”¨ä»€ä¹ˆè¡¨ç¤º? åˆ‡æ¢ç›®å½•ç”¨ä»€ä¹ˆå‘½ä»¤ï¼Ÿ<br>ç»å¯¹è·¯å¾„ï¼š å¦‚&#x2F;etc&#x2F;init.d<br>å½“å‰ç›®å½•å’Œä¸Šå±‚ç›®å½•ï¼š .&#x2F; ..&#x2F;<br>ä¸»ç›®å½•ï¼š ~&#x2F;<br>åˆ‡æ¢ç›®å½•ï¼š cd</p>
</li>
<li><p>Linux ä¸‹å‘½ä»¤æœ‰å“ªå‡ ç§å¯ä½¿ç”¨çš„é€šé…ç¬¦ï¼Ÿåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå«ä¹‰?</p>
<ul>
<li>â€œ?â€ å¯æ›¿ä»£å•ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œfile?.txt å¯ä»¥åŒ¹é… file1.txtã€fileA.txt ç­‰ã€‚</li>
<li>â€œ*â€ å¯æ›¿ä»£ä»»æ„å¤šä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ<code>*.txt</code> å¯ä»¥åŒ¹é…æ‰€æœ‰ä»¥ .txt ç»“å°¾çš„æ–‡ä»¶ã€‚</li>
<li>æ–¹æ‹¬å· â€œ[charset]â€ å¯æ›¿ä»£ charset é›†ä¸­ çš„ä»»ä½•å•ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ file[123].txt å¯ä»¥åŒ¹é… file1.txtã€file2.txtã€file3.txtã€‚</li>
<li><code>[a-zA-Z]+:[ ]+[0-9]*</code> ä»£è¡¨ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ¯ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰ã€å†’å·ã€è‡³å°‘ä¸€ä¸ªç©ºæ ¼ï¼Œç„¶åæ˜¯é›¶ä¸ªæˆ–å¤šä¸ªæ•°å­—ã€‚<br>  ä¾‹å­ï¼š<code>Example: 123</code>ã€<code>abc:   </code>ã€‚</li>
</ul>
</li>
<li><p>æ­£åˆ™è¡¨è¾¾å¼<br>\s+ è¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ï¼›<br>\wï¼šè¡¨ç¤ºåŒ¹é…ä»»æ„å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿å­—ç¬¦ï¼ˆå³å•è¯å­—ç¬¦ï¼‰ï¼Œç­‰ä»·äº <code>[a-zA-Z0-9_]</code>ï¼›<br>&#x2F;a?&#x2F;ï¼šè¡¨ç¤ºå­—ç¬¦ <code>a</code> å¯ä»¥å‡ºç° 0 æ¬¡æˆ– 1 æ¬¡ï¼ŒåŒ¹é…ç©ºå­—ç¬¦ä¸²æˆ–è€…å•ä¸ªå­—æ¯ <code>a</code>ï¼›<br>i.ï¼šåŒ¹é…ä¸€ä¸ªå­—ç¬¦ <code>i</code> åé¢ç´§è·Ÿç€ä»»æ„å­—ç¬¦ã€‚</p>
</li>
<li><p>å¸¸ç”¨ linux å‘½ä»¤ã€‚<br>æ‰§è¡Œé€€å‡ºï¼š exit<br>åˆ—å‡ºæ–‡ä»¶åˆ—è¡¨ï¼šls[å‚æ•°] -a æ‰€æœ‰æ–‡ä»¶; -l è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¤§å°å­—èŠ‚æ•°ï¼Œå¯è¯»å¯å†™å¯æ‰§è¡Œçš„æƒé™ç­‰<br>ç”¨äºæ˜¾ç¤ºæ–‡ä»¶åå‡ è¡Œå†…å®¹ï¼štailï¼Œä¾‹å¦‚ï¼š tail -n 1000ï¼šæ˜¾ç¤ºæœ€å1000è¡Œ<br>æ‰“åŒ…ï¼štar -xvfï¼›æ‰“åŒ…å¹¶å‹ç¼©ï¼štar -zcvf<br>æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼šgrep<br>æ˜¾ç¤ºå½“å‰æ‰€åœ¨ç›®å½•ï¼špwd<br>åˆ›å»ºç©ºæ–‡ä»¶ï¼štouch<br>ç¼–è¾‘å™¨ï¼švim vi<br>æŸ¥çœ‹ç”¨è¿‡çš„å‘½ä»¤åˆ—è¡¨ï¼šhistory</p>
</li>
<li><p>ç›®å½•å‘½ä»¤ã€‚<br>åˆ›å»ºç›®å½•ï¼šmkdir<br>ç§»é™¤ç›®å½•ï¼šrmdir<br>åˆ›å»ºçˆ¶ç›®å½•çš„ç¤ºä¾‹ï¼šmkdir -p<br>åˆ›å»ºå¸¦æƒé™çš„ç›®å½•ï¼šmkdir -m </p>
</li>
<li><p>ç›®å½•ã€æ–‡ä»¶å‘½ä»¤ã€‚<br>åˆ›å»ºæ–‡ä»¶ï¼šå…¸å‹çš„å¦‚ touchï¼Œvi ä¹Ÿå¯ä»¥åˆ›å»ºæ–‡ä»¶ï¼Œå…¶å®åªè¦å‘ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶è¾“å‡ºï¼Œéƒ½ä¼šåˆ›å»ºæ–‡ä»¶<br>å¤åˆ¶æ–‡ä»¶ï¼š cp<br>ç§»åŠ¨æ–‡ä»¶ï¼Œæ”¹åï¼šmv<br>åˆ é™¤æ–‡ä»¶ï¼Œç©ºæ–‡ä»¶å¤¹ï¼šrm rmdir<br>åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸Šå·²æ‰“å¼€çš„æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•ã€æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ç­‰ï¼‰çš„ç›¸å…³ä¿¡æ¯ï¼šlsof çš„åå­—æ˜¯ â€œList Open Filesâ€ çš„ç¼©å†™ã€‚</p>
</li>
<li><p>æœç´¢æ–‡ä»¶ç”¨ä»€ä¹ˆå‘½ä»¤? æ ¼å¼æ˜¯æ€ä¹ˆæ ·çš„?<br>find &lt;æŒ‡å®šç›®å½•&gt; &lt;æŒ‡å®šæ¡ä»¶&gt; &lt;æŒ‡å®šåŠ¨ä½œ&gt;<br>whereis åŠ å‚æ•°ä¸æ–‡ä»¶å<br>locate åªåŠ æ–‡ä»¶å<br>find ç›´æ¥æœç´¢ç£ç›˜ï¼Œè¾ƒæ…¢ã€‚<br>find &#x2F; -name â€œstring*â€</p>
</li>
<li><p>æŸ¥çœ‹æ–‡ä»¶çš„å‘½ä»¤ã€‚</p>
<ul>
<li>vi æ–‡ä»¶å #ç¼–è¾‘æ–¹å¼æŸ¥çœ‹ï¼Œå¯ä¿®æ”¹</li>
<li>cat æ–‡ä»¶å #æ˜¾ç¤ºå…¨éƒ¨æ–‡ä»¶å†…å®¹</li>
<li>more æ–‡ä»¶å #åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹</li>
<li>less æ–‡ä»¶å #ä¸ more ç›¸ä¼¼ï¼Œæ›´å¥½çš„æ˜¯å¯ä»¥å¾€å‰ç¿»é¡µ  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">less log2013.log <span class="comment"># æŸ¥çœ‹æ–‡ä»¶</span></span><br><span class="line">ps -ef | less <span class="comment"># psæŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯å¹¶é€šè¿‡lessåˆ†é¡µæ˜¾ç¤º</span></span><br><span class="line"><span class="built_in">history</span> | less <span class="comment"># æŸ¥çœ‹å‘½ä»¤å†å²ä½¿ç”¨è®°å½•å¹¶é€šè¿‡lessåˆ†é¡µæ˜¾ç¤º</span></span><br><span class="line">less log2013.log log2014.log <span class="comment"># æµè§ˆå¤šä¸ªæ–‡ä»¶</span></span><br></pre></td></tr></table></figure></li>
<li>tail æ–‡ä»¶å #ä»…æŸ¥çœ‹å°¾éƒ¨ï¼Œè¿˜å¯ä»¥æŒ‡å®šè¡Œæ•°  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -n 10 test.log <span class="comment"># æŸ¥è¯¢æ—¥å¿—å°¾éƒ¨æœ€å10è¡Œçš„æ—¥å¿—;</span></span><br><span class="line"><span class="built_in">tail</span> -n +10 test.log <span class="comment"># æŸ¥è¯¢10è¡Œä¹‹åçš„æ‰€æœ‰æ—¥å¿—;</span></span><br><span class="line"><span class="built_in">tail</span> -fn 10 test.log <span class="comment"># å¾ªç¯å®æ—¶æŸ¥çœ‹æœ€å1000è¡Œè®°å½•(æœ€å¸¸ç”¨çš„)</span></span><br><span class="line"><span class="comment"># ä¸€èˆ¬è¿˜ä¼šé…åˆç€grepæœç´¢ç”¨ï¼Œä¾‹å¦‚ : </span></span><br><span class="line"><span class="built_in">tail</span> -fn 1000 test.log | grep <span class="string">&#x27;å…³é”®å­—&#x27;</span></span><br><span class="line"><span class="comment"># å¦‚æœä¸€æ¬¡æ€§æŸ¥è¯¢çš„æ•°æ®é‡å¤ªå¤§,å¯ä»¥è¿›è¡Œç¿»é¡µæŸ¥çœ‹ï¼Œä¾‹å¦‚ ï¼š</span></span><br><span class="line"><span class="built_in">tail</span> -n 4700 aa.log |more -1000 å¯ä»¥è¿›è¡Œå¤šå±æ˜¾ç¤º (ctrl + f æˆ–è€… ç©ºæ ¼é”®å¯ä»¥å¿«æ·é”®ï¼‰</span><br></pre></td></tr></table></figure></li>
<li>head æ–‡ä»¶å #ä»…æŸ¥çœ‹å¤´éƒ¨,è¿˜å¯ä»¥æŒ‡å®šè¡Œæ•°  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">head</span> -n 10 test.log æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶ä¸­çš„å¤´10è¡Œæ—¥å¿—;</span><br><span class="line"><span class="built_in">head</span> -n -10 test.log æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶é™¤äº†æœ€å10è¡Œçš„å…¶ä»–æ‰€æœ‰æ—¥å¿—;</span><br></pre></td></tr></table></figure></li>
<li>sed è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥æ‰¾æ—¥å¿—æ–‡ä»¶ç‰¹å®šçš„ä¸€æ®µ , æ ¹æ®æ—¶é—´çš„ä¸€ä¸ªèŒƒå›´æŸ¥è¯¢ï¼Œå¯ä»¥æŒ‰ç…§è¡Œå·å’Œæ—¶é—´èŒƒå›´æŸ¥è¯¢æŒ‰ç…§è¡Œå·  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;5,10p&#x27;</span> filename <span class="comment"># è¿™æ ·ä½ å°±å¯ä»¥åªæŸ¥çœ‹æ–‡ä»¶çš„ç¬¬5è¡Œåˆ°ç¬¬10è¡Œã€‚</span></span><br><span class="line">sed -n <span class="string">&#x27;/2014-12-17 16:17:20/,/2014-12-17 16:17:36/p&#x27;</span> test.log <span class="comment"># æŒ‰ç…§æ—¶é—´æ®µ</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æŸ¥çœ‹æ—¥å¿—çš„æ–¹æ³•</p>
<ol>
<li>æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ã€ç™»å½•æ—¥å¿—ã€åº”ç”¨ç¨‹åºæ—¥å¿—ï¼šä½¿ç”¨ <code>cat</code> æˆ– <code>less</code> å‘½ä»¤  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /var/log/syslog</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨ <code>dmesg</code> æŸ¥çœ‹å†…æ ¸æ—¥å¿—</li>
<li>ä½¿ç”¨ <code>journalctl</code> æŸ¥çœ‹ Systemd æ—¥å¿—</li>
</ol>
</li>
<li><p>æŸ¥çœ‹è¿›ç¨‹çº¿ç¨‹çš„æ–¹æ³•</p>
<ul>
<li>windows<br>  ä»»åŠ¡ç®¡ç†å™¨å¯ä»¥æŸ¥çœ‹è¿›ç¨‹å’Œçº¿ç¨‹æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ€æ­»è¿›ç¨‹<br>  tasklist æŸ¥çœ‹è¿›ç¨‹<br>  taskkill æ€æ­»è¿›ç¨‹</li>
<li>linux<br>  ps -fe æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹<br>  ps -fT -p &lt; PID&gt; æŸ¥çœ‹æŸä¸ªè¿›ç¨‹ï¼ˆPIDï¼‰çš„æ‰€æœ‰çº¿ç¨‹<br>  kill æ€æ­»è¿›ç¨‹<br>  top æŒ‰å¤§å†™ H åˆ‡æ¢æ˜¯å¦æ˜¾ç¤ºçº¿ç¨‹<br>  top -H -p &lt; PID&gt; æŸ¥çœ‹æŸä¸ªè¿›ç¨‹ï¼ˆPIDï¼‰çš„æ‰€æœ‰çº¿ç¨‹</li>
<li>Java<br>  jps å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰  Java è¿›ç¨‹<br>  jstack &lt; PID&gt; æŸ¥çœ‹æŸä¸ª  Java è¿›ç¨‹ï¼ˆPIDï¼‰çš„æ‰€æœ‰çº¿ç¨‹çŠ¶æ€<br>  jconsole æ¥æŸ¥çœ‹æŸä¸ª  Java è¿›ç¨‹ä¸­çº¿ç¨‹çš„è¿è¡Œæƒ…å†µï¼ˆå›¾å½¢ç•Œé¢ï¼‰</li>
</ul>
</li>
<li><p>Linux ä¸­è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€ï¼Ÿåœ¨ ps æ˜¾ç¤ºå‡ºæ¥çš„ä¿¡æ¯ä¸­åˆ†åˆ«ç”¨ä»€ä¹ˆç¬¦å·è¡¨ç¤ºçš„ï¼Ÿ<br>1ã€ä¸å¯ä¸­æ–­çŠ¶æ€ï¼šè¿›ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œä½†æ˜¯æ­¤åˆ»è¿›ç¨‹æ˜¯ä¸å¯ä¸­æ–­çš„ã€‚ä¸å¯ä¸­æ–­ï¼ŒæŒ‡è¿›ç¨‹ä¸å“åº”å¼‚æ­¥ä¿¡å·ã€‚<br>2ã€æš‚åœçŠ¶æ€&#x2F;è·Ÿè¸ªçŠ¶æ€ï¼šå‘è¿›ç¨‹å‘é€ä¸€ä¸ª SIGSTOP ä¿¡å·ï¼Œå®ƒå°±ä¼šå› å“åº”è¯¥ä¿¡å· è€Œè¿›å…¥ TATASK_STOPPED çŠ¶æ€;å½“è¿›ç¨‹æ­£åœ¨è¢«è·Ÿè¸ªæ—¶ï¼Œå®ƒå¤„äº TATASK_TRACED è¿™ä¸ªç‰¹æ®Šçš„çŠ¶æ€ã€‚æ­£è¢«è·Ÿè¸ªâ€æŒ‡çš„æ˜¯è¿›ç¨‹æš‚åœä¸‹æ¥ï¼Œç­‰å¾…è·Ÿè¸ªå®ƒçš„è¿›ç¨‹å¯¹å®ƒè¿›è¡Œæ“ä½œã€‚<br>3ã€å°±ç»ªçŠ¶æ€ï¼šåœ¨ run_queue é˜Ÿåˆ—é‡Œçš„çŠ¶æ€<br>4ã€è¿è¡ŒçŠ¶æ€ï¼šåœ¨ run_queue é˜Ÿåˆ—é‡Œçš„çŠ¶æ€<br>5ã€å¯ä¸­æ–­ç¡çœ çŠ¶æ€ï¼šå¤„äºè¿™ä¸ªçŠ¶æ€çš„è¿›ç¨‹å› ä¸ºç­‰å¾…æŸæŸäº‹ä»¶çš„å‘ç”Ÿï¼ˆæ¯”å¦‚ç­‰å¾…socket è¿æ¥ã€ç­‰å¾…ä¿¡å·é‡ï¼‰ï¼Œè€Œè¢«æŒ‚èµ·<br>6ã€zombie çŠ¶æ€ï¼ˆåƒµå°¸ï¼‰ï¼šçˆ¶äº²æ²¡æœ‰é€šè¿‡ wait ç³»åˆ—çš„ç³»ç»Ÿè°ƒç”¨ä¼šé¡ºä¾¿å°†å­è¿›ç¨‹çš„å°¸ä½“ï¼ˆtask_structï¼‰ä¹Ÿé‡Šæ”¾æ‰<br>7ã€é€€å‡ºçŠ¶æ€<br>D ä¸å¯ä¸­æ–­ Uninterruptibleï¼ˆusually IOï¼‰ã€R æ­£åœ¨è¿è¡Œï¼Œæˆ–åœ¨é˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ã€S å¤„äºä¼‘çœ çŠ¶æ€ã€T åœæ­¢æˆ–è¢«è¿½è¸ªã€Z åƒµå°¸è¿›ç¨‹ã€W è¿›å…¥å†…å­˜äº¤æ¢ï¼ˆä»å†…æ ¸ 2.6 å¼€å§‹æ— æ•ˆï¼‰ã€X æ­»æ‰çš„è¿›ç¨‹</p>
</li>
<li><p>ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æŸ¥çœ‹ç½‘ç»œæ˜¯å¦è¿é€š?ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æŸ¥çœ‹ ip åœ°å€åŠæ¥å£ä¿¡æ¯ï¼Ÿ<br>natstatï¼Œifconfig</p>
</li>
<li><p>æ–‡ä»¶çš„æƒé™å¯ä»¥ç”¨ä¸€ä¸²å­—ç¬¦è¡¨ç¤ºï¼Œå…¶ä¸­â€-rwxrw-rw-â€œæ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚<br>  æ¯ä¸ªæƒé™å­—ç¬¦ä¸²ç”±10ä¸ªå­—ç¬¦ç»„æˆï¼Œåˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼š<br>  1ã€<strong>æ–‡ä»¶ç±»å‹ï¼š</strong> ç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºæ–‡ä»¶çš„ç±»å‹ã€‚åŒ…æ‹¬ï¼š<code>-</code>ï¼šæ™®é€šæ–‡ä»¶ã€‚<code>d</code>ï¼šç›®å½•ã€‚<code>l</code>ï¼šç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰<br>  2ã€<strong>ç”¨æˆ·æƒé™ï¼š</strong> æ¥ä¸‹æ¥çš„ä¸‰ä¸ªå­—ç¬¦è¡¨ç¤ºæ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ã€‚ <code>r</code>ï¼šè¯»æƒé™ï¼ˆReadï¼‰ <code>w</code>ï¼šå†™æƒé™ï¼ˆWriteï¼‰ <code>x</code>ï¼šæ‰§è¡Œæƒé™ï¼ˆeXecuteï¼‰<br>  3ã€<strong>ç»„æƒé™ï¼š</strong> å†æ¥ä¸‹æ¥çš„ä¸‰ä¸ªå­—ç¬¦è¡¨ç¤ºæ–‡ä»¶æ‰€å±ç»„çš„æƒé™ã€‚<br>  4ã€<strong>å…¶ä»–ç”¨æˆ·æƒé™ï¼š</strong> æœ€åçš„ä¸‰ä¸ªå­—ç¬¦è¡¨ç¤ºå…¶ä»–ç”¨æˆ·çš„æƒé™ã€‚<br>  åœ¨ç»™å®šçš„ä¾‹å­â€-rwxrw-rw-â€œä¸­ï¼šæ–‡ä»¶ç±»å‹æ˜¯æ™®é€šæ–‡ä»¶ï¼Œæ–‡ä»¶æ‰€æœ‰è€…æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼Œæ–‡ä»¶æ‰€å±ç»„æœ‰è¯»å’Œå†™æƒé™ï¼Œå…¶ä»–ç”¨æˆ·æœ‰è¯»å’Œå†™æƒé™ã€‚</p>
</li>
<li><p>æ–‡ä»¶å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆFile Identifierï¼‰<br>é€šå¸¸æ˜¯é€šè¿‡æ–‡ä»¶çš„<code>inode</code>æ¥å®ç°çš„ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ç›®å½•ã€‚<br><code>inode</code>æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­ç”¨äºå”¯ä¸€æ ‡è¯†æ–‡ä»¶æˆ–ç›®å½•çš„æ•°æ®ç»“æ„ã€‚æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„<code>inode</code>å·ç ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•´æ•°å€¼ã€‚</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/10/11/%E9%9D%A2%E8%AF%95_%E7%BB%84%E4%BB%B6/" data-id="cmjzvj9mj0011hgv5dge03y1l" data-title="é¢ é€ | ç»„ä»¶" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Pytorch_Colab" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/10/Pytorch_Colab/" class="article-date">
  <time class="dt-published" datetime="2023-07-10T03:58:39.000Z" itemprop="datePublished">2023-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/10/Pytorch_Colab/">Pytorch</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>PyTorchæ˜¯ä¸€ä¸ªå¼€æºçš„Pythonæœºå™¨å­¦ä¹ åº“ï¼ŒåŸºäºTorchåº“ï¼Œåº•å±‚ç”±C++å®ç°ï¼Œåº”ç”¨äºäººå·¥æ™ºèƒ½é¢†åŸŸï¼Œå¦‚è®¡ç®—æœºè§†è§‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ã€‚å®ƒæœ€åˆç”±Meta Platformsçš„äººå·¥æ™ºèƒ½ç ”ç©¶å›¢é˜Ÿå¼€å‘ï¼Œç°åœ¨å±äºLinuxåŸºé‡‘ä¼šçš„ä¸€éƒ¨åˆ†ã€‚å®ƒæ˜¯åœ¨ä¿®æ”¹åçš„BSDè®¸å¯è¯ä¸‹å‘å¸ƒçš„è‡ªç”±åŠå¼€æ”¾æºä»£ç è½¯ä»¶ã€‚</p>
<p>è®¸å¤šæ·±åº¦å­¦ä¹ è½¯ä»¶éƒ½æ˜¯åŸºäº PyTorch æ„å»ºçš„ï¼ŒåŒ…æ‹¬ç‰¹æ–¯æ‹‰è‡ªåŠ¨é©¾é©¶ã€Uberçš„Pyroã€Hugging Faceçš„Transformersã€ PyTorch Lightningã€‚</p>
<h3 id="TensorBoard"><a href="#TensorBoard" class="headerlink" title="TensorBoard"></a>TensorBoard</h3><p>æ‰“å¼€localhost:6006ï¼Œè®¿é—®TensorBoardï¼ŒæŸ¥çœ‹TensorFlowæ¨¡å‹çš„å›¾å½¢ã€æŸå¤±å‡½æ•°ã€ç²¾åº¦ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorboardX <span class="keyword">import</span> SummaryWriter</span><br><span class="line">writer = SummaryWriter(<span class="string">&quot;xxx&quot;</span>)               <span class="comment"># åœ¨æ–‡ä»¶å¤¹é‡Œæ–°å»ºä¸€ä¸ªabcæ–‡ä»¶å¤¹</span></span><br><span class="line">writer.add_scalar(<span class="string">&quot;y=2i&quot;</span>, <span class="number">2</span>*i, i)           <span class="comment"># åŠ åæ ‡</span></span><br><span class="line">writer.add_images(<span class="string">&quot;test_data&quot;</span>, imgs, step)  <span class="comment"># åŠ å›¾</span></span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pycharm -&gt; Terminal</span></span><br><span class="line">PS C:\Users\cf\Documents\Visual Studio Code\Python\learn_pytorch&gt; tensorboard --logdir=<span class="string">&quot;xxx&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="nn-Module"><a href="#nn-Module" class="headerlink" title="nn.Module"></a>nn.Module</h3><p>åŸºæœ¬ç¥ç»ç½‘ç»œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">cf</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__int__</span>(<span class="params">self</span>):   <span class="built_in">super</span>().__init__()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, <span class="built_in">input</span></span>):      <span class="comment"># å¿…é¡»é‡å†™forword()</span></span><br><span class="line">        output = <span class="built_in">input</span> + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å…¥å±‚ï¼ˆInput Layerï¼‰ï¼š</strong>æ¥å—åŸå§‹å›¾åƒæˆ–æ•°æ®ä½œä¸ºè¾“å…¥ã€‚<br><strong>å·ç§¯å±‚ï¼ˆConvolutional Layerï¼‰ï¼š</strong>è¿›è¡Œç‰¹å¾æå–ã€‚é€šè¿‡å·ç§¯æ“ä½œï¼Œåˆ©ç”¨å·ç§¯æ ¸ï¼ˆæˆ–è¿‡æ»¤å™¨ï¼‰ä»è¾“å…¥å›¾åƒä¸­æå–ç‰¹å®šçš„ç‰¹å¾ï¼Œå¦‚è¾¹ç¼˜ã€çº¹ç†ç­‰ã€‚å·ç§¯æ ¸ä¼šåœ¨æ•´ä¸ªå›¾åƒä¸Šæ»‘åŠ¨ï¼Œäº§ç”Ÿç‰¹å¾å›¾ã€‚<br>å·ç§¯æ ¸çš„è¾“å…¥é€šé“æ•°ä¸è¾“å…¥æ•°æ®çš„é€šé“æ•°å¯¹åº”ï¼Œå·ç§¯æ ¸çš„è¾“å‡ºé€šé“æ•°ä¸å·ç§¯æ ¸çš„æ•°é‡å¯¹åº”ã€‚<br>å·ç§¯æ“ä½œåœ¨ç¥ç»ç½‘ç»œä¸­æ‰®æ¼”ç€å…³é”®çš„è§’è‰²ï¼Œå®ƒé€šè¿‡ç‰¹å¾æå–ã€å‚æ•°å…±äº«ã€ç©ºé—´å±€éƒ¨æ€§å’Œå‚æ•°æ•°é‡æ§åˆ¶ç­‰æ–¹é¢ï¼Œä½¿å¾—å·ç§¯ç¥ç»ç½‘ç»œæˆä¸ºå›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­éå¸¸æœ‰æ•ˆçš„å·¥å…·ã€‚<br><strong>æ± åŒ–å±‚ï¼ˆPooling Layerï¼‰</strong>ã€æœ€å¤§ceil, æœ€å°floorã€‘ï¼šé™é‡‡æ ·å’Œå‡å°‘å‚æ•°ï¼Œé¿å…è¿‡æ‹Ÿåˆã€‚æ± åŒ–æ“ä½œå¯¹ç‰¹å¾å›¾è¿›è¡Œé™é‡‡æ ·ï¼Œå‡å°‘ç‰¹å¾å›¾çš„å°ºå¯¸ï¼Œå¹¶ä¿ç•™é‡è¦çš„ç‰¹å¾ä¿¡æ¯ã€‚å¸¸ç”¨çš„æ± åŒ–æ–¹å¼ä¸ºæœ€å¤§æ± åŒ–ï¼ˆMax Poolingï¼‰å’Œå¹³å‡æ± åŒ–ï¼ˆAverage Poolingï¼‰ã€‚<br><strong>éçº¿æ€§æ¿€æ´»ï¼š</strong>çº¿æ€§å˜æ¢ï¼ˆå¦‚å…¨è¿æ¥å±‚ï¼‰åœ¨ç¥ç»ç½‘ç»œä¸­åªèƒ½å®ç°çº¿æ€§æ˜ å°„ï¼Œè€Œç°å®ä¸–ç•Œä¸­çš„æ•°æ®å’Œä»»åŠ¡é€šå¸¸éƒ½æ˜¯éçº¿æ€§çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦åœ¨ç½‘ç»œä¸­å¼•å…¥éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œä»¥å¢åŠ ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›å’Œçµæ´»æ€§ã€‚ ç»™ç½‘ç»œä¸­å¼•å…¥éçº¿æ€§ç‰¹å¾ï¼Œä»¥è®­ç»ƒå‡ºç¬¦åˆå„ç§æ›²çº¿çš„æ¨¡å‹ã€‚<br>Â·ReLUï¼ˆRectified Linear Unitï¼‰ï¼šf(x) &#x3D; max(0, x)ï¼Œå®ƒåœ¨xå¤§äº0æ—¶æ˜¯çº¿æ€§çš„ï¼Œå°äºç­‰äº0æ—¶ä¸º0ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°è§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚<br>Â·Sigmoidï¼šf(x) &#x3D; 1 &#x2F; (1 + exp(-x))ï¼Œå®ƒå°†è¾“å…¥æ˜ å°„åˆ°[0, 1]åŒºé—´ï¼Œç”¨äºäºŒåˆ†ç±»é—®é¢˜ã€‚<br>Â·Tanhï¼šf(x) &#x3D; (exp(x) - exp(-x)) &#x2F; (exp(x) + exp(-x))ï¼Œå®ƒå°†è¾“å…¥æ˜ å°„åˆ°[-1, 1]åŒºé—´ï¼Œä¹Ÿç”¨äºè§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚<br><strong>æ­£åˆ™åŒ–å±‚ï¼ˆRegularization Layerï¼‰ï¼š</strong>æ­£åˆ™åŒ–å±‚ç”¨äºé˜²æ­¢è¿‡æ‹Ÿåˆã€‚è¿‡æ‹Ÿåˆæ˜¯æŒ‡æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šè¡¨ç°è‰¯å¥½ï¼Œä½†åœ¨æœªè§è¿‡çš„æµ‹è¯•æ•°æ®ä¸Šè¡¨ç°è¾ƒå·®çš„ç°è±¡ã€‚æ­£åˆ™åŒ–å±‚é€šè¿‡æ·»åŠ ä¸€äº›é¢å¤–çš„çº¦æŸæˆ–æƒ©ç½šé¡¹æ¥æ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ï¼Œä»¥é¿å…è¿‡åº¦æ‹Ÿåˆã€‚<br>Â·L1æ­£åˆ™åŒ–ï¼šå°†å‚æ•°çš„ç»å¯¹å€¼åŠ å…¥åˆ°æŸå¤±å‡½æ•°ä¸­ï¼Œä½¿å¾—æ¨¡å‹å€¾å‘äºäº§ç”Ÿç¨€ç–çš„æƒé‡çŸ©é˜µã€‚<br>Â·L2æ­£åˆ™åŒ–ï¼šå°†å‚æ•°çš„å¹³æ–¹åŠ å…¥åˆ°æŸå¤±å‡½æ•°ä¸­ï¼Œé™åˆ¶æƒé‡çš„å¤§å°ï¼Œé˜²æ­¢æƒé‡è¿‡å¤§é€ æˆè¿‡æ‹Ÿåˆã€‚<br>Â·Dropoutæ­£åˆ™åŒ–ï¼šéšæœºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸¢å¼ƒä¸€éƒ¨åˆ†ç¥ç»å…ƒï¼Œå‡å°‘ç¥ç»å…ƒä¹‹é—´çš„å…±é€‚åº”æ€§ï¼Œæé«˜æ³›åŒ–èƒ½åŠ›ã€‚<br><strong>å…¨è¿æ¥å±‚ï¼ˆFully Connected Layerï¼‰ï¼š</strong>å°†ç‰¹å¾çŸ©é˜µé›†åˆå‘é‡åŒ–ã€‚ä¸å·ç§¯å±‚ä¸åŒï¼Œå…¨è¿æ¥å±‚çš„ç¥ç»å…ƒæ’æˆä¸€åˆ—ï¼Œè¿™äº›ç¥ç»å…ƒä¸å‰ä¸€å±‚ç¥ç»å…ƒé€šè¿‡æƒå€¼äº’è¿ï¼Œå‘ˆå…¨è¿æ¥ç»“æ„ã€‚å…¨è¿æ¥å±‚çš„å±‚æ•°ä»¥åŠæ¯å±‚ç¥ç»å…ƒæ•°å¹¶ä¸å›ºå®šã€‚é€šå¸¸å±‚æ•°è¶Šé«˜ï¼Œç¥ç»å…ƒæ•°ç›®è¶Šå°‘ã€‚<br>åŠŸèƒ½ï¼šè¿›è¡Œåˆ†ç±»ã€‚åœ¨å·ç§¯å’Œæ± åŒ–å±‚ä¹‹åï¼Œé€šè¿‡å…¨è¿æ¥å±‚å°†å¾—åˆ°çš„ç‰¹å¾æ˜ å°„è½¬æ¢ä¸ºä¸€ç»´å‘é‡ï¼Œå¹¶é€šè¿‡ä¸€ç³»åˆ—çš„å…¨è¿æ¥ç¥ç»å…ƒè¿›è¡Œåˆ†ç±»æ“ä½œï¼Œå°†è¾“å…¥æ˜ å°„åˆ°å¯¹åº”çš„ç±»åˆ«æ¦‚ç‡ã€‚<br><strong>è¾“å‡ºå±‚ï¼ˆOutput Layerï¼‰ï¼š</strong>ç»è¿‡å¤šå±‚ç‰¹å¾æå–åï¼Œæœ€åä¸€å±‚è¾“å‡ºå±‚å¯è§†ä¸ºåˆ†ç±»å™¨ï¼Œé¢„æµ‹è¾“å…¥æ ·æœ¬çš„ç±»åˆ«ã€‚é€šå¸¸ä½¿ç”¨Softmaxå‡½æ•°å°†å…¨è¿æ¥å±‚çš„è¾“å‡ºè½¬æ¢ä¸ºç±»åˆ«æ¦‚ç‡åˆ†å¸ƒï¼Œç¡®å®šè¾“å…¥å›¾åƒæœ€å¯èƒ½å±äºå“ªä¸ªç±»åˆ«ã€‚<br><img src="https://leo710aka.github.io/bk/nn.png"></p>
<p>Sequential</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">self.model1 = Sequential(</span><br><span class="line">            Conv2d(in_channels=<span class="number">3</span>, out_channels=<span class="number">32</span>, kernel_size=<span class="number">5</span>, padding=<span class="number">2</span>),</span><br><span class="line">            MaxPool2d(kernel_size=<span class="number">2</span>, ceil_mode=<span class="literal">True</span>),</span><br><span class="line">            Conv2d(<span class="number">32</span>, <span class="number">32</span>, <span class="number">5</span>, padding=<span class="number">2</span>),     <span class="comment"># äºŒç»´å·ç§¯å±‚</span></span><br><span class="line">            MaxPool2d(<span class="number">2</span>),</span><br><span class="line">            Conv2d(<span class="number">32</span>, <span class="number">64</span>, <span class="number">5</span>, padding=<span class="number">2</span>),</span><br><span class="line">            MaxPool2d(<span class="number">2</span>),</span><br><span class="line">            Flatten(),</span><br><span class="line">            Linear(<span class="number">1024</span>, <span class="number">64</span>),</span><br><span class="line">            Linear(<span class="number">64</span>, <span class="number">10</span>)</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<p>ä¸€æ¬¡è®­ç»ƒ+éªŒè¯ï¼šå‡†å¤‡æ•°æ® - åŠ è½½æ•°æ® - å‡†å¤‡æ¨¡å‹ - è®¾ç½®æŸå¤±å‡½æ•° - è®¾ç½®ä¼˜åŒ–å™¨ - å¼€å§‹è®­ç»ƒ - éªŒè¯ - èšåˆå±•ç¤º</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):  <span class="comment"># å…±20è½®è®­ç»ƒ</span></span><br><span class="line">    running_loss = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> dataloader:  <span class="comment"># å¯¹æ•°æ®è¿›è¡Œä¸€è½®å­¦ä¹ </span></span><br><span class="line">        imgs, targets = data</span><br><span class="line">        output = fc(imgs)</span><br><span class="line">        result_loss = loss(output, targets)  <span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">        optim.zero_grad()  <span class="comment"># ä¼˜åŒ–å™¨ä¸­ï¼Œæ¢¯åº¦ç½®0</span></span><br><span class="line">        result_loss.backward()  <span class="comment"># æŸå¤±å‡½æ•°æ±‚æ¢¯åº¦ï¼Œåå‘ä¼ æ’­</span></span><br><span class="line">        optim.step()  <span class="comment"># ä¼˜åŒ–å™¨ï¼Œä¼˜åŒ–å·ç§¯æ ¸å‚æ•°</span></span><br><span class="line">        running_loss = running_loss + result_loss</span><br><span class="line">    <span class="built_in">print</span>(running_loss)</span><br></pre></td></tr></table></figure>

<h1 id="Colab"><a href="#Colab" class="headerlink" title="Colab"></a>Colab</h1><p><strong>Google Colab</strong>æ˜¯è°·æ­Œæä¾›çš„å…è´¹<strong>Jupyter</strong>ç¬”è®°æœ¬ç¯å¢ƒï¼Œä¸éœ€è¦é…ç½®ç¯å¢ƒï¼ˆæœ¬è´¨æ˜¯<strong>Linuxè™šæ‹Ÿæœº</strong>ï¼‰ï¼Œå¯ä»¥åŠ !è¿è¡Œbashå‘½ä»¤ã€‚æä¾›ä¸€å®šå…è´¹çš„GPUï¼Œå¯ä»¥è·‘ Tensorflowã€Pytorch ç­‰æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚Google Colabæä¾›çš„èµ„æºé‡æ˜¯å—é™åˆ¶çš„ï¼Œæ‰€æœ‰ Colab è¿è¡Œæ—¶éƒ½ä¼šåœ¨ä¸€æ®µæ—¶é—´åé‡ç½®ã€‚Colab Pro è®¢é˜…è€…çš„ä½¿ç”¨é‡ä»ä¼šå—åˆ°é™åˆ¶ï¼Œä½†ç›¸æ¯”éè®¢é˜…è€…å¯äº«æœ‰çš„é™é¢è¦å¤šå‡ºå¤§çº¦ä¸€å€ã€‚Colab Pro+ è®¢é˜…è€…è¿˜å¯è·äº«æ›´é«˜çš„ç¨³å®šæ€§ã€‚</p>
<p>ä½¿ç”¨Colabè®­ç»ƒæ¯”è¾ƒé‡è¦çš„æ˜¯å¤„ç†å¥½è·¯å¾„çš„å…³ç³»ï¼Œæ‰¾åˆ°å“ªä¸ªæ–‡ä»¶åœ¨å“ªé‡Œï¼Œæ–‡ä»¶å¤¹çš„æ‰§è¡Œç›®å½•åœ¨å“ªé‡Œï¼Œå°±å¯ä»¥æ¯”è¾ƒç®€å•çš„è¿è¡Œèµ·ç¨‹åºäº†ï¼Œä¸è¿‡Colabç¡®å®å­˜åœ¨æ–­çº¿é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ—¶åˆ»ä¿å­˜å¥½æ–‡ä»¶ï¼Œå› æ­¤æˆ‘å°†æƒå€¼ç›´æ¥ä¿å­˜åœ¨äº‘ç›˜ä¸Šï¼Œè¿™æ ·ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚<br><strong>12h</strong>çš„é™é¢æ¯”è¾ƒéš¾å—ï¼Œæœ‰æ—¶å€™æ²¡åˆ°æ—¶é—´å°±é™é¢äº†ã€‚å› æ­¤éœ€è¦åŠæ—¶ä¿å­˜è®­ç»ƒçš„æ¨¡å‹ï¼Œé•¿æ—¶é—´ä¸ç”¨gpuçš„æƒ…å†µä¸‹ä¹Ÿä¼šè¢«é™é¢ï¼ˆProç‰ˆä¹Ÿä¸€æ ·ï¼‰ï¼Œå› æ­¤è®­ç»ƒå®Œå»ºè®®åŠæ—¶æ”¹æˆgpuæˆ–åœæ­¢ã€‚</p>
<h3 id="Google-Drive"><a href="#Google-Drive" class="headerlink" title="Google Drive"></a>Google Drive</h3><p>è°·æ­Œäº‘ç›˜ï¼Œè°·æ­Œäº‘ç«¯ç¡¬ç›˜ã€‚å…è´¹ç”¨æˆ·å¯ä»¥è·å–15Gçš„ç©ºé—´ï¼Œä»˜è´¹ç”¨æˆ·æ ¹æ®å¥—é¤å¯ä»¥é€‰æ‹©æœ€å¤§20TBçš„å‚¨å­˜ç©ºé—´ã€‚<br><strong>è™šæ‹Ÿæœºæ ¹ç›®å½•ä¸º &#x2F;contentï¼Œè°·æ­Œäº‘ç›˜åœ°å€ä¸º &#x2F;content&#x2F;Drive&#x2F;MyDrive</strong></p>
<h3 id="æ·±åº¦å­¦ä¹ åº“çš„ä¸‹è½½"><a href="#æ·±åº¦å­¦ä¹ åº“çš„ä¸‹è½½" class="headerlink" title="æ·±åº¦å­¦ä¹ åº“çš„ä¸‹è½½"></a>æ·±åº¦å­¦ä¹ åº“çš„ä¸‹è½½</h3><p>ä½¿ç”¨git cloneæŒ‡ä»¤è¿›è¡Œä¸‹è½½ï¼Œç„¶åé€šè¿‡cdæŒ‡ä»¤å°†æ ¹ç›®å½•è½¬ç§»åˆ°äº†xxæ–‡ä»¶å¤¹ã€‚<strong>æ­¤æ—¶æ ¹ç›®å½•ä¸º &#x2F;content&#x2F;xx</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!git <span class="built_in">clone</span> https://github.com/xx/xx.git</span><br><span class="line">%<span class="built_in">cd</span> xx/</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®é›†ä¸é¢„è®­ç»ƒæƒé‡çš„ä¸Šä¼ "><a href="#æ•°æ®é›†ä¸é¢„è®­ç»ƒæƒé‡çš„ä¸Šä¼ " class="headerlink" title="æ•°æ®é›†ä¸é¢„è®­ç»ƒæƒé‡çš„ä¸Šä¼ "></a>æ•°æ®é›†ä¸é¢„è®­ç»ƒæƒé‡çš„ä¸Šä¼ </h3><p>æ•°æ®é›†å‹ç¼©ï¼Œä¸Šä¼ Google Driveï¼Œåœ¨colabä¸­æ‰“å¼€çš„jupyteræ–‡ä»¶ï¼ˆç­‰äºæ‰“å¼€äº†ä¸€ä¸ªLinux<strong>è™šæ‹Ÿæœºæœ¬åœ°</strong>ï¼‰ä¸­æŒ‚è½½Google Driveï¼›å°†æ•°æ®é›†ä»Driveä¸­å¤åˆ¶åˆ°å½“å‰æ ¹ç›®å½•ï¼Œè§£å‹ã€‚<strong>ç›´æ¥å°†æ•°æ®é›†å¸ƒç½®åœ¨è°·æ­Œäº‘ç›˜ä¼šå¯¼è‡´å¤§é‡çš„äº‘ç›˜æ•°æ®ä¼ è¾“ï¼Œä¸”è°·æ­Œäº‘ç›˜å’Œè™šæ‹Ÿæœºä¹‹é—´å­˜åœ¨é€šä¿¡å¸¦å®½ï¼Œé€Ÿåº¦è¿œä¸åŠæœ¬åœ°(è™šæ‹Ÿæœº)æ–‡ä»¶ï¼Œå› æ­¤éœ€è¦å°†æ•°æ®é›†å¤åˆ¶è§£å‹åˆ°æœ¬åœ°(è™šæ‹Ÿæœº)é‡Œè¿›è¡Œå¤„ç†ã€‚</strong> (<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44791964/article/details/123659637?spm=1001.2014.3001.5501">https://blog.csdn.net/weixin_44791964/article/details/123659637?spm=1001.2014.3001.5501</a>)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!<span class="built_in">cp</span> /content/Drive/MyDrive/xx.zip ./</span><br><span class="line">!unzip ./xx.zip -d ./</span><br></pre></td></tr></table></figure>
<p>é¢„è®­ç»ƒæƒé‡å­˜æ”¾åœ¨ &#x2F;content&#x2F;Drive&#x2F;MyDrive&#x2F;Models&#x2F;xxï¼Œç„¶ååˆ›å»ºlogså’Œmodel_dataã€‚model_dataæ”¾ç½®çš„æ˜¯é¢„è®­ç»ƒæ–‡ä»¶,logsæ”¾ç½®çš„æ˜¯ç½‘ç»œè®­ç»ƒè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æƒå€¼ã€‚</p>
<h3 id="ä¿å­˜è·¯å¾„è®¾ç½®"><a href="#ä¿å­˜è·¯å¾„è®¾ç½®" class="headerlink" title="ä¿å­˜è·¯å¾„è®¾ç½®"></a>ä¿å­˜è·¯å¾„è®¾ç½®</h3><p>å¦‚æœå°†æƒå€¼ä¿å­˜åœ¨å½“å‰æ ¹ç›®å½•ä¸‹çš„logsæ–‡ä»¶å¤¹ï¼ˆ&#x2F;content&#x2F;xx&#x2F;logsï¼‰ï¼Œå‘ç”Ÿæ–­çº¿ç½‘ç»œå°±ç™½è®­ç»ƒäº†ï¼Œæµªè´¹å¤§é‡çš„æ—¶é—´ã€‚<br>å¯ä»¥å°†googleäº‘ç›˜è½¯è¿æ¥åˆ°æ ¹ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆå³ä½¿æ–­çº¿ï¼Œæƒå€¼ä¹Ÿä¿ç•™åœ¨äº‘ç›˜ä¸­ã€‚<br>æœ¬æ–‡ä¹‹å‰åœ¨äº‘ç›˜ä¸­åˆ›å»ºäº†logsæ–‡ä»¶å¤¹ï¼ˆ&#x2F;content&#x2F;Drive&#x2F;MyDrive&#x2F;Models&#x2F;xx&#x2F;logsï¼‰ï¼Œå°†è¯¥æ–‡ä»¶å¤¹é“¾æ¥åˆ°å½“å‰æ ¹ç›®å½•ä¸‹çš„logsæ–‡ä»¶å¤¹ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="built_in">ln</span> -s /content/Drive/MyDrive/Models/xx/logs logs   <span class="comment"># å³/content/xx/logs</span></span><br></pre></td></tr></table></figure>
<h3 id="å¼€å§‹è®­ç»ƒ"><a href="#å¼€å§‹è®­ç»ƒ" class="headerlink" title="å¼€å§‹è®­ç»ƒ"></a>å¼€å§‹è®­ç»ƒ</h3><p>1ã€æ ‡æ³¨æ–‡ä»¶çš„å¤„ç†<br>2ã€è®­ç»ƒæ–‡ä»¶çš„å¤„ç†<br>1ï¼‰é¢„è®­ç»ƒæ–‡ä»¶çš„ä½¿ç”¨ã€‚<br>2ï¼‰ä¿å­˜å‘¨æœŸçš„è®¾ç½®ï¼Œè¿™ä¸ªè®¾ç½®æ˜¯å› ä¸ºäº‘ç›˜çš„å­˜å‚¨ç©ºé—´æœ‰é™ï¼Œæ¯ä»£éƒ½ä¿å­˜ä¼šå¯¼è‡´å­˜å‚¨ç©ºé—´æ»¡å‡ºã€‚<br>3ã€å¼€å§‹è®­ç»ƒï¼š!python train.py</p>
<h3 id="å¸¸ç”¨-colab-å‘½ä»¤"><a href="#å¸¸ç”¨-colab-å‘½ä»¤" class="headerlink" title="å¸¸ç”¨ colab å‘½ä»¤"></a>å¸¸ç”¨ colab å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import shutil</span><br><span class="line">shutil.copytree(<span class="string">&quot;å¤åˆ¶çš„æ–‡ä»¶å¤¹&quot;</span>,<span class="string">&quot;ç›®æ ‡è·¯å¾„+ç›®æ ‡è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹&quot;</span>)  <span class="comment"># å¤åˆ¶è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">shutil.copytree(<span class="string">&quot;/content/drive/My Drive/channel&quot;</span>,<span class="string">&quot;/content/drive/My Drive/channel10&quot;</span>) <span class="comment"># ex</span></span><br><span class="line">shutil.rmtree(<span class="string">&quot;ç§»é™¤è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹&quot;</span>) <span class="comment"># ç§»é™¤è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">shutil.copy(<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>) <span class="comment"># å¤åˆ¶å•ä¸ªæ–‡ä»¶çš„å‘½ä»¤  åŒä¸Š</span></span><br><span class="line"><span class="comment"># åˆ é™¤å•ä¸ªæ–‡ä»¶å¯ä»¥å³é”®åˆ é™¤</span></span><br><span class="line">!<span class="built_in">pwd</span> <span class="comment"># æ˜¾ç¤ºå½“å‰ç›®å½•, /content ä¸ºæ ¹ç›®å½•</span></span><br><span class="line">import os </span><br><span class="line">os.chdir(<span class="string">&quot;/content/federated-learning&quot;</span>) <span class="comment"># å˜æ›´æ ¹ç›®å½•æ“ä½œ</span></span><br><span class="line">!python <span class="string">&quot;/content/federated-learning/main_nn.py&quot;</span> <span class="comment"># è¿è¡Œpython æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/10/Pytorch_Colab/" data-id="cmjzvj9ma000fhgv5aypj32ia" data-title="Pytorch" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Git" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/12/Git/" class="article-date">
  <time class="dt-published" datetime="2023-04-12T09:02:15.000Z" itemprop="datePublished">2023-04-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/12/Git/">Git</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>First Projectï¼šï¼‰being confused and embrassedâ€¦ luckily no one is staring at you but willing to helpï¼Œas long as you try to find and explain a bugï¼Œtry debuggingã€ã€</p>
<img src="https://www.helloimg.com/i/2025/10/21/68f7a934ae5d6.jpg" width="450" height="300" alt="">

<h3 id="Git-Bash"><a href="#Git-Bash" class="headerlink" title="Git Bash"></a>Git Bash</h3><ul>
<li><strong>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…· git</strong>ï¼šæ²¡æœ‰â€œä¸­å¤®æœåŠ¡å™¨â€ï¼Œæ¯ä¸ªäººçš„ç”µè„‘ä¸Šéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼ˆåŒºåˆ«äºé›†ä¸­å¼ç‰ˆæœ¬åº“ç®¡ç†ç³»ç»Ÿå¦‚ svnï¼‰ã€‚</li>
<li><strong>Git Bash</strong>ï¼šGitæä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯è¿è¡Œlinuxå‘½ä»¤ cdã€lsã€touchâ€¦<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list                         <span class="comment"># æŸ¥çœ‹é…ç½®</span></span><br></pre></td></tr></table></figure></li>
<li>é…ç½® Git çš„å…¨å±€ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åœ¨ä½ æäº¤ä»£ç åˆ° Git ä»“åº“æ—¶ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œç”¨äºæ ‡è¯†æäº¤ä»£ç çš„ä½œè€…ä¿¡æ¯ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;xx&quot;</span>        <span class="comment"># é…ç½® user.name caifeng</span></span><br><span class="line">git config --global user.email <span class="string">&quot;xx&quot;</span>       <span class="comment"># é…ç½® user.email 1908454905@qq.com</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h3><ul>
<li>leo710aka @qq.com xxxxxxx</li>
<li>ä½¿ç”¨ SSH å¯†é’¥è¿æ¥ GitHubï¼šå¦‚æœæ²¡æœ‰çš„è¯ï¼Œä½¿ç”¨ï¼Ÿï¼Ÿï¼Ÿä»¥ä¸‹å‘½ä»¤åœ¨æœ¬åœ°<strong>ç”Ÿæˆ SSH å¯†é’¥</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C <span class="string">&quot;your_email@example.com&quot;</span></span><br></pre></td></tr></table></figure>
ç”Ÿæˆ SSH å¯†é’¥åï¼Œå°† <code>~/.ssh/id_rsa.pub</code>ï¼ˆå…¬é’¥ï¼‰çš„å†…å®¹æ·»åŠ åˆ° GitHub è´¦å·çš„ SSH å¯†é’¥è®¾ç½®ä¸­ã€‚</li>
<li>ä½¿ç”¨ HTTPS è®¤è¯è¿æ¥ GitHubï¼šåœ¨ GitHub ä¸Šå…‹éš†ä»“åº“æ—¶ï¼Œä½¿ç”¨ HTTPS é“¾æ¥ï¼Œç„¶ååœ¨æ¨é€æ›´æ”¹æ—¶ï¼Œä¼šæç¤ºè¾“å…¥ GitHub è´¦å·çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ–è€…ä½¿ç”¨ä¸ªäººè®¿é—®ä»¤ç‰Œï¼ˆPersonal Access Tokenï¼‰ä»£æ›¿è´¦å·å¯†ç ã€‚</li>
<li>è®¿é—®ä»¤ç‰Œï¼ˆAccess Tokenï¼‰æ˜¯ä¸€ç§ç”¨äºé€šè¿‡APIè¿›è¡Œèº«ä»½éªŒè¯çš„æ–¹å¼ã€‚<ul>
<li>åˆ›å»ºè®¿é—®ä»¤ç‰Œï¼š1. ç™»å½•åˆ°ä½ çš„GitHubå¸æˆ·ã€‚    2. ç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œé€‰æ‹© â€œSettingsâ€ã€‚    3. åœ¨å·¦ä¾§å¯¼èˆªæ ä¸­é€‰æ‹© â€œDeveloper settingsâ€ã€‚    4. ç‚¹å‡» â€œPersonal access tokensâ€ã€‚    5. ç‚¹å‡» â€œGenerate tokenâ€ã€‚    6. æä¾›ä¸€ä¸ªæè¿°ï¼Œé€‰æ‹©éœ€è¦çš„æƒé™ï¼ˆscopeï¼‰ï¼Œç„¶åç‚¹å‡» â€œGenerate tokenâ€ã€‚    7. å¤åˆ¶ç”Ÿæˆçš„è®¿é—®ä»¤ç‰Œã€‚è¯·æ³¨æ„ï¼Œç”Ÿæˆåä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œå¦‚æœå¿˜è®°äº†ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆã€‚</li>
<li>ä½¿ç”¨è®¿é—®ä»¤ç‰Œï¼šå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä½¿ç”¨ï¼Œä¾‹å¦‚åœ¨å‘½ä»¤è¡Œä¸­ã€åœ¨è„šæœ¬ä¸­æˆ–è€…åœ¨åº”ç”¨ç¨‹åºä¸­ã€‚</li>
<li>Tokenå’ŒSSHå¯†é’¥æ˜¯ä¸¤ç§ä¸åŒçš„èº«ä»½éªŒè¯æœºåˆ¶ï¼Œç”¨äºåœ¨GitHubæˆ–å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­è¿›è¡Œèº«ä»½éªŒè¯ã€‚å­˜åœ¨ä¸€äº›åŒºåˆ«ã€‚<br>  ç”¨é€”ä¸åŒï¼š è®¿é—®ä»¤ç‰Œç”¨äºAPIèº«ä»½éªŒè¯ï¼Œè€ŒSSHå¯†é’¥ç”¨äºè¿œç¨‹ä»“åº“çš„SSHè®¿é—®ã€‚<br>  è·å–æ–¹å¼ä¸åŒï¼š è®¿é—®ä»¤ç‰Œé€šè¿‡GitHubè®¾ç½®ç”Ÿæˆï¼Œè€ŒSSHå¯†é’¥éœ€è¦ç”¨æˆ·ç”Ÿæˆå¹¶æ·»åŠ åˆ°GitHubå¸æˆ·ã€‚<br>  èº«ä»½éªŒè¯æ–¹å¼ä¸åŒï¼š è®¿é—®ä»¤ç‰Œé€šè¿‡HTTPæ ‡å¤´è¿›è¡Œèº«ä»½éªŒè¯ï¼Œè€ŒSSHå¯†é’¥ä½¿ç”¨SSHåè®®è¿›è¡Œæœ¬åœ°èº«ä»½éªŒè¯ã€‚<br>  é€‚ç”¨åœºæ™¯ä¸åŒï¼š è®¿é—®ä»¤ç‰Œé€‚ç”¨äºä¸GitHub APIè¿›è¡Œäº¤äº’ï¼Œè€ŒSSHå¯†é’¥é€‚ç”¨äºç›´æ¥ä½¿ç”¨Gitä¸è¿œç¨‹ä»“åº“è¿›è¡Œäº¤äº’ã€‚</li>
</ul>
</li>
</ul>
<h3 id="Git-æŒ‡ä»¤"><a href="#Git-æŒ‡ä»¤" class="headerlink" title="Git æŒ‡ä»¤"></a>Git æŒ‡ä»¤</h3><img src="https://github.com/leo710aka/bk/blob/main/git.png?raw=true" width="700" height="300" alt="">

<ol>
<li>clone (å…‹éš†):ä»è¿œç¨‹ä»“åº“ä¸­å…‹éš†ä»£ç åˆ°æœ¬åœ°ä»“åº“ã€‚ä¼šä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰åˆ†æ”¯çš„å¼•ç”¨ï¼Œä½†åªä¼šæ£€å‡º[chekout]é»˜è®¤åˆ†æ”¯åˆ°æœ¬åœ°ã€‚</li>
<li>checkout (æ£€å‡º) :ä»æœ¬åœ°ä»“åº“ä¸­æ£€å‡ºä¸€ä¸ªä»“åº“åˆ†æ”¯ç„¶åè¿›è¡Œä¿®è®¢</li>
<li>add (æ·»åŠ ):åœ¨æäº¤å‰å…ˆå°†ä»£ç æäº¤åˆ°æš‚å­˜åŒº</li>
<li>commit (æäº¤): æäº¤åˆ°æœ¬åœ°ä»“åº“ã€‚æœ¬åœ°ä»“åº“ä¸­ä¿å­˜ä¿®æ”¹çš„å„ä¸ªå†å²ç‰ˆæœ¬</li>
<li>fetch (æŠ“å–): ä»è¿œç¨‹åº“æŠ“å–åˆ°æœ¬åœ°ä»“åº“ã€‚è¿™ä¼šæ›´æ–°æ‰€æœ‰è¿œç¨‹åˆ†æ”¯çš„å¼•ç”¨ä¿¡æ¯ï¼Œä½†ä¸ä¼šè‡ªåŠ¨åˆå¹¶è¿™äº›æ›´æ–°åˆ°æœ¬åœ°åˆ†æ”¯ã€‚</li>
<li>merge(åˆå¹¶): å°†æŒ‡å®šçš„åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚</li>
<li>pull(æ‹‰å–) : ç›¸å½“äºfetch+mergeï¼Œè·å–æœ€æ–°çš„è¿œç¨‹æäº¤ï¼Œä½†åªåˆå¹¶å½“å‰æ£€å‡ºçš„æœ¬åœ°åˆ†æ”¯ä¸å…¶å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ï¼Œç„¶åæ”¾åˆ°åˆ°å·¥ä½œåŒºã€‚</li>
<li>push (æ¨é€) :ä¿®æ”¹å®Œæˆåï¼Œéœ€è¦å’Œå›¢é˜Ÿæˆå‘˜å…±äº«ä»£ç æ—¶ï¼Œå°†ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“</li>
</ol>
<h2 id="æœ¬åœ°ä»“åº“"><a href="#æœ¬åœ°ä»“åº“" class="headerlink" title="æœ¬åœ°ä»“åº“"></a>æœ¬åœ°ä»“åº“</h2><ul>
<li>è¦ä½¿ç”¨Gitå¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºæœ¬åœ°ä»“åº“<br>(1) åœ¨ç”µè„‘çš„ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ªç©ºç›®å½•(æ–‡ä»¶å¤¹) ä½œä¸ºæˆ‘ä»¬çš„æœ¬åœ°Gitä»“åº“<br>(2) è¿›å…¥è¿™ä¸ªç›®å½•ä¸­ï¼Œå³é”®æ‰“å¼€Git bash<br>(3) æ‰§è¡Œå‘½ä»¤<code>git init</code><br>(4) å¦‚æœåˆ›å»ºæˆåŠŸåå¯åœ¨æ–‡ä»¶å¤¹ä¸‹çœ‹åˆ°éšè—çš„.gitç›®å½•ã€‚</li>
<li>æ–°å»ºä»“åº“ä¸­çš„æ–‡ä»¶ï¼Œå…¶çŠ¶æ€éƒ½æ˜¯æœªè¢«è·Ÿè¸ªçš„ï¼ˆæœªçº³å…¥ç‰ˆæœ¬ç®¡ç†ï¼‰<br><code>git add &lt;name&gt; / git add .</code>ï¼šè·Ÿè¸ªä¸€ä¸ª&#x2F;æ‰€æœ‰æ–‡ä»¶æˆ–ç›®å½•çš„çŠ¶æ€ï¼Œå°†å…¶çº³å…¥ç‰ˆæœ¬ç®¡ç†ï¼ˆå³æš‚å­˜ï¼Ÿï¼‰ï¼Œè®°å½•å…¶çŠ¶æ€æˆ–å†…å®¹å˜åŒ–<br><code>git rm &lt;name&gt;</code>ï¼šåˆ é™¤æ–‡ä»¶<br><code>git rm --cache &lt;name&gt;</code>ï¼šä¿ç•™æ–‡ä»¶ä½†ä¸å†è·Ÿè¸ª</li>
<li>æ·»åŠ ï¼Œæäº¤ï¼Œæ¨é€ï¼šåœ¨IDEAä¸­ï¼Œç‚¹å‡»Gitæäº¤å¹¶æ¨é€ï¼Œé€‰æ‹©æäº¤ã€æ·»åŠ ä¿¡æ¯ã€ä¿®æ”¹è¿œç¨‹ä»“åº“çš„åˆ†æ”¯(é»˜è®¤<code>origin:main</code>)ï¼Œæ¨é€ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status                                       <span class="comment"># æŸ¥çœ‹å½“å‰çŠ¶æ€ï¼ˆçº¢è‰²çš„å­—ä½“æ˜¾ç¤ºçš„æ˜¯ä¿®æ”¹çš„æ–‡ä»¶</span></span><br><span class="line">$ git add å•ä¸ªæ–‡ä»¶å|é€šé…ç¬¦(. æ·»åŠ æ‰€æœ‰ä¿®æ”¹)          <span class="comment"># æ·»åŠ å·¥ä½œåŒºä»£ç åˆ°æœ¬åœ°gitæš‚å­˜åŒº</span></span><br><span class="line">$ git commit -m <span class="string">&quot;æäº¤çš„ä¿¡æ¯&quot;</span>                        <span class="comment"># æäº¤æš‚å­˜åŒºä»£ç åˆ°æœ¬åœ°gitä»“åº“ï¼ˆç”Ÿæˆä¸€ä¸ªç‰ˆæœ¬ï¼‰</span></span><br><span class="line">$ git <span class="built_in">log</span>                                          <span class="comment"># æŸ¥çœ‹æäº¤æ—¥å¿—ä¿¡æ¯ï¼ˆheadæŒ‡å‘å½“å‰æ“ä½œçš„åˆ†æ”¯ï¼‰</span></span><br><span class="line">$ git push &lt;è¿œç¨‹ä»“åº“å&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;                 <span class="comment"># æ¨é€æœ¬åœ°ä»£ç åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ git push &lt;è¿œç¨‹ä»“åº“å&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;    <span class="comment"># å°†æŒ‡å®šçš„æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„æŒ‡å®šåˆ†æ”¯</span></span><br></pre></td></tr></table></figure>
<img src="https://github.com/leo710aka/bk/blob/main/git2.png?raw=true" width="350" height="300" alt=""></li>
</ul>
<h3 id="è¿œç¨‹ä»“åº“"><a href="#è¿œç¨‹ä»“åº“" class="headerlink" title="è¿œç¨‹ä»“åº“"></a>è¿œç¨‹ä»“åº“</h3><ul>
<li>ä¸Šä¼ æœ¬åœ°ä»“åº“é¡¹ç›®åˆ°è¿œç¨‹<br>æœ¬åœ°git bashç”Ÿæˆsshå…¬é’¥ï¼Œæ·»åŠ åˆ°giteeä¸­ï¼Œæœ¬åœ°éªŒè¯ï¼Œæ·»åŠ è¿œç¨‹ä»“åº“<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa                                       <span class="comment"># ç”Ÿæˆsshå¯†é’¥</span></span><br><span class="line">$ <span class="built_in">cat</span> ~/.ssh/id_rsa.pub                                   <span class="comment"># æŸ¥çœ‹å¯†é’¥</span></span><br><span class="line">$ ssh -T git@gitee.com                                    <span class="comment"># éªŒè¯</span></span><br><span class="line">$ git remote add origin git@gitee.com:leo710aka/test.git  <span class="comment"># æ·»åŠ è¿œç¨‹ä»“åº“åä¸ºorigin(åˆ«å)ï¼ŒåŠ sshåœ°å€</span></span><br><span class="line">$ git remote -v                                           <span class="comment"># æ£€æŸ¥è¿œç¨‹ä»“åº“é…ç½®æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">$ git push origin master  <span class="comment"># å®Œæˆæ·»åŠ ã€æäº¤åï¼Œå°†æœ¬åœ°masteråˆ†æ”¯æ¨é€è‡³è¿œç¨‹originä»“åº“</span></span><br></pre></td></tr></table></figure>
æˆ–è€…ç›´æ¥åœ¨ideaä¸­ï¼Œå¯¹ä¸€ä¸ªé¡¹ç›®æ–‡ä»¶æ·»åŠ ã€æäº¤åï¼Œç›´æ¥åœ¨ideaä¸­<code>git remote</code>ï¼Œä½¿ç”¨githubè´¦å·å¯†ç è¿›è¡Œè¿œç¨‹ä»“åº“çš„è¿æ¥ï¼Œç„¶åæ¨é€ã€‚ï¼ˆè¿æ¥è¿œç¨‹ä»“åº“ï¼Œè¦ä¹ˆä½¿ç”¨sshå¯†é’¥ï¼Œè¦ä¹ˆç”¨githubè´¦å·å¯†ç ã€‚ï¼‰</li>
<li>æ·»åŠ è¿œç¨‹ä»“åº“é¡¹ç›®åˆ°æœ¬åœ°<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> &lt;è¿œç¨‹ä»“åº“åœ°å€&gt;                 <span class="comment"># å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°ï¼ˆé»˜è®¤åˆ†æ”¯masterï¼‰</span></span><br><span class="line">$ git <span class="built_in">clone</span> -b &lt;åˆ†æ”¯å&gt; &lt;è¿œç¨‹ä»“åº“åœ°å€&gt;      <span class="comment"># å…‹éš†æŒ‡å®šåˆ†æ”¯ï¼ˆå¦‚developï¼‰</span></span><br></pre></td></tr></table></figure>
ä¹Ÿå¯ä»¥å…ˆä»è¿œç¨‹ä»“åº“<code>git clone</code>ä¸‹æ¥ä¸€ä¸ªé¡¹ç›®ï¼Œå®Œæˆä¿®æ”¹åå¯¹é¡¹ç›®æ–‡ä»¶æ·»åŠ ã€æäº¤ï¼Œåœ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“æ—¶ï¼Œå†è¿›è¡Œ <code>sshå¯†é’¥/githubè´¦å·å¯†ç </code> çš„éªŒè¯ã€‚</li>
</ul>
<h2 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h2><ul>
<li>å®é™…å¼€å‘æ–°åŠŸèƒ½ï¼Œæ˜¯åœ¨developåˆ†æ”¯ä¸Šåˆ›å»ºfeatureåˆ†æ”¯ï¼Œå®Œæˆååˆå¹¶åˆ°<code>developåˆ†æ”¯</code>(éƒ¨é—¨å¼€å‘åˆ†æ”¯)ä¸Šï¼Œç»æµ‹è¯•ï¼Œæœ€ååˆå¹¶åˆ°<code>masteråˆ†æ”¯</code>(çº¿ä¸Šåˆ†æ”¯ï¼Œä¸»åˆ†æ”¯ï¼Œé¡¹ç›®æ­£åœ¨ä¸Šçº¿çš„åˆ†æ”¯)<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git branch                  <span class="comment"># æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰çš„åˆ†æ”¯ï¼Œå½“å‰æ¿€æ´»çš„åˆ†æ”¯ä¼šåœ¨åˆ—è¡¨ä¸­ä»¥æ˜Ÿå·ï¼ˆ*ï¼‰æ ‡è¯†ã€‚</span></span><br><span class="line">$ git branch -r               <span class="comment"># æŸ¥çœ‹è¿œç¨‹ä»“åº“çš„åˆ†æ”¯</span></span><br><span class="line">$ git branch -a               <span class="comment"># æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ŒåŒ…æ‹¬æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ã€‚</span></span><br><span class="line">$ git branch caifeng          <span class="comment"># ä»å½“å‰åˆ†æ”¯ä¸Šæ–°å»ºåˆ†æ”¯</span></span><br><span class="line">$ git checkout caifeng        <span class="comment"># åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">$ git checkout -b caifeng     <span class="comment"># åˆ›å»ºï¼ˆè‹¥ä¸å­˜åœ¨ï¼‰å¹¶åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">$ git checkout -d caifeng     <span class="comment"># åˆ é™¤åˆ†æ”¯ï¼ˆ-D å¼ºåˆ¶åˆ é™¤ï¼‰</span></span><br><span class="line">$ git merge &lt;åˆ†æ”¯å&gt;           <span class="comment"># å…ˆåˆ‡æ¢å›å¦‚masteråˆ†æ”¯ä¸Šï¼Œå°†å…¶ä»–åˆ†æ”¯ä¸Šçš„æäº¤åˆå¹¶åˆ°masterä¸Š</span></span><br></pre></td></tr></table></figure></li>
<li>åˆ†æ”¯åˆå¹¶<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git merge [remote name] [branch name]   </span><br><span class="line">$ git <span class="built_in">log</span> --merge                       <span class="comment"># æ˜¾ç¤ºåˆå¹¶å†²çªçš„æäº¤æ—¥å¿—</span></span><br><span class="line">$ git <span class="built_in">log</span> --graph --oneline --all       <span class="comment"># å¯è§†åŒ–åˆ†æ”¯å’Œåˆå¹¶å†å²ï¼Œä»¥ç®€åŒ–ç†è§£åˆå¹¶çš„æƒ…å†µ</span></span><br></pre></td></tr></table></figure></li>
<li>æ›´æ–°é¡¹ç›®<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch [remote name] [branch name]   <span class="comment"># æŠ“å–ä»“åº“é‡Œçš„æ›´æ–°åˆ°æœ¬åœ°ï¼Œä¸ä¼šè¿›è¡Œåˆå¹¶</span></span><br><span class="line">$ git pull [remote name] [branch name]    <span class="comment"># æ‹‰å–è¿œç«¯ä»“åº“çš„ä¿®æ”¹æ‹‰åˆ°æœ¬åœ°å¹¶è‡ªåŠ¨è¿›è¡Œåˆå¹¶ï¼Œç­‰åŒäºfetch+merge</span></span><br></pre></td></tr></table></figure>
åœ¨ä¸€æ®µæ—¶é—´ï¼ŒAã€Bç”¨æˆ·ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¸”ä¿®æ”¹äº†åŒä¸€è¡Œä½ç½®çš„ä»£ç ï¼Œæ­¤æ—¶ä¼šå‘ç”Ÿåˆå¹¶å†²çªAç”¨æˆ·åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç åä¼˜å…ˆæ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œæ­¤æ—¶Bç”¨æˆ·åœ¨æœ¬åœ°ä¿®è®¢ä»£ç ï¼Œæäº¤åˆ°æœ¬åœ°ä»“åº“åï¼Œä¹Ÿéœ€è¦æ¨é€åˆ°ç©ç¨‹ä»“åº“ï¼Œæ­¤æ—¶Bç”¨æˆ·æ™šäºAç”¨æˆ·ï¼Œæ•…éœ€è¦<strong>å…ˆæ‹‰å–è¿œç¨‹ä»“åº“çš„æäº¤ï¼Œç»è¿‡åˆå¹¶åæ‰èƒ½æ¨é€åˆ°è¿œç«¯åˆ†æ”¯</strong>ã€‚<br>æˆ–ç›´æ¥åœ¨IDEAé‡Œé¢é€‰æ‹©åˆ†æ”¯pullï¼ˆGitæ‹‰å–ï¼‰ï¼Œå…‹éš†&#x2F;æ›´æ–°åè®°å¾—ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸ºæµ‹è¯•&#x2F;æœ¬åœ°ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</li>
<li>å†²çªï¼šå½“ä¸¤ä¸ªåˆ†æ”¯ä¸Šå¯¹æ–‡ä»¶çš„ä¿®æ”¹å¯èƒ½ä¼šå­˜åœ¨å†²çªï¼Œä¾‹å¦‚åŒæ—¶ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€è¡Œï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨è§£å†³å†²çªï¼Œè§£å†³æ­¥éª¤ã€ã€<br>1.å¤„ç†æ–‡ä»¶ä¸­å†²çªçš„åœ°æ–¹<br>2.å°†è§£å†³å®Œå†²çªçš„æ–‡ä»¶åŠ å…¥æš‚å­˜åŒº(add)<br>3,æäº¤åˆ°ä»“åº“(commit)<img src="https://github.com/leo710aka/bk/blob/main/git1.png?raw=true" width="500" height="300" alt=""></li>
</ul>
<h4 id="ç»å…¸Gitæµæ¨¡å‹"><a href="#ç»å…¸Gitæµæ¨¡å‹" class="headerlink" title="ç»å…¸Gitæµæ¨¡å‹"></a>ç»å…¸Gitæµæ¨¡å‹</h4><img src="https://github.com/leo710aka/bk/blob/main/git4.png?raw=true" width="500" height="300" alt="">


<h3 id="å…¶ä»–æ“ä½œ"><a href="#å…¶ä»–æ“ä½œ" class="headerlink" title="å…¶ä»–æ“ä½œ"></a>å…¶ä»–æ“ä½œ</h3><ul>
<li>è´®è—ä»£ç ï¼šå½“å‰ä»£ç æ²¡å†™å®Œï¼Œè¦åˆ‡æ¢åˆ†æ”¯æ—¶ï¼Œå¿…é¡»å…ˆæäº¤å½“å‰ä»£ç æˆ–è´®è—<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash    </span><br></pre></td></tr></table></figure></li>
<li>ç‰ˆæœ¬å›é€€<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard &lt;æäº¤<span class="built_in">id</span>&gt;    <span class="comment"># é€šè¿‡æäº¤idåˆ‡æ¢ç‰ˆæœ¬</span></span><br><span class="line">$ git reflog                   <span class="comment"># æŸ¥çœ‹å†å²æ“ä½œï¼ˆå·²æ¸…é™¤æäº¤æ—¥å¿—ã€ç‰ˆæœ¬åˆ‡æ¢æ—¥å¿—ã€‚ã€‚ã€‚</span></span><br></pre></td></tr></table></figure></li>
<li>åˆ†æ”¯å˜åŸºï¼šå°†ä¸€ç³»åˆ—çš„æäº¤ä»ä¸€ä¸ªåˆ†æ”¯ä¸Š â€œç§»åŠ¨â€ åˆ°å¦ä¸€ä¸ªåˆ†æ”¯çš„èµ·ç‚¹ï¼Œå¹¶å°†å®ƒä»¬é‡æ–°åº”ç”¨ï¼ˆæˆ–é‡æ–°æ’­æ”¾ï¼‰åˆ°ç›®æ ‡åˆ†æ”¯ä¸Šã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase   <span class="comment"># å¯ä»¥è®©æäº¤å†å²æ›´çº¿æ€§ã€æ›´ç®€æ´</span></span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/12/Git/" data-id="cmjzvj9m40002hgv50sascyp5" data-title="Git" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2046/12/">December 2046</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2046/08/">August 2046</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2026/01/">January 2026</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/12/">December 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2046/12/30/nice-photo/">Nice Photo</a>
          </li>
        
          <li>
            <a href="/2046/08/27/Guitar/">Guitar ğŸ¸</a>
          </li>
        
          <li>
            <a href="/2026/01/10/Milvus/">Milvus</a>
          </li>
        
          <li>
            <a href="/2025/12/22/Agent/">Agent</a>
          </li>
        
          <li>
            <a href="/2025/12/08/MongoDB/">MongoDB</a>
          </li>
        
          <li>
            <a href="/2024/10/22/Docker_Kubernetes/">Kubernetes</a>
          </li>
        
          <li>
            <a href="/2024/09/22/InfluxDB/">InfluxDB</a>
          </li>
        
          <li>
            <a href="/2024/09/22/Golang/">Golang</a>
          </li>
        
          <li>
            <a href="/2024/08/18/%E7%90%86%E8%B4%A2/">Lic Ai</a>
          </li>
        
          <li>
            <a href="/2024/07/07/%E7%BE%8E%E7%9A%84Midea/">ç¾ çš„ Midea</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2026 fengcai<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>