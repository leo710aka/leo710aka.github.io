<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>骏 伯 网 络 | Qué miras Bobo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="使命：让移动互联网营销简单高效 价值观：创造价值，分享价值 愿景：做最受信赖的移动互联网营销服务商    系统开发指南：http:&#x2F;&#x2F;doc.junbo.top&#x2F;pages&#x2F;viewpage.action?pageId&#x3D;5168806  配置 Gradle 的环境变量：  找到idea的settings中搜索gradle，找到对应自己电脑环境的gradle-home目录 D:&#x2F;gradl">
<meta property="og:type" content="article">
<meta property="og:title" content="骏 伯 网 络">
<meta property="og:url" content="http://example.com/2024/01/04/%E9%AA%8F%E4%BC%AF/index.html">
<meta property="og:site_name" content="Qué miras Bobo">
<meta property="og:description" content="使命：让移动互联网营销简单高效 价值观：创造价值，分享价值 愿景：做最受信赖的移动互联网营销服务商    系统开发指南：http:&#x2F;&#x2F;doc.junbo.top&#x2F;pages&#x2F;viewpage.action?pageId&#x3D;5168806  配置 Gradle 的环境变量：  找到idea的settings中搜索gradle，找到对应自己电脑环境的gradle-home目录 D:&#x2F;gradl">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-01-04T02:58:11.000Z">
<meta property="article:modified_time" content="2024-05-21T17:36:16.331Z">
<meta property="article:author" content="fengcai">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Qué miras Bobo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="https://github.com/leo710aka/bk/blob/main/DT1.jpg?raw=true">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Qué miras Bobo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-骏伯" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/01/04/%E9%AA%8F%E4%BC%AF/" class="article-date">
  <time class="dt-published" datetime="2024-01-04T02:58:11.000Z" itemprop="datePublished">2024-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      骏 伯 网 络
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>使命</strong>：让移动互联网营销简单高效</p>
<p><strong>价值观</strong>：创造价值，分享价值</p>
<p><strong>愿景</strong>：做最受信赖的移动互联网营销服务商</p>
<hr>

<ul>
<li><p>系统开发指南：<a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=5168806">http://doc.junbo.top/pages/viewpage.action?pageId=5168806</a></p>
<ul>
<li>配置 Gradle 的环境变量：<br>  找到idea的settings中搜索gradle，找到对应自己电脑环境的gradle-home目录 D:&#x2F;gradle-6.0<br>  在 D:&#x2F;gradle-6.0&#x2F;init.d 目录下新建一个文件名为init.gradle，编辑内容为（固定写法）：  <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    nexus = <span class="string">&#x27;http://nexus.jetmobo.com&#x27;</span></span><br><span class="line">    username = <span class="string">&#x27;这是下载包权限用户：找运维提供&#x27;</span></span><br><span class="line">    password = <span class="string">&#x27;这是下载包权限密码：找运维提供&#x27;</span></span><br><span class="line">    upload_username = <span class="string">&#x27;这是上传包权限用户：找运维提供&#x27;</span></span><br><span class="line">    upload_password = <span class="string">&#x27;这是上传包权限密码：找运维提供&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>MySQL使用、Redis使用、RabbitMQ使用：在application-xxx.yml配置连接信息；</li>
<li>服务请求流程：Service层直接返回BO，不允许返回DO和Response对象。如果有失败信息需要返回，通过异常往上抛，由调用方捕获异常进行处理。</li>
</ul>
</li>
<li><p>系统开发流程：<a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=5158235">http://doc.junbo.top/pages/viewpage.action?pageId=5158235</a></p>
<ul>
<li>项目结构 junbo-xxx<br>  xxx-soa：注册中心提供api接口服务，供其他服务调用<br>  –xxx-api：接口命名，参数定义。<br>  –xxx-service：核心实现与数据库交互，业务流程逻辑处理。<br>  xxx-web：用于web端提供http接口。<br>  xxx-frontend：前端工程。</li>
<li>区分环境配置：项目中除了基础公共配置外，按不同的环境，区分不同的配置。不同环境的代码与配置无需做调整，只需要在服务启动时增加Dspring.profiles.active &#x3D; {域标识}配置项，通过调整启动参数来适配不同环境。<br>  开发环境 dev，测试环境 test，生产环境 prod</li>
<li>接口定义：通常系统开发中，我们需要接口定义写到接口管理系统 <a target="_blank" rel="noopener" href="http://rap.gzjunbo.net/">http://rap.gzjunbo.net/</a> 中。</li>
</ul>
</li>
<li><p>后端开发规范：<a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=28431534">http://doc.junbo.top/pages/viewpage.action?pageId=28431534</a></p>
<ul>
<li>JAVA 开发规范的要点总结:<ol>
<li>命名规范:采用驼峰命名法(例如:userName)和“下划线命名法”(例如:user_name)。类名使用大驼峰命名法(例如:UserName),方法名、变量名使用小驼峰命名法(例如:getUserName)。常量全部大写,单词间下划线隔开(例如:MAX_COUNT)。</li>
<li>代码格式规范:左大括号前不换行,左大括号后换行。右大括号前换行,若后有else等则不换行。使用4个空格进行缩进。单行字符数限120,方法限200行,类限1000行。</li>
<li>分层规范:分为展现层、接口层、业务层、通用层、数据层。上层可依赖下层,下层不能依赖上层。对外提供接口的服务必为接口,内部实现用Impl结尾。</li>
<li>异常规范:自定义分层异常,继承基础异常。每层只抛本层异常,不直接抛下层异常。异常信息包含错误码和消息。禁止使用普通Exception。</li>
<li>日志规范:使用SLF4J门面日志,禁用println。方法入口和出口加日志。日志内容包括现场信息和异常栈。生产禁debug日志,有选择info日志。按天滚动,单文件100M,最多保留10个。</li>
<li>缓存规范:推荐Redis。键名小写:[应用名]:[模块名]:[内容名]。缓存操作失败不能影响业务流程。</li>
<li>消息队列规范:队列名小写:[应用名].[模块名].[队列名]。应用名在开发部门唯一,防止冲突。</li>
</ol>
</li>
<li>骏伯微服务开发框架<ul>
<li>持续集成管理规范 <a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=1638984">http://doc.junbo.top/pages/viewpage.action?pageId=1638984</a><br>  产品研发中心在工程实践中，引入Jacoco&#x2F;SonarQube检查，Jmeter自动化测试，Jenkins持续集成，容器集群部署等等，需要对原来的研发流程进行标准规范化管理，以适配以上相关插件与部署，本文档从“代码版本管理规范”，“项目工程管理规范”，“Maven仓库管理规范”三个方面的规范进行描述，更好地指导开发人员规范化开发。<ul>
<li>代码版本管理规范<br>  行为规范（强制）：<ol>
<li>项目初期需要master拉出develop开发分支作为开发线分支</li>
<li>每天每人上班前须develop拉取最新代码合并</li>
<li>每天每人下班前须保证把自己的功能开发完成的代码提交到develop</li>
<li>代码管理员每工作日23点之前从develop合并到master主干，确保代码编译通过</li>
<li>以master代码作为测试线&#x2F;生产线部署准则</li>
<li>当线上出现bug需修复，需从git最新版本中拉取源码进行更改，确保与maven库版本一致，验收后需合并到master&#x2F;develop</li>
<li>代码管理员需每个迭代开始初更新service&#x2F;web的版本号（迭代期间如有临时升级，版本号与PO沟通需提升并对应工程进行版本修改），与PO定义一致</li>
</ol>
</li>
<li>项目工程管理规范<ol>
<li>项目结构：标准的gradle结构 -src&#x2F;main，-src&#x2F;test，-build.gradle<br>  junbo-xxx：xxx为业务项目相关命名，<br>  xxx-soa：注册中心提供 api 接口服务，供其他服务调用<br>  –xxx-api：微服务接口命名，参数定义<br>  –xxx-service：核心实现与数据库交互，业务流程逻辑处理<br>  xxx-web：用于 web 端提供 http 接口<br>  –xxx-h5：落地页相关接口<br>  –xxx-admin：管理后台相关接口<br>  xxx-frontend：前端工程<br>  –xxx-h5：落地页<br>  –xxx-admin：管理后台</li>
<li>Soa工程结构<ul>
<li>xxx-soa：注册中心提供 api 接口服务，业务逻辑实现</li>
<li>–xxx-api：接口命名，参数定义</li>
<li>–xxx-service：核心实现与数据库交互，业务流程逻辑处理<ul>
<li>–service : 业务逻辑接口层</li>
</ul>
</li>
<li>–service&#x2F;entity：数据表映射类<ul>
<li>–service&#x2F;impl：业务逻辑接口实现层</li>
</ul>
</li>
<li>–service&#x2F;dao : 数据层</li>
<li>–service&#x2F;config : 配置类</li>
<li>–service&#x2F;handler : 异常处理器</li>
<li>–service&#x2F;uitl: 工具包</li>
<li>–test : 测试用例（核心流程均需编写测试用例）<ul>
<li>–resources：配置文件，静态资源等<ul>
<li>application.yml：总配置文件，数据库，MQ，Redis等</li>
<li>application-dev.yml：研发线配置</li>
<li>application-test.yml：测试线配置</li>
<li>application-prod.yml：正式线配置</li>
<li>–resources&#x2F;config : log4j配置</li>
<li>–resources&#x2F;generator : 代码自动生成配置</li>
<li>–resources&#x2F;mappers : mybatis封装配置</li>
<li>–resources&#x2F;public : 静态资源</li>
<li>–resources&#x2F;sql: 线上每迭代需执行的sql脚本写在update.sql，并新增迭代结束日期的sql文件也写进需执行脚本，如：yyyyHHdd.sql 作为历史备份</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Web工程结构<ul>
<li>xxx-web：用于 web 端提供 http 接口</li>
<li>–xxx-h5：落地页相关接口</li>
<li>–xxx-admin：管理后台相关接口</li>
<li>–xxx.web：提供落地页接口，调用soa-api（此处仅调用没有业务逻辑）</li>
<li>–xxx.handler : 异常处理器<ul>
<li>–resources：配置文件，静态资源等</li>
<li>application.yml：总配置文件，单点配置，接口权限等</li>
<li>application-dev.yml：研发线配置</li>
<li>application-test.yml：测试线配置</li>
<li>application-prod.yml：正式线配置</li>
<li>–resources&#x2F;config : log4j配置</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>Maven仓库管理规范</li>
</ul>
</li>
<li>微服务系统开发规范 <a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=5145055">http://doc.junbo.top/pages/viewpage.action?pageId=5145055</a></li>
<li>基于容器化的微服务开发规范 <a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=5158228">http://doc.junbo.top/pages/viewpage.action?pageId=5158228</a></li>
</ul>
</li>
<li>应用日志规范<ul>
<li>日志的作用：一般在程序上线之后，一旦发生异常，第一件事就是要弄清楚当时发生了什么。用户当时做了什么操作，环境有无影响，数据有什么变化，是不是反复发生等，然后再进一步的确定大致是哪个方面的问题。确定是程序的问题之后再交由开发人员去重现、研究、提出解决方案。这时，日志就给我们提供了第一手的资料。</li>
<li>日志级别：<br>  TRACE：用于调试目的-包括最详细的信息。<br>  DEBUG：用于调试目的。主要是开发是阶段使用，使用场景通常是开发和测试阶段对于一些关键操作是否执行的输出，开发人员可以把各种内容详细记录到Debug信息，尽可能的在开阶段发现和排查问题。<br>  INFO：发生了一件正常的、意料之中的、相关的事件。包含了关键的日志信息，主要作用是保留工作期间的信息，开发人员可以保留关键日志便于运维提取关键逻辑的执行日志信息，因为INFO日志会在线上日志控制台实时打印，所以需要保留最为关键的信息，建议在完成之后本地调整为INFO级别测试。<br>  WARN：发生了一些意想不到的事情（尽管不一定是错误），但需要密切关注。<br>  ERROR：应用程序发生错误。遇到严重影响业务执行的场景就需要打印ERROR日志，如果影响不是特别大，只是需要关注问题的情况则打印WARN 级别日志。</li>
<li>日志初始化  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SomeClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(SomeClass.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>日志示例  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOGGER.info(<span class="string">&quot;userInfo is &#123;&#125;&quot;</span>, user)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>代码版本管理规范 <a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=18610685">http://doc.junbo.top/pages/viewpage.action?pageId=18610685</a><br>  目的:通过制定版本管理规范,提高代码质量和研发效率,帮助团队有序协同。<ol>
<li>分支管理:有release、master、develop、develop-xxx、develop-teamname、feature-xxx、bugfix-xxx等分支。各分支的用途和命名规范在文中有详细说明。</li>
<li>发布版本标签:用于记录每次发布的版本信息,命名为servicename-version,如salecard-service-V3.2.5。</li>
<li>角色定义:开发人员、测试人员和项目技术负责人。各角色的职责在文中有说明。</li>
<li>工作流程:包括正常迭代开发、特性功能开发、Bugfix开发和团队协作开发等流程。各流程的步骤在文中有详细描述。</li>
<li>分支保护:需要对关键分支如release分支进行保护,限制可推送和合并权限的人员。具体设置在文中有说明。</li>
<li>代码冲突:因不同分支对同一文件修改导致,需要手动解决后再推送对应分支。<br>  其他规定:如分支合并时需要提供自测证明等。<br>  所以总体来说,这篇规范确定了微服务研发体系的版本管理流程、分支策略、发布规则等,旨在规范研发行为,提高研发质量和效率。各研发成员需严格遵循此规范进行版本管理和软件开发。</li>
</ol>
</li>
<li>Redis开发规范<ul>
<li>键值命名<br>  【强制】key统一使用小写字母及数字命名，英文冒号作为分割符，[应用名称]:[模块名称]:[缓存内容名称]，如果还需要添加细分命名，可通过添加英文冒号分割符，继续增加名称。应用名称全局规划，是全局唯一的，防止缓存键值冲突。<br>  正例：salecard:order:info:[orderId]。</li>
<li>缓存值设计<br>  【强制】禁止使用bigkey，防止带宽流量占用过大、产生慢查询。bigkey 包含两种情况：键值对的 value 很大，比如 value 保存了 2MB 的 string 数据；键值对的 value 是集合类型，元素很多，比如保存了 5 万个元素的 List 集合。string类型控制在10KB以内，hash、list、set、zset元素个数不要超过5000。<br>  【强制】避免使用热点 key，热点 key 会导致数据倾斜，单节点压力过大。热点 Key 是指访问频率较高的 key。当大量的请求集中在一个或少数几个热点 Key 上时，会导致这些 Key 所在的 Redis 节点的 CPU、内存和网络带宽等资源被大量消耗，影响 Redis 集群的整体性能和稳定性，在业务实现逻辑将热点 key 打散。</li>
<li>过期时间设计<br>  【强制】控制 key 的生命周期，一定要设置 key 的过期时间，避免无访问的 key 一直占用内存。<br>  【推荐】key设置过期时间时，将set 和 expire 命令合并成 setex 命令，减少服务端写压力。<br>  【推荐】将 key 的过期时间打散，避免 key 集中过期。key值设置过短容易造成缓存穿透，提前评估数据的生命周期，合理设置数据过期时间和失效策略。</li>
<li>业务使用规约<br>  【强制】Redis不能当作DB来使用，缓存操作失败后，不能影响业务流程。读取缓存数据失败后，保证可以从数据库读取对应的数据。确定场景，是缓存（Cache）还是存储型，Cache的使用原则是：“无它也可，有它更强“，永远不要强依赖Cache，它会丢，也会被淘汰。<br>  【推荐】避免设置低读超时（200ms以下read timeout）和紧密重试，对超时和慢响应做容错处理。</li>
<li>命令使用规约<br>  【强制】禁止使用keys命令，避免使用 hgetall、smembers、lrange(0 -1) 等命令。在获取 key 下的多个元素时，使用相应的 scan 命令，一次获取少量（不超过200）元素，分多次获取。<br>  【强制】禁止使用flushall、flushdb命令，可通过redis的rename机制禁掉命令。<br>  【推荐】不使用复杂度过高的命令。避免执行例如 SORT、SINTER、SINTERSTORE、ZUNIONSTORE、ZINTERSTORE 等聚合类命令，Redis 是单线程模型处理请求，在执行复杂度过高的命令时，会导致后面请求发生排队。对于这种聚合类操作，建议放到客户端来执行，不要让 Redis 承担太多的计算工作。<br>  【推荐】删除集合类型 key 时，不要用 del 命令，使用 unlink 命令。使用 unlink 命令可以异步删除 key，不会对 redis 主线程产生影响。</li>
</ul>
</li>
<li>数据库规约 <a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=28431519">http://doc.junbo.top/pages/viewpage.action?pageId=28431519</a></li>
</ul>
</li>
<li><p>敏捷实践指南：<a target="_blank" rel="noopener" href="http://doc.junbo.top/pages/viewpage.action?pageId=12830307">http://doc.junbo.top/pages/viewpage.action?pageId=12830307</a><br>敏捷开发：一种应对快速变化需求的一种软件开发能力。相对于”非敏捷”，更强调程序员团队与业务专家之间的紧密协作、面对面的沟通（认为比书面的文档更有效）、频繁交付新的软件版本、紧凑而自我组织型的团队、能够很好地适应需求变化的代码编写和团队组织方法，也更注重做为软件开发中人的作用。</p>
</li>
</ul>
<hr>

<h2 id="学习-junbo-demo"><a href="#学习-junbo-demo" class="headerlink" title="学习 junbo-demo"></a>学习 junbo-demo</h2><ul>
<li>开发工具：IDEA 2022.3.3<br>常用插件：阿里巴巴编码规约（Alibaba Java Coding Guidelines），File-&gt;Settings-&gt;Plugins-&gt;Browse repositories-&gt;输入插件的英文名称-&gt;点击该插件-&gt;install<br>开发环境：jdk1.8.0_202，Gradle 6.0，Nexus仓库 <a target="_blank" rel="noopener" href="http://nexus.jetmobo.com/">http://nexus.jetmobo.com</a><br>项目结构：<br>junbo-demo&#x2F;<br>├── demo-frontend&#x2F;                    # 前端工程<br>│   ├── demo-admin&#x2F;                   # 后台管理前端工程<br>│   └── …<br>├── demo-soa&#x2F;                         # 服务化工程<br>│   ├── demo-api&#x2F;                     # 接口服务<br>│   ├── demo-service&#x2F;                 # 业务服务<br>│   └── build.gradle                  # Gradle编译配置<br>├── demo-web&#x2F;<br>│   ├── demo-admin&#x2F;                   # 后台管理后端工程<br>│   ├── demo-h5&#x2F;                      # 业务网关服务工程<br>│   └── build.gradle                  # Gradle编译配置<br>├── build.gradle                      # Gradle编译配置<br>├── dependency.gradle                 # Gradle常量配置<br>├── settings.gradle                   # Gradle工程结构配置<br>└── …</li>
<li>Gradle配置：设置-&gt;构建工具-&gt;Gradle-&gt;指定位置-&gt;D:&#x2F;gradle-6.0<br>配置Gradle环境变量：在D:&#x2F;gradle-6.0&#x2F;init.d目录下新建一个文件名为：init.gradle，配置文件内容编辑为（固定写法）<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    nexus = <span class="string">&#x27;http://nexus.jetmobo.com&#x27;</span></span><br><span class="line">    username = <span class="string">&#x27;这是下载包权限用户：找运维提供&#x27;</span></span><br><span class="line">    password = <span class="string">&#x27;这是下载包权限密码：找运维提供&#x27;</span></span><br><span class="line">    upload_username = <span class="string">&#x27;这是上传包权限用户：找运维提供&#x27;</span></span><br><span class="line">    upload_password = <span class="string">&#x27;这是上传包权限密码：找运维提供&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>应用配置<ul>
<li>一般配置  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">8080</span> <span class="comment"># 应用端口</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="comment"># dataSource druid configuration</span></span><br><span class="line">    <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">druid:</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.218.194/TestDB?useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;rewriteBatchedStatements=true</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="number">90</span><span class="string">-iopjklnm,</span></span><br><span class="line">        <span class="comment"># ...   </span></span><br><span class="line">    <span class="comment"># redis配置</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">        <span class="attr">database:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">timeout:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">sentinel:</span></span><br><span class="line">        <span class="attr">master:</span> <span class="string">mymaster</span></span><br><span class="line">        <span class="attr">nodes:</span> <span class="number">192.168</span><span class="number">.218</span><span class="number">.222</span><span class="string">:26379,192.168.218.222:26389,192.168.218.222:26399</span></span><br><span class="line">        <span class="comment"># ...  </span></span><br><span class="line">    <span class="attr">other-redis:</span></span><br><span class="line">        <span class="comment"># ...  </span></span><br><span class="line">    <span class="comment"># rabbitmq配置</span></span><br><span class="line">    <span class="attr">rabbitmq:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.218</span><span class="number">.245</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">gzjunbo</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">junbo@888</span></span><br><span class="line">        <span class="attr">publisher-confirms:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">virtual-host:</span> <span class="string">/</span></span><br></pre></td></tr></table></figure></li>
<li>junbo 自定义配置  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">junbo:</span></span><br><span class="line">    <span class="comment"># actuator-filter: false # 是否需要配置监控端点权限拦截</span></span><br><span class="line">    <span class="attr">use-error:</span> <span class="literal">false</span> <span class="comment"># 是否使用统一错误页面输出，默认为false，soa项目配置为false，web项目如果没有自定义配置，配置为true。</span></span><br><span class="line">    <span class="attr">use-status:</span> <span class="literal">true</span> <span class="comment"># 是否使用统一可用性检查入口/status.html，默认为true，项目如果没有自定义配置，需要设置为true。</span></span><br><span class="line">    <span class="attr">use-rest-response:</span> <span class="literal">false</span> <span class="comment"># 是否使用RESTful响应，默认为true，soa项目配置为false，web项目如果没有自定义配置，配置为true。</span></span><br><span class="line">    <span class="attr">use-business-error-encoder:</span> <span class="literal">true</span> <span class="comment"># 是否使用异常转换rest对象，默认为false，web项目配置为false，soa项目如果没有自定义配置，配置为true。</span></span><br><span class="line">    <span class="attr">use-business-error-decoder:</span> <span class="literal">true</span> <span class="comment"># 是否使用rest转换异常对象，默认为true，项目如果没有自定义配置，需要配置为true。</span></span><br></pre></td></tr></table></figure></li>
<li>配置Prometheues监控端点  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 暴露当前系统actuator明细信息，用于SpringBootAdmin监控</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line"><span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">    <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&#x27;*&#x27;</span></span><br><span class="line"><span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">    <span class="attr">show-details:</span> <span class="string">ALWAYS</span></span><br><span class="line"><span class="comment"># 此监控端点配置用于Prometheues监控。</span></span><br><span class="line"><span class="attr">metrics:</span></span><br><span class="line">    <span class="attr">distribution:</span></span><br><span class="line">    <span class="string">percentiles-histogram[http.server.requests]:</span> <span class="literal">true</span></span><br><span class="line">    <span class="string">maximum-expected-value[http.server.requests]:</span> <span class="number">10000</span> <span class="comment">#预期最大值</span></span><br><span class="line">    <span class="string">minimum-expected-value[http.server.requests]:</span> <span class="number">1</span> <span class="comment">#预期最小值</span></span><br></pre></td></tr></table></figure></li>
<li>配置注册中心：application-xxx.yml配置eureka注册信息，通过hostname注册服务。  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">instance:</span></span><br><span class="line">    <span class="attr">instance-id:</span> <span class="string">$&#123;spring.cloud.client.ip-address&#125;:$&#123;server.port&#125;</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">$&#123;spring.application.name&#125;.$&#123;spring.profiles.active&#125;.svc</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>测试环境域名须加上“test-”前缀。规范持续集成方案,采用Jenkins。</li>
<li>发布时严格实施多机部署。给出Tomcat、JVM等部署参数的建议配置。</li>
<li>要求提供Dockerfile以实现容器化。包括配置监控端点、应用端口、服务注册、部署脚本等内容。</li>
<li>通过junbo-demo可以学习到<br>1、springboot微服务架构<br>2、熟悉api、model、service、dao、mapper层的调用关系<br>3、掌握junboGenerator的生成代码步骤，mybatis的增删改查的实现<br>4、掌握springboot中mysql、redis、MQ的操作方法<br>5、掌握单元测试的编写</li>
</ul>
<hr>

<h2 id="蔡枫-的2023年终总结"><a href="#蔡枫-的2023年终总结" class="headerlink" title="蔡枫 的2023年终总结"></a>蔡枫 的2023年终总结</h2><ul>
<li><p>回顾2023，你印象最深刻的2-3个 高光时刻 是什么？</p>
<ol>
<li><p>愿意去了解，理解新事物的时候，从电影和音乐等感受乐趣，共情与哲思</p>
</li>
<li><p>准备一年拿到奖学金，重修两门课程高分通过</p>
</li>
<li><p>通过面试，进入骏伯，一定多向同事们学习</p>
</li>
</ol>
</li>
<li><p>回顾2023，你印象最深刻的2-3个 艰难时刻 是什么？</p>
<ol>
<li><p>放弃考研和出国，感觉是当下比较好的决定</p>
</li>
<li><p>想到家里情况是多么窘迫的时刻</p>
</li>
<li><p>发现脱发症状的时候</p>
</li>
</ol>
</li>
<li><p>目标A：准备就业</p>
<p>  大概是八月份，打消了考研以及留学的念头后，由于有Java开发的经验，自然往这个方向准备就业。<br>  要学习的内容特别多，原以为有基础便能用三个月左右准备好，事实上即使每天都在尽力填充自己，如此半年后还剩下许多没准备好的，更别说要能够在面试时从容对答。但是并不焦虑，只要做好规划，继续学下去，有限的内容总是能够准备完成的，剩下就是准备和面对不喜欢的面试环节。<br>  2024年1月4日，我通过了骏伯的面试，岗位是Java开发实习生。面试中，我提到希望接触一些高并发、分布式这样的复杂场景中的“高大上”的问题。进入公司两周，我了解到在实际工作中更多的是在不断地解决需求，跟团队成员协作对接，真正重要的是要有解决实际问题的能力。<br>  每次向导师提问的时候，他的分享毫无保留，各位同事都是我学习的对象。未来的日子，我将尽全力完成每个安排到的任务，提升编码能力，为公司创造价值。</p>
</li>
</ul>
<hr>

<h2 id="2024-01-10"><a href="#2024-01-10" class="headerlink" title="2024.01.10"></a>2024.01.10</h2><p><strong>模块 服务</strong>？一个服务占用一个端口， 在 .gradle 配置<br>{<br>    demo-api: 服务化接口定义项目<br>    demo-service: 服务化实现项目<br>}<br>api 接口与实现 分离，<br>UserApi接口上加 @FeignClient， 请求均分发送到多台服务器上<br>spring注入 与 单例模式。。</p>
<h2 id="01-18"><a href="#01-18" class="headerlink" title="01.18"></a>01.18</h2><ul>
<li><p>使用不同的窗口打开一个项目下的不同服务、、</p>
</li>
<li><p>使用 IDEA -&gt; Run&#x2F;Debug Configuration -&gt; Shorten command line 选项用于指定是否<strong>缩短命令行</strong>，以提高可读性或管理性，其中 None 表示不缩短，Classpath File 表示通过类路径文件缩短。<br>Java 源代码被编译成字节码文件（.class 文件）。字节码文件在 Java 虚拟机（JVM）上运行。运行时配置参数通过命令行或配置文件传递给 JVM 和应用程序。运行时参数包括类路径、系统属性、环境变量、应用程序参数等，用于影响应用程序在运行时的行为。</p>
</li>
<li><p>DevOps 懂技术的运维？ <a target="_blank" rel="noopener" href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B9%8B%E7%BE%8E/36%20DevOps%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%88%B0%E5%BA%95%E8%A6%81%E5%81%9A%E4%BB%80%E4%B9%88%E4%BA%8B%E6%83%85%EF%BC%9F.md">https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B9%8B%E7%BE%8E/36%20DevOps%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%88%B0%E5%BA%95%E8%A6%81%E5%81%9A%E4%BB%80%E4%B9%88%E4%BA%8B%E6%83%85%EF%BC%9F.md</a><br>DevOps 可以理解为一种开发和运维一起紧密协作的工作方式，从而可以更快更可靠地构建、测试和发布软件。DevOps 的主要原则就是自动化、信息透明可测量、构建协作文化。<br>DevOps 工程师，要做的事情就是帮助团队来实践 DevOps 的工作方式。具体可以帮助团队：建立基于持续集成和持续交付工作流程；建立基于日志的监控报警的系统，以及故障响应的流程；构建基于云计算和虚拟化技术的基础设施；形成 DevOps 的文化。DevOps 工程师做的事情，就是帮助团队基于 DevOps 原则来做事，让团队形成紧密协作的工作方式，更快更可靠的构建、测试和发布软件。</p>
</li>
</ul>
<h2 id="01-23"><a href="#01-23" class="headerlink" title="01.23"></a>01.23</h2><ul>
<li><p>Jedis 和 RedisTemplate有什么区别？<br>Jedis 是 Redis 的官方 Java 客户端，直接使用 Redis 的命令进行操作。它提供了比较底层的 API，需要手动管理连接、序列化等。RedisTemplate 是 Spring Data Redis 提供的 Redis 客户端，它在 Jedis 的基础上进行了封装，提供了更高层次的抽象和更多的功能。<br>如果你在使用 Spring 项目，并且希望更方便地集成 Redis，并提供更高层次的抽象和功能，那么推荐使用 RedisTemplate。如果你对 Redis 的命令较为了解，或者需要更底层的操作，那么 Jedis 可能更适合你。</p>
</li>
<li><p>SpringBoot实体类 DO 和 BO</p>
<ol>
<li><strong>DO（Data Object）：</strong>通常表示数据库中的数据实体，对应数据库表的结构。它主要用于数据存储和数据库操作，包含与数据库表字段一一对应的属性。DO 类的命名一般以 “DO” 为后缀，例如 <code>UserDO</code>，<code>OrderDO</code>。类中通常包含与数据库表字段对应的成员变量、getter 和 setter 方法。它不应包含业务逻辑，主要负责数据的持久化和映射。</li>
<li><strong>BO（Business Object）：</strong>通常表示业务层的业务实体，主要用于封装业务逻辑。BO 类一般包含与业务逻辑相关的属性和方法，与具体的数据存储形式无关。包含了一些业务逻辑的操作，比如计算、验证等。它不应直接与数据库进行交互，而是通过调用 Service 层或 DAO 层的方法实现数据的获取和存储。</li>
<li>在 Spring Boot 中，DO和 BO是一些常见的命名规范，用于表示在不同层次中使用的实体类。这些命名规范有助于代码的清晰性和可维护性。在业务逻辑层中，可以通过转换工具或框架进行 DO 和 BO 之间的转换，以完成数据的传递和处理。  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 利用实例BO对象生成DO对象</span></span><br><span class="line"><span class="type">OrderDO</span> <span class="variable">orderDO</span> <span class="operator">=</span> BeanMapperUtil.map(orderBO, OrderDO.class);</span><br></pre></td></tr></table></figure>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">map</span><span class="params">(Object sourceObject, Class&lt;T&gt; destObjectclazz)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (sourceObject == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">T</span> <span class="variable">destObject</span> <span class="operator">=</span> BeanUtils.instantiateClass(destObjectclazz);</span><br><span class="line">    <span class="comment">// 对象映射： 通过 copyProperties 方法，将源对象的属性值复制到目标对象中</span></span><br><span class="line">    copyProperties(sourceObject, destObject, <span class="literal">null</span>, (String[]) <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">return</span> destObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h2 id="01-30"><a href="#01-30" class="headerlink" title="01.30"></a>01.30</h2><ol>
<li>App拉新业务，增加白名单功能<ul>
<li>业务：当新接入一个客户或者媒体时，需要对整条链路进行验证，确保数据是能够正常传递的。媒体广告投放后台有一个联调功能，通过联调功能，能够指定媒体给特定一台手机发送测试广告，用户再点击广告可以触发一条广告点击数据，并发送到我方拉新业务系统，我方可以通过页面功能查到该广告点击数据的状态。如果该点击数据成功发给客户，说明链路一（媒体到客户）是通的，则可以使用我方业务系统页面功能手动触发一条转化数据，发给媒体，如果能发送成功，则说明整条链路是通的，则验证通过。</li>
<li>问题：使用联调功能，媒体给我方发送的广告点击数据，我们会做一些拦截处理，有时候不会将它们发给客户，这就使得没法进行下一步转化回传的动作，从而无法完成媒体的联调。一个典型的拦截处理的案例是，对于某些客户，我方在发送点击数据给对方时，需要调用客户的接口进行确认，判断当前用户是否是客户的目标用户，如果不是，则不发送点击数据给客户，这样的拦截称之为RTA拦截。拦截率由客户决定的，并且可能会很高，业务方用来联调的手机基本都被拦截了，从而无法完成联调。<br> handle 拦截，其实就是修改某些字段的状态，以在之后判定为某种情况而进行某种行为</li>
<li>解决：添加白名单，如果业务方用来测试的手机设备号在白名单内，则不进行拦截。</li>
<li>代码介绍<br> 仓库地址：<a target="_blank" rel="noopener" href="http://git.gzjunbo.net/junbo/junbo-newenergy.git%EF%BC%8C%E6%8B%89%E5%8F%96%E4%BB%A3%E7%A0%81%E5%90%8E%EF%BC%8C%E5%9F%BA%E4%BA%8Emaster%E5%88%86%E6%94%AF%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BC%80%E5%8F%91%E5%88%86%E6%94%AFdevelop-caif%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%88%86%E6%94%AF%E4%B8%8A%E6%94%B9%E4%BB%A3%E7%A0%81">http://git.gzjunbo.net/junbo/junbo-newenergy.git，拉取代码后，基于master分支创建一个自己的开发分支develop-caif，然后在这个分支上改代码</a><br> 两个服务：newenergy-web-admin、newenergybg-service，前者提供了一个接收点击数据的接口，在收到点击数据以后，会将其通过feign转发给newenergybg-service服务进行处理（注册中心为eureka）。<br> 接口对应的方法是：ConvTraceWebApi.send（newenergy-web-admin），它会调用newenergybg-service服务的ConvTraceApiImpl.upload方法，再通过MediaDataForwardProducer.produce方法，将其发送到Kafka消息队列，再由MediaDataForwardServiceImpl.consumeKafka方法进行消费，最终进入核心的业务处理逻辑方法，即MediaDataForwardServiceImpl.upload方法，我们需要修改的RTA拦截部分的代码就在这里面。</li>
<li>upload方法的内部处理逻辑如下：<br> 参数前置处理（initPreValidate）（一些通用逻辑，比如点击数据ID、时间字段的初始化）。<br> 参数校验（isValid）（校验点击数据是否有效，如果无效则不发给客户，比如媒体可能会将用户曝光数据发过来，此时不需要发给客户）。<br> 参数后置处理（initPostValidate）（一些带有复杂业务逻辑的处理，比如RTA拦截）。<br> 将校验通过的点击数据发给客户（transferToCustomer）。<br> 保存数据到数据库&#x2F;缓存（save）。<br> 我们需要修改的RTA拦截部分的代码在参数后置处理部分，具体方法是YoudaoMediaActionDataHandler.handle。</li>
<li>YoudaoMediaActionDataHandler.handle类内部处理逻辑<br> 媒体发给我方的数据可能不止用户点击数据，还包括了广告曝光数据（即用户只要看了广告，媒体就会通知我们），这类数据我们是不需要发给客户的，因此需要设置状态为NON_CLICK_NOT_TRANSFER_TO_CUSTOMER，后续代码流程识别出此状态后，不会将该数据发给客户。<br> 走RTA拦截，有一些前置条件，包括①业务方指定了客户点击监测链接ID为RTA链接（客户的点击监测链接是客户提供过来用于接收我方点击数据的接口）（RTA链接是一个标记，标识当前点击数据发给客户前，要先调用客户的RTA接口过滤一道，最终只发送客户需要的用户）②如果当前数据类型为曝光，且曝光总数与点击总数的比例小于requestRate（默认为4:1）<br> 对于满足前置条件的数据，则发起RTA请求，将结果记录下来（结果指的是客户是否接受当前用户，即是否参竞-isParticipated），用于业务方后续使用<br> 如果客户不接受当前用户，则设置状态RTA_EXCLUDED，后续代码流程识别出此状态后，不会将该数据发给客户。（添加白名单后，如果客户不接受当前用户，不设置状态RTA_EXCLUDED，此时后续流程会正常将该数据发给客户）</li>
</ul>
</li>
<li>更多了解业务（年后我跟你再将一些代码，然后在上面做一些修改）<br>监测系统，，单元测试，，<br>，，</li>
</ol>
<h2 id="02-20"><a href="#02-20" class="headerlink" title="02.20"></a>02.20</h2><ul>
<li>需求：开发媒体上报规则报表的分页查询接口<ul>
<li>需求原型：<a target="_blank" rel="noopener" href="https://axhub.im/pro/62d03dd7790d2dd4/#g=1&p=%E5%AA%92%E4%BD%93%E4%B8%8A%E6%8A%A5%E8%A7%84%E5%88%99%E6%8A%A5%E8%A1%A8">https://axhub.im/pro/62d03dd7790d2dd4/#g=1&amp;p=%E5%AA%92%E4%BD%93%E4%B8%8A%E6%8A%A5%E8%A7%84%E5%88%99%E6%8A%A5%E8%A1%A8</a></li>
<li>拉一个develop-caif分支，后续代码开发在此分支上进行，分支对应整个项目，其中包括了后面涉及到的所有微服务</li>
<li>数据库建表</li>
<li>使用junboGenerator插件生成表结构对应的MyBatis代码（DO, BO, Mapper文件），用于操作数据库。修改 &#x2F;resources&#x2F;generator&#x2F;generatorConfig.xml 文件，运行插件： Gradle -&gt; newenerge-soa -&gt; Tasks -&gt; junbo -&gt; junboGenerater，配置新表（注意，此时需要将其他表的配置项注释掉），后续插件执行时会根据数据库表结构生成相应的Java代码（DO、Mapper等等），将代码文件放到特定的文件目录下。<br>  config.xml 中有两类列属性需要特殊标记，一类是id，一类是枚举字段（在数据库里可能是int，而在java中是enum，此时插件默认无法将这两个类型对应，需要覆盖掉插件的默认行为，手动进行转换）</li>
<li>实现分页功能，大致步骤包括：<br>  ①【newenergy-api】定义XXXApi接口及page方法<br>  ②【newenergybg-service】定义XXXService接口及page方法<br>  ③【newenergybg-service】定义XXXApiImpl类（Controller），实现XXXApi接口及page方法，通过调用XXXService完成分页查询数据的操作<br>  ④【newenergybg-service】定义XXXServiceImpl类，实现XXXService接口及page方法，通过MyBatis分页插件及XXXMapper的查询方法，完成数据的分页查询。<br>  ⑤【newenergy-api】发布XXXApi：修改版本号（xx.snapshot），发布新的jar包（包含新的XXXApi接口）到 Maven 仓库；Gradle -&gt; newenergy-api -&gt; Tasks -&gt; publishing -&gt; publish<br>  ⑥【newenergy-web-admin】引入最新的XXXApi：更新maven，依赖新版本jar包，以使用新的XXXApi接口<br>  ⑦【newenergy-web-admin】定义XXXWebApi类及page方法（Controller），通过XXXApi的page方法，完成数据的分页查询。</li>
<li>服务关系：<br>  【newenergy-api】：定义接口信息，同时被【newenergybg-service】和【newenergy-web-admin】依赖<br>  【newenergybg-service】是【newenergy-api】的实现，实际的服务端；<br>  【newenergy-web-admin】接收前端请求（防止暴露实际服务端），从 maven 获取 jar 包反射获取接口和实体类信息。</li>
<li>参数信息：<br>  Api方法中：XXXRequest、XXXResponse<br>  业务层：XXXBO<br>  持久层：直接与数据库交互 XXXDO<br>  实际上，由于需要返回的数据是由多表查询而来，任一 BO 或 DO 都没法涵盖所有属性字段。所以新增一个 分页查询entity类 ConvCallbackRuleDailyReportPageItem，要在 mapper.xml 里修改 resultMap 中查询数据与返回值的对应关系，在后续数据转换的过程中主要前后类的字段的对应。</li>
<li>【集成测试】本地启动newenergybg-service服务和newenergy-web-admin服务，通过postman调用接口进行测试，期望结果是，查出来的结果与数据库中的数据一致。<br>  实际请求发送流程为：前端客户端程序发起请求 -&gt;【newenergy-web-admin】XXXWebApi.page -&gt; 【newenergybg-service】XXXApiImpl.page -&gt; 【newenergybg-service】XXXServiceImpl.page -&gt; 【newenergybg-service】 XXXMapper.selectByExample<br>  测试方法：打断点，观察获取和处理的数据从 mapper-&gt;serviceImpl-&gt;apiImpl 中的变化，注意数据转换过程<br>  使用 postman 给本地服务发送请求，如 localhost:1087&#x2F;service&#x2F;conv-callback-rule-daily-report&#x2F;page，在 Body 携带 raw 的 json 数据  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;beginDate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-02-11&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;productCode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pageIndex&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pageSize&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>提交代码到远程仓库develop-caif分支</li>
<li>在 Yapi 编写接口文档</li>
</ul>
</li>
</ul>
<h2 id="02-22"><a href="#02-22" class="headerlink" title="02.22"></a>02.22</h2><ul>
<li>YY yy &#x3D; BeanMapperUtil.map(xx, YY.class); 从xx复制属性值而来生成YY类型的实例yy</li>
<li>List<ConvCallbackRuleDailyReportResponse> list &#x3D; page.getList().stream().map(this::toResponse).collect(Collectors.toList());<br>  Java中的Stream API 是一种用于处理集合数据的强大工具，在 Java 8 中引入，它允许我们以声明性方式处理数据集合（即你可以描述你想要做什么，而不是描述如何去做）,它使得集合操作更加简洁、易读和高效。<ul>
<li>创建 Stream：你可以从集合（如 List、Set 等）创建 Stream，或者从数组创建。  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>);  </span><br><span class="line">Stream&lt;String&gt; stream = list.stream();  </span><br><span class="line"><span class="comment">// 或者直接从数组创建  </span></span><br><span class="line">Stream&lt;String&gt; arrayStream = Arrays.stream(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>&#125;);</span><br></pre></td></tr></table></figure></li>
<li>中间操作：中间操作是返回新 Stream 的操作，它们可以链接起来形成一个处理链。常见的中间操作有 filter、map、sorted 等。  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>);  </span><br><span class="line">    List&lt;String&gt; result = list.stream()  </span><br><span class="line">                        .filter(s -&gt; s.matches(<span class="string">&quot;[a-c]+&quot;</span>))  <span class="comment">// 过滤出以 a-c 开头的字符串  </span></span><br><span class="line">                        .map(String::toUpperCase)         <span class="comment">// 将字符串转换为大写  </span></span><br><span class="line">                        .sorted()                          <span class="comment">// 对字符串进行排序  </span></span><br><span class="line">                        .collect(Collectors.toList());     <span class="comment">// 收集到新的 List 中  </span></span><br></pre></td></tr></table></figure></li>
<li>终端操作：结束 Stream 处理并返回结果。常见的终端操作有 forEach、reduce、collect 等。  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>);  </span><br><span class="line"><span class="comment">// 使用 forEach 遍历 Stream  </span></span><br><span class="line">list.stream().forEach(System.out::println);  </span><br><span class="line"><span class="comment">// 使用 reduce 对 Stream 中的元素进行归约操作，例如求和  </span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> list.stream().mapToInt(Integer::parseInt).sum();  </span><br><span class="line">System.out.println(sum);  <span class="comment">// 输出：6（&#x27;a&#x27;、&#x27;b&#x27;、&#x27;c&#x27;、&#x27;d&#x27; 的 ASCII 码之和）  </span></span><br><span class="line"><span class="comment">// 使用 collect 将 Stream 中的元素收集到新的集合中  </span></span><br><span class="line">List&lt;String&gt; collectedList = list.stream().collect(Collectors.toList());  </span><br><span class="line">System.out.println(collectedList);  <span class="comment">// 输出：[a, b, c, d]</span></span><br></pre></td></tr></table></figure></li>
<li>并行 Stream：Java Stream API 还支持并行处理，这可以充分利用多核处理器的优势，提高处理速度。要创建一个并行 Stream，你可以使用 parallelStream() 方法。  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>);  </span><br><span class="line"><span class="comment">// 使用 parallelStream 创建并行 Stream  </span></span><br><span class="line">List&lt;String&gt; collectedList = list.parallelStream().collect(Collectors.toList());  </span><br><span class="line">System.out.println(collectedList);  <span class="comment">// 输出：[a, b, c, d]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>在Java中，Stream流和序列化是两个不同的概念，但它们在某些场景下可以相互关联。<ul>
<li>Stream流是Java 8引入的一个新特性，它允许我们以声明性方式处理数据集合。Stream API提供了一种高效且简洁的方式来处理数据，例如过滤、映射、排序和聚合等操作。Stream流主要关注的是数据的处理和转换，而不是数据的存储或传输。</li>
<li>序列化（Serialization）则是将对象的状态转换为字节流的过程，以便可以将这些字节流持久化保存或通过网络传输到其他位置。序列化允许我们将对象的状态保存起来，然后在需要时恢复对象的状态。Java提供了ObjectOutputStream和ObjectInputStream类来进行对象的序列化和反序列化。</li>
<li>虽然Stream流和序列化是两个不同的概念，但它们在某些情况下可以相互结合使用。例如，当我们需要将一个对象的状态通过网络传输到另一个位置时，我们可以先将对象序列化为字节流，然后使用Stream流来处理和转换这些字节流。在接收端，我们可以使用Stream流来读取字节流，并使用反序列化来恢复对象的状态。</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/01/04/%E9%AA%8F%E4%BC%AF/" data-id="clwzx7xyq000vycv5744tbhi7" data-title="骏 伯 网 络" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/01/07/SpringCloud/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          SpringCloud
        
      </div>
    </a>
  
  
    <a href="/2023/10/20/%E6%98%A5%E6%8B%9B2024/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">春 招 2024</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2046/12/">December 2046</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2046/12/30/nice-photo/">Nice Photo</a>
          </li>
        
          <li>
            <a href="/2024/05/01/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/">毕 业 设 计</a>
          </li>
        
          <li>
            <a href="/2024/01/11/RabbitMQ/">RabbitMQ</a>
          </li>
        
          <li>
            <a href="/2024/01/07/SpringCloud/">SpringCloud</a>
          </li>
        
          <li>
            <a href="/2024/01/04/%E9%AA%8F%E4%BC%AF/">骏 伯 网 络</a>
          </li>
        
          <li>
            <a href="/2023/10/20/%E6%98%A5%E6%8B%9B2024/">春 招 2024</a>
          </li>
        
          <li>
            <a href="/2023/10/13/%E9%9D%A2%E8%AF%95_%E4%B8%AA%E4%BA%BA/">面 逝 | 个人</a>
          </li>
        
          <li>
            <a href="/2023/10/12/%E9%9D%A2%E8%AF%95_Java/">面 逝 | Java</a>
          </li>
        
          <li>
            <a href="/2023/10/11/%E9%9D%A2%E8%AF%95_%E7%BB%84%E4%BB%B6/">面 逝 | 组件</a>
          </li>
        
          <li>
            <a href="/2023/07/31/Colab/">Colab</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 fengcai<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>